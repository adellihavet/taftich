(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const u of c.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function l(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(o){if(o.ep)return;o.ep=!0;const c=l(o);fetch(o.href,c)}})();function db(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Mu={exports:{}},ir={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Im;function V1(){if(Im)return ir;Im=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function l(i,o,c){var u=null;if(c!==void 0&&(u=""+c),o.key!==void 0&&(u=""+o.key),"key"in o){c={};for(var f in o)f!=="key"&&(c[f]=o[f])}else c=o;return o=c.ref,{$$typeof:n,type:i,key:u,ref:o!==void 0?o:null,props:c}}return ir.Fragment=t,ir.jsx=l,ir.jsxs=l,ir}var zm;function F1(){return zm||(zm=1,Mu.exports=V1()),Mu.exports}var e=F1(),Du={exports:{}},Ie={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lm;function J1(){if(Lm)return Ie;Lm=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),l=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),u=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),N=Symbol.iterator;function C(_){return _===null||typeof _!="object"?null:(_=N&&_[N]||_["@@iterator"],typeof _=="function"?_:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,R={};function P(_,M,j){this.props=_,this.context=M,this.refs=R,this.updater=j||A}P.prototype.isReactComponent={},P.prototype.setState=function(_,M){if(typeof _!="object"&&typeof _!="function"&&_!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,_,M,"setState")},P.prototype.forceUpdate=function(_){this.updater.enqueueForceUpdate(this,_,"forceUpdate")};function O(){}O.prototype=P.prototype;function z(_,M,j){this.props=_,this.context=M,this.refs=R,this.updater=j||A}var K=z.prototype=new O;K.constructor=z,E(K,P.prototype),K.isPureReactComponent=!0;var G=Array.isArray;function F(){}var $={H:null,A:null,T:null,S:null},B=Object.prototype.hasOwnProperty;function q(_,M,j){var T=j.ref;return{$$typeof:n,type:_,key:M,ref:T!==void 0?T:null,props:j}}function J(_,M){return q(_.type,M,_.props)}function Q(_){return typeof _=="object"&&_!==null&&_.$$typeof===n}function U(_){var M={"=":"=0",":":"=2"};return"$"+_.replace(/[=:]/g,function(j){return M[j]})}var ae=/\/+/g;function se(_,M){return typeof _=="object"&&_!==null&&_.key!=null?U(""+_.key):M.toString(36)}function ne(_){switch(_.status){case"fulfilled":return _.value;case"rejected":throw _.reason;default:switch(typeof _.status=="string"?_.then(F,F):(_.status="pending",_.then(function(M){_.status==="pending"&&(_.status="fulfilled",_.value=M)},function(M){_.status==="pending"&&(_.status="rejected",_.reason=M)})),_.status){case"fulfilled":return _.value;case"rejected":throw _.reason}}throw _}function w(_,M,j,T,L){var H=typeof _;(H==="undefined"||H==="boolean")&&(_=null);var Z=!1;if(_===null)Z=!0;else switch(H){case"bigint":case"string":case"number":Z=!0;break;case"object":switch(_.$$typeof){case n:case t:Z=!0;break;case b:return Z=_._init,w(Z(_._payload),M,j,T,L)}}if(Z)return L=L(_),Z=T===""?"."+se(_,0):T,G(L)?(j="",Z!=null&&(j=Z.replace(ae,"$&/")+"/"),w(L,M,j,"",function(je){return je})):L!=null&&(Q(L)&&(L=J(L,j+(L.key==null||_&&_.key===L.key?"":(""+L.key).replace(ae,"$&/")+"/")+Z)),M.push(L)),1;Z=0;var de=T===""?".":T+":";if(G(_))for(var fe=0;fe<_.length;fe++)T=_[fe],H=de+se(T,fe),Z+=w(T,M,j,H,L);else if(fe=C(_),typeof fe=="function")for(_=fe.call(_),fe=0;!(T=_.next()).done;)T=T.value,H=de+se(T,fe++),Z+=w(T,M,j,H,L);else if(H==="object"){if(typeof _.then=="function")return w(ne(_),M,j,T,L);throw M=String(_),Error("Objects are not valid as a React child (found: "+(M==="[object Object]"?"object with keys {"+Object.keys(_).join(", ")+"}":M)+"). If you meant to render a collection of children, use an array instead.")}return Z}function D(_,M,j){if(_==null)return _;var T=[],L=0;return w(_,T,"","",function(H){return M.call(j,H,L++)}),T}function V(_){if(_._status===-1){var M=_._result;M=M(),M.then(function(j){(_._status===0||_._status===-1)&&(_._status=1,_._result=j)},function(j){(_._status===0||_._status===-1)&&(_._status=2,_._result=j)}),_._status===-1&&(_._status=0,_._result=M)}if(_._status===1)return _._result.default;throw _._result}var Y=typeof reportError=="function"?reportError:function(_){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var M=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof _=="object"&&_!==null&&typeof _.message=="string"?String(_.message):String(_),error:_});if(!window.dispatchEvent(M))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",_);return}console.error(_)},le={map:D,forEach:function(_,M,j){D(_,function(){M.apply(this,arguments)},j)},count:function(_){var M=0;return D(_,function(){M++}),M},toArray:function(_){return D(_,function(M){return M})||[]},only:function(_){if(!Q(_))throw Error("React.Children.only expected to receive a single React element child.");return _}};return Ie.Activity=y,Ie.Children=le,Ie.Component=P,Ie.Fragment=l,Ie.Profiler=o,Ie.PureComponent=z,Ie.StrictMode=i,Ie.Suspense=x,Ie.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=$,Ie.__COMPILER_RUNTIME={__proto__:null,c:function(_){return $.H.useMemoCache(_)}},Ie.cache=function(_){return function(){return _.apply(null,arguments)}},Ie.cacheSignal=function(){return null},Ie.cloneElement=function(_,M,j){if(_==null)throw Error("The argument must be a React element, but you passed "+_+".");var T=E({},_.props),L=_.key;if(M!=null)for(H in M.key!==void 0&&(L=""+M.key),M)!B.call(M,H)||H==="key"||H==="__self"||H==="__source"||H==="ref"&&M.ref===void 0||(T[H]=M[H]);var H=arguments.length-2;if(H===1)T.children=j;else if(1<H){for(var Z=Array(H),de=0;de<H;de++)Z[de]=arguments[de+2];T.children=Z}return q(_.type,L,T)},Ie.createContext=function(_){return _={$$typeof:u,_currentValue:_,_currentValue2:_,_threadCount:0,Provider:null,Consumer:null},_.Provider=_,_.Consumer={$$typeof:c,_context:_},_},Ie.createElement=function(_,M,j){var T,L={},H=null;if(M!=null)for(T in M.key!==void 0&&(H=""+M.key),M)B.call(M,T)&&T!=="key"&&T!=="__self"&&T!=="__source"&&(L[T]=M[T]);var Z=arguments.length-2;if(Z===1)L.children=j;else if(1<Z){for(var de=Array(Z),fe=0;fe<Z;fe++)de[fe]=arguments[fe+2];L.children=de}if(_&&_.defaultProps)for(T in Z=_.defaultProps,Z)L[T]===void 0&&(L[T]=Z[T]);return q(_,H,L)},Ie.createRef=function(){return{current:null}},Ie.forwardRef=function(_){return{$$typeof:f,render:_}},Ie.isValidElement=Q,Ie.lazy=function(_){return{$$typeof:b,_payload:{_status:-1,_result:_},_init:V}},Ie.memo=function(_,M){return{$$typeof:m,type:_,compare:M===void 0?null:M}},Ie.startTransition=function(_){var M=$.T,j={};$.T=j;try{var T=_(),L=$.S;L!==null&&L(j,T),typeof T=="object"&&T!==null&&typeof T.then=="function"&&T.then(F,Y)}catch(H){Y(H)}finally{M!==null&&j.types!==null&&(M.types=j.types),$.T=M}},Ie.unstable_useCacheRefresh=function(){return $.H.useCacheRefresh()},Ie.use=function(_){return $.H.use(_)},Ie.useActionState=function(_,M,j){return $.H.useActionState(_,M,j)},Ie.useCallback=function(_,M){return $.H.useCallback(_,M)},Ie.useContext=function(_){return $.H.useContext(_)},Ie.useDebugValue=function(){},Ie.useDeferredValue=function(_,M){return $.H.useDeferredValue(_,M)},Ie.useEffect=function(_,M){return $.H.useEffect(_,M)},Ie.useEffectEvent=function(_){return $.H.useEffectEvent(_)},Ie.useId=function(){return $.H.useId()},Ie.useImperativeHandle=function(_,M,j){return $.H.useImperativeHandle(_,M,j)},Ie.useInsertionEffect=function(_,M){return $.H.useInsertionEffect(_,M)},Ie.useLayoutEffect=function(_,M){return $.H.useLayoutEffect(_,M)},Ie.useMemo=function(_,M){return $.H.useMemo(_,M)},Ie.useOptimistic=function(_,M){return $.H.useOptimistic(_,M)},Ie.useReducer=function(_,M,j){return $.H.useReducer(_,M,j)},Ie.useRef=function(_){return $.H.useRef(_)},Ie.useState=function(_){return $.H.useState(_)},Ie.useSyncExternalStore=function(_,M,j){return $.H.useSyncExternalStore(_,M,j)},Ie.useTransition=function(){return $.H.useTransition()},Ie.version="19.2.0",Ie}var Um;function ph(){return Um||(Um=1,Du.exports=J1()),Du.exports}var k=ph();const Ws=db(k);var Ru={exports:{}},rr={},Iu={exports:{}},zu={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pm;function Y1(){return Pm||(Pm=1,(function(n){function t(w,D){var V=w.length;w.push(D);e:for(;0<V;){var Y=V-1>>>1,le=w[Y];if(0<o(le,D))w[Y]=D,w[V]=le,V=Y;else break e}}function l(w){return w.length===0?null:w[0]}function i(w){if(w.length===0)return null;var D=w[0],V=w.pop();if(V!==D){w[0]=V;e:for(var Y=0,le=w.length,_=le>>>1;Y<_;){var M=2*(Y+1)-1,j=w[M],T=M+1,L=w[T];if(0>o(j,V))T<le&&0>o(L,j)?(w[Y]=L,w[T]=V,Y=T):(w[Y]=j,w[M]=V,Y=M);else if(T<le&&0>o(L,V))w[Y]=L,w[T]=V,Y=T;else break e}}return D}function o(w,D){var V=w.sortIndex-D.sortIndex;return V!==0?V:w.id-D.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;n.unstable_now=function(){return c.now()}}else{var u=Date,f=u.now();n.unstable_now=function(){return u.now()-f}}var x=[],m=[],b=1,y=null,N=3,C=!1,A=!1,E=!1,R=!1,P=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,z=typeof setImmediate<"u"?setImmediate:null;function K(w){for(var D=l(m);D!==null;){if(D.callback===null)i(m);else if(D.startTime<=w)i(m),D.sortIndex=D.expirationTime,t(x,D);else break;D=l(m)}}function G(w){if(E=!1,K(w),!A)if(l(x)!==null)A=!0,F||(F=!0,U());else{var D=l(m);D!==null&&ne(G,D.startTime-w)}}var F=!1,$=-1,B=5,q=-1;function J(){return R?!0:!(n.unstable_now()-q<B)}function Q(){if(R=!1,F){var w=n.unstable_now();q=w;var D=!0;try{e:{A=!1,E&&(E=!1,O($),$=-1),C=!0;var V=N;try{t:{for(K(w),y=l(x);y!==null&&!(y.expirationTime>w&&J());){var Y=y.callback;if(typeof Y=="function"){y.callback=null,N=y.priorityLevel;var le=Y(y.expirationTime<=w);if(w=n.unstable_now(),typeof le=="function"){y.callback=le,K(w),D=!0;break t}y===l(x)&&i(x),K(w)}else i(x);y=l(x)}if(y!==null)D=!0;else{var _=l(m);_!==null&&ne(G,_.startTime-w),D=!1}}break e}finally{y=null,N=V,C=!1}D=void 0}}finally{D?U():F=!1}}}var U;if(typeof z=="function")U=function(){z(Q)};else if(typeof MessageChannel<"u"){var ae=new MessageChannel,se=ae.port2;ae.port1.onmessage=Q,U=function(){se.postMessage(null)}}else U=function(){P(Q,0)};function ne(w,D){$=P(function(){w(n.unstable_now())},D)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(w){w.callback=null},n.unstable_forceFrameRate=function(w){0>w||125<w?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<w?Math.floor(1e3/w):5},n.unstable_getCurrentPriorityLevel=function(){return N},n.unstable_next=function(w){switch(N){case 1:case 2:case 3:var D=3;break;default:D=N}var V=N;N=D;try{return w()}finally{N=V}},n.unstable_requestPaint=function(){R=!0},n.unstable_runWithPriority=function(w,D){switch(w){case 1:case 2:case 3:case 4:case 5:break;default:w=3}var V=N;N=w;try{return D()}finally{N=V}},n.unstable_scheduleCallback=function(w,D,V){var Y=n.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?Y+V:Y):V=Y,w){case 1:var le=-1;break;case 2:le=250;break;case 5:le=1073741823;break;case 4:le=1e4;break;default:le=5e3}return le=V+le,w={id:b++,callback:D,priorityLevel:w,startTime:V,expirationTime:le,sortIndex:-1},V>Y?(w.sortIndex=V,t(m,w),l(x)===null&&w===l(m)&&(E?(O($),$=-1):E=!0,ne(G,V-Y))):(w.sortIndex=le,t(x,w),A||C||(A=!0,F||(F=!0,U()))),w},n.unstable_shouldYield=J,n.unstable_wrapCallback=function(w){var D=N;return function(){var V=N;N=D;try{return w.apply(this,arguments)}finally{N=V}}}})(zu)),zu}var $m;function K1(){return $m||($m=1,Iu.exports=Y1()),Iu.exports}var Lu={exports:{}},Jt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qm;function Q1(){if(qm)return Jt;qm=1;var n=ph();function t(x){var m="https://react.dev/errors/"+x;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)m+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+x+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(){}var i={d:{f:l,r:function(){throw Error(t(522))},D:l,C:l,L:l,m:l,X:l,S:l,M:l},p:0,findDOMNode:null},o=Symbol.for("react.portal");function c(x,m,b){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:y==null?null:""+y,children:x,containerInfo:m,implementation:b}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(x,m){if(x==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return Jt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Jt.createPortal=function(x,m){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(t(299));return c(x,m,null,b)},Jt.flushSync=function(x){var m=u.T,b=i.p;try{if(u.T=null,i.p=2,x)return x()}finally{u.T=m,i.p=b,i.d.f()}},Jt.preconnect=function(x,m){typeof x=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,i.d.C(x,m))},Jt.prefetchDNS=function(x){typeof x=="string"&&i.d.D(x)},Jt.preinit=function(x,m){if(typeof x=="string"&&m&&typeof m.as=="string"){var b=m.as,y=f(b,m.crossOrigin),N=typeof m.integrity=="string"?m.integrity:void 0,C=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;b==="style"?i.d.S(x,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:y,integrity:N,fetchPriority:C}):b==="script"&&i.d.X(x,{crossOrigin:y,integrity:N,fetchPriority:C,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},Jt.preinitModule=function(x,m){if(typeof x=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var b=f(m.as,m.crossOrigin);i.d.M(x,{crossOrigin:b,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&i.d.M(x)},Jt.preload=function(x,m){if(typeof x=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var b=m.as,y=f(b,m.crossOrigin);i.d.L(x,b,{crossOrigin:y,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},Jt.preloadModule=function(x,m){if(typeof x=="string")if(m){var b=f(m.as,m.crossOrigin);i.d.m(x,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:b,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else i.d.m(x)},Jt.requestFormReset=function(x){i.d.r(x)},Jt.unstable_batchedUpdates=function(x,m){return x(m)},Jt.useFormState=function(x,m,b){return u.H.useFormState(x,m,b)},Jt.useFormStatus=function(){return u.H.useHostTransitionStatus()},Jt.version="19.2.0",Jt}var Om;function ub(){if(Om)return Lu.exports;Om=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),Lu.exports=Q1(),Lu.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gm;function X1(){if(Gm)return rr;Gm=1;var n=K1(),t=ph(),l=ub();function i(s){var a="https://react.dev/errors/"+s;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)a+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+s+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function c(s){var a=s,r=s;if(s.alternate)for(;a.return;)a=a.return;else{s=a;do a=s,(a.flags&4098)!==0&&(r=a.return),s=a.return;while(s)}return a.tag===3?r:null}function u(s){if(s.tag===13){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function f(s){if(s.tag===31){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function x(s){if(c(s)!==s)throw Error(i(188))}function m(s){var a=s.alternate;if(!a){if(a=c(s),a===null)throw Error(i(188));return a!==s?null:s}for(var r=s,d=a;;){var g=r.return;if(g===null)break;var v=g.alternate;if(v===null){if(d=g.return,d!==null){r=d;continue}break}if(g.child===v.child){for(v=g.child;v;){if(v===r)return x(g),s;if(v===d)return x(g),a;v=v.sibling}throw Error(i(188))}if(r.return!==d.return)r=g,d=v;else{for(var S=!1,I=g.child;I;){if(I===r){S=!0,r=g,d=v;break}if(I===d){S=!0,d=g,r=v;break}I=I.sibling}if(!S){for(I=v.child;I;){if(I===r){S=!0,r=v,d=g;break}if(I===d){S=!0,d=v,r=g;break}I=I.sibling}if(!S)throw Error(i(189))}}if(r.alternate!==d)throw Error(i(190))}if(r.tag!==3)throw Error(i(188));return r.stateNode.current===r?s:a}function b(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s;for(s=s.child;s!==null;){if(a=b(s),a!==null)return a;s=s.sibling}return null}var y=Object.assign,N=Symbol.for("react.element"),C=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),O=Symbol.for("react.consumer"),z=Symbol.for("react.context"),K=Symbol.for("react.forward_ref"),G=Symbol.for("react.suspense"),F=Symbol.for("react.suspense_list"),$=Symbol.for("react.memo"),B=Symbol.for("react.lazy"),q=Symbol.for("react.activity"),J=Symbol.for("react.memo_cache_sentinel"),Q=Symbol.iterator;function U(s){return s===null||typeof s!="object"?null:(s=Q&&s[Q]||s["@@iterator"],typeof s=="function"?s:null)}var ae=Symbol.for("react.client.reference");function se(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===ae?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case E:return"Fragment";case P:return"Profiler";case R:return"StrictMode";case G:return"Suspense";case F:return"SuspenseList";case q:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case A:return"Portal";case z:return s.displayName||"Context";case O:return(s._context.displayName||"Context")+".Consumer";case K:var a=s.render;return s=s.displayName,s||(s=a.displayName||a.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case $:return a=s.displayName||null,a!==null?a:se(s.type)||"Memo";case B:a=s._payload,s=s._init;try{return se(s(a))}catch{}}return null}var ne=Array.isArray,w=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,D=l.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,V={pending:!1,data:null,method:null,action:null},Y=[],le=-1;function _(s){return{current:s}}function M(s){0>le||(s.current=Y[le],Y[le]=null,le--)}function j(s,a){le++,Y[le]=s.current,s.current=a}var T=_(null),L=_(null),H=_(null),Z=_(null);function de(s,a){switch(j(H,a),j(L,s),j(T,null),a.nodeType){case 9:case 11:s=(s=a.documentElement)&&(s=s.namespaceURI)?nm(s):0;break;default:if(s=a.tagName,a=a.namespaceURI)a=nm(a),s=lm(a,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}M(T),j(T,s)}function fe(){M(T),M(L),M(H)}function je(s){s.memoizedState!==null&&j(Z,s);var a=T.current,r=lm(a,s.type);a!==r&&(j(L,s),j(T,r))}function we(s){L.current===s&&(M(T),M(L)),Z.current===s&&(M(Z),sr._currentValue=V)}var xe,Ne;function Ae(s){if(xe===void 0)try{throw Error()}catch(r){var a=r.stack.trim().match(/\n( *(at )?)/);xe=a&&a[1]||"",Ne=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+xe+s+Ne}var ie=!1;function ee(s,a){if(!s||ie)return"";ie=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(a){var be=function(){throw Error()};if(Object.defineProperty(be.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(be,[])}catch(he){var ue=he}Reflect.construct(s,[],be)}else{try{be.call()}catch(he){ue=he}s.call(be.prototype)}}else{try{throw Error()}catch(he){ue=he}(be=s())&&typeof be.catch=="function"&&be.catch(function(){})}}catch(he){if(he&&ue&&typeof he.stack=="string")return[he.stack,ue.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=d.DetermineComponentFrameRoot(),S=v[0],I=v[1];if(S&&I){var X=S.split(`
`),oe=I.split(`
`);for(g=d=0;d<X.length&&!X[d].includes("DetermineComponentFrameRoot");)d++;for(;g<oe.length&&!oe[g].includes("DetermineComponentFrameRoot");)g++;if(d===X.length||g===oe.length)for(d=X.length-1,g=oe.length-1;1<=d&&0<=g&&X[d]!==oe[g];)g--;for(;1<=d&&0<=g;d--,g--)if(X[d]!==oe[g]){if(d!==1||g!==1)do if(d--,g--,0>g||X[d]!==oe[g]){var me=`
`+X[d].replace(" at new "," at ");return s.displayName&&me.includes("<anonymous>")&&(me=me.replace("<anonymous>",s.displayName)),me}while(1<=d&&0<=g);break}}}finally{ie=!1,Error.prepareStackTrace=r}return(r=s?s.displayName||s.name:"")?Ae(r):""}function ke(s,a){switch(s.tag){case 26:case 27:case 5:return Ae(s.type);case 16:return Ae("Lazy");case 13:return s.child!==a&&a!==null?Ae("Suspense Fallback"):Ae("Suspense");case 19:return Ae("SuspenseList");case 0:case 15:return ee(s.type,!1);case 11:return ee(s.type.render,!1);case 1:return ee(s.type,!0);case 31:return Ae("Activity");default:return""}}function jt(s){try{var a="",r=null;do a+=ke(s,r),r=s,s=s.return;while(s);return a}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}var os=Object.prototype.hasOwnProperty,Rn=n.unstable_scheduleCallback,In=n.unstable_cancelCallback,Zl=n.unstable_shouldYield,Wl=n.unstable_requestPaint,Qe=n.unstable_now,ml=n.unstable_getCurrentPriorityLevel,zn=n.unstable_ImmediatePriority,ea=n.unstable_UserBlockingPriority,Vs=n.unstable_NormalPriority,sn=n.unstable_LowPriority,Ln=n.unstable_IdlePriority,mi=n.log,ta=n.unstable_setDisableYieldValue,ge=null,Te=null;function pt(s){if(typeof mi=="function"&&ta(s),Te&&typeof Te.setStrictMode=="function")try{Te.setStrictMode(ge,s)}catch{}}var We=Math.clz32?Math.clz32:nn,Ft=Math.log,Fs=Math.LN2;function nn(s){return s>>>=0,s===0?32:31-(Ft(s)/Fs|0)|0}var Rt=256,ln=262144,an=4194304;function Js(s){var a=s&42;if(a!==0)return a;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function pl(s,a,r){var d=s.pendingLanes;if(d===0)return 0;var g=0,v=s.suspendedLanes,S=s.pingedLanes;s=s.warmLanes;var I=d&134217727;return I!==0?(d=I&~v,d!==0?g=Js(d):(S&=I,S!==0?g=Js(S):r||(r=I&~s,r!==0&&(g=Js(r))))):(I=d&~v,I!==0?g=Js(I):S!==0?g=Js(S):r||(r=d&~s,r!==0&&(g=Js(r)))),g===0?0:a!==0&&a!==g&&(a&v)===0&&(v=g&-g,r=a&-a,v>=r||v===32&&(r&4194048)!==0)?a:g}function gl(s,a){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&a)===0}function Nc(s,a){switch(s){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Is(){var s=an;return an<<=1,(an&62914560)===0&&(an=4194304),s}function zs(s){for(var a=[],r=0;31>r;r++)a.push(s);return a}function It(s,a){s.pendingLanes|=a,a!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function jc(s,a,r,d,g,v){var S=s.pendingLanes;s.pendingLanes=r,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=r,s.entangledLanes&=r,s.errorRecoveryDisabledLanes&=r,s.shellSuspendCounter=0;var I=s.entanglements,X=s.expirationTimes,oe=s.hiddenUpdates;for(r=S&~r;0<r;){var me=31-We(r),be=1<<me;I[me]=0,X[me]=-1;var ue=oe[me];if(ue!==null)for(oe[me]=null,me=0;me<ue.length;me++){var he=ue[me];he!==null&&(he.lane&=-536870913)}r&=~be}d!==0&&ye(s,d,0),v!==0&&g===0&&s.tag!==0&&(s.suspendedLanes|=v&~(S&~a))}function ye(s,a,r){s.pendingLanes|=a,s.suspendedLanes&=~a;var d=31-We(a);s.entangledLanes|=a,s.entanglements[d]=s.entanglements[d]|1073741824|r&261930}function Se(s,a){var r=s.entangledLanes|=a;for(s=s.entanglements;r;){var d=31-We(r),g=1<<d;g&a|s[d]&a&&(s[d]|=a),r&=~g}}function De(s,a){var r=a&-a;return r=(r&42)!==0?1:et(r),(r&(s.suspendedLanes|a))!==0?0:r}function et(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function wt(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function qt(){var s=D.p;return s!==0?s:(s=window.event,s===void 0?32:km(s.type))}function Ys(s,a){var r=D.p;try{return D.p=s,a()}finally{D.p=r}}var dt=Math.random().toString(36).slice(2),At="__reactFiber$"+dt,zt="__reactProps$"+dt,Lt="__reactContainer$"+dt,rn="__reactEvents$"+dt,pi="__reactListeners$"+dt,zv="__reactHandles$"+dt,Hh="__reactResources$"+dt,gi="__reactMarker$"+dt;function wc(s){delete s[At],delete s[zt],delete s[rn],delete s[pi],delete s[zv]}function sa(s){var a=s[At];if(a)return a;for(var r=s.parentNode;r;){if(a=r[Lt]||r[At]){if(r=a.alternate,a.child!==null||r!==null&&r.child!==null)for(s=um(s);s!==null;){if(r=s[At])return r;s=um(s)}return a}s=r,r=s.parentNode}return null}function na(s){if(s=s[At]||s[Lt]){var a=s.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return s}return null}function bi(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s.stateNode;throw Error(i(33))}function la(s){var a=s[Hh];return a||(a=s[Hh]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function Ut(s){s[gi]=!0}var Bh=new Set,Vh={};function bl(s,a){aa(s,a),aa(s+"Capture",a)}function aa(s,a){for(Vh[s]=a,s=0;s<a.length;s++)Bh.add(a[s])}var Lv=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Fh={},Jh={};function Uv(s){return os.call(Jh,s)?!0:os.call(Fh,s)?!1:Lv.test(s)?Jh[s]=!0:(Fh[s]=!0,!1)}function Mr(s,a,r){if(Uv(a))if(r===null)s.removeAttribute(a);else{switch(typeof r){case"undefined":case"function":case"symbol":s.removeAttribute(a);return;case"boolean":var d=a.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){s.removeAttribute(a);return}}s.setAttribute(a,""+r)}}function Dr(s,a,r){if(r===null)s.removeAttribute(a);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(a);return}s.setAttribute(a,""+r)}}function on(s,a,r,d){if(d===null)s.removeAttribute(r);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(r);return}s.setAttributeNS(a,r,""+d)}}function Ns(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Yh(s){var a=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Pv(s,a,r){var d=Object.getOwnPropertyDescriptor(s.constructor.prototype,a);if(!s.hasOwnProperty(a)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var g=d.get,v=d.set;return Object.defineProperty(s,a,{configurable:!0,get:function(){return g.call(this)},set:function(S){r=""+S,v.call(this,S)}}),Object.defineProperty(s,a,{enumerable:d.enumerable}),{getValue:function(){return r},setValue:function(S){r=""+S},stopTracking:function(){s._valueTracker=null,delete s[a]}}}}function _c(s){if(!s._valueTracker){var a=Yh(s)?"checked":"value";s._valueTracker=Pv(s,a,""+s[a])}}function Kh(s){if(!s)return!1;var a=s._valueTracker;if(!a)return!0;var r=a.getValue(),d="";return s&&(d=Yh(s)?s.checked?"true":"false":s.value),s=d,s!==r?(a.setValue(s),!0):!1}function Rr(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var $v=/[\n"\\]/g;function js(s){return s.replace($v,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Sc(s,a,r,d,g,v,S,I){s.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?s.type=S:s.removeAttribute("type"),a!=null?S==="number"?(a===0&&s.value===""||s.value!=a)&&(s.value=""+Ns(a)):s.value!==""+Ns(a)&&(s.value=""+Ns(a)):S!=="submit"&&S!=="reset"||s.removeAttribute("value"),a!=null?Cc(s,S,Ns(a)):r!=null?Cc(s,S,Ns(r)):d!=null&&s.removeAttribute("value"),g==null&&v!=null&&(s.defaultChecked=!!v),g!=null&&(s.checked=g&&typeof g!="function"&&typeof g!="symbol"),I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?s.name=""+Ns(I):s.removeAttribute("name")}function Qh(s,a,r,d,g,v,S,I){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(s.type=v),a!=null||r!=null){if(!(v!=="submit"&&v!=="reset"||a!=null)){_c(s);return}r=r!=null?""+Ns(r):"",a=a!=null?""+Ns(a):r,I||a===s.value||(s.value=a),s.defaultValue=a}d=d??g,d=typeof d!="function"&&typeof d!="symbol"&&!!d,s.checked=I?s.checked:!!d,s.defaultChecked=!!d,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(s.name=S),_c(s)}function Cc(s,a,r){a==="number"&&Rr(s.ownerDocument)===s||s.defaultValue===""+r||(s.defaultValue=""+r)}function ia(s,a,r,d){if(s=s.options,a){a={};for(var g=0;g<r.length;g++)a["$"+r[g]]=!0;for(r=0;r<s.length;r++)g=a.hasOwnProperty("$"+s[r].value),s[r].selected!==g&&(s[r].selected=g),g&&d&&(s[r].defaultSelected=!0)}else{for(r=""+Ns(r),a=null,g=0;g<s.length;g++){if(s[g].value===r){s[g].selected=!0,d&&(s[g].defaultSelected=!0);return}a!==null||s[g].disabled||(a=s[g])}a!==null&&(a.selected=!0)}}function Xh(s,a,r){if(a!=null&&(a=""+Ns(a),a!==s.value&&(s.value=a),r==null)){s.defaultValue!==a&&(s.defaultValue=a);return}s.defaultValue=r!=null?""+Ns(r):""}function Zh(s,a,r,d){if(a==null){if(d!=null){if(r!=null)throw Error(i(92));if(ne(d)){if(1<d.length)throw Error(i(93));d=d[0]}r=d}r==null&&(r=""),a=r}r=Ns(a),s.defaultValue=r,d=s.textContent,d===r&&d!==""&&d!==null&&(s.value=d),_c(s)}function ra(s,a){if(a){var r=s.firstChild;if(r&&r===s.lastChild&&r.nodeType===3){r.nodeValue=a;return}}s.textContent=a}var qv=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Wh(s,a,r){var d=a.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?d?s.setProperty(a,""):a==="float"?s.cssFloat="":s[a]="":d?s.setProperty(a,r):typeof r!="number"||r===0||qv.has(a)?a==="float"?s.cssFloat=r:s[a]=(""+r).trim():s[a]=r+"px"}function ef(s,a,r){if(a!=null&&typeof a!="object")throw Error(i(62));if(s=s.style,r!=null){for(var d in r)!r.hasOwnProperty(d)||a!=null&&a.hasOwnProperty(d)||(d.indexOf("--")===0?s.setProperty(d,""):d==="float"?s.cssFloat="":s[d]="");for(var g in a)d=a[g],a.hasOwnProperty(g)&&r[g]!==d&&Wh(s,g,d)}else for(var v in a)a.hasOwnProperty(v)&&Wh(s,v,a[v])}function kc(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ov=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Gv=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ir(s){return Gv.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function cn(){}var Ec=null;function Tc(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var oa=null,ca=null;function tf(s){var a=na(s);if(a&&(s=a.stateNode)){var r=s[zt]||null;e:switch(s=a.stateNode,a.type){case"input":if(Sc(s,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),a=r.name,r.type==="radio"&&a!=null){for(r=s;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+js(""+a)+'"][type="radio"]'),a=0;a<r.length;a++){var d=r[a];if(d!==s&&d.form===s.form){var g=d[zt]||null;if(!g)throw Error(i(90));Sc(d,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(a=0;a<r.length;a++)d=r[a],d.form===s.form&&Kh(d)}break e;case"textarea":Xh(s,r.value,r.defaultValue);break e;case"select":a=r.value,a!=null&&ia(s,!!r.multiple,a,!1)}}}var Ac=!1;function sf(s,a,r){if(Ac)return s(a,r);Ac=!0;try{var d=s(a);return d}finally{if(Ac=!1,(oa!==null||ca!==null)&&(jo(),oa&&(a=oa,s=ca,ca=oa=null,tf(a),s)))for(a=0;a<s.length;a++)tf(s[a])}}function vi(s,a){var r=s.stateNode;if(r===null)return null;var d=r[zt]||null;if(d===null)return null;r=d[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(s=s.type,d=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!d;break e;default:s=!1}if(s)return null;if(r&&typeof r!="function")throw Error(i(231,a,typeof r));return r}var dn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Mc=!1;if(dn)try{var yi={};Object.defineProperty(yi,"passive",{get:function(){Mc=!0}}),window.addEventListener("test",yi,yi),window.removeEventListener("test",yi,yi)}catch{Mc=!1}var Un=null,Dc=null,zr=null;function nf(){if(zr)return zr;var s,a=Dc,r=a.length,d,g="value"in Un?Un.value:Un.textContent,v=g.length;for(s=0;s<r&&a[s]===g[s];s++);var S=r-s;for(d=1;d<=S&&a[r-d]===g[v-d];d++);return zr=g.slice(s,1<d?1-d:void 0)}function Lr(s){var a=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&a===13&&(s=13)):s=a,s===10&&(s=13),32<=s||s===13?s:0}function Ur(){return!0}function lf(){return!1}function Wt(s){function a(r,d,g,v,S){this._reactName=r,this._targetInst=g,this.type=d,this.nativeEvent=v,this.target=S,this.currentTarget=null;for(var I in s)s.hasOwnProperty(I)&&(r=s[I],this[I]=r?r(v):v[I]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?Ur:lf,this.isPropagationStopped=lf,this}return y(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Ur)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Ur)},persist:function(){},isPersistent:Ur}),a}var vl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Pr=Wt(vl),Ni=y({},vl,{view:0,detail:0}),Hv=Wt(Ni),Rc,Ic,ji,$r=y({},Ni,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Lc,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==ji&&(ji&&s.type==="mousemove"?(Rc=s.screenX-ji.screenX,Ic=s.screenY-ji.screenY):Ic=Rc=0,ji=s),Rc)},movementY:function(s){return"movementY"in s?s.movementY:Ic}}),af=Wt($r),Bv=y({},$r,{dataTransfer:0}),Vv=Wt(Bv),Fv=y({},Ni,{relatedTarget:0}),zc=Wt(Fv),Jv=y({},vl,{animationName:0,elapsedTime:0,pseudoElement:0}),Yv=Wt(Jv),Kv=y({},vl,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Qv=Wt(Kv),Xv=y({},vl,{data:0}),rf=Wt(Xv),Zv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Wv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ey={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ty(s){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(s):(s=ey[s])?!!a[s]:!1}function Lc(){return ty}var sy=y({},Ni,{key:function(s){if(s.key){var a=Zv[s.key]||s.key;if(a!=="Unidentified")return a}return s.type==="keypress"?(s=Lr(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Wv[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Lc,charCode:function(s){return s.type==="keypress"?Lr(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Lr(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),ny=Wt(sy),ly=y({},$r,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),of=Wt(ly),ay=y({},Ni,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Lc}),iy=Wt(ay),ry=y({},vl,{propertyName:0,elapsedTime:0,pseudoElement:0}),oy=Wt(ry),cy=y({},$r,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),dy=Wt(cy),uy=y({},vl,{newState:0,oldState:0}),hy=Wt(uy),fy=[9,13,27,32],Uc=dn&&"CompositionEvent"in window,wi=null;dn&&"documentMode"in document&&(wi=document.documentMode);var xy=dn&&"TextEvent"in window&&!wi,cf=dn&&(!Uc||wi&&8<wi&&11>=wi),df=" ",uf=!1;function hf(s,a){switch(s){case"keyup":return fy.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ff(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var da=!1;function my(s,a){switch(s){case"compositionend":return ff(a);case"keypress":return a.which!==32?null:(uf=!0,df);case"textInput":return s=a.data,s===df&&uf?null:s;default:return null}}function py(s,a){if(da)return s==="compositionend"||!Uc&&hf(s,a)?(s=nf(),zr=Dc=Un=null,da=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return cf&&a.locale!=="ko"?null:a.data;default:return null}}var gy={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xf(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a==="input"?!!gy[s.type]:a==="textarea"}function mf(s,a,r,d){oa?ca?ca.push(d):ca=[d]:oa=d,a=To(a,"onChange"),0<a.length&&(r=new Pr("onChange","change",null,r,d),s.push({event:r,listeners:a}))}var _i=null,Si=null;function by(s){X0(s,0)}function qr(s){var a=bi(s);if(Kh(a))return s}function pf(s,a){if(s==="change")return a}var gf=!1;if(dn){var Pc;if(dn){var $c="oninput"in document;if(!$c){var bf=document.createElement("div");bf.setAttribute("oninput","return;"),$c=typeof bf.oninput=="function"}Pc=$c}else Pc=!1;gf=Pc&&(!document.documentMode||9<document.documentMode)}function vf(){_i&&(_i.detachEvent("onpropertychange",yf),Si=_i=null)}function yf(s){if(s.propertyName==="value"&&qr(Si)){var a=[];mf(a,Si,s,Tc(s)),sf(by,a)}}function vy(s,a,r){s==="focusin"?(vf(),_i=a,Si=r,_i.attachEvent("onpropertychange",yf)):s==="focusout"&&vf()}function yy(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return qr(Si)}function Ny(s,a){if(s==="click")return qr(a)}function jy(s,a){if(s==="input"||s==="change")return qr(a)}function wy(s,a){return s===a&&(s!==0||1/s===1/a)||s!==s&&a!==a}var cs=typeof Object.is=="function"?Object.is:wy;function Ci(s,a){if(cs(s,a))return!0;if(typeof s!="object"||s===null||typeof a!="object"||a===null)return!1;var r=Object.keys(s),d=Object.keys(a);if(r.length!==d.length)return!1;for(d=0;d<r.length;d++){var g=r[d];if(!os.call(a,g)||!cs(s[g],a[g]))return!1}return!0}function Nf(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function jf(s,a){var r=Nf(s);s=0;for(var d;r;){if(r.nodeType===3){if(d=s+r.textContent.length,s<=a&&d>=a)return{node:r,offset:a-s};s=d}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Nf(r)}}function wf(s,a){return s&&a?s===a?!0:s&&s.nodeType===3?!1:a&&a.nodeType===3?wf(s,a.parentNode):"contains"in s?s.contains(a):s.compareDocumentPosition?!!(s.compareDocumentPosition(a)&16):!1:!1}function _f(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var a=Rr(s.document);a instanceof s.HTMLIFrameElement;){try{var r=typeof a.contentWindow.location.href=="string"}catch{r=!1}if(r)s=a.contentWindow;else break;a=Rr(s.document)}return a}function qc(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a&&(a==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||a==="textarea"||s.contentEditable==="true")}var _y=dn&&"documentMode"in document&&11>=document.documentMode,ua=null,Oc=null,ki=null,Gc=!1;function Sf(s,a,r){var d=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Gc||ua==null||ua!==Rr(d)||(d=ua,"selectionStart"in d&&qc(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),ki&&Ci(ki,d)||(ki=d,d=To(Oc,"onSelect"),0<d.length&&(a=new Pr("onSelect","select",null,a,r),s.push({event:a,listeners:d}),a.target=ua)))}function yl(s,a){var r={};return r[s.toLowerCase()]=a.toLowerCase(),r["Webkit"+s]="webkit"+a,r["Moz"+s]="moz"+a,r}var ha={animationend:yl("Animation","AnimationEnd"),animationiteration:yl("Animation","AnimationIteration"),animationstart:yl("Animation","AnimationStart"),transitionrun:yl("Transition","TransitionRun"),transitionstart:yl("Transition","TransitionStart"),transitioncancel:yl("Transition","TransitionCancel"),transitionend:yl("Transition","TransitionEnd")},Hc={},Cf={};dn&&(Cf=document.createElement("div").style,"AnimationEvent"in window||(delete ha.animationend.animation,delete ha.animationiteration.animation,delete ha.animationstart.animation),"TransitionEvent"in window||delete ha.transitionend.transition);function Nl(s){if(Hc[s])return Hc[s];if(!ha[s])return s;var a=ha[s],r;for(r in a)if(a.hasOwnProperty(r)&&r in Cf)return Hc[s]=a[r];return s}var kf=Nl("animationend"),Ef=Nl("animationiteration"),Tf=Nl("animationstart"),Sy=Nl("transitionrun"),Cy=Nl("transitionstart"),ky=Nl("transitioncancel"),Af=Nl("transitionend"),Mf=new Map,Bc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Bc.push("scrollEnd");function Ls(s,a){Mf.set(s,a),bl(a,[s])}var Or=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},ws=[],fa=0,Vc=0;function Gr(){for(var s=fa,a=Vc=fa=0;a<s;){var r=ws[a];ws[a++]=null;var d=ws[a];ws[a++]=null;var g=ws[a];ws[a++]=null;var v=ws[a];if(ws[a++]=null,d!==null&&g!==null){var S=d.pending;S===null?g.next=g:(g.next=S.next,S.next=g),d.pending=g}v!==0&&Df(r,g,v)}}function Hr(s,a,r,d){ws[fa++]=s,ws[fa++]=a,ws[fa++]=r,ws[fa++]=d,Vc|=d,s.lanes|=d,s=s.alternate,s!==null&&(s.lanes|=d)}function Fc(s,a,r,d){return Hr(s,a,r,d),Br(s)}function jl(s,a){return Hr(s,null,null,a),Br(s)}function Df(s,a,r){s.lanes|=r;var d=s.alternate;d!==null&&(d.lanes|=r);for(var g=!1,v=s.return;v!==null;)v.childLanes|=r,d=v.alternate,d!==null&&(d.childLanes|=r),v.tag===22&&(s=v.stateNode,s===null||s._visibility&1||(g=!0)),s=v,v=v.return;return s.tag===3?(v=s.stateNode,g&&a!==null&&(g=31-We(r),s=v.hiddenUpdates,d=s[g],d===null?s[g]=[a]:d.push(a),a.lane=r|536870912),v):null}function Br(s){if(50<Ki)throw Ki=0,tu=null,Error(i(185));for(var a=s.return;a!==null;)s=a,a=s.return;return s.tag===3?s.stateNode:null}var xa={};function Ey(s,a,r,d){this.tag=s,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ds(s,a,r,d){return new Ey(s,a,r,d)}function Jc(s){return s=s.prototype,!(!s||!s.isReactComponent)}function un(s,a){var r=s.alternate;return r===null?(r=ds(s.tag,a,s.key,s.mode),r.elementType=s.elementType,r.type=s.type,r.stateNode=s.stateNode,r.alternate=s,s.alternate=r):(r.pendingProps=a,r.type=s.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=s.flags&65011712,r.childLanes=s.childLanes,r.lanes=s.lanes,r.child=s.child,r.memoizedProps=s.memoizedProps,r.memoizedState=s.memoizedState,r.updateQueue=s.updateQueue,a=s.dependencies,r.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},r.sibling=s.sibling,r.index=s.index,r.ref=s.ref,r.refCleanup=s.refCleanup,r}function Rf(s,a){s.flags&=65011714;var r=s.alternate;return r===null?(s.childLanes=0,s.lanes=a,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=r.childLanes,s.lanes=r.lanes,s.child=r.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=r.memoizedProps,s.memoizedState=r.memoizedState,s.updateQueue=r.updateQueue,s.type=r.type,a=r.dependencies,s.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),s}function Vr(s,a,r,d,g,v){var S=0;if(d=s,typeof s=="function")Jc(s)&&(S=1);else if(typeof s=="string")S=R1(s,r,T.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case q:return s=ds(31,r,a,g),s.elementType=q,s.lanes=v,s;case E:return wl(r.children,g,v,a);case R:S=8,g|=24;break;case P:return s=ds(12,r,a,g|2),s.elementType=P,s.lanes=v,s;case G:return s=ds(13,r,a,g),s.elementType=G,s.lanes=v,s;case F:return s=ds(19,r,a,g),s.elementType=F,s.lanes=v,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case z:S=10;break e;case O:S=9;break e;case K:S=11;break e;case $:S=14;break e;case B:S=16,d=null;break e}S=29,r=Error(i(130,s===null?"null":typeof s,"")),d=null}return a=ds(S,r,a,g),a.elementType=s,a.type=d,a.lanes=v,a}function wl(s,a,r,d){return s=ds(7,s,d,a),s.lanes=r,s}function Yc(s,a,r){return s=ds(6,s,null,a),s.lanes=r,s}function If(s){var a=ds(18,null,null,0);return a.stateNode=s,a}function Kc(s,a,r){return a=ds(4,s.children!==null?s.children:[],s.key,a),a.lanes=r,a.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},a}var zf=new WeakMap;function _s(s,a){if(typeof s=="object"&&s!==null){var r=zf.get(s);return r!==void 0?r:(a={value:s,source:a,stack:jt(a)},zf.set(s,a),a)}return{value:s,source:a,stack:jt(a)}}var ma=[],pa=0,Fr=null,Ei=0,Ss=[],Cs=0,Pn=null,Ks=1,Qs="";function hn(s,a){ma[pa++]=Ei,ma[pa++]=Fr,Fr=s,Ei=a}function Lf(s,a,r){Ss[Cs++]=Ks,Ss[Cs++]=Qs,Ss[Cs++]=Pn,Pn=s;var d=Ks;s=Qs;var g=32-We(d)-1;d&=~(1<<g),r+=1;var v=32-We(a)+g;if(30<v){var S=g-g%5;v=(d&(1<<S)-1).toString(32),d>>=S,g-=S,Ks=1<<32-We(a)+g|r<<g|d,Qs=v+s}else Ks=1<<v|r<<g|d,Qs=s}function Qc(s){s.return!==null&&(hn(s,1),Lf(s,1,0))}function Xc(s){for(;s===Fr;)Fr=ma[--pa],ma[pa]=null,Ei=ma[--pa],ma[pa]=null;for(;s===Pn;)Pn=Ss[--Cs],Ss[Cs]=null,Qs=Ss[--Cs],Ss[Cs]=null,Ks=Ss[--Cs],Ss[Cs]=null}function Uf(s,a){Ss[Cs++]=Ks,Ss[Cs++]=Qs,Ss[Cs++]=Pn,Ks=a.id,Qs=a.overflow,Pn=s}var Ot=null,ut=null,Ve=!1,$n=null,ks=!1,Zc=Error(i(519));function qn(s){var a=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ti(_s(a,s)),Zc}function Pf(s){var a=s.stateNode,r=s.type,d=s.memoizedProps;switch(a[At]=s,a[zt]=d,r){case"dialog":Oe("cancel",a),Oe("close",a);break;case"iframe":case"object":case"embed":Oe("load",a);break;case"video":case"audio":for(r=0;r<Xi.length;r++)Oe(Xi[r],a);break;case"source":Oe("error",a);break;case"img":case"image":case"link":Oe("error",a),Oe("load",a);break;case"details":Oe("toggle",a);break;case"input":Oe("invalid",a),Qh(a,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0);break;case"select":Oe("invalid",a);break;case"textarea":Oe("invalid",a),Zh(a,d.value,d.defaultValue,d.children)}r=d.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||a.textContent===""+r||d.suppressHydrationWarning===!0||tm(a.textContent,r)?(d.popover!=null&&(Oe("beforetoggle",a),Oe("toggle",a)),d.onScroll!=null&&Oe("scroll",a),d.onScrollEnd!=null&&Oe("scrollend",a),d.onClick!=null&&(a.onclick=cn),a=!0):a=!1,a||qn(s,!0)}function $f(s){for(Ot=s.return;Ot;)switch(Ot.tag){case 5:case 31:case 13:ks=!1;return;case 27:case 3:ks=!0;return;default:Ot=Ot.return}}function ga(s){if(s!==Ot)return!1;if(!Ve)return $f(s),Ve=!0,!1;var a=s.tag,r;if((r=a!==3&&a!==27)&&((r=a===5)&&(r=s.type,r=!(r!=="form"&&r!=="button")||pu(s.type,s.memoizedProps)),r=!r),r&&ut&&qn(s),$f(s),a===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));ut=dm(s)}else if(a===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));ut=dm(s)}else a===27?(a=ut,el(s.type)?(s=Nu,Nu=null,ut=s):ut=a):ut=Ot?Ts(s.stateNode.nextSibling):null;return!0}function _l(){ut=Ot=null,Ve=!1}function Wc(){var s=$n;return s!==null&&(ns===null?ns=s:ns.push.apply(ns,s),$n=null),s}function Ti(s){$n===null?$n=[s]:$n.push(s)}var ed=_(null),Sl=null,fn=null;function On(s,a,r){j(ed,a._currentValue),a._currentValue=r}function xn(s){s._currentValue=ed.current,M(ed)}function td(s,a,r){for(;s!==null;){var d=s.alternate;if((s.childLanes&a)!==a?(s.childLanes|=a,d!==null&&(d.childLanes|=a)):d!==null&&(d.childLanes&a)!==a&&(d.childLanes|=a),s===r)break;s=s.return}}function sd(s,a,r,d){var g=s.child;for(g!==null&&(g.return=s);g!==null;){var v=g.dependencies;if(v!==null){var S=g.child;v=v.firstContext;e:for(;v!==null;){var I=v;v=g;for(var X=0;X<a.length;X++)if(I.context===a[X]){v.lanes|=r,I=v.alternate,I!==null&&(I.lanes|=r),td(v.return,r,s),d||(S=null);break e}v=I.next}}else if(g.tag===18){if(S=g.return,S===null)throw Error(i(341));S.lanes|=r,v=S.alternate,v!==null&&(v.lanes|=r),td(S,r,s),S=null}else S=g.child;if(S!==null)S.return=g;else for(S=g;S!==null;){if(S===s){S=null;break}if(g=S.sibling,g!==null){g.return=S.return,S=g;break}S=S.return}g=S}}function ba(s,a,r,d){s=null;for(var g=a,v=!1;g!==null;){if(!v){if((g.flags&524288)!==0)v=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var S=g.alternate;if(S===null)throw Error(i(387));if(S=S.memoizedProps,S!==null){var I=g.type;cs(g.pendingProps.value,S.value)||(s!==null?s.push(I):s=[I])}}else if(g===Z.current){if(S=g.alternate,S===null)throw Error(i(387));S.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(s!==null?s.push(sr):s=[sr])}g=g.return}s!==null&&sd(a,s,r,d),a.flags|=262144}function Jr(s){for(s=s.firstContext;s!==null;){if(!cs(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Cl(s){Sl=s,fn=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function Gt(s){return qf(Sl,s)}function Yr(s,a){return Sl===null&&Cl(s),qf(s,a)}function qf(s,a){var r=a._currentValue;if(a={context:a,memoizedValue:r,next:null},fn===null){if(s===null)throw Error(i(308));fn=a,s.dependencies={lanes:0,firstContext:a},s.flags|=524288}else fn=fn.next=a;return r}var Ty=typeof AbortController<"u"?AbortController:function(){var s=[],a=this.signal={aborted:!1,addEventListener:function(r,d){s.push(d)}};this.abort=function(){a.aborted=!0,s.forEach(function(r){return r()})}},Ay=n.unstable_scheduleCallback,My=n.unstable_NormalPriority,_t={$$typeof:z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function nd(){return{controller:new Ty,data:new Map,refCount:0}}function Ai(s){s.refCount--,s.refCount===0&&Ay(My,function(){s.controller.abort()})}var Mi=null,ld=0,va=0,ya=null;function Dy(s,a){if(Mi===null){var r=Mi=[];ld=0,va=ru(),ya={status:"pending",value:void 0,then:function(d){r.push(d)}}}return ld++,a.then(Of,Of),a}function Of(){if(--ld===0&&Mi!==null){ya!==null&&(ya.status="fulfilled");var s=Mi;Mi=null,va=0,ya=null;for(var a=0;a<s.length;a++)(0,s[a])()}}function Ry(s,a){var r=[],d={status:"pending",value:null,reason:null,then:function(g){r.push(g)}};return s.then(function(){d.status="fulfilled",d.value=a;for(var g=0;g<r.length;g++)(0,r[g])(a)},function(g){for(d.status="rejected",d.reason=g,g=0;g<r.length;g++)(0,r[g])(void 0)}),d}var Gf=w.S;w.S=function(s,a){S0=Qe(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&Dy(s,a),Gf!==null&&Gf(s,a)};var kl=_(null);function ad(){var s=kl.current;return s!==null?s:rt.pooledCache}function Kr(s,a){a===null?j(kl,kl.current):j(kl,a.pool)}function Hf(){var s=ad();return s===null?null:{parent:_t._currentValue,pool:s}}var Na=Error(i(460)),id=Error(i(474)),Qr=Error(i(542)),Xr={then:function(){}};function Bf(s){return s=s.status,s==="fulfilled"||s==="rejected"}function Vf(s,a,r){switch(r=s[r],r===void 0?s.push(a):r!==a&&(a.then(cn,cn),a=r),a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,Jf(s),s;default:if(typeof a.status=="string")a.then(cn,cn);else{if(s=rt,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=a,s.status="pending",s.then(function(d){if(a.status==="pending"){var g=a;g.status="fulfilled",g.value=d}},function(d){if(a.status==="pending"){var g=a;g.status="rejected",g.reason=d}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,Jf(s),s}throw Tl=a,Na}}function El(s){try{var a=s._init;return a(s._payload)}catch(r){throw r!==null&&typeof r=="object"&&typeof r.then=="function"?(Tl=r,Na):r}}var Tl=null;function Ff(){if(Tl===null)throw Error(i(459));var s=Tl;return Tl=null,s}function Jf(s){if(s===Na||s===Qr)throw Error(i(483))}var ja=null,Di=0;function Zr(s){var a=Di;return Di+=1,ja===null&&(ja=[]),Vf(ja,s,a)}function Ri(s,a){a=a.props.ref,s.ref=a!==void 0?a:null}function Wr(s,a){throw a.$$typeof===N?Error(i(525)):(s=Object.prototype.toString.call(a),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":s)))}function Yf(s){function a(te,W){if(s){var re=te.deletions;re===null?(te.deletions=[W],te.flags|=16):re.push(W)}}function r(te,W){if(!s)return null;for(;W!==null;)a(te,W),W=W.sibling;return null}function d(te){for(var W=new Map;te!==null;)te.key!==null?W.set(te.key,te):W.set(te.index,te),te=te.sibling;return W}function g(te,W){return te=un(te,W),te.index=0,te.sibling=null,te}function v(te,W,re){return te.index=re,s?(re=te.alternate,re!==null?(re=re.index,re<W?(te.flags|=67108866,W):re):(te.flags|=67108866,W)):(te.flags|=1048576,W)}function S(te){return s&&te.alternate===null&&(te.flags|=67108866),te}function I(te,W,re,pe){return W===null||W.tag!==6?(W=Yc(re,te.mode,pe),W.return=te,W):(W=g(W,re),W.return=te,W)}function X(te,W,re,pe){var Me=re.type;return Me===E?me(te,W,re.props.children,pe,re.key):W!==null&&(W.elementType===Me||typeof Me=="object"&&Me!==null&&Me.$$typeof===B&&El(Me)===W.type)?(W=g(W,re.props),Ri(W,re),W.return=te,W):(W=Vr(re.type,re.key,re.props,null,te.mode,pe),Ri(W,re),W.return=te,W)}function oe(te,W,re,pe){return W===null||W.tag!==4||W.stateNode.containerInfo!==re.containerInfo||W.stateNode.implementation!==re.implementation?(W=Kc(re,te.mode,pe),W.return=te,W):(W=g(W,re.children||[]),W.return=te,W)}function me(te,W,re,pe,Me){return W===null||W.tag!==7?(W=wl(re,te.mode,pe,Me),W.return=te,W):(W=g(W,re),W.return=te,W)}function be(te,W,re){if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return W=Yc(""+W,te.mode,re),W.return=te,W;if(typeof W=="object"&&W!==null){switch(W.$$typeof){case C:return re=Vr(W.type,W.key,W.props,null,te.mode,re),Ri(re,W),re.return=te,re;case A:return W=Kc(W,te.mode,re),W.return=te,W;case B:return W=El(W),be(te,W,re)}if(ne(W)||U(W))return W=wl(W,te.mode,re,null),W.return=te,W;if(typeof W.then=="function")return be(te,Zr(W),re);if(W.$$typeof===z)return be(te,Yr(te,W),re);Wr(te,W)}return null}function ue(te,W,re,pe){var Me=W!==null?W.key:null;if(typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint")return Me!==null?null:I(te,W,""+re,pe);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case C:return re.key===Me?X(te,W,re,pe):null;case A:return re.key===Me?oe(te,W,re,pe):null;case B:return re=El(re),ue(te,W,re,pe)}if(ne(re)||U(re))return Me!==null?null:me(te,W,re,pe,null);if(typeof re.then=="function")return ue(te,W,Zr(re),pe);if(re.$$typeof===z)return ue(te,W,Yr(te,re),pe);Wr(te,re)}return null}function he(te,W,re,pe,Me){if(typeof pe=="string"&&pe!==""||typeof pe=="number"||typeof pe=="bigint")return te=te.get(re)||null,I(W,te,""+pe,Me);if(typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case C:return te=te.get(pe.key===null?re:pe.key)||null,X(W,te,pe,Me);case A:return te=te.get(pe.key===null?re:pe.key)||null,oe(W,te,pe,Me);case B:return pe=El(pe),he(te,W,re,pe,Me)}if(ne(pe)||U(pe))return te=te.get(re)||null,me(W,te,pe,Me,null);if(typeof pe.then=="function")return he(te,W,re,Zr(pe),Me);if(pe.$$typeof===z)return he(te,W,re,Yr(W,pe),Me);Wr(W,pe)}return null}function Ce(te,W,re,pe){for(var Me=null,Je=null,Ee=W,Ue=W=0,He=null;Ee!==null&&Ue<re.length;Ue++){Ee.index>Ue?(He=Ee,Ee=null):He=Ee.sibling;var Ye=ue(te,Ee,re[Ue],pe);if(Ye===null){Ee===null&&(Ee=He);break}s&&Ee&&Ye.alternate===null&&a(te,Ee),W=v(Ye,W,Ue),Je===null?Me=Ye:Je.sibling=Ye,Je=Ye,Ee=He}if(Ue===re.length)return r(te,Ee),Ve&&hn(te,Ue),Me;if(Ee===null){for(;Ue<re.length;Ue++)Ee=be(te,re[Ue],pe),Ee!==null&&(W=v(Ee,W,Ue),Je===null?Me=Ee:Je.sibling=Ee,Je=Ee);return Ve&&hn(te,Ue),Me}for(Ee=d(Ee);Ue<re.length;Ue++)He=he(Ee,te,Ue,re[Ue],pe),He!==null&&(s&&He.alternate!==null&&Ee.delete(He.key===null?Ue:He.key),W=v(He,W,Ue),Je===null?Me=He:Je.sibling=He,Je=He);return s&&Ee.forEach(function(al){return a(te,al)}),Ve&&hn(te,Ue),Me}function Re(te,W,re,pe){if(re==null)throw Error(i(151));for(var Me=null,Je=null,Ee=W,Ue=W=0,He=null,Ye=re.next();Ee!==null&&!Ye.done;Ue++,Ye=re.next()){Ee.index>Ue?(He=Ee,Ee=null):He=Ee.sibling;var al=ue(te,Ee,Ye.value,pe);if(al===null){Ee===null&&(Ee=He);break}s&&Ee&&al.alternate===null&&a(te,Ee),W=v(al,W,Ue),Je===null?Me=al:Je.sibling=al,Je=al,Ee=He}if(Ye.done)return r(te,Ee),Ve&&hn(te,Ue),Me;if(Ee===null){for(;!Ye.done;Ue++,Ye=re.next())Ye=be(te,Ye.value,pe),Ye!==null&&(W=v(Ye,W,Ue),Je===null?Me=Ye:Je.sibling=Ye,Je=Ye);return Ve&&hn(te,Ue),Me}for(Ee=d(Ee);!Ye.done;Ue++,Ye=re.next())Ye=he(Ee,te,Ue,Ye.value,pe),Ye!==null&&(s&&Ye.alternate!==null&&Ee.delete(Ye.key===null?Ue:Ye.key),W=v(Ye,W,Ue),Je===null?Me=Ye:Je.sibling=Ye,Je=Ye);return s&&Ee.forEach(function(B1){return a(te,B1)}),Ve&&hn(te,Ue),Me}function at(te,W,re,pe){if(typeof re=="object"&&re!==null&&re.type===E&&re.key===null&&(re=re.props.children),typeof re=="object"&&re!==null){switch(re.$$typeof){case C:e:{for(var Me=re.key;W!==null;){if(W.key===Me){if(Me=re.type,Me===E){if(W.tag===7){r(te,W.sibling),pe=g(W,re.props.children),pe.return=te,te=pe;break e}}else if(W.elementType===Me||typeof Me=="object"&&Me!==null&&Me.$$typeof===B&&El(Me)===W.type){r(te,W.sibling),pe=g(W,re.props),Ri(pe,re),pe.return=te,te=pe;break e}r(te,W);break}else a(te,W);W=W.sibling}re.type===E?(pe=wl(re.props.children,te.mode,pe,re.key),pe.return=te,te=pe):(pe=Vr(re.type,re.key,re.props,null,te.mode,pe),Ri(pe,re),pe.return=te,te=pe)}return S(te);case A:e:{for(Me=re.key;W!==null;){if(W.key===Me)if(W.tag===4&&W.stateNode.containerInfo===re.containerInfo&&W.stateNode.implementation===re.implementation){r(te,W.sibling),pe=g(W,re.children||[]),pe.return=te,te=pe;break e}else{r(te,W);break}else a(te,W);W=W.sibling}pe=Kc(re,te.mode,pe),pe.return=te,te=pe}return S(te);case B:return re=El(re),at(te,W,re,pe)}if(ne(re))return Ce(te,W,re,pe);if(U(re)){if(Me=U(re),typeof Me!="function")throw Error(i(150));return re=Me.call(re),Re(te,W,re,pe)}if(typeof re.then=="function")return at(te,W,Zr(re),pe);if(re.$$typeof===z)return at(te,W,Yr(te,re),pe);Wr(te,re)}return typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint"?(re=""+re,W!==null&&W.tag===6?(r(te,W.sibling),pe=g(W,re),pe.return=te,te=pe):(r(te,W),pe=Yc(re,te.mode,pe),pe.return=te,te=pe),S(te)):r(te,W)}return function(te,W,re,pe){try{Di=0;var Me=at(te,W,re,pe);return ja=null,Me}catch(Ee){if(Ee===Na||Ee===Qr)throw Ee;var Je=ds(29,Ee,null,te.mode);return Je.lanes=pe,Je.return=te,Je}finally{}}}var Al=Yf(!0),Kf=Yf(!1),Gn=!1;function rd(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function od(s,a){s=s.updateQueue,a.updateQueue===s&&(a.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Hn(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Bn(s,a,r){var d=s.updateQueue;if(d===null)return null;if(d=d.shared,(Xe&2)!==0){var g=d.pending;return g===null?a.next=a:(a.next=g.next,g.next=a),d.pending=a,a=Br(s),Df(s,null,r),a}return Hr(s,d,a,r),Br(s)}function Ii(s,a,r){if(a=a.updateQueue,a!==null&&(a=a.shared,(r&4194048)!==0)){var d=a.lanes;d&=s.pendingLanes,r|=d,a.lanes=r,Se(s,r)}}function cd(s,a){var r=s.updateQueue,d=s.alternate;if(d!==null&&(d=d.updateQueue,r===d)){var g=null,v=null;if(r=r.firstBaseUpdate,r!==null){do{var S={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};v===null?g=v=S:v=v.next=S,r=r.next}while(r!==null);v===null?g=v=a:v=v.next=a}else g=v=a;r={baseState:d.baseState,firstBaseUpdate:g,lastBaseUpdate:v,shared:d.shared,callbacks:d.callbacks},s.updateQueue=r;return}s=r.lastBaseUpdate,s===null?r.firstBaseUpdate=a:s.next=a,r.lastBaseUpdate=a}var dd=!1;function zi(){if(dd){var s=ya;if(s!==null)throw s}}function Li(s,a,r,d){dd=!1;var g=s.updateQueue;Gn=!1;var v=g.firstBaseUpdate,S=g.lastBaseUpdate,I=g.shared.pending;if(I!==null){g.shared.pending=null;var X=I,oe=X.next;X.next=null,S===null?v=oe:S.next=oe,S=X;var me=s.alternate;me!==null&&(me=me.updateQueue,I=me.lastBaseUpdate,I!==S&&(I===null?me.firstBaseUpdate=oe:I.next=oe,me.lastBaseUpdate=X))}if(v!==null){var be=g.baseState;S=0,me=oe=X=null,I=v;do{var ue=I.lane&-536870913,he=ue!==I.lane;if(he?(Ge&ue)===ue:(d&ue)===ue){ue!==0&&ue===va&&(dd=!0),me!==null&&(me=me.next={lane:0,tag:I.tag,payload:I.payload,callback:null,next:null});e:{var Ce=s,Re=I;ue=a;var at=r;switch(Re.tag){case 1:if(Ce=Re.payload,typeof Ce=="function"){be=Ce.call(at,be,ue);break e}be=Ce;break e;case 3:Ce.flags=Ce.flags&-65537|128;case 0:if(Ce=Re.payload,ue=typeof Ce=="function"?Ce.call(at,be,ue):Ce,ue==null)break e;be=y({},be,ue);break e;case 2:Gn=!0}}ue=I.callback,ue!==null&&(s.flags|=64,he&&(s.flags|=8192),he=g.callbacks,he===null?g.callbacks=[ue]:he.push(ue))}else he={lane:ue,tag:I.tag,payload:I.payload,callback:I.callback,next:null},me===null?(oe=me=he,X=be):me=me.next=he,S|=ue;if(I=I.next,I===null){if(I=g.shared.pending,I===null)break;he=I,I=he.next,he.next=null,g.lastBaseUpdate=he,g.shared.pending=null}}while(!0);me===null&&(X=be),g.baseState=X,g.firstBaseUpdate=oe,g.lastBaseUpdate=me,v===null&&(g.shared.lanes=0),Kn|=S,s.lanes=S,s.memoizedState=be}}function Qf(s,a){if(typeof s!="function")throw Error(i(191,s));s.call(a)}function Xf(s,a){var r=s.callbacks;if(r!==null)for(s.callbacks=null,s=0;s<r.length;s++)Qf(r[s],a)}var wa=_(null),eo=_(0);function Zf(s,a){s=wn,j(eo,s),j(wa,a),wn=s|a.baseLanes}function ud(){j(eo,wn),j(wa,wa.current)}function hd(){wn=eo.current,M(wa),M(eo)}var us=_(null),Es=null;function Vn(s){var a=s.alternate;j(yt,yt.current&1),j(us,s),Es===null&&(a===null||wa.current!==null||a.memoizedState!==null)&&(Es=s)}function fd(s){j(yt,yt.current),j(us,s),Es===null&&(Es=s)}function Wf(s){s.tag===22?(j(yt,yt.current),j(us,s),Es===null&&(Es=s)):Fn()}function Fn(){j(yt,yt.current),j(us,us.current)}function hs(s){M(us),Es===s&&(Es=null),M(yt)}var yt=_(0);function to(s){for(var a=s;a!==null;){if(a.tag===13){var r=a.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||vu(r)||yu(r)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var mn=0,Le=null,nt=null,St=null,so=!1,_a=!1,Ml=!1,no=0,Ui=0,Sa=null,Iy=0;function gt(){throw Error(i(321))}function xd(s,a){if(a===null)return!1;for(var r=0;r<a.length&&r<s.length;r++)if(!cs(s[r],a[r]))return!1;return!0}function md(s,a,r,d,g,v){return mn=v,Le=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,w.H=s===null||s.memoizedState===null?Lx:Ad,Ml=!1,v=r(d,g),Ml=!1,_a&&(v=tx(a,r,d,g)),ex(s),v}function ex(s){w.H=qi;var a=nt!==null&&nt.next!==null;if(mn=0,St=nt=Le=null,so=!1,Ui=0,Sa=null,a)throw Error(i(300));s===null||Ct||(s=s.dependencies,s!==null&&Jr(s)&&(Ct=!0))}function tx(s,a,r,d){Le=s;var g=0;do{if(_a&&(Sa=null),Ui=0,_a=!1,25<=g)throw Error(i(301));if(g+=1,St=nt=null,s.updateQueue!=null){var v=s.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}w.H=Ux,v=a(r,d)}while(_a);return v}function zy(){var s=w.H,a=s.useState()[0];return a=typeof a.then=="function"?Pi(a):a,s=s.useState()[0],(nt!==null?nt.memoizedState:null)!==s&&(Le.flags|=1024),a}function pd(){var s=no!==0;return no=0,s}function gd(s,a,r){a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~r}function bd(s){if(so){for(s=s.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}so=!1}mn=0,St=nt=Le=null,_a=!1,Ui=no=0,Sa=null}function Xt(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return St===null?Le.memoizedState=St=s:St=St.next=s,St}function Nt(){if(nt===null){var s=Le.alternate;s=s!==null?s.memoizedState:null}else s=nt.next;var a=St===null?Le.memoizedState:St.next;if(a!==null)St=a,nt=s;else{if(s===null)throw Le.alternate===null?Error(i(467)):Error(i(310));nt=s,s={memoizedState:nt.memoizedState,baseState:nt.baseState,baseQueue:nt.baseQueue,queue:nt.queue,next:null},St===null?Le.memoizedState=St=s:St=St.next=s}return St}function lo(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Pi(s){var a=Ui;return Ui+=1,Sa===null&&(Sa=[]),s=Vf(Sa,s,a),a=Le,(St===null?a.memoizedState:St.next)===null&&(a=a.alternate,w.H=a===null||a.memoizedState===null?Lx:Ad),s}function ao(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Pi(s);if(s.$$typeof===z)return Gt(s)}throw Error(i(438,String(s)))}function vd(s){var a=null,r=Le.updateQueue;if(r!==null&&(a=r.memoCache),a==null){var d=Le.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(a={data:d.data.map(function(g){return g.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),r===null&&(r=lo(),Le.updateQueue=r),r.memoCache=a,r=a.data[a.index],r===void 0)for(r=a.data[a.index]=Array(s),d=0;d<s;d++)r[d]=J;return a.index++,r}function pn(s,a){return typeof a=="function"?a(s):a}function io(s){var a=Nt();return yd(a,nt,s)}function yd(s,a,r){var d=s.queue;if(d===null)throw Error(i(311));d.lastRenderedReducer=r;var g=s.baseQueue,v=d.pending;if(v!==null){if(g!==null){var S=g.next;g.next=v.next,v.next=S}a.baseQueue=g=v,d.pending=null}if(v=s.baseState,g===null)s.memoizedState=v;else{a=g.next;var I=S=null,X=null,oe=a,me=!1;do{var be=oe.lane&-536870913;if(be!==oe.lane?(Ge&be)===be:(mn&be)===be){var ue=oe.revertLane;if(ue===0)X!==null&&(X=X.next={lane:0,revertLane:0,gesture:null,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null}),be===va&&(me=!0);else if((mn&ue)===ue){oe=oe.next,ue===va&&(me=!0);continue}else be={lane:0,revertLane:oe.revertLane,gesture:null,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null},X===null?(I=X=be,S=v):X=X.next=be,Le.lanes|=ue,Kn|=ue;be=oe.action,Ml&&r(v,be),v=oe.hasEagerState?oe.eagerState:r(v,be)}else ue={lane:be,revertLane:oe.revertLane,gesture:oe.gesture,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null},X===null?(I=X=ue,S=v):X=X.next=ue,Le.lanes|=be,Kn|=be;oe=oe.next}while(oe!==null&&oe!==a);if(X===null?S=v:X.next=I,!cs(v,s.memoizedState)&&(Ct=!0,me&&(r=ya,r!==null)))throw r;s.memoizedState=v,s.baseState=S,s.baseQueue=X,d.lastRenderedState=v}return g===null&&(d.lanes=0),[s.memoizedState,d.dispatch]}function Nd(s){var a=Nt(),r=a.queue;if(r===null)throw Error(i(311));r.lastRenderedReducer=s;var d=r.dispatch,g=r.pending,v=a.memoizedState;if(g!==null){r.pending=null;var S=g=g.next;do v=s(v,S.action),S=S.next;while(S!==g);cs(v,a.memoizedState)||(Ct=!0),a.memoizedState=v,a.baseQueue===null&&(a.baseState=v),r.lastRenderedState=v}return[v,d]}function sx(s,a,r){var d=Le,g=Nt(),v=Ve;if(v){if(r===void 0)throw Error(i(407));r=r()}else r=a();var S=!cs((nt||g).memoizedState,r);if(S&&(g.memoizedState=r,Ct=!0),g=g.queue,_d(ax.bind(null,d,g,s),[s]),g.getSnapshot!==a||S||St!==null&&St.memoizedState.tag&1){if(d.flags|=2048,Ca(9,{destroy:void 0},lx.bind(null,d,g,r,a),null),rt===null)throw Error(i(349));v||(mn&127)!==0||nx(d,a,r)}return r}function nx(s,a,r){s.flags|=16384,s={getSnapshot:a,value:r},a=Le.updateQueue,a===null?(a=lo(),Le.updateQueue=a,a.stores=[s]):(r=a.stores,r===null?a.stores=[s]:r.push(s))}function lx(s,a,r,d){a.value=r,a.getSnapshot=d,ix(a)&&rx(s)}function ax(s,a,r){return r(function(){ix(a)&&rx(s)})}function ix(s){var a=s.getSnapshot;s=s.value;try{var r=a();return!cs(s,r)}catch{return!0}}function rx(s){var a=jl(s,2);a!==null&&ls(a,s,2)}function jd(s){var a=Xt();if(typeof s=="function"){var r=s;if(s=r(),Ml){pt(!0);try{r()}finally{pt(!1)}}}return a.memoizedState=a.baseState=s,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:pn,lastRenderedState:s},a}function ox(s,a,r,d){return s.baseState=r,yd(s,nt,typeof d=="function"?d:pn)}function Ly(s,a,r,d,g){if(co(s))throw Error(i(485));if(s=a.action,s!==null){var v={payload:g,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){v.listeners.push(S)}};w.T!==null?r(!0):v.isTransition=!1,d(v),r=a.pending,r===null?(v.next=a.pending=v,cx(a,v)):(v.next=r.next,a.pending=r.next=v)}}function cx(s,a){var r=a.action,d=a.payload,g=s.state;if(a.isTransition){var v=w.T,S={};w.T=S;try{var I=r(g,d),X=w.S;X!==null&&X(S,I),dx(s,a,I)}catch(oe){wd(s,a,oe)}finally{v!==null&&S.types!==null&&(v.types=S.types),w.T=v}}else try{v=r(g,d),dx(s,a,v)}catch(oe){wd(s,a,oe)}}function dx(s,a,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(d){ux(s,a,d)},function(d){return wd(s,a,d)}):ux(s,a,r)}function ux(s,a,r){a.status="fulfilled",a.value=r,hx(a),s.state=r,a=s.pending,a!==null&&(r=a.next,r===a?s.pending=null:(r=r.next,a.next=r,cx(s,r)))}function wd(s,a,r){var d=s.pending;if(s.pending=null,d!==null){d=d.next;do a.status="rejected",a.reason=r,hx(a),a=a.next;while(a!==d)}s.action=null}function hx(s){s=s.listeners;for(var a=0;a<s.length;a++)(0,s[a])()}function fx(s,a){return a}function xx(s,a){if(Ve){var r=rt.formState;if(r!==null){e:{var d=Le;if(Ve){if(ut){t:{for(var g=ut,v=ks;g.nodeType!==8;){if(!v){g=null;break t}if(g=Ts(g.nextSibling),g===null){g=null;break t}}v=g.data,g=v==="F!"||v==="F"?g:null}if(g){ut=Ts(g.nextSibling),d=g.data==="F!";break e}}qn(d)}d=!1}d&&(a=r[0])}}return r=Xt(),r.memoizedState=r.baseState=a,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:fx,lastRenderedState:a},r.queue=d,r=Rx.bind(null,Le,d),d.dispatch=r,d=jd(!1),v=Td.bind(null,Le,!1,d.queue),d=Xt(),g={state:a,dispatch:null,action:s,pending:null},d.queue=g,r=Ly.bind(null,Le,g,v,r),g.dispatch=r,d.memoizedState=s,[a,r,!1]}function mx(s){var a=Nt();return px(a,nt,s)}function px(s,a,r){if(a=yd(s,a,fx)[0],s=io(pn)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var d=Pi(a)}catch(S){throw S===Na?Qr:S}else d=a;a=Nt();var g=a.queue,v=g.dispatch;return r!==a.memoizedState&&(Le.flags|=2048,Ca(9,{destroy:void 0},Uy.bind(null,g,r),null)),[d,v,s]}function Uy(s,a){s.action=a}function gx(s){var a=Nt(),r=nt;if(r!==null)return px(a,r,s);Nt(),a=a.memoizedState,r=Nt();var d=r.queue.dispatch;return r.memoizedState=s,[a,d,!1]}function Ca(s,a,r,d){return s={tag:s,create:r,deps:d,inst:a,next:null},a=Le.updateQueue,a===null&&(a=lo(),Le.updateQueue=a),r=a.lastEffect,r===null?a.lastEffect=s.next=s:(d=r.next,r.next=s,s.next=d,a.lastEffect=s),s}function bx(){return Nt().memoizedState}function ro(s,a,r,d){var g=Xt();Le.flags|=s,g.memoizedState=Ca(1|a,{destroy:void 0},r,d===void 0?null:d)}function oo(s,a,r,d){var g=Nt();d=d===void 0?null:d;var v=g.memoizedState.inst;nt!==null&&d!==null&&xd(d,nt.memoizedState.deps)?g.memoizedState=Ca(a,v,r,d):(Le.flags|=s,g.memoizedState=Ca(1|a,v,r,d))}function vx(s,a){ro(8390656,8,s,a)}function _d(s,a){oo(2048,8,s,a)}function Py(s){Le.flags|=4;var a=Le.updateQueue;if(a===null)a=lo(),Le.updateQueue=a,a.events=[s];else{var r=a.events;r===null?a.events=[s]:r.push(s)}}function yx(s){var a=Nt().memoizedState;return Py({ref:a,nextImpl:s}),function(){if((Xe&2)!==0)throw Error(i(440));return a.impl.apply(void 0,arguments)}}function Nx(s,a){return oo(4,2,s,a)}function jx(s,a){return oo(4,4,s,a)}function wx(s,a){if(typeof a=="function"){s=s();var r=a(s);return function(){typeof r=="function"?r():a(null)}}if(a!=null)return s=s(),a.current=s,function(){a.current=null}}function _x(s,a,r){r=r!=null?r.concat([s]):null,oo(4,4,wx.bind(null,a,s),r)}function Sd(){}function Sx(s,a){var r=Nt();a=a===void 0?null:a;var d=r.memoizedState;return a!==null&&xd(a,d[1])?d[0]:(r.memoizedState=[s,a],s)}function Cx(s,a){var r=Nt();a=a===void 0?null:a;var d=r.memoizedState;if(a!==null&&xd(a,d[1]))return d[0];if(d=s(),Ml){pt(!0);try{s()}finally{pt(!1)}}return r.memoizedState=[d,a],d}function Cd(s,a,r){return r===void 0||(mn&1073741824)!==0&&(Ge&261930)===0?s.memoizedState=a:(s.memoizedState=r,s=k0(),Le.lanes|=s,Kn|=s,r)}function kx(s,a,r,d){return cs(r,a)?r:wa.current!==null?(s=Cd(s,r,d),cs(s,a)||(Ct=!0),s):(mn&42)===0||(mn&1073741824)!==0&&(Ge&261930)===0?(Ct=!0,s.memoizedState=r):(s=k0(),Le.lanes|=s,Kn|=s,a)}function Ex(s,a,r,d,g){var v=D.p;D.p=v!==0&&8>v?v:8;var S=w.T,I={};w.T=I,Td(s,!1,a,r);try{var X=g(),oe=w.S;if(oe!==null&&oe(I,X),X!==null&&typeof X=="object"&&typeof X.then=="function"){var me=Ry(X,d);$i(s,a,me,ms(s))}else $i(s,a,d,ms(s))}catch(be){$i(s,a,{then:function(){},status:"rejected",reason:be},ms())}finally{D.p=v,S!==null&&I.types!==null&&(S.types=I.types),w.T=S}}function $y(){}function kd(s,a,r,d){if(s.tag!==5)throw Error(i(476));var g=Tx(s).queue;Ex(s,g,a,V,r===null?$y:function(){return Ax(s),r(d)})}function Tx(s){var a=s.memoizedState;if(a!==null)return a;a={memoizedState:V,baseState:V,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:pn,lastRenderedState:V},next:null};var r={};return a.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:pn,lastRenderedState:r},next:null},s.memoizedState=a,s=s.alternate,s!==null&&(s.memoizedState=a),a}function Ax(s){var a=Tx(s);a.next===null&&(a=s.alternate.memoizedState),$i(s,a.next.queue,{},ms())}function Ed(){return Gt(sr)}function Mx(){return Nt().memoizedState}function Dx(){return Nt().memoizedState}function qy(s){for(var a=s.return;a!==null;){switch(a.tag){case 24:case 3:var r=ms();s=Hn(r);var d=Bn(a,s,r);d!==null&&(ls(d,a,r),Ii(d,a,r)),a={cache:nd()},s.payload=a;return}a=a.return}}function Oy(s,a,r){var d=ms();r={lane:d,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},co(s)?Ix(a,r):(r=Fc(s,a,r,d),r!==null&&(ls(r,s,d),zx(r,a,d)))}function Rx(s,a,r){var d=ms();$i(s,a,r,d)}function $i(s,a,r,d){var g={lane:d,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null};if(co(s))Ix(a,g);else{var v=s.alternate;if(s.lanes===0&&(v===null||v.lanes===0)&&(v=a.lastRenderedReducer,v!==null))try{var S=a.lastRenderedState,I=v(S,r);if(g.hasEagerState=!0,g.eagerState=I,cs(I,S))return Hr(s,a,g,0),rt===null&&Gr(),!1}catch{}finally{}if(r=Fc(s,a,g,d),r!==null)return ls(r,s,d),zx(r,a,d),!0}return!1}function Td(s,a,r,d){if(d={lane:2,revertLane:ru(),gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},co(s)){if(a)throw Error(i(479))}else a=Fc(s,r,d,2),a!==null&&ls(a,s,2)}function co(s){var a=s.alternate;return s===Le||a!==null&&a===Le}function Ix(s,a){_a=so=!0;var r=s.pending;r===null?a.next=a:(a.next=r.next,r.next=a),s.pending=a}function zx(s,a,r){if((r&4194048)!==0){var d=a.lanes;d&=s.pendingLanes,r|=d,a.lanes=r,Se(s,r)}}var qi={readContext:Gt,use:ao,useCallback:gt,useContext:gt,useEffect:gt,useImperativeHandle:gt,useLayoutEffect:gt,useInsertionEffect:gt,useMemo:gt,useReducer:gt,useRef:gt,useState:gt,useDebugValue:gt,useDeferredValue:gt,useTransition:gt,useSyncExternalStore:gt,useId:gt,useHostTransitionStatus:gt,useFormState:gt,useActionState:gt,useOptimistic:gt,useMemoCache:gt,useCacheRefresh:gt};qi.useEffectEvent=gt;var Lx={readContext:Gt,use:ao,useCallback:function(s,a){return Xt().memoizedState=[s,a===void 0?null:a],s},useContext:Gt,useEffect:vx,useImperativeHandle:function(s,a,r){r=r!=null?r.concat([s]):null,ro(4194308,4,wx.bind(null,a,s),r)},useLayoutEffect:function(s,a){return ro(4194308,4,s,a)},useInsertionEffect:function(s,a){ro(4,2,s,a)},useMemo:function(s,a){var r=Xt();a=a===void 0?null:a;var d=s();if(Ml){pt(!0);try{s()}finally{pt(!1)}}return r.memoizedState=[d,a],d},useReducer:function(s,a,r){var d=Xt();if(r!==void 0){var g=r(a);if(Ml){pt(!0);try{r(a)}finally{pt(!1)}}}else g=a;return d.memoizedState=d.baseState=g,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:g},d.queue=s,s=s.dispatch=Oy.bind(null,Le,s),[d.memoizedState,s]},useRef:function(s){var a=Xt();return s={current:s},a.memoizedState=s},useState:function(s){s=jd(s);var a=s.queue,r=Rx.bind(null,Le,a);return a.dispatch=r,[s.memoizedState,r]},useDebugValue:Sd,useDeferredValue:function(s,a){var r=Xt();return Cd(r,s,a)},useTransition:function(){var s=jd(!1);return s=Ex.bind(null,Le,s.queue,!0,!1),Xt().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,a,r){var d=Le,g=Xt();if(Ve){if(r===void 0)throw Error(i(407));r=r()}else{if(r=a(),rt===null)throw Error(i(349));(Ge&127)!==0||nx(d,a,r)}g.memoizedState=r;var v={value:r,getSnapshot:a};return g.queue=v,vx(ax.bind(null,d,v,s),[s]),d.flags|=2048,Ca(9,{destroy:void 0},lx.bind(null,d,v,r,a),null),r},useId:function(){var s=Xt(),a=rt.identifierPrefix;if(Ve){var r=Qs,d=Ks;r=(d&~(1<<32-We(d)-1)).toString(32)+r,a="_"+a+"R_"+r,r=no++,0<r&&(a+="H"+r.toString(32)),a+="_"}else r=Iy++,a="_"+a+"r_"+r.toString(32)+"_";return s.memoizedState=a},useHostTransitionStatus:Ed,useFormState:xx,useActionState:xx,useOptimistic:function(s){var a=Xt();a.memoizedState=a.baseState=s;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=r,a=Td.bind(null,Le,!0,r),r.dispatch=a,[s,a]},useMemoCache:vd,useCacheRefresh:function(){return Xt().memoizedState=qy.bind(null,Le)},useEffectEvent:function(s){var a=Xt(),r={impl:s};return a.memoizedState=r,function(){if((Xe&2)!==0)throw Error(i(440));return r.impl.apply(void 0,arguments)}}},Ad={readContext:Gt,use:ao,useCallback:Sx,useContext:Gt,useEffect:_d,useImperativeHandle:_x,useInsertionEffect:Nx,useLayoutEffect:jx,useMemo:Cx,useReducer:io,useRef:bx,useState:function(){return io(pn)},useDebugValue:Sd,useDeferredValue:function(s,a){var r=Nt();return kx(r,nt.memoizedState,s,a)},useTransition:function(){var s=io(pn)[0],a=Nt().memoizedState;return[typeof s=="boolean"?s:Pi(s),a]},useSyncExternalStore:sx,useId:Mx,useHostTransitionStatus:Ed,useFormState:mx,useActionState:mx,useOptimistic:function(s,a){var r=Nt();return ox(r,nt,s,a)},useMemoCache:vd,useCacheRefresh:Dx};Ad.useEffectEvent=yx;var Ux={readContext:Gt,use:ao,useCallback:Sx,useContext:Gt,useEffect:_d,useImperativeHandle:_x,useInsertionEffect:Nx,useLayoutEffect:jx,useMemo:Cx,useReducer:Nd,useRef:bx,useState:function(){return Nd(pn)},useDebugValue:Sd,useDeferredValue:function(s,a){var r=Nt();return nt===null?Cd(r,s,a):kx(r,nt.memoizedState,s,a)},useTransition:function(){var s=Nd(pn)[0],a=Nt().memoizedState;return[typeof s=="boolean"?s:Pi(s),a]},useSyncExternalStore:sx,useId:Mx,useHostTransitionStatus:Ed,useFormState:gx,useActionState:gx,useOptimistic:function(s,a){var r=Nt();return nt!==null?ox(r,nt,s,a):(r.baseState=s,[s,r.queue.dispatch])},useMemoCache:vd,useCacheRefresh:Dx};Ux.useEffectEvent=yx;function Md(s,a,r,d){a=s.memoizedState,r=r(d,a),r=r==null?a:y({},a,r),s.memoizedState=r,s.lanes===0&&(s.updateQueue.baseState=r)}var Dd={enqueueSetState:function(s,a,r){s=s._reactInternals;var d=ms(),g=Hn(d);g.payload=a,r!=null&&(g.callback=r),a=Bn(s,g,d),a!==null&&(ls(a,s,d),Ii(a,s,d))},enqueueReplaceState:function(s,a,r){s=s._reactInternals;var d=ms(),g=Hn(d);g.tag=1,g.payload=a,r!=null&&(g.callback=r),a=Bn(s,g,d),a!==null&&(ls(a,s,d),Ii(a,s,d))},enqueueForceUpdate:function(s,a){s=s._reactInternals;var r=ms(),d=Hn(r);d.tag=2,a!=null&&(d.callback=a),a=Bn(s,d,r),a!==null&&(ls(a,s,r),Ii(a,s,r))}};function Px(s,a,r,d,g,v,S){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(d,v,S):a.prototype&&a.prototype.isPureReactComponent?!Ci(r,d)||!Ci(g,v):!0}function $x(s,a,r,d){s=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(r,d),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(r,d),a.state!==s&&Dd.enqueueReplaceState(a,a.state,null)}function Dl(s,a){var r=a;if("ref"in a){r={};for(var d in a)d!=="ref"&&(r[d]=a[d])}if(s=s.defaultProps){r===a&&(r=y({},r));for(var g in s)r[g]===void 0&&(r[g]=s[g])}return r}function qx(s){Or(s)}function Ox(s){console.error(s)}function Gx(s){Or(s)}function uo(s,a){try{var r=s.onUncaughtError;r(a.value,{componentStack:a.stack})}catch(d){setTimeout(function(){throw d})}}function Hx(s,a,r){try{var d=s.onCaughtError;d(r.value,{componentStack:r.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function Rd(s,a,r){return r=Hn(r),r.tag=3,r.payload={element:null},r.callback=function(){uo(s,a)},r}function Bx(s){return s=Hn(s),s.tag=3,s}function Vx(s,a,r,d){var g=r.type.getDerivedStateFromError;if(typeof g=="function"){var v=d.value;s.payload=function(){return g(v)},s.callback=function(){Hx(a,r,d)}}var S=r.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(s.callback=function(){Hx(a,r,d),typeof g!="function"&&(Qn===null?Qn=new Set([this]):Qn.add(this));var I=d.stack;this.componentDidCatch(d.value,{componentStack:I!==null?I:""})})}function Gy(s,a,r,d,g){if(r.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(a=r.alternate,a!==null&&ba(a,r,g,!0),r=us.current,r!==null){switch(r.tag){case 31:case 13:return Es===null?wo():r.alternate===null&&bt===0&&(bt=3),r.flags&=-257,r.flags|=65536,r.lanes=g,d===Xr?r.flags|=16384:(a=r.updateQueue,a===null?r.updateQueue=new Set([d]):a.add(d),lu(s,d,g)),!1;case 22:return r.flags|=65536,d===Xr?r.flags|=16384:(a=r.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([d])},r.updateQueue=a):(r=a.retryQueue,r===null?a.retryQueue=new Set([d]):r.add(d)),lu(s,d,g)),!1}throw Error(i(435,r.tag))}return lu(s,d,g),wo(),!1}if(Ve)return a=us.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=g,d!==Zc&&(s=Error(i(422),{cause:d}),Ti(_s(s,r)))):(d!==Zc&&(a=Error(i(423),{cause:d}),Ti(_s(a,r))),s=s.current.alternate,s.flags|=65536,g&=-g,s.lanes|=g,d=_s(d,r),g=Rd(s.stateNode,d,g),cd(s,g),bt!==4&&(bt=2)),!1;var v=Error(i(520),{cause:d});if(v=_s(v,r),Yi===null?Yi=[v]:Yi.push(v),bt!==4&&(bt=2),a===null)return!0;d=_s(d,r),r=a;do{switch(r.tag){case 3:return r.flags|=65536,s=g&-g,r.lanes|=s,s=Rd(r.stateNode,d,s),cd(r,s),!1;case 1:if(a=r.type,v=r.stateNode,(r.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Qn===null||!Qn.has(v))))return r.flags|=65536,g&=-g,r.lanes|=g,g=Bx(g),Vx(g,s,r,d),cd(r,g),!1}r=r.return}while(r!==null);return!1}var Id=Error(i(461)),Ct=!1;function Ht(s,a,r,d){a.child=s===null?Kf(a,null,r,d):Al(a,s.child,r,d)}function Fx(s,a,r,d,g){r=r.render;var v=a.ref;if("ref"in d){var S={};for(var I in d)I!=="ref"&&(S[I]=d[I])}else S=d;return Cl(a),d=md(s,a,r,S,v,g),I=pd(),s!==null&&!Ct?(gd(s,a,g),gn(s,a,g)):(Ve&&I&&Qc(a),a.flags|=1,Ht(s,a,d,g),a.child)}function Jx(s,a,r,d,g){if(s===null){var v=r.type;return typeof v=="function"&&!Jc(v)&&v.defaultProps===void 0&&r.compare===null?(a.tag=15,a.type=v,Yx(s,a,v,d,g)):(s=Vr(r.type,null,d,a,a.mode,g),s.ref=a.ref,s.return=a,a.child=s)}if(v=s.child,!Gd(s,g)){var S=v.memoizedProps;if(r=r.compare,r=r!==null?r:Ci,r(S,d)&&s.ref===a.ref)return gn(s,a,g)}return a.flags|=1,s=un(v,d),s.ref=a.ref,s.return=a,a.child=s}function Yx(s,a,r,d,g){if(s!==null){var v=s.memoizedProps;if(Ci(v,d)&&s.ref===a.ref)if(Ct=!1,a.pendingProps=d=v,Gd(s,g))(s.flags&131072)!==0&&(Ct=!0);else return a.lanes=s.lanes,gn(s,a,g)}return zd(s,a,r,d,g)}function Kx(s,a,r,d){var g=d.children,v=s!==null?s.memoizedState:null;if(s===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.mode==="hidden"){if((a.flags&128)!==0){if(v=v!==null?v.baseLanes|r:r,s!==null){for(d=a.child=s.child,g=0;d!==null;)g=g|d.lanes|d.childLanes,d=d.sibling;d=g&~v}else d=0,a.child=null;return Qx(s,a,v,r,d)}if((r&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},s!==null&&Kr(a,v!==null?v.cachePool:null),v!==null?Zf(a,v):ud(),Wf(a);else return d=a.lanes=536870912,Qx(s,a,v!==null?v.baseLanes|r:r,r,d)}else v!==null?(Kr(a,v.cachePool),Zf(a,v),Fn(),a.memoizedState=null):(s!==null&&Kr(a,null),ud(),Fn());return Ht(s,a,g,r),a.child}function Oi(s,a){return s!==null&&s.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function Qx(s,a,r,d,g){var v=ad();return v=v===null?null:{parent:_t._currentValue,pool:v},a.memoizedState={baseLanes:r,cachePool:v},s!==null&&Kr(a,null),ud(),Wf(a),s!==null&&ba(s,a,d,!0),a.childLanes=g,null}function ho(s,a){return a=xo({mode:a.mode,children:a.children},s.mode),a.ref=s.ref,s.child=a,a.return=s,a}function Xx(s,a,r){return Al(a,s.child,null,r),s=ho(a,a.pendingProps),s.flags|=2,hs(a),a.memoizedState=null,s}function Hy(s,a,r){var d=a.pendingProps,g=(a.flags&128)!==0;if(a.flags&=-129,s===null){if(Ve){if(d.mode==="hidden")return s=ho(a,d),a.lanes=536870912,Oi(null,s);if(fd(a),(s=ut)?(s=cm(s,ks),s=s!==null&&s.data==="&"?s:null,s!==null&&(a.memoizedState={dehydrated:s,treeContext:Pn!==null?{id:Ks,overflow:Qs}:null,retryLane:536870912,hydrationErrors:null},r=If(s),r.return=a,a.child=r,Ot=a,ut=null)):s=null,s===null)throw qn(a);return a.lanes=536870912,null}return ho(a,d)}var v=s.memoizedState;if(v!==null){var S=v.dehydrated;if(fd(a),g)if(a.flags&256)a.flags&=-257,a=Xx(s,a,r);else if(a.memoizedState!==null)a.child=s.child,a.flags|=128,a=null;else throw Error(i(558));else if(Ct||ba(s,a,r,!1),g=(r&s.childLanes)!==0,Ct||g){if(d=rt,d!==null&&(S=De(d,r),S!==0&&S!==v.retryLane))throw v.retryLane=S,jl(s,S),ls(d,s,S),Id;wo(),a=Xx(s,a,r)}else s=v.treeContext,ut=Ts(S.nextSibling),Ot=a,Ve=!0,$n=null,ks=!1,s!==null&&Uf(a,s),a=ho(a,d),a.flags|=4096;return a}return s=un(s.child,{mode:d.mode,children:d.children}),s.ref=a.ref,a.child=s,s.return=a,s}function fo(s,a){var r=a.ref;if(r===null)s!==null&&s.ref!==null&&(a.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(i(284));(s===null||s.ref!==r)&&(a.flags|=4194816)}}function zd(s,a,r,d,g){return Cl(a),r=md(s,a,r,d,void 0,g),d=pd(),s!==null&&!Ct?(gd(s,a,g),gn(s,a,g)):(Ve&&d&&Qc(a),a.flags|=1,Ht(s,a,r,g),a.child)}function Zx(s,a,r,d,g,v){return Cl(a),a.updateQueue=null,r=tx(a,d,r,g),ex(s),d=pd(),s!==null&&!Ct?(gd(s,a,v),gn(s,a,v)):(Ve&&d&&Qc(a),a.flags|=1,Ht(s,a,r,v),a.child)}function Wx(s,a,r,d,g){if(Cl(a),a.stateNode===null){var v=xa,S=r.contextType;typeof S=="object"&&S!==null&&(v=Gt(S)),v=new r(d,v),a.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=Dd,a.stateNode=v,v._reactInternals=a,v=a.stateNode,v.props=d,v.state=a.memoizedState,v.refs={},rd(a),S=r.contextType,v.context=typeof S=="object"&&S!==null?Gt(S):xa,v.state=a.memoizedState,S=r.getDerivedStateFromProps,typeof S=="function"&&(Md(a,r,S,d),v.state=a.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(S=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),S!==v.state&&Dd.enqueueReplaceState(v,v.state,null),Li(a,d,v,g),zi(),v.state=a.memoizedState),typeof v.componentDidMount=="function"&&(a.flags|=4194308),d=!0}else if(s===null){v=a.stateNode;var I=a.memoizedProps,X=Dl(r,I);v.props=X;var oe=v.context,me=r.contextType;S=xa,typeof me=="object"&&me!==null&&(S=Gt(me));var be=r.getDerivedStateFromProps;me=typeof be=="function"||typeof v.getSnapshotBeforeUpdate=="function",I=a.pendingProps!==I,me||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(I||oe!==S)&&$x(a,v,d,S),Gn=!1;var ue=a.memoizedState;v.state=ue,Li(a,d,v,g),zi(),oe=a.memoizedState,I||ue!==oe||Gn?(typeof be=="function"&&(Md(a,r,be,d),oe=a.memoizedState),(X=Gn||Px(a,r,X,d,ue,oe,S))?(me||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(a.flags|=4194308)):(typeof v.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=d,a.memoizedState=oe),v.props=d,v.state=oe,v.context=S,d=X):(typeof v.componentDidMount=="function"&&(a.flags|=4194308),d=!1)}else{v=a.stateNode,od(s,a),S=a.memoizedProps,me=Dl(r,S),v.props=me,be=a.pendingProps,ue=v.context,oe=r.contextType,X=xa,typeof oe=="object"&&oe!==null&&(X=Gt(oe)),I=r.getDerivedStateFromProps,(oe=typeof I=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(S!==be||ue!==X)&&$x(a,v,d,X),Gn=!1,ue=a.memoizedState,v.state=ue,Li(a,d,v,g),zi();var he=a.memoizedState;S!==be||ue!==he||Gn||s!==null&&s.dependencies!==null&&Jr(s.dependencies)?(typeof I=="function"&&(Md(a,r,I,d),he=a.memoizedState),(me=Gn||Px(a,r,me,d,ue,he,X)||s!==null&&s.dependencies!==null&&Jr(s.dependencies))?(oe||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(d,he,X),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(d,he,X)),typeof v.componentDidUpdate=="function"&&(a.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof v.componentDidUpdate!="function"||S===s.memoizedProps&&ue===s.memoizedState||(a.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||S===s.memoizedProps&&ue===s.memoizedState||(a.flags|=1024),a.memoizedProps=d,a.memoizedState=he),v.props=d,v.state=he,v.context=X,d=me):(typeof v.componentDidUpdate!="function"||S===s.memoizedProps&&ue===s.memoizedState||(a.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||S===s.memoizedProps&&ue===s.memoizedState||(a.flags|=1024),d=!1)}return v=d,fo(s,a),d=(a.flags&128)!==0,v||d?(v=a.stateNode,r=d&&typeof r.getDerivedStateFromError!="function"?null:v.render(),a.flags|=1,s!==null&&d?(a.child=Al(a,s.child,null,g),a.child=Al(a,null,r,g)):Ht(s,a,r,g),a.memoizedState=v.state,s=a.child):s=gn(s,a,g),s}function e0(s,a,r,d){return _l(),a.flags|=256,Ht(s,a,r,d),a.child}var Ld={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ud(s){return{baseLanes:s,cachePool:Hf()}}function Pd(s,a,r){return s=s!==null?s.childLanes&~r:0,a&&(s|=xs),s}function t0(s,a,r){var d=a.pendingProps,g=!1,v=(a.flags&128)!==0,S;if((S=v)||(S=s!==null&&s.memoizedState===null?!1:(yt.current&2)!==0),S&&(g=!0,a.flags&=-129),S=(a.flags&32)!==0,a.flags&=-33,s===null){if(Ve){if(g?Vn(a):Fn(),(s=ut)?(s=cm(s,ks),s=s!==null&&s.data!=="&"?s:null,s!==null&&(a.memoizedState={dehydrated:s,treeContext:Pn!==null?{id:Ks,overflow:Qs}:null,retryLane:536870912,hydrationErrors:null},r=If(s),r.return=a,a.child=r,Ot=a,ut=null)):s=null,s===null)throw qn(a);return yu(s)?a.lanes=32:a.lanes=536870912,null}var I=d.children;return d=d.fallback,g?(Fn(),g=a.mode,I=xo({mode:"hidden",children:I},g),d=wl(d,g,r,null),I.return=a,d.return=a,I.sibling=d,a.child=I,d=a.child,d.memoizedState=Ud(r),d.childLanes=Pd(s,S,r),a.memoizedState=Ld,Oi(null,d)):(Vn(a),$d(a,I))}var X=s.memoizedState;if(X!==null&&(I=X.dehydrated,I!==null)){if(v)a.flags&256?(Vn(a),a.flags&=-257,a=qd(s,a,r)):a.memoizedState!==null?(Fn(),a.child=s.child,a.flags|=128,a=null):(Fn(),I=d.fallback,g=a.mode,d=xo({mode:"visible",children:d.children},g),I=wl(I,g,r,null),I.flags|=2,d.return=a,I.return=a,d.sibling=I,a.child=d,Al(a,s.child,null,r),d=a.child,d.memoizedState=Ud(r),d.childLanes=Pd(s,S,r),a.memoizedState=Ld,a=Oi(null,d));else if(Vn(a),yu(I)){if(S=I.nextSibling&&I.nextSibling.dataset,S)var oe=S.dgst;S=oe,d=Error(i(419)),d.stack="",d.digest=S,Ti({value:d,source:null,stack:null}),a=qd(s,a,r)}else if(Ct||ba(s,a,r,!1),S=(r&s.childLanes)!==0,Ct||S){if(S=rt,S!==null&&(d=De(S,r),d!==0&&d!==X.retryLane))throw X.retryLane=d,jl(s,d),ls(S,s,d),Id;vu(I)||wo(),a=qd(s,a,r)}else vu(I)?(a.flags|=192,a.child=s.child,a=null):(s=X.treeContext,ut=Ts(I.nextSibling),Ot=a,Ve=!0,$n=null,ks=!1,s!==null&&Uf(a,s),a=$d(a,d.children),a.flags|=4096);return a}return g?(Fn(),I=d.fallback,g=a.mode,X=s.child,oe=X.sibling,d=un(X,{mode:"hidden",children:d.children}),d.subtreeFlags=X.subtreeFlags&65011712,oe!==null?I=un(oe,I):(I=wl(I,g,r,null),I.flags|=2),I.return=a,d.return=a,d.sibling=I,a.child=d,Oi(null,d),d=a.child,I=s.child.memoizedState,I===null?I=Ud(r):(g=I.cachePool,g!==null?(X=_t._currentValue,g=g.parent!==X?{parent:X,pool:X}:g):g=Hf(),I={baseLanes:I.baseLanes|r,cachePool:g}),d.memoizedState=I,d.childLanes=Pd(s,S,r),a.memoizedState=Ld,Oi(s.child,d)):(Vn(a),r=s.child,s=r.sibling,r=un(r,{mode:"visible",children:d.children}),r.return=a,r.sibling=null,s!==null&&(S=a.deletions,S===null?(a.deletions=[s],a.flags|=16):S.push(s)),a.child=r,a.memoizedState=null,r)}function $d(s,a){return a=xo({mode:"visible",children:a},s.mode),a.return=s,s.child=a}function xo(s,a){return s=ds(22,s,null,a),s.lanes=0,s}function qd(s,a,r){return Al(a,s.child,null,r),s=$d(a,a.pendingProps.children),s.flags|=2,a.memoizedState=null,s}function s0(s,a,r){s.lanes|=a;var d=s.alternate;d!==null&&(d.lanes|=a),td(s.return,a,r)}function Od(s,a,r,d,g,v){var S=s.memoizedState;S===null?s.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:d,tail:r,tailMode:g,treeForkCount:v}:(S.isBackwards=a,S.rendering=null,S.renderingStartTime=0,S.last=d,S.tail=r,S.tailMode=g,S.treeForkCount=v)}function n0(s,a,r){var d=a.pendingProps,g=d.revealOrder,v=d.tail;d=d.children;var S=yt.current,I=(S&2)!==0;if(I?(S=S&1|2,a.flags|=128):S&=1,j(yt,S),Ht(s,a,d,r),d=Ve?Ei:0,!I&&s!==null&&(s.flags&128)!==0)e:for(s=a.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&s0(s,r,a);else if(s.tag===19)s0(s,r,a);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break e;for(;s.sibling===null;){if(s.return===null||s.return===a)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(g){case"forwards":for(r=a.child,g=null;r!==null;)s=r.alternate,s!==null&&to(s)===null&&(g=r),r=r.sibling;r=g,r===null?(g=a.child,a.child=null):(g=r.sibling,r.sibling=null),Od(a,!1,g,r,v,d);break;case"backwards":case"unstable_legacy-backwards":for(r=null,g=a.child,a.child=null;g!==null;){if(s=g.alternate,s!==null&&to(s)===null){a.child=g;break}s=g.sibling,g.sibling=r,r=g,g=s}Od(a,!0,r,null,v,d);break;case"together":Od(a,!1,null,null,void 0,d);break;default:a.memoizedState=null}return a.child}function gn(s,a,r){if(s!==null&&(a.dependencies=s.dependencies),Kn|=a.lanes,(r&a.childLanes)===0)if(s!==null){if(ba(s,a,r,!1),(r&a.childLanes)===0)return null}else return null;if(s!==null&&a.child!==s.child)throw Error(i(153));if(a.child!==null){for(s=a.child,r=un(s,s.pendingProps),a.child=r,r.return=a;s.sibling!==null;)s=s.sibling,r=r.sibling=un(s,s.pendingProps),r.return=a;r.sibling=null}return a.child}function Gd(s,a){return(s.lanes&a)!==0?!0:(s=s.dependencies,!!(s!==null&&Jr(s)))}function By(s,a,r){switch(a.tag){case 3:de(a,a.stateNode.containerInfo),On(a,_t,s.memoizedState.cache),_l();break;case 27:case 5:je(a);break;case 4:de(a,a.stateNode.containerInfo);break;case 10:On(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,fd(a),null;break;case 13:var d=a.memoizedState;if(d!==null)return d.dehydrated!==null?(Vn(a),a.flags|=128,null):(r&a.child.childLanes)!==0?t0(s,a,r):(Vn(a),s=gn(s,a,r),s!==null?s.sibling:null);Vn(a);break;case 19:var g=(s.flags&128)!==0;if(d=(r&a.childLanes)!==0,d||(ba(s,a,r,!1),d=(r&a.childLanes)!==0),g){if(d)return n0(s,a,r);a.flags|=128}if(g=a.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),j(yt,yt.current),d)break;return null;case 22:return a.lanes=0,Kx(s,a,r,a.pendingProps);case 24:On(a,_t,s.memoizedState.cache)}return gn(s,a,r)}function l0(s,a,r){if(s!==null)if(s.memoizedProps!==a.pendingProps)Ct=!0;else{if(!Gd(s,r)&&(a.flags&128)===0)return Ct=!1,By(s,a,r);Ct=(s.flags&131072)!==0}else Ct=!1,Ve&&(a.flags&1048576)!==0&&Lf(a,Ei,a.index);switch(a.lanes=0,a.tag){case 16:e:{var d=a.pendingProps;if(s=El(a.elementType),a.type=s,typeof s=="function")Jc(s)?(d=Dl(s,d),a.tag=1,a=Wx(null,a,s,d,r)):(a.tag=0,a=zd(null,a,s,d,r));else{if(s!=null){var g=s.$$typeof;if(g===K){a.tag=11,a=Fx(null,a,s,d,r);break e}else if(g===$){a.tag=14,a=Jx(null,a,s,d,r);break e}}throw a=se(s)||s,Error(i(306,a,""))}}return a;case 0:return zd(s,a,a.type,a.pendingProps,r);case 1:return d=a.type,g=Dl(d,a.pendingProps),Wx(s,a,d,g,r);case 3:e:{if(de(a,a.stateNode.containerInfo),s===null)throw Error(i(387));d=a.pendingProps;var v=a.memoizedState;g=v.element,od(s,a),Li(a,d,null,r);var S=a.memoizedState;if(d=S.cache,On(a,_t,d),d!==v.cache&&sd(a,[_t],r,!0),zi(),d=S.element,v.isDehydrated)if(v={element:d,isDehydrated:!1,cache:S.cache},a.updateQueue.baseState=v,a.memoizedState=v,a.flags&256){a=e0(s,a,d,r);break e}else if(d!==g){g=_s(Error(i(424)),a),Ti(g),a=e0(s,a,d,r);break e}else{switch(s=a.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(ut=Ts(s.firstChild),Ot=a,Ve=!0,$n=null,ks=!0,r=Kf(a,null,d,r),a.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling}else{if(_l(),d===g){a=gn(s,a,r);break e}Ht(s,a,d,r)}a=a.child}return a;case 26:return fo(s,a),s===null?(r=mm(a.type,null,a.pendingProps,null))?a.memoizedState=r:Ve||(r=a.type,s=a.pendingProps,d=Ao(H.current).createElement(r),d[At]=a,d[zt]=s,Bt(d,r,s),Ut(d),a.stateNode=d):a.memoizedState=mm(a.type,s.memoizedProps,a.pendingProps,s.memoizedState),null;case 27:return je(a),s===null&&Ve&&(d=a.stateNode=hm(a.type,a.pendingProps,H.current),Ot=a,ks=!0,g=ut,el(a.type)?(Nu=g,ut=Ts(d.firstChild)):ut=g),Ht(s,a,a.pendingProps.children,r),fo(s,a),s===null&&(a.flags|=4194304),a.child;case 5:return s===null&&Ve&&((g=d=ut)&&(d=y1(d,a.type,a.pendingProps,ks),d!==null?(a.stateNode=d,Ot=a,ut=Ts(d.firstChild),ks=!1,g=!0):g=!1),g||qn(a)),je(a),g=a.type,v=a.pendingProps,S=s!==null?s.memoizedProps:null,d=v.children,pu(g,v)?d=null:S!==null&&pu(g,S)&&(a.flags|=32),a.memoizedState!==null&&(g=md(s,a,zy,null,null,r),sr._currentValue=g),fo(s,a),Ht(s,a,d,r),a.child;case 6:return s===null&&Ve&&((s=r=ut)&&(r=N1(r,a.pendingProps,ks),r!==null?(a.stateNode=r,Ot=a,ut=null,s=!0):s=!1),s||qn(a)),null;case 13:return t0(s,a,r);case 4:return de(a,a.stateNode.containerInfo),d=a.pendingProps,s===null?a.child=Al(a,null,d,r):Ht(s,a,d,r),a.child;case 11:return Fx(s,a,a.type,a.pendingProps,r);case 7:return Ht(s,a,a.pendingProps,r),a.child;case 8:return Ht(s,a,a.pendingProps.children,r),a.child;case 12:return Ht(s,a,a.pendingProps.children,r),a.child;case 10:return d=a.pendingProps,On(a,a.type,d.value),Ht(s,a,d.children,r),a.child;case 9:return g=a.type._context,d=a.pendingProps.children,Cl(a),g=Gt(g),d=d(g),a.flags|=1,Ht(s,a,d,r),a.child;case 14:return Jx(s,a,a.type,a.pendingProps,r);case 15:return Yx(s,a,a.type,a.pendingProps,r);case 19:return n0(s,a,r);case 31:return Hy(s,a,r);case 22:return Kx(s,a,r,a.pendingProps);case 24:return Cl(a),d=Gt(_t),s===null?(g=ad(),g===null&&(g=rt,v=nd(),g.pooledCache=v,v.refCount++,v!==null&&(g.pooledCacheLanes|=r),g=v),a.memoizedState={parent:d,cache:g},rd(a),On(a,_t,g)):((s.lanes&r)!==0&&(od(s,a),Li(a,null,null,r),zi()),g=s.memoizedState,v=a.memoizedState,g.parent!==d?(g={parent:d,cache:d},a.memoizedState=g,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=g),On(a,_t,d)):(d=v.cache,On(a,_t,d),d!==g.cache&&sd(a,[_t],r,!0))),Ht(s,a,a.pendingProps.children,r),a.child;case 29:throw a.pendingProps}throw Error(i(156,a.tag))}function bn(s){s.flags|=4}function Hd(s,a,r,d,g){if((a=(s.mode&32)!==0)&&(a=!1),a){if(s.flags|=16777216,(g&335544128)===g)if(s.stateNode.complete)s.flags|=8192;else if(M0())s.flags|=8192;else throw Tl=Xr,id}else s.flags&=-16777217}function a0(s,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!ym(a))if(M0())s.flags|=8192;else throw Tl=Xr,id}function mo(s,a){a!==null&&(s.flags|=4),s.flags&16384&&(a=s.tag!==22?Is():536870912,s.lanes|=a,Aa|=a)}function Gi(s,a){if(!Ve)switch(s.tailMode){case"hidden":a=s.tail;for(var r=null;a!==null;)a.alternate!==null&&(r=a),a=a.sibling;r===null?s.tail=null:r.sibling=null;break;case"collapsed":r=s.tail;for(var d=null;r!==null;)r.alternate!==null&&(d=r),r=r.sibling;d===null?a||s.tail===null?s.tail=null:s.tail.sibling=null:d.sibling=null}}function ht(s){var a=s.alternate!==null&&s.alternate.child===s.child,r=0,d=0;if(a)for(var g=s.child;g!==null;)r|=g.lanes|g.childLanes,d|=g.subtreeFlags&65011712,d|=g.flags&65011712,g.return=s,g=g.sibling;else for(g=s.child;g!==null;)r|=g.lanes|g.childLanes,d|=g.subtreeFlags,d|=g.flags,g.return=s,g=g.sibling;return s.subtreeFlags|=d,s.childLanes=r,a}function Vy(s,a,r){var d=a.pendingProps;switch(Xc(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ht(a),null;case 1:return ht(a),null;case 3:return r=a.stateNode,d=null,s!==null&&(d=s.memoizedState.cache),a.memoizedState.cache!==d&&(a.flags|=2048),xn(_t),fe(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(s===null||s.child===null)&&(ga(a)?bn(a):s===null||s.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Wc())),ht(a),null;case 26:var g=a.type,v=a.memoizedState;return s===null?(bn(a),v!==null?(ht(a),a0(a,v)):(ht(a),Hd(a,g,null,d,r))):v?v!==s.memoizedState?(bn(a),ht(a),a0(a,v)):(ht(a),a.flags&=-16777217):(s=s.memoizedProps,s!==d&&bn(a),ht(a),Hd(a,g,s,d,r)),null;case 27:if(we(a),r=H.current,g=a.type,s!==null&&a.stateNode!=null)s.memoizedProps!==d&&bn(a);else{if(!d){if(a.stateNode===null)throw Error(i(166));return ht(a),null}s=T.current,ga(a)?Pf(a):(s=hm(g,d,r),a.stateNode=s,bn(a))}return ht(a),null;case 5:if(we(a),g=a.type,s!==null&&a.stateNode!=null)s.memoizedProps!==d&&bn(a);else{if(!d){if(a.stateNode===null)throw Error(i(166));return ht(a),null}if(v=T.current,ga(a))Pf(a);else{var S=Ao(H.current);switch(v){case 1:v=S.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:v=S.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":v=S.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":v=S.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":v=S.createElement("div"),v.innerHTML="<script><\/script>",v=v.removeChild(v.firstChild);break;case"select":v=typeof d.is=="string"?S.createElement("select",{is:d.is}):S.createElement("select"),d.multiple?v.multiple=!0:d.size&&(v.size=d.size);break;default:v=typeof d.is=="string"?S.createElement(g,{is:d.is}):S.createElement(g)}}v[At]=a,v[zt]=d;e:for(S=a.child;S!==null;){if(S.tag===5||S.tag===6)v.appendChild(S.stateNode);else if(S.tag!==4&&S.tag!==27&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===a)break e;for(;S.sibling===null;){if(S.return===null||S.return===a)break e;S=S.return}S.sibling.return=S.return,S=S.sibling}a.stateNode=v;e:switch(Bt(v,g,d),g){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}d&&bn(a)}}return ht(a),Hd(a,a.type,s===null?null:s.memoizedProps,a.pendingProps,r),null;case 6:if(s&&a.stateNode!=null)s.memoizedProps!==d&&bn(a);else{if(typeof d!="string"&&a.stateNode===null)throw Error(i(166));if(s=H.current,ga(a)){if(s=a.stateNode,r=a.memoizedProps,d=null,g=Ot,g!==null)switch(g.tag){case 27:case 5:d=g.memoizedProps}s[At]=a,s=!!(s.nodeValue===r||d!==null&&d.suppressHydrationWarning===!0||tm(s.nodeValue,r)),s||qn(a,!0)}else s=Ao(s).createTextNode(d),s[At]=a,a.stateNode=s}return ht(a),null;case 31:if(r=a.memoizedState,s===null||s.memoizedState!==null){if(d=ga(a),r!==null){if(s===null){if(!d)throw Error(i(318));if(s=a.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(557));s[At]=a}else _l(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;ht(a),s=!1}else r=Wc(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=r),s=!0;if(!s)return a.flags&256?(hs(a),a):(hs(a),null);if((a.flags&128)!==0)throw Error(i(558))}return ht(a),null;case 13:if(d=a.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(g=ga(a),d!==null&&d.dehydrated!==null){if(s===null){if(!g)throw Error(i(318));if(g=a.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(i(317));g[At]=a}else _l(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;ht(a),g=!1}else g=Wc(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=g),g=!0;if(!g)return a.flags&256?(hs(a),a):(hs(a),null)}return hs(a),(a.flags&128)!==0?(a.lanes=r,a):(r=d!==null,s=s!==null&&s.memoizedState!==null,r&&(d=a.child,g=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(g=d.alternate.memoizedState.cachePool.pool),v=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(v=d.memoizedState.cachePool.pool),v!==g&&(d.flags|=2048)),r!==s&&r&&(a.child.flags|=8192),mo(a,a.updateQueue),ht(a),null);case 4:return fe(),s===null&&uu(a.stateNode.containerInfo),ht(a),null;case 10:return xn(a.type),ht(a),null;case 19:if(M(yt),d=a.memoizedState,d===null)return ht(a),null;if(g=(a.flags&128)!==0,v=d.rendering,v===null)if(g)Gi(d,!1);else{if(bt!==0||s!==null&&(s.flags&128)!==0)for(s=a.child;s!==null;){if(v=to(s),v!==null){for(a.flags|=128,Gi(d,!1),s=v.updateQueue,a.updateQueue=s,mo(a,s),a.subtreeFlags=0,s=r,r=a.child;r!==null;)Rf(r,s),r=r.sibling;return j(yt,yt.current&1|2),Ve&&hn(a,d.treeForkCount),a.child}s=s.sibling}d.tail!==null&&Qe()>yo&&(a.flags|=128,g=!0,Gi(d,!1),a.lanes=4194304)}else{if(!g)if(s=to(v),s!==null){if(a.flags|=128,g=!0,s=s.updateQueue,a.updateQueue=s,mo(a,s),Gi(d,!0),d.tail===null&&d.tailMode==="hidden"&&!v.alternate&&!Ve)return ht(a),null}else 2*Qe()-d.renderingStartTime>yo&&r!==536870912&&(a.flags|=128,g=!0,Gi(d,!1),a.lanes=4194304);d.isBackwards?(v.sibling=a.child,a.child=v):(s=d.last,s!==null?s.sibling=v:a.child=v,d.last=v)}return d.tail!==null?(s=d.tail,d.rendering=s,d.tail=s.sibling,d.renderingStartTime=Qe(),s.sibling=null,r=yt.current,j(yt,g?r&1|2:r&1),Ve&&hn(a,d.treeForkCount),s):(ht(a),null);case 22:case 23:return hs(a),hd(),d=a.memoizedState!==null,s!==null?s.memoizedState!==null!==d&&(a.flags|=8192):d&&(a.flags|=8192),d?(r&536870912)!==0&&(a.flags&128)===0&&(ht(a),a.subtreeFlags&6&&(a.flags|=8192)):ht(a),r=a.updateQueue,r!==null&&mo(a,r.retryQueue),r=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(r=s.memoizedState.cachePool.pool),d=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(d=a.memoizedState.cachePool.pool),d!==r&&(a.flags|=2048),s!==null&&M(kl),null;case 24:return r=null,s!==null&&(r=s.memoizedState.cache),a.memoizedState.cache!==r&&(a.flags|=2048),xn(_t),ht(a),null;case 25:return null;case 30:return null}throw Error(i(156,a.tag))}function Fy(s,a){switch(Xc(a),a.tag){case 1:return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 3:return xn(_t),fe(),s=a.flags,(s&65536)!==0&&(s&128)===0?(a.flags=s&-65537|128,a):null;case 26:case 27:case 5:return we(a),null;case 31:if(a.memoizedState!==null){if(hs(a),a.alternate===null)throw Error(i(340));_l()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 13:if(hs(a),s=a.memoizedState,s!==null&&s.dehydrated!==null){if(a.alternate===null)throw Error(i(340));_l()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 19:return M(yt),null;case 4:return fe(),null;case 10:return xn(a.type),null;case 22:case 23:return hs(a),hd(),s!==null&&M(kl),s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 24:return xn(_t),null;case 25:return null;default:return null}}function i0(s,a){switch(Xc(a),a.tag){case 3:xn(_t),fe();break;case 26:case 27:case 5:we(a);break;case 4:fe();break;case 31:a.memoizedState!==null&&hs(a);break;case 13:hs(a);break;case 19:M(yt);break;case 10:xn(a.type);break;case 22:case 23:hs(a),hd(),s!==null&&M(kl);break;case 24:xn(_t)}}function Hi(s,a){try{var r=a.updateQueue,d=r!==null?r.lastEffect:null;if(d!==null){var g=d.next;r=g;do{if((r.tag&s)===s){d=void 0;var v=r.create,S=r.inst;d=v(),S.destroy=d}r=r.next}while(r!==g)}}catch(I){st(a,a.return,I)}}function Jn(s,a,r){try{var d=a.updateQueue,g=d!==null?d.lastEffect:null;if(g!==null){var v=g.next;d=v;do{if((d.tag&s)===s){var S=d.inst,I=S.destroy;if(I!==void 0){S.destroy=void 0,g=a;var X=r,oe=I;try{oe()}catch(me){st(g,X,me)}}}d=d.next}while(d!==v)}}catch(me){st(a,a.return,me)}}function r0(s){var a=s.updateQueue;if(a!==null){var r=s.stateNode;try{Xf(a,r)}catch(d){st(s,s.return,d)}}}function o0(s,a,r){r.props=Dl(s.type,s.memoizedProps),r.state=s.memoizedState;try{r.componentWillUnmount()}catch(d){st(s,a,d)}}function Bi(s,a){try{var r=s.ref;if(r!==null){switch(s.tag){case 26:case 27:case 5:var d=s.stateNode;break;case 30:d=s.stateNode;break;default:d=s.stateNode}typeof r=="function"?s.refCleanup=r(d):r.current=d}}catch(g){st(s,a,g)}}function Xs(s,a){var r=s.ref,d=s.refCleanup;if(r!==null)if(typeof d=="function")try{d()}catch(g){st(s,a,g)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(g){st(s,a,g)}else r.current=null}function c0(s){var a=s.type,r=s.memoizedProps,d=s.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":r.autoFocus&&d.focus();break e;case"img":r.src?d.src=r.src:r.srcSet&&(d.srcset=r.srcSet)}}catch(g){st(s,s.return,g)}}function Bd(s,a,r){try{var d=s.stateNode;x1(d,s.type,r,a),d[zt]=a}catch(g){st(s,s.return,g)}}function d0(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&el(s.type)||s.tag===4}function Vd(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||d0(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&el(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Fd(s,a,r){var d=s.tag;if(d===5||d===6)s=s.stateNode,a?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(s,a):(a=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,a.appendChild(s),r=r._reactRootContainer,r!=null||a.onclick!==null||(a.onclick=cn));else if(d!==4&&(d===27&&el(s.type)&&(r=s.stateNode,a=null),s=s.child,s!==null))for(Fd(s,a,r),s=s.sibling;s!==null;)Fd(s,a,r),s=s.sibling}function po(s,a,r){var d=s.tag;if(d===5||d===6)s=s.stateNode,a?r.insertBefore(s,a):r.appendChild(s);else if(d!==4&&(d===27&&el(s.type)&&(r=s.stateNode),s=s.child,s!==null))for(po(s,a,r),s=s.sibling;s!==null;)po(s,a,r),s=s.sibling}function u0(s){var a=s.stateNode,r=s.memoizedProps;try{for(var d=s.type,g=a.attributes;g.length;)a.removeAttributeNode(g[0]);Bt(a,d,r),a[At]=s,a[zt]=r}catch(v){st(s,s.return,v)}}var vn=!1,kt=!1,Jd=!1,h0=typeof WeakSet=="function"?WeakSet:Set,Pt=null;function Jy(s,a){if(s=s.containerInfo,xu=Uo,s=_f(s),qc(s)){if("selectionStart"in s)var r={start:s.selectionStart,end:s.selectionEnd};else e:{r=(r=s.ownerDocument)&&r.defaultView||window;var d=r.getSelection&&r.getSelection();if(d&&d.rangeCount!==0){r=d.anchorNode;var g=d.anchorOffset,v=d.focusNode;d=d.focusOffset;try{r.nodeType,v.nodeType}catch{r=null;break e}var S=0,I=-1,X=-1,oe=0,me=0,be=s,ue=null;t:for(;;){for(var he;be!==r||g!==0&&be.nodeType!==3||(I=S+g),be!==v||d!==0&&be.nodeType!==3||(X=S+d),be.nodeType===3&&(S+=be.nodeValue.length),(he=be.firstChild)!==null;)ue=be,be=he;for(;;){if(be===s)break t;if(ue===r&&++oe===g&&(I=S),ue===v&&++me===d&&(X=S),(he=be.nextSibling)!==null)break;be=ue,ue=be.parentNode}be=he}r=I===-1||X===-1?null:{start:I,end:X}}else r=null}r=r||{start:0,end:0}}else r=null;for(mu={focusedElem:s,selectionRange:r},Uo=!1,Pt=a;Pt!==null;)if(a=Pt,s=a.child,(a.subtreeFlags&1028)!==0&&s!==null)s.return=a,Pt=s;else for(;Pt!==null;){switch(a=Pt,v=a.alternate,s=a.flags,a.tag){case 0:if((s&4)!==0&&(s=a.updateQueue,s=s!==null?s.events:null,s!==null))for(r=0;r<s.length;r++)g=s[r],g.ref.impl=g.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&v!==null){s=void 0,r=a,g=v.memoizedProps,v=v.memoizedState,d=r.stateNode;try{var Ce=Dl(r.type,g);s=d.getSnapshotBeforeUpdate(Ce,v),d.__reactInternalSnapshotBeforeUpdate=s}catch(Re){st(r,r.return,Re)}}break;case 3:if((s&1024)!==0){if(s=a.stateNode.containerInfo,r=s.nodeType,r===9)bu(s);else if(r===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":bu(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=a.sibling,s!==null){s.return=a.return,Pt=s;break}Pt=a.return}}function f0(s,a,r){var d=r.flags;switch(r.tag){case 0:case 11:case 15:Nn(s,r),d&4&&Hi(5,r);break;case 1:if(Nn(s,r),d&4)if(s=r.stateNode,a===null)try{s.componentDidMount()}catch(S){st(r,r.return,S)}else{var g=Dl(r.type,a.memoizedProps);a=a.memoizedState;try{s.componentDidUpdate(g,a,s.__reactInternalSnapshotBeforeUpdate)}catch(S){st(r,r.return,S)}}d&64&&r0(r),d&512&&Bi(r,r.return);break;case 3:if(Nn(s,r),d&64&&(s=r.updateQueue,s!==null)){if(a=null,r.child!==null)switch(r.child.tag){case 27:case 5:a=r.child.stateNode;break;case 1:a=r.child.stateNode}try{Xf(s,a)}catch(S){st(r,r.return,S)}}break;case 27:a===null&&d&4&&u0(r);case 26:case 5:Nn(s,r),a===null&&d&4&&c0(r),d&512&&Bi(r,r.return);break;case 12:Nn(s,r);break;case 31:Nn(s,r),d&4&&p0(s,r);break;case 13:Nn(s,r),d&4&&g0(s,r),d&64&&(s=r.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(r=s1.bind(null,r),j1(s,r))));break;case 22:if(d=r.memoizedState!==null||vn,!d){a=a!==null&&a.memoizedState!==null||kt,g=vn;var v=kt;vn=d,(kt=a)&&!v?jn(s,r,(r.subtreeFlags&8772)!==0):Nn(s,r),vn=g,kt=v}break;case 30:break;default:Nn(s,r)}}function x0(s){var a=s.alternate;a!==null&&(s.alternate=null,x0(a)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(a=s.stateNode,a!==null&&wc(a)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var xt=null,es=!1;function yn(s,a,r){for(r=r.child;r!==null;)m0(s,a,r),r=r.sibling}function m0(s,a,r){if(Te&&typeof Te.onCommitFiberUnmount=="function")try{Te.onCommitFiberUnmount(ge,r)}catch{}switch(r.tag){case 26:kt||Xs(r,a),yn(s,a,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:kt||Xs(r,a);var d=xt,g=es;el(r.type)&&(xt=r.stateNode,es=!1),yn(s,a,r),Wi(r.stateNode),xt=d,es=g;break;case 5:kt||Xs(r,a);case 6:if(d=xt,g=es,xt=null,yn(s,a,r),xt=d,es=g,xt!==null)if(es)try{(xt.nodeType===9?xt.body:xt.nodeName==="HTML"?xt.ownerDocument.body:xt).removeChild(r.stateNode)}catch(v){st(r,a,v)}else try{xt.removeChild(r.stateNode)}catch(v){st(r,a,v)}break;case 18:xt!==null&&(es?(s=xt,rm(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,r.stateNode),Pa(s)):rm(xt,r.stateNode));break;case 4:d=xt,g=es,xt=r.stateNode.containerInfo,es=!0,yn(s,a,r),xt=d,es=g;break;case 0:case 11:case 14:case 15:Jn(2,r,a),kt||Jn(4,r,a),yn(s,a,r);break;case 1:kt||(Xs(r,a),d=r.stateNode,typeof d.componentWillUnmount=="function"&&o0(r,a,d)),yn(s,a,r);break;case 21:yn(s,a,r);break;case 22:kt=(d=kt)||r.memoizedState!==null,yn(s,a,r),kt=d;break;default:yn(s,a,r)}}function p0(s,a){if(a.memoizedState===null&&(s=a.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{Pa(s)}catch(r){st(a,a.return,r)}}}function g0(s,a){if(a.memoizedState===null&&(s=a.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{Pa(s)}catch(r){st(a,a.return,r)}}function Yy(s){switch(s.tag){case 31:case 13:case 19:var a=s.stateNode;return a===null&&(a=s.stateNode=new h0),a;case 22:return s=s.stateNode,a=s._retryCache,a===null&&(a=s._retryCache=new h0),a;default:throw Error(i(435,s.tag))}}function go(s,a){var r=Yy(s);a.forEach(function(d){if(!r.has(d)){r.add(d);var g=n1.bind(null,s,d);d.then(g,g)}})}function ts(s,a){var r=a.deletions;if(r!==null)for(var d=0;d<r.length;d++){var g=r[d],v=s,S=a,I=S;e:for(;I!==null;){switch(I.tag){case 27:if(el(I.type)){xt=I.stateNode,es=!1;break e}break;case 5:xt=I.stateNode,es=!1;break e;case 3:case 4:xt=I.stateNode.containerInfo,es=!0;break e}I=I.return}if(xt===null)throw Error(i(160));m0(v,S,g),xt=null,es=!1,v=g.alternate,v!==null&&(v.return=null),g.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)b0(a,s),a=a.sibling}var Us=null;function b0(s,a){var r=s.alternate,d=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:ts(a,s),ss(s),d&4&&(Jn(3,s,s.return),Hi(3,s),Jn(5,s,s.return));break;case 1:ts(a,s),ss(s),d&512&&(kt||r===null||Xs(r,r.return)),d&64&&vn&&(s=s.updateQueue,s!==null&&(d=s.callbacks,d!==null&&(r=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=r===null?d:r.concat(d))));break;case 26:var g=Us;if(ts(a,s),ss(s),d&512&&(kt||r===null||Xs(r,r.return)),d&4){var v=r!==null?r.memoizedState:null;if(d=s.memoizedState,r===null)if(d===null)if(s.stateNode===null){e:{d=s.type,r=s.memoizedProps,g=g.ownerDocument||g;t:switch(d){case"title":v=g.getElementsByTagName("title")[0],(!v||v[gi]||v[At]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=g.createElement(d),g.head.insertBefore(v,g.querySelector("head > title"))),Bt(v,d,r),v[At]=s,Ut(v),d=v;break e;case"link":var S=bm("link","href",g).get(d+(r.href||""));if(S){for(var I=0;I<S.length;I++)if(v=S[I],v.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&v.getAttribute("rel")===(r.rel==null?null:r.rel)&&v.getAttribute("title")===(r.title==null?null:r.title)&&v.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){S.splice(I,1);break t}}v=g.createElement(d),Bt(v,d,r),g.head.appendChild(v);break;case"meta":if(S=bm("meta","content",g).get(d+(r.content||""))){for(I=0;I<S.length;I++)if(v=S[I],v.getAttribute("content")===(r.content==null?null:""+r.content)&&v.getAttribute("name")===(r.name==null?null:r.name)&&v.getAttribute("property")===(r.property==null?null:r.property)&&v.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&v.getAttribute("charset")===(r.charSet==null?null:r.charSet)){S.splice(I,1);break t}}v=g.createElement(d),Bt(v,d,r),g.head.appendChild(v);break;default:throw Error(i(468,d))}v[At]=s,Ut(v),d=v}s.stateNode=d}else vm(g,s.type,s.stateNode);else s.stateNode=gm(g,d,s.memoizedProps);else v!==d?(v===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):v.count--,d===null?vm(g,s.type,s.stateNode):gm(g,d,s.memoizedProps)):d===null&&s.stateNode!==null&&Bd(s,s.memoizedProps,r.memoizedProps)}break;case 27:ts(a,s),ss(s),d&512&&(kt||r===null||Xs(r,r.return)),r!==null&&d&4&&Bd(s,s.memoizedProps,r.memoizedProps);break;case 5:if(ts(a,s),ss(s),d&512&&(kt||r===null||Xs(r,r.return)),s.flags&32){g=s.stateNode;try{ra(g,"")}catch(Ce){st(s,s.return,Ce)}}d&4&&s.stateNode!=null&&(g=s.memoizedProps,Bd(s,g,r!==null?r.memoizedProps:g)),d&1024&&(Jd=!0);break;case 6:if(ts(a,s),ss(s),d&4){if(s.stateNode===null)throw Error(i(162));d=s.memoizedProps,r=s.stateNode;try{r.nodeValue=d}catch(Ce){st(s,s.return,Ce)}}break;case 3:if(Ro=null,g=Us,Us=Mo(a.containerInfo),ts(a,s),Us=g,ss(s),d&4&&r!==null&&r.memoizedState.isDehydrated)try{Pa(a.containerInfo)}catch(Ce){st(s,s.return,Ce)}Jd&&(Jd=!1,v0(s));break;case 4:d=Us,Us=Mo(s.stateNode.containerInfo),ts(a,s),ss(s),Us=d;break;case 12:ts(a,s),ss(s);break;case 31:ts(a,s),ss(s),d&4&&(d=s.updateQueue,d!==null&&(s.updateQueue=null,go(s,d)));break;case 13:ts(a,s),ss(s),s.child.flags&8192&&s.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(vo=Qe()),d&4&&(d=s.updateQueue,d!==null&&(s.updateQueue=null,go(s,d)));break;case 22:g=s.memoizedState!==null;var X=r!==null&&r.memoizedState!==null,oe=vn,me=kt;if(vn=oe||g,kt=me||X,ts(a,s),kt=me,vn=oe,ss(s),d&8192)e:for(a=s.stateNode,a._visibility=g?a._visibility&-2:a._visibility|1,g&&(r===null||X||vn||kt||Rl(s)),r=null,a=s;;){if(a.tag===5||a.tag===26){if(r===null){X=r=a;try{if(v=X.stateNode,g)S=v.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{I=X.stateNode;var be=X.memoizedProps.style,ue=be!=null&&be.hasOwnProperty("display")?be.display:null;I.style.display=ue==null||typeof ue=="boolean"?"":(""+ue).trim()}}catch(Ce){st(X,X.return,Ce)}}}else if(a.tag===6){if(r===null){X=a;try{X.stateNode.nodeValue=g?"":X.memoizedProps}catch(Ce){st(X,X.return,Ce)}}}else if(a.tag===18){if(r===null){X=a;try{var he=X.stateNode;g?om(he,!0):om(X.stateNode,!1)}catch(Ce){st(X,X.return,Ce)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===s)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break e;for(;a.sibling===null;){if(a.return===null||a.return===s)break e;r===a&&(r=null),a=a.return}r===a&&(r=null),a.sibling.return=a.return,a=a.sibling}d&4&&(d=s.updateQueue,d!==null&&(r=d.retryQueue,r!==null&&(d.retryQueue=null,go(s,r))));break;case 19:ts(a,s),ss(s),d&4&&(d=s.updateQueue,d!==null&&(s.updateQueue=null,go(s,d)));break;case 30:break;case 21:break;default:ts(a,s),ss(s)}}function ss(s){var a=s.flags;if(a&2){try{for(var r,d=s.return;d!==null;){if(d0(d)){r=d;break}d=d.return}if(r==null)throw Error(i(160));switch(r.tag){case 27:var g=r.stateNode,v=Vd(s);po(s,v,g);break;case 5:var S=r.stateNode;r.flags&32&&(ra(S,""),r.flags&=-33);var I=Vd(s);po(s,I,S);break;case 3:case 4:var X=r.stateNode.containerInfo,oe=Vd(s);Fd(s,oe,X);break;default:throw Error(i(161))}}catch(me){st(s,s.return,me)}s.flags&=-3}a&4096&&(s.flags&=-4097)}function v0(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var a=s;v0(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),s=s.sibling}}function Nn(s,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)f0(s,a.alternate,a),a=a.sibling}function Rl(s){for(s=s.child;s!==null;){var a=s;switch(a.tag){case 0:case 11:case 14:case 15:Jn(4,a,a.return),Rl(a);break;case 1:Xs(a,a.return);var r=a.stateNode;typeof r.componentWillUnmount=="function"&&o0(a,a.return,r),Rl(a);break;case 27:Wi(a.stateNode);case 26:case 5:Xs(a,a.return),Rl(a);break;case 22:a.memoizedState===null&&Rl(a);break;case 30:Rl(a);break;default:Rl(a)}s=s.sibling}}function jn(s,a,r){for(r=r&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var d=a.alternate,g=s,v=a,S=v.flags;switch(v.tag){case 0:case 11:case 15:jn(g,v,r),Hi(4,v);break;case 1:if(jn(g,v,r),d=v,g=d.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(oe){st(d,d.return,oe)}if(d=v,g=d.updateQueue,g!==null){var I=d.stateNode;try{var X=g.shared.hiddenCallbacks;if(X!==null)for(g.shared.hiddenCallbacks=null,g=0;g<X.length;g++)Qf(X[g],I)}catch(oe){st(d,d.return,oe)}}r&&S&64&&r0(v),Bi(v,v.return);break;case 27:u0(v);case 26:case 5:jn(g,v,r),r&&d===null&&S&4&&c0(v),Bi(v,v.return);break;case 12:jn(g,v,r);break;case 31:jn(g,v,r),r&&S&4&&p0(g,v);break;case 13:jn(g,v,r),r&&S&4&&g0(g,v);break;case 22:v.memoizedState===null&&jn(g,v,r),Bi(v,v.return);break;case 30:break;default:jn(g,v,r)}a=a.sibling}}function Yd(s,a){var r=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(r=s.memoizedState.cachePool.pool),s=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(s=a.memoizedState.cachePool.pool),s!==r&&(s!=null&&s.refCount++,r!=null&&Ai(r))}function Kd(s,a){s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&Ai(s))}function Ps(s,a,r,d){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)y0(s,a,r,d),a=a.sibling}function y0(s,a,r,d){var g=a.flags;switch(a.tag){case 0:case 11:case 15:Ps(s,a,r,d),g&2048&&Hi(9,a);break;case 1:Ps(s,a,r,d);break;case 3:Ps(s,a,r,d),g&2048&&(s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&Ai(s)));break;case 12:if(g&2048){Ps(s,a,r,d),s=a.stateNode;try{var v=a.memoizedProps,S=v.id,I=v.onPostCommit;typeof I=="function"&&I(S,a.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(X){st(a,a.return,X)}}else Ps(s,a,r,d);break;case 31:Ps(s,a,r,d);break;case 13:Ps(s,a,r,d);break;case 23:break;case 22:v=a.stateNode,S=a.alternate,a.memoizedState!==null?v._visibility&2?Ps(s,a,r,d):Vi(s,a):v._visibility&2?Ps(s,a,r,d):(v._visibility|=2,ka(s,a,r,d,(a.subtreeFlags&10256)!==0||!1)),g&2048&&Yd(S,a);break;case 24:Ps(s,a,r,d),g&2048&&Kd(a.alternate,a);break;default:Ps(s,a,r,d)}}function ka(s,a,r,d,g){for(g=g&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var v=s,S=a,I=r,X=d,oe=S.flags;switch(S.tag){case 0:case 11:case 15:ka(v,S,I,X,g),Hi(8,S);break;case 23:break;case 22:var me=S.stateNode;S.memoizedState!==null?me._visibility&2?ka(v,S,I,X,g):Vi(v,S):(me._visibility|=2,ka(v,S,I,X,g)),g&&oe&2048&&Yd(S.alternate,S);break;case 24:ka(v,S,I,X,g),g&&oe&2048&&Kd(S.alternate,S);break;default:ka(v,S,I,X,g)}a=a.sibling}}function Vi(s,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var r=s,d=a,g=d.flags;switch(d.tag){case 22:Vi(r,d),g&2048&&Yd(d.alternate,d);break;case 24:Vi(r,d),g&2048&&Kd(d.alternate,d);break;default:Vi(r,d)}a=a.sibling}}var Fi=8192;function Ea(s,a,r){if(s.subtreeFlags&Fi)for(s=s.child;s!==null;)N0(s,a,r),s=s.sibling}function N0(s,a,r){switch(s.tag){case 26:Ea(s,a,r),s.flags&Fi&&s.memoizedState!==null&&I1(r,Us,s.memoizedState,s.memoizedProps);break;case 5:Ea(s,a,r);break;case 3:case 4:var d=Us;Us=Mo(s.stateNode.containerInfo),Ea(s,a,r),Us=d;break;case 22:s.memoizedState===null&&(d=s.alternate,d!==null&&d.memoizedState!==null?(d=Fi,Fi=16777216,Ea(s,a,r),Fi=d):Ea(s,a,r));break;default:Ea(s,a,r)}}function j0(s){var a=s.alternate;if(a!==null&&(s=a.child,s!==null)){a.child=null;do a=s.sibling,s.sibling=null,s=a;while(s!==null)}}function Ji(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var r=0;r<a.length;r++){var d=a[r];Pt=d,_0(d,s)}j0(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)w0(s),s=s.sibling}function w0(s){switch(s.tag){case 0:case 11:case 15:Ji(s),s.flags&2048&&Jn(9,s,s.return);break;case 3:Ji(s);break;case 12:Ji(s);break;case 22:var a=s.stateNode;s.memoizedState!==null&&a._visibility&2&&(s.return===null||s.return.tag!==13)?(a._visibility&=-3,bo(s)):Ji(s);break;default:Ji(s)}}function bo(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var r=0;r<a.length;r++){var d=a[r];Pt=d,_0(d,s)}j0(s)}for(s=s.child;s!==null;){switch(a=s,a.tag){case 0:case 11:case 15:Jn(8,a,a.return),bo(a);break;case 22:r=a.stateNode,r._visibility&2&&(r._visibility&=-3,bo(a));break;default:bo(a)}s=s.sibling}}function _0(s,a){for(;Pt!==null;){var r=Pt;switch(r.tag){case 0:case 11:case 15:Jn(8,r,a);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var d=r.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:Ai(r.memoizedState.cache)}if(d=r.child,d!==null)d.return=r,Pt=d;else e:for(r=s;Pt!==null;){d=Pt;var g=d.sibling,v=d.return;if(x0(d),d===r){Pt=null;break e}if(g!==null){g.return=v,Pt=g;break e}Pt=v}}}var Ky={getCacheForType:function(s){var a=Gt(_t),r=a.data.get(s);return r===void 0&&(r=s(),a.data.set(s,r)),r},cacheSignal:function(){return Gt(_t).controller.signal}},Qy=typeof WeakMap=="function"?WeakMap:Map,Xe=0,rt=null,qe=null,Ge=0,tt=0,fs=null,Yn=!1,Ta=!1,Qd=!1,wn=0,bt=0,Kn=0,Il=0,Xd=0,xs=0,Aa=0,Yi=null,ns=null,Zd=!1,vo=0,S0=0,yo=1/0,No=null,Qn=null,Mt=0,Xn=null,Ma=null,_n=0,Wd=0,eu=null,C0=null,Ki=0,tu=null;function ms(){return(Xe&2)!==0&&Ge!==0?Ge&-Ge:w.T!==null?ru():qt()}function k0(){if(xs===0)if((Ge&536870912)===0||Ve){var s=ln;ln<<=1,(ln&3932160)===0&&(ln=262144),xs=s}else xs=536870912;return s=us.current,s!==null&&(s.flags|=32),xs}function ls(s,a,r){(s===rt&&(tt===2||tt===9)||s.cancelPendingCommit!==null)&&(Da(s,0),Zn(s,Ge,xs,!1)),It(s,r),((Xe&2)===0||s!==rt)&&(s===rt&&((Xe&2)===0&&(Il|=r),bt===4&&Zn(s,Ge,xs,!1)),Zs(s))}function E0(s,a,r){if((Xe&6)!==0)throw Error(i(327));var d=!r&&(a&127)===0&&(a&s.expiredLanes)===0||gl(s,a),g=d?Wy(s,a):nu(s,a,!0),v=d;do{if(g===0){Ta&&!d&&Zn(s,a,0,!1);break}else{if(r=s.current.alternate,v&&!Xy(r)){g=nu(s,a,!1),v=!1;continue}if(g===2){if(v=a,s.errorRecoveryDisabledLanes&v)var S=0;else S=s.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){a=S;e:{var I=s;g=Yi;var X=I.current.memoizedState.isDehydrated;if(X&&(Da(I,S).flags|=256),S=nu(I,S,!1),S!==2){if(Qd&&!X){I.errorRecoveryDisabledLanes|=v,Il|=v,g=4;break e}v=ns,ns=g,v!==null&&(ns===null?ns=v:ns.push.apply(ns,v))}g=S}if(v=!1,g!==2)continue}}if(g===1){Da(s,0),Zn(s,a,0,!0);break}e:{switch(d=s,v=g,v){case 0:case 1:throw Error(i(345));case 4:if((a&4194048)!==a)break;case 6:Zn(d,a,xs,!Yn);break e;case 2:ns=null;break;case 3:case 5:break;default:throw Error(i(329))}if((a&62914560)===a&&(g=vo+300-Qe(),10<g)){if(Zn(d,a,xs,!Yn),pl(d,0,!0)!==0)break e;_n=a,d.timeoutHandle=am(T0.bind(null,d,r,ns,No,Zd,a,xs,Il,Aa,Yn,v,"Throttled",-0,0),g);break e}T0(d,r,ns,No,Zd,a,xs,Il,Aa,Yn,v,null,-0,0)}}break}while(!0);Zs(s)}function T0(s,a,r,d,g,v,S,I,X,oe,me,be,ue,he){if(s.timeoutHandle=-1,be=a.subtreeFlags,be&8192||(be&16785408)===16785408){be={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:cn},N0(a,v,be);var Ce=(v&62914560)===v?vo-Qe():(v&4194048)===v?S0-Qe():0;if(Ce=z1(be,Ce),Ce!==null){_n=v,s.cancelPendingCommit=Ce(U0.bind(null,s,a,v,r,d,g,S,I,X,me,be,null,ue,he)),Zn(s,v,S,!oe);return}}U0(s,a,v,r,d,g,S,I,X)}function Xy(s){for(var a=s;;){var r=a.tag;if((r===0||r===11||r===15)&&a.flags&16384&&(r=a.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var d=0;d<r.length;d++){var g=r[d],v=g.getSnapshot;g=g.value;try{if(!cs(v(),g))return!1}catch{return!1}}if(r=a.child,a.subtreeFlags&16384&&r!==null)r.return=a,a=r;else{if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Zn(s,a,r,d){a&=~Xd,a&=~Il,s.suspendedLanes|=a,s.pingedLanes&=~a,d&&(s.warmLanes|=a),d=s.expirationTimes;for(var g=a;0<g;){var v=31-We(g),S=1<<v;d[v]=-1,g&=~S}r!==0&&ye(s,r,a)}function jo(){return(Xe&6)===0?(Qi(0),!1):!0}function su(){if(qe!==null){if(tt===0)var s=qe.return;else s=qe,fn=Sl=null,bd(s),ja=null,Di=0,s=qe;for(;s!==null;)i0(s.alternate,s),s=s.return;qe=null}}function Da(s,a){var r=s.timeoutHandle;r!==-1&&(s.timeoutHandle=-1,g1(r)),r=s.cancelPendingCommit,r!==null&&(s.cancelPendingCommit=null,r()),_n=0,su(),rt=s,qe=r=un(s.current,null),Ge=a,tt=0,fs=null,Yn=!1,Ta=gl(s,a),Qd=!1,Aa=xs=Xd=Il=Kn=bt=0,ns=Yi=null,Zd=!1,(a&8)!==0&&(a|=a&32);var d=s.entangledLanes;if(d!==0)for(s=s.entanglements,d&=a;0<d;){var g=31-We(d),v=1<<g;a|=s[g],d&=~v}return wn=a,Gr(),r}function A0(s,a){Le=null,w.H=qi,a===Na||a===Qr?(a=Ff(),tt=3):a===id?(a=Ff(),tt=4):tt=a===Id?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,fs=a,qe===null&&(bt=1,uo(s,_s(a,s.current)))}function M0(){var s=us.current;return s===null?!0:(Ge&4194048)===Ge?Es===null:(Ge&62914560)===Ge||(Ge&536870912)!==0?s===Es:!1}function D0(){var s=w.H;return w.H=qi,s===null?qi:s}function R0(){var s=w.A;return w.A=Ky,s}function wo(){bt=4,Yn||(Ge&4194048)!==Ge&&us.current!==null||(Ta=!0),(Kn&134217727)===0&&(Il&134217727)===0||rt===null||Zn(rt,Ge,xs,!1)}function nu(s,a,r){var d=Xe;Xe|=2;var g=D0(),v=R0();(rt!==s||Ge!==a)&&(No=null,Da(s,a)),a=!1;var S=bt;e:do try{if(tt!==0&&qe!==null){var I=qe,X=fs;switch(tt){case 8:su(),S=6;break e;case 3:case 2:case 9:case 6:us.current===null&&(a=!0);var oe=tt;if(tt=0,fs=null,Ra(s,I,X,oe),r&&Ta){S=0;break e}break;default:oe=tt,tt=0,fs=null,Ra(s,I,X,oe)}}Zy(),S=bt;break}catch(me){A0(s,me)}while(!0);return a&&s.shellSuspendCounter++,fn=Sl=null,Xe=d,w.H=g,w.A=v,qe===null&&(rt=null,Ge=0,Gr()),S}function Zy(){for(;qe!==null;)I0(qe)}function Wy(s,a){var r=Xe;Xe|=2;var d=D0(),g=R0();rt!==s||Ge!==a?(No=null,yo=Qe()+500,Da(s,a)):Ta=gl(s,a);e:do try{if(tt!==0&&qe!==null){a=qe;var v=fs;t:switch(tt){case 1:tt=0,fs=null,Ra(s,a,v,1);break;case 2:case 9:if(Bf(v)){tt=0,fs=null,z0(a);break}a=function(){tt!==2&&tt!==9||rt!==s||(tt=7),Zs(s)},v.then(a,a);break e;case 3:tt=7;break e;case 4:tt=5;break e;case 7:Bf(v)?(tt=0,fs=null,z0(a)):(tt=0,fs=null,Ra(s,a,v,7));break;case 5:var S=null;switch(qe.tag){case 26:S=qe.memoizedState;case 5:case 27:var I=qe;if(S?ym(S):I.stateNode.complete){tt=0,fs=null;var X=I.sibling;if(X!==null)qe=X;else{var oe=I.return;oe!==null?(qe=oe,_o(oe)):qe=null}break t}}tt=0,fs=null,Ra(s,a,v,5);break;case 6:tt=0,fs=null,Ra(s,a,v,6);break;case 8:su(),bt=6;break e;default:throw Error(i(462))}}e1();break}catch(me){A0(s,me)}while(!0);return fn=Sl=null,w.H=d,w.A=g,Xe=r,qe!==null?0:(rt=null,Ge=0,Gr(),bt)}function e1(){for(;qe!==null&&!Zl();)I0(qe)}function I0(s){var a=l0(s.alternate,s,wn);s.memoizedProps=s.pendingProps,a===null?_o(s):qe=a}function z0(s){var a=s,r=a.alternate;switch(a.tag){case 15:case 0:a=Zx(r,a,a.pendingProps,a.type,void 0,Ge);break;case 11:a=Zx(r,a,a.pendingProps,a.type.render,a.ref,Ge);break;case 5:bd(a);default:i0(r,a),a=qe=Rf(a,wn),a=l0(r,a,wn)}s.memoizedProps=s.pendingProps,a===null?_o(s):qe=a}function Ra(s,a,r,d){fn=Sl=null,bd(a),ja=null,Di=0;var g=a.return;try{if(Gy(s,g,a,r,Ge)){bt=1,uo(s,_s(r,s.current)),qe=null;return}}catch(v){if(g!==null)throw qe=g,v;bt=1,uo(s,_s(r,s.current)),qe=null;return}a.flags&32768?(Ve||d===1?s=!0:Ta||(Ge&536870912)!==0?s=!1:(Yn=s=!0,(d===2||d===9||d===3||d===6)&&(d=us.current,d!==null&&d.tag===13&&(d.flags|=16384))),L0(a,s)):_o(a)}function _o(s){var a=s;do{if((a.flags&32768)!==0){L0(a,Yn);return}s=a.return;var r=Vy(a.alternate,a,wn);if(r!==null){qe=r;return}if(a=a.sibling,a!==null){qe=a;return}qe=a=s}while(a!==null);bt===0&&(bt=5)}function L0(s,a){do{var r=Fy(s.alternate,s);if(r!==null){r.flags&=32767,qe=r;return}if(r=s.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!a&&(s=s.sibling,s!==null)){qe=s;return}qe=s=r}while(s!==null);bt=6,qe=null}function U0(s,a,r,d,g,v,S,I,X){s.cancelPendingCommit=null;do So();while(Mt!==0);if((Xe&6)!==0)throw Error(i(327));if(a!==null){if(a===s.current)throw Error(i(177));if(v=a.lanes|a.childLanes,v|=Vc,jc(s,r,v,S,I,X),s===rt&&(qe=rt=null,Ge=0),Ma=a,Xn=s,_n=r,Wd=v,eu=g,C0=d,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,l1(Vs,function(){return G0(),null})):(s.callbackNode=null,s.callbackPriority=0),d=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||d){d=w.T,w.T=null,g=D.p,D.p=2,S=Xe,Xe|=4;try{Jy(s,a,r)}finally{Xe=S,D.p=g,w.T=d}}Mt=1,P0(),$0(),q0()}}function P0(){if(Mt===1){Mt=0;var s=Xn,a=Ma,r=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||r){r=w.T,w.T=null;var d=D.p;D.p=2;var g=Xe;Xe|=4;try{b0(a,s);var v=mu,S=_f(s.containerInfo),I=v.focusedElem,X=v.selectionRange;if(S!==I&&I&&I.ownerDocument&&wf(I.ownerDocument.documentElement,I)){if(X!==null&&qc(I)){var oe=X.start,me=X.end;if(me===void 0&&(me=oe),"selectionStart"in I)I.selectionStart=oe,I.selectionEnd=Math.min(me,I.value.length);else{var be=I.ownerDocument||document,ue=be&&be.defaultView||window;if(ue.getSelection){var he=ue.getSelection(),Ce=I.textContent.length,Re=Math.min(X.start,Ce),at=X.end===void 0?Re:Math.min(X.end,Ce);!he.extend&&Re>at&&(S=at,at=Re,Re=S);var te=jf(I,Re),W=jf(I,at);if(te&&W&&(he.rangeCount!==1||he.anchorNode!==te.node||he.anchorOffset!==te.offset||he.focusNode!==W.node||he.focusOffset!==W.offset)){var re=be.createRange();re.setStart(te.node,te.offset),he.removeAllRanges(),Re>at?(he.addRange(re),he.extend(W.node,W.offset)):(re.setEnd(W.node,W.offset),he.addRange(re))}}}}for(be=[],he=I;he=he.parentNode;)he.nodeType===1&&be.push({element:he,left:he.scrollLeft,top:he.scrollTop});for(typeof I.focus=="function"&&I.focus(),I=0;I<be.length;I++){var pe=be[I];pe.element.scrollLeft=pe.left,pe.element.scrollTop=pe.top}}Uo=!!xu,mu=xu=null}finally{Xe=g,D.p=d,w.T=r}}s.current=a,Mt=2}}function $0(){if(Mt===2){Mt=0;var s=Xn,a=Ma,r=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||r){r=w.T,w.T=null;var d=D.p;D.p=2;var g=Xe;Xe|=4;try{f0(s,a.alternate,a)}finally{Xe=g,D.p=d,w.T=r}}Mt=3}}function q0(){if(Mt===4||Mt===3){Mt=0,Wl();var s=Xn,a=Ma,r=_n,d=C0;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?Mt=5:(Mt=0,Ma=Xn=null,O0(s,s.pendingLanes));var g=s.pendingLanes;if(g===0&&(Qn=null),wt(r),a=a.stateNode,Te&&typeof Te.onCommitFiberRoot=="function")try{Te.onCommitFiberRoot(ge,a,void 0,(a.current.flags&128)===128)}catch{}if(d!==null){a=w.T,g=D.p,D.p=2,w.T=null;try{for(var v=s.onRecoverableError,S=0;S<d.length;S++){var I=d[S];v(I.value,{componentStack:I.stack})}}finally{w.T=a,D.p=g}}(_n&3)!==0&&So(),Zs(s),g=s.pendingLanes,(r&261930)!==0&&(g&42)!==0?s===tu?Ki++:(Ki=0,tu=s):Ki=0,Qi(0)}}function O0(s,a){(s.pooledCacheLanes&=a)===0&&(a=s.pooledCache,a!=null&&(s.pooledCache=null,Ai(a)))}function So(){return P0(),$0(),q0(),G0()}function G0(){if(Mt!==5)return!1;var s=Xn,a=Wd;Wd=0;var r=wt(_n),d=w.T,g=D.p;try{D.p=32>r?32:r,w.T=null,r=eu,eu=null;var v=Xn,S=_n;if(Mt=0,Ma=Xn=null,_n=0,(Xe&6)!==0)throw Error(i(331));var I=Xe;if(Xe|=4,w0(v.current),y0(v,v.current,S,r),Xe=I,Qi(0,!1),Te&&typeof Te.onPostCommitFiberRoot=="function")try{Te.onPostCommitFiberRoot(ge,v)}catch{}return!0}finally{D.p=g,w.T=d,O0(s,a)}}function H0(s,a,r){a=_s(r,a),a=Rd(s.stateNode,a,2),s=Bn(s,a,2),s!==null&&(It(s,2),Zs(s))}function st(s,a,r){if(s.tag===3)H0(s,s,r);else for(;a!==null;){if(a.tag===3){H0(a,s,r);break}else if(a.tag===1){var d=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Qn===null||!Qn.has(d))){s=_s(r,s),r=Bx(2),d=Bn(a,r,2),d!==null&&(Vx(r,d,a,s),It(d,2),Zs(d));break}}a=a.return}}function lu(s,a,r){var d=s.pingCache;if(d===null){d=s.pingCache=new Qy;var g=new Set;d.set(a,g)}else g=d.get(a),g===void 0&&(g=new Set,d.set(a,g));g.has(r)||(Qd=!0,g.add(r),s=t1.bind(null,s,a,r),a.then(s,s))}function t1(s,a,r){var d=s.pingCache;d!==null&&d.delete(a),s.pingedLanes|=s.suspendedLanes&r,s.warmLanes&=~r,rt===s&&(Ge&r)===r&&(bt===4||bt===3&&(Ge&62914560)===Ge&&300>Qe()-vo?(Xe&2)===0&&Da(s,0):Xd|=r,Aa===Ge&&(Aa=0)),Zs(s)}function B0(s,a){a===0&&(a=Is()),s=jl(s,a),s!==null&&(It(s,a),Zs(s))}function s1(s){var a=s.memoizedState,r=0;a!==null&&(r=a.retryLane),B0(s,r)}function n1(s,a){var r=0;switch(s.tag){case 31:case 13:var d=s.stateNode,g=s.memoizedState;g!==null&&(r=g.retryLane);break;case 19:d=s.stateNode;break;case 22:d=s.stateNode._retryCache;break;default:throw Error(i(314))}d!==null&&d.delete(a),B0(s,r)}function l1(s,a){return Rn(s,a)}var Co=null,Ia=null,au=!1,ko=!1,iu=!1,Wn=0;function Zs(s){s!==Ia&&s.next===null&&(Ia===null?Co=Ia=s:Ia=Ia.next=s),ko=!0,au||(au=!0,i1())}function Qi(s,a){if(!iu&&ko){iu=!0;do for(var r=!1,d=Co;d!==null;){if(s!==0){var g=d.pendingLanes;if(g===0)var v=0;else{var S=d.suspendedLanes,I=d.pingedLanes;v=(1<<31-We(42|s)+1)-1,v&=g&~(S&~I),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(r=!0,Y0(d,v))}else v=Ge,v=pl(d,d===rt?v:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(v&3)===0||gl(d,v)||(r=!0,Y0(d,v));d=d.next}while(r);iu=!1}}function a1(){V0()}function V0(){ko=au=!1;var s=0;Wn!==0&&p1()&&(s=Wn);for(var a=Qe(),r=null,d=Co;d!==null;){var g=d.next,v=F0(d,a);v===0?(d.next=null,r===null?Co=g:r.next=g,g===null&&(Ia=r)):(r=d,(s!==0||(v&3)!==0)&&(ko=!0)),d=g}Mt!==0&&Mt!==5||Qi(s),Wn!==0&&(Wn=0)}function F0(s,a){for(var r=s.suspendedLanes,d=s.pingedLanes,g=s.expirationTimes,v=s.pendingLanes&-62914561;0<v;){var S=31-We(v),I=1<<S,X=g[S];X===-1?((I&r)===0||(I&d)!==0)&&(g[S]=Nc(I,a)):X<=a&&(s.expiredLanes|=I),v&=~I}if(a=rt,r=Ge,r=pl(s,s===a?r:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),d=s.callbackNode,r===0||s===a&&(tt===2||tt===9)||s.cancelPendingCommit!==null)return d!==null&&d!==null&&In(d),s.callbackNode=null,s.callbackPriority=0;if((r&3)===0||gl(s,r)){if(a=r&-r,a===s.callbackPriority)return a;switch(d!==null&&In(d),wt(r)){case 2:case 8:r=ea;break;case 32:r=Vs;break;case 268435456:r=Ln;break;default:r=Vs}return d=J0.bind(null,s),r=Rn(r,d),s.callbackPriority=a,s.callbackNode=r,a}return d!==null&&d!==null&&In(d),s.callbackPriority=2,s.callbackNode=null,2}function J0(s,a){if(Mt!==0&&Mt!==5)return s.callbackNode=null,s.callbackPriority=0,null;var r=s.callbackNode;if(So()&&s.callbackNode!==r)return null;var d=Ge;return d=pl(s,s===rt?d:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),d===0?null:(E0(s,d,a),F0(s,Qe()),s.callbackNode!=null&&s.callbackNode===r?J0.bind(null,s):null)}function Y0(s,a){if(So())return null;E0(s,a,!0)}function i1(){b1(function(){(Xe&6)!==0?Rn(zn,a1):V0()})}function ru(){if(Wn===0){var s=va;s===0&&(s=Rt,Rt<<=1,(Rt&261888)===0&&(Rt=256)),Wn=s}return Wn}function K0(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Ir(""+s)}function Q0(s,a){var r=a.ownerDocument.createElement("input");return r.name=a.name,r.value=a.value,s.id&&r.setAttribute("form",s.id),a.parentNode.insertBefore(r,a),s=new FormData(s),r.parentNode.removeChild(r),s}function r1(s,a,r,d,g){if(a==="submit"&&r&&r.stateNode===g){var v=K0((g[zt]||null).action),S=d.submitter;S&&(a=(a=S[zt]||null)?K0(a.formAction):S.getAttribute("formAction"),a!==null&&(v=a,S=null));var I=new Pr("action","action",null,d,g);s.push({event:I,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(Wn!==0){var X=S?Q0(g,S):new FormData(g);kd(r,{pending:!0,data:X,method:g.method,action:v},null,X)}}else typeof v=="function"&&(I.preventDefault(),X=S?Q0(g,S):new FormData(g),kd(r,{pending:!0,data:X,method:g.method,action:v},v,X))},currentTarget:g}]})}}for(var ou=0;ou<Bc.length;ou++){var cu=Bc[ou],o1=cu.toLowerCase(),c1=cu[0].toUpperCase()+cu.slice(1);Ls(o1,"on"+c1)}Ls(kf,"onAnimationEnd"),Ls(Ef,"onAnimationIteration"),Ls(Tf,"onAnimationStart"),Ls("dblclick","onDoubleClick"),Ls("focusin","onFocus"),Ls("focusout","onBlur"),Ls(Sy,"onTransitionRun"),Ls(Cy,"onTransitionStart"),Ls(ky,"onTransitionCancel"),Ls(Af,"onTransitionEnd"),aa("onMouseEnter",["mouseout","mouseover"]),aa("onMouseLeave",["mouseout","mouseover"]),aa("onPointerEnter",["pointerout","pointerover"]),aa("onPointerLeave",["pointerout","pointerover"]),bl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),bl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),bl("onBeforeInput",["compositionend","keypress","textInput","paste"]),bl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),bl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),bl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),d1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Xi));function X0(s,a){a=(a&4)!==0;for(var r=0;r<s.length;r++){var d=s[r],g=d.event;d=d.listeners;e:{var v=void 0;if(a)for(var S=d.length-1;0<=S;S--){var I=d[S],X=I.instance,oe=I.currentTarget;if(I=I.listener,X!==v&&g.isPropagationStopped())break e;v=I,g.currentTarget=oe;try{v(g)}catch(me){Or(me)}g.currentTarget=null,v=X}else for(S=0;S<d.length;S++){if(I=d[S],X=I.instance,oe=I.currentTarget,I=I.listener,X!==v&&g.isPropagationStopped())break e;v=I,g.currentTarget=oe;try{v(g)}catch(me){Or(me)}g.currentTarget=null,v=X}}}}function Oe(s,a){var r=a[rn];r===void 0&&(r=a[rn]=new Set);var d=s+"__bubble";r.has(d)||(Z0(a,s,2,!1),r.add(d))}function du(s,a,r){var d=0;a&&(d|=4),Z0(r,s,d,a)}var Eo="_reactListening"+Math.random().toString(36).slice(2);function uu(s){if(!s[Eo]){s[Eo]=!0,Bh.forEach(function(r){r!=="selectionchange"&&(d1.has(r)||du(r,!1,s),du(r,!0,s))});var a=s.nodeType===9?s:s.ownerDocument;a===null||a[Eo]||(a[Eo]=!0,du("selectionchange",!1,a))}}function Z0(s,a,r,d){switch(km(a)){case 2:var g=P1;break;case 8:g=$1;break;default:g=Cu}r=g.bind(null,a,r,s),g=void 0,!Mc||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(g=!0),d?g!==void 0?s.addEventListener(a,r,{capture:!0,passive:g}):s.addEventListener(a,r,!0):g!==void 0?s.addEventListener(a,r,{passive:g}):s.addEventListener(a,r,!1)}function hu(s,a,r,d,g){var v=d;if((a&1)===0&&(a&2)===0&&d!==null)e:for(;;){if(d===null)return;var S=d.tag;if(S===3||S===4){var I=d.stateNode.containerInfo;if(I===g)break;if(S===4)for(S=d.return;S!==null;){var X=S.tag;if((X===3||X===4)&&S.stateNode.containerInfo===g)return;S=S.return}for(;I!==null;){if(S=sa(I),S===null)return;if(X=S.tag,X===5||X===6||X===26||X===27){d=v=S;continue e}I=I.parentNode}}d=d.return}sf(function(){var oe=v,me=Tc(r),be=[];e:{var ue=Mf.get(s);if(ue!==void 0){var he=Pr,Ce=s;switch(s){case"keypress":if(Lr(r)===0)break e;case"keydown":case"keyup":he=ny;break;case"focusin":Ce="focus",he=zc;break;case"focusout":Ce="blur",he=zc;break;case"beforeblur":case"afterblur":he=zc;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":he=af;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":he=Vv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":he=iy;break;case kf:case Ef:case Tf:he=Yv;break;case Af:he=oy;break;case"scroll":case"scrollend":he=Hv;break;case"wheel":he=dy;break;case"copy":case"cut":case"paste":he=Qv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":he=of;break;case"toggle":case"beforetoggle":he=hy}var Re=(a&4)!==0,at=!Re&&(s==="scroll"||s==="scrollend"),te=Re?ue!==null?ue+"Capture":null:ue;Re=[];for(var W=oe,re;W!==null;){var pe=W;if(re=pe.stateNode,pe=pe.tag,pe!==5&&pe!==26&&pe!==27||re===null||te===null||(pe=vi(W,te),pe!=null&&Re.push(Zi(W,pe,re))),at)break;W=W.return}0<Re.length&&(ue=new he(ue,Ce,null,r,me),be.push({event:ue,listeners:Re}))}}if((a&7)===0){e:{if(ue=s==="mouseover"||s==="pointerover",he=s==="mouseout"||s==="pointerout",ue&&r!==Ec&&(Ce=r.relatedTarget||r.fromElement)&&(sa(Ce)||Ce[Lt]))break e;if((he||ue)&&(ue=me.window===me?me:(ue=me.ownerDocument)?ue.defaultView||ue.parentWindow:window,he?(Ce=r.relatedTarget||r.toElement,he=oe,Ce=Ce?sa(Ce):null,Ce!==null&&(at=c(Ce),Re=Ce.tag,Ce!==at||Re!==5&&Re!==27&&Re!==6)&&(Ce=null)):(he=null,Ce=oe),he!==Ce)){if(Re=af,pe="onMouseLeave",te="onMouseEnter",W="mouse",(s==="pointerout"||s==="pointerover")&&(Re=of,pe="onPointerLeave",te="onPointerEnter",W="pointer"),at=he==null?ue:bi(he),re=Ce==null?ue:bi(Ce),ue=new Re(pe,W+"leave",he,r,me),ue.target=at,ue.relatedTarget=re,pe=null,sa(me)===oe&&(Re=new Re(te,W+"enter",Ce,r,me),Re.target=re,Re.relatedTarget=at,pe=Re),at=pe,he&&Ce)t:{for(Re=u1,te=he,W=Ce,re=0,pe=te;pe;pe=Re(pe))re++;pe=0;for(var Me=W;Me;Me=Re(Me))pe++;for(;0<re-pe;)te=Re(te),re--;for(;0<pe-re;)W=Re(W),pe--;for(;re--;){if(te===W||W!==null&&te===W.alternate){Re=te;break t}te=Re(te),W=Re(W)}Re=null}else Re=null;he!==null&&W0(be,ue,he,Re,!1),Ce!==null&&at!==null&&W0(be,at,Ce,Re,!0)}}e:{if(ue=oe?bi(oe):window,he=ue.nodeName&&ue.nodeName.toLowerCase(),he==="select"||he==="input"&&ue.type==="file")var Je=pf;else if(xf(ue))if(gf)Je=jy;else{Je=yy;var Ee=vy}else he=ue.nodeName,!he||he.toLowerCase()!=="input"||ue.type!=="checkbox"&&ue.type!=="radio"?oe&&kc(oe.elementType)&&(Je=pf):Je=Ny;if(Je&&(Je=Je(s,oe))){mf(be,Je,r,me);break e}Ee&&Ee(s,ue,oe),s==="focusout"&&oe&&ue.type==="number"&&oe.memoizedProps.value!=null&&Cc(ue,"number",ue.value)}switch(Ee=oe?bi(oe):window,s){case"focusin":(xf(Ee)||Ee.contentEditable==="true")&&(ua=Ee,Oc=oe,ki=null);break;case"focusout":ki=Oc=ua=null;break;case"mousedown":Gc=!0;break;case"contextmenu":case"mouseup":case"dragend":Gc=!1,Sf(be,r,me);break;case"selectionchange":if(_y)break;case"keydown":case"keyup":Sf(be,r,me)}var Ue;if(Uc)e:{switch(s){case"compositionstart":var He="onCompositionStart";break e;case"compositionend":He="onCompositionEnd";break e;case"compositionupdate":He="onCompositionUpdate";break e}He=void 0}else da?hf(s,r)&&(He="onCompositionEnd"):s==="keydown"&&r.keyCode===229&&(He="onCompositionStart");He&&(cf&&r.locale!=="ko"&&(da||He!=="onCompositionStart"?He==="onCompositionEnd"&&da&&(Ue=nf()):(Un=me,Dc="value"in Un?Un.value:Un.textContent,da=!0)),Ee=To(oe,He),0<Ee.length&&(He=new rf(He,s,null,r,me),be.push({event:He,listeners:Ee}),Ue?He.data=Ue:(Ue=ff(r),Ue!==null&&(He.data=Ue)))),(Ue=xy?my(s,r):py(s,r))&&(He=To(oe,"onBeforeInput"),0<He.length&&(Ee=new rf("onBeforeInput","beforeinput",null,r,me),be.push({event:Ee,listeners:He}),Ee.data=Ue)),r1(be,s,oe,r,me)}X0(be,a)})}function Zi(s,a,r){return{instance:s,listener:a,currentTarget:r}}function To(s,a){for(var r=a+"Capture",d=[];s!==null;){var g=s,v=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||v===null||(g=vi(s,r),g!=null&&d.unshift(Zi(s,g,v)),g=vi(s,a),g!=null&&d.push(Zi(s,g,v))),s.tag===3)return d;s=s.return}return[]}function u1(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function W0(s,a,r,d,g){for(var v=a._reactName,S=[];r!==null&&r!==d;){var I=r,X=I.alternate,oe=I.stateNode;if(I=I.tag,X!==null&&X===d)break;I!==5&&I!==26&&I!==27||oe===null||(X=oe,g?(oe=vi(r,v),oe!=null&&S.unshift(Zi(r,oe,X))):g||(oe=vi(r,v),oe!=null&&S.push(Zi(r,oe,X)))),r=r.return}S.length!==0&&s.push({event:a,listeners:S})}var h1=/\r\n?/g,f1=/\u0000|\uFFFD/g;function em(s){return(typeof s=="string"?s:""+s).replace(h1,`
`).replace(f1,"")}function tm(s,a){return a=em(a),em(s)===a}function lt(s,a,r,d,g,v){switch(r){case"children":typeof d=="string"?a==="body"||a==="textarea"&&d===""||ra(s,d):(typeof d=="number"||typeof d=="bigint")&&a!=="body"&&ra(s,""+d);break;case"className":Dr(s,"class",d);break;case"tabIndex":Dr(s,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":Dr(s,r,d);break;case"style":ef(s,d,v);break;case"data":if(a!=="object"){Dr(s,"data",d);break}case"src":case"href":if(d===""&&(a!=="a"||r!=="href")){s.removeAttribute(r);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){s.removeAttribute(r);break}d=Ir(""+d),s.setAttribute(r,d);break;case"action":case"formAction":if(typeof d=="function"){s.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(r==="formAction"?(a!=="input"&&lt(s,a,"name",g.name,g,null),lt(s,a,"formEncType",g.formEncType,g,null),lt(s,a,"formMethod",g.formMethod,g,null),lt(s,a,"formTarget",g.formTarget,g,null)):(lt(s,a,"encType",g.encType,g,null),lt(s,a,"method",g.method,g,null),lt(s,a,"target",g.target,g,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){s.removeAttribute(r);break}d=Ir(""+d),s.setAttribute(r,d);break;case"onClick":d!=null&&(s.onclick=cn);break;case"onScroll":d!=null&&Oe("scroll",s);break;case"onScrollEnd":d!=null&&Oe("scrollend",s);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(i(61));if(r=d.__html,r!=null){if(g.children!=null)throw Error(i(60));s.innerHTML=r}}break;case"multiple":s.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":s.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){s.removeAttribute("xlink:href");break}r=Ir(""+d),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?s.setAttribute(r,""+d):s.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?s.setAttribute(r,""):s.removeAttribute(r);break;case"capture":case"download":d===!0?s.setAttribute(r,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?s.setAttribute(r,d):s.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?s.setAttribute(r,d):s.removeAttribute(r);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?s.removeAttribute(r):s.setAttribute(r,d);break;case"popover":Oe("beforetoggle",s),Oe("toggle",s),Mr(s,"popover",d);break;case"xlinkActuate":on(s,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":on(s,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":on(s,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":on(s,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":on(s,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":on(s,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":on(s,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":on(s,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":on(s,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":Mr(s,"is",d);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=Ov.get(r)||r,Mr(s,r,d))}}function fu(s,a,r,d,g,v){switch(r){case"style":ef(s,d,v);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(i(61));if(r=d.__html,r!=null){if(g.children!=null)throw Error(i(60));s.innerHTML=r}}break;case"children":typeof d=="string"?ra(s,d):(typeof d=="number"||typeof d=="bigint")&&ra(s,""+d);break;case"onScroll":d!=null&&Oe("scroll",s);break;case"onScrollEnd":d!=null&&Oe("scrollend",s);break;case"onClick":d!=null&&(s.onclick=cn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Vh.hasOwnProperty(r))e:{if(r[0]==="o"&&r[1]==="n"&&(g=r.endsWith("Capture"),a=r.slice(2,g?r.length-7:void 0),v=s[zt]||null,v=v!=null?v[r]:null,typeof v=="function"&&s.removeEventListener(a,v,g),typeof d=="function")){typeof v!="function"&&v!==null&&(r in s?s[r]=null:s.hasAttribute(r)&&s.removeAttribute(r)),s.addEventListener(a,d,g);break e}r in s?s[r]=d:d===!0?s.setAttribute(r,""):Mr(s,r,d)}}}function Bt(s,a,r){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Oe("error",s),Oe("load",s);var d=!1,g=!1,v;for(v in r)if(r.hasOwnProperty(v)){var S=r[v];if(S!=null)switch(v){case"src":d=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:lt(s,a,v,S,r,null)}}g&&lt(s,a,"srcSet",r.srcSet,r,null),d&&lt(s,a,"src",r.src,r,null);return;case"input":Oe("invalid",s);var I=v=S=g=null,X=null,oe=null;for(d in r)if(r.hasOwnProperty(d)){var me=r[d];if(me!=null)switch(d){case"name":g=me;break;case"type":S=me;break;case"checked":X=me;break;case"defaultChecked":oe=me;break;case"value":v=me;break;case"defaultValue":I=me;break;case"children":case"dangerouslySetInnerHTML":if(me!=null)throw Error(i(137,a));break;default:lt(s,a,d,me,r,null)}}Qh(s,v,I,X,oe,S,g,!1);return;case"select":Oe("invalid",s),d=S=v=null;for(g in r)if(r.hasOwnProperty(g)&&(I=r[g],I!=null))switch(g){case"value":v=I;break;case"defaultValue":S=I;break;case"multiple":d=I;default:lt(s,a,g,I,r,null)}a=v,r=S,s.multiple=!!d,a!=null?ia(s,!!d,a,!1):r!=null&&ia(s,!!d,r,!0);return;case"textarea":Oe("invalid",s),v=g=d=null;for(S in r)if(r.hasOwnProperty(S)&&(I=r[S],I!=null))switch(S){case"value":d=I;break;case"defaultValue":g=I;break;case"children":v=I;break;case"dangerouslySetInnerHTML":if(I!=null)throw Error(i(91));break;default:lt(s,a,S,I,r,null)}Zh(s,d,g,v);return;case"option":for(X in r)if(r.hasOwnProperty(X)&&(d=r[X],d!=null))switch(X){case"selected":s.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:lt(s,a,X,d,r,null)}return;case"dialog":Oe("beforetoggle",s),Oe("toggle",s),Oe("cancel",s),Oe("close",s);break;case"iframe":case"object":Oe("load",s);break;case"video":case"audio":for(d=0;d<Xi.length;d++)Oe(Xi[d],s);break;case"image":Oe("error",s),Oe("load",s);break;case"details":Oe("toggle",s);break;case"embed":case"source":case"link":Oe("error",s),Oe("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(oe in r)if(r.hasOwnProperty(oe)&&(d=r[oe],d!=null))switch(oe){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:lt(s,a,oe,d,r,null)}return;default:if(kc(a)){for(me in r)r.hasOwnProperty(me)&&(d=r[me],d!==void 0&&fu(s,a,me,d,r,void 0));return}}for(I in r)r.hasOwnProperty(I)&&(d=r[I],d!=null&&lt(s,a,I,d,r,null))}function x1(s,a,r,d){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,v=null,S=null,I=null,X=null,oe=null,me=null;for(he in r){var be=r[he];if(r.hasOwnProperty(he)&&be!=null)switch(he){case"checked":break;case"value":break;case"defaultValue":X=be;default:d.hasOwnProperty(he)||lt(s,a,he,null,d,be)}}for(var ue in d){var he=d[ue];if(be=r[ue],d.hasOwnProperty(ue)&&(he!=null||be!=null))switch(ue){case"type":v=he;break;case"name":g=he;break;case"checked":oe=he;break;case"defaultChecked":me=he;break;case"value":S=he;break;case"defaultValue":I=he;break;case"children":case"dangerouslySetInnerHTML":if(he!=null)throw Error(i(137,a));break;default:he!==be&&lt(s,a,ue,he,d,be)}}Sc(s,S,I,X,oe,me,v,g);return;case"select":he=S=I=ue=null;for(v in r)if(X=r[v],r.hasOwnProperty(v)&&X!=null)switch(v){case"value":break;case"multiple":he=X;default:d.hasOwnProperty(v)||lt(s,a,v,null,d,X)}for(g in d)if(v=d[g],X=r[g],d.hasOwnProperty(g)&&(v!=null||X!=null))switch(g){case"value":ue=v;break;case"defaultValue":I=v;break;case"multiple":S=v;default:v!==X&&lt(s,a,g,v,d,X)}a=I,r=S,d=he,ue!=null?ia(s,!!r,ue,!1):!!d!=!!r&&(a!=null?ia(s,!!r,a,!0):ia(s,!!r,r?[]:"",!1));return;case"textarea":he=ue=null;for(I in r)if(g=r[I],r.hasOwnProperty(I)&&g!=null&&!d.hasOwnProperty(I))switch(I){case"value":break;case"children":break;default:lt(s,a,I,null,d,g)}for(S in d)if(g=d[S],v=r[S],d.hasOwnProperty(S)&&(g!=null||v!=null))switch(S){case"value":ue=g;break;case"defaultValue":he=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(i(91));break;default:g!==v&&lt(s,a,S,g,d,v)}Xh(s,ue,he);return;case"option":for(var Ce in r)if(ue=r[Ce],r.hasOwnProperty(Ce)&&ue!=null&&!d.hasOwnProperty(Ce))switch(Ce){case"selected":s.selected=!1;break;default:lt(s,a,Ce,null,d,ue)}for(X in d)if(ue=d[X],he=r[X],d.hasOwnProperty(X)&&ue!==he&&(ue!=null||he!=null))switch(X){case"selected":s.selected=ue&&typeof ue!="function"&&typeof ue!="symbol";break;default:lt(s,a,X,ue,d,he)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Re in r)ue=r[Re],r.hasOwnProperty(Re)&&ue!=null&&!d.hasOwnProperty(Re)&&lt(s,a,Re,null,d,ue);for(oe in d)if(ue=d[oe],he=r[oe],d.hasOwnProperty(oe)&&ue!==he&&(ue!=null||he!=null))switch(oe){case"children":case"dangerouslySetInnerHTML":if(ue!=null)throw Error(i(137,a));break;default:lt(s,a,oe,ue,d,he)}return;default:if(kc(a)){for(var at in r)ue=r[at],r.hasOwnProperty(at)&&ue!==void 0&&!d.hasOwnProperty(at)&&fu(s,a,at,void 0,d,ue);for(me in d)ue=d[me],he=r[me],!d.hasOwnProperty(me)||ue===he||ue===void 0&&he===void 0||fu(s,a,me,ue,d,he);return}}for(var te in r)ue=r[te],r.hasOwnProperty(te)&&ue!=null&&!d.hasOwnProperty(te)&&lt(s,a,te,null,d,ue);for(be in d)ue=d[be],he=r[be],!d.hasOwnProperty(be)||ue===he||ue==null&&he==null||lt(s,a,be,ue,d,he)}function sm(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function m1(){if(typeof performance.getEntriesByType=="function"){for(var s=0,a=0,r=performance.getEntriesByType("resource"),d=0;d<r.length;d++){var g=r[d],v=g.transferSize,S=g.initiatorType,I=g.duration;if(v&&I&&sm(S)){for(S=0,I=g.responseEnd,d+=1;d<r.length;d++){var X=r[d],oe=X.startTime;if(oe>I)break;var me=X.transferSize,be=X.initiatorType;me&&sm(be)&&(X=X.responseEnd,S+=me*(X<I?1:(I-oe)/(X-oe)))}if(--d,a+=8*(v+S)/(g.duration/1e3),s++,10<s)break}}if(0<s)return a/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var xu=null,mu=null;function Ao(s){return s.nodeType===9?s:s.ownerDocument}function nm(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function lm(s,a){if(s===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&a==="foreignObject"?0:s}function pu(s,a){return s==="textarea"||s==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var gu=null;function p1(){var s=window.event;return s&&s.type==="popstate"?s===gu?!1:(gu=s,!0):(gu=null,!1)}var am=typeof setTimeout=="function"?setTimeout:void 0,g1=typeof clearTimeout=="function"?clearTimeout:void 0,im=typeof Promise=="function"?Promise:void 0,b1=typeof queueMicrotask=="function"?queueMicrotask:typeof im<"u"?function(s){return im.resolve(null).then(s).catch(v1)}:am;function v1(s){setTimeout(function(){throw s})}function el(s){return s==="head"}function rm(s,a){var r=a,d=0;do{var g=r.nextSibling;if(s.removeChild(r),g&&g.nodeType===8)if(r=g.data,r==="/$"||r==="/&"){if(d===0){s.removeChild(g),Pa(a);return}d--}else if(r==="$"||r==="$?"||r==="$~"||r==="$!"||r==="&")d++;else if(r==="html")Wi(s.ownerDocument.documentElement);else if(r==="head"){r=s.ownerDocument.head,Wi(r);for(var v=r.firstChild;v;){var S=v.nextSibling,I=v.nodeName;v[gi]||I==="SCRIPT"||I==="STYLE"||I==="LINK"&&v.rel.toLowerCase()==="stylesheet"||r.removeChild(v),v=S}}else r==="body"&&Wi(s.ownerDocument.body);r=g}while(r);Pa(a)}function om(s,a){var r=s;s=0;do{var d=r.nextSibling;if(r.nodeType===1?a?(r._stashedDisplay=r.style.display,r.style.display="none"):(r.style.display=r._stashedDisplay||"",r.getAttribute("style")===""&&r.removeAttribute("style")):r.nodeType===3&&(a?(r._stashedText=r.nodeValue,r.nodeValue=""):r.nodeValue=r._stashedText||""),d&&d.nodeType===8)if(r=d.data,r==="/$"){if(s===0)break;s--}else r!=="$"&&r!=="$?"&&r!=="$~"&&r!=="$!"||s++;r=d}while(r)}function bu(s){var a=s.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var r=a;switch(a=a.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":bu(r),wc(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}s.removeChild(r)}}function y1(s,a,r,d){for(;s.nodeType===1;){var g=r;if(s.nodeName.toLowerCase()!==a.toLowerCase()){if(!d&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(d){if(!s[gi])switch(a){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(v=s.getAttribute("rel"),v==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(v!==g.rel||s.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||s.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||s.getAttribute("title")!==(g.title==null?null:g.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(v=s.getAttribute("src"),(v!==(g.src==null?null:g.src)||s.getAttribute("type")!==(g.type==null?null:g.type)||s.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&v&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(a==="input"&&s.type==="hidden"){var v=g.name==null?null:""+g.name;if(g.type==="hidden"&&s.getAttribute("name")===v)return s}else return s;if(s=Ts(s.nextSibling),s===null)break}return null}function N1(s,a,r){if(a==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!r||(s=Ts(s.nextSibling),s===null))return null;return s}function cm(s,a){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!a||(s=Ts(s.nextSibling),s===null))return null;return s}function vu(s){return s.data==="$?"||s.data==="$~"}function yu(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function j1(s,a){var r=s.ownerDocument;if(s.data==="$~")s._reactRetry=a;else if(s.data!=="$?"||r.readyState!=="loading")a();else{var d=function(){a(),r.removeEventListener("DOMContentLoaded",d)};r.addEventListener("DOMContentLoaded",d),s._reactRetry=d}}function Ts(s){for(;s!=null;s=s.nextSibling){var a=s.nodeType;if(a===1||a===3)break;if(a===8){if(a=s.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return s}var Nu=null;function dm(s){s=s.nextSibling;for(var a=0;s;){if(s.nodeType===8){var r=s.data;if(r==="/$"||r==="/&"){if(a===0)return Ts(s.nextSibling);a--}else r!=="$"&&r!=="$!"&&r!=="$?"&&r!=="$~"&&r!=="&"||a++}s=s.nextSibling}return null}function um(s){s=s.previousSibling;for(var a=0;s;){if(s.nodeType===8){var r=s.data;if(r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"){if(a===0)return s;a--}else r!=="/$"&&r!=="/&"||a++}s=s.previousSibling}return null}function hm(s,a,r){switch(a=Ao(r),s){case"html":if(s=a.documentElement,!s)throw Error(i(452));return s;case"head":if(s=a.head,!s)throw Error(i(453));return s;case"body":if(s=a.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function Wi(s){for(var a=s.attributes;a.length;)s.removeAttributeNode(a[0]);wc(s)}var As=new Map,fm=new Set;function Mo(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var Sn=D.d;D.d={f:w1,r:_1,D:S1,C:C1,L:k1,m:E1,X:A1,S:T1,M:M1};function w1(){var s=Sn.f(),a=jo();return s||a}function _1(s){var a=na(s);a!==null&&a.tag===5&&a.type==="form"?Ax(a):Sn.r(s)}var za=typeof document>"u"?null:document;function xm(s,a,r){var d=za;if(d&&typeof a=="string"&&a){var g=js(a);g='link[rel="'+s+'"][href="'+g+'"]',typeof r=="string"&&(g+='[crossorigin="'+r+'"]'),fm.has(g)||(fm.add(g),s={rel:s,crossOrigin:r,href:a},d.querySelector(g)===null&&(a=d.createElement("link"),Bt(a,"link",s),Ut(a),d.head.appendChild(a)))}}function S1(s){Sn.D(s),xm("dns-prefetch",s,null)}function C1(s,a){Sn.C(s,a),xm("preconnect",s,a)}function k1(s,a,r){Sn.L(s,a,r);var d=za;if(d&&s&&a){var g='link[rel="preload"][as="'+js(a)+'"]';a==="image"&&r&&r.imageSrcSet?(g+='[imagesrcset="'+js(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(g+='[imagesizes="'+js(r.imageSizes)+'"]')):g+='[href="'+js(s)+'"]';var v=g;switch(a){case"style":v=La(s);break;case"script":v=Ua(s)}As.has(v)||(s=y({rel:"preload",href:a==="image"&&r&&r.imageSrcSet?void 0:s,as:a},r),As.set(v,s),d.querySelector(g)!==null||a==="style"&&d.querySelector(er(v))||a==="script"&&d.querySelector(tr(v))||(a=d.createElement("link"),Bt(a,"link",s),Ut(a),d.head.appendChild(a)))}}function E1(s,a){Sn.m(s,a);var r=za;if(r&&s){var d=a&&typeof a.as=="string"?a.as:"script",g='link[rel="modulepreload"][as="'+js(d)+'"][href="'+js(s)+'"]',v=g;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=Ua(s)}if(!As.has(v)&&(s=y({rel:"modulepreload",href:s},a),As.set(v,s),r.querySelector(g)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(tr(v)))return}d=r.createElement("link"),Bt(d,"link",s),Ut(d),r.head.appendChild(d)}}}function T1(s,a,r){Sn.S(s,a,r);var d=za;if(d&&s){var g=la(d).hoistableStyles,v=La(s);a=a||"default";var S=g.get(v);if(!S){var I={loading:0,preload:null};if(S=d.querySelector(er(v)))I.loading=5;else{s=y({rel:"stylesheet",href:s,"data-precedence":a},r),(r=As.get(v))&&ju(s,r);var X=S=d.createElement("link");Ut(X),Bt(X,"link",s),X._p=new Promise(function(oe,me){X.onload=oe,X.onerror=me}),X.addEventListener("load",function(){I.loading|=1}),X.addEventListener("error",function(){I.loading|=2}),I.loading|=4,Do(S,a,d)}S={type:"stylesheet",instance:S,count:1,state:I},g.set(v,S)}}}function A1(s,a){Sn.X(s,a);var r=za;if(r&&s){var d=la(r).hoistableScripts,g=Ua(s),v=d.get(g);v||(v=r.querySelector(tr(g)),v||(s=y({src:s,async:!0},a),(a=As.get(g))&&wu(s,a),v=r.createElement("script"),Ut(v),Bt(v,"link",s),r.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},d.set(g,v))}}function M1(s,a){Sn.M(s,a);var r=za;if(r&&s){var d=la(r).hoistableScripts,g=Ua(s),v=d.get(g);v||(v=r.querySelector(tr(g)),v||(s=y({src:s,async:!0,type:"module"},a),(a=As.get(g))&&wu(s,a),v=r.createElement("script"),Ut(v),Bt(v,"link",s),r.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},d.set(g,v))}}function mm(s,a,r,d){var g=(g=H.current)?Mo(g):null;if(!g)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(a=La(r.href),r=la(g).hoistableStyles,d=r.get(a),d||(d={type:"style",instance:null,count:0,state:null},r.set(a,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){s=La(r.href);var v=la(g).hoistableStyles,S=v.get(s);if(S||(g=g.ownerDocument||g,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(s,S),(v=g.querySelector(er(s)))&&!v._p&&(S.instance=v,S.state.loading=5),As.has(s)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},As.set(s,r),v||D1(g,s,r,S.state))),a&&d===null)throw Error(i(528,""));return S}if(a&&d!==null)throw Error(i(529,""));return null;case"script":return a=r.async,r=r.src,typeof r=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Ua(r),r=la(g).hoistableScripts,d=r.get(a),d||(d={type:"script",instance:null,count:0,state:null},r.set(a,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function La(s){return'href="'+js(s)+'"'}function er(s){return'link[rel="stylesheet"]['+s+"]"}function pm(s){return y({},s,{"data-precedence":s.precedence,precedence:null})}function D1(s,a,r,d){s.querySelector('link[rel="preload"][as="style"]['+a+"]")?d.loading=1:(a=s.createElement("link"),d.preload=a,a.addEventListener("load",function(){return d.loading|=1}),a.addEventListener("error",function(){return d.loading|=2}),Bt(a,"link",r),Ut(a),s.head.appendChild(a))}function Ua(s){return'[src="'+js(s)+'"]'}function tr(s){return"script[async]"+s}function gm(s,a,r){if(a.count++,a.instance===null)switch(a.type){case"style":var d=s.querySelector('style[data-href~="'+js(r.href)+'"]');if(d)return a.instance=d,Ut(d),d;var g=y({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return d=(s.ownerDocument||s).createElement("style"),Ut(d),Bt(d,"style",g),Do(d,r.precedence,s),a.instance=d;case"stylesheet":g=La(r.href);var v=s.querySelector(er(g));if(v)return a.state.loading|=4,a.instance=v,Ut(v),v;d=pm(r),(g=As.get(g))&&ju(d,g),v=(s.ownerDocument||s).createElement("link"),Ut(v);var S=v;return S._p=new Promise(function(I,X){S.onload=I,S.onerror=X}),Bt(v,"link",d),a.state.loading|=4,Do(v,r.precedence,s),a.instance=v;case"script":return v=Ua(r.src),(g=s.querySelector(tr(v)))?(a.instance=g,Ut(g),g):(d=r,(g=As.get(v))&&(d=y({},r),wu(d,g)),s=s.ownerDocument||s,g=s.createElement("script"),Ut(g),Bt(g,"link",d),s.head.appendChild(g),a.instance=g);case"void":return null;default:throw Error(i(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(d=a.instance,a.state.loading|=4,Do(d,r.precedence,s));return a.instance}function Do(s,a,r){for(var d=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=d.length?d[d.length-1]:null,v=g,S=0;S<d.length;S++){var I=d[S];if(I.dataset.precedence===a)v=I;else if(v!==g)break}v?v.parentNode.insertBefore(s,v.nextSibling):(a=r.nodeType===9?r.head:r,a.insertBefore(s,a.firstChild))}function ju(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.title==null&&(s.title=a.title)}function wu(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.integrity==null&&(s.integrity=a.integrity)}var Ro=null;function bm(s,a,r){if(Ro===null){var d=new Map,g=Ro=new Map;g.set(r,d)}else g=Ro,d=g.get(r),d||(d=new Map,g.set(r,d));if(d.has(s))return d;for(d.set(s,null),r=r.getElementsByTagName(s),g=0;g<r.length;g++){var v=r[g];if(!(v[gi]||v[At]||s==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var S=v.getAttribute(a)||"";S=s+S;var I=d.get(S);I?I.push(v):d.set(S,[v])}}return d}function vm(s,a,r){s=s.ownerDocument||s,s.head.insertBefore(r,a==="title"?s.querySelector("head > title"):null)}function R1(s,a,r){if(r===1||a.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return s=a.disabled,typeof a.precedence=="string"&&s==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function ym(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function I1(s,a,r,d){if(r.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var g=La(d.href),v=a.querySelector(er(g));if(v){a=v._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(s.count++,s=Io.bind(s),a.then(s,s)),r.state.loading|=4,r.instance=v,Ut(v);return}v=a.ownerDocument||a,d=pm(d),(g=As.get(g))&&ju(d,g),v=v.createElement("link"),Ut(v);var S=v;S._p=new Promise(function(I,X){S.onload=I,S.onerror=X}),Bt(v,"link",d),r.instance=v}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(r,a),(a=r.state.preload)&&(r.state.loading&3)===0&&(s.count++,r=Io.bind(s),a.addEventListener("load",r),a.addEventListener("error",r))}}var _u=0;function z1(s,a){return s.stylesheets&&s.count===0&&Lo(s,s.stylesheets),0<s.count||0<s.imgCount?function(r){var d=setTimeout(function(){if(s.stylesheets&&Lo(s,s.stylesheets),s.unsuspend){var v=s.unsuspend;s.unsuspend=null,v()}},6e4+a);0<s.imgBytes&&_u===0&&(_u=62500*m1());var g=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&Lo(s,s.stylesheets),s.unsuspend)){var v=s.unsuspend;s.unsuspend=null,v()}},(s.imgBytes>_u?50:800)+a);return s.unsuspend=r,function(){s.unsuspend=null,clearTimeout(d),clearTimeout(g)}}:null}function Io(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Lo(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var zo=null;function Lo(s,a){s.stylesheets=null,s.unsuspend!==null&&(s.count++,zo=new Map,a.forEach(L1,s),zo=null,Io.call(s))}function L1(s,a){if(!(a.state.loading&4)){var r=zo.get(s);if(r)var d=r.get(null);else{r=new Map,zo.set(s,r);for(var g=s.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<g.length;v++){var S=g[v];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(r.set(S.dataset.precedence,S),d=S)}d&&r.set(null,d)}g=a.instance,S=g.getAttribute("data-precedence"),v=r.get(S)||d,v===d&&r.set(null,g),r.set(S,g),this.count++,d=Io.bind(this),g.addEventListener("load",d),g.addEventListener("error",d),v?v.parentNode.insertBefore(g,v.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(g,s.firstChild)),a.state.loading|=4}}var sr={$$typeof:z,Provider:null,Consumer:null,_currentValue:V,_currentValue2:V,_threadCount:0};function U1(s,a,r,d,g,v,S,I,X){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=zs(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zs(0),this.hiddenUpdates=zs(null),this.identifierPrefix=d,this.onUncaughtError=g,this.onCaughtError=v,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=X,this.incompleteTransitions=new Map}function Nm(s,a,r,d,g,v,S,I,X,oe,me,be){return s=new U1(s,a,r,S,X,oe,me,be,I),a=1,v===!0&&(a|=24),v=ds(3,null,null,a),s.current=v,v.stateNode=s,a=nd(),a.refCount++,s.pooledCache=a,a.refCount++,v.memoizedState={element:d,isDehydrated:r,cache:a},rd(v),s}function jm(s){return s?(s=xa,s):xa}function wm(s,a,r,d,g,v){g=jm(g),d.context===null?d.context=g:d.pendingContext=g,d=Hn(a),d.payload={element:r},v=v===void 0?null:v,v!==null&&(d.callback=v),r=Bn(s,d,a),r!==null&&(ls(r,s,a),Ii(r,s,a))}function _m(s,a){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var r=s.retryLane;s.retryLane=r!==0&&r<a?r:a}}function Su(s,a){_m(s,a),(s=s.alternate)&&_m(s,a)}function Sm(s){if(s.tag===13||s.tag===31){var a=jl(s,67108864);a!==null&&ls(a,s,67108864),Su(s,67108864)}}function Cm(s){if(s.tag===13||s.tag===31){var a=ms();a=et(a);var r=jl(s,a);r!==null&&ls(r,s,a),Su(s,a)}}var Uo=!0;function P1(s,a,r,d){var g=w.T;w.T=null;var v=D.p;try{D.p=2,Cu(s,a,r,d)}finally{D.p=v,w.T=g}}function $1(s,a,r,d){var g=w.T;w.T=null;var v=D.p;try{D.p=8,Cu(s,a,r,d)}finally{D.p=v,w.T=g}}function Cu(s,a,r,d){if(Uo){var g=ku(d);if(g===null)hu(s,a,d,Po,r),Em(s,d);else if(O1(g,s,a,r,d))d.stopPropagation();else if(Em(s,d),a&4&&-1<q1.indexOf(s)){for(;g!==null;){var v=na(g);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var S=Js(v.pendingLanes);if(S!==0){var I=v;for(I.pendingLanes|=2,I.entangledLanes|=2;S;){var X=1<<31-We(S);I.entanglements[1]|=X,S&=~X}Zs(v),(Xe&6)===0&&(yo=Qe()+500,Qi(0))}}break;case 31:case 13:I=jl(v,2),I!==null&&ls(I,v,2),jo(),Su(v,2)}if(v=ku(d),v===null&&hu(s,a,d,Po,r),v===g)break;g=v}g!==null&&d.stopPropagation()}else hu(s,a,d,null,r)}}function ku(s){return s=Tc(s),Eu(s)}var Po=null;function Eu(s){if(Po=null,s=sa(s),s!==null){var a=c(s);if(a===null)s=null;else{var r=a.tag;if(r===13){if(s=u(a),s!==null)return s;s=null}else if(r===31){if(s=f(a),s!==null)return s;s=null}else if(r===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;s=null}else a!==s&&(s=null)}}return Po=s,null}function km(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ml()){case zn:return 2;case ea:return 8;case Vs:case sn:return 32;case Ln:return 268435456;default:return 32}default:return 32}}var Tu=!1,tl=null,sl=null,nl=null,nr=new Map,lr=new Map,ll=[],q1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Em(s,a){switch(s){case"focusin":case"focusout":tl=null;break;case"dragenter":case"dragleave":sl=null;break;case"mouseover":case"mouseout":nl=null;break;case"pointerover":case"pointerout":nr.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":lr.delete(a.pointerId)}}function ar(s,a,r,d,g,v){return s===null||s.nativeEvent!==v?(s={blockedOn:a,domEventName:r,eventSystemFlags:d,nativeEvent:v,targetContainers:[g]},a!==null&&(a=na(a),a!==null&&Sm(a)),s):(s.eventSystemFlags|=d,a=s.targetContainers,g!==null&&a.indexOf(g)===-1&&a.push(g),s)}function O1(s,a,r,d,g){switch(a){case"focusin":return tl=ar(tl,s,a,r,d,g),!0;case"dragenter":return sl=ar(sl,s,a,r,d,g),!0;case"mouseover":return nl=ar(nl,s,a,r,d,g),!0;case"pointerover":var v=g.pointerId;return nr.set(v,ar(nr.get(v)||null,s,a,r,d,g)),!0;case"gotpointercapture":return v=g.pointerId,lr.set(v,ar(lr.get(v)||null,s,a,r,d,g)),!0}return!1}function Tm(s){var a=sa(s.target);if(a!==null){var r=c(a);if(r!==null){if(a=r.tag,a===13){if(a=u(r),a!==null){s.blockedOn=a,Ys(s.priority,function(){Cm(r)});return}}else if(a===31){if(a=f(r),a!==null){s.blockedOn=a,Ys(s.priority,function(){Cm(r)});return}}else if(a===3&&r.stateNode.current.memoizedState.isDehydrated){s.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}s.blockedOn=null}function $o(s){if(s.blockedOn!==null)return!1;for(var a=s.targetContainers;0<a.length;){var r=ku(s.nativeEvent);if(r===null){r=s.nativeEvent;var d=new r.constructor(r.type,r);Ec=d,r.target.dispatchEvent(d),Ec=null}else return a=na(r),a!==null&&Sm(a),s.blockedOn=r,!1;a.shift()}return!0}function Am(s,a,r){$o(s)&&r.delete(a)}function G1(){Tu=!1,tl!==null&&$o(tl)&&(tl=null),sl!==null&&$o(sl)&&(sl=null),nl!==null&&$o(nl)&&(nl=null),nr.forEach(Am),lr.forEach(Am)}function qo(s,a){s.blockedOn===a&&(s.blockedOn=null,Tu||(Tu=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,G1)))}var Oo=null;function Mm(s){Oo!==s&&(Oo=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Oo===s&&(Oo=null);for(var a=0;a<s.length;a+=3){var r=s[a],d=s[a+1],g=s[a+2];if(typeof d!="function"){if(Eu(d||r)===null)continue;break}var v=na(r);v!==null&&(s.splice(a,3),a-=3,kd(v,{pending:!0,data:g,method:r.method,action:d},d,g))}}))}function Pa(s){function a(X){return qo(X,s)}tl!==null&&qo(tl,s),sl!==null&&qo(sl,s),nl!==null&&qo(nl,s),nr.forEach(a),lr.forEach(a);for(var r=0;r<ll.length;r++){var d=ll[r];d.blockedOn===s&&(d.blockedOn=null)}for(;0<ll.length&&(r=ll[0],r.blockedOn===null);)Tm(r),r.blockedOn===null&&ll.shift();if(r=(s.ownerDocument||s).$$reactFormReplay,r!=null)for(d=0;d<r.length;d+=3){var g=r[d],v=r[d+1],S=g[zt]||null;if(typeof v=="function")S||Mm(r);else if(S){var I=null;if(v&&v.hasAttribute("formAction")){if(g=v,S=v[zt]||null)I=S.formAction;else if(Eu(g)!==null)continue}else I=S.action;typeof I=="function"?r[d+1]=I:(r.splice(d,3),d-=3),Mm(r)}}}function Dm(){function s(v){v.canIntercept&&v.info==="react-transition"&&v.intercept({handler:function(){return new Promise(function(S){return g=S})},focusReset:"manual",scroll:"manual"})}function a(){g!==null&&(g(),g=null),d||setTimeout(r,20)}function r(){if(!d&&!navigation.transition){var v=navigation.currentEntry;v&&v.url!=null&&navigation.navigate(v.url,{state:v.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var d=!1,g=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(r,100),function(){d=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),g!==null&&(g(),g=null)}}}function Au(s){this._internalRoot=s}Go.prototype.render=Au.prototype.render=function(s){var a=this._internalRoot;if(a===null)throw Error(i(409));var r=a.current,d=ms();wm(r,d,s,a,null,null)},Go.prototype.unmount=Au.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var a=s.containerInfo;wm(s.current,2,null,s,null,null),jo(),a[Lt]=null}};function Go(s){this._internalRoot=s}Go.prototype.unstable_scheduleHydration=function(s){if(s){var a=qt();s={blockedOn:null,target:s,priority:a};for(var r=0;r<ll.length&&a!==0&&a<ll[r].priority;r++);ll.splice(r,0,s),r===0&&Tm(s)}};var Rm=t.version;if(Rm!=="19.2.0")throw Error(i(527,Rm,"19.2.0"));D.findDOMNode=function(s){var a=s._reactInternals;if(a===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=m(a),s=s!==null?b(s):null,s=s===null?null:s.stateNode,s};var H1={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:w,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ho=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ho.isDisabled&&Ho.supportsFiber)try{ge=Ho.inject(H1),Te=Ho}catch{}}return rr.createRoot=function(s,a){if(!o(s))throw Error(i(299));var r=!1,d="",g=qx,v=Ox,S=Gx;return a!=null&&(a.unstable_strictMode===!0&&(r=!0),a.identifierPrefix!==void 0&&(d=a.identifierPrefix),a.onUncaughtError!==void 0&&(g=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(S=a.onRecoverableError)),a=Nm(s,1,!1,null,null,r,d,null,g,v,S,Dm),s[Lt]=a.current,uu(s),new Au(a)},rr.hydrateRoot=function(s,a,r){if(!o(s))throw Error(i(299));var d=!1,g="",v=qx,S=Ox,I=Gx,X=null;return r!=null&&(r.unstable_strictMode===!0&&(d=!0),r.identifierPrefix!==void 0&&(g=r.identifierPrefix),r.onUncaughtError!==void 0&&(v=r.onUncaughtError),r.onCaughtError!==void 0&&(S=r.onCaughtError),r.onRecoverableError!==void 0&&(I=r.onRecoverableError),r.formState!==void 0&&(X=r.formState)),a=Nm(s,1,!0,a,r??null,d,g,X,v,S,I,Dm),a.context=jm(null),r=a.current,d=ms(),d=et(d),g=Hn(d),g.callback=null,Bn(r,g,d),r=d,a.current.lanes=r,It(a,r),Zs(a),s[Lt]=a.current,uu(s),new Go(a)},rr.version="19.2.0",rr}var Hm;function Z1(){if(Hm)return Ru.exports;Hm=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),Ru.exports=X1(),Ru.exports}var W1=Z1();const eN=db(W1);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tN=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),sN=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,l,i)=>i?i.toUpperCase():l.toLowerCase()),Bm=n=>{const t=sN(n);return t.charAt(0).toUpperCase()+t.slice(1)},hb=(...n)=>n.filter((t,l,i)=>!!t&&t.trim()!==""&&i.indexOf(t)===l).join(" ").trim(),nN=n=>{for(const t in n)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var lN={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aN=k.forwardRef(({color:n="currentColor",size:t=24,strokeWidth:l=2,absoluteStrokeWidth:i,className:o="",children:c,iconNode:u,...f},x)=>k.createElement("svg",{ref:x,...lN,width:t,height:t,stroke:n,strokeWidth:i?Number(l)*24/Number(t):l,className:hb("lucide",o),...!c&&!nN(f)&&{"aria-hidden":"true"},...f},[...u.map(([m,b])=>k.createElement(m,b)),...Array.isArray(c)?c:[c]]));/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=(n,t)=>{const l=k.forwardRef(({className:i,...o},c)=>k.createElement(aN,{ref:c,iconNode:t,className:hb(`lucide-${tN(Bm(n))}`,`lucide-${n}`,i),...o}));return l.displayName=Bm(n),l};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iN=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],$t=ce("activity",iN);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rN=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],fb=ce("archive",rN);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oN=[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]],Vm=ce("arrow-down-left",oN);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cN=[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]],xb=ce("arrow-left-right",cN);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dN=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Fl=ce("arrow-right",dN);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uN=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],Fu=ce("arrow-up-right",uN);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hN=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],fN=ce("award",hN);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xN=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Vt=ce("book-open",xN);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mN=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],pN=ce("book",mN);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gN=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]],hl=ce("brain-circuit",gN);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bN=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],Fm=ce("brain",bN);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vN=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],_r=ce("briefcase",vN);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yN=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],Xa=ce("building-2",yN);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NN=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],Ds=ce("calculator",NN);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jN=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],Jm=ce("calendar-days",jN);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wN=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],gh=ce("calendar",wN);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _N=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],mb=ce("chart-column",_N);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SN=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V3",key:"1lcnhd"}],["path",{d:"M19 21V9",key:"unv183"}]],Sr=ce("chart-no-axes-column",SN);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CN=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],bh=ce("chart-pie",CN);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kN=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],gs=ce("check",kN);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EN=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],vh=ce("chevron-down",EN);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TN=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],pb=ce("chevron-left",TN);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AN=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Hs=ce("chevron-right",AN);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MN=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Os=ce("circle-alert",MN);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DN=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]],yh=ce("circle-arrow-up",DN);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RN=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],or=ce("circle-check-big",RN);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IN=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],vt=ce("circle-check",IN);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zN=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],hc=ce("circle-question-mark",zN);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LN=[["path",{d:"M18 20a6 6 0 0 0-12 0",key:"1qehca"}],["circle",{cx:"12",cy:"10",r:"4",key:"1h16sb"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],UN=ce("circle-user-round",LN);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PN=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],Ym=ce("circle-user",PN);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $N=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],qN=ce("clipboard-list",$N);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ON=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Nr=ce("clock",ON);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GN=[["path",{d:"M12 13v8l-4-4",key:"1f5nwf"}],["path",{d:"m12 21 4-4",key:"1lfcce"}],["path",{d:"M4.393 15.269A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.436 8.284",key:"ui1hmy"}]],HN=ce("cloud-download",GN);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BN=[["path",{d:"M6 16.326A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 .5 8.973",key:"1cez44"}],["path",{d:"m13 12-3 5h4l-3 5",key:"1t22er"}]],VN=ce("cloud-lightning",BN);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FN=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],JN=ce("cloud-upload",FN);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YN=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],Nh=ce("cloud",YN);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KN=[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]],QN=ce("code-xml",KN);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XN=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Ol=ce("copy",XN);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZN=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],gb=ce("credit-card",ZN);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WN=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],ec=ce("crown",WN);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ej=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],Cr=ce("database",ej);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tj=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Ju=ce("download",tj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sj=[["path",{d:"M21.54 15H17a2 2 0 0 0-2 2v4.54",key:"1djwo0"}],["path",{d:"M7 3.34V5a3 3 0 0 0 3 3a2 2 0 0 1 2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.1.9-2 2-2h3.17",key:"1tzkfa"}],["path",{d:"M11 21.95V18a2 2 0 0 0-2-2a2 2 0 0 1-2-2v-1a2 2 0 0 0-2-2H2.05",key:"14pb5j"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Uu=ce("earth",sj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nj=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],bb=ce("external-link",nj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lj=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],aj=ce("eye",lj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ij=[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]],vb=ce("facebook",ij);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rj=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 12.5 8 15l2 2.5",key:"1tg20x"}],["path",{d:"m14 12.5 2 2.5-2 2.5",key:"yinavb"}]],oj=ce("file-code",rj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cj=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]],jh=ce("file-down",cj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dj=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]],si=ce("file-spreadsheet",dj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uj=[["path",{d:"M11 21a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1v-8a1 1 0 0 1 1-1",key:"likhh7"}],["path",{d:"M16 16a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1V8a1 1 0 0 1 1-1",key:"17ky3x"}],["path",{d:"M21 6a2 2 0 0 0-.586-1.414l-2-2A2 2 0 0 0 17 2h-3a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1z",key:"1hyeo0"}]],hj=ce("file-stack",uj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fj=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],kn=ce("file-text",fj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xj=[["path",{d:"M12 10a2 2 0 0 0-2 2c0 1.02-.1 2.51-.26 4",key:"1nerag"}],["path",{d:"M14 13.12c0 2.38 0 6.38-1 8.88",key:"o46ks0"}],["path",{d:"M17.29 21.02c.12-.6.43-2.3.5-3.02",key:"ptglia"}],["path",{d:"M2 12a10 10 0 0 1 18-6",key:"ydlgp0"}],["path",{d:"M2 16h.01",key:"1gqxmh"}],["path",{d:"M21.8 16c.2-2 .131-5.354 0-6",key:"drycrb"}],["path",{d:"M5 19.5C5.5 18 6 15 6 12a6 6 0 0 1 .34-2",key:"1tidbn"}],["path",{d:"M8.65 22c.21-.66.45-1.32.57-2",key:"13wd9y"}],["path",{d:"M9 6.8a6 6 0 0 1 9 5.2v2",key:"1fr1j5"}]],Km=ce("fingerprint-pattern",xj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mj=[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],pj=ce("folder-plus",mj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gj=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Jl=ce("funnel",gj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bj=[["path",{d:"m14 13-8.381 8.38a1 1 0 0 1-3.001-3l8.384-8.381",key:"pgg06f"}],["path",{d:"m16 16 6-6",key:"vzrcl6"}],["path",{d:"m21.5 10.5-8-8",key:"a17d9x"}],["path",{d:"m8 8 6-6",key:"18bi4p"}],["path",{d:"m8.5 7.5 8 8",key:"1oyaui"}]],vj=ce("gavel",bj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yj=[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]],yb=ce("git-branch",yj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nj=[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M13 6h3a2 2 0 0 1 2 2v7",key:"1yeb86"}],["path",{d:"M11 18H8a2 2 0 0 1-2-2V9",key:"19pyzm"}]],jj=ce("git-compare",Nj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],_j=ce("globe",wj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sj=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],tc=ce("graduation-cap",Sj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cj=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],Yu=ce("grid-3x3",Cj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kj=[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]],Nb=ce("hard-drive",kj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ej=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],Ku=ce("hash",Ej);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tj=[["path",{d:"M19.414 14.414C21 12.828 22 11.5 22 9.5a5.5 5.5 0 0 0-9.591-3.676.6.6 0 0 1-.818.001A5.5 5.5 0 0 0 2 9.5c0 2.3 1.5 4 3 5.5l5.535 5.362a2 2 0 0 0 2.879.052 2.12 2.12 0 0 0-.004-3 2.124 2.124 0 1 0 3-3 2.124 2.124 0 0 0 3.004 0 2 2 0 0 0 0-2.828l-1.881-1.882a2.41 2.41 0 0 0-3.409 0l-1.71 1.71a2 2 0 0 1-2.828 0 2 2 0 0 1 0-2.828l2.823-2.762",key:"17lmqv"}]],Qm=ce("heart-handshake",Tj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aj=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],Qu=ce("heart",Aj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mj=[["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}]],Xm=ce("hexagon",Mj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dj=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],wh=ce("history",Dj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rj=[["path",{d:"M5 22h14",key:"ehvnwv"}],["path",{d:"M5 2h14",key:"pdyrp9"}],["path",{d:"M17 22v-4.172a2 2 0 0 0-.586-1.414L12 12l-4.414 4.414A2 2 0 0 0 7 17.828V22",key:"1d314k"}],["path",{d:"M7 2v4.172a2 2 0 0 0 .586 1.414L12 12l4.414-4.414A2 2 0 0 0 17 6.172V2",key:"1vvvr6"}]],Zm=ce("hourglass",Rj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ij=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],jb=ce("image",Ij);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],it=ce("info",zj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lj=[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]],Uj=ce("key-round",Lj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pj=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],Xu=ce("key",Pj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $j=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],qj=ce("layers",$j);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oj=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],Wm=ce("layout-dashboard",Oj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gj=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],Hj=ce("layout-grid",Gj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bj=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],wb=ce("lightbulb",Bj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vj=[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]],ni=ce("link-2",Vj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fj=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],_b=ce("link",Fj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jj=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],Yj=ce("list",Jj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kj=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],ci=ce("loader-circle",Kj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qj=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],Xj=ce("log-in",Qj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zj=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Dt=ce("lock",Zj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wj=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],e2=ce("log-out",Wj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t2=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],s2=ce("mail",t2);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n2=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Hl=ce("map-pin",n2);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l2=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],Sb=ce("map",l2);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a2=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],en=ce("maximize-2",a2);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i2=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],r2=ce("menu",i2);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o2=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],c2=ce("message-circle",o2);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d2=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],Cb=ce("message-square",d2);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u2=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M16.95 16.95A7 7 0 0 1 5 12v-2",key:"cqa7eg"}],["path",{d:"M18.89 13.23A7 7 0 0 0 19 12v-2",key:"16hl24"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}]],kb=ce("mic-off",u2);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h2=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],Eb=ce("mic",h2);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f2=[["path",{d:"M6 18h8",key:"1borvv"}],["path",{d:"M3 22h18",key:"8prr45"}],["path",{d:"M14 22a7 7 0 1 0 0-14h-1",key:"1jwaiy"}],["path",{d:"M9 14h2",key:"197e7h"}],["path",{d:"M9 12a2 2 0 0 1-2-2V6h6v4a2 2 0 0 1-2 2Z",key:"1bmzmy"}],["path",{d:"M12 6V3a1 1 0 0 0-1-1H9a1 1 0 0 0-1 1v3",key:"1drr47"}]],Qt=ce("microscope",f2);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x2=[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]],tn=ce("minimize-2",x2);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m2=[["path",{d:"M18 8V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h8",key:"10dyio"}],["path",{d:"M10 19v-3.96 3.15",key:"1irgej"}],["path",{d:"M7 19h5",key:"qswx4l"}],["rect",{width:"6",height:"10",x:"16",y:"12",rx:"2",key:"1egngj"}]],p2=ce("monitor-smartphone",m2);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g2=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],ep=ce("monitor",g2);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b2=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],v2=ce("moon",b2);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y2=[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M15.312 2a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586l-4.688-4.688A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2z",key:"1fd625"}]],jr=ce("octagon-alert",y2);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N2=[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]],j2=ce("paperclip",N2);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w2=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],_2=ce("pen-line",w2);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S2=[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]],Bl=ce("pen-tool",S2);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C2=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],Tb=ce("phone",C2);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k2=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],Ab=ce("play",k2);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E2=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],kr=ce("plus",E2);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T2=[["path",{d:"M2 3h20",key:"91anmk"}],["path",{d:"M21 3v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V3",key:"2k9sn8"}],["path",{d:"m7 21 5-5 5 5",key:"bip4we"}]],dl=ce("presentation",T2);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A2=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],bs=ce("printer",A2);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M2=[["path",{d:"M15.39 4.39a1 1 0 0 0 1.68-.474 2.5 2.5 0 1 1 3.014 3.015 1 1 0 0 0-.474 1.68l1.683 1.682a2.414 2.414 0 0 1 0 3.414L19.61 15.39a1 1 0 0 1-1.68-.474 2.5 2.5 0 1 0-3.014 3.015 1 1 0 0 1 .474 1.68l-1.683 1.682a2.414 2.414 0 0 1-3.414 0L8.61 19.61a1 1 0 0 0-1.68.474 2.5 2.5 0 1 1-3.014-3.015 1 1 0 0 0 .474-1.68l-1.683-1.682a2.414 2.414 0 0 1 0-3.414L4.39 8.61a1 1 0 0 1 1.68.474 2.5 2.5 0 1 0 3.014-3.015 1 1 0 0 1-.474-1.68l1.683-1.682a2.414 2.414 0 0 1 3.414 0z",key:"w46dr5"}]],Yl=ce("puzzle",M2);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D2=[["path",{d:"M19.07 4.93A10 10 0 0 0 6.99 3.34",key:"z3du51"}],["path",{d:"M4 6h.01",key:"oypzma"}],["path",{d:"M2.29 9.62A10 10 0 1 0 21.31 8.35",key:"qzzz0"}],["path",{d:"M16.24 7.76A6 6 0 1 0 8.23 16.67",key:"1yjesh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M17.99 11.66A6 6 0 0 1 15.77 16.67",key:"1u2y91"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"m13.41 10.59 5.66-5.66",key:"mhq4k0"}]],R2=ce("radar",D2);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I2=[["path",{d:"M5 16v2",key:"g5qcv5"}],["path",{d:"M19 16v2",key:"1gbaio"}],["rect",{width:"20",height:"8",x:"2",y:"8",rx:"2",key:"vjsjur"}],["path",{d:"M18 12h.01",key:"yjnet6"}]],z2=ce("radio-receiver",I2);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L2=[["path",{d:"M16.247 7.761a6 6 0 0 1 0 8.478",key:"1fwjs5"}],["path",{d:"M19.075 4.933a10 10 0 0 1 0 14.134",key:"ehdyv1"}],["path",{d:"M4.925 19.067a10 10 0 0 1 0-14.134",key:"1q22gi"}],["path",{d:"M7.753 16.239a6 6 0 0 1 0-8.478",key:"r2q7qm"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],U2=ce("radio",L2);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P2=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],sc=ce("refresh-ccw",P2);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $2=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],xr=ce("refresh-cw",$2);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q2=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Tn=ce("rotate-ccw",q2);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O2=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],G2=ce("rotate-cw",O2);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H2=[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]],An=ce("ruler",H2);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B2=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Zt=ce("save",B2);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V2=[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]],Gs=ce("scale",V2);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F2=[["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M18 5v16",key:"1ethyx"}],["path",{d:"m4 6 7.106-3.79a2 2 0 0 1 1.788 0L20 6",key:"zywc2d"}],["path",{d:"m6 11-3.52 2.147a1 1 0 0 0-.48.854V19a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-5a1 1 0 0 0-.48-.853L18 11",key:"1d4ql0"}],["path",{d:"M6 5v16",key:"1sn0nx"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]],Et=ce("school",F2);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J2=[["path",{d:"M15 12h-5",key:"r7krc0"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]],Zu=ce("scroll-text",J2);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y2=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Mb=ce("search",Y2);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K2=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Db=ce("send",K2);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q2=[["path",{d:"M14 17H5",key:"gfn3mx"}],["path",{d:"M19 7h-9",key:"6i9tg"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]],X2=ce("settings-2",Q2);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z2=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Rb=ce("settings",Z2);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W2=[["path",{d:"M8.3 10a.7.7 0 0 1-.626-1.079L11.4 3a.7.7 0 0 1 1.198-.043L16.3 8.9a.7.7 0 0 1-.572 1.1Z",key:"1bo67w"}],["rect",{x:"3",y:"14",width:"7",height:"7",rx:"1",key:"1bkyp8"}],["circle",{cx:"17.5",cy:"17.5",r:"3.5",key:"w3z12y"}]],nc=ce("shapes",W2);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ew=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],tw=ce("shield-alert",ew);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sw=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Er=ce("shield-check",sw);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nw=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Vl=ce("shield",nw);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lw=[["path",{d:"M18 7V5a1 1 0 0 0-1-1H6.5a.5.5 0 0 0-.4.8l4.5 6a2 2 0 0 1 0 2.4l-4.5 6a.5.5 0 0 0 .4.8H17a1 1 0 0 0 1-1v-2",key:"wuwx1p"}]],aw=ce("sigma",lw);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iw=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],li=ce("smartphone",iw);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rw=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],_h=ce("sparkles",rw);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ow=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Wu=ce("square-check-big",ow);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cw=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Tt=ce("square-pen",cw);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dw=[["path",{d:"M14 13V8.5C14 7 15 7 15 5a3 3 0 0 0-6 0c0 2 1 2 1 3.5V13",key:"i9gjdv"}],["path",{d:"M20 15.5a2.5 2.5 0 0 0-2.5-2.5h-11A2.5 2.5 0 0 0 4 15.5V17a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1z",key:"1vzg3v"}],["path",{d:"M5 22h14",key:"ehvnwv"}]],ai=ce("stamp",dw);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uw=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Ib=ce("star",uw);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hw=[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]],Sh=ce("stethoscope",hw);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fw=[["path",{d:"M9 3H5a2 2 0 0 0-2 2v4m6-6h10a2 2 0 0 1 2 2v4M9 3v18m0 0h10a2 2 0 0 0 2-2V9M9 21H5a2 2 0 0 1-2-2V9m0 0h18",key:"gugj83"}]],xw=ce("table-2",fw);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mw=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],is=ce("target",mw);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pw=[["path",{d:"M12 19h8",key:"baeox8"}],["path",{d:"m4 17 6-6-6-6",key:"1yngyt"}]],gw=ce("terminal",pw);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bw=[["circle",{cx:"9",cy:"12",r:"3",key:"u3jwor"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],vw=ce("toggle-left",bw);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yw=[["circle",{cx:"15",cy:"12",r:"3",key:"1afu0r"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],Nw=ce("toggle-right",yw);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jw=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],fl=ce("trash-2",jw);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ww=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Kl=ce("trending-up",ww);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _w=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],ys=ce("triangle-alert",_w);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sw=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],Cw=ce("trophy",Sw);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kw=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],ii=ce("upload",kw);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ew=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Tw=ce("user-plus",Ew);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aw=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],vs=ce("user",Aw);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mw=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],rs=ce("users",Mw);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dw=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],Rw=ce("video",Dw);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iw=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],zw=ce("wand-sparkles",Iw);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lw=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Uw=ce("wifi-off",Lw);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pw=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Ze=ce("x",Pw);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $w=[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]],zb=ce("youtube",$w);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qw=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],di=ce("zap",qw);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ow=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],Gw=ce("zoom-in",Ow),Hw=["  ( )","  ( )","  ( )","  ( )","  ()","  ( )","  ( )","  ( )","  (  )","  ()","  ()","  ()","  ()","  ()","  (//)","  ( )","  ( )","","  "," "," ","",""," "," "],Lb=["()  ","()   ","   ","  ","",""],Ub=["  ","    ","    ","    "],Bw=[" "," "," "," "," "," "],Vw={:["  :    ","     ","     ","  :  ","    "],:[" :   ","    ","     ( )","     "," :  "],:["     ","      ","    ","     "," :    "]," ":["     ","     ","    ","    ","    "],"  ":["   ","    ","   ","   "," :  "]," ":["     ","   ","    ","    "," :    "]," ":["    ","    ","     ","    ","    "]},Fw={" ":["            .","          .","         .","         .","            .","         .","            .","           .","    (  )   .","       .","          .","        .","         .","         .","          ."]," ":["          .","       .","         .","       .","      .","       .","       .","         .","       .","     .","        .","      .","        .","      .","      ."]," ":["       .","        .","       .","      .","     .","      .","     .","     .","     .","     .","     .","     .","     .","    .","     ."]," ":["         .","         .","       (     ).","   ( )   ( )   .","       .","          .","          .","        .","         .","       .","       .","       .","        .","     .","      ( )."]," ":["          .","          .","     ( )   .","    (  )  .","            .","   (  )  .","       .","         .","       .","           .","        .","        .","      .","      .","      ."]," ":["        .","        .","       .","         .","     .","      .","         .","      (  ).","       .","       .","    (  )    .","       .","        .","    (  ).","     ."]," ":["    (    ).","       .","       .","      .","        .","      .",'  "--"   .',"       .","        .","      .","    (  )   .","      .","       .","  ()     .","      ."]," ":["         .","     (  ...)  .","         .","        .","       .","         .","     (4-5)   .","         .","      .","         .","      .","          .","         .",'  ""   ""  .',"       ."]," ":["       .","   (    )  .","          .","        .","        .","       .","        .","           .","      .",'   ""    .',"       .","        .","      .","      .","         ."]," ":["        .","   ( )  .","        .",'   "/"    .',"       .","        .","     (    ).","       .","      (   ).","        .","    .","       .","        .","       .","         ."]," ":["     ()   .","         .","        .","        (  ).","          .","        .","         .","        .",'  ""   .',"       .","     (    ).","       .","         .","         .","       ."]," ":["         .","        .","       .","       .","        .","    (    ).","      .","         .","       .","       .","      .","       .","      .","     (    ).","         ."]," ":["     .","       .","   ()    .","      ().","        .","   ()   .","     .","     .","      .","       .","        .","      .","       .","    (/)  (/)  .","        ."]," ":["        .","   (  )   .","        .","        .","      .","    (     ).","       .","       ( ).","       .","     ( ).","        .","      .","         .","        .","         ."],:["      .","       .","            .","      .","        .","      .","      (   ).","         .","       .","      .","         .","       .","       .","        .","         ."]," ":["       .","       .","       .","       .","      .","     (   ).","        (  U ).","       .","       .","      .","     .","        .","       .","      .","        ."]," ":["       .","       .","       .","     ( 5  ...).","         .","        .","       .","     .","      .","         .","       .","       .","         .","      .","      ."]," ":["          .",'     "" " " "".',"       .","       .","        .","       .","       .","        .","        .","      .","     .","    .","     .","      .","          ."],:["   (-)    (-).","      .","     .","        .","    (  ).","    (  ).","       .","      .","        .","       .","     .","      .","     .","       .","        ."],:["      .","   (     ).","      .","      .","      .","        .","      .","    .","    .","   (   ).","        .","    .","       ( ).","      .","     ."]," ":["       .","    .","        .","     .","       .","     .","      .","       .","      .","      .","    .","     (  ).","        .","      .","       ."],:["       .","      (   ...).","    .","      .","        .","     .","        .","      .","       .","      .","         .","    .","      .","      ( ).","   ."]," ":["       .","   (  )  .","       .","       .","      .","       .","   .","       .","     .","       .","     .","      .","       .","        .","       ."]," ":["        .","       .","    (   ).","     .","        .","       .","   (  )   .","      .","  (  ).","   (   ).","      .","     .","     .","      .","      ."],:["        .","      .","   (    ).","          .","      .","        .","      .","       .","         .","        .","       .","       .","     (  ).","        .","       ."],:["    (TIC)    .","   (Data Show)    .","    .","      .","        ( ).","       .","        .","         .","     .","      .","      .","     .","       .","      .","       ."],:["    ( )    .","        .","       .","     .","       .","        .","       .","      .","       .","      .","       .","       .","      .","        .","        ."],:["       .","    (     ).","         .","       .","      .","       .","       ( ).","    (    ) .","        .","       .","       .","       .","       .","     .","       ."]," ":["     (    ).","      (  ).",'  ""    .',"    .","       .","    .","    .","       .","        .","     .","     .","      .","       ( ).","         .","       ."]," ":["       .","      .","     .","    .","      .","     ( ).","    .","    .","      .","    .","      ( ).","       .","     .","      .","      ."],:["      .","   ( )  (  ).","     (    ).","     .","       .","      .","     .","      .","     .","    .","      .","          .","      .","      .","  ( )   ."],:["    ( ) .","    (  ).","   (   ).","      .","    .","      .","       .","      .","      .","     .","         .","    .","     .","       .","        ."]},lc=[{id:"plan-1",category:"",criteria:" ",indicators:["      "],score:null,improvementNotes:""},{id:"plan-2",category:"",criteria:" ",indicators:["     "],score:null,improvementNotes:""},{id:"plan-3",category:"",criteria:" ",indicators:["    "],score:null,improvementNotes:""},{id:"plan-4",category:"",criteria:" ",indicators:["       "],score:null,improvementNotes:""},{id:"plan-5",category:"",criteria:" ",indicators:["     "],score:null,improvementNotes:""},{id:"exec-1",category:"",criteria:" ",indicators:["    "],score:null,improvementNotes:""},{id:"exec-2",category:"",criteria:" ",indicators:["     21 (   )"],score:null,improvementNotes:""},{id:"exec-3",category:"",criteria:" ",indicators:["    "],score:null,improvementNotes:""},{id:"eval-1",category:"",criteria:" ",indicators:["       "],score:null,improvementNotes:""},{id:"eval-2",category:"",criteria:" ",indicators:["      "],score:null,improvementNotes:""},{id:"eval-3",category:"",criteria:" ",indicators:["     ( )"],score:null,improvementNotes:""},{id:"eval-4",category:"",criteria:" ",indicators:["        "],score:null,improvementNotes:""},{id:"eval-5",category:"",criteria:" ",indicators:["   (    )"],score:null,improvementNotes:""},{id:"eval-6",category:"",criteria:" ",indicators:["     "],score:null,improvementNotes:""},{id:"learn-meth-1",category:" ",criteria:"",indicators:["   "],score:null,improvementNotes:""},{id:"learn-meth-2",category:" ",criteria:" ",indicators:["      "],score:null,improvementNotes:""},{id:"learn-meth-3",category:" ",criteria:" ",indicators:["     "],score:null,improvementNotes:""},{id:"learn-comm-1",category:"  ",criteria:" ",indicators:["      "],score:null,improvementNotes:""},{id:"learn-comm-2",category:"  ",criteria:"",indicators:["     "],score:null,improvementNotes:""},{id:"learn-comm-3",category:"  ",criteria:"",indicators:["     "],score:null,improvementNotes:""},{id:"learn-resp-1",category:" ",criteria:" ",indicators:["      "],score:null,improvementNotes:""},{id:"learn-resp-2",category:" ",criteria:"",indicators:["      "],score:null,improvementNotes:""},{id:"learn-resp-3",category:" ",criteria:" ",indicators:["     ( )"],score:null,improvementNotes:""},{id:"env-phy-1",category:" ",criteria:" ",indicators:["     "],score:null,improvementNotes:""},{id:"env-phy-2",category:" ",criteria:"",indicators:["     "],score:null,improvementNotes:""},{id:"env-phy-3",category:" ",criteria:"",indicators:["     "],score:null,improvementNotes:""},{id:"env-disc-1",category:" ",criteria:"",indicators:["    (  )"],score:null,improvementNotes:""},{id:"env-disc-2",category:" ",criteria:"",indicators:["      "],score:null,improvementNotes:""},{id:"env-disc-3",category:" ",criteria:" ",indicators:["    ( )"],score:null,improvementNotes:""},{id:"env-part-1",category:"  ",criteria:" ",indicators:["   (  )"],score:null,improvementNotes:""},{id:"env-part-2",category:"  ",criteria:"",indicators:["   (   )"],score:null,improvementNotes:""},{id:"env-part-3",category:"  ",criteria:"",indicators:["   (  ...)"],score:null,improvementNotes:""}],Jw={schoolYear:`${new Date().getFullYear()}/${new Date().getFullYear()+1}`,daira:"",municipality:"",familyStatus:"()",maidenName:"",trainingInstitute:"  ",trainingDate:"",graduationDate:"",classroomListening:" ",lighting:"",heating:"",ventilation:"",cleanliness:"",lessonPreparation:" ",preparationValue:"",otherAids:" ",boardWork:" ",documentsAndPosters:"  ",registers:"",registersUsed:"",registersMonitored:" ",scheduledPrograms:"",progression:"",duties:"",lessonExecution:" ",informationValue:"  ",objectivesAchieved:" ",studentParticipation:" ",applications:" ",applicationsSuitability:" ",notebooksCare:"",notebooksMonitored:" ",homeworkCorrection:" ",homeworkValue:"",generalAppreciation:""},Bo={:["       ","     (  )","      ","    ","  :    "],:["      ( )","     ","     ","     ","     "],:["  :    ","      ","     ","      ","  :  "]," ":["    ()","     "," :    ","     ","     "]},Yw=[" ",""," "," "," "," ","",""," "," "," "],Kw=["()  ","()   ","   ","  ","","",""],Qw=[" "," "," "," "," "," "],Xw=[" ","  ()","   "," ","   "],tp=["","","","",""],Zw=["","","",""," "],Ww=[""," ","","",""],e_=[" ","  ","",""," ","   "],t_=["  ","","","   "," "],s_=["  ","  "," ( )","  ","  ","  "," "],n_=["   ","","  ","  "," ","   "],l_=["   ","  "," ","","   "," "],a_=["","","",""],i_=[" ","","","",""],r_=[" ","","  ","",""],o_=["","",""," "],c_=[""," "," ","  "],d_=["",""," ","","  "],u_=["  ","","","  ","   "," "],h_=[" ","","",""," "," "],f_=[" "," "," ","   ","     "],x_=["  ",""," ","","   ","   "],m_=[" ","",""," "],p_=["   ","","  "," ","    ","   "],g_=[" ","","","","  "],b_=[" ","","  "," ","  "],v_=[" ","",""," "," "],sp={id:"",teacherId:"",examDate:new Date().toISOString().split("T")[0],wilaya:"",district:"",school:"",city:"",inspectorName:"",directorName:"",teacherMemberName:"",appointmentDecisionNumber:"",appointmentDecisionDate:"",financialVisaNumber:"",financialVisaDate:"",contestDate:"",recruitmentType:"",university:"",lessons:[{id:"l1",order:1,subject:" ",topic:"",level:" ",timeStart:"08:00",timeEnd:"08:45",phaseLaunch:"",phaseConstruction:"",phaseInvestment:""},{id:"l2",order:2,subject:"",topic:"",level:" ",timeStart:"09:00",timeEnd:"09:45",phaseLaunch:"",phaseConstruction:"",phaseInvestment:""},{id:"l3",order:3,subject:" ",topic:"",level:" ",timeStart:"10:00",timeEnd:"10:45",phaseLaunch:"",phaseConstruction:"",phaseInvestment:""}],oralQuestions:{educationScience:"",psychology:"",legislation:""},pedagogyMark:0,oralMark:0,totalMark:0,finalDecision:"confirmed",culturalValue:"",pedagogicalValue:""},y_=[],ol={id:"",teacherId:"",reportModel:"modern",inspectionDate:new Date().toISOString().split("T")[0],inspectorName:"",wilaya:"",district:"",school:"",subject:" ",topic:"",duration:"45 ",level:" ",group:"",studentCount:25,absentCount:0,observations:JSON.parse(JSON.stringify(lc)),legacyData:Jw,generalAssessment:"",assessmentKeywords:"",finalMark:0,markInLetters:""},N_={id:"",inspectorName:"",rank:"  ",district:"",wilaya:"",term:"",schoolYear:`${new Date().getFullYear()}/${new Date().getFullYear()+1}`,startDate:"",endDate:"",teachersTotal:0,teachersTrainee:0,teachersTenure:0,visitsInspection:0,visitsTenure:0,visitsTraining:0,visitsTrainingBenefit:0,visitsMorning:0,visitsEvening:0,tasksInvestigations:0,tasksSupervision:0,days:{sun:0,mon:0,tue:0,wed:0,thu:0},ranks:{stagiere:0,primary:0,class1:0,class2:0,distinguished:0,contract:0},levels:{prep:0,year1:0,year2:0,year3:0,year4:0,year5:0},subjects:{arabic:0,math:0,islamic:0,history:0,geo:0,civics:0,science:0,art:0}},ac=()=>Math.random().toString(36).substr(2,9),ct=n=>{if(!n)return"";const t=String(n).trim();if(t.includes("T"))return t.split("T")[0];if(typeof n=="number"&&n>2e4){const i=new Date(Math.round((n-25569)*86400*1e3));if(!isNaN(i.getTime()))return i.toISOString().split("T")[0]}const l=t.match(/^(\d{1,2})[\/\-\.](\d{1,2})[\/\-\.](\d{2,4})$/);if(l){const i=l[1].padStart(2,"0"),o=l[2].padStart(2,"0");let c=l[3];return c.length===2&&(c="20"+c),`${c}-${o}-${i}`}return/^\d{4}-\d{2}-\d{2}$/.test(t),t},mt=n=>{if(!n)return"";const t=String(n).trim();if(/^\d{4}-\d{2}-\d{2}$/.test(t)){const[l,i,o]=t.split("-");return`${o}/${i}/${l}`}return t.replace(/-/g,"/")},j_=n=>{if(!n)return"  ";const t=n.trim().toLowerCase();return t.includes("")||t.includes("")?"    ":t.includes("")?"    ":t.includes("")||t.includes("")||t.includes("2")||t.includes(" 2")||/\b2\b/.test(t)?"    ":t.includes("")||t.includes("")||t.includes("1")||t.includes(" 1")||/\b1\b/.test(t)?"    ":"  "},w_=n=>{if(!n||n.trim()==="")return"";const t=n.trim().toLowerCase();return t.includes("")||t.includes("")||t.includes("master")?"":t.includes("")||t.includes("ens")?"()   ":t.includes("")||t.includes("ite")?"()  ":t.includes("")||t.includes("deua")?"   ":t.includes("")||t.includes(" ")||t.includes(" ")?"  ":""},__=n=>{if(!n)return"";const t=n.trim();return t.includes("")||t.includes(" ")?" ":t.includes("1")||t.includes("")||t.includes("")?" ":t.includes("2")||t.includes("")?" ":t.includes("3")||t.includes("")?" ":t.includes("4")||t.includes("")?" ":t.includes("5")||t.includes("")?" ":t},S_=()=>{const n=Ub,t=Lb,l=["","",""],i=Array.from({length:12},(A,E)=>(E+1).toString()),o=[" "," "," "," "," "," "],c=Math.max(n.length,t.length,l.length,i.length,o.length),u=[["_","_","_","_","_"]];for(let A=0;A<c;A++)u.push([n[A]||"",t[A]||"",l[A]||"",i[A]||"",o[A]||""]);const f=XLSX.utils.book_new(),x=XLSX.utils.aoa_to_sheet(u);XLSX.utils.book_append_sheet(f,x,"Lists");const m=[" "," "," ",""," "," ","","   "," ()"," ","","  ","  "," "," "],b=[":    ","01/01/1990","","","30/06/2012","01/09/2015","  ","01/09/2018","3","01/01/2021","","15","15/02/2023","   "," "],y=XLSX.utils.aoa_to_sheet([m,b]);y["!views"]||(y["!views"]=[]),y["!views"].push({rightToLeft:!0}),y["!cols"]=[{wch:30},{wch:15},{wch:15},{wch:25},{wch:15},{wch:15},{wch:30},{wch:15},{wch:10},{wch:15},{wch:15},{wch:10},{wch:15},{wch:25},{wch:20}];const N=200;y["!dataValidation"]=[{sqref:`D2:D${N}`,type:"list",operator:"equal",formula1:`'Lists'!$B$2:$B$${t.length+1}`,showDropDown:!0},{sqref:`G2:G${N}`,type:"list",operator:"equal",formula1:`'Lists'!$A$2:$A$${n.length+1}`,showDropDown:!0},{sqref:`I2:I${N}`,type:"list",operator:"equal",formula1:`'Lists'!$D$2:$D$${i.length+1}`,showDropDown:!0},{sqref:`K2:K${N}`,type:"list",operator:"equal",formula1:`'Lists'!$C$2:$C$${l.length+1}`,showDropDown:!0},{sqref:`O2:O${N}`,type:"list",operator:"equal",formula1:`'Lists'!$E$2:$E$${o.length+1}`,showDropDown:!0}];const C=[1,4,5,7,9,12];for(let A=1;A<N;++A){C.forEach(P=>{const O=XLSX.utils.encode_cell({c:P,r:A});y[O]||(y[O]={t:"s",v:""}),y[O].z="@"});const E=XLSX.utils.encode_cell({c:8,r:A});y[E]||(y[E]={t:"s",v:""}),y[E].z="@";const R=XLSX.utils.encode_cell({c:11,r:A});y[R]||(y[R]={t:"s",v:""}),y[R].z="@"}return XLSX.utils.book_append_sheet(f,y,"_"),f.Workbook={Views:[{RTL:!0}],Sheets:[{Hidden:1},{Hidden:0}]},XLSX.write(f,{bookType:"xlsx",type:"array"})},C_=n=>{const t=XLSX.read(n,{type:"array"});let l="_";t.SheetNames.includes(l)||(t.SheetNames.length>1?l=t.SheetNames[1]:l=t.SheetNames[0]);const i=t.Sheets[l],o=XLSX.utils.sheet_to_json(i,{header:1,raw:!0});if(!o||o.length<2)return{teachers:[],reports:{}};const c=[],u={};for(let f=1;f<o.length;f++){const x=o[f];if(!x||x.length===0||!x[0])continue;const m=String(x[0]).trim();if(m.includes("")||m.includes("Example"))continue;const b=ac(),y=String(x[10]||"").trim();let N="titulaire";y.includes("")?N="contractuel":y.includes("")&&(N="stagiere");const C=String(x[6]||"").trim(),A=j_(C),E=String(x[3]||"").trim(),R=w_(E),P=String(x[13]||"").trim(),O=String(x[14]||"").trim(),z=__(O),K={id:b,fullName:m,birthDate:ct(x[1]),birthPlace:String(x[2]||"").trim(),degree:R,degreeDate:ct(x[4]),recruitmentDate:ct(x[5]),rank:A,currentRankDate:ct(x[7]),echelon:String(x[8]||"").trim(),echelonDate:ct(x[9]),status:N,lastMark:parseFloat(x[11])||10,lastInspectionDate:ct(x[12]),tenureDate:""};K.fullName&&K.fullName.length>2&&(c.push(K),(P||z)&&(u[b]={...ol,id:ac(),teacherId:b,school:P,level:z,group:""}))}return{teachers:c,reports:u}},ic=(n,t,l,i)=>{const o=["ID","_","_","_","","_","_","","_","","_","__","_","","_"],c=["","","","_","","","","","","_","","__","_","_","_"],u=["_","_","_","_","___","__","_","","","_","","","","","_","_","_","_","_","","_","_","_","","","_","_","_","_","","_","_","_","_","_","__"],f=[];lc.forEach(C=>{f.push(`_${C.id}_`),f.push(`_${C.id}_`)});const x=[...o,...c,...u,...f];let m=(i==null?void 0:i.wilaya)||"",b=(i==null?void 0:i.district)||"",y=(i==null?void 0:i.fullName)||"";t!=null&&t.wilaya&&(m=t.wilaya),t!=null&&t.district&&(b=t.district),t!=null&&t.inspectorName&&(y=t.inspectorName);const N=n.map(C=>{if(!C)return[];let A={...ol,teacherId:C.id},E=!1;t&&t.teacherId===C.id?(A=t,E=!0):l&&l[C.id]&&(A=l[C.id],E=!0),A.wilaya&&(m=A.wilaya),A.district&&(b=A.district),A.inspectorName&&(y=A.inspectorName);const R=A.wilaya||m||(i==null?void 0:i.wilaya)||"",P=A.district||b||(i==null?void 0:i.district)||"",O=A.inspectorName||y||(i==null?void 0:i.fullName)||"",z=A.legacyData||ol.legacyData,K=[C.id||"",C.fullName||"",C.birthDate||"",C.birthPlace||"",C.degree||"",C.degreeDate||"",C.recruitmentDate||"",C.rank||"",C.currentRankDate||"",C.echelon||"",C.echelonDate||"",C.lastInspectionDate||"",C.lastMark||"",C.status||"",C.tenureDate||""],G=[R,P,A.school||"",E?A.inspectionDate:"",E?A.subject:"",E?A.topic:"",E?A.duration:"",E?A.level:"",E?A.group:"",E?A.studentCount:"",E?A.absentCount:"",E?A.generalAssessment:"",E?A.finalMark:"",E?A.markInLetters:"",E&&A.assessmentKeywords||""],F=[E&&A.reportModel||"modern",O,E?z.familyStatus:"",E?z.trainingInstitute:"",E?z.trainingDate:"",E?z.graduationDate:"",E?z.schoolYear:"",E?z.daira:"",E?z.municipality:"",E?z.classroomListening:"",E?z.lighting:"",E?z.heating:"",E?z.ventilation:"",E?z.cleanliness:"",E?z.lessonPreparation:"",E?z.preparationValue:"",E?z.otherAids:"",E?z.boardWork:"",E?z.documentsAndPosters:"",E?z.registers:"",E?z.registersUsed:"",E?z.registersMonitored:"",E?z.scheduledPrograms:"",E?z.progression:"",E?z.duties:"",E?z.lessonExecution:"",E?z.informationValue:"",E?z.objectivesAchieved:"",E?z.studentParticipation:"",E?z.applications:"",E?z.applicationsSuitability:"",E?z.notebooksCare:"",E?z.notebooksMonitored:"",E?z.homeworkCorrection:"",E?z.homeworkValue:"",E?z.generalAppreciation:""],$=[];return lc.forEach(B=>{if(E&&A.observations){const q=A.observations.find(U=>U.id===B.id),J=(q==null?void 0:q.score)!=null?q.score:"",Q=(q==null?void 0:q.improvementNotes)||"";$.push(J),$.push(Q)}else $.push(""),$.push("")}),[...K,...G,...F,...$]});return[x,...N]},Pb=n=>{if(!n||n.length<2)return{teachers:[],reportsMap:{}};const t=n[0],l={};t.forEach((u,f)=>{typeof u=="string"&&(l[u.trim()]=f)});const i=(u,f,x)=>{let m=l[f];m===void 0&&(m=x);const b=u[m];return b==null?"":typeof b=="object"?JSON.stringify(b):String(b).trim()},o=[],c={};for(let u=1;u<n.length;u++){const f=n[u];if(!f||f.length===0||!i(f,"_",1))continue;const x=i(f,"ID",0)||ac(),m={id:x,fullName:i(f,"_",1),birthDate:ct(i(f,"_",2)),birthPlace:i(f,"_",3),degree:i(f,"",4),degreeDate:ct(i(f,"_",5)),recruitmentDate:ct(i(f,"_",6)),rank:i(f,"",7),currentRankDate:ct(i(f,"_",8)),echelon:i(f,"",9),echelonDate:ct(i(f,"_",10)),lastInspectionDate:ct(i(f,"__",11)),lastMark:parseFloat(i(f,"_",12))||10,status:k_(i(f,"",13)),tenureDate:ct(i(f,"_",14))};o.push(m);const b=i(f,"_",29)||"modern";let y;b==="legacy"?y={familyStatus:i(f,"_",31),trainingInstitute:i(f,"_",32),trainingDate:ct(i(f,"___",33)),graduationDate:ct(i(f,"__",34)),schoolYear:i(f,"_",35),daira:i(f,"",36),municipality:i(f,"",37),classroomListening:i(f,"_",38),lighting:i(f,"",39),heating:i(f,"",40),ventilation:i(f,"",41),cleanliness:i(f,"",42),lessonPreparation:i(f,"_",43),preparationValue:i(f,"_",44),otherAids:i(f,"_",45),boardWork:i(f,"_",46),documentsAndPosters:i(f,"_",47),registers:i(f,"",48),registersUsed:i(f,"_",49),registersMonitored:i(f,"_",50),scheduledPrograms:i(f,"_",51),progression:i(f,"",52),duties:i(f,"",53),lessonExecution:i(f,"_",54),informationValue:i(f,"_",55),objectivesAchieved:i(f,"_",56),studentParticipation:i(f,"_",57),applications:i(f,"",58),applicationsSuitability:i(f,"_",59),notebooksCare:i(f,"_",60),notebooksMonitored:i(f,"_",61),homeworkCorrection:i(f,"_",62),homeworkValue:i(f,"_",63),generalAppreciation:i(f,"__",64)}:y={...ol.legacyData};const N=JSON.parse(JSON.stringify(lc));N.forEach(A=>{const E=`_${A.id}_`,R=`_${A.id}_`;let P=l[E],O=l[R];const z=P!==void 0?f[P]:"",K=O!==void 0?f[O]:"";z==="0"||z==="1"||z==="2"||z===0||z===1||z===2?A.score=parseInt(z):A.score=null,A.improvementNotes=K||""});let C=i(f,"__",26);if(!C||C.trim()===""){const A=l.;if(A!==void 0){const E=f[A];E&&(C=String(E).trim())}}c[x]={id:ac(),teacherId:x,reportModel:b==="legacy"?"legacy":"modern",inspectorName:i(f,"_",30),wilaya:i(f,"",15),district:i(f,"",16),school:i(f,"",17),inspectionDate:ct(i(f,"_",18)),subject:i(f,"",19),topic:i(f,"",20),duration:i(f,"",21),level:i(f,"",22),group:i(f,"",23),studentCount:parseInt(i(f,"_",24))||0,absentCount:parseInt(i(f,"",25))||0,generalAssessment:C,finalMark:parseFloat(i(f,"_",27))||0,markInLetters:i(f,"_",28),assessmentKeywords:i(f,"_",29),observations:N,legacyData:y}}return{teachers:o,reportsMap:c}},k_=n=>{const t=String(n).trim().toLowerCase();return t.includes("")||t.includes("contract")?"contractuel":t.includes("")||t.includes("stag")?"stagiere":"titulaire"},np=({teachers:n,reportsMap:t,onSelect:l,selectedId:i,onAddNew:o,onImport:c,onDelete:u,availableSchools:f,availableLevels:x,filterSchool:m,filterLevel:b,onSetFilterSchool:y,onSetFilterLevel:N})=>{const[C,A]=k.useState(""),[E,R]=k.useState(!1),[P,O]=k.useState("status"),[z,K]=k.useState({}),[G,F]=k.useState(!1),$=k.useRef(null),B=w=>{K(D=>({...D,[w]:!D[w]}))},q=(w,D)=>{if(D&&D.inspectionDate&&D.inspectionDate.trim()!=="")return{status:null,reason:""};if(!w.lastInspectionDate)return{status:"urgent",reason:"    ( )"};const V=new Date(w.lastInspectionDate),_=Math.abs(new Date().getTime()-V.getTime())/(1e3*60*60*24*365.25);if(_>=3)return{status:"urgent",reason:` ${_.toFixed(1)}     ( 3 )`};const j=9.5+parseInt(w.echelon||"0")*.5;return w.lastMark<j?{status:"medium",reason:` (${w.lastMark})      (${j})`}:{status:null,reason:""}},J=w=>{switch(w){case"urgent":return{border:"border-r-4 border-r-rose-600 bg-rose-50/40",badgeColor:"bg-rose-100 text-rose-800 border-rose-200",label:" ",icon:Os};case"medium":return{border:"border-r-4 border-r-orange-400 bg-orange-50/30",badgeColor:"bg-orange-100 text-orange-800 border-orange-200",label:" ",icon:Nr};default:return{border:"",badgeColor:"",label:"",icon:null}}},Q=w=>{if(w.status!=="titulaire"||!w.echelonDate||!w.echelon)return!1;const D=new Date().getFullYear(),V=new Date(w.echelonDate);if(isNaN(V.getTime()))return!1;const Y=new Date(V);Y.setFullYear(V.getFullYear()+2);const le=new Date(D,11,31);if(Y>le)return!1;const M=13+parseInt(w.echelon)*.5;if(w.lastMark>=M)return!1;const j=t[w.id];if(j){const T=j.inspectionDate&&j.inspectionDate.trim()!=="",L=j.finalMark!==void 0&&j.finalMark>0;if(T&&L)return!1}return!0},U=k.useMemo(()=>{const w=C.toLowerCase();return n.filter(D=>{var V,Y;if(D.fullName.toLowerCase().includes(w))return!0;if(E){const le=t[D.id];if(le&&((V=le.generalAssessment)!=null&&V.toLowerCase().includes(w)||le.observations.some(_=>{var M;return(M=_.improvementNotes)==null?void 0:M.toLowerCase().includes(w)})||le.legacyData&&JSON.stringify(le.legacyData).toLowerCase().includes(w))||(Y=D.privateNotes)!=null&&Y.toLowerCase().includes(w))return!0}return!1})},[n,C,E,t]),ae=k.useMemo(()=>{if(P==="none")return{:U};const w={};if(U.forEach(D=>{let V="";if(P==="status")V=D.status==="titulaire"?"":D.status==="contractuel"?"":"";else if(P==="rank")V=D.rank||" ";else if(P==="priority"){const{status:Y}=q(D,t[D.id]);V=Y==="urgent"?"  (> 3 )":Y==="medium"?"  ( )":" "}w[V]||(w[V]=[]),w[V].push(D)}),P==="priority"){const D=["  (> 3 )","  ( )"," "],V={};return D.forEach(Y=>{w[Y]&&(V[Y]=w[Y])}),V}return w},[U,P,t]),se=()=>{const w=S_(),D=new Blob([w],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),V=URL.createObjectURL(D),Y=document.createElement("a");Y.href=V,Y.setAttribute("download","___.xlsx"),document.body.appendChild(Y),Y.click(),document.body.removeChild(Y)},ne=w=>{var Y;const D=(Y=w.target.files)==null?void 0:Y[0];if(!D)return;const V=new FileReader;V.onload=le=>{var M;const _=(M=le.target)==null?void 0:M.result;try{const j=C_(_);if(j.teachers.length>0){const T=`  ${j.teachers.length}   .
     .`;window.confirm(T)&&c(j.teachers,j.reports)}else alert("      .     .")}catch(j){console.error(j),alert("    Excel.    .")}$.current&&($.current.value="")},V.readAsArrayBuffer(D)};return e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsxs("div",{className:"p-3 border-b bg-white/80 backdrop-blur-sm z-10 space-y-2.5 shadow-sm",children:[e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsxs("div",{className:"relative flex-1 group",children:[e.jsx("input",{type:"text",placeholder:E?"   ...":"  ...",value:C,onChange:w=>A(w.target.value),className:`w-full pl-8 pr-8 py-2 border rounded-xl text-sm focus:ring-2 outline-none transition-all placeholder:text-gray-400 ${E?"bg-indigo-50 border-indigo-200 focus:ring-indigo-500":"bg-gray-50 border-gray-200 focus:ring-blue-500 focus:bg-white"}`}),e.jsx(Mb,{className:`absolute left-2.5 top-1/2 -translate-y-1/2 ${E?"text-indigo-400":"text-gray-400"}`,size:16}),e.jsx("button",{onClick:()=>R(!E),className:`absolute right-2 top-1/2 -translate-y-1/2 p-1 rounded-md transition-colors ${E?"bg-indigo-200 text-indigo-700":"text-gray-400 hover:text-gray-600 hover:bg-gray-100"}`,title:E?"  ":"   ( )",children:e.jsx(Gw,{size:14})})]}),e.jsxs("div",{className:"flex bg-gray-100 rounded-xl p-1 gap-1 border border-gray-200",children:[e.jsx("button",{onClick:se,className:"p-1.5 rounded-lg text-gray-500 hover:text-blue-600 hover:bg-white transition-all",title:"  Excel ",children:e.jsx(Ju,{size:18})}),e.jsx("div",{className:"w-px bg-gray-300 my-1"}),e.jsx("button",{onClick:()=>{var w;return(w=$.current)==null?void 0:w.click()},className:"p-1.5 rounded-lg text-green-600 hover:bg-white hover:shadow-sm transition-all",title:"   (Excel)",children:e.jsx(si,{size:18})}),e.jsx("input",{type:"file",ref:$,accept:".xlsx,.xls",className:"hidden",onChange:ne})]}),e.jsx("button",{onClick:o,title:"  ",className:"bg-blue-600 text-white p-2 rounded-xl shadow-lg shadow-blue-200 hover:bg-blue-700 hover:scale-105 transition-all",children:e.jsx(kr,{size:20})})]}),e.jsx("div",{className:"flex items-center justify-between gap-2 overflow-x-auto no-scrollbar pb-1",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>F(!G),className:`p-1.5 px-3 rounded-lg flex items-center gap-1.5 text-xs font-bold transition-all border shrink-0 ${G||m||b?"bg-indigo-50 border-indigo-200 text-indigo-700":"bg-white border-gray-200 text-gray-600 hover:bg-gray-50"}`,children:[e.jsx(Jl,{size:14}),e.jsx("span",{children:""}),(m||b)&&e.jsx("div",{className:"w-1.5 h-1.5 bg-indigo-500 rounded-full animate-pulse"})]}),e.jsxs("div",{className:"flex bg-gray-100/80 p-1 rounded-lg border border-gray-200 shrink-0",children:[e.jsx("button",{onClick:()=>O("none"),className:`px-2 py-0.5 text-[10px] font-bold rounded-md transition-all ${P==="none"?"bg-white text-gray-800 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:""}),e.jsx("button",{onClick:()=>O("status"),className:`px-2 py-0.5 text-[10px] font-bold rounded-md transition-all ${P==="status"?"bg-white text-gray-800 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:""}),e.jsx("button",{onClick:()=>O("priority"),className:`px-2 py-0.5 text-[10px] font-bold rounded-md transition-all ${P==="priority"?"bg-white text-gray-800 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:""})]})]})}),G&&e.jsxs("div",{className:"grid grid-cols-2 gap-2 bg-indigo-50/50 p-2 rounded-xl border border-indigo-100 animate-in slide-in-from-top-2",children:[e.jsxs("div",{className:"relative group",children:[e.jsx(Et,{size:14,className:"absolute top-2.5 right-2.5 text-indigo-400 pointer-events-none group-focus-within:text-indigo-600"}),e.jsxs("select",{value:m,onChange:w=>y(w.target.value),className:`w-full p-2 pr-8 text-[11px] rounded-lg border appearance-none focus:outline-none focus:ring-1 focus:ring-indigo-300 transition-colors cursor-pointer ${m?"bg-indigo-100 border-indigo-300 font-bold text-indigo-900":"bg-white border-gray-200 text-gray-600"}`,children:[e.jsx("option",{value:"",children:" "}),f.map(w=>e.jsx("option",{value:w,children:w},w))]})]}),e.jsxs("div",{className:"relative group",children:[e.jsx(Vt,{size:14,className:"absolute top-2.5 right-2.5 text-indigo-400 pointer-events-none group-focus-within:text-indigo-600"}),e.jsxs("select",{value:b,onChange:w=>N(w.target.value),className:`w-full p-2 pr-8 text-[11px] rounded-lg border appearance-none focus:outline-none focus:ring-1 focus:ring-indigo-300 transition-colors cursor-pointer ${b?"bg-indigo-100 border-indigo-300 font-bold text-indigo-900":"bg-white border-gray-200 text-gray-600"}`,children:[e.jsx("option",{value:"",children:" "}),x.map(w=>e.jsx("option",{value:w,children:w},w))]})]})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-2 space-y-2 bg-gray-50/30 scroll-smooth",children:[Object.keys(ae).length===0&&e.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-gray-400 text-center",children:[e.jsx(vs,{size:48,className:"mb-3 opacity-20"}),e.jsx("p",{className:"text-sm font-medium",children:"  "}),e.jsx("p",{className:"text-xs mt-1 opacity-70",children:E?"      ":"     "})]}),Object.entries(ae).map(([w,D])=>{const V=D;return e.jsxs("div",{className:"mb-2",children:[P!=="none"&&e.jsx("div",{onClick:()=>B(w),className:"flex items-center justify-between px-3 py-1.5 mb-1 cursor-pointer hover:bg-white/80 rounded-lg select-none transition-colors group",children:e.jsxs("div",{className:"flex items-center gap-2",children:[z[w]?e.jsx(vh,{size:14,className:"text-gray-400"}):e.jsx(Hs,{size:14,className:"text-gray-400"}),e.jsx("span",{className:"text-xs font-bold text-gray-600 group-hover:text-gray-900",children:w}),e.jsx("span",{className:"bg-gray-200 text-gray-600 text-[10px] px-1.5 rounded-full min-w-[20px] text-center",children:V.length})]})}),e.jsx("div",{className:`${P!=="none"&&z[w]?"hidden":"block"} space-y-2`,children:V.map(Y=>{const le=Q(Y),_=i===Y.id,{status:M,reason:j}=q(Y,t[Y.id]),T=J(M),L=T.icon;return e.jsxs("div",{onClick:()=>l(Y),className:`w-full text-right p-3 rounded-xl border transition-all flex items-center justify-between gap-3 group cursor-pointer relative overflow-visible shadow-sm
                                        ${_?"bg-gradient-to-r from-blue-600 to-indigo-700 text-white border-transparent shadow-md transform scale-[1.01] z-10":`bg-white hover:border-gray-300 hover:shadow-md ${T.border}`}`,children:[M&&!_&&e.jsxs("div",{className:"absolute -top-10 left-1/2 transform -translate-x-1/2 bg-slate-800 text-white text-[10px] py-1.5 px-3 rounded shadow-lg opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none z-50 whitespace-nowrap border border-slate-600",children:[j,e.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 border-4 border-transparent border-t-slate-800"})]}),M==="urgent"&&!_&&e.jsxs("div",{className:"absolute top-2 left-2 w-2 h-2",children:[e.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-rose-400 opacity-75"}),e.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-rose-500"})]}),e.jsxs("div",{className:"flex items-center gap-3 overflow-hidden flex-1 relative z-10",children:[e.jsxs("div",{className:`w-10 h-10 rounded-full flex items-center justify-center shrink-0 font-bold text-sm transition-colors relative shadow-sm
                                                ${_?"bg-white/20 text-white border border-white/30":"bg-slate-50 text-slate-600 border border-slate-100"}`,children:[Y.fullName.charAt(0),e.jsx("div",{className:`absolute -bottom-0.5 -right-0.5 w-3.5 h-3.5 rounded-full border-2 border-white flex items-center justify-center
                                                ${Y.status==="titulaire"?"bg-emerald-500":Y.status==="contractuel"?"bg-orange-500":"bg-blue-500"}`})]}),e.jsxs("div",{className:"overflow-hidden flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-0.5",children:[e.jsx("p",{className:`font-bold text-sm truncate ${_?"text-white":"text-gray-800"}`,children:Y.fullName}),E&&e.jsx("span",{className:"text-[9px] bg-indigo-100 text-indigo-700 px-1.5 rounded-full shrink-0",children:" "})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[!_&&T.label&&e.jsxs("div",{className:`flex items-center gap-1 px-1.5 py-0.5 rounded text-[9px] font-bold border ${T.badgeColor}`,children:[L&&e.jsx(L,{size:9}),e.jsx("span",{children:T.label})]}),e.jsx("p",{className:`text-[10px] truncate ${_?"text-blue-100":"text-gray-400"}`,children:Y.rank})]})]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-1 relative z-10",children:[le&&e.jsx("div",{title:" ",children:e.jsx(yh,{size:16,className:`${_?"text-yellow-300":"text-amber-500"} animate-pulse`})}),e.jsx("button",{onClick:H=>{H.stopPropagation(),u(Y.id)},className:`p-1.5 rounded-full transition-all mt-1
                                                ${_?"text-red-200 hover:bg-white/20 hover:text-white":"text-gray-300 hover:bg-red-50 hover:text-red-500 opacity-0 group-hover:opacity-100"}`,title:"",children:e.jsx(fl,{size:14})})]})]},Y.id)})})]},w)})]})]})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let E_,T_;function A_(){return{geminiUrl:E_,vertexUrl:T_}}function M_(n,t,l,i){var o,c;if(!(n!=null&&n.baseUrl)){const u=A_();return t?(o=u.vertexUrl)!==null&&o!==void 0?o:l:(c=u.geminiUrl)!==null&&c!==void 0?c:i}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Mn{}function _e(n,t){const l=/\{([^}]+)\}/g;return n.replace(l,(i,o)=>{if(Object.prototype.hasOwnProperty.call(t,o)){const c=t[o];return c!=null?String(c):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function p(n,t,l){for(let c=0;c<t.length-1;c++){const u=t[c];if(u.endsWith("[]")){const f=u.slice(0,-2);if(!(f in n))if(Array.isArray(l))n[f]=Array.from({length:l.length},()=>({}));else throw new Error(`Value must be a list given an array path ${u}`);if(Array.isArray(n[f])){const x=n[f];if(Array.isArray(l))for(let m=0;m<x.length;m++){const b=x[m];p(b,t.slice(c+1),l[m])}else for(const m of x)p(m,t.slice(c+1),l)}return}else if(u.endsWith("[0]")){const f=u.slice(0,-3);f in n||(n[f]=[{}]);const x=n[f];p(x[0],t.slice(c+1),l);return}(!n[u]||typeof n[u]!="object")&&(n[u]={}),n=n[u]}const i=t[t.length-1],o=n[i];if(o!==void 0){if(!l||typeof l=="object"&&Object.keys(l).length===0||l===o)return;if(typeof o=="object"&&typeof l=="object"&&o!==null&&l!==null)Object.assign(o,l);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof l=="object"&&l!==null&&!Array.isArray(l)?Object.assign(n,l):n[i]=l}function h(n,t,l=void 0){try{if(t.length===1&&t[0]==="_self")return n;for(let i=0;i<t.length;i++){if(typeof n!="object"||n===null)return l;const o=t[i];if(o.endsWith("[]")){const c=o.slice(0,-2);if(c in n){const u=n[c];return Array.isArray(u)?u.map(f=>h(f,t.slice(i+1),l)):l}else return l}else n=n[o]}return n}catch(i){if(i instanceof TypeError)return l;throw i}}function D_(n,t){for(const[l,i]of Object.entries(t)){const o=l.split("."),c=i.split("."),u=new Set;let f=-1;for(let x=0;x<o.length;x++)if(o[x]==="*"){f=x;break}if(f!==-1&&c.length>f)for(let x=f;x<c.length;x++){const m=c[x];m!=="*"&&!m.endsWith("[]")&&!m.endsWith("[0]")&&u.add(m)}eh(n,o,c,0,u)}}function eh(n,t,l,i,o){if(i>=t.length||typeof n!="object"||n===null)return;const c=t[i];if(c.endsWith("[]")){const u=c.slice(0,-2),f=n;if(u in f&&Array.isArray(f[u]))for(const x of f[u])eh(x,t,l,i+1,o)}else if(c==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const u=n,f=Object.keys(u).filter(m=>!m.startsWith("_")&&!o.has(m)),x={};for(const m of f)x[m]=u[m];for(const[m,b]of Object.entries(x)){const y=[];for(const N of l.slice(i))N==="*"?y.push(m):y.push(N);p(u,y,b)}for(const m of f)delete u[m]}}else{const u=n;c in u&&eh(u[c],t,l,i+1,o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ch(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function R_(n){const t={},l=h(n,["operationName"]);l!=null&&p(t,["operationName"],l);const i=h(n,["resourceName"]);return i!=null&&p(t,["_url","resourceName"],i),t}function I_(n){const t={},l=h(n,["name"]);l!=null&&p(t,["name"],l);const i=h(n,["metadata"]);i!=null&&p(t,["metadata"],i);const o=h(n,["done"]);o!=null&&p(t,["done"],o);const c=h(n,["error"]);c!=null&&p(t,["error"],c);const u=h(n,["response","generateVideoResponse"]);return u!=null&&p(t,["response"],L_(u)),t}function z_(n){const t={},l=h(n,["name"]);l!=null&&p(t,["name"],l);const i=h(n,["metadata"]);i!=null&&p(t,["metadata"],i);const o=h(n,["done"]);o!=null&&p(t,["done"],o);const c=h(n,["error"]);c!=null&&p(t,["error"],c);const u=h(n,["response"]);return u!=null&&p(t,["response"],U_(u)),t}function L_(n){const t={},l=h(n,["generatedSamples"]);if(l!=null){let c=l;Array.isArray(c)&&(c=c.map(u=>P_(u))),p(t,["generatedVideos"],c)}const i=h(n,["raiMediaFilteredCount"]);i!=null&&p(t,["raiMediaFilteredCount"],i);const o=h(n,["raiMediaFilteredReasons"]);return o!=null&&p(t,["raiMediaFilteredReasons"],o),t}function U_(n){const t={},l=h(n,["videos"]);if(l!=null){let c=l;Array.isArray(c)&&(c=c.map(u=>$_(u))),p(t,["generatedVideos"],c)}const i=h(n,["raiMediaFilteredCount"]);i!=null&&p(t,["raiMediaFilteredCount"],i);const o=h(n,["raiMediaFilteredReasons"]);return o!=null&&p(t,["raiMediaFilteredReasons"],o),t}function P_(n){const t={},l=h(n,["video"]);return l!=null&&p(t,["video"],V_(l)),t}function $_(n){const t={},l=h(n,["_self"]);return l!=null&&p(t,["video"],F_(l)),t}function q_(n){const t={},l=h(n,["operationName"]);return l!=null&&p(t,["_url","operationName"],l),t}function O_(n){const t={},l=h(n,["operationName"]);return l!=null&&p(t,["_url","operationName"],l),t}function G_(n){const t={},l=h(n,["name"]);l!=null&&p(t,["name"],l);const i=h(n,["metadata"]);i!=null&&p(t,["metadata"],i);const o=h(n,["done"]);o!=null&&p(t,["done"],o);const c=h(n,["error"]);c!=null&&p(t,["error"],c);const u=h(n,["response"]);return u!=null&&p(t,["response"],H_(u)),t}function H_(n){const t={},l=h(n,["sdkHttpResponse"]);l!=null&&p(t,["sdkHttpResponse"],l);const i=h(n,["parent"]);i!=null&&p(t,["parent"],i);const o=h(n,["documentName"]);return o!=null&&p(t,["documentName"],o),t}function $b(n){const t={},l=h(n,["name"]);l!=null&&p(t,["name"],l);const i=h(n,["metadata"]);i!=null&&p(t,["metadata"],i);const o=h(n,["done"]);o!=null&&p(t,["done"],o);const c=h(n,["error"]);c!=null&&p(t,["error"],c);const u=h(n,["response"]);return u!=null&&p(t,["response"],B_(u)),t}function B_(n){const t={},l=h(n,["sdkHttpResponse"]);l!=null&&p(t,["sdkHttpResponse"],l);const i=h(n,["parent"]);i!=null&&p(t,["parent"],i);const o=h(n,["documentName"]);return o!=null&&p(t,["documentName"],o),t}function V_(n){const t={},l=h(n,["uri"]);l!=null&&p(t,["uri"],l);const i=h(n,["encodedVideo"]);i!=null&&p(t,["videoBytes"],Ch(i));const o=h(n,["encoding"]);return o!=null&&p(t,["mimeType"],o),t}function F_(n){const t={},l=h(n,["gcsUri"]);l!=null&&p(t,["uri"],l);const i=h(n,["bytesBase64Encoded"]);i!=null&&p(t,["videoBytes"],Ch(i));const o=h(n,["mimeType"]);return o!=null&&p(t,["mimeType"],o),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var lp;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(lp||(lp={}));var ap;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(ap||(ap={}));var ip;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(ip||(ip={}));var cl;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(cl||(cl={}));var rp;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(rp||(rp={}));var op;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(op||(op={}));var cp;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(cp||(cp={}));var dp;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(dp||(dp={}));var up;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(up||(up={}));var hp;(function(n){n.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",n.LOW="LOW",n.HIGH="HIGH"})(hp||(hp={}));var fp;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(fp||(fp={}));var xp;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(xp||(xp={}));var mp;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(mp||(mp={}));var pp;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE"})(pp||(pp={}));var gp;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(gp||(gp={}));var bp;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(bp||(bp={}));var vp;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(vp||(vp={}));var yp;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(yp||(yp={}));var Np;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Np||(Np={}));var rc;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(rc||(rc={}));var jp;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(jp||(jp={}));var wp;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(wp||(wp={}));var _p;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(_p||(_p={}));var th;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(th||(th={}));var Sp;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(Sp||(Sp={}));var Cp;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Cp||(Cp={}));var kp;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(kp||(kp={}));var Ep;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(Ep||(Ep={}));var Tp;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(Tp||(Tp={}));var Ap;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Ap||(Ap={}));var Mp;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(Mp||(Mp={}));var Dp;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(Dp||(Dp={}));var Rp;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(Rp||(Rp={}));var Ip;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(Ip||(Ip={}));var zp;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(zp||(zp={}));var Lp;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Lp||(Lp={}));var Up;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Up||(Up={}));var Pp;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Pp||(Pp={}));var $p;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})($p||($p={}));var qp;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(qp||(qp={}));var Op;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(Op||(Op={}));var Gp;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(Gp||(Gp={}));var Hp;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING"})(Hp||(Hp={}));var Bp;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(Bp||(Bp={}));var Vp;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(Vp||(Vp={}));var Fp;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(Fp||(Fp={}));var Jp;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(Jp||(Jp={}));var Yp;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(Yp||(Yp={}));var Kp;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Kp||(Kp={}));var Qp;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Qp||(Qp={}));var Xp;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(Xp||(Xp={}));var Zp;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Zp||(Zp={}));var Wp;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Wp||(Wp={}));var eg;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(eg||(eg={}));var Qa;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(Qa||(Qa={}));class sh{constructor(t){const l={};for(const i of t.headers.entries())l[i[0]]=i[1];this.headers=l,this.responseInternal=t}json(){return this.responseInternal.json()}}class cr{get text(){var t,l,i,o,c,u,f,x;if(((o=(i=(l=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||l===void 0?void 0:l.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let m="",b=!1;const y=[];for(const N of(x=(f=(u=(c=this.candidates)===null||c===void 0?void 0:c[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)!==null&&x!==void 0?x:[]){for(const[C,A]of Object.entries(N))C!=="text"&&C!=="thought"&&C!=="thoughtSignature"&&(A!==null||A!==void 0)&&y.push(C);if(typeof N.text=="string"){if(typeof N.thought=="boolean"&&N.thought)continue;b=!0,m+=N.text}}return y.length>0&&console.warn(`there are non-text parts ${y} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),b?m:void 0}get data(){var t,l,i,o,c,u,f,x;if(((o=(i=(l=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||l===void 0?void 0:l.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let m="";const b=[];for(const y of(x=(f=(u=(c=this.candidates)===null||c===void 0?void 0:c[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)!==null&&x!==void 0?x:[]){for(const[N,C]of Object.entries(y))N!=="inlineData"&&(C!==null||C!==void 0)&&b.push(N);y.inlineData&&typeof y.inlineData.data=="string"&&(m+=atob(y.inlineData.data))}return b.length>0&&console.warn(`there are non-data parts ${b} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),m.length>0?btoa(m):void 0}get functionCalls(){var t,l,i,o,c,u,f,x;if(((o=(i=(l=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||l===void 0?void 0:l.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const m=(x=(f=(u=(c=this.candidates)===null||c===void 0?void 0:c[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)===null||x===void 0?void 0:x.filter(b=>b.functionCall).map(b=>b.functionCall).filter(b=>b!==void 0);if((m==null?void 0:m.length)!==0)return m}get executableCode(){var t,l,i,o,c,u,f,x,m;if(((o=(i=(l=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||l===void 0?void 0:l.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const b=(x=(f=(u=(c=this.candidates)===null||c===void 0?void 0:c[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)===null||x===void 0?void 0:x.filter(y=>y.executableCode).map(y=>y.executableCode).filter(y=>y!==void 0);if((b==null?void 0:b.length)!==0)return(m=b==null?void 0:b[0])===null||m===void 0?void 0:m.code}get codeExecutionResult(){var t,l,i,o,c,u,f,x,m;if(((o=(i=(l=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||l===void 0?void 0:l.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const b=(x=(f=(u=(c=this.candidates)===null||c===void 0?void 0:c[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)===null||x===void 0?void 0:x.filter(y=>y.codeExecutionResult).map(y=>y.codeExecutionResult).filter(y=>y!==void 0);if((b==null?void 0:b.length)!==0)return(m=b==null?void 0:b[0])===null||m===void 0?void 0:m.output}}class tg{}class sg{}class J_{}class Y_{}class K_{}class Q_{}class ng{}class lg{}class ag{}class X_{}class oc{_fromAPIResponse({apiResponse:t,_isVertexAI:l}){const i=new oc;let o;const c=t;return l?o=z_(c):o=I_(c),Object.assign(i,o),i}}class ig{}class rg{}class og{}class Z_{}class W_{}class e5{}class kh{_fromAPIResponse({apiResponse:t,_isVertexAI:l}){const i=new kh,c=G_(t);return Object.assign(i,c),i}}class t5{}class s5{}class n5{}class cg{}class l5{get text(){var t,l,i;let o="",c=!1;const u=[];for(const f of(i=(l=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||l===void 0?void 0:l.parts)!==null&&i!==void 0?i:[]){for(const[x,m]of Object.entries(f))x!=="text"&&x!=="thought"&&m!==null&&u.push(x);if(typeof f.text=="string"){if(typeof f.thought=="boolean"&&f.thought)continue;c=!0,o+=f.text}}return u.length>0&&console.warn(`there are non-text parts ${u} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),c?o:void 0}get data(){var t,l,i;let o="";const c=[];for(const u of(i=(l=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||l===void 0?void 0:l.parts)!==null&&i!==void 0?i:[]){for(const[f,x]of Object.entries(u))f!=="inlineData"&&x!==null&&c.push(f);u.inlineData&&typeof u.inlineData.data=="string"&&(o+=atob(u.inlineData.data))}return c.length>0&&console.warn(`there are non-data parts ${c} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}}class a5{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Eh{_fromAPIResponse({apiResponse:t,_isVertexAI:l}){const i=new Eh,c=$b(t);return Object.assign(i,c),i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ke(n,t){if(!t||typeof t!="string")throw new Error("model is required and must be a string");if(t.includes("..")||t.includes("?")||t.includes("&"))throw new Error("invalid model parameter");if(n.isVertexAI()){if(t.startsWith("publishers/")||t.startsWith("projects/")||t.startsWith("models/"))return t;if(t.indexOf("/")>=0){const l=t.split("/",2);return`publishers/${l[0]}/models/${l[1]}`}else return`publishers/google/models/${t}`}else return t.startsWith("models/")||t.startsWith("tunedModels/")?t:`models/${t}`}function qb(n,t){const l=Ke(n,t);return l?l.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${l}`:l.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${l}`:l:""}function Ob(n){return Array.isArray(n)?n.map(t=>cc(t)):[cc(n)]}function cc(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function Gb(n){const t=cc(n);if(t.mimeType&&t.mimeType.startsWith("image/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function Hb(n){const t=cc(n);if(t.mimeType&&t.mimeType.startsWith("audio/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function dg(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function Bb(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(t=>dg(t)):[dg(n)]}function nh(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function ug(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function hg(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function Kt(n){if(n==null)throw new Error("ContentUnion is required");return nh(n)?n:{role:"user",parts:Bb(n)}}function Th(n,t){if(!t)return[];if(n.isVertexAI()&&Array.isArray(t))return t.flatMap(l=>{const i=Kt(l);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(n.isVertexAI()){const l=Kt(t);return l.parts&&l.parts.length>0&&l.parts[0].text!==void 0?[l.parts[0].text]:[]}return Array.isArray(t)?t.map(l=>Kt(l)):[Kt(t)]}function Rs(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(ug(n)||hg(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Kt(n)]}const t=[],l=[],i=nh(n[0]);for(const o of n){const c=nh(o);if(c!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(c)t.push(o);else{if(ug(o)||hg(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");l.push(o)}}return i||t.push({role:"user",parts:Bb(l)}),t}function i5(n,t){n.includes("null")&&(t.nullable=!0);const l=n.filter(i=>i!=="null");if(l.length===1)t.type=Object.values(cl).includes(l[0].toUpperCase())?l[0].toUpperCase():cl.TYPE_UNSPECIFIED;else{t.anyOf=[];for(const i of l)t.anyOf.push({type:Object.values(cl).includes(i.toUpperCase())?i.toUpperCase():cl.TYPE_UNSPECIFIED})}}function Za(n){const t={},l=["items"],i=["anyOf"],o=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const c=n.anyOf;c!=null&&c.length==2&&(c[0].type==="null"?(t.nullable=!0,n=c[1]):c[1].type==="null"&&(t.nullable=!0,n=c[0])),n.type instanceof Array&&i5(n.type,t);for(const[u,f]of Object.entries(n))if(f!=null)if(u=="type"){if(f==="null")throw new Error("type: null can not be the only possible type for the field.");if(f instanceof Array)continue;t.type=Object.values(cl).includes(f.toUpperCase())?f.toUpperCase():cl.TYPE_UNSPECIFIED}else if(l.includes(u))t[u]=Za(f);else if(i.includes(u)){const x=[];for(const m of f){if(m.type=="null"){t.nullable=!0;continue}x.push(Za(m))}t[u]=x}else if(o.includes(u)){const x={};for(const[m,b]of Object.entries(f))x[m]=Za(b);t[u]=x}else{if(u==="additionalProperties")continue;t[u]=f}return t}function Ah(n){return Za(n)}function Mh(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function Dh(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function ui(n){if(n.functionDeclarations)for(const t of n.functionDeclarations)t.parameters&&(Object.keys(t.parameters).includes("$schema")?t.parametersJsonSchema||(t.parametersJsonSchema=t.parameters,delete t.parameters):t.parameters=Za(t.parameters)),t.response&&(Object.keys(t.response).includes("$schema")?t.responseJsonSchema||(t.responseJsonSchema=t.response,delete t.response):t.response=Za(t.response));return n}function hi(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const t=[];for(const l of n)t.push(l);return t}function r5(n,t,l,i=1){const o=!t.startsWith(`${l}/`)&&t.split("/").length===i;return n.isVertexAI()?t.startsWith("projects/")?t:t.startsWith("locations/")?`projects/${n.getProject()}/${t}`:t.startsWith(`${l}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:o?`projects/${n.getProject()}/locations/${n.getLocation()}/${l}/${t}`:t:o?`${l}/${t}`:t}function Dn(n,t){if(typeof t!="string")throw new Error("name must be a string");return r5(n,t,"cachedContents")}function Vb(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function xl(n){return Ch(n)}function o5(n){return n!=null&&typeof n=="object"&&"name"in n}function c5(n){return n!=null&&typeof n=="object"&&"video"in n}function d5(n){return n!=null&&typeof n=="object"&&"uri"in n}function Fb(n){var t;let l;if(o5(n)&&(l=n.name),!(d5(n)&&(l=n.uri,l===void 0))&&!(c5(n)&&(l=(t=n.video)===null||t===void 0?void 0:t.uri,l===void 0))){if(typeof n=="string"&&(l=n),l===void 0)throw new Error("Could not extract file name from the provided input.");if(l.startsWith("https://")){const o=l.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${l}`);l=o[0]}else l.startsWith("files/")&&(l=l.split("files/")[1]);return l}}function Jb(n,t){let l;return n.isVertexAI()?l=t?"publishers/google/models":"models":l=t?"models":"tunedModels",l}function Yb(n){for(const t of["models","tunedModels","publisherModels"])if(u5(n,t))return n[t];return[]}function u5(n,t){return n!==null&&typeof n=="object"&&t in n}function h5(n,t={}){const l=n,i={name:l.name,description:l.description,parametersJsonSchema:l.inputSchema};return l.outputSchema&&(i.responseJsonSchema=l.outputSchema),t.behavior&&(i.behavior=t.behavior),{functionDeclarations:[i]}}function f5(n,t={}){const l=[],i=new Set;for(const o of n){const c=o.name;if(i.has(c))throw new Error(`Duplicate function name ${c} found in MCP tools. Please ensure function names are unique.`);i.add(c);const u=h5(o,t);u.functionDeclarations&&l.push(...u.functionDeclarations)}return{functionDeclarations:l}}function Kb(n,t){let l;if(typeof t=="string")if(n.isVertexAI())if(t.startsWith("gs://"))l={format:"jsonl",gcsUri:[t]};else if(t.startsWith("bq://"))l={format:"bigquery",bigqueryUri:t};else throw new Error(`Unsupported string source for Vertex AI: ${t}`);else if(t.startsWith("files/"))l={fileName:t};else throw new Error(`Unsupported string source for Gemini API: ${t}`);else if(Array.isArray(t)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");l={inlinedRequests:t}}else l=t;const i=[l.gcsUri,l.bigqueryUri].filter(Boolean).length,o=[l.inlinedRequests,l.fileName].filter(Boolean).length;if(n.isVertexAI()){if(o>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||o!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return l}function x5(n){if(typeof n!="string")return n;const t=n;if(t.startsWith("gs://"))return{format:"jsonl",gcsUri:t};if(t.startsWith("bq://"))return{format:"bigquery",bigqueryUri:t};throw new Error(`Unsupported destination: ${t}`)}function Qb(n){if(typeof n!="object"||n===null)return{};const t=n,l=t.inlinedResponses;if(typeof l!="object"||l===null)return n;const o=l.inlinedResponses;if(!Array.isArray(o)||o.length===0)return n;let c=!1;for(const u of o){if(typeof u!="object"||u===null)continue;const x=u.response;if(typeof x!="object"||x===null)continue;if(x.embedding!==void 0){c=!0;break}}return c&&(t.inlinedEmbedContentResponses=t.inlinedResponses,delete t.inlinedResponses),n}function fi(n,t){const l=t;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(l))return l.split("/").pop();throw new Error(`Invalid batch job name: ${l}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(l))return l.split("/").pop();if(/^\d+$/.test(l))return l;throw new Error(`Invalid batch job name: ${l}.`)}function Xb(n){const t=n;return t==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":t==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":t==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":t==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":t==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":t==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":t==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function m5(n){const t={},l=h(n,["responsesFile"]);l!=null&&p(t,["fileName"],l);const i=h(n,["inlinedResponses","inlinedResponses"]);if(i!=null){let c=i;Array.isArray(c)&&(c=c.map(u=>K5(u))),p(t,["inlinedResponses"],c)}const o=h(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(u=>u)),p(t,["inlinedEmbedContentResponses"],c)}return t}function p5(n){const t={},l=h(n,["predictionsFormat"]);l!=null&&p(t,["format"],l);const i=h(n,["gcsDestination","outputUriPrefix"]);i!=null&&p(t,["gcsUri"],i);const o=h(n,["bigqueryDestination","outputUri"]);return o!=null&&p(t,["bigqueryUri"],o),t}function g5(n){const t={},l=h(n,["format"]);l!=null&&p(t,["predictionsFormat"],l);const i=h(n,["gcsUri"]);i!=null&&p(t,["gcsDestination","outputUriPrefix"],i);const o=h(n,["bigqueryUri"]);if(o!=null&&p(t,["bigqueryDestination","outputUri"],o),h(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(h(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(h(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return t}function Ko(n){const t={},l=h(n,["name"]);l!=null&&p(t,["name"],l);const i=h(n,["metadata","displayName"]);i!=null&&p(t,["displayName"],i);const o=h(n,["metadata","state"]);o!=null&&p(t,["state"],Xb(o));const c=h(n,["metadata","createTime"]);c!=null&&p(t,["createTime"],c);const u=h(n,["metadata","endTime"]);u!=null&&p(t,["endTime"],u);const f=h(n,["metadata","updateTime"]);f!=null&&p(t,["updateTime"],f);const x=h(n,["metadata","model"]);x!=null&&p(t,["model"],x);const m=h(n,["metadata","output"]);return m!=null&&p(t,["dest"],m5(Qb(m))),t}function lh(n){const t={},l=h(n,["name"]);l!=null&&p(t,["name"],l);const i=h(n,["displayName"]);i!=null&&p(t,["displayName"],i);const o=h(n,["state"]);o!=null&&p(t,["state"],Xb(o));const c=h(n,["error"]);c!=null&&p(t,["error"],c);const u=h(n,["createTime"]);u!=null&&p(t,["createTime"],u);const f=h(n,["startTime"]);f!=null&&p(t,["startTime"],f);const x=h(n,["endTime"]);x!=null&&p(t,["endTime"],x);const m=h(n,["updateTime"]);m!=null&&p(t,["updateTime"],m);const b=h(n,["model"]);b!=null&&p(t,["model"],b);const y=h(n,["inputConfig"]);y!=null&&p(t,["src"],b5(y));const N=h(n,["outputConfig"]);N!=null&&p(t,["dest"],p5(Qb(N)));const C=h(n,["completionStats"]);return C!=null&&p(t,["completionStats"],C),t}function b5(n){const t={},l=h(n,["instancesFormat"]);l!=null&&p(t,["format"],l);const i=h(n,["gcsSource","uris"]);i!=null&&p(t,["gcsUri"],i);const o=h(n,["bigquerySource","inputUri"]);return o!=null&&p(t,["bigqueryUri"],o),t}function v5(n,t){const l={};if(h(t,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(h(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(h(t,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=h(t,["fileName"]);i!=null&&p(l,["fileName"],i);const o=h(t,["inlinedRequests"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(u=>Y5(n,u))),p(l,["requests","requests"],c)}return l}function y5(n){const t={},l=h(n,["format"]);l!=null&&p(t,["instancesFormat"],l);const i=h(n,["gcsUri"]);i!=null&&p(t,["gcsSource","uris"],i);const o=h(n,["bigqueryUri"]);if(o!=null&&p(t,["bigquerySource","inputUri"],o),h(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(h(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return t}function N5(n){const t={},l=h(n,["data"]);if(l!=null&&p(t,["data"],l),h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=h(n,["mimeType"]);return i!=null&&p(t,["mimeType"],i),t}function j5(n,t){const l={},i=h(t,["name"]);return i!=null&&p(l,["_url","name"],fi(n,i)),l}function w5(n,t){const l={},i=h(t,["name"]);return i!=null&&p(l,["_url","name"],fi(n,i)),l}function _5(n){const t={},l=h(n,["content"]);l!=null&&p(t,["content"],l);const i=h(n,["citationMetadata"]);i!=null&&p(t,["citationMetadata"],S5(i));const o=h(n,["tokenCount"]);o!=null&&p(t,["tokenCount"],o);const c=h(n,["finishReason"]);c!=null&&p(t,["finishReason"],c);const u=h(n,["avgLogprobs"]);u!=null&&p(t,["avgLogprobs"],u);const f=h(n,["groundingMetadata"]);f!=null&&p(t,["groundingMetadata"],f);const x=h(n,["index"]);x!=null&&p(t,["index"],x);const m=h(n,["logprobsResult"]);m!=null&&p(t,["logprobsResult"],m);const b=h(n,["safetyRatings"]);if(b!=null){let N=b;Array.isArray(N)&&(N=N.map(C=>C)),p(t,["safetyRatings"],N)}const y=h(n,["urlContextMetadata"]);return y!=null&&p(t,["urlContextMetadata"],y),t}function S5(n){const t={},l=h(n,["citationSources"]);if(l!=null){let i=l;Array.isArray(i)&&(i=i.map(o=>o)),p(t,["citations"],i)}return t}function Zb(n){const t={},l=h(n,["parts"]);if(l!=null){let o=l;Array.isArray(o)&&(o=o.map(c=>sS(c))),p(t,["parts"],o)}const i=h(n,["role"]);return i!=null&&p(t,["role"],i),t}function C5(n,t){const l={},i=h(n,["displayName"]);if(t!==void 0&&i!=null&&p(t,["batch","displayName"],i),h(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return l}function k5(n,t){const l={},i=h(n,["displayName"]);t!==void 0&&i!=null&&p(t,["displayName"],i);const o=h(n,["dest"]);return t!==void 0&&o!=null&&p(t,["outputConfig"],g5(x5(o))),l}function fg(n,t){const l={},i=h(t,["model"]);i!=null&&p(l,["_url","model"],Ke(n,i));const o=h(t,["src"]);o!=null&&p(l,["batch","inputConfig"],v5(n,Kb(n,o)));const c=h(t,["config"]);return c!=null&&C5(c,l),l}function E5(n,t){const l={},i=h(t,["model"]);i!=null&&p(l,["model"],Ke(n,i));const o=h(t,["src"]);o!=null&&p(l,["inputConfig"],y5(Kb(n,o)));const c=h(t,["config"]);return c!=null&&k5(c,l),l}function T5(n,t){const l={},i=h(n,["displayName"]);return t!==void 0&&i!=null&&p(t,["batch","displayName"],i),l}function A5(n,t){const l={},i=h(t,["model"]);i!=null&&p(l,["_url","model"],Ke(n,i));const o=h(t,["src"]);o!=null&&p(l,["batch","inputConfig"],U5(n,o));const c=h(t,["config"]);return c!=null&&T5(c,l),l}function M5(n,t){const l={},i=h(t,["name"]);return i!=null&&p(l,["_url","name"],fi(n,i)),l}function D5(n,t){const l={},i=h(t,["name"]);return i!=null&&p(l,["_url","name"],fi(n,i)),l}function R5(n){const t={},l=h(n,["sdkHttpResponse"]);l!=null&&p(t,["sdkHttpResponse"],l);const i=h(n,["name"]);i!=null&&p(t,["name"],i);const o=h(n,["done"]);o!=null&&p(t,["done"],o);const c=h(n,["error"]);return c!=null&&p(t,["error"],c),t}function I5(n){const t={},l=h(n,["sdkHttpResponse"]);l!=null&&p(t,["sdkHttpResponse"],l);const i=h(n,["name"]);i!=null&&p(t,["name"],i);const o=h(n,["done"]);o!=null&&p(t,["done"],o);const c=h(n,["error"]);return c!=null&&p(t,["error"],c),t}function z5(n,t){const l={},i=h(t,["contents"]);if(i!=null){let c=Th(n,i);Array.isArray(c)&&(c=c.map(u=>u)),p(l,["requests[]","request","content"],c)}const o=h(t,["config"]);return o!=null&&(p(l,["_self"],L5(o,l)),D_(l,{"requests[].*":"requests[].request.*"})),l}function L5(n,t){const l={},i=h(n,["taskType"]);t!==void 0&&i!=null&&p(t,["requests[]","taskType"],i);const o=h(n,["title"]);t!==void 0&&o!=null&&p(t,["requests[]","title"],o);const c=h(n,["outputDimensionality"]);if(t!==void 0&&c!=null&&p(t,["requests[]","outputDimensionality"],c),h(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(h(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return l}function U5(n,t){const l={},i=h(t,["fileName"]);i!=null&&p(l,["file_name"],i);const o=h(t,["inlinedRequests"]);return o!=null&&p(l,["requests"],z5(n,o)),l}function P5(n){const t={};if(h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const l=h(n,["fileUri"]);l!=null&&p(t,["fileUri"],l);const i=h(n,["mimeType"]);return i!=null&&p(t,["mimeType"],i),t}function $5(n){const t={},l=h(n,["id"]);l!=null&&p(t,["id"],l);const i=h(n,["args"]);i!=null&&p(t,["args"],i);const o=h(n,["name"]);if(o!=null&&p(t,["name"],o),h(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(h(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function q5(n){const t={},l=h(n,["mode"]);l!=null&&p(t,["mode"],l);const i=h(n,["allowedFunctionNames"]);if(i!=null&&p(t,["allowedFunctionNames"],i),h(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function O5(n,t,l){const i={},o=h(t,["systemInstruction"]);l!==void 0&&o!=null&&p(l,["systemInstruction"],Zb(Kt(o)));const c=h(t,["temperature"]);c!=null&&p(i,["temperature"],c);const u=h(t,["topP"]);u!=null&&p(i,["topP"],u);const f=h(t,["topK"]);f!=null&&p(i,["topK"],f);const x=h(t,["candidateCount"]);x!=null&&p(i,["candidateCount"],x);const m=h(t,["maxOutputTokens"]);m!=null&&p(i,["maxOutputTokens"],m);const b=h(t,["stopSequences"]);b!=null&&p(i,["stopSequences"],b);const y=h(t,["responseLogprobs"]);y!=null&&p(i,["responseLogprobs"],y);const N=h(t,["logprobs"]);N!=null&&p(i,["logprobs"],N);const C=h(t,["presencePenalty"]);C!=null&&p(i,["presencePenalty"],C);const A=h(t,["frequencyPenalty"]);A!=null&&p(i,["frequencyPenalty"],A);const E=h(t,["seed"]);E!=null&&p(i,["seed"],E);const R=h(t,["responseMimeType"]);R!=null&&p(i,["responseMimeType"],R);const P=h(t,["responseSchema"]);P!=null&&p(i,["responseSchema"],Ah(P));const O=h(t,["responseJsonSchema"]);if(O!=null&&p(i,["responseJsonSchema"],O),h(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(h(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const z=h(t,["safetySettings"]);if(l!==void 0&&z!=null){let U=z;Array.isArray(U)&&(U=U.map(ae=>nS(ae))),p(l,["safetySettings"],U)}const K=h(t,["tools"]);if(l!==void 0&&K!=null){let U=hi(K);Array.isArray(U)&&(U=U.map(ae=>aS(ui(ae)))),p(l,["tools"],U)}const G=h(t,["toolConfig"]);if(l!==void 0&&G!=null&&p(l,["toolConfig"],lS(G)),h(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const F=h(t,["cachedContent"]);l!==void 0&&F!=null&&p(l,["cachedContent"],Dn(n,F));const $=h(t,["responseModalities"]);$!=null&&p(i,["responseModalities"],$);const B=h(t,["mediaResolution"]);B!=null&&p(i,["mediaResolution"],B);const q=h(t,["speechConfig"]);if(q!=null&&p(i,["speechConfig"],Mh(q)),h(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const J=h(t,["thinkingConfig"]);J!=null&&p(i,["thinkingConfig"],J);const Q=h(t,["imageConfig"]);return Q!=null&&p(i,["imageConfig"],J5(Q)),i}function G5(n){const t={},l=h(n,["sdkHttpResponse"]);l!=null&&p(t,["sdkHttpResponse"],l);const i=h(n,["candidates"]);if(i!=null){let x=i;Array.isArray(x)&&(x=x.map(m=>_5(m))),p(t,["candidates"],x)}const o=h(n,["modelVersion"]);o!=null&&p(t,["modelVersion"],o);const c=h(n,["promptFeedback"]);c!=null&&p(t,["promptFeedback"],c);const u=h(n,["responseId"]);u!=null&&p(t,["responseId"],u);const f=h(n,["usageMetadata"]);return f!=null&&p(t,["usageMetadata"],f),t}function H5(n,t){const l={},i=h(t,["name"]);return i!=null&&p(l,["_url","name"],fi(n,i)),l}function B5(n,t){const l={},i=h(t,["name"]);return i!=null&&p(l,["_url","name"],fi(n,i)),l}function V5(n){const t={};if(h(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const l=h(n,["enableWidget"]);return l!=null&&p(t,["enableWidget"],l),t}function F5(n){const t={};if(h(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(h(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const l=h(n,["timeRangeFilter"]);return l!=null&&p(t,["timeRangeFilter"],l),t}function J5(n){const t={},l=h(n,["aspectRatio"]);l!=null&&p(t,["aspectRatio"],l);const i=h(n,["imageSize"]);if(i!=null&&p(t,["imageSize"],i),h(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(h(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function Y5(n,t){const l={},i=h(t,["model"]);i!=null&&p(l,["request","model"],Ke(n,i));const o=h(t,["contents"]);if(o!=null){let f=Rs(o);Array.isArray(f)&&(f=f.map(x=>Zb(x))),p(l,["request","contents"],f)}const c=h(t,["metadata"]);c!=null&&p(l,["metadata"],c);const u=h(t,["config"]);return u!=null&&p(l,["request","generationConfig"],O5(n,u,h(l,["request"],{}))),l}function K5(n){const t={},l=h(n,["response"]);l!=null&&p(t,["response"],G5(l));const i=h(n,["error"]);return i!=null&&p(t,["error"],i),t}function Q5(n,t){const l={},i=h(n,["pageSize"]);t!==void 0&&i!=null&&p(t,["_query","pageSize"],i);const o=h(n,["pageToken"]);if(t!==void 0&&o!=null&&p(t,["_query","pageToken"],o),h(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return l}function X5(n,t){const l={},i=h(n,["pageSize"]);t!==void 0&&i!=null&&p(t,["_query","pageSize"],i);const o=h(n,["pageToken"]);t!==void 0&&o!=null&&p(t,["_query","pageToken"],o);const c=h(n,["filter"]);return t!==void 0&&c!=null&&p(t,["_query","filter"],c),l}function Z5(n){const t={},l=h(n,["config"]);return l!=null&&Q5(l,t),t}function W5(n){const t={},l=h(n,["config"]);return l!=null&&X5(l,t),t}function eS(n){const t={},l=h(n,["sdkHttpResponse"]);l!=null&&p(t,["sdkHttpResponse"],l);const i=h(n,["nextPageToken"]);i!=null&&p(t,["nextPageToken"],i);const o=h(n,["operations"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(u=>Ko(u))),p(t,["batchJobs"],c)}return t}function tS(n){const t={},l=h(n,["sdkHttpResponse"]);l!=null&&p(t,["sdkHttpResponse"],l);const i=h(n,["nextPageToken"]);i!=null&&p(t,["nextPageToken"],i);const o=h(n,["batchPredictionJobs"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(u=>lh(u))),p(t,["batchJobs"],c)}return t}function sS(n){const t={},l=h(n,["mediaResolution"]);l!=null&&p(t,["mediaResolution"],l);const i=h(n,["codeExecutionResult"]);i!=null&&p(t,["codeExecutionResult"],i);const o=h(n,["executableCode"]);o!=null&&p(t,["executableCode"],o);const c=h(n,["fileData"]);c!=null&&p(t,["fileData"],P5(c));const u=h(n,["functionCall"]);u!=null&&p(t,["functionCall"],$5(u));const f=h(n,["functionResponse"]);f!=null&&p(t,["functionResponse"],f);const x=h(n,["inlineData"]);x!=null&&p(t,["inlineData"],N5(x));const m=h(n,["text"]);m!=null&&p(t,["text"],m);const b=h(n,["thought"]);b!=null&&p(t,["thought"],b);const y=h(n,["thoughtSignature"]);y!=null&&p(t,["thoughtSignature"],y);const N=h(n,["videoMetadata"]);return N!=null&&p(t,["videoMetadata"],N),t}function nS(n){const t={},l=h(n,["category"]);if(l!=null&&p(t,["category"],l),h(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=h(n,["threshold"]);return i!=null&&p(t,["threshold"],i),t}function lS(n){const t={},l=h(n,["functionCallingConfig"]);l!=null&&p(t,["functionCallingConfig"],q5(l));const i=h(n,["retrievalConfig"]);return i!=null&&p(t,["retrievalConfig"],i),t}function aS(n){const t={},l=h(n,["functionDeclarations"]);if(l!=null){let b=l;Array.isArray(b)&&(b=b.map(y=>y)),p(t,["functionDeclarations"],b)}if(h(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=h(n,["googleSearchRetrieval"]);i!=null&&p(t,["googleSearchRetrieval"],i);const o=h(n,["computerUse"]);o!=null&&p(t,["computerUse"],o);const c=h(n,["fileSearch"]);c!=null&&p(t,["fileSearch"],c);const u=h(n,["codeExecution"]);if(u!=null&&p(t,["codeExecution"],u),h(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=h(n,["googleMaps"]);f!=null&&p(t,["googleMaps"],V5(f));const x=h(n,["googleSearch"]);x!=null&&p(t,["googleSearch"],F5(x));const m=h(n,["urlContext"]);return m!=null&&p(t,["urlContext"],m),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var En;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(En||(En={}));class Ql{constructor(t,l,i,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=l,this.init(t,i,o)}init(t,l,i){var o,c;this.nameInternal=t,this.pageInternal=l[this.nameInternal]||[],this.sdkHttpResponseInternal=l==null?void 0:l.sdkHttpResponse,this.idxInternal=0;let u={config:{}};!i||Object.keys(i).length===0?u={config:{}}:typeof i=="object"?u=Object.assign({},i):u=i,u.config&&(u.config.pageToken=l.nextPageToken),this.paramsInternal=u,this.pageInternalSize=(c=(o=u.config)===null||o===void 0?void 0:o.pageSize)!==null&&c!==void 0?c:this.pageInternal.length}initNextPage(t){this.init(this.nameInternal,t,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(t){return this.pageInternal[t]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const t=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:t,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const t=await this.requestInternal(this.params);return this.initNextPage(t),this.page}hasNextPage(){var t;return((t=this.params.config)===null||t===void 0?void 0:t.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class iS extends Mn{constructor(t){super(),this.apiClient=t,this.create=async l=>(this.apiClient.isVertexAI()&&(l.config=this.formatDestination(l.src,l.config)),this.createInternal(l)),this.createEmbeddings=async l=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(l)},this.list=async(l={})=>new Ql(En.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(l),l)}createInlinedGenerateContentRequest(t){const l=fg(this.apiClient,t),i=l._url,o=_e("{model}:batchGenerateContent",i),f=l.batch.inputConfig.requests,x=f.requests,m=[];for(const b of x){const y=Object.assign({},b);if(y.systemInstruction){const N=y.systemInstruction;delete y.systemInstruction;const C=y.request;C.systemInstruction=N,y.request=C}m.push(y)}return f.requests=m,delete l.config,delete l._url,delete l._query,{path:o,body:l}}getGcsUri(t){if(typeof t=="string")return t.startsWith("gs://")?t:void 0;if(!Array.isArray(t)&&t.gcsUri&&t.gcsUri.length>0)return t.gcsUri[0]}getBigqueryUri(t){if(typeof t=="string")return t.startsWith("bq://")?t:void 0;if(!Array.isArray(t))return t.bigqueryUri}formatDestination(t,l){const i=l?Object.assign({},l):{},o=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${o}`),i.dest===void 0){const c=this.getGcsUri(t),u=this.getBigqueryUri(t);if(c)c.endsWith(".jsonl")?i.dest=`${c.slice(0,-6)}/dest`:i.dest=`${c}_dest_${o}`;else if(u)i.dest=`${u}_dest_${o}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(t){var l,i,o,c;let u,f="",x={};if(this.apiClient.isVertexAI()){const m=E5(this.apiClient,t);return f=_e("batchPredictionJobs",m._url),x=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:x,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(b=>b.json()),u.then(b=>lh(b))}else{const m=fg(this.apiClient,t);return f=_e("{model}:batchGenerateContent",m._url),x=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:x,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(c=t.config)===null||c===void 0?void 0:c.abortSignal}).then(b=>b.json()),u.then(b=>Ko(b))}}async createEmbeddingsInternal(t){var l,i;let o,c="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=A5(this.apiClient,t);return c=_e("{model}:asyncBatchEmbedContent",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(x=>x.json()),o.then(x=>Ko(x))}}async get(t){var l,i,o,c;let u,f="",x={};if(this.apiClient.isVertexAI()){const m=B5(this.apiClient,t);return f=_e("batchPredictionJobs/{name}",m._url),x=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:x,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(b=>b.json()),u.then(b=>lh(b))}else{const m=H5(this.apiClient,t);return f=_e("batches/{name}",m._url),x=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:x,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(c=t.config)===null||c===void 0?void 0:c.abortSignal}).then(b=>b.json()),u.then(b=>Ko(b))}}async cancel(t){var l,i,o,c;let u="",f={};if(this.apiClient.isVertexAI()){const x=w5(this.apiClient,t);u=_e("batchPredictionJobs/{name}:cancel",x._url),f=x._query,delete x._url,delete x._query,await this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(x),httpMethod:"POST",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal})}else{const x=j5(this.apiClient,t);u=_e("batches/{name}:cancel",x._url),f=x._query,delete x._url,delete x._query,await this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(x),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(c=t.config)===null||c===void 0?void 0:c.abortSignal})}}async listInternal(t){var l,i,o,c;let u,f="",x={};if(this.apiClient.isVertexAI()){const m=W5(t);return f=_e("batchPredictionJobs",m._url),x=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:x,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(b=>b.json().then(y=>{const N=y;return N.sdkHttpResponse={headers:b.headers},N})),u.then(b=>{const y=tS(b),N=new cg;return Object.assign(N,y),N})}else{const m=Z5(t);return f=_e("batches",m._url),x=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:x,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(c=t.config)===null||c===void 0?void 0:c.abortSignal}).then(b=>b.json().then(y=>{const N=y;return N.sdkHttpResponse={headers:b.headers},N})),u.then(b=>{const y=eS(b),N=new cg;return Object.assign(N,y),N})}}async delete(t){var l,i,o,c;let u,f="",x={};if(this.apiClient.isVertexAI()){const m=D5(this.apiClient,t);return f=_e("batchPredictionJobs/{name}",m._url),x=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:x,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(b=>b.json().then(y=>{const N=y;return N.sdkHttpResponse={headers:b.headers},N})),u.then(b=>I5(b))}else{const m=M5(this.apiClient,t);return f=_e("batches/{name}",m._url),x=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:x,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(c=t.config)===null||c===void 0?void 0:c.abortSignal}).then(b=>b.json().then(y=>{const N=y;return N.sdkHttpResponse={headers:b.headers},N})),u.then(b=>R5(b))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function rS(n){const t={},l=h(n,["data"]);if(l!=null&&p(t,["data"],l),h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=h(n,["mimeType"]);return i!=null&&p(t,["mimeType"],i),t}function xg(n){const t={},l=h(n,["parts"]);if(l!=null){let o=l;Array.isArray(o)&&(o=o.map(c=>AS(c))),p(t,["parts"],o)}const i=h(n,["role"]);return i!=null&&p(t,["role"],i),t}function oS(n,t){const l={},i=h(n,["ttl"]);t!==void 0&&i!=null&&p(t,["ttl"],i);const o=h(n,["expireTime"]);t!==void 0&&o!=null&&p(t,["expireTime"],o);const c=h(n,["displayName"]);t!==void 0&&c!=null&&p(t,["displayName"],c);const u=h(n,["contents"]);if(t!==void 0&&u!=null){let b=Rs(u);Array.isArray(b)&&(b=b.map(y=>xg(y))),p(t,["contents"],b)}const f=h(n,["systemInstruction"]);t!==void 0&&f!=null&&p(t,["systemInstruction"],xg(Kt(f)));const x=h(n,["tools"]);if(t!==void 0&&x!=null){let b=x;Array.isArray(b)&&(b=b.map(y=>DS(y))),p(t,["tools"],b)}const m=h(n,["toolConfig"]);if(t!==void 0&&m!=null&&p(t,["toolConfig"],MS(m)),h(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return l}function cS(n,t){const l={},i=h(n,["ttl"]);t!==void 0&&i!=null&&p(t,["ttl"],i);const o=h(n,["expireTime"]);t!==void 0&&o!=null&&p(t,["expireTime"],o);const c=h(n,["displayName"]);t!==void 0&&c!=null&&p(t,["displayName"],c);const u=h(n,["contents"]);if(t!==void 0&&u!=null){let y=Rs(u);Array.isArray(y)&&(y=y.map(N=>N)),p(t,["contents"],y)}const f=h(n,["systemInstruction"]);t!==void 0&&f!=null&&p(t,["systemInstruction"],Kt(f));const x=h(n,["tools"]);if(t!==void 0&&x!=null){let y=x;Array.isArray(y)&&(y=y.map(N=>RS(N))),p(t,["tools"],y)}const m=h(n,["toolConfig"]);t!==void 0&&m!=null&&p(t,["toolConfig"],m);const b=h(n,["kmsKeyName"]);return t!==void 0&&b!=null&&p(t,["encryption_spec","kmsKeyName"],b),l}function dS(n,t){const l={},i=h(t,["model"]);i!=null&&p(l,["model"],qb(n,i));const o=h(t,["config"]);return o!=null&&oS(o,l),l}function uS(n,t){const l={},i=h(t,["model"]);i!=null&&p(l,["model"],qb(n,i));const o=h(t,["config"]);return o!=null&&cS(o,l),l}function hS(n,t){const l={},i=h(t,["name"]);return i!=null&&p(l,["_url","name"],Dn(n,i)),l}function fS(n,t){const l={},i=h(t,["name"]);return i!=null&&p(l,["_url","name"],Dn(n,i)),l}function xS(n){const t={},l=h(n,["sdkHttpResponse"]);return l!=null&&p(t,["sdkHttpResponse"],l),t}function mS(n){const t={},l=h(n,["sdkHttpResponse"]);return l!=null&&p(t,["sdkHttpResponse"],l),t}function pS(n){const t={};if(h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const l=h(n,["fileUri"]);l!=null&&p(t,["fileUri"],l);const i=h(n,["mimeType"]);return i!=null&&p(t,["mimeType"],i),t}function gS(n){const t={},l=h(n,["id"]);l!=null&&p(t,["id"],l);const i=h(n,["args"]);i!=null&&p(t,["args"],i);const o=h(n,["name"]);if(o!=null&&p(t,["name"],o),h(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(h(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function bS(n){const t={},l=h(n,["mode"]);l!=null&&p(t,["mode"],l);const i=h(n,["allowedFunctionNames"]);if(i!=null&&p(t,["allowedFunctionNames"],i),h(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function vS(n){const t={};if(h(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const l=h(n,["description"]);l!=null&&p(t,["description"],l);const i=h(n,["name"]);i!=null&&p(t,["name"],i);const o=h(n,["parameters"]);o!=null&&p(t,["parameters"],o);const c=h(n,["parametersJsonSchema"]);c!=null&&p(t,["parametersJsonSchema"],c);const u=h(n,["response"]);u!=null&&p(t,["response"],u);const f=h(n,["responseJsonSchema"]);return f!=null&&p(t,["responseJsonSchema"],f),t}function yS(n,t){const l={},i=h(t,["name"]);return i!=null&&p(l,["_url","name"],Dn(n,i)),l}function NS(n,t){const l={},i=h(t,["name"]);return i!=null&&p(l,["_url","name"],Dn(n,i)),l}function jS(n){const t={};if(h(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const l=h(n,["enableWidget"]);return l!=null&&p(t,["enableWidget"],l),t}function wS(n){const t={};if(h(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(h(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const l=h(n,["timeRangeFilter"]);return l!=null&&p(t,["timeRangeFilter"],l),t}function _S(n,t){const l={},i=h(n,["pageSize"]);t!==void 0&&i!=null&&p(t,["_query","pageSize"],i);const o=h(n,["pageToken"]);return t!==void 0&&o!=null&&p(t,["_query","pageToken"],o),l}function SS(n,t){const l={},i=h(n,["pageSize"]);t!==void 0&&i!=null&&p(t,["_query","pageSize"],i);const o=h(n,["pageToken"]);return t!==void 0&&o!=null&&p(t,["_query","pageToken"],o),l}function CS(n){const t={},l=h(n,["config"]);return l!=null&&_S(l,t),t}function kS(n){const t={},l=h(n,["config"]);return l!=null&&SS(l,t),t}function ES(n){const t={},l=h(n,["sdkHttpResponse"]);l!=null&&p(t,["sdkHttpResponse"],l);const i=h(n,["nextPageToken"]);i!=null&&p(t,["nextPageToken"],i);const o=h(n,["cachedContents"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(u=>u)),p(t,["cachedContents"],c)}return t}function TS(n){const t={},l=h(n,["sdkHttpResponse"]);l!=null&&p(t,["sdkHttpResponse"],l);const i=h(n,["nextPageToken"]);i!=null&&p(t,["nextPageToken"],i);const o=h(n,["cachedContents"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(u=>u)),p(t,["cachedContents"],c)}return t}function AS(n){const t={},l=h(n,["mediaResolution"]);l!=null&&p(t,["mediaResolution"],l);const i=h(n,["codeExecutionResult"]);i!=null&&p(t,["codeExecutionResult"],i);const o=h(n,["executableCode"]);o!=null&&p(t,["executableCode"],o);const c=h(n,["fileData"]);c!=null&&p(t,["fileData"],pS(c));const u=h(n,["functionCall"]);u!=null&&p(t,["functionCall"],gS(u));const f=h(n,["functionResponse"]);f!=null&&p(t,["functionResponse"],f);const x=h(n,["inlineData"]);x!=null&&p(t,["inlineData"],rS(x));const m=h(n,["text"]);m!=null&&p(t,["text"],m);const b=h(n,["thought"]);b!=null&&p(t,["thought"],b);const y=h(n,["thoughtSignature"]);y!=null&&p(t,["thoughtSignature"],y);const N=h(n,["videoMetadata"]);return N!=null&&p(t,["videoMetadata"],N),t}function MS(n){const t={},l=h(n,["functionCallingConfig"]);l!=null&&p(t,["functionCallingConfig"],bS(l));const i=h(n,["retrievalConfig"]);return i!=null&&p(t,["retrievalConfig"],i),t}function DS(n){const t={},l=h(n,["functionDeclarations"]);if(l!=null){let b=l;Array.isArray(b)&&(b=b.map(y=>y)),p(t,["functionDeclarations"],b)}if(h(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=h(n,["googleSearchRetrieval"]);i!=null&&p(t,["googleSearchRetrieval"],i);const o=h(n,["computerUse"]);o!=null&&p(t,["computerUse"],o);const c=h(n,["fileSearch"]);c!=null&&p(t,["fileSearch"],c);const u=h(n,["codeExecution"]);if(u!=null&&p(t,["codeExecution"],u),h(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=h(n,["googleMaps"]);f!=null&&p(t,["googleMaps"],jS(f));const x=h(n,["googleSearch"]);x!=null&&p(t,["googleSearch"],wS(x));const m=h(n,["urlContext"]);return m!=null&&p(t,["urlContext"],m),t}function RS(n){const t={},l=h(n,["functionDeclarations"]);if(l!=null){let y=l;Array.isArray(y)&&(y=y.map(N=>vS(N))),p(t,["functionDeclarations"],y)}const i=h(n,["retrieval"]);i!=null&&p(t,["retrieval"],i);const o=h(n,["googleSearchRetrieval"]);o!=null&&p(t,["googleSearchRetrieval"],o);const c=h(n,["computerUse"]);if(c!=null&&p(t,["computerUse"],c),h(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=h(n,["codeExecution"]);u!=null&&p(t,["codeExecution"],u);const f=h(n,["enterpriseWebSearch"]);f!=null&&p(t,["enterpriseWebSearch"],f);const x=h(n,["googleMaps"]);x!=null&&p(t,["googleMaps"],x);const m=h(n,["googleSearch"]);m!=null&&p(t,["googleSearch"],m);const b=h(n,["urlContext"]);return b!=null&&p(t,["urlContext"],b),t}function IS(n,t){const l={},i=h(n,["ttl"]);t!==void 0&&i!=null&&p(t,["ttl"],i);const o=h(n,["expireTime"]);return t!==void 0&&o!=null&&p(t,["expireTime"],o),l}function zS(n,t){const l={},i=h(n,["ttl"]);t!==void 0&&i!=null&&p(t,["ttl"],i);const o=h(n,["expireTime"]);return t!==void 0&&o!=null&&p(t,["expireTime"],o),l}function LS(n,t){const l={},i=h(t,["name"]);i!=null&&p(l,["_url","name"],Dn(n,i));const o=h(t,["config"]);return o!=null&&IS(o,l),l}function US(n,t){const l={},i=h(t,["name"]);i!=null&&p(l,["_url","name"],Dn(n,i));const o=h(t,["config"]);return o!=null&&zS(o,l),l}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class PS extends Mn{constructor(t){super(),this.apiClient=t,this.list=async(l={})=>new Ql(En.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(l),l)}async create(t){var l,i,o,c;let u,f="",x={};if(this.apiClient.isVertexAI()){const m=uS(this.apiClient,t);return f=_e("cachedContents",m._url),x=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:x,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(b=>b.json()),u.then(b=>b)}else{const m=dS(this.apiClient,t);return f=_e("cachedContents",m._url),x=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:x,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(c=t.config)===null||c===void 0?void 0:c.abortSignal}).then(b=>b.json()),u.then(b=>b)}}async get(t){var l,i,o,c;let u,f="",x={};if(this.apiClient.isVertexAI()){const m=NS(this.apiClient,t);return f=_e("{name}",m._url),x=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:x,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(b=>b.json()),u.then(b=>b)}else{const m=yS(this.apiClient,t);return f=_e("{name}",m._url),x=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:x,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(c=t.config)===null||c===void 0?void 0:c.abortSignal}).then(b=>b.json()),u.then(b=>b)}}async delete(t){var l,i,o,c;let u,f="",x={};if(this.apiClient.isVertexAI()){const m=fS(this.apiClient,t);return f=_e("{name}",m._url),x=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:x,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(b=>b.json().then(y=>{const N=y;return N.sdkHttpResponse={headers:b.headers},N})),u.then(b=>{const y=mS(b),N=new rg;return Object.assign(N,y),N})}else{const m=hS(this.apiClient,t);return f=_e("{name}",m._url),x=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:x,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(c=t.config)===null||c===void 0?void 0:c.abortSignal}).then(b=>b.json().then(y=>{const N=y;return N.sdkHttpResponse={headers:b.headers},N})),u.then(b=>{const y=xS(b),N=new rg;return Object.assign(N,y),N})}}async update(t){var l,i,o,c;let u,f="",x={};if(this.apiClient.isVertexAI()){const m=US(this.apiClient,t);return f=_e("{name}",m._url),x=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:x,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(b=>b.json()),u.then(b=>b)}else{const m=LS(this.apiClient,t);return f=_e("{name}",m._url),x=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:x,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(c=t.config)===null||c===void 0?void 0:c.abortSignal}).then(b=>b.json()),u.then(b=>b)}}async listInternal(t){var l,i,o,c;let u,f="",x={};if(this.apiClient.isVertexAI()){const m=kS(t);return f=_e("cachedContents",m._url),x=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:x,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(b=>b.json().then(y=>{const N=y;return N.sdkHttpResponse={headers:b.headers},N})),u.then(b=>{const y=TS(b),N=new og;return Object.assign(N,y),N})}else{const m=CS(t);return f=_e("cachedContents",m._url),x=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:x,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(c=t.config)===null||c===void 0?void 0:c.abortSignal}).then(b=>b.json().then(y=>{const N=y;return N.sdkHttpResponse={headers:b.headers},N})),u.then(b=>{const y=ES(b),N=new og;return Object.assign(N,y),N})}}}function mg(n){var t=typeof Symbol=="function"&&Symbol.iterator,l=t&&n[t],i=0;if(l)return l.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function ft(n){return this instanceof ft?(this.v=n,this):new ft(n)}function Wa(n,t,l){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=l.apply(n,t||[]),o,c=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),f("next"),f("throw"),f("return",u),o[Symbol.asyncIterator]=function(){return this},o;function u(C){return function(A){return Promise.resolve(A).then(C,y)}}function f(C,A){i[C]&&(o[C]=function(E){return new Promise(function(R,P){c.push([C,E,R,P])>1||x(C,E)})},A&&(o[C]=A(o[C])))}function x(C,A){try{m(i[C](A))}catch(E){N(c[0][3],E)}}function m(C){C.value instanceof ft?Promise.resolve(C.value.v).then(b,y):N(c[0][2],C)}function b(C){x("next",C)}function y(C){x("throw",C)}function N(C,A){C(A),c.shift(),c.length&&x(c[0][0],c[0][1])}}function pr(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=n[Symbol.asyncIterator],l;return t?t.call(n):(n=typeof mg=="function"?mg(n):n[Symbol.iterator](),l={},i("next"),i("throw"),i("return"),l[Symbol.asyncIterator]=function(){return this},l);function i(c){l[c]=n[c]&&function(u){return new Promise(function(f,x){u=n[c](u),o(f,x,u.done,u.value)})}}function o(c,u,f,x){Promise.resolve(x).then(function(m){c({value:m,done:f})},u)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $S(n){var t;if(n.candidates==null||n.candidates.length===0)return!1;const l=(t=n.candidates[0])===null||t===void 0?void 0:t.content;return l===void 0?!1:Wb(l)}function Wb(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const t of n.parts)if(t===void 0||Object.keys(t).length===0)return!1;return!0}function qS(n){if(n.length!==0){for(const t of n)if(t.role!=="user"&&t.role!=="model")throw new Error(`Role must be user or model, but got ${t.role}.`)}}function pg(n){if(n===void 0||n.length===0)return[];const t=[],l=n.length;let i=0;for(;i<l;)if(n[i].role==="user")t.push(n[i]),i++;else{const o=[];let c=!0;for(;i<l&&n[i].role==="model";)o.push(n[i]),c&&!Wb(n[i])&&(c=!1),i++;c?t.push(...o):t.pop()}return t}class OS{constructor(t,l){this.modelsModule=t,this.apiClient=l}create(t){return new GS(this.apiClient,this.modelsModule,t.model,t.config,structuredClone(t.history))}}class GS{constructor(t,l,i,o={},c=[]){this.apiClient=t,this.modelsModule=l,this.model=i,this.config=o,this.history=c,this.sendPromise=Promise.resolve(),qS(c)}async sendMessage(t){var l;await this.sendPromise;const i=Kt(t.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(l=t.config)!==null&&l!==void 0?l:this.config});return this.sendPromise=(async()=>{var c,u,f;const x=await o,m=(u=(c=x.candidates)===null||c===void 0?void 0:c[0])===null||u===void 0?void 0:u.content,b=x.automaticFunctionCallingHistory,y=this.getHistory(!0).length;let N=[];b!=null&&(N=(f=b.slice(y))!==null&&f!==void 0?f:[]);const C=m?[m]:[];this.recordHistory(i,C,N)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(t){var l;await this.sendPromise;const i=Kt(t.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(l=t.config)!==null&&l!==void 0?l:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});const c=await o;return this.processStreamResponse(c,i)}getHistory(t=!1){const l=t?pg(this.history):this.history;return structuredClone(l)}processStreamResponse(t,l){var i,o;return Wa(this,arguments,function*(){var u,f,x,m;const b=[];try{for(var y=!0,N=pr(t),C;C=yield ft(N.next()),u=C.done,!u;y=!0){m=C.value,y=!1;const A=m;if($S(A)){const E=(o=(i=A.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content;E!==void 0&&b.push(E)}yield yield ft(A)}}catch(A){f={error:A}}finally{try{!y&&!u&&(x=N.return)&&(yield ft(x.call(N)))}finally{if(f)throw f.error}}this.recordHistory(l,b)})}recordHistory(t,l,i){let o=[];l.length>0&&l.every(c=>c.role!==void 0)?o=l:o.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...pg(i)):this.history.push(t),this.history.push(...o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class fc extends Error{constructor(t){super(t.message),this.name="ApiError",this.status=t.status,Object.setPrototypeOf(this,fc.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function HS(n){const t={},l=h(n,["file"]);return l!=null&&p(t,["file"],l),t}function BS(n){const t={},l=h(n,["sdkHttpResponse"]);return l!=null&&p(t,["sdkHttpResponse"],l),t}function VS(n){const t={},l=h(n,["name"]);return l!=null&&p(t,["_url","file"],Fb(l)),t}function FS(n){const t={},l=h(n,["sdkHttpResponse"]);return l!=null&&p(t,["sdkHttpResponse"],l),t}function JS(n){const t={},l=h(n,["name"]);return l!=null&&p(t,["_url","file"],Fb(l)),t}function YS(n,t){const l={},i=h(n,["pageSize"]);t!==void 0&&i!=null&&p(t,["_query","pageSize"],i);const o=h(n,["pageToken"]);return t!==void 0&&o!=null&&p(t,["_query","pageToken"],o),l}function KS(n){const t={},l=h(n,["config"]);return l!=null&&YS(l,t),t}function QS(n){const t={},l=h(n,["sdkHttpResponse"]);l!=null&&p(t,["sdkHttpResponse"],l);const i=h(n,["nextPageToken"]);i!=null&&p(t,["nextPageToken"],i);const o=h(n,["files"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(u=>u)),p(t,["files"],c)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class XS extends Mn{constructor(t){super(),this.apiClient=t,this.list=async(l={})=>new Ql(En.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(l),l)}async upload(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(t.file,t.config).then(l=>l)}async download(t){await this.apiClient.downloadFile(t)}async listInternal(t){var l,i;let o,c="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=KS(t);return c=_e("files",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(x=>x.json().then(m=>{const b=m;return b.sdkHttpResponse={headers:x.headers},b})),o.then(x=>{const m=QS(x),b=new t5;return Object.assign(b,m),b})}}async createInternal(t){var l,i;let o,c="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=HS(t);return c=_e("upload/v1beta/files",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(x=>x.json()),o.then(x=>{const m=BS(x),b=new s5;return Object.assign(b,m),b})}}async get(t){var l,i;let o,c="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=JS(t);return c=_e("files/{file}",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(x=>x.json()),o.then(x=>x)}}async delete(t){var l,i;let o,c="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=VS(t);return c=_e("files/{file}",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(x=>x.json().then(m=>{const b=m;return b.sdkHttpResponse={headers:x.headers},b})),o.then(x=>{const m=FS(x),b=new n5;return Object.assign(b,m),b})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Qo(n){const t={},l=h(n,["data"]);if(l!=null&&p(t,["data"],l),h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=h(n,["mimeType"]);return i!=null&&p(t,["mimeType"],i),t}function ZS(n){const t={},l=h(n,["parts"]);if(l!=null){let o=l;Array.isArray(o)&&(o=o.map(c=>x4(c))),p(t,["parts"],o)}const i=h(n,["role"]);return i!=null&&p(t,["role"],i),t}function WS(n){const t={};if(h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const l=h(n,["fileUri"]);l!=null&&p(t,["fileUri"],l);const i=h(n,["mimeType"]);return i!=null&&p(t,["mimeType"],i),t}function e4(n){const t={},l=h(n,["id"]);l!=null&&p(t,["id"],l);const i=h(n,["args"]);i!=null&&p(t,["args"],i);const o=h(n,["name"]);if(o!=null&&p(t,["name"],o),h(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(h(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function t4(n){const t={};if(h(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const l=h(n,["description"]);l!=null&&p(t,["description"],l);const i=h(n,["name"]);i!=null&&p(t,["name"],i);const o=h(n,["parameters"]);o!=null&&p(t,["parameters"],o);const c=h(n,["parametersJsonSchema"]);c!=null&&p(t,["parametersJsonSchema"],c);const u=h(n,["response"]);u!=null&&p(t,["response"],u);const f=h(n,["responseJsonSchema"]);return f!=null&&p(t,["responseJsonSchema"],f),t}function s4(n){const t={},l=h(n,["modelSelectionConfig"]);l!=null&&p(t,["modelConfig"],l);const i=h(n,["responseJsonSchema"]);i!=null&&p(t,["responseJsonSchema"],i);const o=h(n,["audioTimestamp"]);o!=null&&p(t,["audioTimestamp"],o);const c=h(n,["candidateCount"]);c!=null&&p(t,["candidateCount"],c);const u=h(n,["enableAffectiveDialog"]);u!=null&&p(t,["enableAffectiveDialog"],u);const f=h(n,["frequencyPenalty"]);f!=null&&p(t,["frequencyPenalty"],f);const x=h(n,["logprobs"]);x!=null&&p(t,["logprobs"],x);const m=h(n,["maxOutputTokens"]);m!=null&&p(t,["maxOutputTokens"],m);const b=h(n,["mediaResolution"]);b!=null&&p(t,["mediaResolution"],b);const y=h(n,["presencePenalty"]);y!=null&&p(t,["presencePenalty"],y);const N=h(n,["responseLogprobs"]);N!=null&&p(t,["responseLogprobs"],N);const C=h(n,["responseMimeType"]);C!=null&&p(t,["responseMimeType"],C);const A=h(n,["responseModalities"]);A!=null&&p(t,["responseModalities"],A);const E=h(n,["responseSchema"]);E!=null&&p(t,["responseSchema"],E);const R=h(n,["routingConfig"]);R!=null&&p(t,["routingConfig"],R);const P=h(n,["seed"]);P!=null&&p(t,["seed"],P);const O=h(n,["speechConfig"]);O!=null&&p(t,["speechConfig"],ev(O));const z=h(n,["stopSequences"]);z!=null&&p(t,["stopSequences"],z);const K=h(n,["temperature"]);K!=null&&p(t,["temperature"],K);const G=h(n,["thinkingConfig"]);G!=null&&p(t,["thinkingConfig"],G);const F=h(n,["topK"]);F!=null&&p(t,["topK"],F);const $=h(n,["topP"]);if($!=null&&p(t,["topP"],$),h(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function n4(n){const t={};if(h(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const l=h(n,["enableWidget"]);return l!=null&&p(t,["enableWidget"],l),t}function l4(n){const t={};if(h(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(h(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const l=h(n,["timeRangeFilter"]);return l!=null&&p(t,["timeRangeFilter"],l),t}function a4(n,t){const l={},i=h(n,["generationConfig"]);t!==void 0&&i!=null&&p(t,["setup","generationConfig"],i);const o=h(n,["responseModalities"]);t!==void 0&&o!=null&&p(t,["setup","generationConfig","responseModalities"],o);const c=h(n,["temperature"]);t!==void 0&&c!=null&&p(t,["setup","generationConfig","temperature"],c);const u=h(n,["topP"]);t!==void 0&&u!=null&&p(t,["setup","generationConfig","topP"],u);const f=h(n,["topK"]);t!==void 0&&f!=null&&p(t,["setup","generationConfig","topK"],f);const x=h(n,["maxOutputTokens"]);t!==void 0&&x!=null&&p(t,["setup","generationConfig","maxOutputTokens"],x);const m=h(n,["mediaResolution"]);t!==void 0&&m!=null&&p(t,["setup","generationConfig","mediaResolution"],m);const b=h(n,["seed"]);t!==void 0&&b!=null&&p(t,["setup","generationConfig","seed"],b);const y=h(n,["speechConfig"]);t!==void 0&&y!=null&&p(t,["setup","generationConfig","speechConfig"],Dh(y));const N=h(n,["thinkingConfig"]);t!==void 0&&N!=null&&p(t,["setup","generationConfig","thinkingConfig"],N);const C=h(n,["enableAffectiveDialog"]);t!==void 0&&C!=null&&p(t,["setup","generationConfig","enableAffectiveDialog"],C);const A=h(n,["systemInstruction"]);t!==void 0&&A!=null&&p(t,["setup","systemInstruction"],ZS(Kt(A)));const E=h(n,["tools"]);if(t!==void 0&&E!=null){let F=hi(E);Array.isArray(F)&&(F=F.map($=>p4(ui($)))),p(t,["setup","tools"],F)}const R=h(n,["sessionResumption"]);t!==void 0&&R!=null&&p(t,["setup","sessionResumption"],m4(R));const P=h(n,["inputAudioTranscription"]);t!==void 0&&P!=null&&p(t,["setup","inputAudioTranscription"],P);const O=h(n,["outputAudioTranscription"]);t!==void 0&&O!=null&&p(t,["setup","outputAudioTranscription"],O);const z=h(n,["realtimeInputConfig"]);t!==void 0&&z!=null&&p(t,["setup","realtimeInputConfig"],z);const K=h(n,["contextWindowCompression"]);t!==void 0&&K!=null&&p(t,["setup","contextWindowCompression"],K);const G=h(n,["proactivity"]);return t!==void 0&&G!=null&&p(t,["setup","proactivity"],G),l}function i4(n,t){const l={},i=h(n,["generationConfig"]);t!==void 0&&i!=null&&p(t,["setup","generationConfig"],s4(i));const o=h(n,["responseModalities"]);t!==void 0&&o!=null&&p(t,["setup","generationConfig","responseModalities"],o);const c=h(n,["temperature"]);t!==void 0&&c!=null&&p(t,["setup","generationConfig","temperature"],c);const u=h(n,["topP"]);t!==void 0&&u!=null&&p(t,["setup","generationConfig","topP"],u);const f=h(n,["topK"]);t!==void 0&&f!=null&&p(t,["setup","generationConfig","topK"],f);const x=h(n,["maxOutputTokens"]);t!==void 0&&x!=null&&p(t,["setup","generationConfig","maxOutputTokens"],x);const m=h(n,["mediaResolution"]);t!==void 0&&m!=null&&p(t,["setup","generationConfig","mediaResolution"],m);const b=h(n,["seed"]);t!==void 0&&b!=null&&p(t,["setup","generationConfig","seed"],b);const y=h(n,["speechConfig"]);t!==void 0&&y!=null&&p(t,["setup","generationConfig","speechConfig"],ev(Dh(y)));const N=h(n,["thinkingConfig"]);t!==void 0&&N!=null&&p(t,["setup","generationConfig","thinkingConfig"],N);const C=h(n,["enableAffectiveDialog"]);t!==void 0&&C!=null&&p(t,["setup","generationConfig","enableAffectiveDialog"],C);const A=h(n,["systemInstruction"]);t!==void 0&&A!=null&&p(t,["setup","systemInstruction"],Kt(A));const E=h(n,["tools"]);if(t!==void 0&&E!=null){let F=hi(E);Array.isArray(F)&&(F=F.map($=>g4(ui($)))),p(t,["setup","tools"],F)}const R=h(n,["sessionResumption"]);t!==void 0&&R!=null&&p(t,["setup","sessionResumption"],R);const P=h(n,["inputAudioTranscription"]);t!==void 0&&P!=null&&p(t,["setup","inputAudioTranscription"],P);const O=h(n,["outputAudioTranscription"]);t!==void 0&&O!=null&&p(t,["setup","outputAudioTranscription"],O);const z=h(n,["realtimeInputConfig"]);t!==void 0&&z!=null&&p(t,["setup","realtimeInputConfig"],z);const K=h(n,["contextWindowCompression"]);t!==void 0&&K!=null&&p(t,["setup","contextWindowCompression"],K);const G=h(n,["proactivity"]);return t!==void 0&&G!=null&&p(t,["setup","proactivity"],G),l}function r4(n,t){const l={},i=h(t,["model"]);i!=null&&p(l,["setup","model"],Ke(n,i));const o=h(t,["config"]);return o!=null&&p(l,["config"],a4(o,l)),l}function o4(n,t){const l={},i=h(t,["model"]);i!=null&&p(l,["setup","model"],Ke(n,i));const o=h(t,["config"]);return o!=null&&p(l,["config"],i4(o,l)),l}function c4(n){const t={},l=h(n,["musicGenerationConfig"]);return l!=null&&p(t,["musicGenerationConfig"],l),t}function d4(n){const t={},l=h(n,["weightedPrompts"]);if(l!=null){let i=l;Array.isArray(i)&&(i=i.map(o=>o)),p(t,["weightedPrompts"],i)}return t}function u4(n){const t={},l=h(n,["media"]);if(l!=null){let m=Ob(l);Array.isArray(m)&&(m=m.map(b=>Qo(b))),p(t,["mediaChunks"],m)}const i=h(n,["audio"]);i!=null&&p(t,["audio"],Qo(Hb(i)));const o=h(n,["audioStreamEnd"]);o!=null&&p(t,["audioStreamEnd"],o);const c=h(n,["video"]);c!=null&&p(t,["video"],Qo(Gb(c)));const u=h(n,["text"]);u!=null&&p(t,["text"],u);const f=h(n,["activityStart"]);f!=null&&p(t,["activityStart"],f);const x=h(n,["activityEnd"]);return x!=null&&p(t,["activityEnd"],x),t}function h4(n){const t={},l=h(n,["media"]);if(l!=null){let m=Ob(l);Array.isArray(m)&&(m=m.map(b=>b)),p(t,["mediaChunks"],m)}const i=h(n,["audio"]);i!=null&&p(t,["audio"],Hb(i));const o=h(n,["audioStreamEnd"]);o!=null&&p(t,["audioStreamEnd"],o);const c=h(n,["video"]);c!=null&&p(t,["video"],Gb(c));const u=h(n,["text"]);u!=null&&p(t,["text"],u);const f=h(n,["activityStart"]);f!=null&&p(t,["activityStart"],f);const x=h(n,["activityEnd"]);return x!=null&&p(t,["activityEnd"],x),t}function f4(n){const t={},l=h(n,["setupComplete"]);l!=null&&p(t,["setupComplete"],l);const i=h(n,["serverContent"]);i!=null&&p(t,["serverContent"],i);const o=h(n,["toolCall"]);o!=null&&p(t,["toolCall"],o);const c=h(n,["toolCallCancellation"]);c!=null&&p(t,["toolCallCancellation"],c);const u=h(n,["usageMetadata"]);u!=null&&p(t,["usageMetadata"],b4(u));const f=h(n,["goAway"]);f!=null&&p(t,["goAway"],f);const x=h(n,["sessionResumptionUpdate"]);return x!=null&&p(t,["sessionResumptionUpdate"],x),t}function x4(n){const t={},l=h(n,["mediaResolution"]);l!=null&&p(t,["mediaResolution"],l);const i=h(n,["codeExecutionResult"]);i!=null&&p(t,["codeExecutionResult"],i);const o=h(n,["executableCode"]);o!=null&&p(t,["executableCode"],o);const c=h(n,["fileData"]);c!=null&&p(t,["fileData"],WS(c));const u=h(n,["functionCall"]);u!=null&&p(t,["functionCall"],e4(u));const f=h(n,["functionResponse"]);f!=null&&p(t,["functionResponse"],f);const x=h(n,["inlineData"]);x!=null&&p(t,["inlineData"],Qo(x));const m=h(n,["text"]);m!=null&&p(t,["text"],m);const b=h(n,["thought"]);b!=null&&p(t,["thought"],b);const y=h(n,["thoughtSignature"]);y!=null&&p(t,["thoughtSignature"],y);const N=h(n,["videoMetadata"]);return N!=null&&p(t,["videoMetadata"],N),t}function m4(n){const t={},l=h(n,["handle"]);if(l!=null&&p(t,["handle"],l),h(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function ev(n){const t={},l=h(n,["languageCode"]);l!=null&&p(t,["languageCode"],l);const i=h(n,["voiceConfig"]);if(i!=null&&p(t,["voiceConfig"],i),h(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return t}function p4(n){const t={},l=h(n,["functionDeclarations"]);if(l!=null){let b=l;Array.isArray(b)&&(b=b.map(y=>y)),p(t,["functionDeclarations"],b)}if(h(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=h(n,["googleSearchRetrieval"]);i!=null&&p(t,["googleSearchRetrieval"],i);const o=h(n,["computerUse"]);o!=null&&p(t,["computerUse"],o);const c=h(n,["fileSearch"]);c!=null&&p(t,["fileSearch"],c);const u=h(n,["codeExecution"]);if(u!=null&&p(t,["codeExecution"],u),h(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=h(n,["googleMaps"]);f!=null&&p(t,["googleMaps"],n4(f));const x=h(n,["googleSearch"]);x!=null&&p(t,["googleSearch"],l4(x));const m=h(n,["urlContext"]);return m!=null&&p(t,["urlContext"],m),t}function g4(n){const t={},l=h(n,["functionDeclarations"]);if(l!=null){let y=l;Array.isArray(y)&&(y=y.map(N=>t4(N))),p(t,["functionDeclarations"],y)}const i=h(n,["retrieval"]);i!=null&&p(t,["retrieval"],i);const o=h(n,["googleSearchRetrieval"]);o!=null&&p(t,["googleSearchRetrieval"],o);const c=h(n,["computerUse"]);if(c!=null&&p(t,["computerUse"],c),h(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=h(n,["codeExecution"]);u!=null&&p(t,["codeExecution"],u);const f=h(n,["enterpriseWebSearch"]);f!=null&&p(t,["enterpriseWebSearch"],f);const x=h(n,["googleMaps"]);x!=null&&p(t,["googleMaps"],x);const m=h(n,["googleSearch"]);m!=null&&p(t,["googleSearch"],m);const b=h(n,["urlContext"]);return b!=null&&p(t,["urlContext"],b),t}function b4(n){const t={},l=h(n,["promptTokenCount"]);l!=null&&p(t,["promptTokenCount"],l);const i=h(n,["cachedContentTokenCount"]);i!=null&&p(t,["cachedContentTokenCount"],i);const o=h(n,["candidatesTokenCount"]);o!=null&&p(t,["responseTokenCount"],o);const c=h(n,["toolUsePromptTokenCount"]);c!=null&&p(t,["toolUsePromptTokenCount"],c);const u=h(n,["thoughtsTokenCount"]);u!=null&&p(t,["thoughtsTokenCount"],u);const f=h(n,["totalTokenCount"]);f!=null&&p(t,["totalTokenCount"],f);const x=h(n,["promptTokensDetails"]);if(x!=null){let C=x;Array.isArray(C)&&(C=C.map(A=>A)),p(t,["promptTokensDetails"],C)}const m=h(n,["cacheTokensDetails"]);if(m!=null){let C=m;Array.isArray(C)&&(C=C.map(A=>A)),p(t,["cacheTokensDetails"],C)}const b=h(n,["candidatesTokensDetails"]);if(b!=null){let C=b;Array.isArray(C)&&(C=C.map(A=>A)),p(t,["responseTokensDetails"],C)}const y=h(n,["toolUsePromptTokensDetails"]);if(y!=null){let C=y;Array.isArray(C)&&(C=C.map(A=>A)),p(t,["toolUsePromptTokensDetails"],C)}const N=h(n,["trafficType"]);return N!=null&&p(t,["trafficType"],N),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function v4(n){const t={},l=h(n,["data"]);if(l!=null&&p(t,["data"],l),h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=h(n,["mimeType"]);return i!=null&&p(t,["mimeType"],i),t}function y4(n){const t={},l=h(n,["content"]);l!=null&&p(t,["content"],l);const i=h(n,["citationMetadata"]);i!=null&&p(t,["citationMetadata"],N4(i));const o=h(n,["tokenCount"]);o!=null&&p(t,["tokenCount"],o);const c=h(n,["finishReason"]);c!=null&&p(t,["finishReason"],c);const u=h(n,["avgLogprobs"]);u!=null&&p(t,["avgLogprobs"],u);const f=h(n,["groundingMetadata"]);f!=null&&p(t,["groundingMetadata"],f);const x=h(n,["index"]);x!=null&&p(t,["index"],x);const m=h(n,["logprobsResult"]);m!=null&&p(t,["logprobsResult"],m);const b=h(n,["safetyRatings"]);if(b!=null){let N=b;Array.isArray(N)&&(N=N.map(C=>C)),p(t,["safetyRatings"],N)}const y=h(n,["urlContextMetadata"]);return y!=null&&p(t,["urlContextMetadata"],y),t}function N4(n){const t={},l=h(n,["citationSources"]);if(l!=null){let i=l;Array.isArray(i)&&(i=i.map(o=>o)),p(t,["citations"],i)}return t}function j4(n,t){const l={},i=h(t,["model"]);i!=null&&p(l,["_url","model"],Ke(n,i));const o=h(t,["contents"]);if(o!=null){let c=Rs(o);Array.isArray(c)&&(c=c.map(u=>u)),p(l,["contents"],c)}return l}function w4(n){const t={},l=h(n,["sdkHttpResponse"]);l!=null&&p(t,["sdkHttpResponse"],l);const i=h(n,["tokensInfo"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(c=>c)),p(t,["tokensInfo"],o)}return t}function _4(n){const t={},l=h(n,["values"]);l!=null&&p(t,["values"],l);const i=h(n,["statistics"]);return i!=null&&p(t,["statistics"],S4(i)),t}function S4(n){const t={},l=h(n,["truncated"]);l!=null&&p(t,["truncated"],l);const i=h(n,["token_count"]);return i!=null&&p(t,["tokenCount"],i),t}function xc(n){const t={},l=h(n,["parts"]);if(l!=null){let o=l;Array.isArray(o)&&(o=o.map(c=>IC(c))),p(t,["parts"],o)}const i=h(n,["role"]);return i!=null&&p(t,["role"],i),t}function C4(n){const t={},l=h(n,["controlType"]);l!=null&&p(t,["controlType"],l);const i=h(n,["enableControlImageComputation"]);return i!=null&&p(t,["computeControl"],i),t}function k4(n){const t={};if(h(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(h(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(h(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return t}function E4(n,t){const l={},i=h(n,["systemInstruction"]);t!==void 0&&i!=null&&p(t,["systemInstruction"],Kt(i));const o=h(n,["tools"]);if(t!==void 0&&o!=null){let u=o;Array.isArray(u)&&(u=u.map(f=>av(f))),p(t,["tools"],u)}const c=h(n,["generationConfig"]);return t!==void 0&&c!=null&&p(t,["generationConfig"],vC(c)),l}function T4(n,t){const l={},i=h(t,["model"]);i!=null&&p(l,["_url","model"],Ke(n,i));const o=h(t,["contents"]);if(o!=null){let u=Rs(o);Array.isArray(u)&&(u=u.map(f=>xc(f))),p(l,["contents"],u)}const c=h(t,["config"]);return c!=null&&k4(c),l}function A4(n,t){const l={},i=h(t,["model"]);i!=null&&p(l,["_url","model"],Ke(n,i));const o=h(t,["contents"]);if(o!=null){let u=Rs(o);Array.isArray(u)&&(u=u.map(f=>f)),p(l,["contents"],u)}const c=h(t,["config"]);return c!=null&&E4(c,l),l}function M4(n){const t={},l=h(n,["sdkHttpResponse"]);l!=null&&p(t,["sdkHttpResponse"],l);const i=h(n,["totalTokens"]);i!=null&&p(t,["totalTokens"],i);const o=h(n,["cachedContentTokenCount"]);return o!=null&&p(t,["cachedContentTokenCount"],o),t}function D4(n){const t={},l=h(n,["sdkHttpResponse"]);l!=null&&p(t,["sdkHttpResponse"],l);const i=h(n,["totalTokens"]);return i!=null&&p(t,["totalTokens"],i),t}function R4(n,t){const l={},i=h(t,["model"]);return i!=null&&p(l,["_url","name"],Ke(n,i)),l}function I4(n,t){const l={},i=h(t,["model"]);return i!=null&&p(l,["_url","name"],Ke(n,i)),l}function z4(n){const t={},l=h(n,["sdkHttpResponse"]);return l!=null&&p(t,["sdkHttpResponse"],l),t}function L4(n){const t={},l=h(n,["sdkHttpResponse"]);return l!=null&&p(t,["sdkHttpResponse"],l),t}function U4(n,t){const l={},i=h(n,["outputGcsUri"]);t!==void 0&&i!=null&&p(t,["parameters","storageUri"],i);const o=h(n,["negativePrompt"]);t!==void 0&&o!=null&&p(t,["parameters","negativePrompt"],o);const c=h(n,["numberOfImages"]);t!==void 0&&c!=null&&p(t,["parameters","sampleCount"],c);const u=h(n,["aspectRatio"]);t!==void 0&&u!=null&&p(t,["parameters","aspectRatio"],u);const f=h(n,["guidanceScale"]);t!==void 0&&f!=null&&p(t,["parameters","guidanceScale"],f);const x=h(n,["seed"]);t!==void 0&&x!=null&&p(t,["parameters","seed"],x);const m=h(n,["safetyFilterLevel"]);t!==void 0&&m!=null&&p(t,["parameters","safetySetting"],m);const b=h(n,["personGeneration"]);t!==void 0&&b!=null&&p(t,["parameters","personGeneration"],b);const y=h(n,["includeSafetyAttributes"]);t!==void 0&&y!=null&&p(t,["parameters","includeSafetyAttributes"],y);const N=h(n,["includeRaiReason"]);t!==void 0&&N!=null&&p(t,["parameters","includeRaiReason"],N);const C=h(n,["language"]);t!==void 0&&C!=null&&p(t,["parameters","language"],C);const A=h(n,["outputMimeType"]);t!==void 0&&A!=null&&p(t,["parameters","outputOptions","mimeType"],A);const E=h(n,["outputCompressionQuality"]);t!==void 0&&E!=null&&p(t,["parameters","outputOptions","compressionQuality"],E);const R=h(n,["addWatermark"]);t!==void 0&&R!=null&&p(t,["parameters","addWatermark"],R);const P=h(n,["labels"]);t!==void 0&&P!=null&&p(t,["labels"],P);const O=h(n,["editMode"]);t!==void 0&&O!=null&&p(t,["parameters","editMode"],O);const z=h(n,["baseSteps"]);return t!==void 0&&z!=null&&p(t,["parameters","editConfig","baseSteps"],z),l}function P4(n,t){const l={},i=h(t,["model"]);i!=null&&p(l,["_url","model"],Ke(n,i));const o=h(t,["prompt"]);o!=null&&p(l,["instances[0]","prompt"],o);const c=h(t,["referenceImages"]);if(c!=null){let f=c;Array.isArray(f)&&(f=f.map(x=>qC(x))),p(l,["instances[0]","referenceImages"],f)}const u=h(t,["config"]);return u!=null&&U4(u,l),l}function $4(n){const t={},l=h(n,["sdkHttpResponse"]);l!=null&&p(t,["sdkHttpResponse"],l);const i=h(n,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(c=>mc(c))),p(t,["generatedImages"],o)}return t}function q4(n,t){const l={},i=h(n,["taskType"]);t!==void 0&&i!=null&&p(t,["requests[]","taskType"],i);const o=h(n,["title"]);t!==void 0&&o!=null&&p(t,["requests[]","title"],o);const c=h(n,["outputDimensionality"]);if(t!==void 0&&c!=null&&p(t,["requests[]","outputDimensionality"],c),h(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(h(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return l}function O4(n,t){const l={},i=h(n,["taskType"]);t!==void 0&&i!=null&&p(t,["instances[]","task_type"],i);const o=h(n,["title"]);t!==void 0&&o!=null&&p(t,["instances[]","title"],o);const c=h(n,["outputDimensionality"]);t!==void 0&&c!=null&&p(t,["parameters","outputDimensionality"],c);const u=h(n,["mimeType"]);t!==void 0&&u!=null&&p(t,["instances[]","mimeType"],u);const f=h(n,["autoTruncate"]);return t!==void 0&&f!=null&&p(t,["parameters","autoTruncate"],f),l}function G4(n,t){const l={},i=h(t,["model"]);i!=null&&p(l,["_url","model"],Ke(n,i));const o=h(t,["contents"]);if(o!=null){let f=Th(n,o);Array.isArray(f)&&(f=f.map(x=>x)),p(l,["requests[]","content"],f)}const c=h(t,["config"]);c!=null&&q4(c,l);const u=h(t,["model"]);return u!==void 0&&p(l,["requests[]","model"],Ke(n,u)),l}function H4(n,t){const l={},i=h(t,["model"]);i!=null&&p(l,["_url","model"],Ke(n,i));const o=h(t,["contents"]);if(o!=null){let u=Th(n,o);Array.isArray(u)&&(u=u.map(f=>f)),p(l,["instances[]","content"],u)}const c=h(t,["config"]);return c!=null&&O4(c,l),l}function B4(n){const t={},l=h(n,["sdkHttpResponse"]);l!=null&&p(t,["sdkHttpResponse"],l);const i=h(n,["embeddings"]);if(i!=null){let c=i;Array.isArray(c)&&(c=c.map(u=>u)),p(t,["embeddings"],c)}const o=h(n,["metadata"]);return o!=null&&p(t,["metadata"],o),t}function V4(n){const t={},l=h(n,["sdkHttpResponse"]);l!=null&&p(t,["sdkHttpResponse"],l);const i=h(n,["predictions[]","embeddings"]);if(i!=null){let c=i;Array.isArray(c)&&(c=c.map(u=>_4(u))),p(t,["embeddings"],c)}const o=h(n,["metadata"]);return o!=null&&p(t,["metadata"],o),t}function F4(n){const t={},l=h(n,["endpoint"]);l!=null&&p(t,["name"],l);const i=h(n,["deployedModelId"]);return i!=null&&p(t,["deployedModelId"],i),t}function J4(n){const t={};if(h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const l=h(n,["fileUri"]);l!=null&&p(t,["fileUri"],l);const i=h(n,["mimeType"]);return i!=null&&p(t,["mimeType"],i),t}function Y4(n){const t={},l=h(n,["id"]);l!=null&&p(t,["id"],l);const i=h(n,["args"]);i!=null&&p(t,["args"],i);const o=h(n,["name"]);if(o!=null&&p(t,["name"],o),h(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(h(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function K4(n){const t={},l=h(n,["mode"]);l!=null&&p(t,["mode"],l);const i=h(n,["allowedFunctionNames"]);if(i!=null&&p(t,["allowedFunctionNames"],i),h(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function Q4(n){const t={};if(h(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const l=h(n,["description"]);l!=null&&p(t,["description"],l);const i=h(n,["name"]);i!=null&&p(t,["name"],i);const o=h(n,["parameters"]);o!=null&&p(t,["parameters"],o);const c=h(n,["parametersJsonSchema"]);c!=null&&p(t,["parametersJsonSchema"],c);const u=h(n,["response"]);u!=null&&p(t,["response"],u);const f=h(n,["responseJsonSchema"]);return f!=null&&p(t,["responseJsonSchema"],f),t}function X4(n,t,l){const i={},o=h(t,["systemInstruction"]);l!==void 0&&o!=null&&p(l,["systemInstruction"],xc(Kt(o)));const c=h(t,["temperature"]);c!=null&&p(i,["temperature"],c);const u=h(t,["topP"]);u!=null&&p(i,["topP"],u);const f=h(t,["topK"]);f!=null&&p(i,["topK"],f);const x=h(t,["candidateCount"]);x!=null&&p(i,["candidateCount"],x);const m=h(t,["maxOutputTokens"]);m!=null&&p(i,["maxOutputTokens"],m);const b=h(t,["stopSequences"]);b!=null&&p(i,["stopSequences"],b);const y=h(t,["responseLogprobs"]);y!=null&&p(i,["responseLogprobs"],y);const N=h(t,["logprobs"]);N!=null&&p(i,["logprobs"],N);const C=h(t,["presencePenalty"]);C!=null&&p(i,["presencePenalty"],C);const A=h(t,["frequencyPenalty"]);A!=null&&p(i,["frequencyPenalty"],A);const E=h(t,["seed"]);E!=null&&p(i,["seed"],E);const R=h(t,["responseMimeType"]);R!=null&&p(i,["responseMimeType"],R);const P=h(t,["responseSchema"]);P!=null&&p(i,["responseSchema"],Ah(P));const O=h(t,["responseJsonSchema"]);if(O!=null&&p(i,["responseJsonSchema"],O),h(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(h(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const z=h(t,["safetySettings"]);if(l!==void 0&&z!=null){let U=z;Array.isArray(U)&&(U=U.map(ae=>OC(ae))),p(l,["safetySettings"],U)}const K=h(t,["tools"]);if(l!==void 0&&K!=null){let U=hi(K);Array.isArray(U)&&(U=U.map(ae=>YC(ui(ae)))),p(l,["tools"],U)}const G=h(t,["toolConfig"]);if(l!==void 0&&G!=null&&p(l,["toolConfig"],JC(G)),h(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const F=h(t,["cachedContent"]);l!==void 0&&F!=null&&p(l,["cachedContent"],Dn(n,F));const $=h(t,["responseModalities"]);$!=null&&p(i,["responseModalities"],$);const B=h(t,["mediaResolution"]);B!=null&&p(i,["mediaResolution"],B);const q=h(t,["speechConfig"]);if(q!=null&&p(i,["speechConfig"],Mh(q)),h(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const J=h(t,["thinkingConfig"]);J!=null&&p(i,["thinkingConfig"],J);const Q=h(t,["imageConfig"]);return Q!=null&&p(i,["imageConfig"],_C(Q)),i}function Z4(n,t,l){const i={},o=h(t,["systemInstruction"]);l!==void 0&&o!=null&&p(l,["systemInstruction"],Kt(o));const c=h(t,["temperature"]);c!=null&&p(i,["temperature"],c);const u=h(t,["topP"]);u!=null&&p(i,["topP"],u);const f=h(t,["topK"]);f!=null&&p(i,["topK"],f);const x=h(t,["candidateCount"]);x!=null&&p(i,["candidateCount"],x);const m=h(t,["maxOutputTokens"]);m!=null&&p(i,["maxOutputTokens"],m);const b=h(t,["stopSequences"]);b!=null&&p(i,["stopSequences"],b);const y=h(t,["responseLogprobs"]);y!=null&&p(i,["responseLogprobs"],y);const N=h(t,["logprobs"]);N!=null&&p(i,["logprobs"],N);const C=h(t,["presencePenalty"]);C!=null&&p(i,["presencePenalty"],C);const A=h(t,["frequencyPenalty"]);A!=null&&p(i,["frequencyPenalty"],A);const E=h(t,["seed"]);E!=null&&p(i,["seed"],E);const R=h(t,["responseMimeType"]);R!=null&&p(i,["responseMimeType"],R);const P=h(t,["responseSchema"]);P!=null&&p(i,["responseSchema"],Ah(P));const O=h(t,["responseJsonSchema"]);O!=null&&p(i,["responseJsonSchema"],O);const z=h(t,["routingConfig"]);z!=null&&p(i,["routingConfig"],z);const K=h(t,["modelSelectionConfig"]);K!=null&&p(i,["modelConfig"],K);const G=h(t,["safetySettings"]);if(l!==void 0&&G!=null){let w=G;Array.isArray(w)&&(w=w.map(D=>D)),p(l,["safetySettings"],w)}const F=h(t,["tools"]);if(l!==void 0&&F!=null){let w=hi(F);Array.isArray(w)&&(w=w.map(D=>av(ui(D)))),p(l,["tools"],w)}const $=h(t,["toolConfig"]);l!==void 0&&$!=null&&p(l,["toolConfig"],$);const B=h(t,["labels"]);l!==void 0&&B!=null&&p(l,["labels"],B);const q=h(t,["cachedContent"]);l!==void 0&&q!=null&&p(l,["cachedContent"],Dn(n,q));const J=h(t,["responseModalities"]);J!=null&&p(i,["responseModalities"],J);const Q=h(t,["mediaResolution"]);Q!=null&&p(i,["mediaResolution"],Q);const U=h(t,["speechConfig"]);U!=null&&p(i,["speechConfig"],lv(Mh(U)));const ae=h(t,["audioTimestamp"]);ae!=null&&p(i,["audioTimestamp"],ae);const se=h(t,["thinkingConfig"]);se!=null&&p(i,["thinkingConfig"],se);const ne=h(t,["imageConfig"]);return ne!=null&&p(i,["imageConfig"],SC(ne)),i}function gg(n,t){const l={},i=h(t,["model"]);i!=null&&p(l,["_url","model"],Ke(n,i));const o=h(t,["contents"]);if(o!=null){let u=Rs(o);Array.isArray(u)&&(u=u.map(f=>xc(f))),p(l,["contents"],u)}const c=h(t,["config"]);return c!=null&&p(l,["generationConfig"],X4(n,c,l)),l}function bg(n,t){const l={},i=h(t,["model"]);i!=null&&p(l,["_url","model"],Ke(n,i));const o=h(t,["contents"]);if(o!=null){let u=Rs(o);Array.isArray(u)&&(u=u.map(f=>f)),p(l,["contents"],u)}const c=h(t,["config"]);return c!=null&&p(l,["generationConfig"],Z4(n,c,l)),l}function vg(n){const t={},l=h(n,["sdkHttpResponse"]);l!=null&&p(t,["sdkHttpResponse"],l);const i=h(n,["candidates"]);if(i!=null){let x=i;Array.isArray(x)&&(x=x.map(m=>y4(m))),p(t,["candidates"],x)}const o=h(n,["modelVersion"]);o!=null&&p(t,["modelVersion"],o);const c=h(n,["promptFeedback"]);c!=null&&p(t,["promptFeedback"],c);const u=h(n,["responseId"]);u!=null&&p(t,["responseId"],u);const f=h(n,["usageMetadata"]);return f!=null&&p(t,["usageMetadata"],f),t}function yg(n){const t={},l=h(n,["sdkHttpResponse"]);l!=null&&p(t,["sdkHttpResponse"],l);const i=h(n,["candidates"]);if(i!=null){let m=i;Array.isArray(m)&&(m=m.map(b=>b)),p(t,["candidates"],m)}const o=h(n,["createTime"]);o!=null&&p(t,["createTime"],o);const c=h(n,["modelVersion"]);c!=null&&p(t,["modelVersion"],c);const u=h(n,["promptFeedback"]);u!=null&&p(t,["promptFeedback"],u);const f=h(n,["responseId"]);f!=null&&p(t,["responseId"],f);const x=h(n,["usageMetadata"]);return x!=null&&p(t,["usageMetadata"],x),t}function W4(n,t){const l={};if(h(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(h(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=h(n,["numberOfImages"]);t!==void 0&&i!=null&&p(t,["parameters","sampleCount"],i);const o=h(n,["aspectRatio"]);t!==void 0&&o!=null&&p(t,["parameters","aspectRatio"],o);const c=h(n,["guidanceScale"]);if(t!==void 0&&c!=null&&p(t,["parameters","guidanceScale"],c),h(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=h(n,["safetyFilterLevel"]);t!==void 0&&u!=null&&p(t,["parameters","safetySetting"],u);const f=h(n,["personGeneration"]);t!==void 0&&f!=null&&p(t,["parameters","personGeneration"],f);const x=h(n,["includeSafetyAttributes"]);t!==void 0&&x!=null&&p(t,["parameters","includeSafetyAttributes"],x);const m=h(n,["includeRaiReason"]);t!==void 0&&m!=null&&p(t,["parameters","includeRaiReason"],m);const b=h(n,["language"]);t!==void 0&&b!=null&&p(t,["parameters","language"],b);const y=h(n,["outputMimeType"]);t!==void 0&&y!=null&&p(t,["parameters","outputOptions","mimeType"],y);const N=h(n,["outputCompressionQuality"]);if(t!==void 0&&N!=null&&p(t,["parameters","outputOptions","compressionQuality"],N),h(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(h(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const C=h(n,["imageSize"]);if(t!==void 0&&C!=null&&p(t,["parameters","sampleImageSize"],C),h(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return l}function eC(n,t){const l={},i=h(n,["outputGcsUri"]);t!==void 0&&i!=null&&p(t,["parameters","storageUri"],i);const o=h(n,["negativePrompt"]);t!==void 0&&o!=null&&p(t,["parameters","negativePrompt"],o);const c=h(n,["numberOfImages"]);t!==void 0&&c!=null&&p(t,["parameters","sampleCount"],c);const u=h(n,["aspectRatio"]);t!==void 0&&u!=null&&p(t,["parameters","aspectRatio"],u);const f=h(n,["guidanceScale"]);t!==void 0&&f!=null&&p(t,["parameters","guidanceScale"],f);const x=h(n,["seed"]);t!==void 0&&x!=null&&p(t,["parameters","seed"],x);const m=h(n,["safetyFilterLevel"]);t!==void 0&&m!=null&&p(t,["parameters","safetySetting"],m);const b=h(n,["personGeneration"]);t!==void 0&&b!=null&&p(t,["parameters","personGeneration"],b);const y=h(n,["includeSafetyAttributes"]);t!==void 0&&y!=null&&p(t,["parameters","includeSafetyAttributes"],y);const N=h(n,["includeRaiReason"]);t!==void 0&&N!=null&&p(t,["parameters","includeRaiReason"],N);const C=h(n,["language"]);t!==void 0&&C!=null&&p(t,["parameters","language"],C);const A=h(n,["outputMimeType"]);t!==void 0&&A!=null&&p(t,["parameters","outputOptions","mimeType"],A);const E=h(n,["outputCompressionQuality"]);t!==void 0&&E!=null&&p(t,["parameters","outputOptions","compressionQuality"],E);const R=h(n,["addWatermark"]);t!==void 0&&R!=null&&p(t,["parameters","addWatermark"],R);const P=h(n,["labels"]);t!==void 0&&P!=null&&p(t,["labels"],P);const O=h(n,["imageSize"]);t!==void 0&&O!=null&&p(t,["parameters","sampleImageSize"],O);const z=h(n,["enhancePrompt"]);return t!==void 0&&z!=null&&p(t,["parameters","enhancePrompt"],z),l}function tC(n,t){const l={},i=h(t,["model"]);i!=null&&p(l,["_url","model"],Ke(n,i));const o=h(t,["prompt"]);o!=null&&p(l,["instances[0]","prompt"],o);const c=h(t,["config"]);return c!=null&&W4(c,l),l}function sC(n,t){const l={},i=h(t,["model"]);i!=null&&p(l,["_url","model"],Ke(n,i));const o=h(t,["prompt"]);o!=null&&p(l,["instances[0]","prompt"],o);const c=h(t,["config"]);return c!=null&&eC(c,l),l}function nC(n){const t={},l=h(n,["sdkHttpResponse"]);l!=null&&p(t,["sdkHttpResponse"],l);const i=h(n,["predictions"]);if(i!=null){let c=i;Array.isArray(c)&&(c=c.map(u=>mC(u))),p(t,["generatedImages"],c)}const o=h(n,["positivePromptSafetyAttributes"]);return o!=null&&p(t,["positivePromptSafetyAttributes"],sv(o)),t}function lC(n){const t={},l=h(n,["sdkHttpResponse"]);l!=null&&p(t,["sdkHttpResponse"],l);const i=h(n,["predictions"]);if(i!=null){let c=i;Array.isArray(c)&&(c=c.map(u=>mc(u))),p(t,["generatedImages"],c)}const o=h(n,["positivePromptSafetyAttributes"]);return o!=null&&p(t,["positivePromptSafetyAttributes"],nv(o)),t}function aC(n,t){const l={},i=h(n,["numberOfVideos"]);if(t!==void 0&&i!=null&&p(t,["parameters","sampleCount"],i),h(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(h(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const o=h(n,["durationSeconds"]);if(t!==void 0&&o!=null&&p(t,["parameters","durationSeconds"],o),h(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const c=h(n,["aspectRatio"]);t!==void 0&&c!=null&&p(t,["parameters","aspectRatio"],c);const u=h(n,["resolution"]);t!==void 0&&u!=null&&p(t,["parameters","resolution"],u);const f=h(n,["personGeneration"]);if(t!==void 0&&f!=null&&p(t,["parameters","personGeneration"],f),h(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const x=h(n,["negativePrompt"]);t!==void 0&&x!=null&&p(t,["parameters","negativePrompt"],x);const m=h(n,["enhancePrompt"]);if(t!==void 0&&m!=null&&p(t,["parameters","enhancePrompt"],m),h(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const b=h(n,["lastFrame"]);t!==void 0&&b!=null&&p(t,["instances[0]","lastFrame"],pc(b));const y=h(n,["referenceImages"]);if(t!==void 0&&y!=null){let N=y;Array.isArray(N)&&(N=N.map(C=>rk(C))),p(t,["instances[0]","referenceImages"],N)}if(h(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(h(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return l}function iC(n,t){const l={},i=h(n,["numberOfVideos"]);t!==void 0&&i!=null&&p(t,["parameters","sampleCount"],i);const o=h(n,["outputGcsUri"]);t!==void 0&&o!=null&&p(t,["parameters","storageUri"],o);const c=h(n,["fps"]);t!==void 0&&c!=null&&p(t,["parameters","fps"],c);const u=h(n,["durationSeconds"]);t!==void 0&&u!=null&&p(t,["parameters","durationSeconds"],u);const f=h(n,["seed"]);t!==void 0&&f!=null&&p(t,["parameters","seed"],f);const x=h(n,["aspectRatio"]);t!==void 0&&x!=null&&p(t,["parameters","aspectRatio"],x);const m=h(n,["resolution"]);t!==void 0&&m!=null&&p(t,["parameters","resolution"],m);const b=h(n,["personGeneration"]);t!==void 0&&b!=null&&p(t,["parameters","personGeneration"],b);const y=h(n,["pubsubTopic"]);t!==void 0&&y!=null&&p(t,["parameters","pubsubTopic"],y);const N=h(n,["negativePrompt"]);t!==void 0&&N!=null&&p(t,["parameters","negativePrompt"],N);const C=h(n,["enhancePrompt"]);t!==void 0&&C!=null&&p(t,["parameters","enhancePrompt"],C);const A=h(n,["generateAudio"]);t!==void 0&&A!=null&&p(t,["parameters","generateAudio"],A);const E=h(n,["lastFrame"]);t!==void 0&&E!=null&&p(t,["instances[0]","lastFrame"],Bs(E));const R=h(n,["referenceImages"]);if(t!==void 0&&R!=null){let z=R;Array.isArray(z)&&(z=z.map(K=>ok(K))),p(t,["instances[0]","referenceImages"],z)}const P=h(n,["mask"]);t!==void 0&&P!=null&&p(t,["instances[0]","mask"],ik(P));const O=h(n,["compressionQuality"]);return t!==void 0&&O!=null&&p(t,["parameters","compressionQuality"],O),l}function rC(n){const t={},l=h(n,["name"]);l!=null&&p(t,["name"],l);const i=h(n,["metadata"]);i!=null&&p(t,["metadata"],i);const o=h(n,["done"]);o!=null&&p(t,["done"],o);const c=h(n,["error"]);c!=null&&p(t,["error"],c);const u=h(n,["response","generateVideoResponse"]);return u!=null&&p(t,["response"],uC(u)),t}function oC(n){const t={},l=h(n,["name"]);l!=null&&p(t,["name"],l);const i=h(n,["metadata"]);i!=null&&p(t,["metadata"],i);const o=h(n,["done"]);o!=null&&p(t,["done"],o);const c=h(n,["error"]);c!=null&&p(t,["error"],c);const u=h(n,["response"]);return u!=null&&p(t,["response"],hC(u)),t}function cC(n,t){const l={},i=h(t,["model"]);i!=null&&p(l,["_url","model"],Ke(n,i));const o=h(t,["prompt"]);o!=null&&p(l,["instances[0]","prompt"],o);const c=h(t,["image"]);c!=null&&p(l,["instances[0]","image"],pc(c));const u=h(t,["video"]);u!=null&&p(l,["instances[0]","video"],iv(u));const f=h(t,["source"]);f!=null&&fC(f,l);const x=h(t,["config"]);return x!=null&&aC(x,l),l}function dC(n,t){const l={},i=h(t,["model"]);i!=null&&p(l,["_url","model"],Ke(n,i));const o=h(t,["prompt"]);o!=null&&p(l,["instances[0]","prompt"],o);const c=h(t,["image"]);c!=null&&p(l,["instances[0]","image"],Bs(c));const u=h(t,["video"]);u!=null&&p(l,["instances[0]","video"],rv(u));const f=h(t,["source"]);f!=null&&xC(f,l);const x=h(t,["config"]);return x!=null&&iC(x,l),l}function uC(n){const t={},l=h(n,["generatedSamples"]);if(l!=null){let c=l;Array.isArray(c)&&(c=c.map(u=>gC(u))),p(t,["generatedVideos"],c)}const i=h(n,["raiMediaFilteredCount"]);i!=null&&p(t,["raiMediaFilteredCount"],i);const o=h(n,["raiMediaFilteredReasons"]);return o!=null&&p(t,["raiMediaFilteredReasons"],o),t}function hC(n){const t={},l=h(n,["videos"]);if(l!=null){let c=l;Array.isArray(c)&&(c=c.map(u=>bC(u))),p(t,["generatedVideos"],c)}const i=h(n,["raiMediaFilteredCount"]);i!=null&&p(t,["raiMediaFilteredCount"],i);const o=h(n,["raiMediaFilteredReasons"]);return o!=null&&p(t,["raiMediaFilteredReasons"],o),t}function fC(n,t){const l={},i=h(n,["prompt"]);t!==void 0&&i!=null&&p(t,["instances[0]","prompt"],i);const o=h(n,["image"]);t!==void 0&&o!=null&&p(t,["instances[0]","image"],pc(o));const c=h(n,["video"]);return t!==void 0&&c!=null&&p(t,["instances[0]","video"],iv(c)),l}function xC(n,t){const l={},i=h(n,["prompt"]);t!==void 0&&i!=null&&p(t,["instances[0]","prompt"],i);const o=h(n,["image"]);t!==void 0&&o!=null&&p(t,["instances[0]","image"],Bs(o));const c=h(n,["video"]);return t!==void 0&&c!=null&&p(t,["instances[0]","video"],rv(c)),l}function mC(n){const t={},l=h(n,["_self"]);l!=null&&p(t,["image"],CC(l));const i=h(n,["raiFilteredReason"]);i!=null&&p(t,["raiFilteredReason"],i);const o=h(n,["_self"]);return o!=null&&p(t,["safetyAttributes"],sv(o)),t}function mc(n){const t={},l=h(n,["_self"]);l!=null&&p(t,["image"],tv(l));const i=h(n,["raiFilteredReason"]);i!=null&&p(t,["raiFilteredReason"],i);const o=h(n,["_self"]);o!=null&&p(t,["safetyAttributes"],nv(o));const c=h(n,["prompt"]);return c!=null&&p(t,["enhancedPrompt"],c),t}function pC(n){const t={},l=h(n,["_self"]);l!=null&&p(t,["mask"],tv(l));const i=h(n,["labels"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(c=>c)),p(t,["labels"],o)}return t}function gC(n){const t={},l=h(n,["video"]);return l!=null&&p(t,["video"],lk(l)),t}function bC(n){const t={},l=h(n,["_self"]);return l!=null&&p(t,["video"],ak(l)),t}function vC(n){const t={},l=h(n,["modelSelectionConfig"]);l!=null&&p(t,["modelConfig"],l);const i=h(n,["responseJsonSchema"]);i!=null&&p(t,["responseJsonSchema"],i);const o=h(n,["audioTimestamp"]);o!=null&&p(t,["audioTimestamp"],o);const c=h(n,["candidateCount"]);c!=null&&p(t,["candidateCount"],c);const u=h(n,["enableAffectiveDialog"]);u!=null&&p(t,["enableAffectiveDialog"],u);const f=h(n,["frequencyPenalty"]);f!=null&&p(t,["frequencyPenalty"],f);const x=h(n,["logprobs"]);x!=null&&p(t,["logprobs"],x);const m=h(n,["maxOutputTokens"]);m!=null&&p(t,["maxOutputTokens"],m);const b=h(n,["mediaResolution"]);b!=null&&p(t,["mediaResolution"],b);const y=h(n,["presencePenalty"]);y!=null&&p(t,["presencePenalty"],y);const N=h(n,["responseLogprobs"]);N!=null&&p(t,["responseLogprobs"],N);const C=h(n,["responseMimeType"]);C!=null&&p(t,["responseMimeType"],C);const A=h(n,["responseModalities"]);A!=null&&p(t,["responseModalities"],A);const E=h(n,["responseSchema"]);E!=null&&p(t,["responseSchema"],E);const R=h(n,["routingConfig"]);R!=null&&p(t,["routingConfig"],R);const P=h(n,["seed"]);P!=null&&p(t,["seed"],P);const O=h(n,["speechConfig"]);O!=null&&p(t,["speechConfig"],lv(O));const z=h(n,["stopSequences"]);z!=null&&p(t,["stopSequences"],z);const K=h(n,["temperature"]);K!=null&&p(t,["temperature"],K);const G=h(n,["thinkingConfig"]);G!=null&&p(t,["thinkingConfig"],G);const F=h(n,["topK"]);F!=null&&p(t,["topK"],F);const $=h(n,["topP"]);if($!=null&&p(t,["topP"],$),h(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function yC(n,t){const l={},i=h(t,["model"]);return i!=null&&p(l,["_url","name"],Ke(n,i)),l}function NC(n,t){const l={},i=h(t,["model"]);return i!=null&&p(l,["_url","name"],Ke(n,i)),l}function jC(n){const t={};if(h(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const l=h(n,["enableWidget"]);return l!=null&&p(t,["enableWidget"],l),t}function wC(n){const t={};if(h(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(h(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const l=h(n,["timeRangeFilter"]);return l!=null&&p(t,["timeRangeFilter"],l),t}function _C(n){const t={},l=h(n,["aspectRatio"]);l!=null&&p(t,["aspectRatio"],l);const i=h(n,["imageSize"]);if(i!=null&&p(t,["imageSize"],i),h(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(h(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function SC(n){const t={},l=h(n,["aspectRatio"]);l!=null&&p(t,["aspectRatio"],l);const i=h(n,["imageSize"]);i!=null&&p(t,["imageSize"],i);const o=h(n,["outputMimeType"]);o!=null&&p(t,["imageOutputOptions","mimeType"],o);const c=h(n,["outputCompressionQuality"]);return c!=null&&p(t,["imageOutputOptions","compressionQuality"],c),t}function CC(n){const t={},l=h(n,["bytesBase64Encoded"]);l!=null&&p(t,["imageBytes"],xl(l));const i=h(n,["mimeType"]);return i!=null&&p(t,["mimeType"],i),t}function tv(n){const t={},l=h(n,["gcsUri"]);l!=null&&p(t,["gcsUri"],l);const i=h(n,["bytesBase64Encoded"]);i!=null&&p(t,["imageBytes"],xl(i));const o=h(n,["mimeType"]);return o!=null&&p(t,["mimeType"],o),t}function pc(n){const t={};if(h(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const l=h(n,["imageBytes"]);l!=null&&p(t,["bytesBase64Encoded"],xl(l));const i=h(n,["mimeType"]);return i!=null&&p(t,["mimeType"],i),t}function Bs(n){const t={},l=h(n,["gcsUri"]);l!=null&&p(t,["gcsUri"],l);const i=h(n,["imageBytes"]);i!=null&&p(t,["bytesBase64Encoded"],xl(i));const o=h(n,["mimeType"]);return o!=null&&p(t,["mimeType"],o),t}function kC(n,t,l){const i={},o=h(t,["pageSize"]);l!==void 0&&o!=null&&p(l,["_query","pageSize"],o);const c=h(t,["pageToken"]);l!==void 0&&c!=null&&p(l,["_query","pageToken"],c);const u=h(t,["filter"]);l!==void 0&&u!=null&&p(l,["_query","filter"],u);const f=h(t,["queryBase"]);return l!==void 0&&f!=null&&p(l,["_url","models_url"],Jb(n,f)),i}function EC(n,t,l){const i={},o=h(t,["pageSize"]);l!==void 0&&o!=null&&p(l,["_query","pageSize"],o);const c=h(t,["pageToken"]);l!==void 0&&c!=null&&p(l,["_query","pageToken"],c);const u=h(t,["filter"]);l!==void 0&&u!=null&&p(l,["_query","filter"],u);const f=h(t,["queryBase"]);return l!==void 0&&f!=null&&p(l,["_url","models_url"],Jb(n,f)),i}function TC(n,t){const l={},i=h(t,["config"]);return i!=null&&kC(n,i,l),l}function AC(n,t){const l={},i=h(t,["config"]);return i!=null&&EC(n,i,l),l}function MC(n){const t={},l=h(n,["sdkHttpResponse"]);l!=null&&p(t,["sdkHttpResponse"],l);const i=h(n,["nextPageToken"]);i!=null&&p(t,["nextPageToken"],i);const o=h(n,["_self"]);if(o!=null){let c=Yb(o);Array.isArray(c)&&(c=c.map(u=>ah(u))),p(t,["models"],c)}return t}function DC(n){const t={},l=h(n,["sdkHttpResponse"]);l!=null&&p(t,["sdkHttpResponse"],l);const i=h(n,["nextPageToken"]);i!=null&&p(t,["nextPageToken"],i);const o=h(n,["_self"]);if(o!=null){let c=Yb(o);Array.isArray(c)&&(c=c.map(u=>ih(u))),p(t,["models"],c)}return t}function RC(n){const t={},l=h(n,["maskMode"]);l!=null&&p(t,["maskMode"],l);const i=h(n,["segmentationClasses"]);i!=null&&p(t,["maskClasses"],i);const o=h(n,["maskDilation"]);return o!=null&&p(t,["dilation"],o),t}function ah(n){const t={},l=h(n,["name"]);l!=null&&p(t,["name"],l);const i=h(n,["displayName"]);i!=null&&p(t,["displayName"],i);const o=h(n,["description"]);o!=null&&p(t,["description"],o);const c=h(n,["version"]);c!=null&&p(t,["version"],c);const u=h(n,["_self"]);u!=null&&p(t,["tunedModelInfo"],KC(u));const f=h(n,["inputTokenLimit"]);f!=null&&p(t,["inputTokenLimit"],f);const x=h(n,["outputTokenLimit"]);x!=null&&p(t,["outputTokenLimit"],x);const m=h(n,["supportedGenerationMethods"]);m!=null&&p(t,["supportedActions"],m);const b=h(n,["temperature"]);b!=null&&p(t,["temperature"],b);const y=h(n,["maxTemperature"]);y!=null&&p(t,["maxTemperature"],y);const N=h(n,["topP"]);N!=null&&p(t,["topP"],N);const C=h(n,["topK"]);C!=null&&p(t,["topK"],C);const A=h(n,["thinking"]);return A!=null&&p(t,["thinking"],A),t}function ih(n){const t={},l=h(n,["name"]);l!=null&&p(t,["name"],l);const i=h(n,["displayName"]);i!=null&&p(t,["displayName"],i);const o=h(n,["description"]);o!=null&&p(t,["description"],o);const c=h(n,["versionId"]);c!=null&&p(t,["version"],c);const u=h(n,["deployedModels"]);if(u!=null){let y=u;Array.isArray(y)&&(y=y.map(N=>F4(N))),p(t,["endpoints"],y)}const f=h(n,["labels"]);f!=null&&p(t,["labels"],f);const x=h(n,["_self"]);x!=null&&p(t,["tunedModelInfo"],QC(x));const m=h(n,["defaultCheckpointId"]);m!=null&&p(t,["defaultCheckpointId"],m);const b=h(n,["checkpoints"]);if(b!=null){let y=b;Array.isArray(y)&&(y=y.map(N=>N)),p(t,["checkpoints"],y)}return t}function IC(n){const t={},l=h(n,["mediaResolution"]);l!=null&&p(t,["mediaResolution"],l);const i=h(n,["codeExecutionResult"]);i!=null&&p(t,["codeExecutionResult"],i);const o=h(n,["executableCode"]);o!=null&&p(t,["executableCode"],o);const c=h(n,["fileData"]);c!=null&&p(t,["fileData"],J4(c));const u=h(n,["functionCall"]);u!=null&&p(t,["functionCall"],Y4(u));const f=h(n,["functionResponse"]);f!=null&&p(t,["functionResponse"],f);const x=h(n,["inlineData"]);x!=null&&p(t,["inlineData"],v4(x));const m=h(n,["text"]);m!=null&&p(t,["text"],m);const b=h(n,["thought"]);b!=null&&p(t,["thought"],b);const y=h(n,["thoughtSignature"]);y!=null&&p(t,["thoughtSignature"],y);const N=h(n,["videoMetadata"]);return N!=null&&p(t,["videoMetadata"],N),t}function zC(n){const t={},l=h(n,["productImage"]);return l!=null&&p(t,["image"],Bs(l)),t}function LC(n,t){const l={},i=h(n,["numberOfImages"]);t!==void 0&&i!=null&&p(t,["parameters","sampleCount"],i);const o=h(n,["baseSteps"]);t!==void 0&&o!=null&&p(t,["parameters","baseSteps"],o);const c=h(n,["outputGcsUri"]);t!==void 0&&c!=null&&p(t,["parameters","storageUri"],c);const u=h(n,["seed"]);t!==void 0&&u!=null&&p(t,["parameters","seed"],u);const f=h(n,["safetyFilterLevel"]);t!==void 0&&f!=null&&p(t,["parameters","safetySetting"],f);const x=h(n,["personGeneration"]);t!==void 0&&x!=null&&p(t,["parameters","personGeneration"],x);const m=h(n,["addWatermark"]);t!==void 0&&m!=null&&p(t,["parameters","addWatermark"],m);const b=h(n,["outputMimeType"]);t!==void 0&&b!=null&&p(t,["parameters","outputOptions","mimeType"],b);const y=h(n,["outputCompressionQuality"]);t!==void 0&&y!=null&&p(t,["parameters","outputOptions","compressionQuality"],y);const N=h(n,["enhancePrompt"]);t!==void 0&&N!=null&&p(t,["parameters","enhancePrompt"],N);const C=h(n,["labels"]);return t!==void 0&&C!=null&&p(t,["labels"],C),l}function UC(n,t){const l={},i=h(t,["model"]);i!=null&&p(l,["_url","model"],Ke(n,i));const o=h(t,["source"]);o!=null&&$C(o,l);const c=h(t,["config"]);return c!=null&&LC(c,l),l}function PC(n){const t={},l=h(n,["predictions"]);if(l!=null){let i=l;Array.isArray(i)&&(i=i.map(o=>mc(o))),p(t,["generatedImages"],i)}return t}function $C(n,t){const l={},i=h(n,["prompt"]);t!==void 0&&i!=null&&p(t,["instances[0]","prompt"],i);const o=h(n,["personImage"]);t!==void 0&&o!=null&&p(t,["instances[0]","personImage","image"],Bs(o));const c=h(n,["productImages"]);if(t!==void 0&&c!=null){let u=c;Array.isArray(u)&&(u=u.map(f=>zC(f))),p(t,["instances[0]","productImages"],u)}return l}function qC(n){const t={},l=h(n,["referenceImage"]);l!=null&&p(t,["referenceImage"],Bs(l));const i=h(n,["referenceId"]);i!=null&&p(t,["referenceId"],i);const o=h(n,["referenceType"]);o!=null&&p(t,["referenceType"],o);const c=h(n,["maskImageConfig"]);c!=null&&p(t,["maskImageConfig"],RC(c));const u=h(n,["controlImageConfig"]);u!=null&&p(t,["controlImageConfig"],C4(u));const f=h(n,["styleImageConfig"]);f!=null&&p(t,["styleImageConfig"],f);const x=h(n,["subjectImageConfig"]);return x!=null&&p(t,["subjectImageConfig"],x),t}function sv(n){const t={},l=h(n,["safetyAttributes","categories"]);l!=null&&p(t,["categories"],l);const i=h(n,["safetyAttributes","scores"]);i!=null&&p(t,["scores"],i);const o=h(n,["contentType"]);return o!=null&&p(t,["contentType"],o),t}function nv(n){const t={},l=h(n,["safetyAttributes","categories"]);l!=null&&p(t,["categories"],l);const i=h(n,["safetyAttributes","scores"]);i!=null&&p(t,["scores"],i);const o=h(n,["contentType"]);return o!=null&&p(t,["contentType"],o),t}function OC(n){const t={},l=h(n,["category"]);if(l!=null&&p(t,["category"],l),h(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=h(n,["threshold"]);return i!=null&&p(t,["threshold"],i),t}function GC(n){const t={},l=h(n,["image"]);return l!=null&&p(t,["image"],Bs(l)),t}function HC(n,t){const l={},i=h(n,["mode"]);t!==void 0&&i!=null&&p(t,["parameters","mode"],i);const o=h(n,["maxPredictions"]);t!==void 0&&o!=null&&p(t,["parameters","maxPredictions"],o);const c=h(n,["confidenceThreshold"]);t!==void 0&&c!=null&&p(t,["parameters","confidenceThreshold"],c);const u=h(n,["maskDilation"]);t!==void 0&&u!=null&&p(t,["parameters","maskDilation"],u);const f=h(n,["binaryColorThreshold"]);t!==void 0&&f!=null&&p(t,["parameters","binaryColorThreshold"],f);const x=h(n,["labels"]);return t!==void 0&&x!=null&&p(t,["labels"],x),l}function BC(n,t){const l={},i=h(t,["model"]);i!=null&&p(l,["_url","model"],Ke(n,i));const o=h(t,["source"]);o!=null&&FC(o,l);const c=h(t,["config"]);return c!=null&&HC(c,l),l}function VC(n){const t={},l=h(n,["predictions"]);if(l!=null){let i=l;Array.isArray(i)&&(i=i.map(o=>pC(o))),p(t,["generatedMasks"],i)}return t}function FC(n,t){const l={},i=h(n,["prompt"]);t!==void 0&&i!=null&&p(t,["instances[0]","prompt"],i);const o=h(n,["image"]);t!==void 0&&o!=null&&p(t,["instances[0]","image"],Bs(o));const c=h(n,["scribbleImage"]);return t!==void 0&&c!=null&&p(t,["instances[0]","scribble"],GC(c)),l}function lv(n){const t={},l=h(n,["languageCode"]);l!=null&&p(t,["languageCode"],l);const i=h(n,["voiceConfig"]);if(i!=null&&p(t,["voiceConfig"],i),h(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return t}function JC(n){const t={},l=h(n,["functionCallingConfig"]);l!=null&&p(t,["functionCallingConfig"],K4(l));const i=h(n,["retrievalConfig"]);return i!=null&&p(t,["retrievalConfig"],i),t}function YC(n){const t={},l=h(n,["functionDeclarations"]);if(l!=null){let b=l;Array.isArray(b)&&(b=b.map(y=>y)),p(t,["functionDeclarations"],b)}if(h(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=h(n,["googleSearchRetrieval"]);i!=null&&p(t,["googleSearchRetrieval"],i);const o=h(n,["computerUse"]);o!=null&&p(t,["computerUse"],o);const c=h(n,["fileSearch"]);c!=null&&p(t,["fileSearch"],c);const u=h(n,["codeExecution"]);if(u!=null&&p(t,["codeExecution"],u),h(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=h(n,["googleMaps"]);f!=null&&p(t,["googleMaps"],jC(f));const x=h(n,["googleSearch"]);x!=null&&p(t,["googleSearch"],wC(x));const m=h(n,["urlContext"]);return m!=null&&p(t,["urlContext"],m),t}function av(n){const t={},l=h(n,["functionDeclarations"]);if(l!=null){let y=l;Array.isArray(y)&&(y=y.map(N=>Q4(N))),p(t,["functionDeclarations"],y)}const i=h(n,["retrieval"]);i!=null&&p(t,["retrieval"],i);const o=h(n,["googleSearchRetrieval"]);o!=null&&p(t,["googleSearchRetrieval"],o);const c=h(n,["computerUse"]);if(c!=null&&p(t,["computerUse"],c),h(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=h(n,["codeExecution"]);u!=null&&p(t,["codeExecution"],u);const f=h(n,["enterpriseWebSearch"]);f!=null&&p(t,["enterpriseWebSearch"],f);const x=h(n,["googleMaps"]);x!=null&&p(t,["googleMaps"],x);const m=h(n,["googleSearch"]);m!=null&&p(t,["googleSearch"],m);const b=h(n,["urlContext"]);return b!=null&&p(t,["urlContext"],b),t}function KC(n){const t={},l=h(n,["baseModel"]);l!=null&&p(t,["baseModel"],l);const i=h(n,["createTime"]);i!=null&&p(t,["createTime"],i);const o=h(n,["updateTime"]);return o!=null&&p(t,["updateTime"],o),t}function QC(n){const t={},l=h(n,["labels","google-vertex-llm-tuning-base-model-id"]);l!=null&&p(t,["baseModel"],l);const i=h(n,["createTime"]);i!=null&&p(t,["createTime"],i);const o=h(n,["updateTime"]);return o!=null&&p(t,["updateTime"],o),t}function XC(n,t){const l={},i=h(n,["displayName"]);t!==void 0&&i!=null&&p(t,["displayName"],i);const o=h(n,["description"]);t!==void 0&&o!=null&&p(t,["description"],o);const c=h(n,["defaultCheckpointId"]);return t!==void 0&&c!=null&&p(t,["defaultCheckpointId"],c),l}function ZC(n,t){const l={},i=h(n,["displayName"]);t!==void 0&&i!=null&&p(t,["displayName"],i);const o=h(n,["description"]);t!==void 0&&o!=null&&p(t,["description"],o);const c=h(n,["defaultCheckpointId"]);return t!==void 0&&c!=null&&p(t,["defaultCheckpointId"],c),l}function WC(n,t){const l={},i=h(t,["model"]);i!=null&&p(l,["_url","name"],Ke(n,i));const o=h(t,["config"]);return o!=null&&XC(o,l),l}function ek(n,t){const l={},i=h(t,["model"]);i!=null&&p(l,["_url","model"],Ke(n,i));const o=h(t,["config"]);return o!=null&&ZC(o,l),l}function tk(n,t){const l={},i=h(n,["outputGcsUri"]);t!==void 0&&i!=null&&p(t,["parameters","storageUri"],i);const o=h(n,["safetyFilterLevel"]);t!==void 0&&o!=null&&p(t,["parameters","safetySetting"],o);const c=h(n,["personGeneration"]);t!==void 0&&c!=null&&p(t,["parameters","personGeneration"],c);const u=h(n,["includeRaiReason"]);t!==void 0&&u!=null&&p(t,["parameters","includeRaiReason"],u);const f=h(n,["outputMimeType"]);t!==void 0&&f!=null&&p(t,["parameters","outputOptions","mimeType"],f);const x=h(n,["outputCompressionQuality"]);t!==void 0&&x!=null&&p(t,["parameters","outputOptions","compressionQuality"],x);const m=h(n,["enhanceInputImage"]);t!==void 0&&m!=null&&p(t,["parameters","upscaleConfig","enhanceInputImage"],m);const b=h(n,["imagePreservationFactor"]);t!==void 0&&b!=null&&p(t,["parameters","upscaleConfig","imagePreservationFactor"],b);const y=h(n,["labels"]);t!==void 0&&y!=null&&p(t,["labels"],y);const N=h(n,["numberOfImages"]);t!==void 0&&N!=null&&p(t,["parameters","sampleCount"],N);const C=h(n,["mode"]);return t!==void 0&&C!=null&&p(t,["parameters","mode"],C),l}function sk(n,t){const l={},i=h(t,["model"]);i!=null&&p(l,["_url","model"],Ke(n,i));const o=h(t,["image"]);o!=null&&p(l,["instances[0]","image"],Bs(o));const c=h(t,["upscaleFactor"]);c!=null&&p(l,["parameters","upscaleConfig","upscaleFactor"],c);const u=h(t,["config"]);return u!=null&&tk(u,l),l}function nk(n){const t={},l=h(n,["sdkHttpResponse"]);l!=null&&p(t,["sdkHttpResponse"],l);const i=h(n,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(c=>mc(c))),p(t,["generatedImages"],o)}return t}function lk(n){const t={},l=h(n,["uri"]);l!=null&&p(t,["uri"],l);const i=h(n,["encodedVideo"]);i!=null&&p(t,["videoBytes"],xl(i));const o=h(n,["encoding"]);return o!=null&&p(t,["mimeType"],o),t}function ak(n){const t={},l=h(n,["gcsUri"]);l!=null&&p(t,["uri"],l);const i=h(n,["bytesBase64Encoded"]);i!=null&&p(t,["videoBytes"],xl(i));const o=h(n,["mimeType"]);return o!=null&&p(t,["mimeType"],o),t}function ik(n){const t={},l=h(n,["image"]);l!=null&&p(t,["_self"],Bs(l));const i=h(n,["maskMode"]);return i!=null&&p(t,["maskMode"],i),t}function rk(n){const t={},l=h(n,["image"]);l!=null&&p(t,["image"],pc(l));const i=h(n,["referenceType"]);return i!=null&&p(t,["referenceType"],i),t}function ok(n){const t={},l=h(n,["image"]);l!=null&&p(t,["image"],Bs(l));const i=h(n,["referenceType"]);return i!=null&&p(t,["referenceType"],i),t}function iv(n){const t={},l=h(n,["uri"]);l!=null&&p(t,["uri"],l);const i=h(n,["videoBytes"]);i!=null&&p(t,["encodedVideo"],xl(i));const o=h(n,["mimeType"]);return o!=null&&p(t,["encoding"],o),t}function rv(n){const t={},l=h(n,["uri"]);l!=null&&p(t,["gcsUri"],l);const i=h(n,["videoBytes"]);i!=null&&p(t,["bytesBase64Encoded"],xl(i));const o=h(n,["mimeType"]);return o!=null&&p(t,["mimeType"],o),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ck="Content-Type",dk="X-Server-Timeout",uk="User-Agent",rh="x-goog-api-client",hk="1.30.0",fk=`google-genai-sdk/${hk}`,xk="v1beta1",mk="v1beta",Ng=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class pk{constructor(t){var l,i;this.clientOptions=Object.assign(Object.assign({},t),{project:t.project,location:t.location,apiKey:t.apiKey,vertexai:t.vertexai});const o={};this.clientOptions.vertexai?(o.apiVersion=(l=this.clientOptions.apiVersion)!==null&&l!==void 0?l:xk,o.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(o.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:mk,o.baseUrl="https://generativelanguage.googleapis.com/"),o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,t.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,t.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var t;return(t=this.clientOptions.vertexai)!==null&&t!==void 0?t:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(t){if(!t||t.baseUrl===void 0||t.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[t.baseUrl.endsWith("/")?t.baseUrl.slice(0,-1):t.baseUrl];return t.apiVersion&&t.apiVersion!==""&&i.push(t.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const t=this.getBaseUrl(),l=new URL(t);return l.protocol=l.protocol=="http:"?"ws":"wss",l.toString()}setBaseUrl(t){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=t;else throw new Error("HTTP options are not correctly set.")}constructUrl(t,l,i){const o=[this.getRequestUrlInternal(l)];return i&&o.push(this.getBaseResourcePath()),t!==""&&o.push(t),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(t){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||t.path.startsWith("projects/")||t.httpMethod==="GET"&&t.path.startsWith("publishers/google/models"))}async request(t){let l=this.clientOptions.httpOptions;t.httpOptions&&(l=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const i=this.shouldPrependVertexProjectPath(t),o=this.constructUrl(t.path,l,i);if(t.queryParams)for(const[u,f]of Object.entries(t.queryParams))o.searchParams.append(u,String(f));let c={};if(t.httpMethod==="GET"){if(t.body&&t.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else c.body=t.body;return c=await this.includeExtraHttpOptionsToRequestInit(c,l,o.toString(),t.abortSignal),this.unaryApiCall(o,c,t.httpMethod)}patchHttpOptions(t,l){const i=JSON.parse(JSON.stringify(t));for(const[o,c]of Object.entries(l))typeof c=="object"?i[o]=Object.assign(Object.assign({},i[o]),c):c!==void 0&&(i[o]=c);return i}async requestStream(t){let l=this.clientOptions.httpOptions;t.httpOptions&&(l=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const i=this.shouldPrependVertexProjectPath(t),o=this.constructUrl(t.path,l,i);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let c={};return c.body=t.body,c=await this.includeExtraHttpOptionsToRequestInit(c,l,o.toString(),t.abortSignal),this.streamApiCall(o,c,t.httpMethod)}async includeExtraHttpOptionsToRequestInit(t,l,i,o){if(l&&l.timeout||o){const c=new AbortController,u=c.signal;if(l.timeout&&(l==null?void 0:l.timeout)>0){const f=setTimeout(()=>c.abort(),l.timeout);f&&typeof f.unref=="function"&&f.unref()}o&&o.addEventListener("abort",()=>{c.abort()}),t.signal=u}return l&&l.extraBody!==null&&gk(t,l.extraBody),t.headers=await this.getHeadersInternal(l,i),t}async unaryApiCall(t,l,i){return this.apiCall(t.toString(),Object.assign(Object.assign({},l),{method:i})).then(async o=>(await jg(o),new sh(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(t,l,i){return this.apiCall(t.toString(),Object.assign(Object.assign({},l),{method:i})).then(async o=>(await jg(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(t){var l;return Wa(this,arguments,function*(){const o=(l=t==null?void 0:t.body)===null||l===void 0?void 0:l.getReader(),c=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let u="";for(;;){const{done:f,value:x}=yield ft(o.read());if(f){if(u.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const m=c.decode(x,{stream:!0});try{const y=JSON.parse(m);if("error"in y){const N=JSON.parse(JSON.stringify(y.error)),C=N.status,A=N.code,E=`got status: ${C}. ${JSON.stringify(y)}`;if(A>=400&&A<600)throw new fc({message:E,status:A})}}catch(y){if(y.name==="ApiError")throw y}u+=m;let b=u.match(Ng);for(;b;){const y=b[1];try{const N=new Response(y,{headers:t==null?void 0:t.headers,status:t==null?void 0:t.status,statusText:t==null?void 0:t.statusText});yield yield ft(new sh(N)),u=u.slice(b[0].length),b=u.match(Ng)}catch(N){throw new Error(`exception parsing stream chunk ${y}. ${N}`)}}}}finally{o.releaseLock()}})}async apiCall(t,l){return fetch(t,l).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const t={},l=fk+" "+this.clientOptions.userAgentExtra;return t[uk]=l,t[rh]=l,t[ck]="application/json",t}async getHeadersInternal(t,l){const i=new Headers;if(t&&t.headers){for(const[o,c]of Object.entries(t.headers))i.append(o,c);t.timeout&&t.timeout>0&&i.append(dk,String(Math.ceil(t.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,l),i}getFileName(t){var l;let i="";return typeof t=="string"&&(i=t.replace(/[/\\]+$/,""),i=(l=i.split(/[/\\]/).pop())!==null&&l!==void 0?l:""),i}async uploadFile(t,l){var i;const o={};l!=null&&(o.mimeType=l.mimeType,o.name=l.name,o.displayName=l.displayName),o.name&&!o.name.startsWith("files/")&&(o.name=`files/${o.name}`);const c=this.clientOptions.uploader,u=await c.stat(t);o.sizeBytes=String(u.size);const f=(i=l==null?void 0:l.mimeType)!==null&&i!==void 0?i:u.type;if(f===void 0||f==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");o.mimeType=f;const x={file:o},m=this.getFileName(t),b=_e("upload/v1beta/files",x._url),y=await this.fetchUploadUrl(b,o.sizeBytes,o.mimeType,m,x,l==null?void 0:l.httpOptions);return c.upload(t,y,this)}async uploadFileToFileSearchStore(t,l,i){var o;const c=this.clientOptions.uploader,u=await c.stat(l),f=String(u.size),x=(o=i==null?void 0:i.mimeType)!==null&&o!==void 0?o:u.type;if(x===void 0||x==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const m=`upload/v1beta/${t}:uploadToFileSearchStore`,b=this.getFileName(l),y={};i!=null&&i.customMetadata&&(y.customMetadata=i.customMetadata),i!=null&&i.chunkingConfig&&(y.chunkingConfig=i.chunkingConfig);const N=await this.fetchUploadUrl(m,f,x,b,y,i==null?void 0:i.httpOptions);return c.uploadToFileSearchStore(l,N,this)}async downloadFile(t){await this.clientOptions.downloader.download(t,this)}async fetchUploadUrl(t,l,i,o,c,u){var f;let x={};u?x=u:x={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${l}`,"X-Goog-Upload-Header-Content-Type":`${i}`},o?{"X-Goog-Upload-File-Name":o}:{})};const m=await this.request({path:t,body:JSON.stringify(c),httpMethod:"POST",httpOptions:x});if(!m||!(m!=null&&m.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const b=(f=m==null?void 0:m.headers)===null||f===void 0?void 0:f["x-goog-upload-url"];if(b===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return b}}async function jg(n){var t;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const l=n.status;let i;!((t=n.headers.get("content-type"))===null||t===void 0)&&t.includes("application/json")?i=await n.json():i={error:{message:await n.text(),code:n.status,status:n.statusText}};const o=JSON.stringify(i);throw l>=400&&l<600?new fc({message:o,status:l}):new Error(o)}}function gk(n,t){if(!t||Object.keys(t).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let l={};if(typeof n.body=="string"&&n.body.length>0)try{const c=JSON.parse(n.body);if(typeof c=="object"&&c!==null&&!Array.isArray(c))l=c;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(c,u){const f=Object.assign({},c);for(const x in u)if(Object.prototype.hasOwnProperty.call(u,x)){const m=u[x],b=f[x];m&&typeof m=="object"&&!Array.isArray(m)&&b&&typeof b=="object"&&!Array.isArray(b)?f[x]=i(b,m):(b&&m&&typeof b!=typeof m&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${x}". Original type: ${typeof b}, New type: ${typeof m}. Overwriting.`),f[x]=m)}return f}const o=i(l,t);n.body=JSON.stringify(o)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const bk="mcp_used/unknown";let vk=!1;function ov(n){for(const t of n)if(yk(t)||typeof t=="object"&&"inputSchema"in t)return!0;return vk}function cv(n){var t;const l=(t=n[rh])!==null&&t!==void 0?t:"";n[rh]=(l+` ${bk}`).trimStart()}function yk(n){return n!==null&&typeof n=="object"&&n instanceof Rh}function Nk(n,t=100){return Wa(this,arguments,function*(){let i,o=0;for(;o<t;){const c=yield ft(n.listTools({cursor:i}));for(const u of c.tools)yield yield ft(u),o++;if(!c.nextCursor)break;i=c.nextCursor}})}class Rh{constructor(t=[],l){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=t,this.config=l}static create(t,l){return new Rh(t,l)}async initialize(){var t,l,i,o;if(this.mcpTools.length>0)return;const c={},u=[];for(const b of this.mcpClients)try{for(var f=!0,x=(l=void 0,pr(Nk(b))),m;m=await x.next(),t=m.done,!t;f=!0){o=m.value,f=!1;const y=o;u.push(y);const N=y.name;if(c[N])throw new Error(`Duplicate function name ${N} found in MCP tools. Please ensure function names are unique.`);c[N]=b}}catch(y){l={error:y}}finally{try{!f&&!t&&(i=x.return)&&await i.call(x)}finally{if(l)throw l.error}}this.mcpTools=u,this.functionNameToMcpClient=c}async tool(){return await this.initialize(),f5(this.mcpTools,this.config)}async callTool(t){await this.initialize();const l=[];for(const i of t)if(i.name in this.functionNameToMcpClient){const o=this.functionNameToMcpClient[i.name];let c;this.config.timeout&&(c={timeout:this.config.timeout});const u=await o.callTool({name:i.name,arguments:i.args},void 0,c);l.push({functionResponse:{name:i.name,response:u.isError?{error:u}:u}})}return l}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function jk(n,t,l){const i=new a5;let o;l.data instanceof Blob?o=JSON.parse(await l.data.text()):o=JSON.parse(l.data),Object.assign(i,o),t(i)}class wk{constructor(t,l,i){this.apiClient=t,this.auth=l,this.webSocketFactory=i}async connect(t){var l,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const o=this.apiClient.getWebsocketBaseUrl(),c=this.apiClient.getApiVersion(),u=Ck(this.apiClient.getDefaultHeaders()),f=this.apiClient.getApiKey(),x=`${o}/ws/google.ai.generativelanguage.${c}.GenerativeService.BidiGenerateMusic?key=${f}`;let m=()=>{};const b=new Promise(z=>{m=z}),y=t.callbacks,N=function(){m({})},C=this.apiClient,A={onopen:N,onmessage:z=>{jk(C,y.onmessage,z)},onerror:(l=y==null?void 0:y.onerror)!==null&&l!==void 0?l:function(z){},onclose:(i=y==null?void 0:y.onclose)!==null&&i!==void 0?i:function(z){}},E=this.webSocketFactory.create(x,Sk(u),A);E.connect(),await b;const O={setup:{model:Ke(this.apiClient,t.model)}};return E.send(JSON.stringify(O)),new _k(E,this.apiClient)}}class _k{constructor(t,l){this.conn=t,this.apiClient=l}async setWeightedPrompts(t){if(!t.weightedPrompts||Object.keys(t.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const l=d4(t);this.conn.send(JSON.stringify({clientContent:l}))}async setMusicGenerationConfig(t){t.musicGenerationConfig||(t.musicGenerationConfig={});const l=c4(t);this.conn.send(JSON.stringify(l))}sendPlaybackControl(t){const l={playbackControl:t};this.conn.send(JSON.stringify(l))}play(){this.sendPlaybackControl(Qa.PLAY)}pause(){this.sendPlaybackControl(Qa.PAUSE)}stop(){this.sendPlaybackControl(Qa.STOP)}resetContext(){this.sendPlaybackControl(Qa.RESET_CONTEXT)}close(){this.conn.close()}}function Sk(n){const t={};return n.forEach((l,i)=>{t[i]=l}),t}function Ck(n){const t=new Headers;for(const[l,i]of Object.entries(n))t.append(l,i);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const kk="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function Ek(n,t,l){const i=new l5;let o;l.data instanceof Blob?o=await l.data.text():l.data instanceof ArrayBuffer?o=new TextDecoder().decode(l.data):o=l.data;const c=JSON.parse(o);if(n.isVertexAI()){const u=f4(c);Object.assign(i,u)}else Object.assign(i,c);t(i)}class Tk{constructor(t,l,i){this.apiClient=t,this.auth=l,this.webSocketFactory=i,this.music=new wk(this.apiClient,this.auth,this.webSocketFactory)}async connect(t){var l,i,o,c,u,f;if(t.config&&t.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const x=this.apiClient.getWebsocketBaseUrl(),m=this.apiClient.getApiVersion();let b;const y=this.apiClient.getHeaders();t.config&&t.config.tools&&ov(t.config.tools)&&cv(y);const N=Rk(y);if(this.apiClient.isVertexAI())b=`${x}/ws/google.cloud.aiplatform.${m}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(N,b);else{const q=this.apiClient.getApiKey();let J="BidiGenerateContent",Q="key";q!=null&&q.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),m!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),J="BidiGenerateContentConstrained",Q="access_token"),b=`${x}/ws/google.ai.generativelanguage.${m}.GenerativeService.${J}?${Q}=${q}`}let C=()=>{};const A=new Promise(q=>{C=q}),E=t.callbacks,R=function(){var q;(q=E==null?void 0:E.onopen)===null||q===void 0||q.call(E),C({})},P=this.apiClient,O={onopen:R,onmessage:q=>{Ek(P,E.onmessage,q)},onerror:(l=E==null?void 0:E.onerror)!==null&&l!==void 0?l:function(q){},onclose:(i=E==null?void 0:E.onclose)!==null&&i!==void 0?i:function(q){}},z=this.webSocketFactory.create(b,Dk(N),O);z.connect(),await A;let K=Ke(this.apiClient,t.model);if(this.apiClient.isVertexAI()&&K.startsWith("publishers/")){const q=this.apiClient.getProject(),J=this.apiClient.getLocation();K=`projects/${q}/locations/${J}/`+K}let G={};this.apiClient.isVertexAI()&&((o=t.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(t.config===void 0?t.config={responseModalities:[rc.AUDIO]}:t.config.responseModalities=[rc.AUDIO]),!((c=t.config)===null||c===void 0)&&c.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const F=(f=(u=t.config)===null||u===void 0?void 0:u.tools)!==null&&f!==void 0?f:[],$=[];for(const q of F)if(this.isCallableTool(q)){const J=q;$.push(await J.tool())}else $.push(q);$.length>0&&(t.config.tools=$);const B={model:K,config:t.config,callbacks:t.callbacks};return this.apiClient.isVertexAI()?G=o4(this.apiClient,B):G=r4(this.apiClient,B),delete G.config,z.send(JSON.stringify(G)),new Mk(z,this.apiClient)}isCallableTool(t){return"callTool"in t&&typeof t.callTool=="function"}}const Ak={turnComplete:!0};class Mk{constructor(t,l){this.conn=t,this.apiClient=l}tLiveClientContent(t,l){if(l.turns!==null&&l.turns!==void 0){let i=[];try{i=Rs(l.turns),t.isVertexAI()||(i=i.map(o=>xc(o)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof l.turns}'`)}return{clientContent:{turns:i,turnComplete:l.turnComplete}}}return{clientContent:{turnComplete:l.turnComplete}}}tLiveClienttToolResponse(t,l){let i=[];if(l.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(l.functionResponses)?i=l.functionResponses:i=[l.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const c of i){if(typeof c!="object"||c===null||!("name"in c)||!("response"in c))throw new Error(`Could not parse function response, type '${typeof c}'.`);if(!t.isVertexAI()&&!("id"in c))throw new Error(kk)}return{toolResponse:{functionResponses:i}}}sendClientContent(t){t=Object.assign(Object.assign({},Ak),t);const l=this.tLiveClientContent(this.apiClient,t);this.conn.send(JSON.stringify(l))}sendRealtimeInput(t){let l={};this.apiClient.isVertexAI()?l={realtimeInput:h4(t)}:l={realtimeInput:u4(t)},this.conn.send(JSON.stringify(l))}sendToolResponse(t){if(t.functionResponses==null)throw new Error("Tool response parameters are required.");const l=this.tLiveClienttToolResponse(this.apiClient,t);this.conn.send(JSON.stringify(l))}close(){this.conn.close()}}function Dk(n){const t={};return n.forEach((l,i)=>{t[i]=l}),t}function Rk(n){const t=new Headers;for(const[l,i]of Object.entries(n))t.append(l,i);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const wg=10;function _g(n){var t,l,i;if(!((t=n==null?void 0:n.automaticFunctionCalling)===null||t===void 0)&&t.disable)return!0;let o=!1;for(const u of(l=n==null?void 0:n.tools)!==null&&l!==void 0?l:[])if(ei(u)){o=!0;break}if(!o)return!0;const c=(i=n==null?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return c&&(c<0||!Number.isInteger(c))||c==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",c),!0):!1}function ei(n){return"callTool"in n&&typeof n.callTool=="function"}function Ik(n){var t,l,i;return(i=(l=(t=n.config)===null||t===void 0?void 0:t.tools)===null||l===void 0?void 0:l.some(o=>ei(o)))!==null&&i!==void 0?i:!1}function Sg(n){var t;const l=[];return!((t=n==null?void 0:n.config)===null||t===void 0)&&t.tools&&n.config.tools.forEach((i,o)=>{if(ei(i))return;const c=i;c.functionDeclarations&&c.functionDeclarations.length>0&&l.push(o)}),l}function Cg(n){var t;return!(!((t=n==null?void 0:n.automaticFunctionCalling)===null||t===void 0)&&t.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class zk extends Mn{constructor(t){super(),this.apiClient=t,this.generateContent=async l=>{var i,o,c,u,f;const x=await this.processParamsMaybeAddMcpUsage(l);if(this.maybeMoveToResponseJsonSchem(l),!Ik(l)||_g(l.config))return await this.generateContentInternal(x);const m=Sg(l);if(m.length>0){const E=m.map(R=>`tools[${R}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${E}.`)}let b,y;const N=Rs(x.contents),C=(c=(o=(i=x.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&c!==void 0?c:wg;let A=0;for(;A<C&&(b=await this.generateContentInternal(x),!(!b.functionCalls||b.functionCalls.length===0));){const E=b.candidates[0].content,R=[];for(const P of(f=(u=l.config)===null||u===void 0?void 0:u.tools)!==null&&f!==void 0?f:[])if(ei(P)){const z=await P.callTool(b.functionCalls);R.push(...z)}A++,y={role:"user",parts:R},x.contents=Rs(x.contents),x.contents.push(E),x.contents.push(y),Cg(x.config)&&(N.push(E),N.push(y))}return Cg(x.config)&&(b.automaticFunctionCallingHistory=N),b},this.generateContentStream=async l=>{var i,o,c,u,f;if(this.maybeMoveToResponseJsonSchem(l),_g(l.config)){const y=await this.processParamsMaybeAddMcpUsage(l);return await this.generateContentStreamInternal(y)}const x=Sg(l);if(x.length>0){const y=x.map(N=>`tools[${N}]`).join(", ");throw new Error(`Incompatible tools found at ${y}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const m=(c=(o=(i=l==null?void 0:l.config)===null||i===void 0?void 0:i.toolConfig)===null||o===void 0?void 0:o.functionCallingConfig)===null||c===void 0?void 0:c.streamFunctionCallArguments,b=(f=(u=l==null?void 0:l.config)===null||u===void 0?void 0:u.automaticFunctionCalling)===null||f===void 0?void 0:f.disable;if(m&&!b)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(l)},this.generateImages=async l=>await this.generateImagesInternal(l).then(i=>{var o;let c;const u=[];if(i!=null&&i.generatedImages)for(const x of i.generatedImages)x&&(x!=null&&x.safetyAttributes)&&((o=x==null?void 0:x.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?c=x==null?void 0:x.safetyAttributes:u.push(x);let f;return c?f={generatedImages:u,positivePromptSafetyAttributes:c,sdkHttpResponse:i.sdkHttpResponse}:f={generatedImages:u,sdkHttpResponse:i.sdkHttpResponse},f}),this.list=async l=>{var i;const u={config:Object.assign(Object.assign({},{queryBase:!0}),l==null?void 0:l.config)};if(this.apiClient.isVertexAI()&&!u.config.queryBase){if(!((i=u.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");u.config.filter="labels.tune-type:*"}return new Ql(En.PAGED_ITEM_MODELS,f=>this.listInternal(f),await this.listInternal(u),u)},this.editImage=async l=>{const i={model:l.model,prompt:l.prompt,referenceImages:[],config:l.config};return l.referenceImages&&l.referenceImages&&(i.referenceImages=l.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async l=>{let i={numberOfImages:1,mode:"upscale"};l.config&&(i=Object.assign(Object.assign({},i),l.config));const o={model:l.model,image:l.image,upscaleFactor:l.upscaleFactor,config:i};return await this.upscaleImageInternal(o)},this.generateVideos=async l=>{var i,o,c,u,f,x;if((l.prompt||l.image||l.video)&&l.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=l.video)===null||i===void 0)&&i.uri&&(!((o=l.video)===null||o===void 0)&&o.videoBytes)?l.video={uri:l.video.uri,mimeType:l.video.mimeType}:!((u=(c=l.source)===null||c===void 0?void 0:c.video)===null||u===void 0)&&u.uri&&(!((x=(f=l.source)===null||f===void 0?void 0:f.video)===null||x===void 0)&&x.videoBytes)&&(l.source.video={uri:l.source.video.uri,mimeType:l.source.video.mimeType})),await this.generateVideosInternal(l)}}maybeMoveToResponseJsonSchem(t){t.config&&t.config.responseSchema&&(t.config.responseJsonSchema||Object.keys(t.config.responseSchema).includes("$schema")&&(t.config.responseJsonSchema=t.config.responseSchema,delete t.config.responseSchema))}async processParamsMaybeAddMcpUsage(t){var l,i,o;const c=(l=t.config)===null||l===void 0?void 0:l.tools;if(!c)return t;const u=await Promise.all(c.map(async x=>ei(x)?await x.tool():x)),f={model:t.model,contents:t.contents,config:Object.assign(Object.assign({},t.config),{tools:u})};if(f.config.tools=u,t.config&&t.config.tools&&ov(t.config.tools)){const x=(o=(i=t.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&o!==void 0?o:{};let m=Object.assign({},x);Object.keys(m).length===0&&(m=this.apiClient.getDefaultHeaders()),cv(m),f.config.httpOptions=Object.assign(Object.assign({},t.config.httpOptions),{headers:m})}return f}async initAfcToolsMap(t){var l,i,o;const c=new Map;for(const u of(i=(l=t.config)===null||l===void 0?void 0:l.tools)!==null&&i!==void 0?i:[])if(ei(u)){const f=u,x=await f.tool();for(const m of(o=x.functionDeclarations)!==null&&o!==void 0?o:[]){if(!m.name)throw new Error("Function declaration name is required.");if(c.has(m.name))throw new Error(`Duplicate tool declaration name: ${m.name}`);c.set(m.name,f)}}return c}async processAfcStream(t){var l,i,o;const c=(o=(i=(l=t.config)===null||l===void 0?void 0:l.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&o!==void 0?o:wg;let u=!1,f=0;const x=await this.initAfcToolsMap(t);return(function(m,b,y){var N,C;return Wa(this,arguments,function*(){for(var A,E,R,P;f<c;){u&&(f++,u=!1);const G=yield ft(m.processParamsMaybeAddMcpUsage(y)),F=yield ft(m.generateContentStreamInternal(G)),$=[],B=[];try{for(var O=!0,z=(E=void 0,pr(F)),K;K=yield ft(z.next()),A=K.done,!A;O=!0){P=K.value,O=!1;const q=P;if(yield yield ft(q),q.candidates&&(!((N=q.candidates[0])===null||N===void 0)&&N.content)){B.push(q.candidates[0].content);for(const J of(C=q.candidates[0].content.parts)!==null&&C!==void 0?C:[])if(f<c&&J.functionCall){if(!J.functionCall.name)throw new Error("Function call name was not returned by the model.");if(b.has(J.functionCall.name)){const Q=yield ft(b.get(J.functionCall.name).callTool([J.functionCall]));$.push(...Q)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${b.keys()}, mising tool: ${J.functionCall.name}`)}}}}catch(q){E={error:q}}finally{try{!O&&!A&&(R=z.return)&&(yield ft(R.call(z)))}finally{if(E)throw E.error}}if($.length>0){u=!0;const q=new cr;q.candidates=[{content:{role:"user",parts:$}}],yield yield ft(q);const J=[];J.push(...B),J.push({role:"user",parts:$});const Q=Rs(y.contents).concat(J);y.contents=Q}else break}})})(this,x,t)}async generateContentInternal(t){var l,i,o,c;let u,f="",x={};if(this.apiClient.isVertexAI()){const m=bg(this.apiClient,t);return f=_e("{model}:generateContent",m._url),x=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:x,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(b=>b.json().then(y=>{const N=y;return N.sdkHttpResponse={headers:b.headers},N})),u.then(b=>{const y=yg(b),N=new cr;return Object.assign(N,y),N})}else{const m=gg(this.apiClient,t);return f=_e("{model}:generateContent",m._url),x=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:x,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(c=t.config)===null||c===void 0?void 0:c.abortSignal}).then(b=>b.json().then(y=>{const N=y;return N.sdkHttpResponse={headers:b.headers},N})),u.then(b=>{const y=vg(b),N=new cr;return Object.assign(N,y),N})}}async generateContentStreamInternal(t){var l,i,o,c;let u,f="",x={};if(this.apiClient.isVertexAI()){const m=bg(this.apiClient,t);return f=_e("{model}:streamGenerateContent?alt=sse",m._url),x=m._query,delete m._url,delete m._query,u=this.apiClient.requestStream({path:f,queryParams:x,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}),u.then(function(y){return Wa(this,arguments,function*(){var N,C,A,E;try{for(var R=!0,P=pr(y),O;O=yield ft(P.next()),N=O.done,!N;R=!0){E=O.value,R=!1;const z=E,K=yg(yield ft(z.json()));K.sdkHttpResponse={headers:z.headers};const G=new cr;Object.assign(G,K),yield yield ft(G)}}catch(z){C={error:z}}finally{try{!R&&!N&&(A=P.return)&&(yield ft(A.call(P)))}finally{if(C)throw C.error}}})})}else{const m=gg(this.apiClient,t);return f=_e("{model}:streamGenerateContent?alt=sse",m._url),x=m._query,delete m._url,delete m._query,u=this.apiClient.requestStream({path:f,queryParams:x,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(c=t.config)===null||c===void 0?void 0:c.abortSignal}),u.then(function(y){return Wa(this,arguments,function*(){var N,C,A,E;try{for(var R=!0,P=pr(y),O;O=yield ft(P.next()),N=O.done,!N;R=!0){E=O.value,R=!1;const z=E,K=vg(yield ft(z.json()));K.sdkHttpResponse={headers:z.headers};const G=new cr;Object.assign(G,K),yield yield ft(G)}}catch(z){C={error:z}}finally{try{!R&&!N&&(A=P.return)&&(yield ft(A.call(P)))}finally{if(C)throw C.error}}})})}}async embedContent(t){var l,i,o,c;let u,f="",x={};if(this.apiClient.isVertexAI()){const m=H4(this.apiClient,t);return f=_e("{model}:predict",m._url),x=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:x,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(b=>b.json().then(y=>{const N=y;return N.sdkHttpResponse={headers:b.headers},N})),u.then(b=>{const y=V4(b),N=new tg;return Object.assign(N,y),N})}else{const m=G4(this.apiClient,t);return f=_e("{model}:batchEmbedContents",m._url),x=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:x,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(c=t.config)===null||c===void 0?void 0:c.abortSignal}).then(b=>b.json().then(y=>{const N=y;return N.sdkHttpResponse={headers:b.headers},N})),u.then(b=>{const y=B4(b),N=new tg;return Object.assign(N,y),N})}}async generateImagesInternal(t){var l,i,o,c;let u,f="",x={};if(this.apiClient.isVertexAI()){const m=sC(this.apiClient,t);return f=_e("{model}:predict",m._url),x=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:x,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(b=>b.json().then(y=>{const N=y;return N.sdkHttpResponse={headers:b.headers},N})),u.then(b=>{const y=lC(b),N=new sg;return Object.assign(N,y),N})}else{const m=tC(this.apiClient,t);return f=_e("{model}:predict",m._url),x=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:x,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(c=t.config)===null||c===void 0?void 0:c.abortSignal}).then(b=>b.json().then(y=>{const N=y;return N.sdkHttpResponse={headers:b.headers},N})),u.then(b=>{const y=nC(b),N=new sg;return Object.assign(N,y),N})}}async editImageInternal(t){var l,i;let o,c="",u={};if(this.apiClient.isVertexAI()){const f=P4(this.apiClient,t);return c=_e("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(x=>x.json().then(m=>{const b=m;return b.sdkHttpResponse={headers:x.headers},b})),o.then(x=>{const m=$4(x),b=new J_;return Object.assign(b,m),b})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(t){var l,i;let o,c="",u={};if(this.apiClient.isVertexAI()){const f=sk(this.apiClient,t);return c=_e("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(x=>x.json().then(m=>{const b=m;return b.sdkHttpResponse={headers:x.headers},b})),o.then(x=>{const m=nk(x),b=new Y_;return Object.assign(b,m),b})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(t){var l,i;let o,c="",u={};if(this.apiClient.isVertexAI()){const f=UC(this.apiClient,t);return c=_e("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(x=>x.json()),o.then(x=>{const m=PC(x),b=new K_;return Object.assign(b,m),b})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(t){var l,i;let o,c="",u={};if(this.apiClient.isVertexAI()){const f=BC(this.apiClient,t);return c=_e("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(x=>x.json()),o.then(x=>{const m=VC(x),b=new Q_;return Object.assign(b,m),b})}else throw new Error("This method is only supported by the Vertex AI.")}async get(t){var l,i,o,c;let u,f="",x={};if(this.apiClient.isVertexAI()){const m=NC(this.apiClient,t);return f=_e("{name}",m._url),x=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:x,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(b=>b.json()),u.then(b=>ih(b))}else{const m=yC(this.apiClient,t);return f=_e("{name}",m._url),x=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:x,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(c=t.config)===null||c===void 0?void 0:c.abortSignal}).then(b=>b.json()),u.then(b=>ah(b))}}async listInternal(t){var l,i,o,c;let u,f="",x={};if(this.apiClient.isVertexAI()){const m=AC(this.apiClient,t);return f=_e("{models_url}",m._url),x=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:x,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(b=>b.json().then(y=>{const N=y;return N.sdkHttpResponse={headers:b.headers},N})),u.then(b=>{const y=DC(b),N=new ng;return Object.assign(N,y),N})}else{const m=TC(this.apiClient,t);return f=_e("{models_url}",m._url),x=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:x,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(c=t.config)===null||c===void 0?void 0:c.abortSignal}).then(b=>b.json().then(y=>{const N=y;return N.sdkHttpResponse={headers:b.headers},N})),u.then(b=>{const y=MC(b),N=new ng;return Object.assign(N,y),N})}}async update(t){var l,i,o,c;let u,f="",x={};if(this.apiClient.isVertexAI()){const m=ek(this.apiClient,t);return f=_e("{model}",m._url),x=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:x,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(b=>b.json()),u.then(b=>ih(b))}else{const m=WC(this.apiClient,t);return f=_e("{name}",m._url),x=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:x,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(c=t.config)===null||c===void 0?void 0:c.abortSignal}).then(b=>b.json()),u.then(b=>ah(b))}}async delete(t){var l,i,o,c;let u,f="",x={};if(this.apiClient.isVertexAI()){const m=I4(this.apiClient,t);return f=_e("{name}",m._url),x=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:x,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(b=>b.json().then(y=>{const N=y;return N.sdkHttpResponse={headers:b.headers},N})),u.then(b=>{const y=L4(b),N=new lg;return Object.assign(N,y),N})}else{const m=R4(this.apiClient,t);return f=_e("{name}",m._url),x=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:x,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(c=t.config)===null||c===void 0?void 0:c.abortSignal}).then(b=>b.json().then(y=>{const N=y;return N.sdkHttpResponse={headers:b.headers},N})),u.then(b=>{const y=z4(b),N=new lg;return Object.assign(N,y),N})}}async countTokens(t){var l,i,o,c;let u,f="",x={};if(this.apiClient.isVertexAI()){const m=A4(this.apiClient,t);return f=_e("{model}:countTokens",m._url),x=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:x,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(b=>b.json().then(y=>{const N=y;return N.sdkHttpResponse={headers:b.headers},N})),u.then(b=>{const y=D4(b),N=new ag;return Object.assign(N,y),N})}else{const m=T4(this.apiClient,t);return f=_e("{model}:countTokens",m._url),x=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:x,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(c=t.config)===null||c===void 0?void 0:c.abortSignal}).then(b=>b.json().then(y=>{const N=y;return N.sdkHttpResponse={headers:b.headers},N})),u.then(b=>{const y=M4(b),N=new ag;return Object.assign(N,y),N})}}async computeTokens(t){var l,i;let o,c="",u={};if(this.apiClient.isVertexAI()){const f=j4(this.apiClient,t);return c=_e("{model}:computeTokens",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(x=>x.json().then(m=>{const b=m;return b.sdkHttpResponse={headers:x.headers},b})),o.then(x=>{const m=w4(x),b=new X_;return Object.assign(b,m),b})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(t){var l,i,o,c;let u,f="",x={};if(this.apiClient.isVertexAI()){const m=dC(this.apiClient,t);return f=_e("{model}:predictLongRunning",m._url),x=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:x,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(b=>b.json()),u.then(b=>{const y=oC(b),N=new oc;return Object.assign(N,y),N})}else{const m=cC(this.apiClient,t);return f=_e("{model}:predictLongRunning",m._url),x=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:x,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(c=t.config)===null||c===void 0?void 0:c.abortSignal}).then(b=>b.json()),u.then(b=>{const y=rC(b),N=new oc;return Object.assign(N,y),N})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Lk extends Mn{constructor(t){super(),this.apiClient=t}async getVideosOperation(t){const l=t.operation,i=t.config;if(l.name===void 0||l.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=l.name.split("/operations/")[0];let c;i&&"httpOptions"in i&&(c=i.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:l.name,resourceName:o,config:{httpOptions:c}});return l._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:l.name,config:i});return l._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async get(t){const l=t.operation,i=t.config;if(l.name===void 0||l.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=l.name.split("/operations/")[0];let c;i&&"httpOptions"in i&&(c=i.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:l.name,resourceName:o,config:{httpOptions:c}});return l._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:l.name,config:i});return l._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async getVideosOperationInternal(t){var l,i,o,c;let u,f="",x={};if(this.apiClient.isVertexAI()){const m=O_(t);return f=_e("{operationName}",m._url),x=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:x,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(b=>b.json()),u}else{const m=q_(t);return f=_e("{operationName}",m._url),x=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:x,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(c=t.config)===null||c===void 0?void 0:c.abortSignal}).then(b=>b.json()),u}}async fetchPredictVideosOperationInternal(t){var l,i;let o,c="",u={};if(this.apiClient.isVertexAI()){const f=R_(t);return c=_e("{resourceName}:fetchPredictOperation",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(x=>x.json()),o}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Uk(n){const t={},l=h(n,["data"]);if(l!=null&&p(t,["data"],l),h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=h(n,["mimeType"]);return i!=null&&p(t,["mimeType"],i),t}function Pk(n){const t={},l=h(n,["parts"]);if(l!=null){let o=l;Array.isArray(o)&&(o=o.map(c=>Jk(c))),p(t,["parts"],o)}const i=h(n,["role"]);return i!=null&&p(t,["role"],i),t}function $k(n,t,l){const i={},o=h(t,["expireTime"]);l!==void 0&&o!=null&&p(l,["expireTime"],o);const c=h(t,["newSessionExpireTime"]);l!==void 0&&c!=null&&p(l,["newSessionExpireTime"],c);const u=h(t,["uses"]);l!==void 0&&u!=null&&p(l,["uses"],u);const f=h(t,["liveConnectConstraints"]);l!==void 0&&f!=null&&p(l,["bidiGenerateContentSetup"],Fk(n,f));const x=h(t,["lockAdditionalFields"]);return l!==void 0&&x!=null&&p(l,["fieldMask"],x),i}function qk(n,t){const l={},i=h(t,["config"]);return i!=null&&p(l,["config"],$k(n,i,l)),l}function Ok(n){const t={};if(h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const l=h(n,["fileUri"]);l!=null&&p(t,["fileUri"],l);const i=h(n,["mimeType"]);return i!=null&&p(t,["mimeType"],i),t}function Gk(n){const t={},l=h(n,["id"]);l!=null&&p(t,["id"],l);const i=h(n,["args"]);i!=null&&p(t,["args"],i);const o=h(n,["name"]);if(o!=null&&p(t,["name"],o),h(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(h(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function Hk(n){const t={};if(h(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const l=h(n,["enableWidget"]);return l!=null&&p(t,["enableWidget"],l),t}function Bk(n){const t={};if(h(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(h(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const l=h(n,["timeRangeFilter"]);return l!=null&&p(t,["timeRangeFilter"],l),t}function Vk(n,t){const l={},i=h(n,["generationConfig"]);t!==void 0&&i!=null&&p(t,["setup","generationConfig"],i);const o=h(n,["responseModalities"]);t!==void 0&&o!=null&&p(t,["setup","generationConfig","responseModalities"],o);const c=h(n,["temperature"]);t!==void 0&&c!=null&&p(t,["setup","generationConfig","temperature"],c);const u=h(n,["topP"]);t!==void 0&&u!=null&&p(t,["setup","generationConfig","topP"],u);const f=h(n,["topK"]);t!==void 0&&f!=null&&p(t,["setup","generationConfig","topK"],f);const x=h(n,["maxOutputTokens"]);t!==void 0&&x!=null&&p(t,["setup","generationConfig","maxOutputTokens"],x);const m=h(n,["mediaResolution"]);t!==void 0&&m!=null&&p(t,["setup","generationConfig","mediaResolution"],m);const b=h(n,["seed"]);t!==void 0&&b!=null&&p(t,["setup","generationConfig","seed"],b);const y=h(n,["speechConfig"]);t!==void 0&&y!=null&&p(t,["setup","generationConfig","speechConfig"],Dh(y));const N=h(n,["thinkingConfig"]);t!==void 0&&N!=null&&p(t,["setup","generationConfig","thinkingConfig"],N);const C=h(n,["enableAffectiveDialog"]);t!==void 0&&C!=null&&p(t,["setup","generationConfig","enableAffectiveDialog"],C);const A=h(n,["systemInstruction"]);t!==void 0&&A!=null&&p(t,["setup","systemInstruction"],Pk(Kt(A)));const E=h(n,["tools"]);if(t!==void 0&&E!=null){let F=hi(E);Array.isArray(F)&&(F=F.map($=>Kk(ui($)))),p(t,["setup","tools"],F)}const R=h(n,["sessionResumption"]);t!==void 0&&R!=null&&p(t,["setup","sessionResumption"],Yk(R));const P=h(n,["inputAudioTranscription"]);t!==void 0&&P!=null&&p(t,["setup","inputAudioTranscription"],P);const O=h(n,["outputAudioTranscription"]);t!==void 0&&O!=null&&p(t,["setup","outputAudioTranscription"],O);const z=h(n,["realtimeInputConfig"]);t!==void 0&&z!=null&&p(t,["setup","realtimeInputConfig"],z);const K=h(n,["contextWindowCompression"]);t!==void 0&&K!=null&&p(t,["setup","contextWindowCompression"],K);const G=h(n,["proactivity"]);return t!==void 0&&G!=null&&p(t,["setup","proactivity"],G),l}function Fk(n,t){const l={},i=h(t,["model"]);i!=null&&p(l,["setup","model"],Ke(n,i));const o=h(t,["config"]);return o!=null&&p(l,["config"],Vk(o,l)),l}function Jk(n){const t={},l=h(n,["mediaResolution"]);l!=null&&p(t,["mediaResolution"],l);const i=h(n,["codeExecutionResult"]);i!=null&&p(t,["codeExecutionResult"],i);const o=h(n,["executableCode"]);o!=null&&p(t,["executableCode"],o);const c=h(n,["fileData"]);c!=null&&p(t,["fileData"],Ok(c));const u=h(n,["functionCall"]);u!=null&&p(t,["functionCall"],Gk(u));const f=h(n,["functionResponse"]);f!=null&&p(t,["functionResponse"],f);const x=h(n,["inlineData"]);x!=null&&p(t,["inlineData"],Uk(x));const m=h(n,["text"]);m!=null&&p(t,["text"],m);const b=h(n,["thought"]);b!=null&&p(t,["thought"],b);const y=h(n,["thoughtSignature"]);y!=null&&p(t,["thoughtSignature"],y);const N=h(n,["videoMetadata"]);return N!=null&&p(t,["videoMetadata"],N),t}function Yk(n){const t={},l=h(n,["handle"]);if(l!=null&&p(t,["handle"],l),h(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function Kk(n){const t={},l=h(n,["functionDeclarations"]);if(l!=null){let b=l;Array.isArray(b)&&(b=b.map(y=>y)),p(t,["functionDeclarations"],b)}if(h(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=h(n,["googleSearchRetrieval"]);i!=null&&p(t,["googleSearchRetrieval"],i);const o=h(n,["computerUse"]);o!=null&&p(t,["computerUse"],o);const c=h(n,["fileSearch"]);c!=null&&p(t,["fileSearch"],c);const u=h(n,["codeExecution"]);if(u!=null&&p(t,["codeExecution"],u),h(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=h(n,["googleMaps"]);f!=null&&p(t,["googleMaps"],Hk(f));const x=h(n,["googleSearch"]);x!=null&&p(t,["googleSearch"],Bk(x));const m=h(n,["urlContext"]);return m!=null&&p(t,["urlContext"],m),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Qk(n){const t=[];for(const l in n)if(Object.prototype.hasOwnProperty.call(n,l)){const i=n[l];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const o=Object.keys(i).map(c=>`${l}.${c}`);t.push(...o)}else t.push(l)}return t.join(",")}function Xk(n,t){let l=null;const i=n.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const c=i.setup;typeof c=="object"&&c!==null?(n.bidiGenerateContentSetup=c,l=c):delete n.bidiGenerateContentSetup}else i!==void 0&&delete n.bidiGenerateContentSetup;const o=n.fieldMask;if(l){const c=Qk(l);if(Array.isArray(t==null?void 0:t.lockAdditionalFields)&&(t==null?void 0:t.lockAdditionalFields.length)===0)c?n.fieldMask=c:delete n.fieldMask;else if(t!=null&&t.lockAdditionalFields&&t.lockAdditionalFields.length>0&&o!==null&&Array.isArray(o)&&o.length>0){const u=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let f=[];o.length>0&&(f=o.map(m=>u.includes(m)?`generationConfig.${m}`:m));const x=[];c&&x.push(c),f.length>0&&x.push(...f),x.length>0?n.fieldMask=x.join(","):delete n.fieldMask}else delete n.fieldMask}else o!==null&&Array.isArray(o)&&o.length>0?n.fieldMask=o.join(","):delete n.fieldMask;return n}class Zk extends Mn{constructor(t){super(),this.apiClient=t}async create(t){var l,i;let o,c="",u={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const f=qk(this.apiClient,t);c=_e("auth_tokens",f._url),u=f._query,delete f.config,delete f._url,delete f._query;const x=Xk(f,t.config);return o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(x),httpMethod:"POST",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>m)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Wk(n,t){const l={},i=h(n,["displayName"]);return t!==void 0&&i!=null&&p(t,["displayName"],i),l}function e3(n){const t={},l=h(n,["config"]);return l!=null&&Wk(l,t),t}function t3(n,t){const l={},i=h(n,["force"]);return t!==void 0&&i!=null&&p(t,["_query","force"],i),l}function s3(n){const t={},l=h(n,["name"]);l!=null&&p(t,["_url","name"],l);const i=h(n,["config"]);return i!=null&&t3(i,t),t}function n3(n){const t={},l=h(n,["name"]);return l!=null&&p(t,["_url","name"],l),t}function l3(n,t){const l={},i=h(n,["customMetadata"]);if(t!==void 0&&i!=null){let c=i;Array.isArray(c)&&(c=c.map(u=>u)),p(t,["customMetadata"],c)}const o=h(n,["chunkingConfig"]);return t!==void 0&&o!=null&&p(t,["chunkingConfig"],o),l}function a3(n){const t={},l=h(n,["name"]);l!=null&&p(t,["name"],l);const i=h(n,["metadata"]);i!=null&&p(t,["metadata"],i);const o=h(n,["done"]);o!=null&&p(t,["done"],o);const c=h(n,["error"]);c!=null&&p(t,["error"],c);const u=h(n,["response"]);return u!=null&&p(t,["response"],r3(u)),t}function i3(n){const t={},l=h(n,["fileSearchStoreName"]);l!=null&&p(t,["_url","file_search_store_name"],l);const i=h(n,["fileName"]);i!=null&&p(t,["fileName"],i);const o=h(n,["config"]);return o!=null&&l3(o,t),t}function r3(n){const t={},l=h(n,["sdkHttpResponse"]);l!=null&&p(t,["sdkHttpResponse"],l);const i=h(n,["parent"]);i!=null&&p(t,["parent"],i);const o=h(n,["documentName"]);return o!=null&&p(t,["documentName"],o),t}function o3(n,t){const l={},i=h(n,["pageSize"]);t!==void 0&&i!=null&&p(t,["_query","pageSize"],i);const o=h(n,["pageToken"]);return t!==void 0&&o!=null&&p(t,["_query","pageToken"],o),l}function c3(n){const t={},l=h(n,["config"]);return l!=null&&o3(l,t),t}function d3(n){const t={},l=h(n,["sdkHttpResponse"]);l!=null&&p(t,["sdkHttpResponse"],l);const i=h(n,["nextPageToken"]);i!=null&&p(t,["nextPageToken"],i);const o=h(n,["fileSearchStores"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(u=>u)),p(t,["fileSearchStores"],c)}return t}function u3(n,t){const l={},i=h(n,["mimeType"]);t!==void 0&&i!=null&&p(t,["mimeType"],i);const o=h(n,["displayName"]);t!==void 0&&o!=null&&p(t,["displayName"],o);const c=h(n,["customMetadata"]);if(t!==void 0&&c!=null){let f=c;Array.isArray(f)&&(f=f.map(x=>x)),p(t,["customMetadata"],f)}const u=h(n,["chunkingConfig"]);return t!==void 0&&u!=null&&p(t,["chunkingConfig"],u),l}function h3(n){const t={},l=h(n,["fileSearchStoreName"]);l!=null&&p(t,["_url","file_search_store_name"],l);const i=h(n,["config"]);return i!=null&&u3(i,t),t}function f3(n){const t={},l=h(n,["sdkHttpResponse"]);return l!=null&&p(t,["sdkHttpResponse"],l),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function x3(n,t){const l={},i=h(n,["force"]);return t!==void 0&&i!=null&&p(t,["_query","force"],i),l}function m3(n){const t={},l=h(n,["name"]);l!=null&&p(t,["_url","name"],l);const i=h(n,["config"]);return i!=null&&x3(i,t),t}function p3(n){const t={},l=h(n,["name"]);return l!=null&&p(t,["_url","name"],l),t}function g3(n,t){const l={},i=h(n,["pageSize"]);t!==void 0&&i!=null&&p(t,["_query","pageSize"],i);const o=h(n,["pageToken"]);return t!==void 0&&o!=null&&p(t,["_query","pageToken"],o),l}function b3(n){const t={},l=h(n,["parent"]);l!=null&&p(t,["_url","parent"],l);const i=h(n,["config"]);return i!=null&&g3(i,t),t}function v3(n){const t={},l=h(n,["sdkHttpResponse"]);l!=null&&p(t,["sdkHttpResponse"],l);const i=h(n,["nextPageToken"]);i!=null&&p(t,["nextPageToken"],i);const o=h(n,["documents"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(u=>u)),p(t,["documents"],c)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class y3 extends Mn{constructor(t){super(),this.apiClient=t,this.list=async l=>new Ql(En.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:l.parent,config:i.config}),await this.listInternal(l),l)}async get(t){var l,i;let o,c="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=p3(t);return c=_e("{name}",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(x=>x.json()),o.then(x=>x)}}async delete(t){var l,i;let o="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=m3(t);o=_e("{name}",u._url),c=u._query,delete u._url,delete u._query,await this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(t){var l,i;let o,c="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=b3(t);return c=_e("{parent}/documents",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(x=>x.json()),o.then(x=>{const m=v3(x),b=new Z_;return Object.assign(b,m),b})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class N3 extends Mn{constructor(t,l=new y3(t)){super(),this.apiClient=t,this.documents=l,this.list=async(i={})=>new Ql(En.PAGED_ITEM_FILE_SEARCH_STORES,o=>this.listInternal(o),await this.listInternal(i),i)}async uploadToFileSearchStore(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(t.fileSearchStoreName,t.file,t.config)}async create(t){var l,i;let o,c="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=e3(t);return c=_e("fileSearchStores",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(x=>x.json()),o.then(x=>x)}}async get(t){var l,i;let o,c="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=n3(t);return c=_e("{name}",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(x=>x.json()),o.then(x=>x)}}async delete(t){var l,i;let o="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=s3(t);o=_e("{name}",u._url),c=u._query,delete u._url,delete u._query,await this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(t){var l,i;let o,c="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=c3(t);return c=_e("fileSearchStores",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(x=>x.json()),o.then(x=>{const m=d3(x),b=new W_;return Object.assign(b,m),b})}}async uploadToFileSearchStoreInternal(t){var l,i;let o,c="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=h3(t);return c=_e("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(x=>x.json()),o.then(x=>{const m=f3(x),b=new e5;return Object.assign(b,m),b})}}async importFile(t){var l,i;let o,c="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=i3(t);return c=_e("{file_search_store_name}:importFile",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(x=>x.json()),o.then(x=>{const m=a3(x),b=new kh;return Object.assign(b,m),b})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function j3(n,t){const l={},i=h(n,["name"]);return i!=null&&p(l,["_url","name"],i),l}function w3(n,t){const l={},i=h(n,["name"]);return i!=null&&p(l,["_url","name"],i),l}function _3(n,t,l){const i={};if(h(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const o=h(n,["tunedModelDisplayName"]);if(t!==void 0&&o!=null&&p(t,["displayName"],o),h(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const c=h(n,["epochCount"]);t!==void 0&&c!=null&&p(t,["tuningTask","hyperparameters","epochCount"],c);const u=h(n,["learningRateMultiplier"]);if(u!=null&&p(i,["tuningTask","hyperparameters","learningRateMultiplier"],u),h(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(h(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(h(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const f=h(n,["batchSize"]);t!==void 0&&f!=null&&p(t,["tuningTask","hyperparameters","batchSize"],f);const x=h(n,["learningRate"]);if(t!==void 0&&x!=null&&p(t,["tuningTask","hyperparameters","learningRate"],x),h(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(h(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return i}function S3(n,t,l){const i={};let o=h(l,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const C=h(n,["validationDataset"]);t!==void 0&&C!=null&&p(t,["supervisedTuningSpec"],kg(C))}else if(o==="PREFERENCE_TUNING"){const C=h(n,["validationDataset"]);t!==void 0&&C!=null&&p(t,["preferenceOptimizationSpec"],kg(C))}const c=h(n,["tunedModelDisplayName"]);t!==void 0&&c!=null&&p(t,["tunedModelDisplayName"],c);const u=h(n,["description"]);t!==void 0&&u!=null&&p(t,["description"],u);let f=h(l,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const C=h(n,["epochCount"]);t!==void 0&&C!=null&&p(t,["supervisedTuningSpec","hyperParameters","epochCount"],C)}else if(f==="PREFERENCE_TUNING"){const C=h(n,["epochCount"]);t!==void 0&&C!=null&&p(t,["preferenceOptimizationSpec","hyperParameters","epochCount"],C)}let x=h(l,["config","method"]);if(x===void 0&&(x="SUPERVISED_FINE_TUNING"),x==="SUPERVISED_FINE_TUNING"){const C=h(n,["learningRateMultiplier"]);t!==void 0&&C!=null&&p(t,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],C)}else if(x==="PREFERENCE_TUNING"){const C=h(n,["learningRateMultiplier"]);t!==void 0&&C!=null&&p(t,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],C)}let m=h(l,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const C=h(n,["exportLastCheckpointOnly"]);t!==void 0&&C!=null&&p(t,["supervisedTuningSpec","exportLastCheckpointOnly"],C)}else if(m==="PREFERENCE_TUNING"){const C=h(n,["exportLastCheckpointOnly"]);t!==void 0&&C!=null&&p(t,["preferenceOptimizationSpec","exportLastCheckpointOnly"],C)}let b=h(l,["config","method"]);if(b===void 0&&(b="SUPERVISED_FINE_TUNING"),b==="SUPERVISED_FINE_TUNING"){const C=h(n,["adapterSize"]);t!==void 0&&C!=null&&p(t,["supervisedTuningSpec","hyperParameters","adapterSize"],C)}else if(b==="PREFERENCE_TUNING"){const C=h(n,["adapterSize"]);t!==void 0&&C!=null&&p(t,["preferenceOptimizationSpec","hyperParameters","adapterSize"],C)}if(h(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(h(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const y=h(n,["labels"]);t!==void 0&&y!=null&&p(t,["labels"],y);const N=h(n,["beta"]);return t!==void 0&&N!=null&&p(t,["preferenceOptimizationSpec","hyperParameters","beta"],N),i}function C3(n,t){const l={},i=h(n,["baseModel"]);i!=null&&p(l,["baseModel"],i);const o=h(n,["preTunedModel"]);o!=null&&p(l,["preTunedModel"],o);const c=h(n,["trainingDataset"]);c!=null&&U3(c);const u=h(n,["config"]);return u!=null&&_3(u,l),l}function k3(n,t){const l={},i=h(n,["baseModel"]);i!=null&&p(l,["baseModel"],i);const o=h(n,["preTunedModel"]);o!=null&&p(l,["preTunedModel"],o);const c=h(n,["trainingDataset"]);c!=null&&P3(c,l,t);const u=h(n,["config"]);return u!=null&&S3(u,l,t),l}function E3(n,t){const l={},i=h(n,["name"]);return i!=null&&p(l,["_url","name"],i),l}function T3(n,t){const l={},i=h(n,["name"]);return i!=null&&p(l,["_url","name"],i),l}function A3(n,t,l){const i={},o=h(n,["pageSize"]);t!==void 0&&o!=null&&p(t,["_query","pageSize"],o);const c=h(n,["pageToken"]);t!==void 0&&c!=null&&p(t,["_query","pageToken"],c);const u=h(n,["filter"]);return t!==void 0&&u!=null&&p(t,["_query","filter"],u),i}function M3(n,t,l){const i={},o=h(n,["pageSize"]);t!==void 0&&o!=null&&p(t,["_query","pageSize"],o);const c=h(n,["pageToken"]);t!==void 0&&c!=null&&p(t,["_query","pageToken"],c);const u=h(n,["filter"]);return t!==void 0&&u!=null&&p(t,["_query","filter"],u),i}function D3(n,t){const l={},i=h(n,["config"]);return i!=null&&A3(i,l),l}function R3(n,t){const l={},i=h(n,["config"]);return i!=null&&M3(i,l),l}function I3(n,t){const l={},i=h(n,["sdkHttpResponse"]);i!=null&&p(l,["sdkHttpResponse"],i);const o=h(n,["nextPageToken"]);o!=null&&p(l,["nextPageToken"],o);const c=h(n,["tunedModels"]);if(c!=null){let u=c;Array.isArray(u)&&(u=u.map(f=>dv(f))),p(l,["tuningJobs"],u)}return l}function z3(n,t){const l={},i=h(n,["sdkHttpResponse"]);i!=null&&p(l,["sdkHttpResponse"],i);const o=h(n,["nextPageToken"]);o!=null&&p(l,["nextPageToken"],o);const c=h(n,["tuningJobs"]);if(c!=null){let u=c;Array.isArray(u)&&(u=u.map(f=>oh(f))),p(l,["tuningJobs"],u)}return l}function L3(n,t){const l={},i=h(n,["name"]);i!=null&&p(l,["model"],i);const o=h(n,["name"]);return o!=null&&p(l,["endpoint"],o),l}function U3(n,t){const l={};if(h(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(h(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=h(n,["examples"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(c=>c)),p(l,["examples","examples"],o)}return l}function P3(n,t,l){const i={};let o=h(l,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const u=h(n,["gcsUri"]);t!==void 0&&u!=null&&p(t,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(o==="PREFERENCE_TUNING"){const u=h(n,["gcsUri"]);t!==void 0&&u!=null&&p(t,["preferenceOptimizationSpec","trainingDatasetUri"],u)}let c=h(l,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const u=h(n,["vertexDatasetResource"]);t!==void 0&&u!=null&&p(t,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(c==="PREFERENCE_TUNING"){const u=h(n,["vertexDatasetResource"]);t!==void 0&&u!=null&&p(t,["preferenceOptimizationSpec","trainingDatasetUri"],u)}if(h(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function dv(n,t){const l={},i=h(n,["sdkHttpResponse"]);i!=null&&p(l,["sdkHttpResponse"],i);const o=h(n,["name"]);o!=null&&p(l,["name"],o);const c=h(n,["state"]);c!=null&&p(l,["state"],Vb(c));const u=h(n,["createTime"]);u!=null&&p(l,["createTime"],u);const f=h(n,["tuningTask","startTime"]);f!=null&&p(l,["startTime"],f);const x=h(n,["tuningTask","completeTime"]);x!=null&&p(l,["endTime"],x);const m=h(n,["updateTime"]);m!=null&&p(l,["updateTime"],m);const b=h(n,["description"]);b!=null&&p(l,["description"],b);const y=h(n,["baseModel"]);y!=null&&p(l,["baseModel"],y);const N=h(n,["_self"]);return N!=null&&p(l,["tunedModel"],L3(N)),l}function oh(n,t){const l={},i=h(n,["sdkHttpResponse"]);i!=null&&p(l,["sdkHttpResponse"],i);const o=h(n,["name"]);o!=null&&p(l,["name"],o);const c=h(n,["state"]);c!=null&&p(l,["state"],Vb(c));const u=h(n,["createTime"]);u!=null&&p(l,["createTime"],u);const f=h(n,["startTime"]);f!=null&&p(l,["startTime"],f);const x=h(n,["endTime"]);x!=null&&p(l,["endTime"],x);const m=h(n,["updateTime"]);m!=null&&p(l,["updateTime"],m);const b=h(n,["error"]);b!=null&&p(l,["error"],b);const y=h(n,["description"]);y!=null&&p(l,["description"],y);const N=h(n,["baseModel"]);N!=null&&p(l,["baseModel"],N);const C=h(n,["tunedModel"]);C!=null&&p(l,["tunedModel"],C);const A=h(n,["preTunedModel"]);A!=null&&p(l,["preTunedModel"],A);const E=h(n,["supervisedTuningSpec"]);E!=null&&p(l,["supervisedTuningSpec"],E);const R=h(n,["preferenceOptimizationSpec"]);R!=null&&p(l,["preferenceOptimizationSpec"],R);const P=h(n,["tuningDataStats"]);P!=null&&p(l,["tuningDataStats"],P);const O=h(n,["encryptionSpec"]);O!=null&&p(l,["encryptionSpec"],O);const z=h(n,["partnerModelTuningSpec"]);z!=null&&p(l,["partnerModelTuningSpec"],z);const K=h(n,["customBaseModel"]);K!=null&&p(l,["customBaseModel"],K);const G=h(n,["experiment"]);G!=null&&p(l,["experiment"],G);const F=h(n,["labels"]);F!=null&&p(l,["labels"],F);const $=h(n,["outputUri"]);$!=null&&p(l,["outputUri"],$);const B=h(n,["pipelineJob"]);B!=null&&p(l,["pipelineJob"],B);const q=h(n,["serviceAccount"]);q!=null&&p(l,["serviceAccount"],q);const J=h(n,["tunedModelDisplayName"]);J!=null&&p(l,["tunedModelDisplayName"],J);const Q=h(n,["veoTuningSpec"]);return Q!=null&&p(l,["veoTuningSpec"],Q),l}function $3(n,t){const l={},i=h(n,["sdkHttpResponse"]);i!=null&&p(l,["sdkHttpResponse"],i);const o=h(n,["name"]);o!=null&&p(l,["name"],o);const c=h(n,["metadata"]);c!=null&&p(l,["metadata"],c);const u=h(n,["done"]);u!=null&&p(l,["done"],u);const f=h(n,["error"]);return f!=null&&p(l,["error"],f),l}function kg(n,t){const l={},i=h(n,["gcsUri"]);i!=null&&p(l,["validationDatasetUri"],i);const o=h(n,["vertexDatasetResource"]);return o!=null&&p(l,["validationDatasetUri"],o),l}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class q3 extends Mn{constructor(t){super(),this.apiClient=t,this.get=async l=>await this.getInternal(l),this.list=async(l={})=>new Ql(En.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(l),l),this.tune=async l=>{var i;if(this.apiClient.isVertexAI())if(l.baseModel.startsWith("projects/")){const o={tunedModelName:l.baseModel};!((i=l.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(o.checkpointId=l.config.preTunedModelCheckpointId);const c=Object.assign(Object.assign({},l),{preTunedModel:o});return c.baseModel=void 0,await this.tuneInternal(c)}else{const o=Object.assign({},l);return await this.tuneInternal(o)}else{const o=Object.assign({},l),c=await this.tuneMldevInternal(o);let u="";return c.metadata!==void 0&&c.metadata.tunedModel!==void 0?u=c.metadata.tunedModel:c.name!==void 0&&c.name.includes("/operations/")&&(u=c.name.split("/operations/")[0]),{name:u,state:th.JOB_STATE_QUEUED}}}}async getInternal(t){var l,i,o,c;let u,f="",x={};if(this.apiClient.isVertexAI()){const m=T3(t);return f=_e("{name}",m._url),x=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:x,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(b=>b.json().then(y=>{const N=y;return N.sdkHttpResponse={headers:b.headers},N})),u.then(b=>oh(b))}else{const m=E3(t);return f=_e("{name}",m._url),x=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:x,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(c=t.config)===null||c===void 0?void 0:c.abortSignal}).then(b=>b.json().then(y=>{const N=y;return N.sdkHttpResponse={headers:b.headers},N})),u.then(b=>dv(b))}}async listInternal(t){var l,i,o,c;let u,f="",x={};if(this.apiClient.isVertexAI()){const m=R3(t);return f=_e("tuningJobs",m._url),x=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:x,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(b=>b.json().then(y=>{const N=y;return N.sdkHttpResponse={headers:b.headers},N})),u.then(b=>{const y=z3(b),N=new ig;return Object.assign(N,y),N})}else{const m=D3(t);return f=_e("tunedModels",m._url),x=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:x,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(c=t.config)===null||c===void 0?void 0:c.abortSignal}).then(b=>b.json().then(y=>{const N=y;return N.sdkHttpResponse={headers:b.headers},N})),u.then(b=>{const y=I3(b),N=new ig;return Object.assign(N,y),N})}}async cancel(t){var l,i,o,c;let u="",f={};if(this.apiClient.isVertexAI()){const x=w3(t);u=_e("{name}:cancel",x._url),f=x._query,delete x._url,delete x._query,await this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(x),httpMethod:"POST",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal})}else{const x=j3(t);u=_e("{name}:cancel",x._url),f=x._query,delete x._url,delete x._query,await this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(x),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(c=t.config)===null||c===void 0?void 0:c.abortSignal})}}async tuneInternal(t){var l,i;let o,c="",u={};if(this.apiClient.isVertexAI()){const f=k3(t,t);return c=_e("tuningJobs",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(x=>x.json().then(m=>{const b=m;return b.sdkHttpResponse={headers:x.headers},b})),o.then(x=>oh(x))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(t){var l,i;let o,c="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=C3(t);return c=_e("tunedModels",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(x=>x.json().then(m=>{const b=m;return b.sdkHttpResponse={headers:x.headers},b})),o.then(x=>$3(x))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class O3{async download(t,l){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const G3=1024*1024*8,H3=3,B3=1e3,V3=2,dc="x-goog-upload-status";async function F3(n,t,l){var i;const o=await uv(n,t,l),c=await(o==null?void 0:o.json());if(((i=o==null?void 0:o.headers)===null||i===void 0?void 0:i[dc])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return c.file}async function J3(n,t,l){var i;const o=await uv(n,t,l),c=await(o==null?void 0:o.json());if(((i=o==null?void 0:o.headers)===null||i===void 0?void 0:i[dc])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const u=$b(c),f=new Eh;return Object.assign(f,u),f}async function uv(n,t,l){var i,o;let c=0,u=0,f=new sh(new Response),x="upload";for(c=n.size;u<c;){const m=Math.min(G3,c-u),b=n.slice(u,u+m);u+m>=c&&(x+=", finalize");let y=0,N=B3;for(;y<H3&&(f=await l.request({path:"",body:b,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:t,headers:{"X-Goog-Upload-Command":x,"X-Goog-Upload-Offset":String(u),"Content-Length":String(m)}}}),!(!((i=f==null?void 0:f.headers)===null||i===void 0)&&i[dc]));)y++,await K3(N),N=N*V3;if(u+=m,((o=f==null?void 0:f.headers)===null||o===void 0?void 0:o[dc])!=="active")break;if(c<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return f}async function Y3(n){return{size:n.size,type:n.type}}function K3(n){return new Promise(t=>setTimeout(t,n))}class Q3{async upload(t,l,i){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await F3(t,l,i)}async uploadToFileSearchStore(t,l,i){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await J3(t,l,i)}async stat(t){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await Y3(t)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class X3{create(t,l,i){return new Z3(t,l,i)}}class Z3{constructor(t,l,i){this.url=t,this.headers=l,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(t){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(t)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Eg="x-goog-api-key";class W3{constructor(t){this.apiKey=t}async addAuthHeaders(t,l){if(t.get(Eg)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");t.append(Eg,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const eE="gl-node/";class tE{constructor(t){var l;if(t.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(t.project||t.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(l=t.vertexai)!==null&&l!==void 0?l:!1,this.apiKey=t.apiKey;const i=M_(t.httpOptions,t.vertexai,void 0,void 0);i&&(t.httpOptions?t.httpOptions.baseUrl=i:t.httpOptions={baseUrl:i}),this.apiVersion=t.apiVersion;const o=new W3(this.apiKey);this.apiClient=new pk({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:t.httpOptions,userAgentExtra:eE+"web",uploader:new Q3,downloader:new O3}),this.models=new zk(this.apiClient),this.live=new Tk(this.apiClient,o,new X3),this.batches=new iS(this.apiClient),this.chats=new OS(this.models,this.apiClient),this.caches=new PS(this.apiClient),this.files=new XS(this.apiClient),this.operations=new Lk(this.apiClient),this.authTokens=new Zk(this.apiClient),this.tunings=new q3(this.apiClient),this.fileSearchStores=new N3(this.apiClient)}}const hv=()=>{const n="PLACEHOLDER_API_KEY";return new tE({apiKey:n})},sE=async(n,t)=>{const l=hv();if(!l)throw new Error("API Key missing");const i=n.observations.filter(f=>f.score===2).map(f=>`${f.criteria} (${f.indicators.join(" ")})`).join(", "),o=n.observations.filter(f=>f.score===0||f.score===1).map(f=>`${f.criteria} (${f.indicators.join(" ")})`).join(", "),c=n.assessmentKeywords?`
       : ${n.assessmentKeywords}`:"",u=`
       .   " "       .
    
    : ${t.fullName}
    : ${n.subject}
    : ${n.topic}
    
       ( ): ${i}
       (    ): ${o}
    ${c}
    
    :
    1.       .
    2.      .
    3.          .
    4.          .
    5.     (      ).
    6.      .
    7.           .
    8. :  100-150 .
  `;try{return(await l.models.generateContent({model:"gemini-2.5-flash",contents:u})).text||"   ."}catch(f){throw console.error("Gemini API Error:",f),new Error("    Gemini")}},nE=async n=>{var i;const t=hv();if(!t)return"";const l=`     ( )     : "${n}".`;try{return((i=(await t.models.generateContent({model:"gemini-2.5-flash",contents:l})).text)==null?void 0:i.trim())||""}catch{return""}},Pe=({value:n,onChange:t,placeholder:l,className:i,minHeight:o="min-h-[60px]"})=>{const[c,u]=k.useState(!1),[f,x]=k.useState(!0),m=k.useRef(null);k.useEffect(()=>{if(!("webkitSpeechRecognition"in window)&&!("SpeechRecognition"in window)){x(!1);return}const y=window.SpeechRecognition||window.webkitSpeechRecognition;m.current=new y,m.current.continuous=!0,m.current.interimResults=!0,m.current.lang="ar-DZ",m.current.onresult=N=>{let C="";for(let A=N.resultIndex;A<N.results.length;++A)N.results[A].isFinal&&(C+=N.results[A][0].transcript);if(C){const A=n+(n&&!n.endsWith(" ")?" ":"")+C;t(A)}},m.current.onerror=N=>{console.error("Speech recognition error",N.error),u(!1)},m.current.onend=()=>{u(!1)}},[n,t]);const b=()=>{var y,N;if(!f){alert("     .   Chrome  Edge.");return}c?((y=m.current)==null||y.stop(),u(!1)):((N=m.current)==null||N.start(),u(!0))};return e.jsxs("div",{className:"relative",children:[e.jsx("textarea",{value:n,onChange:y=>t(y.target.value),placeholder:c?" ...  ":l,className:`${i} ${o} ${c?"border-red-400 bg-red-50/30":""} transition-colors pl-10`}),e.jsx("button",{onClick:b,className:`absolute bottom-2 left-2 p-2 rounded-full transition-all duration-300 shadow-sm flex items-center justify-center z-10
                    ${c?"bg-red-500 text-white animate-pulse hover:bg-red-600 scale-110":"bg-gray-100 text-gray-500 hover:bg-blue-100 hover:text-blue-600"}
                    ${f?"":"opacity-50 cursor-not-allowed"}
                `,title:c?" ":" ",type:"button",children:c?e.jsx(kb,{size:16}):e.jsx(Eb,{size:16})}),c&&e.jsx("span",{className:"absolute bottom-3 left-12 text-xs text-red-500 font-bold animate-pulse whitespace-nowrap pointer-events-none",children:" ..."})]})};var ul=ub();const ve=({label:n,value:t,onChange:l,options:i=[],placeholder:o,type:c="text",className:u=""})=>{const[f,x]=k.useState(!1),[m,b]=k.useState(!1),[y,N]=k.useState({}),[C,A]=k.useState(!0),[E,R]=k.useState(!1),P=k.useRef(null),O=k.useRef(null),z=k.useMemo(()=>`dropdown-${n?n.replace(/\s/g,"-"):Math.random().toString(36).slice(2,11)}`,[n]),K=()=>{if(P.current){const J=P.current.getBoundingClientRect(),Q=window.innerHeight-J.bottom,U=J.top,ae=Q<250&&U>200,se={position:"fixed",left:J.left,width:J.width,zIndex:1e5};ae?(se.bottom=window.innerHeight-J.top+5,se.maxHeight=Math.min(300,U-20)):(se.top=J.bottom+5,se.maxHeight=Math.min(300,Q-20)),N(se)}},G=(J=!1)=>{i&&i.length>0&&(K(),R(J),b(!0))};k.useEffect(()=>{if(!m)return;const J=Q=>{const U=document.getElementById(z);U&&Q.target instanceof Node&&U.contains(Q.target)||b(!1)};return window.addEventListener("scroll",J,!0),window.addEventListener("resize",J),()=>{window.removeEventListener("scroll",J,!0),window.removeEventListener("resize",J)}},[m,z]),k.useEffect(()=>{function J(Q){const U=P.current&&P.current.contains(Q.target),ae=document.getElementById(z),se=ae&&ae.contains(Q.target);!U&&!se&&b(!1)}return m&&document.addEventListener("mousedown",J),()=>document.removeEventListener("mousedown",J)},[m,z]),k.useEffect(()=>{if(!("webkitSpeechRecognition"in window)&&!("SpeechRecognition"in window)){A(!1);return}const J=window.SpeechRecognition||window.webkitSpeechRecognition;O.current=new J,O.current.continuous=!1,O.current.interimResults=!1,O.current.lang="ar-DZ",O.current.onresult=Q=>{const U=Q.results[0][0].transcript;U&&l(U.replace(/\.$/,"")),x(!1)},O.current.onerror=()=>x(!1),O.current.onend=()=>x(!1)},[l]);const F=()=>{var J,Q;C&&(f?(J=O.current)==null||J.stop():((Q=O.current)==null||Q.start(),x(!0)))},$=J=>{l(J),b(!1)},B=i&&i.length>0,q=k.useMemo(()=>{if(!B)return[];if(E||!t||i.includes(t))return i;const J=i.filter(Q=>Q.toLowerCase().includes(t.toLowerCase()));return J.length>0?J:i},[i,t,E,B]);return e.jsxs("div",{className:`relative ${u}`,ref:P,children:[n&&e.jsx("label",{className:"block text-[11px] font-bold text-gray-700 mb-1.5",children:n}),e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:c,value:t,onChange:J=>{l(J.target.value),R(!1),B&&(K(),b(!0))},onFocus:()=>{},onClick:()=>{B&&G(!0)},placeholder:f?" ...":o,className:`w-full border rounded-lg py-2 px-3 pl-9 text-sm outline-none transition-all shadow-sm
                        ${f?"bg-red-50 border-red-300 ring-2 ring-red-100":"bg-white border-gray-300 focus:border-blue-500 focus:ring-2 focus:ring-blue-100"}
                        ${B?"cursor-pointer":""}
                    `}),e.jsx("button",{onClick:F,type:"button",tabIndex:-1,className:`absolute left-2 top-1/2 -translate-y-1/2 p-1.5 rounded-full transition-all z-10
                        ${f?"text-white bg-red-500 animate-pulse":"text-gray-400 hover:text-blue-600 hover:bg-gray-100"}`,title:" ",children:f?e.jsx(kb,{size:14}):e.jsx(Eb,{size:14})}),B&&c!=="date"&&e.jsx("button",{type:"button",tabIndex:-1,onClick:J=>{J.stopPropagation(),m?b(!1):G(!0)},className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 p-1 rounded hover:bg-gray-100 transition-colors",children:m?e.jsx(Ze,{size:16}):e.jsx(vh,{size:16})})]}),m&&B&&ul.createPortal(e.jsx("div",{id:z,style:y,className:"bg-white border border-gray-200 rounded-lg shadow-2xl overflow-y-auto animate-in fade-in zoom-in-95 duration-100 custom-scrollbar flex flex-col",children:q.length===0?e.jsx("div",{className:"px-3 py-4 text-center text-sm text-gray-400",children:"   "}):q.map((J,Q)=>e.jsxs("div",{onClick:()=>$(J),className:`px-3 py-2.5 text-sm cursor-pointer hover:bg-blue-50 hover:text-blue-700 flex justify-between items-center transition-colors border-b border-gray-50 last:border-0
                                    ${t===J?"bg-blue-50 text-blue-700 font-bold":"text-gray-700"}
                                `,children:[e.jsx("span",{className:"truncate",children:J}),t===J&&e.jsx(gs,{size:14,className:"shrink-0 ml-2"})]},Q))}),document.body)]})},lE=({report:n,teacher:t,onChange:l,onTeacherChange:i,onPrint:o,isGoldMember:c,onUpgradeClick:u,onUploadSignature:f,isExpired:x=!1})=>{const[m,b]=k.useState(!1),[y,N]=k.useState("info"),[C,A]=k.useState("saved"),[E,R]=k.useState("manual"),[P,O]=k.useState(!1),z=k.useRef(null),[K,G]=k.useState(new Set),F=k.useRef(n);k.useEffect(()=>{F.current=n},[n]),k.useEffect(()=>{if(!x){A("saving");const U=setTimeout(()=>{localStorage.setItem("mufattish_draft",JSON.stringify(n)),A("saved")},1e3);return()=>clearTimeout(U)}},[n,x]),k.useEffect(()=>{E==="ai"&&!c&&R("manual")},[c,E]);const $=(U,ae)=>{x||l({...n,[U]:ae})},B=(U,ae)=>{x||i&&i({...t,[U]:ae})},q=async(U,ae)=>{if(x)return;const se=n.observations.map(ne=>ne.id===U?{...ne,score:ae}:ne);if(l({...n,observations:se}),E==="ai"&&ae!==null&&ae<2){const ne=se.find(w=>w.id===U);if(ne&&!ne.improvementNotes.trim()){G(w=>new Set(w).add(U));try{const w=await nE(ne.criteria);if(w){const D=F.current,V=D.observations.map(Y=>Y.id===U?{...Y,improvementNotes:w}:Y);l({...D,observations:V})}}catch(w){console.error("Failed to generate suggestion",w)}finally{G(w=>{const D=new Set(w);return D.delete(U),D})}}}},J=(U,ae)=>{if(x)return;const se=n.observations.map(ne=>ne.id===U?{...ne,improvementNotes:ae}:ne);l({...n,observations:se})},Q=Array.from(new Set(n.observations.map(U=>U.category)));return e.jsxs("div",{className:`h-full flex flex-col bg-gray-50 transition-all duration-300 ${P?"fixed inset-0 z-[100] w-screen h-screen":""}`,children:[x&&e.jsxs("div",{className:"bg-red-500 text-white text-center py-1 text-sm font-bold flex items-center justify-center gap-2",children:[e.jsx(Dt,{size:14}),e.jsx("span",{children:"   -  "})]}),e.jsxs("div",{className:"bg-white border-b p-4 flex justify-between items-center sticky top-0 z-20 shadow-sm shrink-0",children:[e.jsxs("div",{className:"flex gap-2 overflow-x-auto no-scrollbar",children:[e.jsx("button",{onClick:()=>N("info"),className:`px-4 py-2 rounded-lg font-bold transition-colors whitespace-nowrap ${y==="info"?"bg-blue-600 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-600"}`,children:"1. "}),e.jsx("button",{onClick:()=>N("rubric"),className:`px-4 py-2 rounded-lg font-bold transition-colors whitespace-nowrap ${y==="rubric"?"bg-blue-600 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-600"}`,children:"2. "}),e.jsx("button",{onClick:()=>N("result"),className:`px-4 py-2 rounded-lg font-bold transition-colors whitespace-nowrap ${y==="result"?"bg-blue-600 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-600"}`,children:"3. "})]}),e.jsxs("div",{className:"flex items-center gap-2 md:gap-4",children:[!x&&e.jsx("div",{className:"hidden md:flex items-center gap-2 text-xs font-medium transition-colors duration-500",children:C==="saving"?e.jsxs(e.Fragment,{children:[e.jsx(sc,{size:14,className:"animate-spin text-blue-500"}),e.jsx("span",{className:"text-blue-500",children:" ..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Nh,{size:14,className:"text-green-600"}),e.jsx("span",{className:"text-green-600",children:" "})]})}),e.jsx("button",{onClick:()=>O(!P),className:`p-2 rounded-lg transition-colors ${P?"bg-indigo-100 text-indigo-600":"text-gray-500 hover:bg-gray-100"}`,title:P?"  ":"  ( )",children:P?e.jsx(tn,{size:20}):e.jsx(en,{size:20})}),f&&!x&&e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"file",ref:z,onChange:f,className:"hidden",accept:"image/*"}),e.jsxs("button",{onClick:()=>{var U;return(U=z.current)==null?void 0:U.click()},className:"flex items-center gap-2 bg-indigo-50 text-indigo-700 px-3 py-2 rounded-lg hover:bg-indigo-100 border border-indigo-200 transition-colors",title:"  /",children:[e.jsx(ai,{size:18}),e.jsx("span",{className:"hidden md:inline font-bold text-sm",children:"/"})]})]}),e.jsxs("button",{onClick:x?u:o,className:`flex items-center gap-2 px-4 py-2 rounded-lg shadow-sm ${x?"bg-gray-300 text-gray-600 cursor-not-allowed":"bg-gray-800 text-white hover:bg-gray-900"}`,children:[x?e.jsx(Dt,{size:18}):e.jsx(bs,{size:18}),e.jsx("span",{className:"hidden md:inline",children:""})]})]})]}),e.jsxs("div",{className:`flex-1 overflow-y-auto p-4 md:p-6 max-w-4xl mx-auto w-full ${x?"pointer-events-none opacity-80":""}`,children:[y==="info"&&e.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100 relative",children:[e.jsx("div",{className:"absolute top-0 right-0 bg-blue-50 p-2 rounded-bl-xl rounded-tr-xl border-l border-b border-blue-100 text-blue-700",children:e.jsx(Hl,{size:20})}),e.jsx("h2",{className:"text-lg font-bold text-gray-800 border-b pb-2 mb-4 pr-10",children:" "}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(ve,{label:"  ",value:n.wilaya,onChange:U=>$("wilaya",U)}),e.jsx(ve,{label:" ",value:n.district,onChange:U=>$("district",U)}),e.jsx(ve,{label:" ",value:n.school,onChange:U=>$("school",U)})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100 relative",children:[e.jsx("div",{className:"absolute top-0 right-0 bg-indigo-50 p-2 rounded-bl-xl rounded-tr-xl border-l border-b border-indigo-100 text-indigo-700",children:e.jsx(vs,{size:20})}),e.jsx("h2",{className:"text-lg font-bold text-gray-800 border-b pb-2 mb-4 pr-10",children:" "}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx("div",{className:"md:col-span-2",children:e.jsx(ve,{label:" ",value:t.fullName,onChange:U=>B("fullName",U)})}),e.jsx(ve,{type:"date",label:" ",value:t.birthDate,onChange:U=>B("birthDate",U)}),e.jsx(ve,{label:" ",value:t.birthPlace,onChange:U=>B("birthPlace",U)}),e.jsx(ve,{label:" ",value:t.degree,onChange:U=>B("degree",U),options:Lb}),e.jsx(ve,{type:"date",label:" ",value:t.degreeDate||"",onChange:U=>B("degreeDate",U)})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100 relative",children:[e.jsx("div",{className:"absolute top-0 right-0 bg-green-50 p-2 rounded-bl-xl rounded-tr-xl border-l border-b border-green-100 text-green-700",children:e.jsx(_r,{size:20})}),e.jsx("h2",{className:"text-lg font-bold text-gray-800 border-b pb-2 mb-4 pr-10",children:" "}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(ve,{type:"date",label:"  ",value:t.recruitmentDate,onChange:U=>B("recruitmentDate",U)}),e.jsx(ve,{label:" ",value:t.rank,onChange:U=>B("rank",U),options:Ub}),e.jsx(ve,{type:"date",label:"   ",value:t.currentRankDate||"",onChange:U=>B("currentRankDate",U)}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(ve,{label:"",value:t.echelon||"",onChange:U=>B("echelon",U),options:Array.from({length:12},(U,ae)=>(ae+1).toString())}),e.jsx(ve,{type:"date",label:"",value:t.echelonDate||"",onChange:U=>B("echelonDate",U)})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(ve,{type:"date",label:"  ",value:t.lastInspectionDate,onChange:U=>B("lastInspectionDate",U)}),e.jsx(ve,{type:"number",label:" ",value:t.lastMark.toString(),onChange:U=>B("lastMark",parseFloat(U))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[11px] font-bold text-gray-700 mb-1.5",children:" "}),e.jsxs("div",{className:"flex gap-2 p-1 bg-gray-50 rounded-lg border",children:[e.jsxs("label",{className:"flex-1 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"status",value:"titulaire",checked:t.status==="titulaire",onChange:()=>B("status","titulaire"),className:"hidden peer"}),e.jsx("div",{className:"text-center py-2 text-sm rounded-md peer-checked:bg-green-500 peer-checked:text-white transition-colors text-gray-600 font-medium",children:""})]}),e.jsxs("label",{className:"flex-1 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"status",value:"contractuel",checked:t.status==="contractuel",onChange:()=>B("status","contractuel"),className:"hidden peer"}),e.jsx("div",{className:"text-center py-2 text-sm rounded-md peer-checked:bg-orange-500 peer-checked:text-white transition-colors text-gray-600 font-medium",children:""})]}),e.jsxs("label",{className:"flex-1 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"status",value:"stagiere",checked:t.status==="stagiere",onChange:()=>B("status","stagiere"),className:"hidden peer"}),e.jsx("div",{className:"text-center py-2 text-sm rounded-md peer-checked:bg-blue-500 peer-checked:text-white transition-colors text-gray-600 font-medium",children:""})]})]})]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100 relative",children:[e.jsx("div",{className:"absolute top-0 right-0 bg-yellow-50 p-2 rounded-bl-xl rounded-tr-xl border-l border-b border-yellow-100 text-yellow-700",children:e.jsx(Vt,{size:20})}),e.jsx("h2",{className:"text-lg font-bold text-gray-800 border-b pb-2 mb-4 pr-10",children:"  "}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(ve,{type:"date",label:" ",value:n.inspectionDate,onChange:U=>$("inspectionDate",U)}),e.jsx(ve,{label:" / ",value:n.subject,onChange:U=>$("subject",U),options:Hw}),e.jsx(ve,{label:"",value:n.topic,onChange:U=>$("topic",U)}),e.jsx(ve,{label:" ()",value:n.duration,onChange:U=>$("duration",U)}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(ve,{label:"",value:n.level,onChange:U=>$("level",U),options:Bw}),e.jsx(ve,{label:"",value:n.group,onChange:U=>$("group",U)})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(ve,{type:"number",label:"  ()",value:n.studentCount.toString(),onChange:U=>$("studentCount",parseInt(U))}),e.jsx(ve,{type:"number",label:" ",value:n.absentCount.toString(),onChange:U=>$("absentCount",parseInt(U))})]})]})]})]}),y==="rubric"&&e.jsx("div",{className:"space-y-8 animate-in fade-in slide-in-from-right-4 duration-500",children:Q.map((U,ae)=>e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100",children:[e.jsx("div",{className:"bg-gray-50 px-6 py-3 border-b border-gray-100 flex justify-between items-center rounded-t-xl",children:e.jsxs("h3",{className:"font-bold text-lg text-gray-800",children:[ae+1,". ",U]})}),e.jsx("div",{className:"divide-y divide-gray-50",children:n.observations.filter(se=>se.category===U).map(se=>{const ne=Fw[se.criteria]||[];return e.jsxs("div",{className:"p-4 hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-bold text-gray-800 mb-1",children:se.criteria}),e.jsx("p",{className:"text-sm text-gray-500",children:se.indicators.join(" - ")})]}),e.jsxs("div",{className:"flex gap-2 shrink-0",children:[e.jsx("button",{onClick:()=>q(se.id,2),className:`px-3 py-1.5 rounded-lg border text-sm font-bold transition-colors ${se.score===2?"bg-green-600 text-white border-green-600":"bg-white text-gray-600 hover:bg-green-50"}`,children:" (2)"}),e.jsx("button",{onClick:()=>q(se.id,1),className:`px-3 py-1.5 rounded-lg border text-sm font-bold transition-colors ${se.score===1?"bg-yellow-500 text-white border-yellow-500":"bg-white text-gray-600 hover:bg-yellow-50"}`,children:" (1)"}),e.jsx("button",{onClick:()=>q(se.id,0),className:`px-3 py-1.5 rounded-lg border text-sm font-bold transition-colors ${se.score===0?"bg-red-500 text-white border-red-500":"bg-white text-gray-600 hover:bg-red-50"}`,children:"  (0)"})]})]}),e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"relative mb-2",children:[e.jsxs("select",{onChange:w=>{w.target.value&&J(se.id,w.target.value)},className:"w-full appearance-none bg-white border border-gray-300 text-gray-700 py-2 px-3 pr-8 rounded leading-tight focus:outline-none focus:bg-white focus:border-blue-500 text-sm cursor-pointer",value:"",children:[e.jsxs("option",{value:"",children:["--     (",ne.length," ) --"]}),ne.map((w,D)=>e.jsx("option",{value:w,children:w.length>80?w.substring(0,80)+"...":w},D))]}),e.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center px-2 text-gray-700",children:e.jsx(vh,{size:14})})]}),e.jsx(Pe,{value:se.improvementNotes,onChange:w=>J(se.id,w),placeholder:"  (  )...",className:"w-full border rounded-lg p-2 text-sm focus:ring-2 focus:ring-blue-500 outline-none bg-gray-50/50"}),K.has(se.id)&&e.jsxs("div",{className:"flex items-center gap-1 text-xs text-indigo-500 animate-pulse mt-1",children:[e.jsx(_h,{size:12}),"   ..."]})]})]},se.id)})})]},U))}),y==="result"&&e.jsx("div",{className:"space-y-6 animate-in fade-in slide-in-from-left-4 duration-500",children:e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-800 border-b pb-2 mb-4",children:" "}),e.jsxs("div",{className:"mb-4 relative",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"  ( )"}),e.jsx(Pe,{value:n.generalAssessment,onChange:U=>$("generalAssessment",U),className:"w-full border rounded-lg p-4 focus:ring-2 focus:ring-blue-500 outline-none leading-relaxed text-justify",placeholder:"  ...",minHeight:"min-h-[250px]"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 border-t pt-4 items-end",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"  (/20)"}),e.jsx("input",{type:"number",min:"0",max:"20",step:"0.25",value:n.finalMark,onChange:U=>$("finalMark",parseFloat(U.target.value)),className:"w-full border rounded-lg p-2 text-2xl font-bold text-center focus:ring-2 focus:ring-blue-500 outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" "}),e.jsx(ve,{value:n.markInLetters,onChange:U=>$("markInLetters",U),className:"w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"  "}),e.jsx(ve,{type:"date",value:n.inspectionDate,onChange:U=>$("inspectionDate",U)})]})]})]})})]})]})},aE=({report:n,teacher:t,onChange:l,onPrint:i,isGoldMember:o,onUploadSignature:c,isExpired:u=!1,onUpgradeClick:f})=>{const[x,m]=k.useState("info"),b=k.useRef(null),y=(R,P)=>{l({...n,[R]:P})},N=(R,P)=>{l({...n,oralQuestions:{...n.oralQuestions,[R]:P}})},C=(R,P,O)=>{const z=n.lessons.map(K=>K.id===R?{...K,[P]:O}:K);l({...n,lessons:z})},A=async()=>{if(!o&&u)return f&&f();N("legislation","     "),N("psychology","      "),N("educationScience","      .")},E=()=>{u?f&&f():i()};return e.jsxs("div",{className:"h-full flex flex-col bg-gray-50",children:[e.jsxs("div",{className:"bg-[#4d6a4d] text-white border-b p-4 flex justify-between items-center sticky top-0 z-20 shadow-sm",children:[e.jsxs("div",{className:"flex gap-2 text-xs md:text-sm",children:[e.jsxs("button",{onClick:()=>m("info"),className:`px-3 py-2 rounded-lg font-bold transition-colors flex items-center gap-2 ${x==="info"?"bg-white text-[#4d6a4d]":"bg-[#3d5a3d] hover:bg-[#2d4a2d] text-green-100"}`,children:[e.jsx(vs,{size:16}),"  "]}),e.jsxs("button",{onClick:()=>m("lessons"),className:`px-3 py-2 rounded-lg font-bold transition-colors flex items-center gap-2 ${x==="lessons"?"bg-white text-[#4d6a4d]":"bg-[#3d5a3d] hover:bg-[#2d4a2d] text-green-100"}`,children:[e.jsx(Vt,{size:16}),"  (3)"]}),e.jsxs("button",{onClick:()=>m("oral"),className:`px-3 py-2 rounded-lg font-bold transition-colors flex items-center gap-2 ${x==="oral"?"bg-white text-[#4d6a4d]":"bg-[#3d5a3d] hover:bg-[#2d4a2d] text-green-100"}`,children:[e.jsx(c2,{size:16})," "]}),e.jsxs("button",{onClick:()=>m("decision"),className:`px-3 py-2 rounded-lg font-bold transition-colors flex items-center gap-2 ${x==="decision"?"bg-white text-[#4d6a4d]":"bg-[#3d5a3d] hover:bg-[#2d4a2d] text-green-100"}`,children:[e.jsx(vj,{size:16})," "]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[c&&!u&&e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"file",ref:b,onChange:c,className:"hidden",accept:"image/*"}),e.jsx("button",{onClick:()=>{var R;return(R=b.current)==null?void 0:R.click()},className:"p-2 rounded-lg text-green-100 hover:bg-[#2d4a2d] hover:text-white transition-colors",title:"  /",children:e.jsx(ai,{size:20})})]}),e.jsxs("button",{onClick:E,className:`flex items-center gap-2 px-4 py-2 rounded-lg font-bold shadow-sm ${u?"bg-gray-300 text-gray-600":"bg-white text-[#4d6a4d] hover:bg-gray-100"}`,children:[u?e.jsx(Dt,{size:18}):e.jsx(bs,{size:18}),""]})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 max-w-4xl mx-auto w-full",children:[u&&e.jsxs("div",{className:"bg-red-500 text-white text-center py-2 px-4 rounded-lg mb-6 text-sm font-bold flex items-center justify-center gap-2 shadow-md",children:[e.jsx(Dt,{size:16}),e.jsx("span",{children:"  .      ."})]}),x==="info"&&e.jsx("div",{className:"space-y-6 animate-in fade-in",children:e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[e.jsx("h2",{className:"text-xl font-bold text-[#4d6a4d] border-b pb-2 mb-4",children:"  "}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[e.jsx(ve,{type:"date",label:" ",value:n.examDate,onChange:R=>y("examDate",R)}),e.jsx(ve,{label:" ( )",value:n.school,onChange:R=>y("school",R)}),e.jsx(ve,{label:" (  )",value:n.city,onChange:R=>y("city",R)})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[e.jsx(ve,{label:"  ",value:n.wilaya,onChange:R=>y("wilaya",R)}),e.jsx(ve,{label:"   ()",value:n.district,onChange:R=>y("district",R)})]}),e.jsx("h3",{className:"font-bold text-gray-600 mt-6 mb-2 border-b border-gray-100 pb-1",children:" "}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(ve,{label:"  ()",value:n.inspectorName,onChange:R=>y("inspectorName",R),className:"bg-green-50"}),e.jsx(ve,{label:" 1 ()",value:n.directorName,onChange:R=>y("directorName",R)}),e.jsx(ve,{label:" 2 ()",value:n.teacherMemberName,onChange:R=>y("teacherMemberName",R)})]}),e.jsx("h3",{className:"font-bold text-gray-600 mt-6 mb-2 border-b border-gray-100 pb-1",children:"   ()"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"flex-1",children:e.jsx(ve,{label:"  ",value:n.appointmentDecisionNumber,onChange:R=>y("appointmentDecisionNumber",R)})}),e.jsx("div",{className:"w-32",children:e.jsx(ve,{type:"date",label:"",value:n.appointmentDecisionDate,onChange:R=>y("appointmentDecisionDate",R)})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"flex-1",children:e.jsx(ve,{label:"  ",value:n.financialVisaNumber,onChange:R=>y("financialVisaNumber",R)})}),e.jsx("div",{className:"w-32",children:e.jsx(ve,{type:"date",label:"",value:n.financialVisaDate,onChange:R=>y("financialVisaDate",R)})})]}),e.jsx(ve,{label:" /  ",value:n.university,onChange:R=>y("university",R),placeholder:"   ..."}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-[11px] font-bold text-gray-700 mb-1.5",children:" "}),e.jsx("input",{list:"recruitmentTypes",value:n.recruitmentType||"",onChange:R=>y("recruitmentType",R.target.value),className:"w-full border rounded-lg py-2 px-3 text-sm outline-none",placeholder:"  ..."}),e.jsxs("datalist",{id:"recruitmentTypes",children:[e.jsx("option",{value:"  "}),e.jsx("option",{value:""}),e.jsx("option",{value:"  "})]})]}),e.jsx("div",{className:"w-32",children:e.jsx(ve,{type:"date",label:" /",value:n.contestDate,onChange:R=>y("contestDate",R)})})]})]})]})}),x==="lessons"&&e.jsx("div",{className:"space-y-6 animate-in fade-in",children:n.lessons.map((R,P)=>e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[e.jsxs("h3",{className:"text-lg font-bold text-[#4d6a4d] border-b pb-2 mb-4 flex justify-between items-center",children:[e.jsx("span",{children:P===0?" ":P===1?" ":" "}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs bg-gray-100 px-2 py-1 rounded text-gray-600",children:":"}),e.jsx("input",{type:"time",value:R.timeStart,onChange:O=>C(R.id,"timeStart",O.target.value),className:"border rounded px-1 text-sm"}),e.jsx("span",{children:"-"}),e.jsx("input",{type:"time",value:R.timeEnd,onChange:O=>C(R.id,"timeEnd",O.target.value),className:"border rounded px-1 text-sm"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsx(ve,{label:" / ",value:R.subject,onChange:O=>C(R.id,"subject",O)}),e.jsx(ve,{label:"",value:R.topic,onChange:O=>C(R.id,"topic",O)}),e.jsx(ve,{label:" / ",value:R.level,onChange:O=>C(R.id,"level",O)})]}),e.jsxs("div",{className:"space-y-4 bg-gray-50 p-4 rounded-lg border border-gray-100",children:[e.jsxs("h4",{className:"font-bold text-sm text-gray-700 flex items-center gap-2",children:[e.jsx(Vt,{size:14}),"    ( )"]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"1.   ( )"}),e.jsx(Pe,{value:R.phaseLaunch,onChange:O=>C(R.id,"phaseLaunch",O),className:"w-full border rounded p-2 text-sm bg-white",minHeight:"min-h-[40px]",placeholder:":     ..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"2.   "}),e.jsx(Pe,{value:R.phaseConstruction,onChange:O=>C(R.id,"phaseConstruction",O),className:"w-full border rounded p-2 text-sm bg-white",minHeight:"min-h-[60px]",placeholder:"  ..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"3.   ()"}),e.jsx(Pe,{value:R.phaseInvestment,onChange:O=>C(R.id,"phaseInvestment",O),className:"w-full border rounded p-2 text-sm bg-white",minHeight:"min-h-[40px]",placeholder:"   ..."})]})]})]},R.id))}),x==="oral"&&e.jsx("div",{className:"space-y-6 animate-in fade-in",children:e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"flex justify-between items-center border-b pb-2 mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-[#4d6a4d]",children:" "}),e.jsxs("button",{onClick:A,className:"text-xs bg-indigo-50 text-indigo-600 px-3 py-1 rounded-full flex items-center gap-1 hover:bg-indigo-100",children:[e.jsx(_h,{size:12}),"  "]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"1.    / "}),e.jsx(Pe,{value:n.oralQuestions.educationScience,onChange:R=>N("educationScience",R),className:"w-full border rounded-lg p-3 text-sm bg-blue-50/20",placeholder:":     ",minHeight:"min-h-[80px]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"2.   "}),e.jsx(Pe,{value:n.oralQuestions.psychology,onChange:R=>N("psychology",R),className:"w-full border rounded-lg p-3 text-sm bg-green-50/20",placeholder:":    ...",minHeight:"min-h-[80px]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"3.   "}),e.jsx(Pe,{value:n.oralQuestions.legislation,onChange:R=>N("legislation",R),className:"w-full border rounded-lg p-3 text-sm bg-orange-50/20",placeholder:":   ...",minHeight:"min-h-[80px]"})]})]})]})}),x==="decision"&&e.jsx("div",{className:"space-y-6 animate-in fade-in",children:e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[e.jsx("h2",{className:"text-xl font-bold text-[#4d6a4d] border-b pb-2 mb-6",children:"  "}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 mb-8 text-center",children:[e.jsxs("div",{className:"bg-green-50 p-4 rounded-xl border border-green-100",children:[e.jsx("label",{className:"block text-sm font-bold text-gray-600 mb-2",children:"  ()"}),e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("input",{type:"number",max:"40",value:n.pedagogyMark,onChange:R=>{const P=R.target.value===""?0:parseFloat(R.target.value);l({...n,pedagogyMark:P,totalMark:P+(n.oralMark||0)})},className:"w-20 text-center text-3xl font-bold border-b-2 border-green-500 bg-transparent focus:outline-none"}),e.jsx("span",{className:"text-gray-400 font-bold text-xl",children:"/ 40"})]})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-xl border border-blue-100",children:[e.jsx("label",{className:"block text-sm font-bold text-gray-600 mb-2",children:"  "}),e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("input",{type:"number",max:"20",value:n.oralMark,onChange:R=>{const P=R.target.value===""?0:parseFloat(R.target.value);l({...n,oralMark:P,totalMark:(n.pedagogyMark||0)+P})},className:"w-20 text-center text-3xl font-bold border-b-2 border-blue-500 bg-transparent focus:outline-none"}),e.jsx("span",{className:"text-gray-400 font-bold text-xl",children:"/ 20"})]})]}),e.jsxs("div",{className:"bg-[#2d4a2d] text-white p-4 rounded-xl shadow-lg transform scale-105 flex flex-col justify-center",children:[e.jsx("label",{className:"block text-xs font-bold text-green-200 mb-2",children:" "}),e.jsxs("div",{className:"text-5xl font-bold",children:[n.totalMark," ",e.jsx("span",{className:"text-lg text-green-300",children:"/ 60"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700",children:"  "}),e.jsxs("select",{value:n.culturalValue,onChange:R=>y("culturalValue",R.target.value),className:"w-full border p-2 rounded",children:[e.jsx("option",{value:"",children:""}),e.jsx("option",{value:" ",children:" "}),e.jsx("option",{value:"",children:""}),e.jsx("option",{value:"",children:""}),e.jsx("option",{value:"",children:""})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700",children:"  "}),e.jsxs("select",{value:n.pedagogicalValue,onChange:R=>y("pedagogicalValue",R.target.value),className:"w-full border p-2 rounded",children:[e.jsx("option",{value:"",children:""}),e.jsx("option",{value:" ",children:" "}),e.jsx("option",{value:"",children:""}),e.jsx("option",{value:"",children:""}),e.jsx("option",{value:"",children:""})]})]})]}),e.jsxs("div",{className:"mt-8 border-t pt-6",children:[e.jsx("label",{className:"block text-lg font-bold text-center mb-4",children:"  "}),e.jsxs("div",{className:"flex justify-center gap-4",children:[e.jsx("button",{onClick:()=>y("finalDecision","confirmed"),className:`px-8 py-4 rounded-xl border-2 font-bold text-lg transition-all ${n.finalDecision==="confirmed"?"bg-green-600 text-white border-green-600 shadow-lg scale-105":"bg-white text-gray-400 border-gray-200"}`,children:" ()"}),e.jsx("button",{onClick:()=>y("finalDecision","deferred"),className:`px-8 py-4 rounded-xl border-2 font-bold text-lg transition-all ${n.finalDecision==="deferred"?"bg-orange-500 text-white border-orange-500 shadow-lg scale-105":"bg-white text-gray-400 border-gray-200"}`,children:""}),e.jsx("button",{onClick:()=>y("finalDecision","failed"),className:`px-8 py-4 rounded-xl border-2 font-bold text-lg transition-all ${n.finalDecision==="failed"?"bg-red-600 text-white border-red-600 shadow-lg scale-105":"bg-white text-gray-400 border-gray-200"}`,children:""})]})]})]})})]})]})},iE=({report:n,teacher:t,onChange:l,onTeacherChange:i,onPrint:o,isGoldMember:c,onUpgradeClick:u,onUploadSignature:f,isExpired:x=!1})=>{var O,z,K,G,F,$,B,q,J,Q,U,ae,se,ne,w,D,V,Y,le,_,M,j,T,L,H,Z,de,fe,je,we,xe,Ne,Ae,ie;const[m,b]=k.useState("info"),[y,N]=k.useState(!1),C=k.useRef(null),A=(ee,ke)=>{x||l({...n,[ee]:ke})},E=(ee,ke)=>{x||l({...n,legacyData:{...n.legacyData,[ee]:ke}})},R=(ee,ke)=>{x||i&&i({...t,[ee]:ke})},P=async()=>{if(!x){if(!c){u();return}N(!0);try{const ee=await sE(n,t);A("generalAssessment",ee)}catch{alert("  ")}finally{N(!1)}}};return e.jsxs("div",{className:`h-full flex flex-col bg-gray-50 ${x?"pointer-events-none opacity-80":""}`,children:[e.jsxs("div",{className:"bg-gray-800 text-white border-b p-4 flex justify-between items-center sticky top-0 z-20 shadow-sm pointer-events-auto",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>b("info"),className:`px-4 py-2 rounded-lg font-bold transition-colors flex items-center gap-2 ${m==="info"?"bg-white text-gray-900":"bg-gray-700 hover:bg-gray-600"}`,children:[e.jsx(vs,{size:18})," "]}),e.jsxs("button",{onClick:()=>b("grid"),className:`px-4 py-2 rounded-lg font-bold transition-colors flex items-center gap-2 ${m==="grid"?"bg-white text-gray-900":"bg-gray-700 hover:bg-gray-600"}`,children:[e.jsx(Wu,{size:18}),"  "]}),e.jsxs("button",{onClick:()=>b("evaluation"),className:`px-4 py-2 rounded-lg font-bold transition-colors flex items-center gap-2 ${m==="evaluation"?"bg-white text-gray-900":"bg-gray-700 hover:bg-gray-600"}`,children:[e.jsx(kn,{size:18}),"  "]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs bg-yellow-600 text-white px-2 py-1 rounded",children:" "}),f&&!x&&e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"file",ref:C,onChange:f,className:"hidden",accept:"image/*"}),e.jsx("button",{onClick:()=>{var ee;return(ee=C.current)==null?void 0:ee.click()},className:"p-2 rounded-lg text-gray-400 hover:bg-gray-700 hover:text-white transition-colors",title:"  /",children:e.jsx(ai,{size:20})})]}),e.jsxs("button",{onClick:x?u:o,className:`flex items-center gap-2 px-4 py-2 rounded-lg font-bold shadow-sm ${x?"bg-gray-600 text-gray-300":"bg-white text-gray-900 hover:bg-gray-100"}`,children:[x?e.jsx(Dt,{size:18}):e.jsx(bs,{size:18}),""]})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 max-w-5xl mx-auto w-full",children:[m==="info"&&e.jsx("div",{className:"space-y-6 animate-in fade-in",children:e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800 border-b pb-2 mb-4",children:"  "}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4 bg-gray-50 p-4 rounded-lg",children:[e.jsx(ve,{label:"",value:n.wilaya,onChange:ee=>A("wilaya",ee)}),e.jsx(ve,{label:"",value:((O=n.legacyData)==null?void 0:O.daira)||"",onChange:ee=>E("daira",ee)}),e.jsx(ve,{label:"",value:((z=n.legacyData)==null?void 0:z.municipality)||"",onChange:ee=>E("municipality",ee)}),e.jsx(ve,{label:"",value:n.district,onChange:ee=>A("district",ee)}),e.jsx(ve,{label:"",value:n.school,onChange:ee=>A("school",ee)}),e.jsx(ve,{label:" ",value:((K=n.legacyData)==null?void 0:K.schoolYear)||"",onChange:ee=>E("schoolYear",ee)})]}),e.jsx("hr",{className:"my-4"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(ve,{label:" ",value:t.fullName,onChange:ee=>R("fullName",ee)}),e.jsx(ve,{label:"/",value:((G=n.legacyData)==null?void 0:G.familyStatus)||"",onChange:ee=>E("familyStatus",ee),options:["()","()","()"]}),e.jsx(ve,{type:"date",label:" ",value:t.birthDate,onChange:ee=>R("birthDate",ee)}),e.jsx(ve,{label:" ",value:t.birthPlace,onChange:ee=>R("birthPlace",ee)}),e.jsx(ve,{type:"date",label:"  ",value:t.recruitmentDate,onChange:ee=>R("recruitmentDate",ee)}),e.jsx(ve,{label:" ()",value:t.rank,onChange:ee=>R("rank",ee),options:["  ","    ","    "," "," "]}),e.jsx(ve,{label:"",value:t.echelon||"",onChange:ee=>R("echelon",ee),options:Array.from({length:12},(ee,ke)=>(ke+1).toString())}),e.jsx(ve,{type:"date",label:" ",value:t.echelonDate||"",onChange:ee=>R("echelonDate",ee)}),e.jsx(ve,{label:" ",value:t.degree,onChange:ee=>R("degree",ee),options:Kw}),e.jsx(ve,{type:"date",label:"",value:t.degreeDate||((F=n.legacyData)==null?void 0:F.graduationDate)||"",onChange:ee=>{E("graduationDate",ee),R("degreeDate",ee)}}),e.jsx(ve,{label:" ",value:(($=n.legacyData)==null?void 0:$.trainingInstitute)||"",onChange:ee=>E("trainingInstitute",ee)}),e.jsx(ve,{type:"date",label:" ",value:((B=n.legacyData)==null?void 0:B.trainingDate)||"",onChange:ee=>E("trainingDate",ee)}),e.jsx(ve,{type:"date",label:"  ",value:t.lastInspectionDate,onChange:ee=>R("lastInspectionDate",ee)}),e.jsx(ve,{label:" ",value:t.lastMark.toString(),onChange:ee=>R("lastMark",parseFloat(ee)),type:"number"})]})]})}),m==="grid"&&e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 animate-in fade-in",dir:"rtl",children:[e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-200",children:[e.jsx("h3",{className:"font-bold text-md text-gray-800 border-b pb-2 mb-3 bg-gray-50 p-2 rounded",children:" "}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(ve,{type:"date",label:"",value:n.inspectionDate,onChange:ee=>A("inspectionDate",ee)}),e.jsx(ve,{label:"",value:n.duration,onChange:ee=>A("duration",ee)}),e.jsx(ve,{label:"",value:n.level,onChange:ee=>A("level",ee),options:Qw}),e.jsx(ve,{type:"number",label:" ",value:n.studentCount.toString(),onChange:ee=>A("studentCount",parseInt(ee))})]}),e.jsxs("div",{className:"mt-3 space-y-3",children:[e.jsx(ve,{label:"      ",value:((q=n.legacyData)==null?void 0:q.classroomListening)||"",onChange:ee=>E("classroomListening",ee),options:Xw}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(ve,{label:"",value:((J=n.legacyData)==null?void 0:J.lighting)||"",onChange:ee=>E("lighting",ee),options:tp}),e.jsx(ve,{label:"",value:((Q=n.legacyData)==null?void 0:Q.cleanliness)||"",onChange:ee=>E("cleanliness",ee),options:Ww}),e.jsx(ve,{label:"",value:((U=n.legacyData)==null?void 0:U.heating)||"",onChange:ee=>E("heating",ee),options:Zw}),e.jsx(ve,{label:"",value:((ae=n.legacyData)==null?void 0:ae.ventilation)||"",onChange:ee=>E("ventilation",ee),options:tp})]})]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-200",children:[e.jsx("h3",{className:"font-bold text-md text-gray-800 border-b pb-2 mb-3 bg-gray-50 p-2 rounded",children:" "}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(ve,{label:" ",value:n.subject,onChange:ee=>A("subject",ee),options:Yw}),e.jsx(ve,{label:"",value:n.topic,onChange:ee=>A("topic",ee)})]})]}),e.jsx("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-200",children:e.jsx(ve,{label:"  ",value:((se=n.legacyData)==null?void 0:se.documentsAndPosters)||"",onChange:ee=>E("documentsAndPosters",ee),options:s_})}),e.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-200 space-y-3",children:[e.jsx(ve,{label:"  ()",value:((ne=n.legacyData)==null?void 0:ne.lessonPreparation)||"",onChange:ee=>E("lessonPreparation",ee),options:e_}),e.jsx(ve,{label:" ",value:((w=n.legacyData)==null?void 0:w.preparationValue)||"",onChange:ee=>E("preparationValue",ee),options:t_})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-200 space-y-3",children:[e.jsx(ve,{label:"",value:((D=n.legacyData)==null?void 0:D.registers)||"",onChange:ee=>E("registers",ee),options:a_}),e.jsx(ve,{label:"    ",value:((V=n.legacyData)==null?void 0:V.registersUsed)||"",onChange:ee=>E("registersUsed",ee),options:i_}),e.jsxs("div",{className:"bg-blue-50 p-2 rounded border border-blue-100 mt-2",children:[e.jsx("label",{className:"block text-[11px] font-bold text-blue-800 mb-2",children:"    :"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(ve,{label:" ",value:((Y=n.legacyData)==null?void 0:Y.scheduledPrograms)||"",onChange:ee=>E("scheduledPrograms",ee),options:o_}),e.jsx(ve,{label:"",value:((le=n.legacyData)==null?void 0:le.progression)||"",onChange:ee=>E("progression",ee),options:c_})]})]}),e.jsx(ve,{label:"",value:((_=n.legacyData)==null?void 0:_.duties)||"",onChange:ee=>E("duties",ee),options:d_})]})]}),e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-200",children:[e.jsx("h3",{className:"font-bold text-md text-gray-800 border-b pb-2 mb-3 bg-gray-50 p-2 rounded",children:" "}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(ve,{label:" ",value:((M=n.legacyData)==null?void 0:M.informationValue)||"",onChange:ee=>E("informationValue",ee),options:u_}),e.jsx(ve,{label:"  ",value:((j=n.legacyData)==null?void 0:j.lessonExecution)||"",onChange:ee=>E("lessonExecution",ee),options:h_}),e.jsx(ve,{label:"   ",value:((T=n.legacyData)==null?void 0:T.objectivesAchieved)||"",onChange:ee=>E("objectivesAchieved",ee),options:f_}),e.jsx(ve,{label:" ",value:((L=n.legacyData)==null?void 0:L.studentParticipation)||"",onChange:ee=>E("studentParticipation",ee),options:x_})]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-200",children:[e.jsx("h3",{className:"font-bold text-md text-gray-800 border-b pb-2 mb-3 bg-gray-50 p-2 rounded",children:""}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(ve,{label:"    ",value:((H=n.legacyData)==null?void 0:H.applications)||"",onChange:ee=>E("applications",ee),options:m_}),e.jsx(ve,{label:"  ",value:((Z=n.legacyData)==null?void 0:Z.applicationsSuitability)||"",onChange:ee=>E("applicationsSuitability",ee),options:p_})]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-200",children:[e.jsx("h3",{className:"font-bold text-md text-gray-800 border-b pb-2 mb-3 bg-gray-50 p-2 rounded",children:" "}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(ve,{label:"",value:((de=n.legacyData)==null?void 0:de.boardWork)||"",onChange:ee=>E("boardWork",ee),options:n_}),e.jsxs("div",{className:"bg-gray-100 p-2 rounded border text-sm text-gray-600 font-bold flex justify-between items-center",children:[e.jsx("span",{children:":"}),e.jsx("span",{children:""})]}),e.jsx(ve,{label:" ",value:((fe=n.legacyData)==null?void 0:fe.otherAids)||"",onChange:ee=>E("otherAids",ee),options:l_})]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-200",children:[e.jsx("h3",{className:"font-bold text-md text-gray-800 border-b pb-2 mb-3 bg-gray-50 p-2 rounded",children:" "}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(ve,{label:"    ",value:((je=n.legacyData)==null?void 0:je.notebooksMonitored)||"",onChange:ee=>E("notebooksMonitored",ee),options:r_}),e.jsx(ve,{label:"   ",value:((we=n.legacyData)==null?void 0:we.notebooksCare)||"",onChange:ee=>E("notebooksCare",ee),options:g_})]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-200",children:[e.jsx("h3",{className:"font-bold text-md text-gray-800 border-b pb-2 mb-3 bg-gray-50 p-2 rounded",children:" "}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(ve,{label:"   ",value:((xe=n.legacyData)==null?void 0:xe.homeworkValue)||"",onChange:ee=>E("homeworkValue",ee),options:b_}),e.jsx(ve,{label:"  ",value:((Ne=n.legacyData)==null?void 0:Ne.homeworkCorrection)||"",onChange:ee=>E("homeworkCorrection",ee),options:v_}),e.jsx(ve,{label:" ",value:((Ae=n.legacyData)==null?void 0:Ae.homeworkValue)||"",onChange:ee=>E("homeworkValue",ee),options:["","",""]})]})]})]})]}),m==="evaluation"&&e.jsx("div",{className:"space-y-6 animate-in fade-in",children:e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800 border-b pb-2 mb-4",children:" "}),e.jsxs("div",{className:"mb-6 relative",children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"1.    ( )"}),e.jsx(Pe,{value:n.generalAssessment,onChange:ee=>A("generalAssessment",ee),className:"w-full border rounded-lg p-4 leading-relaxed bg-gray-50 text-sm",minHeight:"min-h-[200px]",placeholder:"    ..."}),e.jsxs("button",{onClick:P,disabled:y||x,className:"absolute bottom-4 left-14 text-xs bg-gray-900 text-white px-3 py-1.5 rounded hover:bg-black transition-colors shadow-md flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[y?e.jsx(ci,{className:"animate-spin",size:12}):e.jsx(zw,{size:12}),""]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"2.   (    )"}),e.jsx(Pe,{value:((ie=n.legacyData)==null?void 0:ie.generalAppreciation)||"",onChange:ee=>E("generalAppreciation",ee),className:"w-full border rounded-lg p-4 leading-relaxed bg-white text-sm",minHeight:"min-h-[100px]",placeholder:"    ..."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 bg-gray-50 p-6 rounded-lg border border-gray-200",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"  (/20)"}),e.jsx("input",{type:"number",step:"0.25",max:"20",className:"w-full border p-2 rounded text-2xl font-bold text-center",value:n.finalMark,onChange:ee=>A("finalMark",parseFloat(ee.target.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:" "}),e.jsx(ve,{value:n.markInLetters,onChange:ee=>A("markInLetters",ee),className:"w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"  "}),e.jsx(ve,{type:"date",value:n.inspectionDate,onChange:ee=>A("inspectionDate",ee)})]})]})]})})]})]})},rE=({report:n,teacher:t,signature:l})=>{const i=()=>{document.title=`_${t.fullName.replace(/\s/g,"_")}_${n.inspectionDate}`,window.print()},o=Array.from(new Set(n.observations.map(x=>x.category))),c=o.slice(0,4),u=o.slice(4),f=x=>{const m=x.length;return m>90?"text-[9px] leading-tight":m>60?"text-[10px] leading-tight":"text-[10px] leading-normal"};return e.jsxs("div",{className:"font-serif text-black leading-normal",dir:"rtl",children:[e.jsx("div",{className:"fixed top-4 left-4 z-50 flex gap-3 no-print",children:e.jsxs("button",{onClick:i,className:"bg-red-600 text-white px-6 py-3 rounded-full shadow-2xl hover:bg-red-700 transition-transform hover:scale-105 flex items-center gap-2 font-bold font-sans border-2 border-white",children:[e.jsx(jh,{size:24}),e.jsx("span",{className:"text-lg",children:"  PDF / "})]})}),e.jsxs("div",{className:"a4-page flex flex-col gap-1",children:[e.jsxs("div",{className:"text-center mb-0 shrink-0",children:[e.jsx("h3",{className:"text-sm font-bold",children:"   "}),e.jsx("h3",{className:"text-sm font-bold mb-1",children:"  "}),e.jsxs("div",{className:"flex justify-between items-start px-2 mb-1 text-[10px] font-bold",children:[e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{children:["  : ",n.wilaya]}),e.jsxs("p",{children:[": ",n.district]})]}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{children:"   "}),e.jsxs("p",{children:[": ",n.school]})]})]}),e.jsx("div",{className:"flex justify-center my-1",children:e.jsx("h1",{className:"text-base font-bold border-2 border-black px-8 py-0.5 rounded bg-gray-50 shadow-[2px_2px_0px_0px_#000]",children:"     "})})]}),e.jsxs("div",{className:"mb-1 border border-black shrink-0",children:[e.jsx("div",{className:"border-b border-black bg-gray-200 px-2 py-0.5 font-bold text-[11px] text-center",children:"1 -  "}),e.jsx("div",{className:"p-0.5",children:e.jsx("table",{className:"w-full text-[10px] border-collapse",children:e.jsx("tbody",{children:e.jsxs("tr",{children:[e.jsx("td",{className:"w-1/2 align-top border-l border-black p-0.5",children:e.jsx("table",{className:"w-full",children:e.jsxs("tbody",{children:[e.jsxs("tr",{className:"h-5",children:[e.jsx("td",{className:"font-bold w-20",children:" :"}),e.jsx("td",{children:t.fullName})]}),e.jsxs("tr",{className:"h-5",children:[e.jsx("td",{className:"font-bold",children:" :"}),e.jsx("td",{dir:"ltr",className:"text-right",children:mt(t.birthDate)})]}),e.jsxs("tr",{className:"h-5",children:[e.jsx("td",{className:"font-bold",children:":"}),e.jsx("td",{children:t.degree})]}),e.jsxs("tr",{className:"h-5",children:[e.jsx("td",{className:"font-bold",children:" :"}),e.jsx("td",{dir:"ltr",className:"text-right",children:mt(t.recruitmentDate)})]}),e.jsxs("tr",{className:"h-5",children:[e.jsx("td",{className:"font-bold",children:":"}),e.jsx("td",{children:t.rank})]})]})})}),e.jsx("td",{className:"w-1/2 align-top p-0.5",children:e.jsx("table",{className:"w-full",children:e.jsxs("tbody",{children:[e.jsxs("tr",{className:"h-5",children:[e.jsx("td",{className:"font-bold w-24",children:":"}),e.jsx("td",{children:t.status==="titulaire"?"":""})]}),e.jsxs("tr",{className:"h-5",children:[e.jsx("td",{className:"font-bold",children:":"}),e.jsxs("td",{children:[t.echelon||"-"," (: ",e.jsx("span",{dir:"ltr",children:mt(t.echelonDate)}),")"]})]}),e.jsxs("tr",{className:"h-5",children:[e.jsx("td",{className:"font-bold",children:" :"}),e.jsx("td",{dir:"ltr",className:"text-right",children:mt(t.currentRankDate)})]}),e.jsxs("tr",{className:"h-5",children:[e.jsx("td",{className:"font-bold",children:" :"}),e.jsxs("td",{children:[e.jsx("span",{dir:"ltr",children:mt(t.lastInspectionDate)})," (",t.lastMark,")"]})]})]})})})]})})})}),e.jsx("div",{className:"border-t border-black bg-gray-200 px-2 py-0.5 font-bold text-[11px] text-center",children:"  "}),e.jsxs("table",{className:"w-full text-[10px] border-collapse text-center",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-black h-5",children:[e.jsx("th",{className:"border-l border-black p-0.5",children:""}),e.jsx("th",{className:"border-l border-black p-0.5",children:""}),e.jsx("th",{className:"border-l border-black p-0.5",children:""}),e.jsx("th",{className:"border-l border-black p-0.5",children:""}),e.jsx("th",{className:"p-0.5",children:" (/)"})]})}),e.jsx("tbody",{children:e.jsxs("tr",{className:"h-5",children:[e.jsx("td",{className:"border-l border-black p-0.5",children:n.subject}),e.jsx("td",{className:"border-l border-black p-0.5",children:n.topic}),e.jsxs("td",{className:"border-l border-black p-0.5",children:[n.level," / ",n.group]}),e.jsx("td",{className:"border-l border-black p-0.5",children:n.duration}),e.jsxs("td",{className:"p-0.5",children:[n.studentCount," / ",n.absentCount]})]})})]})]}),e.jsxs("div",{className:"flex-1 border border-black overflow-hidden flex flex-col mb-0 min-h-0",children:[e.jsx("div",{className:"bg-gray-200 font-bold text-[11px] px-2 py-1 border-b border-black shrink-0",children:e.jsx("span",{className:"underline",children:"2 -    ( ):"})}),e.jsxs("table",{className:"w-full border-collapse text-[10px] table-fixed h-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100 h-6 border-b border-black",children:[e.jsx("th",{className:"border-l border-black p-1 w-[12%] text-center",children:""}),e.jsx("th",{className:"border-l border-black p-1 w-[40%] text-center",children:" "}),e.jsx("th",{className:"border-l border-black p-1 w-[6%] text-center",children:""}),e.jsx("th",{className:"p-1 w-[42%] text-center",children:" "})]})}),e.jsx("tbody",{children:c.map((x,m)=>{const b=n.observations.filter(y=>y.category===x);return e.jsxs(Ws.Fragment,{children:[e.jsx("tr",{className:"bg-gray-100 border-b border-black h-5",children:e.jsxs("td",{colSpan:4,className:"px-2 py-0.5 font-bold text-center text-[10px]",children:[m+1,". ",x]})}),b.map(y=>e.jsxs("tr",{className:"border-b border-black last:border-b-0",children:[e.jsx("td",{className:"border-l border-black px-1 py-1 font-bold align-middle text-center break-words leading-tight",children:y.criteria}),e.jsx("td",{className:"border-l border-black px-1 py-1 align-middle whitespace-nowrap overflow-hidden text-ellipsis",children:e.jsx("span",{className:y.indicators.join(" ").length>55?"text-[9px]":"",children:y.indicators.join(" ")})}),e.jsx("td",{className:"border-l border-black p-0.5 text-center align-middle font-bold text-[11px]",children:y.score===2?"2":y.score===1?"1":y.score===0?"0":""}),e.jsx("td",{className:`px-1 py-1 align-middle font-bold text-red-800 whitespace-pre-wrap ${f(y.improvementNotes)}`,children:y.improvementNotes})]},y.id))]},x)})})]})]}),e.jsx("div",{className:"text-center text-[9px] text-gray-500 font-bold shrink-0",children:"1 / 2"})]}),e.jsxs("div",{className:"a4-page flex flex-col gap-1",children:[e.jsxs("div",{className:"border border-black mb-1 shrink-0",children:[e.jsx("div",{className:"bg-gray-200 font-bold text-[11px] px-2 py-0.5 border-b border-black",children:e.jsx("span",{className:"underline",children:"    ( ):"})}),e.jsxs("table",{className:"w-full border-collapse text-[10px] table-fixed",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100 h-5 border-b border-black",children:[e.jsx("th",{className:"border-l border-black p-1 w-[12%] text-center",children:""}),e.jsx("th",{className:"border-l border-black p-1 w-[40%] text-center",children:" "}),e.jsx("th",{className:"border-l border-black p-1 w-[6%] text-center",children:""}),e.jsx("th",{className:"p-1 w-[42%] text-center",children:" "})]})}),e.jsx("tbody",{children:u.map((x,m)=>{const b=n.observations.filter(y=>y.category===x);return e.jsxs(Ws.Fragment,{children:[e.jsx("tr",{className:"bg-gray-100 border-b border-black h-5",children:e.jsxs("td",{colSpan:4,className:"px-2 py-0.5 font-bold text-center text-[10px]",children:[m+5,". ",x]})}),b.map(y=>e.jsxs("tr",{className:"border-b border-black last:border-b-0 h-auto",children:[e.jsx("td",{className:"border-l border-black px-1 py-1 font-bold align-middle text-center break-words leading-tight",children:y.criteria}),e.jsx("td",{className:"border-l border-black px-1 py-1 align-middle whitespace-nowrap overflow-hidden text-ellipsis",children:e.jsx("span",{className:y.indicators.join(" ").length>55?"text-[9px]":"",children:y.indicators.join(" ")})}),e.jsx("td",{className:"border-l border-black p-0.5 text-center align-middle font-bold text-[11px]",children:y.score===2?"2":y.score===1?"1":y.score===0?"0":""}),e.jsx("td",{className:`px-1 py-1 align-middle font-bold text-red-800 whitespace-pre-wrap ${f(y.improvementNotes)}`,children:y.improvementNotes})]},y.id))]},x)})})]}),e.jsx("div",{className:"text-[9px] text-center bg-gray-50 border-t border-black py-0.5 text-gray-600 font-bold",children:" : (2: ) - (1:  ) - (0:  )"})]}),e.jsxs("div",{className:"flex-1 flex flex-col border-2 border-black rounded-sm overflow-hidden mb-1 min-h-0",children:[e.jsx("div",{className:"text-center bg-gray-100 border-b-2 border-black py-0.5 shrink-0",children:e.jsx("h2",{className:"text-[14px] font-bold",children:" "})}),e.jsx("div",{className:"p-3 flex-1 text-justify text-[13px] leading-[1.8] whitespace-pre-line overflow-hidden",children:n.generalAssessment}),e.jsxs("div",{className:"flex border-t-2 border-black h-[40mm] shrink-0",children:[e.jsxs("div",{className:"w-2/3 border-l-2 border-black p-3 flex flex-col justify-center gap-3 bg-gray-50",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-bold text-[12px]",children:" :"}),e.jsx("span",{className:"flex-1 border-b border-dotted border-black font-bold text-sm px-2 text-center",children:n.markInLetters})]}),e.jsxs("div",{className:"flex items-center gap-4 mt-1",children:[e.jsx("span",{className:"font-bold text-[12px]",children:" :"}),e.jsxs("span",{className:"text-2xl font-bold border-2 border-black px-8 py-1 rounded bg-white",children:[n.finalMark," / 20"]})]})]}),e.jsxs("div",{className:"w-1/3 p-2 text-center relative flex flex-col items-center justify-start pt-2",children:[e.jsxs("p",{className:"text-[10px] font-bold mb-1",children:[" : ",n.wilaya," : ",e.jsx("span",{dir:"ltr",children:mt(n.inspectionDate)})]}),e.jsx("p",{className:"font-bold underline text-[12px] mb-1",children:" "}),e.jsx("p",{className:"text-[12px] font-bold mb-2",children:n.inspectorName}),l?e.jsx("div",{className:"absolute top-8 left-1/2 transform -translate-x-1/2 w-56 h-32 flex items-center justify-center pointer-events-none z-10",children:e.jsx("img",{src:l,alt:"Signature",className:"w-full h-full mix-blend-multiply object-contain transform -rotate-2 scale-125"})}):e.jsx("div",{className:"mt-2 text-[8px] text-gray-300 border border-dashed border-gray-300 w-16 h-16 rounded-full flex items-center justify-center rotate-[-15deg]",children:""})]})]})]}),e.jsx("div",{className:"flex justify-end text-[9px] font-bold px-4 text-black shrink-0",children:e.jsx("span",{children:"2 / 2"})})]})]})},oE=({report:n,teacher:t,signature:l})=>{const i=()=>{document.title=`__${t.fullName}`,window.print()},o=x=>n.lessons[x]||{subject:"",topic:"",level:"",timeStart:"",timeEnd:"",phaseLaunch:"",phaseConstruction:"",phaseInvestment:""},u=typeof n.oralQuestions=="string"?{educationScience:n.oralQuestions,psychology:"",legislation:""}:n.oralQuestions||{educationScience:"",psychology:"",legislation:""},f=t.degree&&(t.degree.includes(" ")||t.degree.includes("ENS"));return e.jsxs("div",{className:"font-serif text-black leading-normal",dir:"rtl",children:[e.jsx("div",{className:"fixed top-4 left-4 z-50 flex gap-3 no-print",children:e.jsxs("button",{onClick:i,className:"bg-gray-800 text-white px-6 py-3 rounded-full shadow-xl hover:bg-black transition-transform hover:scale-105 flex items-center gap-2 font-bold font-sans border-2 border-white",children:[e.jsx(jh,{size:20}),e.jsx("span",{children:"  PDF"})]})}),e.jsxs("div",{className:"a4-page flex flex-col justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"text-center mb-4 space-y-1",children:[e.jsx("h3",{className:"text-sm font-bold",children:"   "}),e.jsx("h3",{className:"text-sm font-bold",children:"  "}),e.jsxs("div",{className:"flex justify-between items-start text-xs font-bold mt-2 px-2",children:[e.jsx("div",{className:"text-right",children:e.jsxs("p",{children:["   ",n.wilaya]})}),e.jsx("div",{className:"text-left",children:e.jsxs("p",{children:["    / ",n.district]})})]}),e.jsx("div",{className:"flex justify-center mt-3 mb-4",children:e.jsx("div",{className:"border-[3px] border-black border-double px-10 py-2 rounded-2xl bg-white text-center shadow-[3px_3px_0px_0px_rgba(0,0,0,1)]",children:e.jsxs("h1",{className:"text-lg font-bold",children:["  ",e.jsx("br",{}),e.jsx("span",{className:"font-normal text-sm",children:"    "})]})})})]}),e.jsxs("div",{className:"space-y-3 text-xs font-bold px-2",children:[e.jsxs("div",{className:"border-b-2 border-black border-dotted pb-3 space-y-1.5",children:[e.jsx("p",{className:"mb-1",children:"     :   "}),e.jsxs("div",{className:"flex flex-wrap gap-x-12 gap-y-1",children:[e.jsxs("span",{children:[" : ",e.jsx("span",{dir:"ltr",children:mt(n.examDate)})]}),e.jsxs("span",{children:[" : ",n.school]}),e.jsxs("span",{children:[" : ",n.city]})]}),e.jsxs("div",{className:"flex flex-wrap gap-x-8 gap-y-1 pt-1",children:[e.jsxs("span",{children:["  : ",n.inspectorName]}),e.jsxs("span",{children:["   :  ",n.district]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("span",{className:"min-w-[150px]",children:[" (): ",n.directorName]}),e.jsx("span",{children:"(  )"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("span",{className:"min-w-[150px]",children:[" (): ",n.teacherMemberName]}),e.jsx("span",{children:"(  )"})]})]}),e.jsxs("div",{className:"space-y-2 pt-1",children:[e.jsx("p",{className:"underline decoration-1 underline-offset-4 mb-2",children:"     :   "}),e.jsxs("div",{className:"flex flex-wrap gap-x-16 gap-y-1 items-center",children:[e.jsxs("span",{className:"min-w-[250px]",children:["() : ",t.fullName]}),e.jsx("span",{children:"  : /"})]}),e.jsxs("div",{className:"flex flex-wrap gap-x-16 gap-y-1 items-center",children:[e.jsxs("span",{className:"min-w-[250px]",children:["()  : ",t.birthPlace]}),e.jsxs("span",{children:[" : ",e.jsx("span",{dir:"ltr",children:mt(t.birthDate)})]})]}),e.jsx("div",{className:"flex gap-4",children:e.jsxs("span",{className:"flex-1",children:["()  : ",e.jsx("span",{dir:"ltr",children:mt(t.recruitmentDate)})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-4 gap-y-1",children:[e.jsxs("span",{children:["    : ",n.appointmentDecisionNumber]}),e.jsxs("span",{children:[" : ",e.jsx("span",{dir:"ltr",children:mt(n.appointmentDecisionDate)})]}),e.jsxs("span",{children:["    : ",n.financialVisaNumber]}),e.jsxs("span",{children:[" : ",e.jsx("span",{dir:"ltr",children:mt(n.financialVisaDate)})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-x-8 gap-y-1 items-center",children:[e.jsxs("span",{children:["()   : ",t.degree]}),e.jsxs("span",{children:[" : ",n.university]}),e.jsxs("span",{children:[" : ",e.jsx("span",{dir:"ltr",children:mt(t.degreeDate)})]})]}),!f&&e.jsxs("p",{children:[" ",n.recruitmentType||"  ","  : ",e.jsx("span",{dir:"ltr",children:mt(n.contestDate)})]})]}),e.jsxs("div",{className:"pt-2",children:[e.jsx("p",{className:"underline mb-1 text-center",children:"    "}),e.jsxs("table",{className:"w-full border-collapse border border-black text-center text-xs",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{className:"border border-black p-1 w-1/3",children:" "}),e.jsx("th",{className:"border border-black p-1 w-1/3",children:" "}),e.jsx("th",{className:"border border-black p-1 w-1/3",children:" "})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsxs("td",{className:"border border-black p-1 align-top h-16",children:[e.jsx("p",{className:"font-bold mb-1",children:o(0).subject}),e.jsx("p",{className:"mb-1",children:o(0).topic}),e.jsx("p",{children:o(0).level}),e.jsxs("p",{className:"text-[10px] mt-1",children:[o(0).timeStart," - ",o(0).timeEnd]})]}),e.jsxs("td",{className:"border border-black p-1 align-top",children:[e.jsx("p",{className:"font-bold mb-1",children:o(1).subject}),e.jsx("p",{className:"mb-1",children:o(1).topic}),e.jsx("p",{children:o(1).level}),e.jsxs("p",{className:"text-[10px] mt-1",children:[o(1).timeStart," - ",o(1).timeEnd]})]}),e.jsxs("td",{className:"border border-black p-1 align-top",children:[e.jsx("p",{className:"font-bold mb-1",children:o(2).subject}),e.jsx("p",{className:"mb-1",children:o(2).topic}),e.jsx("p",{children:o(2).level}),e.jsxs("p",{className:"text-[10px] mt-1",children:[o(2).timeStart," - ",o(2).timeEnd]})]})]}),e.jsx("tr",{children:e.jsxs("td",{colSpan:3,className:"border border-black p-1 font-bold bg-gray-50",children:["      : ",n.pedagogyMark,"  40"]})})]})]})]}),e.jsxs("div",{className:"pt-2 border-t-2 border-black border-dashed mt-2",children:[e.jsx("p",{className:"underline mb-1",children:"  :"}),e.jsxs("div",{className:"grid grid-cols-1 gap-1 pl-4 text-[11px]",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("span",{className:"font-bold w-24 shrink-0",children:"  :"}),e.jsx("span",{className:"font-normal",children:u.educationScience})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("span",{className:"font-bold w-24 shrink-0",children:"  :"}),e.jsx("span",{className:"font-normal",children:u.psychology})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("span",{className:"font-bold w-24 shrink-0",children:" :"}),e.jsx("span",{className:"font-normal",children:u.legislation})]})]}),e.jsxs("p",{className:"text-left font-bold mt-1 pl-2 border-t border-black inline-block pt-1",children:["   : ",n.oralMark,"  20"]})]})]})]}),e.jsxs("div",{className:"mt-auto border-t-[3px] border-double border-black text-xs pt-2 pb-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2 px-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-bold",children:"  :"}),e.jsx("span",{className:"border-2 border-black px-6 py-1 font-bold text-sm bg-gray-100",children:n.finalDecision==="confirmed"?" ()":n.finalDecision==="deferred"?"":""})]}),e.jsxs("div",{className:"border border-black p-1 px-3 text-center rounded",children:[e.jsx("p",{className:"font-bold",children:" "}),e.jsxs("p",{className:"text-lg font-bold",children:[n.totalMark," / 60"]})]})]}),e.jsxs("div",{className:"flex justify-between items-start px-4 mt-2 text-[11px] font-bold",children:[e.jsxs("div",{className:"text-center w-1/3",children:[e.jsx("p",{className:"mb-2 underline",children:" "}),e.jsx("p",{className:"mb-1",children:n.directorName}),e.jsx("p",{children:n.teacherMemberName})]}),e.jsxs("div",{className:"text-center w-1/3",children:[e.jsx("p",{className:"mb-2 underline",children:"  "}),e.jsx("div",{className:"h-12 flex items-center justify-center mb-1",children:l?e.jsx("img",{src:l,alt:"Sig",className:"w-20 h-12 object-contain mix-blend-multiply"}):" "}),e.jsx("p",{children:n.inspectorName})]})]})]})]}),e.jsxs("div",{className:"a4-page flex flex-col",children:[e.jsx("div",{className:"flex justify-center mb-10 shrink-0",children:e.jsx("div",{className:"border-[3px] border-black px-12 py-2 rounded-xl text-center shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] bg-white",children:e.jsx("h2",{className:"font-bold text-xl tracking-widest",children:" "})})}),e.jsx("div",{className:"flex-1 space-y-10 text-[12px] font-bold text-right pr-2 flex flex-col",children:[0,1,2].map(x=>{const m=o(x);return e.jsxs("div",{className:"relative pl-4 border-r-4 border-gray-200 pr-4",children:[e.jsxs("h4",{className:"mb-3 text-sm border-b border-black inline-block pb-1",children:[" ",x===0?"":x===1?"":""," : ",e.jsx("span",{className:"font-normal mx-2",children:m.subject})]}),e.jsxs("ul",{className:"list-none space-y-3 leading-relaxed",children:[e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"font-bold min-w-[120px]",children:"   :"}),e.jsx("span",{className:"font-normal text-justify",children:m.phaseLaunch||"..................................................."})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"font-bold min-w-[120px]",children:"   :"}),e.jsx("span",{className:"font-normal text-justify",children:m.phaseConstruction||"..................................................."})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"font-bold min-w-[120px]",children:"   :"}),e.jsx("span",{className:"font-normal text-justify",children:m.phaseInvestment||"..................................................."})]})]})]},x)})}),e.jsxs("div",{className:"mt-auto pt-10 shrink-0",children:[e.jsxs("p",{className:"text-[12px] font-bold text-justify mb-8 leading-loose px-2 border-t border-black pt-4",children:["          : ",e.jsx("span",{className:"underline decoration-dotted underline-offset-4 mx-1",children:" ()     "})]}),e.jsxs("div",{className:"flex justify-between items-start px-8 pb-8",children:[e.jsx("div",{className:"w-1/2"}),e.jsxs("div",{className:"w-1/2 text-center text-[12px] font-bold relative flex flex-col items-center",children:[e.jsxs("p",{className:"mb-4",children:[" : ",e.jsx("span",{dir:"ltr",children:mt(n.examDate)})]}),e.jsx("p",{className:"mb-1",children:"   :"}),e.jsx("p",{className:"mb-6 text-sm",children:n.inspectorName}),l?e.jsx("div",{className:"absolute top-12 left-1/2 transform -translate-x-1/2 w-56 h-32 flex items-center justify-center pointer-events-none z-10",children:e.jsx("img",{src:l,alt:"Signature",className:"w-full h-full mix-blend-multiply object-contain transform -rotate-2 scale-125"})}):e.jsx("div",{className:"mt-4 text-[8px] text-gray-300 border border-dashed border-gray-300 w-16 h-16 rounded-full flex items-center justify-center rotate-[-15deg]",children:""})]})]})]})]})]})},cE=({report:n,teacher:t,signature:l})=>{var o,c,u,f,x,m,b,y,N,C,A,E,R,P,O,z,K,G,F,$,B,q,J,Q,U,ae,se,ne,w,D,V,Y,le,_;const i=()=>{document.title=`__${t.fullName.replace(/\s/g,"_")}_${n.inspectionDate}`,window.print()};return e.jsxs("div",{className:"font-serif text-black leading-normal",dir:"rtl",children:[e.jsx("div",{className:"fixed top-4 left-4 z-50 flex gap-3 no-print",children:e.jsxs("button",{onClick:i,className:"bg-amber-600 text-white px-6 py-3 rounded-full shadow-2xl hover:bg-amber-700 transition-transform hover:scale-105 flex items-center gap-2 font-bold font-sans border-2 border-white",children:[e.jsx(jh,{size:24}),e.jsx("span",{className:"text-lg",children:"  PDF / "})]})}),e.jsxs("div",{className:"a4-page flex flex-col gap-1",children:[e.jsxs("div",{className:"flex justify-between items-start text-[10px] font-bold mb-1 relative shrink-0",children:[e.jsxs("div",{className:"text-right flex flex-col items-start w-1/3 space-y-0.5",children:[e.jsx("h3",{className:"text-[11px] font-bold text-center w-[200%] -mr-[50%] mb-2",children:"   "}),e.jsx("p",{children:"  "}),e.jsxs("p",{children:["  : ",n.wilaya]}),e.jsx("p",{children:"   "}),e.jsxs("p",{children:[": ",n.district]})]}),e.jsxs("div",{className:"text-right w-1/3 pt-6 space-y-0.5",children:[e.jsxs("p",{children:[": ",n.school]}),e.jsxs("p",{children:[": ",(o=n.legacyData)==null?void 0:o.municipality]}),e.jsxs("p",{children:[": ",(c=n.legacyData)==null?void 0:c.daira]}),e.jsxs("p",{children:[" : ",(u=n.legacyData)==null?void 0:u.schoolYear]})]})]}),e.jsx("div",{className:"flex justify-center mb-1 shrink-0",children:e.jsx("div",{className:"border-[3px] border-black px-6 py-1 shadow-[3px_3px_0px_0px_rgba(0,0,0,1)] bg-white",children:e.jsx("h1",{className:"text-lg font-bold",children:"    "})})}),e.jsxs("div",{className:"border-[3px] border-black p-1.5 mb-1 shrink-0 text-[11px]",children:[e.jsxs("div",{className:"flex items-center mb-0.5",children:[e.jsx("span",{className:"font-bold ml-2 w-16",children:"  :"}),e.jsx("span",{className:"font-normal flex-[2]",children:t.fullName}),e.jsx("span",{className:"font-bold ml-2 w-12 text-center",children:"():"}),e.jsx("span",{className:"font-normal flex-1 text-center",children:"/"}),e.jsx("span",{className:"font-bold ml-2 w-10",children:":"}),e.jsx("span",{className:"font-normal flex-1",children:(f=n.legacyData)==null?void 0:f.familyStatus})]}),e.jsxs("div",{className:"flex items-center mb-0.5",children:[e.jsx("span",{className:"font-bold ml-2 w-24",children:"  :"}),e.jsx("span",{className:"font-normal flex-1 text-right",dir:"ltr",children:mt(t.birthDate)}),e.jsx("span",{className:"font-bold px-2",children:":"}),e.jsx("span",{className:"font-normal flex-[2]",children:t.birthPlace})]}),e.jsxs("div",{className:"flex items-center mb-0.5",children:[e.jsx("span",{className:"font-bold ml-2 w-20",children:"  :"}),e.jsx("span",{className:"font-normal w-24 text-right",dir:"ltr",children:mt(t.recruitmentDate)}),e.jsx("span",{className:"font-bold ml-2 w-10 text-center",children:":"}),e.jsx("span",{className:"font-normal flex-1",children:t.rank})]}),e.jsxs("div",{className:"flex items-center mb-0.5",children:[e.jsx("span",{className:"font-bold ml-2 w-20",children:":"}),e.jsx("span",{className:"font-normal w-24",children:t.echelon}),e.jsx("span",{className:"font-bold ml-2 w-10 text-center",children:":"}),e.jsx("span",{className:"font-normal flex-1 text-right pr-2",dir:"ltr",children:mt(t.echelonDate)})]}),e.jsxs("div",{className:"flex items-center mb-0.5",children:[e.jsx("span",{className:"font-bold ml-2 w-20",children:" :"}),e.jsx("span",{className:"font-normal w-24",children:t.degree}),e.jsx("span",{className:"font-bold ml-2 w-10 text-center",children:":"}),e.jsx("span",{className:"font-normal flex-1 text-right pr-2",dir:"ltr",children:mt(t.degreeDate||((x=n.legacyData)==null?void 0:x.graduationDate))})]}),e.jsxs("div",{className:"flex items-center mb-0.5",children:[e.jsx("span",{className:"font-bold ml-2 w-20",children:":"}),e.jsx("span",{className:"font-normal w-24",children:(m=n.legacyData)==null?void 0:m.trainingInstitute}),e.jsx("span",{className:"font-bold ml-2 w-10 text-center",children:":"}),e.jsx("span",{className:"font-normal flex-1 text-right pr-2",dir:"ltr",children:mt((b=n.legacyData)==null?void 0:b.trainingDate)})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"font-bold ml-2 w-20",children:" :"}),e.jsx("span",{className:"font-normal w-24 text-right",dir:"ltr",children:mt(t.lastInspectionDate)}),e.jsx("span",{className:"font-bold ml-2 w-10 text-center",children:":"}),e.jsx("span",{className:"font-normal flex-1",children:t.lastMark})]})]}),e.jsxs("div",{className:"border-[3px] border-t-0 border-black flex flex-1 h-full min-h-0 text-[10px]",children:[e.jsxs("div",{className:"w-[48%] border-l-[3px] border-black p-1.5 flex flex-col justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold underline text-[11px] mb-1",children:" "}),e.jsxs("div",{className:"flex justify-between font-bold mb-1",children:[e.jsxs("span",{children:["  : ",e.jsx("span",{className:"font-normal",dir:"ltr",children:mt(n.inspectionDate)})]}),e.jsxs("span",{children:[": ",e.jsx("span",{className:"font-normal",children:n.duration})]})]}),e.jsxs("div",{className:"flex justify-between font-bold mb-1",children:[e.jsxs("span",{children:[" : ",e.jsx("span",{className:"font-normal",children:n.level})]}),e.jsxs("span",{children:[" : ",e.jsx("span",{className:"font-normal",children:n.studentCount})]})]}),e.jsxs("div",{className:"font-bold mb-1",children:["       ",e.jsx("span",{className:"font-normal",children:(y=n.legacyData)==null?void 0:y.classroomListening})]}),e.jsxs("div",{className:"flex justify-between font-bold mb-1",children:[e.jsxs("span",{children:["  ",e.jsx("span",{className:"font-normal",children:(N=n.legacyData)==null?void 0:N.lighting})]}),e.jsxs("span",{children:["  ",e.jsx("span",{className:"font-normal",children:(C=n.legacyData)==null?void 0:C.cleanliness})]})]}),e.jsxs("div",{className:"flex justify-between font-bold mb-1",children:[e.jsxs("span",{children:["  ",e.jsx("span",{className:"font-normal",children:(A=n.legacyData)==null?void 0:A.heating})]}),e.jsxs("span",{children:[" ",e.jsx("span",{className:"font-normal",children:(E=n.legacyData)==null?void 0:E.ventilation})]})]})]}),e.jsx("div",{className:"w-full border-b border-black border-dashed my-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold underline text-[11px] mb-1",children:" "}),e.jsxs("div",{className:"font-bold mb-1",children:["  : ",e.jsx("span",{className:"font-normal",children:n.subject})]}),e.jsxs("div",{className:"font-bold mb-1",children:[" : ",e.jsx("span",{className:"font-normal",children:n.topic})]})]}),e.jsxs("div",{className:"flex flex-col gap-0.5",children:[e.jsx("div",{className:"font-bold underline mt-0.5",children:"   :"}),e.jsx("div",{className:"min-h-[1.2em] leading-tight font-normal",children:(R=n.legacyData)==null?void 0:R.documentsAndPosters})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[e.jsx("span",{className:"font-bold underline",children:"  :"}),e.jsx("span",{className:"font-normal",children:(P=n.legacyData)==null?void 0:P.lessonPreparation})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[e.jsx("span",{className:"font-bold underline",children:"  :"}),e.jsx("span",{className:"font-normal",children:(O=n.legacyData)==null?void 0:O.preparationValue})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("span",{className:"font-bold underline",children:" :"}),e.jsx("span",{className:"font-normal",children:(z=n.legacyData)==null?void 0:z.registers})]}),e.jsx("div",{className:"font-bold mt-0.5",children:"      "}),e.jsx("div",{className:"font-normal mr-4",children:(K=n.legacyData)==null?void 0:K.registersUsed}),e.jsx("div",{className:"font-bold mt-0.5",children:"     :"}),e.jsxs("div",{className:"flex justify-between pr-4 mt-0.5 font-bold",children:[e.jsxs("span",{children:["  ",e.jsx("span",{className:"font-normal",children:(G=n.legacyData)==null?void 0:G.scheduledPrograms})]}),e.jsxs("span",{children:["  ",e.jsx("span",{className:"font-normal",children:(F=n.legacyData)==null?void 0:F.progression})]})]}),e.jsxs("div",{className:"font-bold mt-1",children:[": ",e.jsx("span",{className:"font-normal",children:($=n.legacyData)==null?void 0:$.duties})]})]})]}),e.jsxs("div",{className:"w-[52%] p-1.5 flex flex-col justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold underline text-[11px] mb-1",children:"  :"}),e.jsxs("div",{className:"font-bold mb-1",children:[" :",e.jsx("div",{className:"font-normal mt-0.5 min-h-[14px]",children:(B=n.legacyData)==null?void 0:B.informationValue})]}),e.jsxs("div",{className:"font-bold mb-1",children:["    ",e.jsx("span",{className:"font-normal",children:(q=n.legacyData)==null?void 0:q.lessonExecution})]}),e.jsxs("div",{className:"font-bold mb-1",children:["     ",e.jsx("span",{className:"font-normal",children:(J=n.legacyData)==null?void 0:J.objectivesAchieved})]}),e.jsxs("div",{className:"font-bold mb-1 mt-1",children:[e.jsx("span",{className:"underline",children:" :"}),e.jsx("div",{className:"font-normal mt-0.5",children:(Q=n.legacyData)==null?void 0:Q.studentParticipation})]})]}),e.jsx("div",{className:"w-full border-b border-black border-dashed my-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold underline text-[11px] mb-1",children:""}),e.jsxs("div",{className:"font-bold mb-1",children:["      ",e.jsx("span",{className:"font-normal",children:(U=n.legacyData)==null?void 0:U.applications})]}),e.jsxs("div",{className:"font-bold mb-1",children:["    ",e.jsx("span",{className:"font-normal",children:(ae=n.legacyData)==null?void 0:ae.applicationsSuitability})]})]}),e.jsx("div",{className:"w-full border-b border-black border-dashed my-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold underline text-[11px] mb-1",children:" "}),e.jsxs("div",{className:"font-bold mb-1",children:[": ",e.jsx("span",{className:"font-normal",children:(se=n.legacyData)==null?void 0:se.boardWork})]}),e.jsxs("div",{className:"font-bold mb-1",children:[": ",e.jsx("span",{className:"font-normal",children:""})]}),e.jsxs("div",{className:"font-bold mb-1",children:[" : ",e.jsx("span",{className:"font-normal",children:(ne=n.legacyData)==null?void 0:ne.otherAids})]})]}),e.jsx("div",{className:"w-full border-b border-black border-dashed my-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold underline text-[11px] mb-1",children:"  :"}),e.jsxs("div",{className:"font-bold mb-1",children:["      ",e.jsx("span",{className:"font-normal",children:(w=n.legacyData)==null?void 0:w.notebooksMonitored})]}),e.jsxs("div",{className:"font-bold mb-1",children:["     ",e.jsx("span",{className:"font-normal",children:(D=n.legacyData)==null?void 0:D.notebooksCare})]})]}),e.jsx("div",{className:"w-full border-b border-black border-dashed my-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold underline text-[11px] mb-1",children:"  :"}),e.jsxs("div",{className:"font-bold mb-1",children:["     ",e.jsx("span",{className:"font-normal",children:(V=n.legacyData)==null?void 0:V.homeworkValue})]}),e.jsxs("div",{className:"font-bold mb-1",children:["    ",e.jsx("span",{className:"font-normal",children:(Y=n.legacyData)==null?void 0:Y.homeworkCorrection})]}),e.jsxs("div",{className:"font-bold mb-1",children:["  : ",e.jsx("span",{className:"font-normal",children:(le=n.legacyData)==null?void 0:le.homeworkValue})]})]})]})]}),e.jsx("div",{className:"text-center text-[9px] font-bold mt-0.5",children:"2 / 1"})]}),e.jsxs("div",{className:"a4-page flex flex-col gap-1",children:[e.jsxs("div",{className:"border-[3px] border-black flex-1 flex flex-col min-h-0",children:[e.jsx("div",{className:"text-center font-bold py-0.5 border-b-[3px] border-black bg-gray-100 text-[12px] shrink-0",children:"   (    )"}),e.jsx("div",{className:"p-3 text-[12px] leading-loose whitespace-pre-line text-justify flex-1 overflow-hidden",children:n.generalAssessment})]}),e.jsxs("div",{className:"border-[3px] border-t-0 border-black h-[60mm] flex flex-col shrink-0",children:[e.jsx("div",{className:"text-center font-bold py-0.5 border-b-[3px] border-black bg-gray-100 text-[12px] shrink-0",children:"          ()"}),e.jsx("div",{className:"p-3 text-[12px] leading-loose whitespace-pre-line text-justify flex-1 overflow-hidden",children:(_=n.legacyData)==null?void 0:_.generalAppreciation})]}),e.jsxs("div",{className:"border-[3px] border-t-0 border-black flex h-[35mm] shrink-0",children:[e.jsxs("div",{className:"w-1/2 border-l-[3px] border-black p-2 font-bold text-[12px] flex flex-col justify-center space-y-2 bg-gray-50",children:[e.jsxs("p",{children:[" : ",e.jsx("span",{className:"underline",children:n.markInLetters})]}),e.jsxs("p",{children:[" : ",e.jsx("span",{className:"text-xl border-2 border-black px-4 py-0.5 bg-white",children:n.finalMark})," / 20"]}),e.jsx("p",{className:"text-[9px] mt-1 text-center",children:"   ()  : ...................."}),e.jsx("p",{className:"text-center text-[9px]",children:""})]}),e.jsxs("div",{className:"w-1/2 p-2 font-bold text-[12px] relative flex flex-col items-center",children:[e.jsx("p",{className:"text-[11px] w-full text-right",children:"     "}),e.jsxs("div",{className:"flex justify-between mt-1 px-1 w-full text-[10px]",children:[e.jsxs("p",{children:[": ",n.inspectorName]}),e.jsxs("p",{children:[": ",e.jsx("span",{dir:"ltr",children:mt(n.inspectionDate)})]})]}),l?e.jsx("div",{className:"absolute top-6 left-1/2 transform -translate-x-1/2 w-56 h-32 flex items-center justify-center pointer-events-none z-10",children:e.jsx("img",{src:l,alt:"Signature",className:"w-full h-full mix-blend-multiply object-contain transform -rotate-2 scale-125"})}):e.jsx("div",{className:"mt-8 text-[8px] text-gray-300 border border-dashed border-gray-300 w-16 h-16 rounded-full flex items-center justify-center rotate-[-15deg]",children:""})]})]}),e.jsx("div",{className:"text-center text-[9px] text-gray-500 font-bold mt-0.5",children:"2 / 2"})]})]})},fv=({report:n,signature:t})=>{const l=Object.values(n.days).reduce((m,b)=>m+b,0),i=Object.values(n.ranks).reduce((m,b)=>m+b,0),o=Object.values(n.levels).reduce((m,b)=>m+b,0),c=(n.subjects.arabic||0)+(n.subjects.math||0)+(n.subjects.islamic||0)+(n.subjects.history||0)+(n.subjects.geo||0)+(n.subjects.civics||0)+(n.subjects.science||0)+(n.subjects.art||0),u=(m,b)=>b===0?"":(m/b*100).toFixed(1)+"%",f=new Date().toLocaleDateString("ar-DZ",{year:"numeric",month:"2-digit",day:"2-digit"}),x=(n.visitsMorning||0)+(n.visitsEvening||0);return e.jsxs("div",{className:"font-serif text-black leading-normal bg-white",dir:"rtl",children:[e.jsxs("div",{className:"a4-page-portrait flex flex-col justify-between",style:{padding:"15mm 12mm"},children:[e.jsxs("div",{className:"shrink-0 mb-6",children:[e.jsxs("div",{className:"text-center font-bold text-[13px] mb-3 space-y-1",children:[e.jsx("h3",{children:"   "}),e.jsx("h3",{children:"  "})]}),e.jsxs("div",{className:"flex justify-between items-end border-b-2 border-black pb-1 text-[11px] font-bold",children:[e.jsx("div",{className:"text-right",children:e.jsx("p",{children:"  "})}),e.jsx("div",{className:"text-left",children:e.jsxs("p",{children:["  : ",n.wilaya]})})]})]}),e.jsx("div",{className:"text-center mb-8 shrink-0",children:e.jsx("div",{className:"inline-block border-2 border-black px-6 py-2 bg-gray-50 shadow-[3px_3px_0px_0px_rgba(0,0,0,1)]",children:e.jsxs("h1",{className:"text-lg font-bold flex flex-wrap items-center justify-center gap-1",children:[e.jsx("span",{children:"    "}),e.jsx("span",{children:n.term===""?" :":` ${n.term}   :`}),e.jsx("span",{dir:"ltr",className:"inline-block font-mono font-bold px-1",children:n.schoolYear})]})})}),e.jsxs("div",{className:"flex-1 flex flex-col gap-6 justify-start",children:[e.jsx("div",{children:e.jsxs("table",{className:"w-full border-collapse border border-black text-center text-[10px]",children:[e.jsxs("thead",{children:[e.jsxs("tr",{className:"bg-gray-100 h-8",children:[e.jsx("th",{rowSpan:2,className:"border border-black p-1 w-[15%]",children:"  "}),e.jsx("th",{rowSpan:2,className:"border border-black p-1",children:""}),e.jsx("th",{rowSpan:2,className:"border border-black p-1 w-[10%]",children:""}),e.jsx("th",{colSpan:3,className:"border border-black p-1",children:" "}),e.jsx("th",{colSpan:4,className:"border border-black p-1 bg-gray-200",children:" ( )"}),e.jsx("th",{colSpan:2,className:"border border-black p-1",children:"  ()"})]}),e.jsxs("tr",{className:"bg-gray-50 h-8",children:[e.jsx("th",{className:"border border-black p-1",children:""}),e.jsx("th",{className:"border border-black p-1",children:""}),e.jsxs("th",{className:"border border-black p-1 w-[12%] text-[8px] leading-tight",children:["  ",e.jsx("br",{}),"(  )"]}),e.jsx("th",{className:"border border-black p-1",children:""}),e.jsx("th",{className:"border border-black p-1",children:""}),e.jsx("th",{className:"border border-black p-1",children:""}),e.jsx("th",{className:"border border-black p-1 text-[8px]",children:"  "}),e.jsx("th",{className:"border border-black p-1",children:" "}),e.jsx("th",{className:"border border-black p-1",children:""})]})]}),e.jsx("tbody",{children:e.jsxs("tr",{className:"h-10 font-bold text-[11px]",children:[e.jsx("td",{className:"border border-black p-1",children:n.inspectorName}),e.jsx("td",{className:"border border-black p-1",children:n.rank}),e.jsx("td",{className:"border border-black p-1",children:n.district}),e.jsx("td",{className:"border border-black p-1",children:n.teachersTotal}),e.jsx("td",{className:"border border-black p-1",children:n.teachersTrainee}),e.jsx("td",{className:"border border-black p-1",children:n.teachersTenure}),e.jsx("td",{className:"border border-black p-1 bg-gray-100",children:n.visitsInspection}),e.jsx("td",{className:"border border-black p-1 bg-gray-100",children:n.visitsTenure}),e.jsx("td",{className:"border border-black p-1 bg-gray-100",children:n.visitsTraining}),e.jsx("td",{className:"border border-black p-1 bg-gray-100",children:n.visitsTrainingBenefit}),e.jsx("td",{className:"border border-black p-1",children:n.tasksSupervision}),e.jsx("td",{className:"border border-black p-1",children:n.tasksInvestigations})]})})]})}),e.jsxs("div",{className:"flex gap-4 items-start",children:[e.jsxs("div",{className:"flex-[2]",children:[e.jsx("h3",{className:"font-bold text-[11px] mb-1 text-right underline",children:"*    "}),e.jsxs("table",{className:"w-full border-collapse border border-black text-center text-[10px]",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100 h-6",children:[e.jsx("th",{className:"border border-black p-1 w-20",children:""}),e.jsx("th",{className:"border border-black p-1",children:""}),e.jsx("th",{className:"border border-black p-1",children:""}),e.jsx("th",{className:"border border-black p-1",children:""}),e.jsx("th",{className:"border border-black p-1",children:""}),e.jsx("th",{className:"border border-black p-1",children:""}),e.jsx("th",{className:"border border-black p-1 bg-gray-200",children:""})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"h-6",children:[e.jsx("td",{className:"border border-black p-1 font-bold bg-gray-50",children:""}),e.jsx("td",{className:"border border-black p-1",children:n.days.sun}),e.jsx("td",{className:"border border-black p-1",children:n.days.mon}),e.jsx("td",{className:"border border-black p-1",children:n.days.tue}),e.jsx("td",{className:"border border-black p-1",children:n.days.wed}),e.jsx("td",{className:"border border-black p-1",children:n.days.thu}),e.jsx("td",{className:"border border-black p-1 font-bold bg-gray-50",children:l})]}),e.jsxs("tr",{className:"h-6",children:[e.jsx("td",{className:"border border-black p-1 font-bold bg-gray-50",children:" %"}),e.jsx("td",{className:"border border-black p-1",children:u(n.days.sun,l)}),e.jsx("td",{className:"border border-black p-1",children:u(n.days.mon,l)}),e.jsx("td",{className:"border border-black p-1",children:u(n.days.tue,l)}),e.jsx("td",{className:"border border-black p-1",children:u(n.days.wed,l)}),e.jsx("td",{className:"border border-black p-1",children:u(n.days.thu,l)}),e.jsx("td",{className:"border border-black p-1 font-bold bg-gray-50",children:"100%"})]})]})]})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-bold text-[11px] mb-1 text-right underline",children:"*  "}),e.jsxs("table",{className:"w-full border-collapse border border-black text-center text-[10px]",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100 h-6",children:[e.jsx("th",{className:"border border-black p-1",children:""}),e.jsx("th",{className:"border border-black p-1",children:""})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"h-6",children:[e.jsx("td",{className:"border border-black p-1 font-bold",children:n.visitsMorning||0}),e.jsx("td",{className:"border border-black p-1 font-bold",children:n.visitsEvening||0})]}),e.jsxs("tr",{className:"h-6",children:[e.jsx("td",{className:"border border-black p-1 bg-gray-50",children:u(n.visitsMorning||0,x)}),e.jsx("td",{className:"border border-black p-1 bg-gray-50",children:u(n.visitsEvening||0,x)})]})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-[11px] mb-1 text-right underline",children:"*      "}),e.jsxs("table",{className:"w-full border-collapse border border-black text-center text-[10px]",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100 h-6",children:[e.jsx("th",{className:"border border-black p-1 w-24",children:""}),e.jsx("th",{className:"border border-black p-1",children:""}),e.jsx("th",{className:"border border-black p-1",children:"  "}),e.jsx("th",{className:"border border-black p-1",children:"  "}),e.jsx("th",{className:"border border-black p-1",children:"  "}),e.jsx("th",{className:"border border-black p-1",children:" "}),e.jsx("th",{className:"border border-black p-1",children:" / "}),e.jsx("th",{className:"border border-black p-1 bg-gray-200",children:""})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"h-6",children:[e.jsx("td",{className:"border border-black p-1 font-bold bg-gray-50",children:""}),e.jsx("td",{className:"border border-black p-1",children:n.ranks.stagiere}),e.jsx("td",{className:"border border-black p-1",children:n.ranks.primary}),e.jsx("td",{className:"border border-black p-1",children:n.ranks.class1}),e.jsx("td",{className:"border border-black p-1",children:n.ranks.class2}),e.jsx("td",{className:"border border-black p-1",children:n.ranks.distinguished}),e.jsx("td",{className:"border border-black p-1",children:n.ranks.contract}),e.jsx("td",{className:"border border-black p-1 font-bold bg-gray-50",children:i})]}),e.jsxs("tr",{className:"h-6",children:[e.jsx("td",{className:"border border-black p-1 font-bold bg-gray-50",children:" %"}),e.jsx("td",{className:"border border-black p-1",children:u(n.ranks.stagiere,i)}),e.jsx("td",{className:"border border-black p-1",children:u(n.ranks.primary,i)}),e.jsx("td",{className:"border border-black p-1",children:u(n.ranks.class1,i)}),e.jsx("td",{className:"border border-black p-1",children:u(n.ranks.class2,i)}),e.jsx("td",{className:"border border-black p-1",children:u(n.ranks.distinguished,i)}),e.jsx("td",{className:"border border-black p-1",children:u(n.ranks.contract,i)}),e.jsx("td",{className:"border border-black p-1 font-bold bg-gray-50",children:"100%"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-[11px] mb-1 text-right underline",children:"*     ...    "}),e.jsxs("table",{className:"w-full border-collapse border border-black text-center text-[10px]",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100 h-6",children:[e.jsx("th",{className:"border border-black p-1 w-24",children:""}),e.jsx("th",{className:"border border-black p-1",children:""}),e.jsx("th",{className:"border border-black p-1",children:" 01"}),e.jsx("th",{className:"border border-black p-1",children:" 02"}),e.jsx("th",{className:"border border-black p-1",children:" 03"}),e.jsx("th",{className:"border border-black p-1",children:" 04"}),e.jsx("th",{className:"border border-black p-1",children:" 05"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"h-6",children:[e.jsx("td",{className:"border border-black p-1 font-bold bg-gray-50",children:""}),e.jsx("td",{className:"border border-black p-1",children:n.levels.prep}),e.jsx("td",{className:"border border-black p-1",children:n.levels.year1}),e.jsx("td",{className:"border border-black p-1",children:n.levels.year2}),e.jsx("td",{className:"border border-black p-1",children:n.levels.year3}),e.jsx("td",{className:"border border-black p-1",children:n.levels.year4}),e.jsx("td",{className:"border border-black p-1",children:n.levels.year5})]}),e.jsxs("tr",{className:"h-6",children:[e.jsx("td",{className:"border border-black p-1 font-bold bg-gray-50",children:" "}),e.jsx("td",{className:"border border-black p-1",children:u(n.levels.prep,o)}),e.jsx("td",{className:"border border-black p-1",children:u(n.levels.year1,o)}),e.jsx("td",{className:"border border-black p-1",children:u(n.levels.year2,o)}),e.jsx("td",{className:"border border-black p-1",children:u(n.levels.year3,o)}),e.jsx("td",{className:"border border-black p-1",children:u(n.levels.year4,o)}),e.jsx("td",{className:"border border-black p-1",children:u(n.levels.year5,o)})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-[11px] mb-1 text-right underline",children:"*    "}),e.jsxs("table",{className:"w-full border-collapse border border-black text-center text-[10px]",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100 h-6",children:[e.jsx("th",{className:"border border-black p-1 w-24",children:""}),e.jsx("th",{className:"border border-black p-1",children:" "}),e.jsx("th",{className:"border border-black p-1",children:""}),e.jsx("th",{className:"border border-black p-1",children:". "}),e.jsx("th",{className:"border border-black p-1",children:""}),e.jsx("th",{className:"border border-black p-1",children:""}),e.jsx("th",{className:"border border-black p-1",children:". "}),e.jsx("th",{className:"border border-black p-1",children:". "}),e.jsx("th",{className:"border border-black p-1",children:". "})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"h-6",children:[e.jsx("td",{className:"border border-black p-1 font-bold bg-gray-50",children:""}),e.jsx("td",{className:"border border-black p-1",children:n.subjects.arabic}),e.jsx("td",{className:"border border-black p-1",children:n.subjects.math}),e.jsx("td",{className:"border border-black p-1",children:n.subjects.islamic}),e.jsx("td",{className:"border border-black p-1",children:n.subjects.history}),e.jsx("td",{className:"border border-black p-1",children:n.subjects.geo}),e.jsx("td",{className:"border border-black p-1",children:n.subjects.civics}),e.jsx("td",{className:"border border-black p-1",children:n.subjects.science}),e.jsx("td",{className:"border border-black p-1",children:n.subjects.art})]}),e.jsxs("tr",{className:"h-6",children:[e.jsx("td",{className:"border border-black p-1 font-bold bg-gray-50",children:" "}),e.jsx("td",{className:"border border-black p-1",children:u(n.subjects.arabic,c)}),e.jsx("td",{className:"border border-black p-1",children:u(n.subjects.math,c)}),e.jsx("td",{className:"border border-black p-1",children:u(n.subjects.islamic,c)}),e.jsx("td",{className:"border border-black p-1",children:u(n.subjects.history,c)}),e.jsx("td",{className:"border border-black p-1",children:u(n.subjects.geo,c)}),e.jsx("td",{className:"border border-black p-1",children:u(n.subjects.civics,c)}),e.jsx("td",{className:"border border-black p-1",children:u(n.subjects.science,c)}),e.jsx("td",{className:"border border-black p-1",children:u(n.subjects.art,c)})]})]})]})]})]}),e.jsxs("div",{className:"flex flex-col items-end px-8 text-sm font-bold shrink-0 mt-8 mb-4",children:[e.jsxs("p",{className:"mb-4",children:[" : ",n.wilaya," : ",f]}),e.jsxs("div",{className:"text-center w-64 relative flex flex-col items-center",children:[e.jsx("p",{className:"mb-12 underline",children:"  "}),t&&e.jsx("div",{className:"absolute top-4 left-1/2 transform -translate-x-1/2 w-48 h-32 flex items-center justify-center pointer-events-none z-10",children:e.jsx("img",{src:t,alt:"Signature",className:"w-full h-full object-contain mix-blend-multiply transform -rotate-6 scale-150 opacity-90"})})]})]})]}),e.jsx("style",{children:`
            @media print {
                @page { 
                    size: portrait;
                    margin: 0;
                }
                .a4-page-portrait {
                    width: 210mm;
                    height: 297mm;
                    margin: 0 auto;
                    background: white;
                    page-break-inside: avoid;
                    overflow: hidden;
                }
            }
            @media screen {
                .a4-page-portrait {
                    width: 210mm;
                    height: 297mm;
                    margin: 20px auto;
                    background: white;
                    box-shadow: 0 5px 15px rgba(0,0,0,0.2);
                }
            }
        `})]})},dE=({report:n,onChange:t,onPrint:l,teachers:i,reportsMap:o,tenureReportsMap:c,signature:u,onUploadSignature:f,inspectorName:x,globalWilaya:m,globalDistrict:b,isExpired:y=!1,onUpgradeClick:N})=>{const C=k.useRef(null),[A,E]=k.useState(!1),[R,P]=k.useState(!1);k.useEffect(()=>{const $={};let B=!1;if(x&&n.inspectorName!==x&&($.inspectorName=x,B=!0),m&&n.wilaya!==m&&($.wilaya=m,B=!0),b&&n.district!==b&&($.district=b,B=!0),!n.schoolYear||n.schoolYear.length<5){const q=new Date,J=q.getMonth()+1,Q=q.getFullYear();J>=9?$.schoolYear=`${Q}/${Q+1}`:$.schoolYear=`${Q-1}/${Q}`,B=!0}B&&t({...n,...$})},[x,m,b]);const O=$=>{const B=$.trim().toLowerCase();return B.includes("")?"history":B.includes("")?"geo":B.includes("")?"civics":B.includes("")||B.includes("")?"islamic":B.includes("")||B.includes("")?"science":B.includes("")||B.includes("")?"math":B.includes("")||B.includes("")||B.includes("")||B.includes("")?"arabic":B.includes("")||B.includes("")||B.includes("")||B.includes("")||B.includes("")?"art":null},z=()=>{if(!n.startDate||!n.endDate){alert("    ( - ) .");return}P(!0),setTimeout(()=>{const $=new Date(n.startDate),B=new Date(n.endDate);$.setHours(0,0,0,0),B.setHours(23,59,59,999);const q={visitsInspection:0,visitsTenure:0,days:{sun:0,mon:0,tue:0,wed:0,thu:0},ranks:{stagiere:0,primary:0,class1:0,class2:0,distinguished:0,contract:0},levels:{prep:0,year1:0,year2:0,year3:0,year4:0,year5:0},subjects:{arabic:0,math:0,islamic:0,history:0,geo:0,civics:0,science:0,art:0}};Object.values(o).forEach(U=>{if(!U.inspectionDate)return;const ae=new Date(U.inspectionDate);if(!isNaN(ae.getTime())&&ae>=$&&ae<=B){q.visitsInspection++;const se=ae.getDay();se===0?q.days.sun++:se===1?q.days.mon++:se===2?q.days.tue++:se===3?q.days.wed++:se===4&&q.days.thu++;const ne=i.find(V=>V.id===U.teacherId);if(ne){const V=ne.status||"",Y=(ne.rank||"").trim();V==="stagiere"?q.ranks.stagiere++:V==="contractuel"?q.ranks.contract++:Y.includes("")?q.ranks.distinguished++:Y.includes("")||Y.includes(" 2")||Y.includes("2")?q.ranks.class2++:Y.includes("")||Y.includes(" 1")||Y.includes("1")?q.ranks.class1++:q.ranks.primary++}const w=U.level||"";w.includes("")?q.levels.prep++:w.includes("")||w.includes("1")?q.levels.year1++:w.includes("")||w.includes("2")?q.levels.year2++:w.includes("")||w.includes("3")?q.levels.year3++:w.includes("")||w.includes("4")?q.levels.year4++:(w.includes("")||w.includes("5"))&&q.levels.year5++;const D=O(U.subject||"");D?q.subjects[D]++:U.subject&&q.subjects.arabic++}}),i.forEach(U=>{let ae=null;c&&c[U.id]&&c[U.id].examDate?ae=new Date(c[U.id].examDate):U.tenureDate&&U.tenureDate.trim()!==""&&(ae=new Date(U.tenureDate)),ae&&!isNaN(ae.getTime())&&ae>=$&&ae<=B&&q.visitsTenure++});const J=i.length,Q=i.filter(U=>U.status==="stagiere").length;t({...n,...q,teachersTotal:J,teachersTrainee:Q}),P(!1)},500)},K=()=>{if(typeof XLSX>"u"){alert(" Excel  .");return}const $=XLSX.utils.book_new();$.Workbook={Views:[{RTL:!0}]};const B=Object.values(n.days).reduce((D,V)=>D+V,0),q=(n.visitsMorning||0)+(n.visitsEvening||0),J=Object.values(n.ranks).reduce((D,V)=>D+V,0),Q=Object.values(n.levels).reduce((D,V)=>D+V,0),U=Object.values(n.subjects).reduce((D,V)=>D+V,0),ae=(D,V)=>V===0?"":(D/V*100).toFixed(1)+"%",se=new Date().toLocaleDateString("ar-DZ",{year:"numeric",month:"2-digit",day:"2-digit"}),ne=[["   "],["  "],[],[`  : ${n.wilaya}`,"","","","","","","  "],[],[`     ${n.term===""?" :":` ${n.term}   :`} ${n.schoolYear}`],[],["  ","",""," ","",""," ( )","","","","  ()"],["","","","",""," ","","",""," "," ",""],[n.inspectorName,n.rank,n.district,n.teachersTotal,n.teachersTrainee,n.teachersTenure,n.visitsInspection,n.visitsTenure,n.visitsTraining,n.visitsTrainingBenefit,n.tasksSupervision,n.tasksInvestigations],[],["*    ","","","","","","","","*  "],["","","","","","","","","",""],["",n.days.sun,n.days.mon,n.days.tue,n.days.wed,n.days.thu,B,"",n.visitsMorning,n.visitsEvening],[" %",ae(n.days.sun,B),ae(n.days.mon,B),ae(n.days.tue,B),ae(n.days.wed,B),ae(n.days.thu,B),"100%","",ae(n.visitsMorning,q),ae(n.visitsEvening,q)],[],["*      "],["","","  ","  ","  "," "," / ",""],["",n.ranks.stagiere,n.ranks.primary,n.ranks.class1,n.ranks.class2,n.ranks.distinguished,n.ranks.contract,J],[" %",ae(n.ranks.stagiere,J),ae(n.ranks.primary,J),ae(n.ranks.class1,J),ae(n.ranks.class2,J),ae(n.ranks.distinguished,J),ae(n.ranks.contract,J),"100%"],[],["*     ...    "],["",""," 01"," 02"," 03"," 04"," 05"],["",n.levels.prep,n.levels.year1,n.levels.year2,n.levels.year3,n.levels.year4,n.levels.year5],[" ",ae(n.levels.prep,Q),ae(n.levels.year1,Q),ae(n.levels.year2,Q),ae(n.levels.year3,Q),ae(n.levels.year4,Q),ae(n.levels.year5,Q)],[],["*    "],[""," ","",". ","","",". ",". ",". "],["",n.subjects.arabic,n.subjects.math,n.subjects.islamic,n.subjects.history,n.subjects.geo,n.subjects.civics,n.subjects.science,n.subjects.art],[" ",ae(n.subjects.arabic,U),ae(n.subjects.math,U),ae(n.subjects.islamic,U),ae(n.subjects.history,U),ae(n.subjects.geo,U),ae(n.subjects.civics,U),ae(n.subjects.science,U),ae(n.subjects.art,U)],[],[],[` : ${n.wilaya} : ${se}`],["  "],["( )"]],w=XLSX.utils.aoa_to_sheet(ne);w["!merges"]=[{s:{r:0,c:0},e:{r:0,c:11}},{s:{r:1,c:0},e:{r:1,c:11}},{s:{r:3,c:7},e:{r:3,c:11}},{s:{r:5,c:0},e:{r:5,c:11}},{s:{r:7,c:0},e:{r:8,c:0}},{s:{r:7,c:1},e:{r:8,c:1}},{s:{r:7,c:2},e:{r:8,c:2}},{s:{r:7,c:3},e:{r:7,c:5}},{s:{r:7,c:6},e:{r:7,c:9}},{s:{r:7,c:10},e:{r:7,c:11}},{s:{r:11,c:0},e:{r:11,c:6}},{s:{r:11,c:8},e:{r:11,c:9}},{s:{r:16,c:0},e:{r:16,c:7}},{s:{r:21,c:0},e:{r:21,c:6}},{s:{r:26,c:0},e:{r:26,c:8}},{s:{r:31,c:0},e:{r:31,c:4}},{s:{r:32,c:0},e:{r:32,c:4}},{s:{r:33,c:0},e:{r:33,c:4}}],w["!cols"]=[{wch:20},{wch:20},{wch:15},{wch:10},{wch:10},{wch:15},{wch:10},{wch:10},{wch:10},{wch:15},{wch:15},{wch:15}],XLSX.utils.book_append_sheet($,w,""),XLSX.writeFile($,`__${n.term.replace(/\s/g,"_")}.xlsx`)},G=($,B)=>{t({...n,[$]:B})},F=()=>{y?N&&N():l()};return e.jsxs("div",{className:"h-full flex flex-col bg-slate-50 overflow-hidden",children:[e.jsxs("div",{className:"bg-white border-b border-slate-200 p-2 shadow-sm z-20 flex flex-col gap-2",children:[e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"bg-indigo-100 p-1.5 rounded-lg text-indigo-600",children:e.jsx(G2,{size:18})}),e.jsx("span",{className:"font-bold text-slate-800 text-sm hidden md:inline",children:" "})]}),e.jsxs("div",{className:"flex-1 w-full md:w-auto bg-slate-50 p-1.5 rounded-xl border border-slate-200 flex flex-col md:flex-row gap-2 items-center justify-center",children:[e.jsxs("div",{className:"flex items-center gap-1 px-1",children:[e.jsx(gh,{size:14,className:"text-slate-400"}),e.jsx("span",{className:"text-[10px] font-bold text-slate-600 whitespace-nowrap",children:""})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-[10px] font-bold text-slate-500",children:":"}),e.jsx("input",{type:"date",className:"w-full md:w-32 bg-white border border-slate-300 rounded-lg px-2 py-1 text-xs font-bold text-slate-700 focus:ring-1 focus:ring-indigo-500",value:n.startDate,onChange:$=>G("startDate",$.target.value)})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-[10px] font-bold text-slate-500",children:":"}),e.jsx("input",{type:"date",className:"w-full md:w-32 bg-white border border-slate-300 rounded-lg px-2 py-1 text-xs font-bold text-slate-700 focus:ring-1 focus:ring-indigo-500",value:n.endDate,onChange:$=>G("endDate",$.target.value)})]}),e.jsx("div",{className:"h-4 w-px bg-slate-200 mx-2 hidden md:block"}),e.jsxs("select",{value:n.term,onChange:$=>G("term",$.target.value),className:"bg-white border border-slate-300 rounded-lg px-2 py-1 text-xs font-bold text-slate-700 focus:ring-1 focus:ring-indigo-500",children:[e.jsx("option",{value:"",children:" 1"}),e.jsx("option",{value:"",children:" 2"}),e.jsx("option",{value:"",children:" 3"}),e.jsx("option",{value:"",children:""})]}),e.jsxs("button",{onClick:z,disabled:R,className:"bg-indigo-600 text-white px-4 py-1.5 rounded-lg text-xs font-bold shadow-sm hover:bg-indigo-700 flex items-center gap-1.5 transition-colors disabled:opacity-70",children:[R?e.jsx(ci,{size:14,className:"animate-spin"}):e.jsx(xr,{size:14}),R?" ...":""]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>E(!A),className:`p-2 rounded-lg border text-xs font-bold flex items-center gap-1 transition-colors ${A?"bg-indigo-50 border-indigo-200 text-indigo-700":"bg-white border-slate-200 text-slate-600"}`,children:[e.jsx(X2,{size:16}),e.jsx("span",{children:" "})]}),f&&!y&&e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"file",ref:C,onChange:f,className:"hidden",accept:"image/*"}),e.jsx("button",{onClick:()=>{var $;return($=C.current)==null?void 0:$.click()},className:"p-2 rounded-lg border border-slate-300 text-slate-500 hover:bg-slate-100",title:" ",children:e.jsx(ai,{size:16})})]}),e.jsx("button",{onClick:K,className:"bg-green-600 text-white px-3 py-2 rounded-lg font-bold shadow hover:bg-green-700 flex items-center gap-2 text-xs",title:"  Excel",children:e.jsx(si,{size:16})}),e.jsxs("button",{onClick:F,className:`bg-slate-800 text-white px-4 py-2 rounded-lg font-bold shadow hover:bg-slate-900 flex items-center gap-2 text-xs ${y?"opacity-70":""}`,children:[y?e.jsx(Dt,{size:16}):e.jsx(bs,{size:16}),""]})]})]}),A&&e.jsxs("div",{className:"bg-indigo-50/50 p-2 rounded-xl border border-indigo-100 grid grid-cols-2 md:grid-cols-7 gap-3 animate-in slide-in-from-top-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-[9px] font-bold text-slate-500 mb-1",children:" "}),e.jsx("input",{type:"number",value:n.visitsMorning,onChange:$=>G("visitsMorning",parseInt($.target.value)||0),className:"w-full p-1 border rounded text-xs font-bold text-center border-indigo-200"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[9px] font-bold text-slate-500 mb-1",children:" "}),e.jsx("input",{type:"number",value:n.visitsEvening,onChange:$=>G("visitsEvening",parseInt($.target.value)||0),className:"w-full p-1 border rounded text-xs font-bold text-center border-indigo-200"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[9px] font-bold text-slate-500 mb-1",children:" "}),e.jsx("input",{type:"number",value:n.visitsTraining,onChange:$=>G("visitsTraining",parseInt($.target.value)||0),className:"w-full p-1 border rounded text-xs font-bold text-center"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[9px] font-bold text-slate-500 mb-1",children:" "}),e.jsx("input",{type:"number",value:n.visitsTrainingBenefit,onChange:$=>G("visitsTrainingBenefit",parseInt($.target.value)||0),className:"w-full p-1 border rounded text-xs font-bold text-center"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[9px] font-bold text-slate-500 mb-1",children:" "}),e.jsx("input",{type:"number",value:n.tasksSupervision,onChange:$=>G("tasksSupervision",parseInt($.target.value)||0),className:"w-full p-1 border rounded text-xs font-bold text-center"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[9px] font-bold text-slate-500 mb-1",children:""}),e.jsx("input",{type:"number",value:n.tasksInvestigations,onChange:$=>G("tasksInvestigations",parseInt($.target.value)||0),className:"w-full p-1 border rounded text-xs font-bold text-center"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[9px] font-bold text-slate-500 mb-1",children:" "}),e.jsx("input",{type:"number",value:n.teachersTenure,onChange:$=>G("teachersTenure",parseInt($.target.value)||0),className:"w-full p-1 border rounded text-xs font-bold text-center"})]})]})]}),e.jsx("div",{className:"flex-1 bg-slate-100 p-8 overflow-y-auto flex justify-center items-start",children:e.jsx("div",{className:"transform scale-95 shadow-2xl origin-top",children:e.jsx(fv,{report:n,signature:u})})})]})},uE="modulepreload",hE=function(n){return"/"+n},Tg={},ri=function(t,l,i){let o=Promise.resolve();if(l&&l.length>0){let u=function(m){return Promise.all(m.map(b=>Promise.resolve(b).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};document.getElementsByTagName("link");const f=document.querySelector("meta[property=csp-nonce]"),x=(f==null?void 0:f.nonce)||(f==null?void 0:f.getAttribute("nonce"));o=u(l.map(m=>{if(m=hE(m),m in Tg)return;Tg[m]=!0;const b=m.endsWith(".css"),y=b?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${y}`))return;const N=document.createElement("link");if(N.rel=b?"stylesheet":uE,b||(N.as="script"),N.crossOrigin="",N.href=m,x&&N.setAttribute("nonce",x),document.head.appendChild(N),b)return new Promise((C,A)=>{N.addEventListener("load",C),N.addEventListener("error",()=>A(new Error(`Unable to preload CSS for ${m}`)))})}))}function c(u){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=u,window.dispatchEvent(f),!f.defaultPrevented)throw u}return o.then(u=>{for(const f of u||[])f.status==="rejected"&&c(f.reason);return t().catch(c)})},fE=n=>{let t;return n?t=n:typeof fetch>"u"?t=(...l)=>ri(async()=>{const{default:i}=await Promise.resolve().then(()=>Tr);return{default:i}},void 0).then(({default:i})=>i(...l)):t=fetch,(...l)=>t(...l)};class Ih extends Error{constructor(t,l="FunctionsError",i){super(t),this.name=l,this.context=i}}class xE extends Ih{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class mE extends Ih{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class pE extends Ih{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var gE=function(n,t,l,i){function o(c){return c instanceof l?c:new l(function(u){u(c)})}return new(l||(l=Promise))(function(c,u){function f(b){try{m(i.next(b))}catch(y){u(y)}}function x(b){try{m(i.throw(b))}catch(y){u(y)}}function m(b){b.done?c(b.value):o(b.value).then(f,x)}m((i=i.apply(n,t||[])).next())})};class bE{constructor(t,{headers:l={},customFetch:i}={}){this.url=t,this.headers=l,this.fetch=fE(i)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,l={}){var i;return gE(this,void 0,void 0,function*(){try{const{headers:o,method:c,body:u}=l;let f={},x;u&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)&&(typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",x=u):typeof u=="string"?(f["Content-Type"]="text/plain",x=u):typeof FormData<"u"&&u instanceof FormData?x=u:(f["Content-Type"]="application/json",x=JSON.stringify(u)));const m=yield this.fetch(`${this.url}/${t}`,{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),o),body:x}).catch(C=>{throw new xE(C)}),b=m.headers.get("x-relay-error");if(b&&b==="true")throw new mE(m);if(!m.ok)throw new pE(m);let y=((i=m.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),N;return y==="application/json"?N=yield m.json():y==="application/octet-stream"?N=yield m.blob():y==="multipart/form-data"?N=yield m.formData():N=yield m.text(),{data:N,error:null}}catch(o){return{data:null,error:o}}})}}var vE=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},oi=vE();const yE=oi.fetch,zh=oi.fetch.bind(oi),xv=oi.Headers,NE=oi.Request,jE=oi.Response,Tr=Object.freeze(Object.defineProperty({__proto__:null,Headers:xv,Request:NE,Response:jE,default:zh,fetch:yE},Symbol.toStringTag,{value:"Module"}));class wE extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}class _E{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=zh:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}then(t,l){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const i=this.fetch;let o=i(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async c=>{var u,f,x;let m=null,b=null,y=null,N=c.status,C=c.statusText;if(c.ok){if(this.method!=="HEAD"){const P=await c.text();P===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?b=P:b=JSON.parse(P))}const E=(u=this.headers.Prefer)===null||u===void 0?void 0:u.match(/count=(exact|planned|estimated)/),R=(f=c.headers.get("content-range"))===null||f===void 0?void 0:f.split("/");E&&R&&R.length>1&&(y=parseInt(R[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(b)&&(b.length>1?(m={code:"PGRST116",details:`Results contain ${b.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},b=null,y=null,N=406,C="Not Acceptable"):b.length===1?b=b[0]:b=null)}else{const E=await c.text();try{m=JSON.parse(E),Array.isArray(m)&&c.status===404&&(b=[],m=null,N=200,C="OK")}catch{c.status===404&&E===""?(N=204,C="No Content"):m={message:E}}if(m&&this.isMaybeSingle&&(!((x=m==null?void 0:m.details)===null||x===void 0)&&x.includes("0 rows"))&&(m=null,N=200,C="OK"),m&&this.shouldThrowOnError)throw new wE(m)}return{error:m,data:b,count:y,status:N,statusText:C}});return this.shouldThrowOnError||(o=o.catch(c=>{var u,f,x;return{error:{message:`${(u=c==null?void 0:c.name)!==null&&u!==void 0?u:"FetchError"}: ${c==null?void 0:c.message}`,details:`${(f=c==null?void 0:c.stack)!==null&&f!==void 0?f:""}`,hint:"",code:`${(x=c==null?void 0:c.code)!==null&&x!==void 0?x:""}`},data:null,count:null,status:0,statusText:""}})),o.then(t,l)}}class SE extends _E{select(t){let l=!1;const i=(t??"*").split("").map(o=>/\s/.test(o)&&!l?"":(o==='"'&&(l=!l),o)).join("");return this.url.searchParams.set("select",i),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:l=!0,nullsFirst:i,foreignTable:o,referencedTable:c=o}={}){const u=c?`${c}.order`:"order",f=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${f?`${f},`:""}${t}.${l?"asc":"desc"}${i===void 0?"":i?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:l,referencedTable:i=l}={}){const o=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(o,`${t}`),this}range(t,l,{foreignTable:i,referencedTable:o=i}={}){const c=typeof o>"u"?"offset":`${o}.offset`,u=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(c,`${t}`),this.url.searchParams.set(u,`${l-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:l=!1,settings:i=!1,buffers:o=!1,wal:c=!1,format:u="text"}={}){var f;const x=[t?"analyze":null,l?"verbose":null,i?"settings":null,o?"buffers":null,c?"wal":null].filter(Boolean).join("|"),m=(f=this.headers.Accept)!==null&&f!==void 0?f:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${u}; for="${m}"; options=${x};`,u==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}class Ba extends SE{eq(t,l){return this.url.searchParams.append(t,`eq.${l}`),this}neq(t,l){return this.url.searchParams.append(t,`neq.${l}`),this}gt(t,l){return this.url.searchParams.append(t,`gt.${l}`),this}gte(t,l){return this.url.searchParams.append(t,`gte.${l}`),this}lt(t,l){return this.url.searchParams.append(t,`lt.${l}`),this}lte(t,l){return this.url.searchParams.append(t,`lte.${l}`),this}like(t,l){return this.url.searchParams.append(t,`like.${l}`),this}likeAllOf(t,l){return this.url.searchParams.append(t,`like(all).{${l.join(",")}}`),this}likeAnyOf(t,l){return this.url.searchParams.append(t,`like(any).{${l.join(",")}}`),this}ilike(t,l){return this.url.searchParams.append(t,`ilike.${l}`),this}ilikeAllOf(t,l){return this.url.searchParams.append(t,`ilike(all).{${l.join(",")}}`),this}ilikeAnyOf(t,l){return this.url.searchParams.append(t,`ilike(any).{${l.join(",")}}`),this}is(t,l){return this.url.searchParams.append(t,`is.${l}`),this}in(t,l){const i=l.map(o=>typeof o=="string"&&new RegExp("[,()]").test(o)?`"${o}"`:`${o}`).join(",");return this.url.searchParams.append(t,`in.(${i})`),this}contains(t,l){return typeof l=="string"?this.url.searchParams.append(t,`cs.${l}`):Array.isArray(l)?this.url.searchParams.append(t,`cs.{${l.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(l)}`),this}containedBy(t,l){return typeof l=="string"?this.url.searchParams.append(t,`cd.${l}`):Array.isArray(l)?this.url.searchParams.append(t,`cd.{${l.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(l)}`),this}rangeGt(t,l){return this.url.searchParams.append(t,`sr.${l}`),this}rangeGte(t,l){return this.url.searchParams.append(t,`nxl.${l}`),this}rangeLt(t,l){return this.url.searchParams.append(t,`sl.${l}`),this}rangeLte(t,l){return this.url.searchParams.append(t,`nxr.${l}`),this}rangeAdjacent(t,l){return this.url.searchParams.append(t,`adj.${l}`),this}overlaps(t,l){return typeof l=="string"?this.url.searchParams.append(t,`ov.${l}`):this.url.searchParams.append(t,`ov.{${l.join(",")}}`),this}textSearch(t,l,{config:i,type:o}={}){let c="";o==="plain"?c="pl":o==="phrase"?c="ph":o==="websearch"&&(c="w");const u=i===void 0?"":`(${i})`;return this.url.searchParams.append(t,`${c}fts${u}.${l}`),this}match(t){return Object.entries(t).forEach(([l,i])=>{this.url.searchParams.append(l,`eq.${i}`)}),this}not(t,l,i){return this.url.searchParams.append(t,`not.${l}.${i}`),this}or(t,{foreignTable:l,referencedTable:i=l}={}){const o=i?`${i}.or`:"or";return this.url.searchParams.append(o,`(${t})`),this}filter(t,l,i){return this.url.searchParams.append(t,`${l}.${i}`),this}}class CE{constructor(t,{headers:l={},schema:i,fetch:o}){this.url=t,this.headers=l,this.schema=i,this.fetch=o}select(t,{head:l=!1,count:i}={}){const o=l?"HEAD":"GET";let c=!1;const u=(t??"*").split("").map(f=>/\s/.test(f)&&!c?"":(f==='"'&&(c=!c),f)).join("");return this.url.searchParams.set("select",u),i&&(this.headers.Prefer=`count=${i}`),new Ba({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:l,defaultToNull:i=!0}={}){const o="POST",c=[];if(this.headers.Prefer&&c.push(this.headers.Prefer),l&&c.push(`count=${l}`),i||c.push("missing=default"),this.headers.Prefer=c.join(","),Array.isArray(t)){const u=t.reduce((f,x)=>f.concat(Object.keys(x)),[]);if(u.length>0){const f=[...new Set(u)].map(x=>`"${x}"`);this.url.searchParams.set("columns",f.join(","))}}return new Ba({method:o,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:l,ignoreDuplicates:i=!1,count:o,defaultToNull:c=!0}={}){const u="POST",f=[`resolution=${i?"ignore":"merge"}-duplicates`];if(l!==void 0&&this.url.searchParams.set("on_conflict",l),this.headers.Prefer&&f.push(this.headers.Prefer),o&&f.push(`count=${o}`),c||f.push("missing=default"),this.headers.Prefer=f.join(","),Array.isArray(t)){const x=t.reduce((m,b)=>m.concat(Object.keys(b)),[]);if(x.length>0){const m=[...new Set(x)].map(b=>`"${b}"`);this.url.searchParams.set("columns",m.join(","))}}return new Ba({method:u,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:l}={}){const i="PATCH",o=[];return this.headers.Prefer&&o.push(this.headers.Prefer),l&&o.push(`count=${l}`),this.headers.Prefer=o.join(","),new Ba({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const l="DELETE",i=[];return t&&i.push(`count=${t}`),this.headers.Prefer&&i.unshift(this.headers.Prefer),this.headers.Prefer=i.join(","),new Ba({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}const kE="1.9.2",EE={"X-Client-Info":`postgrest-js/${kE}`};class Lh{constructor(t,{headers:l={},schema:i,fetch:o}={}){this.url=t,this.headers=Object.assign(Object.assign({},EE),l),this.schemaName=i,this.fetch=o}from(t){const l=new URL(`${this.url}/${t}`);return new CE(l,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new Lh(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,l={},{head:i=!1,count:o}={}){let c;const u=new URL(`${this.url}/rpc/${t}`);let f;i?(c="HEAD",Object.entries(l).forEach(([m,b])=>{u.searchParams.append(m,`${b}`)})):(c="POST",f=l);const x=Object.assign({},this.headers);return o&&(x.Prefer=`count=${o}`),new Ba({method:c,url:u,headers:x,schema:this.schemaName,body:f,fetch:this.fetch,allowEmpty:!1})}}const TE="2.9.3",AE={"X-Client-Info":`realtime-js/${TE}`},ME="1.0.0",mv=1e4,DE=1e3;var ti;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(ti||(ti={}));var ps;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(ps||(ps={}));var qs;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(qs||(qs={}));var ch;(function(n){n.websocket="websocket"})(ch||(ch={}));var $l;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})($l||($l={}));class pv{constructor(t,l){this.callback=t,this.timerCalc=l,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=l}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}class RE{constructor(){this.HEADER_LENGTH=1}decode(t,l){return t.constructor===ArrayBuffer?l(this._binaryDecode(t)):l(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const l=new DataView(t),i=new TextDecoder;return this._decodeBroadcast(t,l,i)}_decodeBroadcast(t,l,i){const o=l.getUint8(1),c=l.getUint8(2);let u=this.HEADER_LENGTH+2;const f=i.decode(t.slice(u,u+o));u=u+o;const x=i.decode(t.slice(u,u+c));u=u+c;const m=JSON.parse(i.decode(t.slice(u,t.byteLength)));return{ref:null,topic:f,event:x,payload:m}}}class Pu{constructor(t,l,i={},o=mv){this.channel=t,this.event=l,this.payload=i,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,l){var i;return this._hasReceived(t)&&l((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:t,callback:l}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=l=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=l,this._matchReceive(l)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,l){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:l})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:l}){this.recHooks.filter(i=>i.status===t).forEach(i=>i.callback(l))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Ag;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(Ag||(Ag={}));class gr{constructor(t,l){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=(l==null?void 0:l.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},o=>{const{onJoin:c,onLeave:u,onSync:f}=this.caller;this.joinRef=this.channel._joinRef(),this.state=gr.syncState(this.state,o,c,u),this.pendingDiffs.forEach(x=>{this.state=gr.syncDiff(this.state,x,c,u)}),this.pendingDiffs=[],f()}),this.channel._on(i.diff,{},o=>{const{onJoin:c,onLeave:u,onSync:f}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=gr.syncDiff(this.state,o,c,u),f())}),this.onJoin((o,c,u)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:c,newPresences:u})}),this.onLeave((o,c,u)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:c,leftPresences:u})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,l,i,o){const c=this.cloneDeep(t),u=this.transformState(l),f={},x={};return this.map(c,(m,b)=>{u[m]||(x[m]=b)}),this.map(u,(m,b)=>{const y=c[m];if(y){const N=b.map(R=>R.presence_ref),C=y.map(R=>R.presence_ref),A=b.filter(R=>C.indexOf(R.presence_ref)<0),E=y.filter(R=>N.indexOf(R.presence_ref)<0);A.length>0&&(f[m]=A),E.length>0&&(x[m]=E)}else f[m]=b}),this.syncDiff(c,{joins:f,leaves:x},i,o)}static syncDiff(t,l,i,o){const{joins:c,leaves:u}={joins:this.transformState(l.joins),leaves:this.transformState(l.leaves)};return i||(i=()=>{}),o||(o=()=>{}),this.map(c,(f,x)=>{var m;const b=(m=t[f])!==null&&m!==void 0?m:[];if(t[f]=this.cloneDeep(x),b.length>0){const y=t[f].map(C=>C.presence_ref),N=b.filter(C=>y.indexOf(C.presence_ref)<0);t[f].unshift(...N)}i(f,b,x)}),this.map(u,(f,x)=>{let m=t[f];if(!m)return;const b=x.map(y=>y.presence_ref);m=m.filter(y=>b.indexOf(y.presence_ref)<0),t[f]=m,o(f,m,x),m.length===0&&delete t[f]}),t}static map(t,l){return Object.getOwnPropertyNames(t).map(i=>l(i,t[i]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((l,i)=>{const o=t[i];return"metas"in o?l[i]=o.metas.map(c=>(c.presence_ref=c.phx_ref,delete c.phx_ref,delete c.phx_ref_prev,c)):l[i]=o,l},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var ot;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(ot||(ot={}));const Mg=(n,t,l={})=>{var i;const o=(i=l.skipTypes)!==null&&i!==void 0?i:[];return Object.keys(t).reduce((c,u)=>(c[u]=IE(u,n,t,o),c),{})},IE=(n,t,l,i)=>{const o=t.find(f=>f.name===n),c=o==null?void 0:o.type,u=l[n];return c&&!i.includes(c)?gv(c,u):dh(u)},gv=(n,t)=>{if(n.charAt(0)==="_"){const l=n.slice(1,n.length);return PE(t,l)}switch(n){case ot.bool:return zE(t);case ot.float4:case ot.float8:case ot.int2:case ot.int4:case ot.int8:case ot.numeric:case ot.oid:return LE(t);case ot.json:case ot.jsonb:return UE(t);case ot.timestamp:return $E(t);case ot.abstime:case ot.date:case ot.daterange:case ot.int4range:case ot.int8range:case ot.money:case ot.reltime:case ot.text:case ot.time:case ot.timestamptz:case ot.timetz:case ot.tsrange:case ot.tstzrange:return dh(t);default:return dh(t)}},dh=n=>n,zE=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},LE=n=>{if(typeof n=="string"){const t=parseFloat(n);if(!Number.isNaN(t))return t}return n},UE=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(t){return console.log(`JSON parse error: ${t}`),n}return n},PE=(n,t)=>{if(typeof n!="string")return n;const l=n.length-1,i=n[l];if(n[0]==="{"&&i==="}"){let c;const u=n.slice(1,l);try{c=JSON.parse("["+u+"]")}catch{c=u?u.split(","):[]}return c.map(f=>gv(t,f))}return n},$E=n=>typeof n=="string"?n.replace(" ","T"):n;var Dg;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(Dg||(Dg={}));var Rg;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes"})(Rg||(Rg={}));var Ig;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(Ig||(Ig={}));class Uh{constructor(t,l={config:{}},i){this.topic=t,this.params=l,this.socket=i,this.bindings={},this.state=ps.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""}},l.config),this.timeout=this.socket.timeout,this.joinPush=new Pu(this,qs.join,this.params,this.timeout),this.rejoinTimer=new pv(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ps.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ps.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=ps.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ps.errored,this.rejoinTimer.scheduleTimeout())}),this._on(qs.reply,{},(o,c)=>{this._trigger(this._replyEventName(c),o)}),this.presence=new gr(this),this.broadcastEndpointURL=this._broadcastEndpointURL()}subscribe(t,l=this.timeout){var i,o;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:c,presence:u}}=this.params;this._onError(m=>t&&t("CHANNEL_ERROR",m)),this._onClose(()=>t&&t("CLOSED"));const f={},x={broadcast:c,presence:u,postgres_changes:(o=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(m=>m.filter))!==null&&o!==void 0?o:[]};this.socket.accessToken&&(f.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:x},f)),this.joinedOnce=!0,this._rejoin(l),this.joinPush.receive("ok",({postgres_changes:m})=>{var b;if(this.socket.accessToken&&this.socket.setAuth(this.socket.accessToken),m===void 0){t&&t("SUBSCRIBED");return}else{const y=this.bindings.postgres_changes,N=(b=y==null?void 0:y.length)!==null&&b!==void 0?b:0,C=[];for(let A=0;A<N;A++){const E=y[A],{filter:{event:R,schema:P,table:O,filter:z}}=E,K=m&&m[A];if(K&&K.event===R&&K.schema===P&&K.table===O&&K.filter===z)C.push(Object.assign(Object.assign({},E),{id:K.id}));else{this.unsubscribe(),t&&t("CHANNEL_ERROR",new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=C,t&&t("SUBSCRIBED");return}}).receive("error",m=>{t&&t("CHANNEL_ERROR",new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{t&&t("TIMED_OUT")})}return this}presenceState(){return this.presence.state}async track(t,l={}){return await this.send({type:"presence",event:"track",payload:t},l.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,l,i){return this._on(t,l,i)}async send(t,l={}){var i,o;if(!this._canPush()&&t.type==="broadcast"){const{event:c,payload:u}=t,f={method:"POST",headers:{apikey:(i=this.socket.apiKey)!==null&&i!==void 0?i:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:c,payload:u}]})};try{return(await this._fetchWithTimeout(this.broadcastEndpointURL,f,(o=l.timeout)!==null&&o!==void 0?o:this.timeout)).ok?"ok":"error"}catch(x){return x.name==="AbortError"?"timed out":"error"}}else return new Promise(c=>{var u,f,x;const m=this._push(t.type,t,l.timeout||this.timeout);t.type==="broadcast"&&!(!((x=(f=(u=this.params)===null||u===void 0?void 0:u.config)===null||f===void 0?void 0:f.broadcast)===null||x===void 0)&&x.ack)&&c("ok"),m.receive("ok",()=>c("ok")),m.receive("timeout",()=>c("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=ps.leaving;const l=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(qs.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(i=>{const o=new Pu(this,qs.leave,{},t);o.receive("ok",()=>{l(),i("ok")}).receive("timeout",()=>{l(),i("timed out")}).receive("error",()=>{i("error")}),o.send(),this._canPush()||o.trigger("ok",{})})}_broadcastEndpointURL(){let t=this.socket.endPoint;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"}async _fetchWithTimeout(t,l,i){const o=new AbortController,c=setTimeout(()=>o.abort(),i),u=await this.socket.fetch(t,Object.assign(Object.assign({},l),{signal:o.signal}));return clearTimeout(c),u}_push(t,l,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new Pu(this,t,l,i);return this._canPush()?o.send():(o.startTimeout(),this.pushBuffer.push(o)),o}_onMessage(t,l,i){return l}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,l,i){var o,c;const u=t.toLocaleLowerCase(),{close:f,error:x,leave:m,join:b}=qs;if(i&&[f,x,m,b].indexOf(u)>=0&&i!==this._joinRef())return;let N=this._onMessage(u,l,i);if(l&&!N)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(u)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(C=>{var A,E,R;return((A=C.filter)===null||A===void 0?void 0:A.event)==="*"||((R=(E=C.filter)===null||E===void 0?void 0:E.event)===null||R===void 0?void 0:R.toLocaleLowerCase())===u}).map(C=>C.callback(N,i)):(c=this.bindings[u])===null||c===void 0||c.filter(C=>{var A,E,R,P,O,z;if(["broadcast","presence","postgres_changes"].includes(u))if("id"in C){const K=C.id,G=(A=C.filter)===null||A===void 0?void 0:A.event;return K&&((E=l.ids)===null||E===void 0?void 0:E.includes(K))&&(G==="*"||(G==null?void 0:G.toLocaleLowerCase())===((R=l.data)===null||R===void 0?void 0:R.type.toLocaleLowerCase()))}else{const K=(O=(P=C==null?void 0:C.filter)===null||P===void 0?void 0:P.event)===null||O===void 0?void 0:O.toLocaleLowerCase();return K==="*"||K===((z=l==null?void 0:l.event)===null||z===void 0?void 0:z.toLocaleLowerCase())}else return C.type.toLocaleLowerCase()===u}).map(C=>{if(typeof N=="object"&&"ids"in N){const A=N.data,{schema:E,table:R,commit_timestamp:P,type:O,errors:z}=A;N=Object.assign(Object.assign({},{schema:E,table:R,commit_timestamp:P,eventType:O,new:{},old:{},errors:z}),this._getPayloadRecords(A))}C.callback(N,i)})}_isClosed(){return this.state===ps.closed}_isJoined(){return this.state===ps.joined}_isJoining(){return this.state===ps.joining}_isLeaving(){return this.state===ps.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,l,i){const o=t.toLocaleLowerCase(),c={type:o,filter:l,callback:i};return this.bindings[o]?this.bindings[o].push(c):this.bindings[o]=[c],this}_off(t,l){const i=t.toLocaleLowerCase();return this.bindings[i]=this.bindings[i].filter(o=>{var c;return!(((c=o.type)===null||c===void 0?void 0:c.toLocaleLowerCase())===i&&Uh.isEqual(o.filter,l))}),this}static isEqual(t,l){if(Object.keys(t).length!==Object.keys(l).length)return!1;for(const i in t)if(t[i]!==l[i])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(qs.close,{},t)}_onError(t){this._on(qs.error,{},l=>t(l))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ps.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const l={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(l.new=Mg(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(l.old=Mg(t.columns,t.old_record)),l}}const qE=()=>{},OE=typeof WebSocket<"u";class GE{constructor(t,l){var i;this.accessToken=null,this.apiKey=null,this.channels=[],this.endPoint="",this.headers=AE,this.params={},this.timeout=mv,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=qE,this.conn=null,this.sendBuffer=[],this.serializer=new RE,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this._resolveFetch=c=>{let u;return c?u=c:typeof fetch>"u"?u=(...f)=>ri(async()=>{const{default:x}=await Promise.resolve().then(()=>Tr);return{default:x}},void 0).then(({default:x})=>x(...f)):u=fetch,(...f)=>u(...f)},this.endPoint=`${t}/${ch.websocket}`,l!=null&&l.transport?this.transport=l.transport:this.transport=null,l!=null&&l.params&&(this.params=l.params),l!=null&&l.headers&&(this.headers=Object.assign(Object.assign({},this.headers),l.headers)),l!=null&&l.timeout&&(this.timeout=l.timeout),l!=null&&l.logger&&(this.logger=l.logger),l!=null&&l.heartbeatIntervalMs&&(this.heartbeatIntervalMs=l.heartbeatIntervalMs);const o=(i=l==null?void 0:l.params)===null||i===void 0?void 0:i.apikey;o&&(this.accessToken=o,this.apiKey=o),this.reconnectAfterMs=l!=null&&l.reconnectAfterMs?l.reconnectAfterMs:c=>[1e3,2e3,5e3,1e4][c-1]||1e4,this.encode=l!=null&&l.encode?l.encode:(c,u)=>u(JSON.stringify(c)),this.decode=l!=null&&l.decode?l.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new pv(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(l==null?void 0:l.fetch)}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this._endPointURL(),void 0,{headers:this.headers});return}if(OE){this.conn=new WebSocket(this._endPointURL()),this.setupConnection();return}this.conn=new HE(this._endPointURL(),void 0,{close:()=>{this.conn=null}}),ri(async()=>{const{default:t}=await import("./browser-XJsrR7hA.js").then(l=>l.b);return{default:t}},[]).then(({default:t})=>{this.conn=new t(this._endPointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}disconnect(t,l){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,l??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(t){const l=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),l}async removeAllChannels(){const t=await Promise.all(this.channels.map(l=>l.unsubscribe()));return this.disconnect(),t}log(t,l,i){this.logger(t,l,i)}connectionState(){switch(this.conn&&this.conn.readyState){case ti.connecting:return $l.Connecting;case ti.open:return $l.Open;case ti.closing:return $l.Closing;default:return $l.Closed}}isConnected(){return this.connectionState()===$l.Open}channel(t,l={config:{}}){const i=new Uh(`realtime:${t}`,l,this);return this.channels.push(i),i}push(t){const{topic:l,event:i,payload:o,ref:c}=t,u=()=>{this.encode(t,f=>{var x;(x=this.conn)===null||x===void 0||x.send(f)})};this.log("push",`${l} ${i} (${c})`,o),this.isConnected()?u():this.sendBuffer.push(u)}setAuth(t){this.accessToken=t,this.channels.forEach(l=>{t&&l.updateJoinPayload({access_token:t}),l.joinedOnce&&l._isJoined()&&l._push(qs.access_token,{access_token:t})})}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let l=this.channels.find(i=>i.topic===t&&(i._isJoined()||i._isJoining()));l&&(this.log("transport",`leaving duplicate topic "${t}"`),l.unsubscribe())}_remove(t){this.channels=this.channels.filter(l=>l._joinRef()!==t._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:ME}))}_onConnMessage(t){this.decode(t.data,l=>{let{topic:i,event:o,payload:c,ref:u}=l;(u&&u===this.pendingHeartbeatRef||o===(c==null?void 0:c.type))&&(this.pendingHeartbeatRef=null),this.log("receive",`${c.status||""} ${i} ${o} ${u&&"("+u+")"||""}`,c),this.channels.filter(f=>f._isMember(i)).forEach(f=>f._trigger(o,c,u)),this.stateChangeCallbacks.message.forEach(f=>f(l))})}_onConnOpen(){this.log("transport",`connected to ${this._endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this._sendHeartbeat(),this.heartbeatIntervalMs),this.stateChangeCallbacks.open.forEach(t=>t())}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(l=>l(t))}_onConnError(t){this.log("transport",t.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(l=>l(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(qs.error))}_appendParams(t,l){if(Object.keys(l).length===0)return t;const i=t.match(/\?/)?"&":"?",o=new URLSearchParams(l);return`${t}${i}${o}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_sendHeartbeat(){var t;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(t=this.conn)===null||t===void 0||t.close(DE,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}}class HE{constructor(t,l,i){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=ti.connecting,this.send=()=>{},this.url=null,this.url=t,this.close=i.close}}class Ph extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Yt(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class BE extends Ph{constructor(t,l){super(t),this.name="StorageApiError",this.status=l}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class zg extends Ph{constructor(t,l){super(t),this.name="StorageUnknownError",this.originalError=l}}var VE=function(n,t,l,i){function o(c){return c instanceof l?c:new l(function(u){u(c)})}return new(l||(l=Promise))(function(c,u){function f(b){try{m(i.next(b))}catch(y){u(y)}}function x(b){try{m(i.throw(b))}catch(y){u(y)}}function m(b){b.done?c(b.value):o(b.value).then(f,x)}m((i=i.apply(n,t||[])).next())})};const bv=n=>{let t;return n?t=n:typeof fetch>"u"?t=(...l)=>ri(async()=>{const{default:i}=await Promise.resolve().then(()=>Tr);return{default:i}},void 0).then(({default:i})=>i(...l)):t=fetch,(...l)=>t(...l)},FE=()=>VE(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield ri(()=>Promise.resolve().then(()=>Tr),void 0)).Response:Response});var xi=function(n,t,l,i){function o(c){return c instanceof l?c:new l(function(u){u(c)})}return new(l||(l=Promise))(function(c,u){function f(b){try{m(i.next(b))}catch(y){u(y)}}function x(b){try{m(i.throw(b))}catch(y){u(y)}}function m(b){b.done?c(b.value):o(b.value).then(f,x)}m((i=i.apply(n,t||[])).next())})};const $u=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),JE=(n,t)=>xi(void 0,void 0,void 0,function*(){const l=yield FE();n instanceof l?n.json().then(i=>{t(new BE($u(i),n.status||500))}).catch(i=>{t(new zg($u(i),i))}):t(new zg($u(n),n))}),YE=(n,t,l,i)=>{const o={method:n,headers:(t==null?void 0:t.headers)||{}};return n==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),o.body=JSON.stringify(i),Object.assign(Object.assign({},o),l))};function gc(n,t,l,i,o,c){return xi(this,void 0,void 0,function*(){return new Promise((u,f)=>{n(l,YE(t,i,o,c)).then(x=>{if(!x.ok)throw x;return i!=null&&i.noResolveJson?x:x.json()}).then(x=>u(x)).catch(x=>JE(x,f))})})}function uh(n,t,l,i){return xi(this,void 0,void 0,function*(){return gc(n,"GET",t,l,i)})}function il(n,t,l,i,o){return xi(this,void 0,void 0,function*(){return gc(n,"POST",t,i,o,l)})}function KE(n,t,l,i,o){return xi(this,void 0,void 0,function*(){return gc(n,"PUT",t,i,o,l)})}function vv(n,t,l,i,o){return xi(this,void 0,void 0,function*(){return gc(n,"DELETE",t,i,o,l)})}var Ms=function(n,t,l,i){function o(c){return c instanceof l?c:new l(function(u){u(c)})}return new(l||(l=Promise))(function(c,u){function f(b){try{m(i.next(b))}catch(y){u(y)}}function x(b){try{m(i.throw(b))}catch(y){u(y)}}function m(b){b.done?c(b.value):o(b.value).then(f,x)}m((i=i.apply(n,t||[])).next())})};const QE={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Lg={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class XE{constructor(t,l={},i,o){this.url=t,this.headers=l,this.bucketId=i,this.fetch=bv(o)}uploadOrUpdate(t,l,i,o){return Ms(this,void 0,void 0,function*(){try{let c;const u=Object.assign(Object.assign({},Lg),o),f=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(u.upsert)});typeof Blob<"u"&&i instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",i)):typeof FormData<"u"&&i instanceof FormData?(c=i,c.append("cacheControl",u.cacheControl)):(c=i,f["cache-control"]=`max-age=${u.cacheControl}`,f["content-type"]=u.contentType);const x=this._removeEmptyFolders(l),m=this._getFinalPath(x),b=yield this.fetch(`${this.url}/object/${m}`,Object.assign({method:t,body:c,headers:f},u!=null&&u.duplex?{duplex:u.duplex}:{})),y=yield b.json();return b.ok?{data:{path:x,id:y.Id,fullPath:y.Key},error:null}:{data:null,error:y}}catch(c){if(Yt(c))return{data:null,error:c};throw c}})}upload(t,l,i){return Ms(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,l,i)})}uploadToSignedUrl(t,l,i,o){return Ms(this,void 0,void 0,function*(){const c=this._removeEmptyFolders(t),u=this._getFinalPath(c),f=new URL(this.url+`/object/upload/sign/${u}`);f.searchParams.set("token",l);try{let x;const m=Object.assign({upsert:Lg.upsert},o),b=Object.assign(Object.assign({},this.headers),{"x-upsert":String(m.upsert)});typeof Blob<"u"&&i instanceof Blob?(x=new FormData,x.append("cacheControl",m.cacheControl),x.append("",i)):typeof FormData<"u"&&i instanceof FormData?(x=i,x.append("cacheControl",m.cacheControl)):(x=i,b["cache-control"]=`max-age=${m.cacheControl}`,b["content-type"]=m.contentType);const y=yield this.fetch(f.toString(),{method:"PUT",body:x,headers:b}),N=yield y.json();return y.ok?{data:{path:c,fullPath:N.Key},error:null}:{data:null,error:N}}catch(x){if(Yt(x))return{data:null,error:x};throw x}})}createSignedUploadUrl(t){return Ms(this,void 0,void 0,function*(){try{let l=this._getFinalPath(t);const i=yield il(this.fetch,`${this.url}/object/upload/sign/${l}`,{},{headers:this.headers}),o=new URL(this.url+i.url),c=o.searchParams.get("token");if(!c)throw new Ph("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:c},error:null}}catch(l){if(Yt(l))return{data:null,error:l};throw l}})}update(t,l,i){return Ms(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,l,i)})}move(t,l){return Ms(this,void 0,void 0,function*(){try{return{data:yield il(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:l},{headers:this.headers}),error:null}}catch(i){if(Yt(i))return{data:null,error:i};throw i}})}copy(t,l){return Ms(this,void 0,void 0,function*(){try{return{data:{path:(yield il(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:l},{headers:this.headers})).Key},error:null}}catch(i){if(Yt(i))return{data:null,error:i};throw i}})}createSignedUrl(t,l,i){return Ms(this,void 0,void 0,function*(){try{let o=this._getFinalPath(t),c=yield il(this.fetch,`${this.url}/object/sign/${o}`,Object.assign({expiresIn:l},i!=null&&i.transform?{transform:i.transform}:{}),{headers:this.headers});const u=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return c={signedUrl:encodeURI(`${this.url}${c.signedURL}${u}`)},{data:c,error:null}}catch(o){if(Yt(o))return{data:null,error:o};throw o}})}createSignedUrls(t,l,i){return Ms(this,void 0,void 0,function*(){try{const o=yield il(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:l,paths:t},{headers:this.headers}),c=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return{data:o.map(u=>Object.assign(Object.assign({},u),{signedUrl:u.signedURL?encodeURI(`${this.url}${u.signedURL}${c}`):null})),error:null}}catch(o){if(Yt(o))return{data:null,error:o};throw o}})}download(t,l){return Ms(this,void 0,void 0,function*(){const o=typeof(l==null?void 0:l.transform)<"u"?"render/image/authenticated":"object",c=this.transformOptsToQueryString((l==null?void 0:l.transform)||{}),u=c?`?${c}`:"";try{const f=this._getFinalPath(t);return{data:yield(yield uh(this.fetch,`${this.url}/${o}/${f}${u}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(f){if(Yt(f))return{data:null,error:f};throw f}})}getPublicUrl(t,l){const i=this._getFinalPath(t),o=[],c=l!=null&&l.download?`download=${l.download===!0?"":l.download}`:"";c!==""&&o.push(c);const f=typeof(l==null?void 0:l.transform)<"u"?"render/image":"object",x=this.transformOptsToQueryString((l==null?void 0:l.transform)||{});x!==""&&o.push(x);let m=o.join("&");return m!==""&&(m=`?${m}`),{data:{publicUrl:encodeURI(`${this.url}/${f}/public/${i}${m}`)}}}remove(t){return Ms(this,void 0,void 0,function*(){try{return{data:yield vv(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(l){if(Yt(l))return{data:null,error:l};throw l}})}list(t,l,i){return Ms(this,void 0,void 0,function*(){try{const o=Object.assign(Object.assign(Object.assign({},QE),l),{prefix:t||""});return{data:yield il(this.fetch,`${this.url}/object/list/${this.bucketId}`,o,{headers:this.headers},i),error:null}}catch(o){if(Yt(o))return{data:null,error:o};throw o}})}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const l=[];return t.width&&l.push(`width=${t.width}`),t.height&&l.push(`height=${t.height}`),t.resize&&l.push(`resize=${t.resize}`),t.format&&l.push(`format=${t.format}`),t.quality&&l.push(`quality=${t.quality}`),l.join("&")}}const ZE="2.5.5",WE={"X-Client-Info":`storage-js/${ZE}`};var $a=function(n,t,l,i){function o(c){return c instanceof l?c:new l(function(u){u(c)})}return new(l||(l=Promise))(function(c,u){function f(b){try{m(i.next(b))}catch(y){u(y)}}function x(b){try{m(i.throw(b))}catch(y){u(y)}}function m(b){b.done?c(b.value):o(b.value).then(f,x)}m((i=i.apply(n,t||[])).next())})};class eT{constructor(t,l={},i){this.url=t,this.headers=Object.assign(Object.assign({},WE),l),this.fetch=bv(i)}listBuckets(){return $a(this,void 0,void 0,function*(){try{return{data:yield uh(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(Yt(t))return{data:null,error:t};throw t}})}getBucket(t){return $a(this,void 0,void 0,function*(){try{return{data:yield uh(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(l){if(Yt(l))return{data:null,error:l};throw l}})}createBucket(t,l={public:!1}){return $a(this,void 0,void 0,function*(){try{return{data:yield il(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:l.public,file_size_limit:l.fileSizeLimit,allowed_mime_types:l.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(Yt(i))return{data:null,error:i};throw i}})}updateBucket(t,l){return $a(this,void 0,void 0,function*(){try{return{data:yield KE(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:l.public,file_size_limit:l.fileSizeLimit,allowed_mime_types:l.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(Yt(i))return{data:null,error:i};throw i}})}emptyBucket(t){return $a(this,void 0,void 0,function*(){try{return{data:yield il(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(l){if(Yt(l))return{data:null,error:l};throw l}})}deleteBucket(t){return $a(this,void 0,void 0,function*(){try{return{data:yield vv(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(l){if(Yt(l))return{data:null,error:l};throw l}})}}class tT extends eT{constructor(t,l={},i){super(t,l,i)}from(t){return new XE(this.url,this.headers,t,this.fetch)}}const sT="2.39.7";let mr="";typeof Deno<"u"?mr="deno":typeof document<"u"?mr="web":typeof navigator<"u"&&navigator.product==="ReactNative"?mr="react-native":mr="node";const nT={"X-Client-Info":`supabase-js-${mr}/${sT}`},lT={headers:nT},aT={schema:"public"},iT={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},rT={};var oT=function(n,t,l,i){function o(c){return c instanceof l?c:new l(function(u){u(c)})}return new(l||(l=Promise))(function(c,u){function f(b){try{m(i.next(b))}catch(y){u(y)}}function x(b){try{m(i.throw(b))}catch(y){u(y)}}function m(b){b.done?c(b.value):o(b.value).then(f,x)}m((i=i.apply(n,t||[])).next())})};const cT=n=>{let t;return n?t=n:typeof fetch>"u"?t=zh:t=fetch,(...l)=>t(...l)},dT=()=>typeof Headers>"u"?xv:Headers,uT=(n,t,l)=>{const i=cT(l),o=dT();return(c,u)=>oT(void 0,void 0,void 0,function*(){var f;const x=(f=yield t())!==null&&f!==void 0?f:n;let m=new o(u==null?void 0:u.headers);return m.has("apikey")||m.set("apikey",n),m.has("Authorization")||m.set("Authorization",`Bearer ${x}`),i(c,Object.assign(Object.assign({},u),{headers:m}))})};function hT(n){return n.replace(/\/$/,"")}function fT(n,t){const{db:l,auth:i,realtime:o,global:c}=n,{db:u,auth:f,realtime:x,global:m}=t;return{db:Object.assign(Object.assign({},u),l),auth:Object.assign(Object.assign({},f),i),realtime:Object.assign(Object.assign({},x),o),global:Object.assign(Object.assign({},m),c)}}function xT(n){return Math.round(Date.now()/1e3)+n}function mT(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const t=Math.random()*16|0;return(n=="x"?t:t&3|8).toString(16)})}const $s=()=>typeof document<"u",zl={tested:!1,writable:!1},br=()=>{if(!$s())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(zl.tested)return zl.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),zl.tested=!0,zl.writable=!0}catch{zl.tested=!0,zl.writable=!1}return zl.writable};function qu(n){const t={},l=new URL(n);if(l.hash&&l.hash[0]==="#")try{new URLSearchParams(l.hash.substring(1)).forEach((o,c)=>{t[c]=o})}catch{}return l.searchParams.forEach((i,o)=>{t[o]=i}),t}const yv=n=>{let t;return n?t=n:typeof fetch>"u"?t=(...l)=>ri(async()=>{const{default:i}=await Promise.resolve().then(()=>Tr);return{default:i}},void 0).then(({default:i})=>i(...l)):t=fetch,(...l)=>t(...l)},pT=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",Ll=async(n,t,l)=>{await n.setItem(t,JSON.stringify(l))},Vo=async(n,t)=>{const l=await n.getItem(t);if(!l)return null;try{return JSON.parse(l)}catch{return l}},Ou=async(n,t)=>{await n.removeItem(t)};function gT(n){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let l="",i,o,c,u,f,x,m,b=0;for(n=n.replace("-","+").replace("_","/");b<n.length;)u=t.indexOf(n.charAt(b++)),f=t.indexOf(n.charAt(b++)),x=t.indexOf(n.charAt(b++)),m=t.indexOf(n.charAt(b++)),i=u<<2|f>>4,o=(f&15)<<4|x>>2,c=(x&3)<<6|m,l=l+String.fromCharCode(i),x!=64&&o!=0&&(l=l+String.fromCharCode(o)),m!=64&&c!=0&&(l=l+String.fromCharCode(c));return l}class bc{constructor(){this.promise=new bc.promiseConstructor((t,l)=>{this.resolve=t,this.reject=l})}}bc.promiseConstructor=Promise;function Ug(n){const t=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,l=n.split(".");if(l.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!t.test(l[1]))throw new Error("JWT is not valid: payload is not in base64url format");const i=l[1];return JSON.parse(gT(i))}async function bT(n){return await new Promise(t=>{setTimeout(()=>t(null),n)})}function vT(n,t){return new Promise((i,o)=>{(async()=>{for(let c=0;c<1/0;c++)try{const u=await n(c);if(!t(c,null,u)){i(u);return}}catch(u){if(!t(c,u)){o(u);return}}})()})}function yT(n){return("0"+n.toString(16)).substr(-2)}function qa(){const t=new Uint32Array(56);if(typeof crypto>"u"){const l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=l.length;let o="";for(let c=0;c<56;c++)o+=l.charAt(Math.floor(Math.random()*i));return o}return crypto.getRandomValues(t),Array.from(t,yT).join("")}async function NT(n){const l=new TextEncoder().encode(n),i=await crypto.subtle.digest("SHA-256",l),o=new Uint8Array(i);return Array.from(o).map(c=>String.fromCharCode(c)).join("")}function jT(n){return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Oa(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const l=await NT(n);return jT(l)}class $h extends Error{constructor(t,l){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=l}}function Be(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class wT extends $h{constructor(t,l){super(t,l),this.name="AuthApiError",this.status=l}toJSON(){return{name:this.name,message:this.message,status:this.status}}}function _T(n){return Be(n)&&n.name==="AuthApiError"}class Nv extends $h{constructor(t,l){super(t),this.name="AuthUnknownError",this.originalError=l}}class Xl extends $h{constructor(t,l,i){super(t),this.name=l,this.status=i}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Ga extends Xl{constructor(){super("Auth session missing!","AuthSessionMissingError",400)}}class Gu extends Xl{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500)}}class Fo extends Xl{constructor(t){super(t,"AuthInvalidCredentialsError",400)}}class Jo extends Xl{constructor(t,l=null){super(t,"AuthImplicitGrantRedirectError",500),this.details=null,this.details=l}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Pg extends Xl{constructor(t,l=null){super(t,"AuthPKCEGrantCodeExchangeError",500),this.details=null,this.details=l}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class hh extends Xl{constructor(t,l){super(t,"AuthRetryableFetchError",l)}}function Hu(n){return Be(n)&&n.name==="AuthRetryableFetchError"}class ST extends Xl{constructor(t,l,i){super(t,"AuthWeakPasswordError",l),this.reasons=i}}var CT=function(n,t){var l={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(l[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(l[i[o]]=n[i[o]]);return l};const Va=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),kT=[502,503,504];async function $g(n){if(!pT(n))throw new hh(Va(n),0);if(kT.includes(n.status))throw new hh(Va(n),n.status);let t;try{t=await n.json()}catch(l){throw new Nv(Va(l),l)}throw typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((l,i)=>l&&typeof i=="string",!0)?new ST(Va(t),n.status,t.weak_password.reasons):new wT(Va(t),n.status||500)}const ET=(n,t,l,i)=>{const o={method:n,headers:(t==null?void 0:t.headers)||{}};return n==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),o.body=JSON.stringify(i),Object.assign(Object.assign({},o),l))};async function Fe(n,t,l,i){var o;const c=Object.assign({},i==null?void 0:i.headers);i!=null&&i.jwt&&(c.Authorization=`Bearer ${i.jwt}`);const u=(o=i==null?void 0:i.query)!==null&&o!==void 0?o:{};i!=null&&i.redirectTo&&(u.redirect_to=i.redirectTo);const f=Object.keys(u).length?"?"+new URLSearchParams(u).toString():"",x=await TT(n,t,l+f,{headers:c,noResolveJson:i==null?void 0:i.noResolveJson},{},i==null?void 0:i.body);return i!=null&&i.xform?i==null?void 0:i.xform(x):{data:Object.assign({},x),error:null}}async function TT(n,t,l,i,o,c){const u=ET(t,i,o,c);let f;try{f=await n(l,u)}catch(x){throw console.error(x),new hh(Va(x),0)}if(f.ok||await $g(f),i!=null&&i.noResolveJson)return f;try{return await f.json()}catch(x){await $g(x)}}function Ul(n){var t;let l=null;RT(n)&&(l=Object.assign({},n),n.expires_at||(l.expires_at=xT(n.expires_in)));const i=(t=n.user)!==null&&t!==void 0?t:n;return{data:{session:l,user:i},error:null}}function qg(n){const t=Ul(n);return!t.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((l,i)=>l&&typeof i=="string",!0)&&(t.data.weak_password=n.weak_password),t}function rl(n){var t;return{data:{user:(t=n.user)!==null&&t!==void 0?t:n},error:null}}function AT(n){return{data:n,error:null}}function MT(n){const{action_link:t,email_otp:l,hashed_token:i,redirect_to:o,verification_type:c}=n,u=CT(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),f={action_link:t,email_otp:l,hashed_token:i,redirect_to:o,verification_type:c},x=Object.assign({},u);return{data:{properties:f,user:x},error:null}}function DT(n){return n}function RT(n){return n.access_token&&n.refresh_token&&n.expires_in}var IT=function(n,t){var l={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(l[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(l[i[o]]=n[i[o]]);return l};class zT{constructor({url:t="",headers:l={},fetch:i}){this.url=t,this.headers=l,this.fetch=yv(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,l="global"){try{return await Fe(this.fetch,"POST",`${this.url}/logout?scope=${l}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(i){if(Be(i))return{data:null,error:i};throw i}}async inviteUserByEmail(t,l={}){try{return await Fe(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:l.data},headers:this.headers,redirectTo:l.redirectTo,xform:rl})}catch(i){if(Be(i))return{data:{user:null},error:i};throw i}}async generateLink(t){try{const{options:l}=t,i=IT(t,["options"]),o=Object.assign(Object.assign({},i),l);return"newEmail"in i&&(o.new_email=i==null?void 0:i.newEmail,delete o.newEmail),await Fe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:MT,redirectTo:l==null?void 0:l.redirectTo})}catch(l){if(Be(l))return{data:{properties:null,user:null},error:l};throw l}}async createUser(t){try{return await Fe(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:rl})}catch(l){if(Be(l))return{data:{user:null},error:l};throw l}}async listUsers(t){var l,i,o,c,u,f,x;try{const m={nextPage:null,lastPage:0,total:0},b=await Fe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(l=t==null?void 0:t.page)===null||l===void 0?void 0:l.toString())!==null&&i!==void 0?i:"",per_page:(c=(o=t==null?void 0:t.perPage)===null||o===void 0?void 0:o.toString())!==null&&c!==void 0?c:""},xform:DT});if(b.error)throw b.error;const y=await b.json(),N=(u=b.headers.get("x-total-count"))!==null&&u!==void 0?u:0,C=(x=(f=b.headers.get("link"))===null||f===void 0?void 0:f.split(","))!==null&&x!==void 0?x:[];return C.length>0&&(C.forEach(A=>{const E=parseInt(A.split(";")[0].split("=")[1].substring(0,1)),R=JSON.parse(A.split(";")[1].split("=")[1]);m[`${R}Page`]=E}),m.total=parseInt(N)),{data:Object.assign(Object.assign({},y),m),error:null}}catch(m){if(Be(m))return{data:{users:[]},error:m};throw m}}async getUserById(t){try{return await Fe(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:rl})}catch(l){if(Be(l))return{data:{user:null},error:l};throw l}}async updateUserById(t,l){try{return await Fe(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:l,headers:this.headers,xform:rl})}catch(i){if(Be(i))return{data:{user:null},error:i};throw i}}async deleteUser(t,l=!1){try{return await Fe(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:l},xform:rl})}catch(i){if(Be(i))return{data:{user:null},error:i};throw i}}async _listFactors(t){try{const{data:l,error:i}=await Fe(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:l,error:i}}catch(l){if(Be(l))return{data:null,error:l};throw l}}async _deleteFactor(t){try{return{data:await Fe(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(l){if(Be(l))return{data:null,error:l};throw l}}}const jv="0.0.0",LT="http://localhost:9999",UT="supabase.auth.token",PT={"X-Client-Info":`gotrue-js/${jv}`},Og=10,$T={getItem:n=>br()?globalThis.localStorage.getItem(n):null,setItem:(n,t)=>{br()&&globalThis.localStorage.setItem(n,t)},removeItem:n=>{br()&&globalThis.localStorage.removeItem(n)}};function Gg(n={}){return{getItem:t=>n[t]||null,setItem:(t,l)=>{n[t]=l},removeItem:t=>{delete n[t]}}}function qT(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Ha={debug:!!(globalThis&&br()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class wv extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class OT extends wv{}async function GT(n,t,l){Ha.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,t);const i=new globalThis.AbortController;return t>0&&setTimeout(()=>{i.abort(),Ha.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},t),await globalThis.navigator.locks.request(n,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async o=>{if(o){Ha.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,o.name);try{return await l()}finally{Ha.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,o.name)}}else{if(t===0)throw Ha.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new OT(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(Ha.debug)try{const c=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(c,null,"  "))}catch(c){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",c)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await l()}})}qT();const HT={url:LT,storageKey:UT,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:PT,flowType:"implicit",debug:!1},dr=30*1e3,Hg=3;async function Bg(n,t,l){return await l()}class wr{constructor(t){var l,i;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=wr.nextInstanceID,wr.nextInstanceID+=1,this.instanceID>0&&$s()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const o=Object.assign(Object.assign({},HT),t);if(this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.persistSession=o.persistSession,this.storageKey=o.storageKey,this.autoRefreshToken=o.autoRefreshToken,this.admin=new zT({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=yv(o.fetch),this.lock=o.lock||Bg,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,o.lock?this.lock=o.lock:$s()&&(!((l=globalThis==null?void 0:globalThis.navigator)===null||l===void 0)&&l.locks)?this.lock=GT:this.lock=Bg,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?o.storage?this.storage=o.storage:br()?this.storage=$T:(this.memoryStorage={},this.storage=Gg(this.memoryStorage)):(this.memoryStorage={},this.storage=Gg(this.memoryStorage)),$s()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(c){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",c)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async c=>{this._debug("received broadcast notification from other tab or client",c),await this._notifyAllSubscribers(c.data.event,c.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${jv}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){try{const t=$s()?await this._isPKCEFlow():!1;if(this._debug("#_initialize()","begin","is PKCE flow",t),t||this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:l,error:i}=await this._getSessionFromURL(t);if(i)return this._debug("#_initialize()","error detecting session from URL",i),(i==null?void 0:i.message)==="Identity is already linked"||(i==null?void 0:i.message)==="Identity is already linked to another user"?{error:i}:(await this._removeSession(),{error:i});const{session:o,redirectType:c}=l;return this._debug("#_initialize()","detected session in URL",o,"redirect type",c),await this._saveSession(o),setTimeout(async()=>{c==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return Be(t)?{error:t}:{error:new Nv("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signUp(t){var l,i,o;try{await this._removeSession();let c;if("email"in t){const{email:b,password:y,options:N}=t;let C=null,A=null;if(this.flowType==="pkce"){const E=qa();await Ll(this.storage,`${this.storageKey}-code-verifier`,E),C=await Oa(E),A=E===C?"plain":"s256"}c=await Fe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:N==null?void 0:N.emailRedirectTo,body:{email:b,password:y,data:(l=N==null?void 0:N.data)!==null&&l!==void 0?l:{},gotrue_meta_security:{captcha_token:N==null?void 0:N.captchaToken},code_challenge:C,code_challenge_method:A},xform:Ul})}else if("phone"in t){const{phone:b,password:y,options:N}=t;c=await Fe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:b,password:y,data:(i=N==null?void 0:N.data)!==null&&i!==void 0?i:{},channel:(o=N==null?void 0:N.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:N==null?void 0:N.captchaToken}},xform:Ul})}else throw new Fo("You must provide either an email or phone number and a password");const{data:u,error:f}=c;if(f||!u)return{data:{user:null,session:null},error:f};const x=u.session,m=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",x)),{data:{user:m,session:x},error:null}}catch(c){if(Be(c))return{data:{user:null,session:null},error:c};throw c}}async signInWithPassword(t){try{await this._removeSession();let l;if("email"in t){const{email:c,password:u,options:f}=t;l=await Fe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:c,password:u,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:qg})}else if("phone"in t){const{phone:c,password:u,options:f}=t;l=await Fe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:c,password:u,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:qg})}else throw new Fo("You must provide either an email or phone number and a password");const{data:i,error:o}=l;return o?{data:{user:null,session:null},error:o}:!i||!i.session||!i.user?{data:{user:null,session:null},error:new Gu}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:o})}catch(l){if(Be(l))return{data:{user:null,session:null},error:l};throw l}}async signInWithOAuth(t){var l,i,o,c;return await this._removeSession(),await this._handleProviderSignIn(t.provider,{redirectTo:(l=t.options)===null||l===void 0?void 0:l.redirectTo,scopes:(i=t.options)===null||i===void 0?void 0:i.scopes,queryParams:(o=t.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(c=t.options)===null||c===void 0?void 0:c.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async _exchangeCodeForSession(t){const l=await Vo(this.storage,`${this.storageKey}-code-verifier`),[i,o]=(l??"").split("/"),{data:c,error:u}=await Fe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:i},xform:Ul});return await Ou(this.storage,`${this.storageKey}-code-verifier`),u?{data:{user:null,session:null,redirectType:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null,redirectType:null},error:new Gu}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:Object.assign(Object.assign({},c),{redirectType:o??null}),error:u})}async signInWithIdToken(t){await this._removeSession();try{const{options:l,provider:i,token:o,access_token:c,nonce:u}=t,f=await Fe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:o,access_token:c,nonce:u,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Ul}),{data:x,error:m}=f;return m?{data:{user:null,session:null},error:m}:!x||!x.session||!x.user?{data:{user:null,session:null},error:new Gu}:(x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),{data:x,error:m})}catch(l){if(Be(l))return{data:{user:null,session:null},error:l};throw l}}async signInWithOtp(t){var l,i,o,c,u;try{if(await this._removeSession(),"email"in t){const{email:f,options:x}=t;let m=null,b=null;if(this.flowType==="pkce"){const N=qa();await Ll(this.storage,`${this.storageKey}-code-verifier`,N),m=await Oa(N),b=N===m?"plain":"s256"}const{error:y}=await Fe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:f,data:(l=x==null?void 0:x.data)!==null&&l!==void 0?l:{},create_user:(i=x==null?void 0:x.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:x==null?void 0:x.captchaToken},code_challenge:m,code_challenge_method:b},redirectTo:x==null?void 0:x.emailRedirectTo});return{data:{user:null,session:null},error:y}}if("phone"in t){const{phone:f,options:x}=t,{data:m,error:b}=await Fe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:f,data:(o=x==null?void 0:x.data)!==null&&o!==void 0?o:{},create_user:(c=x==null?void 0:x.shouldCreateUser)!==null&&c!==void 0?c:!0,gotrue_meta_security:{captcha_token:x==null?void 0:x.captchaToken},channel:(u=x==null?void 0:x.channel)!==null&&u!==void 0?u:"sms"}});return{data:{user:null,session:null,messageId:m==null?void 0:m.message_id},error:b}}throw new Fo("You must provide either an email or phone number.")}catch(f){if(Be(f))return{data:{user:null,session:null},error:f};throw f}}async verifyOtp(t){var l,i;try{t.type!=="email_change"&&t.type!=="phone_change"&&await this._removeSession();let o,c;"options"in t&&(o=(l=t.options)===null||l===void 0?void 0:l.redirectTo,c=(i=t.options)===null||i===void 0?void 0:i.captchaToken);const{data:u,error:f}=await Fe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:c}}),redirectTo:o,xform:Ul});if(f)throw f;if(!u)throw new Error("An error occurred on token verification.");const x=u.session,m=u.user;return x!=null&&x.access_token&&(await this._saveSession(x),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",x)),{data:{user:m,session:x},error:null}}catch(o){if(Be(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithSSO(t){var l,i,o;try{await this._removeSession();let c=null,u=null;if(this.flowType==="pkce"){const f=qa();await Ll(this.storage,`${this.storageKey}-code-verifier`,f),c=await Oa(f),u=f===c?"plain":"s256"}return await Fe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(i=(l=t.options)===null||l===void 0?void 0:l.redirectTo)!==null&&i!==void 0?i:void 0}),!((o=t==null?void 0:t.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:c,code_challenge_method:u}),headers:this.headers,xform:AT})}catch(c){if(Be(c))return{data:null,error:c};throw c}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:l},error:i}=t;if(i)throw i;if(!l)throw new Ga;const{error:o}=await Fe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:l.access_token});return{data:{user:null,session:null},error:o}})}catch(t){if(Be(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{t.type!="email_change"&&t.type!="phone_change"&&await this._removeSession();const l=`${this.url}/resend`;if("email"in t){const{email:i,type:o,options:c}=t,{error:u}=await Fe(this.fetch,"POST",l,{headers:this.headers,body:{email:i,type:o,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:u}}else if("phone"in t){const{phone:i,type:o,options:c}=t,{data:u,error:f}=await Fe(this.fetch,"POST",l,{headers:this.headers,body:{phone:i,type:o,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:f}}throw new Fo("You must provide either an email or phone number and a type")}catch(l){if(Be(l))return{data:{user:null,session:null},error:l};throw l}}async getSession(){return await this.initializePromise,this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(t,l){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await i,await l()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=l();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const l=await this.__loadSession();return await t(l)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const l=await Vo(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",l),l!==null&&(this._isValidSession(l)?t=l:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const i=t.expires_at?t.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",t.expires_at),!i)return{data:{session:t},error:null};const{session:o,error:c}=await this._callRefreshToken(t.refresh_token);return c?{data:{session:null},error:c}:{data:{session:o},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await Fe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:rl}):await this._useSession(async l=>{var i,o;const{data:c,error:u}=l;if(u)throw u;return await Fe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(i=c.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0,xform:rl})})}catch(l){if(Be(l))return{data:{user:null},error:l};throw l}}async updateUser(t,l={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,l))}async _updateUser(t,l={}){try{return await this._useSession(async i=>{const{data:o,error:c}=i;if(c)throw c;if(!o.session)throw new Ga;const u=o.session;let f=null,x=null;if(this.flowType==="pkce"&&t.email!=null){const y=qa();await Ll(this.storage,`${this.storageKey}-code-verifier`,y),f=await Oa(y),x=y===f?"plain":"s256"}const{data:m,error:b}=await Fe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:l==null?void 0:l.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:f,code_challenge_method:x}),jwt:u.access_token,xform:rl});if(b)throw b;return u.user=m.user,await this._saveSession(u),await this._notifyAllSubscribers("USER_UPDATED",u),{data:{user:u.user},error:null}})}catch(i){if(Be(i))return{data:{user:null},error:i};throw i}}_decodeJWT(t){return Ug(t)}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Ga;const l=Date.now()/1e3;let i=l,o=!0,c=null;const u=Ug(t.access_token);if(u.exp&&(i=u.exp,o=i<=l),o){const{session:f,error:x}=await this._callRefreshToken(t.refresh_token);if(x)return{data:{user:null,session:null},error:x};if(!f)return{data:{user:null,session:null},error:null};c=f}else{const{data:f,error:x}=await this._getUser(t.access_token);if(x)throw x;c={access_token:t.access_token,refresh_token:t.refresh_token,user:f.user,token_type:"bearer",expires_in:i-l,expires_at:i},await this._saveSession(c),await this._notifyAllSubscribers("SIGNED_IN",c)}return{data:{user:c.user,session:c},error:null}}catch(l){if(Be(l))return{data:{session:null,user:null},error:l};throw l}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async l=>{var i;if(!t){const{data:u,error:f}=l;if(f)throw f;t=(i=u.session)!==null&&i!==void 0?i:void 0}if(!(t!=null&&t.refresh_token))throw new Ga;const{session:o,error:c}=await this._callRefreshToken(t.refresh_token);return c?{data:{user:null,session:null},error:c}:o?{data:{user:o.user,session:o},error:null}:{data:{user:null,session:null},error:null}})}catch(l){if(Be(l))return{data:{user:null,session:null},error:l};throw l}}async _getSessionFromURL(t){try{if(!$s())throw new Jo("No browser detected.");if(this.flowType==="implicit"&&!this._isImplicitGrantFlow())throw new Jo("Not a valid implicit grant flow url.");if(this.flowType=="pkce"&&!t)throw new Pg("Not a valid PKCE flow url.");const l=qu(window.location.href);if(t){if(!l.code)throw new Pg("No code detected.");const{data:O,error:z}=await this._exchangeCodeForSession(l.code);if(z)throw z;const K=new URL(window.location.href);return K.searchParams.delete("code"),window.history.replaceState(window.history.state,"",K.toString()),{data:{session:O.session,redirectType:null},error:null}}if(l.error||l.error_description||l.error_code)throw new Jo(l.error_description||"Error in URL with unspecified error_description",{error:l.error||"unspecified_error",code:l.error_code||"unspecified_code"});const{provider_token:i,provider_refresh_token:o,access_token:c,refresh_token:u,expires_in:f,expires_at:x,token_type:m}=l;if(!c||!f||!u||!m)throw new Jo("No session defined in URL");const b=Math.round(Date.now()/1e3),y=parseInt(f);let N=b+y;x&&(N=parseInt(x));const C=N-b;C*1e3<=dr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${C}s, should have been closer to ${y}s`);const A=N-y;b-A>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",A,N,b):b-A<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clok for skew",A,N,b);const{data:E,error:R}=await this._getUser(c);if(R)throw R;const P={provider_token:i,provider_refresh_token:o,access_token:c,expires_in:y,expires_at:N,refresh_token:u,token_type:m,user:E.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:P,redirectType:l.type},error:null}}catch(l){if(Be(l))return{data:{session:null,redirectType:null},error:l};throw l}}_isImplicitGrantFlow(){const t=qu(window.location.href);return!!($s()&&(t.access_token||t.error_description))}async _isPKCEFlow(){const t=qu(window.location.href),l=await Vo(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&l)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async l=>{var i;const{data:o,error:c}=l;if(c)return{error:c};const u=(i=o.session)===null||i===void 0?void 0:i.access_token;if(u){const{error:f}=await this.admin.signOut(u,t);if(f&&!(_T(f)&&(f.status===404||f.status===401)))return{error:f}}return t!=="others"&&(await this._removeSession(),await Ou(this.storage,`${this.storageKey}-code-verifier`),await this._notifyAllSubscribers("SIGNED_OUT",null)),{error:null}})}onAuthStateChange(t){const l=mT(),i={id:l,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",l),this.stateChangeEmitters.delete(l)}};return this._debug("#onAuthStateChange()","registered callback with id",l),this.stateChangeEmitters.set(l,i),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(l)})))(),{data:{subscription:i}}}async _emitInitialSession(t){return await this._useSession(async l=>{var i,o;try{const{data:{session:c},error:u}=l;if(u)throw u;await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",c)),this._debug("INITIAL_SESSION","callback id",t,"session",c)}catch(c){await((o=this.stateChangeEmitters.get(t))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",c),console.error(c)}})}async resetPasswordForEmail(t,l={}){let i=null,o=null;if(this.flowType==="pkce"){const c=qa();await Ll(this.storage,`${this.storageKey}-code-verifier`,`${c}/PASSWORD_RECOVERY`),i=await Oa(c),o=c===i?"plain":"s256"}try{return await Fe(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:i,code_challenge_method:o,gotrue_meta_security:{captcha_token:l.captchaToken}},headers:this.headers,redirectTo:l.redirectTo})}catch(c){if(Be(c))return{data:null,error:c};throw c}}async getUserIdentities(){var t;try{const{data:l,error:i}=await this.getUser();if(i)throw i;return{data:{identities:(t=l.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(l){if(Be(l))return{data:null,error:l};throw l}}async linkIdentity(t){var l;try{const{data:i,error:o}=await this._useSession(async c=>{var u,f,x,m,b;const{data:y,error:N}=c;if(N)throw N;const C=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(u=t.options)===null||u===void 0?void 0:u.redirectTo,scopes:(f=t.options)===null||f===void 0?void 0:f.scopes,queryParams:(x=t.options)===null||x===void 0?void 0:x.queryParams,skipBrowserRedirect:!0});return await Fe(this.fetch,"GET",C,{headers:this.headers,jwt:(b=(m=y.session)===null||m===void 0?void 0:m.access_token)!==null&&b!==void 0?b:void 0})});if(o)throw o;return $s()&&!(!((l=t.options)===null||l===void 0)&&l.skipBrowserRedirect)&&window.location.assign(i==null?void 0:i.url),{data:{provider:t.provider,url:i==null?void 0:i.url},error:null}}catch(i){if(Be(i))return{data:{provider:t.provider,url:null},error:i};throw i}}async unlinkIdentity(t){try{return await this._useSession(async l=>{var i,o;const{data:c,error:u}=l;if(u)throw u;return await Fe(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(o=(i=c.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0})})}catch(l){if(Be(l))return{data:null,error:l};throw l}}async _refreshAccessToken(t){const l=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(l,"begin");try{const i=Date.now();return await vT(async o=>(await bT(o*200),this._debug(l,"refreshing attempt",o),await Fe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Ul})),(o,c,u)=>u&&u.error&&Hu(u.error)&&Date.now()+(o+1)*200-i<dr)}catch(i){if(this._debug(l,"error",i),Be(i))return{data:{session:null,user:null},error:i};throw i}finally{this._debug(l,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,l){const i=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:l.redirectTo,scopes:l.scopes,queryParams:l.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",l,"url",i),$s()&&!l.skipBrowserRedirect&&window.location.assign(i),{data:{provider:t,url:i},error:null}}async _recoverAndRefresh(){var t;const l="#_recoverAndRefresh()";this._debug(l,"begin");try{const i=await Vo(this.storage,this.storageKey);if(this._debug(l,"session from storage",i),!this._isValidSession(i)){this._debug(l,"session is not valid"),i!==null&&await this._removeSession();return}const o=Math.round(Date.now()/1e3),c=((t=i.expires_at)!==null&&t!==void 0?t:1/0)<o+Og;if(this._debug(l,`session has${c?"":" not"} expired with margin of ${Og}s`),c){if(this.autoRefreshToken&&i.refresh_token){const{error:u}=await this._callRefreshToken(i.refresh_token);u&&(console.error(u),Hu(u)||(this._debug(l,"refresh failed with a non-retryable error, removing the session",u),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(l,"error",i),console.error(i);return}finally{this._debug(l,"end")}}async _callRefreshToken(t){var l,i;if(!t)throw new Ga;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new bc;const{data:c,error:u}=await this._refreshAccessToken(t);if(u)throw u;if(!c.session)throw new Ga;await this._saveSession(c.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",c.session);const f={session:c.session,error:null};return this.refreshingDeferred.resolve(f),f}catch(c){if(this._debug(o,"error",c),Be(c)){const u={session:null,error:c};return Hu(c)||(await this._removeSession(),await this._notifyAllSubscribers("SIGNED_OUT",null)),(l=this.refreshingDeferred)===null||l===void 0||l.resolve(u),u}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(c),c}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(t,l,i=!0){const o=`#_notifyAllSubscribers(${t})`;this._debug(o,"begin",l,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:t,session:l});const c=[],u=Array.from(this.stateChangeEmitters.values()).map(async f=>{try{await f.callback(t,l)}catch(x){c.push(x)}});if(await Promise.all(u),c.length>0){for(let f=0;f<c.length;f+=1)console.error(c[f]);throw c[0]}}finally{this._debug(o,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),await Ll(this.storage,this.storageKey,t)}async _removeSession(){this._debug("#_removeSession()"),await Ou(this.storage,this.storageKey)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&$s()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(l){console.error("removing visibilitychange callback failed",l)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),dr);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async l=>{const{data:{session:i}}=l;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((i.expires_at*1e3-t)/dr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${dr}ms, refresh threshold is ${Hg} ticks`),o<=Hg&&await this._callRefreshToken(i.refresh_token)})}catch(l){console.error("Auto refresh tick failed with error. This is likely a transient error.",l)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof wv)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!$s()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const l=`#_onVisibilityChanged(${t})`;this._debug(l,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(l,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,l,i){const o=[`provider=${encodeURIComponent(l)}`];if(i!=null&&i.redirectTo&&o.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i!=null&&i.scopes&&o.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const c=qa();await Ll(this.storage,`${this.storageKey}-code-verifier`,c);const u=await Oa(c),f=c===u?"plain":"s256";this._debug("PKCE","code verifier",`${c.substring(0,5)}...`,"code challenge",u,"method",f);const x=new URLSearchParams({code_challenge:`${encodeURIComponent(u)}`,code_challenge_method:`${encodeURIComponent(f)}`});o.push(x.toString())}if(i!=null&&i.queryParams){const c=new URLSearchParams(i.queryParams);o.push(c.toString())}return i!=null&&i.skipBrowserRedirect&&o.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${t}?${o.join("&")}`}async _unenroll(t){try{return await this._useSession(async l=>{var i;const{data:o,error:c}=l;return c?{data:null,error:c}:await Fe(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(i=o==null?void 0:o.session)===null||i===void 0?void 0:i.access_token})})}catch(l){if(Be(l))return{data:null,error:l};throw l}}async _enroll(t){try{return await this._useSession(async l=>{var i,o;const{data:c,error:u}=l;if(u)return{data:null,error:u};const{data:f,error:x}=await Fe(this.fetch,"POST",`${this.url}/factors`,{body:{friendly_name:t.friendlyName,factor_type:t.factorType,issuer:t.issuer},headers:this.headers,jwt:(i=c==null?void 0:c.session)===null||i===void 0?void 0:i.access_token});return x?{data:null,error:x}:(!((o=f==null?void 0:f.totp)===null||o===void 0)&&o.qr_code&&(f.totp.qr_code=`data:image/svg+xml;utf-8,${f.totp.qr_code}`),{data:f,error:null})})}catch(l){if(Be(l))return{data:null,error:l};throw l}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async l=>{var i;const{data:o,error:c}=l;if(c)return{data:null,error:c};const{data:u,error:f}=await Fe(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(i=o==null?void 0:o.session)===null||i===void 0?void 0:i.access_token});return f?{data:null,error:f}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),{data:u,error:f})})}catch(l){if(Be(l))return{data:null,error:l};throw l}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async l=>{var i;const{data:o,error:c}=l;return c?{data:null,error:c}:await Fe(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{headers:this.headers,jwt:(i=o==null?void 0:o.session)===null||i===void 0?void 0:i.access_token})})}catch(l){if(Be(l))return{data:null,error:l};throw l}})}async _challengeAndVerify(t){const{data:l,error:i}=await this._challenge({factorId:t.factorId});return i?{data:null,error:i}:await this._verify({factorId:t.factorId,challengeId:l.id,code:t.code})}async _listFactors(){const{data:{user:t},error:l}=await this.getUser();if(l)return{data:null,error:l};const i=(t==null?void 0:t.factors)||[],o=i.filter(c=>c.factor_type==="totp"&&c.status==="verified");return{data:{all:i,totp:o},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var l,i;const{data:{session:o},error:c}=t;if(c)return{data:null,error:c};if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const u=this._decodeJWT(o.access_token);let f=null;u.aal&&(f=u.aal);let x=f;((i=(l=o.user.factors)===null||l===void 0?void 0:l.filter(y=>y.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(x="aal2");const b=u.amr||[];return{data:{currentLevel:f,nextLevel:x,currentAuthenticationMethods:b},error:null}}))}}wr.nextInstanceID=0;class BT extends wr{constructor(t){super(t)}}var VT=function(n,t,l,i){function o(c){return c instanceof l?c:new l(function(u){u(c)})}return new(l||(l=Promise))(function(c,u){function f(b){try{m(i.next(b))}catch(y){u(y)}}function x(b){try{m(i.throw(b))}catch(y){u(y)}}function m(b){b.done?c(b.value):o(b.value).then(f,x)}m((i=i.apply(n,t||[])).next())})};class FT{constructor(t,l,i){var o,c,u,f,x,m,b,y;if(this.supabaseUrl=t,this.supabaseKey=l,!t)throw new Error("supabaseUrl is required.");if(!l)throw new Error("supabaseKey is required.");const N=hT(t);this.realtimeUrl=`${N}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${N}/auth/v1`,this.storageUrl=`${N}/storage/v1`,this.functionsUrl=`${N}/functions/v1`;const C=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,A={db:aT,realtime:rT,auth:Object.assign(Object.assign({},iT),{storageKey:C}),global:lT},E=fT(i??{},A);this.storageKey=(c=(o=E.auth)===null||o===void 0?void 0:o.storageKey)!==null&&c!==void 0?c:"",this.headers=(f=(u=E.global)===null||u===void 0?void 0:u.headers)!==null&&f!==void 0?f:{},this.auth=this._initSupabaseAuthClient((x=E.auth)!==null&&x!==void 0?x:{},this.headers,(m=E.global)===null||m===void 0?void 0:m.fetch),this.fetch=uT(l,this._getAccessToken.bind(this),(b=E.global)===null||b===void 0?void 0:b.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},E.realtime)),this.rest=new Lh(`${N}/rest/v1`,{headers:this.headers,schema:(y=E.db)===null||y===void 0?void 0:y.schema,fetch:this.fetch}),this._listenForAuthEvents()}get functions(){return new bE(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new tT(this.storageUrl,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,l={},i={}){return this.rest.rpc(t,l,i)}channel(t,l={config:{}}){return this.realtime.channel(t,l)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,l;return VT(this,void 0,void 0,function*(){const{data:i}=yield this.auth.getSession();return(l=(t=i.session)===null||t===void 0?void 0:t.access_token)!==null&&l!==void 0?l:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:l,detectSessionInUrl:i,storage:o,storageKey:c,flowType:u,debug:f},x,m){const b={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new BT({url:this.authUrl,headers:Object.assign(Object.assign({},b),x),storageKey:c,autoRefreshToken:t,persistSession:l,detectSessionInUrl:i,storage:o,flowType:u,debug:f,fetch:m})}_initRealtimeClient(t){return new GE(this.realtimeUrl,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((l,i)=>{this._handleTokenChanged(l,"CLIENT",i==null?void 0:i.access_token)})}_handleTokenChanged(t,l,i){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==i?(this.realtime.setAuth(i??null),this.changedAccessToken=i):t==="SIGNED_OUT"&&(this.realtime.setAuth(this.supabaseKey),l=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const JT=(n,t,l)=>new FT(n,t,l);var _v={};const Bu=_v.VITE_SUPABASE_URL||"https://ujcnhgjuttusqavhxjnb.supabase.co",Yo=_v.VITE_SUPABASE_ANON_KEY||"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVqY25oZ2p1dHR1c3Fhdmh4am5iIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ5NDY4NDksImV4cCI6MjA4MDUyMjg0OX0.jejG8c2HTTIMd53shlX5mmgNAF9D8H98Z0x5VYeH22c";let Vu=null;const YT=()=>{if(!(Bu.trim()!==""&&!Bu.includes("_")&&Yo&&Yo.trim()!==""&&!Yo.includes("_")))return null;try{return Vu||(Vu=JT(Bu,Yo,{auth:{persistSession:!0,autoRefreshToken:!0}})),Vu}catch(t){return console.error("Failed to initialize Supabase client:",t),null}},$e=YT(),uc=()=>!!$e,Vg=async()=>{var n;if(!$e)return null;try{const{data:{user:t}}=await $e.auth.getUser();return(n=t==null?void 0:t.user_metadata)!=null&&n.script_url?t.user_metadata.script_url:null}catch(t){return console.error("Failed to fetch script URL",t),null}},KT=async n=>{if($e)try{await $e.auth.updateUser({data:{script_url:n}})}catch(t){console.error("Failed to save script URL",t)}},QT=async n=>{if(!$e)return{error:{message:"   "}};try{const{data:t,error:l}=await $e.auth.updateUser({password:n});return{data:t,error:l}}catch(t){return{error:t}}},Sv=async()=>{if(!$e)return[];try{const{data:n,error:t}=await $e.from("public_seminars").select("*").order("created_at",{ascending:!1});if(t)throw t;return n}catch(n){return console.error("Error fetching seminars:",n),[]}},XT=async n=>{if(!$e)return{error:{message:" "}};try{const{data:t,error:l}=await $e.from("public_seminars").insert([n]).select();return{data:t,error:l}}catch(t){return{error:t}}},ZT=async n=>{if(!$e)return{error:{message:" "}};try{const{error:t}=await $e.from("public_seminars").delete().eq("id",n);return{error:t}}catch(t){return{error:t}}},WT={monthly:"http://pay.chargily.com/payment-links/01kc71nw4ehq618fjxm23p27ky",quarterly:"http://pay.chargily.com/payment-links/01kc71mrzv8pkcp5wx9cdq0zxq",yearly:"http://pay.chargily.com/payment-links/01kc71j23b103gw269bcmwf7kg"},Fg=async()=>{if(!$e)return null;try{const{data:{user:n}}=await $e.auth.getUser();if(!n)return null;const{data:t,error:l}=await $e.from("profiles").select("*").eq("id",n.id).single();return l?(console.error("Error fetching profile:",l),null):t}catch(n){return console.error("Exception in getUserProfile:",n),null}},Jg=n=>{if(!n)return{isGold:!1,isTrial:!1,daysLeft:0,status:"expired"};if(n.subscription_status==="manual_pending")return{isGold:!1,isTrial:!1,daysLeft:0,status:"pending"};const t=new Date;if(n.subscription_status==="active"&&n.subscription_ends_at){const l=new Date(n.subscription_ends_at);if(t<l)return{isGold:!0,isTrial:!1,daysLeft:Math.ceil((l.getTime()-t.getTime())/864e5),status:"gold"}}if(n.trial_ends_at){const l=new Date(n.trial_ends_at);if(t<l)return{isGold:!1,isTrial:!0,daysLeft:Math.ceil((l.getTime()-t.getTime())/864e5),status:"trial"}}return{isGold:!1,isTrial:!1,daysLeft:0,status:"expired"}},eA=async n=>{const t=WT[n];return t.includes("LINK_HERE")?{success:!1,message:"     .    ."}:{success:!0,url:t}},tA=async(n,t)=>{if(!$e)return{success:!1,message:"    "};try{const{data:{user:l}}=await $e.auth.getUser();if(!l)return{success:!1,message:"   "};const i=n.name.split(".").pop(),o=`${l.id}_${Date.now()}.${i}`,{data:c,error:u}=await $e.storage.from("receipts").upload(o,n);if(u)throw u;const{data:{publicUrl:f}}=$e.storage.from("receipts").getPublicUrl(o),{error:x}=await $e.from("profiles").update({subscription_status:"manual_pending",plan_type:t,payment_receipt_url:f}).eq("id",l.id);if(x)throw x;return{success:!0}}catch(l){return console.error("Manual Payment Error:",l),{success:!1,message:l.message}}},sA=async()=>{if(!$e)return[];try{const{data:n,error:t}=await $e.from("profiles").select("*").eq("subscription_status","manual_pending");if(t)throw t;return n}catch(n){return console.error("Fetch Pending Error:",n),[]}},nA=async(n,t)=>{if($e)try{const{data:l,error:i}=await $e.from("profiles").select("subscription_status, subscription_ends_at").eq("id",n).single();if(i)throw i;const o=new Date;let c=o;if(l.subscription_ends_at){const b=new Date(l.subscription_ends_at);b.getTime()>o.getTime()&&(c=b)}const u=new Date(c);t==="monthly"?u.setMonth(u.getMonth()+1):t==="quarterly"?u.setMonth(u.getMonth()+3):t==="yearly"&&u.setFullYear(u.getFullYear()+1);let f=t;const x=Math.ceil((u.getTime()-o.getTime())/(1e3*60*60*24));x>300?f="yearly":x>80&&(f="quarterly");const{error:m}=await $e.from("profiles").update({subscription_status:"active",subscription_ends_at:u.toISOString(),plan_type:f}).eq("id",n);if(m)throw m;return{success:!0}}catch(l){return console.error("Approve Error:",l),{success:!1}}},lA=async n=>{if($e)try{const{data:t}=await $e.from("profiles").select("subscription_ends_at").eq("id",n).single();let l="expired";t!=null&&t.subscription_ends_at&&new Date(t.subscription_ends_at)>new Date&&(l="active");const{error:i}=await $e.from("profiles").update({subscription_status:l}).eq("id",n);if(i)throw i;return{success:!0}}catch(t){return console.error("Reject Error:",t),{success:!1}}},aA=({isOpen:n,onClose:t,onUpgrade:l,userStatus:i})=>{const[o,c]=k.useState("yearly"),[u,f]=k.useState("chargily"),[x,m]=k.useState("ccp"),[b,y]=k.useState(!1),[N,C]=k.useState(null),[A,E]=k.useState(null),[R,P]=k.useState(null),O=k.useRef(null);if(!n)return null;const z=i==="gold",K={holder:"  ",number:"0042568209",key:"56"},G="00799999004256820956",F=(q,J)=>{navigator.clipboard.writeText(q),P(J),setTimeout(()=>P(null),2e3)},$=async()=>{if(y(!0),E(null),u==="chargily"){const q=await eA(o);q.url?(window.open(q.url,"_blank","noopener,noreferrer"),E({type:"success",text:"      .      ."})):E({type:"error",text:q.message||"     "})}else{if(!N){E({type:"error",text:"      ."}),y(!1);return}const q=await tA(N,o);q.success?(E({type:"success",text:"   !      ."}),setTimeout(()=>{l()},4e3)):E({type:"error",text:q.message||"      ."})}y(!1)},B=q=>{q.target.files&&q.target.files[0]&&C(q.target.files[0])};return e.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-slate-900/80 backdrop-blur-sm animate-in fade-in duration-200 overflow-y-auto",children:e.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-5xl overflow-hidden relative animate-in zoom-in-95 duration-300 flex flex-col md:flex-row my-8 max-h-[90vh]",children:[e.jsx("button",{onClick:t,className:"absolute top-4 left-4 text-slate-400 hover:text-slate-600 z-20 p-2 bg-white/50 hover:bg-white rounded-full transition-all",children:e.jsx(Ze,{size:24})}),e.jsxs("div",{className:"w-full md:w-1/3 bg-slate-900 text-white p-8 relative overflow-hidden flex flex-col justify-between shrink-0",children:[e.jsx("div",{className:"absolute top-0 right-0 p-10 opacity-10",children:z?e.jsx(Nr,{size:200}):e.jsx(ec,{size:200})}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("div",{className:`w-16 h-16 rounded-2xl flex items-center justify-center mb-6 shadow-lg ${z?"bg-gradient-to-br from-emerald-400 to-teal-600 shadow-emerald-500/20":"bg-gradient-to-br from-amber-400 to-orange-600 shadow-amber-500/20"}`,children:z?e.jsx(Nr,{size:32,className:"text-white"}):e.jsx(ec,{size:32,className:"text-white",fill:"currentColor"})}),e.jsx("h2",{className:`text-3xl font-bold mb-2 font-serif ${z?"text-emerald-400":"text-amber-400"}`,children:z?" ":" "}),e.jsx("p",{className:"text-slate-300 text-sm mb-8 leading-relaxed font-light",children:z?" .          .":"          ."}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"bg-emerald-500/20 p-1.5 rounded-full text-emerald-400 mt-0.5",children:e.jsx(gs,{size:14,strokeWidth:3})}),e.jsx("p",{className:"text-sm text-slate-200",children:"    ."})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"bg-emerald-500/20 p-1.5 rounded-full text-emerald-400 mt-0.5",children:e.jsx(gs,{size:14,strokeWidth:3})}),e.jsx("p",{className:"text-sm text-slate-200",children:"    (AI)."})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"bg-emerald-500/20 p-1.5 rounded-full text-emerald-400 mt-0.5",children:e.jsx(gs,{size:14,strokeWidth:3})}),e.jsx("p",{className:"text-sm text-slate-200",children:"   ( )."})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"bg-emerald-500/20 p-1.5 rounded-full text-emerald-400 mt-0.5",children:e.jsx(gs,{size:14,strokeWidth:3})}),e.jsx("p",{className:"text-sm text-slate-200",children:"  ."})]})]})]}),e.jsxs("div",{className:"mt-8 pt-6 border-t border-white/10 relative z-10",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-400 mb-4",children:[e.jsx(Er,{size:14}),e.jsx("span",{children:"  100% "})]}),e.jsx("div",{className:`text-xs font-bold px-3 py-1.5 rounded-lg text-center border ${z?"bg-emerald-500/20 text-emerald-200 border-emerald-500/30":"bg-white/10 text-amber-200 border-white/10"}`,children:i==="gold"?"   ( )":i==="trial"?"    ":i==="expired"?"  ":i==="pending"?"  ":""})]})]}),e.jsxs("div",{className:"w-full md:w-2/3 p-6 md:p-8 bg-slate-50 overflow-y-auto custom-scrollbar",children:[e.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-6 text-center",children:z?"   ":"   "}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:[e.jsxs("div",{onClick:()=>c("monthly"),className:`relative p-4 rounded-xl border-2 cursor-pointer transition-all text-center group ${o==="monthly"?"border-blue-600 bg-white shadow-lg shadow-blue-100 ring-1 ring-blue-600":"border-slate-200 bg-white hover:border-blue-300"}`,children:[e.jsx("p",{className:"font-bold text-slate-700 mb-2",children:" "}),e.jsx("p",{className:"text-2xl font-black text-blue-600 mb-1",children:"700 "}),e.jsx("p",{className:"text-[10px] text-slate-400",children:"  "})]}),e.jsxs("div",{onClick:()=>c("quarterly"),className:`relative p-4 rounded-xl border-2 cursor-pointer transition-all text-center group ${o==="quarterly"?"border-indigo-600 bg-white shadow-lg shadow-indigo-100 ring-1 ring-indigo-600":"border-slate-200 bg-white hover:border-indigo-300"}`,children:[e.jsx("div",{className:"absolute -top-2.5 left-1/2 -translate-x-1/2 bg-indigo-600 text-white text-[10px] font-bold px-3 py-0.5 rounded-full shadow-sm whitespace-nowrap",children:" "}),e.jsx("p",{className:"font-bold text-slate-700 mb-2",children:"3  "}),e.jsx("p",{className:"text-2xl font-black text-indigo-600 mb-1",children:"1800 "}),e.jsx("p",{className:"text-[10px] text-slate-400",children:"600 / ( 300 )"})]}),e.jsxs("div",{onClick:()=>c("yearly"),className:`relative p-4 rounded-xl border-2 cursor-pointer transition-all text-center group ${o==="yearly"?"border-amber-500 bg-amber-50/20 shadow-lg shadow-amber-100 ring-1 ring-amber-500":"border-slate-200 bg-white hover:border-amber-300"}`,children:[e.jsxs("div",{className:"absolute -top-2.5 left-1/2 -translate-x-1/2 bg-amber-500 text-white text-[10px] font-bold px-3 py-0.5 rounded-full shadow-sm whitespace-nowrap flex items-center gap-1",children:[e.jsx(Ib,{size:10,fill:"currentColor"}),"  "]}),e.jsx("p",{className:"font-bold text-slate-700 mb-2",children:" "}),e.jsx("p",{className:"text-2xl font-black text-amber-600 mb-1",children:"4500 "}),e.jsx("p",{className:"text-[10px] text-slate-400",children:"375 / ( )"})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-1 flex mb-6 shadow-sm",children:[e.jsxs("button",{onClick:()=>f("chargily"),className:`flex-1 py-3 rounded-lg text-sm font-bold flex items-center justify-center gap-2 transition-all ${u==="chargily"?"bg-slate-800 text-white shadow-md":"text-slate-500 hover:bg-slate-50"}`,children:[e.jsx(gb,{size:16}),"   / CIB"]}),e.jsxs("button",{onClick:()=>f("manual"),className:`flex-1 py-3 rounded-lg text-sm font-bold flex items-center justify-center gap-2 transition-all ${u==="manual"?"bg-slate-800 text-white shadow-md":"text-slate-500 hover:bg-slate-50"}`,children:[e.jsx(ii,{size:16}),"   (CCP/RIP)"]})]}),e.jsx("div",{className:"mb-6 animate-in fade-in slide-in-from-bottom-2 duration-300",children:u==="chargily"?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-4 flex items-start gap-3 text-right animate-in slide-in-from-top-2",children:[e.jsx(ys,{className:"text-amber-600 shrink-0 mt-0.5",size:20}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-amber-800 font-bold text-sm mb-1",children:"   :"}),e.jsxs("p",{className:"text-amber-700 text-xs leading-relaxed",children:["     ",e.jsx("strong",{children:"  "}),"     .",e.jsx("br",{}),"                 ."]})]})]}),e.jsxs("div",{className:"text-center p-8 bg-slate-50 rounded-xl border-2 border-dashed border-slate-300 flex flex-col items-center justify-center gap-4 hover:bg-slate-100 transition-colors",children:[e.jsx("img",{src:"https://pay.chargily.com/test/images/logo.svg",alt:"Chargily Pay",className:"h-12 w-auto mb-2 opacity-90"}),e.jsxs("div",{className:"text-sm text-slate-600 max-w-sm",children:[e.jsx("p",{className:"font-bold mb-1",children:"  "}),e.jsx("p",{className:"text-xs",children:"       Chargily ."})]}),e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsx("div",{className:"h-6 w-10 bg-white rounded border flex items-center justify-center shadow-sm",children:e.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/1/16/Former_Visa_%28company%29_logo.svg/300px-Former_Visa_%28company%29_logo.svg.png",className:"h-2 object-contain",alt:""})}),e.jsx("div",{className:"h-6 w-10 bg-white rounded border flex items-center justify-center shadow-sm",children:e.jsx("span",{className:"text-[8px] font-bold text-blue-800",children:"CIB"})}),e.jsx("div",{className:"h-6 w-10 bg-white rounded border flex items-center justify-center shadow-sm",children:e.jsx("span",{className:"text-[8px] font-bold text-yellow-600",children:"EDAHABIA"})})]})]})]}):e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden",children:[e.jsxs("div",{className:"flex border-b border-slate-100 bg-slate-50/50",children:[e.jsx("button",{onClick:()=>m("ccp"),className:`flex-1 py-2 text-xs font-bold ${x==="ccp"?"text-blue-600 border-b-2 border-blue-600 bg-white":"text-slate-500 hover:text-slate-700"}`,children:"  (CCP)"}),e.jsx("button",{onClick:()=>m("baridimob"),className:`flex-1 py-2 text-xs font-bold ${x==="baridimob"?"text-indigo-600 border-b-2 border-indigo-600 bg-white":"text-slate-500 hover:text-slate-700"}`,children:"BaridiMob (RIP)"})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[x==="ccp"?e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-xs text-slate-500 font-bold mb-2",children:"    :"}),e.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg border border-blue-100 flex items-center justify-between",children:[e.jsxs("span",{className:"text-xs text-blue-800 font-bold",children:[": ",K.holder]}),e.jsx("button",{onClick:()=>F(K.holder,"holder"),className:"text-blue-400 hover:text-blue-600",children:e.jsx(Ol,{size:14})})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg border border-blue-100 flex-1 flex items-center justify-between",children:[e.jsxs("span",{className:"text-xs text-blue-800 font-mono font-bold",children:["CCP: ",K.number]}),e.jsx("button",{onClick:()=>F(K.number,"ccp"),className:"text-blue-400 hover:text-blue-600",children:e.jsx(Ol,{size:14})})]}),e.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg border border-blue-100 w-24 flex items-center justify-between",children:[e.jsxs("span",{className:"text-xs text-blue-800 font-mono font-bold",children:["Cl: ",K.key]}),e.jsx("button",{onClick:()=>F(K.key,"key"),className:"text-blue-400 hover:text-blue-600",children:e.jsx(Ol,{size:14})})]})]})]}):e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-xs text-slate-500 font-bold mb-2",children:"   BaridiMob   RIP :"}),e.jsxs("div",{className:"bg-indigo-50 p-4 rounded-lg border border-indigo-100 flex items-center justify-between text-center",children:[e.jsx("span",{className:"text-sm text-indigo-900 font-mono font-bold tracking-wider w-full select-all",children:G}),e.jsx("button",{onClick:()=>F(G,"rip"),className:"text-indigo-400 hover:text-indigo-600 ml-2",children:e.jsx(Ol,{size:16})})]})]}),R&&e.jsx("p",{className:"text-[10px] text-green-600 text-center mt-2 animate-pulse",children:" !"})]}),e.jsxs("div",{onClick:()=>{var q;return(q=O.current)==null?void 0:q.click()},className:`border-2 border-dashed rounded-xl p-4 text-center cursor-pointer transition-all ${N?"border-green-400 bg-green-50":"border-slate-300 bg-slate-50 hover:bg-slate-100"}`,children:[e.jsx("input",{type:"file",ref:O,className:"hidden",accept:"image/*",onChange:B}),N?e.jsxs("div",{className:"flex items-center justify-center gap-2 text-green-700 font-bold",children:[e.jsx(gs,{size:20}),e.jsx("span",{className:"truncate max-w-[200px]",children:N.name}),e.jsx("span",{className:"text-[10px] text-green-600 bg-white px-2 py-0.5 rounded-full shadow-sm",children:" "})]}):e.jsxs("div",{className:"flex flex-col items-center gap-2 text-slate-500",children:[e.jsx(ii,{size:24,className:"text-slate-400"}),e.jsx("span",{className:"font-bold text-xs",children:"    "})]})]})]})]})}),A&&e.jsxs("div",{className:`mb-4 p-3 rounded-lg text-sm font-bold flex items-start gap-2 ${A.type==="error"?"bg-red-50 text-red-600":"bg-emerald-50 text-emerald-700"}`,children:[A.type==="error"?e.jsx(Os,{size:18,className:"shrink-0 mt-0.5"}):e.jsx(gs,{size:18,className:"shrink-0 mt-0.5"}),e.jsx("span",{children:A.text})]}),e.jsx("button",{onClick:$,disabled:b,className:"w-full bg-slate-900 text-white font-bold py-4 rounded-xl shadow-lg hover:shadow-xl hover:scale-[1.01] transition-all flex items-center justify-center gap-3 disabled:opacity-70 disabled:cursor-not-allowed",children:b?e.jsx(ci,{className:"animate-spin",size:20}):u==="chargily"?"  ":z?" ":"  "}),e.jsxs("div",{className:"mt-6 text-center border-t border-slate-100 pt-4",children:[e.jsx("p",{className:"text-[10px] text-slate-400 mb-3",children:"     :"}),e.jsxs("div",{className:"flex justify-center gap-6 text-slate-400",children:[e.jsx("a",{href:"https://www.facebook.com/profile.php?id=61584959875720",target:"_blank",rel:"noopener noreferrer",className:"hover:text-blue-600 transition-colors",children:e.jsx(vb,{size:18})}),e.jsx("a",{href:"https://t.me/+5TbKaIJ_kgZhZDA0",target:"_blank",rel:"noopener noreferrer",className:"hover:text-sky-500 transition-colors",children:e.jsx(Db,{size:18})}),e.jsx("a",{href:"https://chat.whatsapp.com/HTIWa3WFjq41WtAyFGzaDb?mode=hqrc",target:"_blank",rel:"noopener noreferrer",className:"hover:text-green-500 transition-colors",children:e.jsx(Tb,{size:18})})]})]})]})]})})},Gl=async(n,t,l="SYNC_MAIN")=>{if(!n)throw new Error("   ");const i=JSON.stringify({action:l,data:t});try{const o=await fetch(n,{method:"POST",mode:"no-cors",headers:{"Content-Type":"text/plain"},body:i});return{success:!0}}catch(o){throw console.error("  :",o),new Error("   Google Sheet.    .")}},vr=async(n,t="READ_MAIN")=>{if(!n)throw new Error("   ");try{const l=await fetch(`${n}?action=${t}`,{method:"GET"});if(!l.ok)throw new Error(`HTTP error! status: ${l.status}`);return await l.json()}catch(l){throw console.error("   :",l),new Error("  .      'Anyone' ( ).")}},iA=({isOpen:n,onClose:t})=>{const[l,i]=k.useState("steps"),[o,c]=k.useState(0),[u,f]=k.useState(!1),x="https://www.youtube.com/embed/kJJvZm5hKX4",m=`
function doGet(e) {
  return handleRequest(e);
}

function doPost(e) {
  return handleRequest(e);
}

function handleRequest(e) {
  const lock = LockService.getScriptLock();
  lock.tryLock(30000);

  try {
    const ss = SpreadsheetApp.getActiveSpreadsheet();
    const postData = e.postData ? JSON.parse(e.postData.contents) : {};
    const action = e.parameter.action || postData.action || 'READ_MAIN';
    
    let sheetName = "  ";
    if (action.includes('ACQ')) sheetName = "   ";
    else if (action.includes('MAIL')) sheetName = "  (/)";
    else if (action.includes('SEMINARS')) sheetName = " ";

    let sheet = ss.getSheetByName(sheetName);
    if (!sheet) {
      sheet = ss.insertSheet(sheetName);
      sheet.setDirection(SpreadsheetApp.Direction.RIGHT_TO_LEFT);
    }

    // --- WRITE ACTIONS (SYNC) ---
    if (action.startsWith('SYNC_')) {
      const data = postData.data;
      
      // Special handling for Mail/Seminars which are arrays of objects
      let rows = [];
      if (action === 'SYNC_MAIL') {
          // Headers
          rows.push(["ID", "", "", "", "", "/ ", "", "", ""]);
          if (data && data.length > 0) {
            data.forEach(r => rows.push([r.id, r.type, r.year, r.number, r.date, r.correspondent, r.subject, r.reference || '', r.notes || '']));
          }
      } else if (action === 'SYNC_SEMINARS') {
          // Headers
          rows.push(["ID", "", "", "", "", "", " ", "", ""]);
          if (data && data.length > 0) {
            data.forEach(r => rows.push([r.id, r.topic, r.date, r.location, r.isExternalLocation, r.duration, JSON.stringify(r.targetLevels), r.supervisor, r.notes || '']));
          }
      } else if (action === 'SYNC_ACQ') {
          // ... Existing ACQ Logic (Simplified for brevity in update) ...
          // Re-using logic from previous version for ACQ if array of objects passed differently, 
          // or generic array handling if passed as rows.
          // Assuming ACQ passes rows or objects. If objects:
           if (sheet.getMaxColumns() < 10) sheet.insertColumnsAfter(sheet.getMaxColumns(), 10);
           const records = data;
           if (!records || records.length === 0) {
              if (sheet.getLastRow() === 0) {
                  sheet.appendRow(["ID", "", "", "", "_", "_JSON"]);
                  sheet.getRange(1, 1, 1, 6).setFontWeight("bold").setBackground("#e0f2fe");
              }
              return response({status: 'initialized'});
           }
           const existingData = sheet.getDataRange().getValues();
           const idMap = {};
           for (let i = 1; i < existingData.length; i++) { idMap[existingData[i][0]] = i + 1; }
           const recordsArray = Array.isArray(records) ? records : [records];
           recordsArray.forEach(rec => {
              if (rec.type === 'GLOBAL_RECORD' || rec.schoolName) {
                  const rowData = [rec.id, rec.schoolName, rec.className || '', rec.subject || '', new Date().toISOString(), JSON.stringify(rec)];
                  if (idMap[rec.id]) sheet.getRange(idMap[rec.id], 1, 1, rowData.length).setValues([rowData]);
                  else sheet.appendRow(rowData);
              }
           });
           return response({status: 'success'});
      } else {
          // SYNC_MAIN (Teachers) - expects 2D Array
          rows = data;
      }

      // Execute Write for non-ACQ (Mail, Seminars, Main)
      if (action !== 'SYNC_ACQ') {
          if (!rows || !rows.length) {
              sheet.clear();
              return response({status: 'cleared'});
          }
          const requiredCols = rows[0].length;
          const currentCols = sheet.getMaxColumns();
          if (requiredCols > currentCols) sheet.insertColumnsAfter(currentCols, requiredCols - currentCols);
          
          sheet.clear(); // Overwrite Mode
          sheet.getRange(1, 1, rows.length, rows[0].length).setValues(rows);
          sheet.getRange(1, 1, 1, rows[0].length).setFontWeight("bold").setBackground("#f3f4f6").setBorder(true, true, true, true, true, true);
      }
      return response({status: 'success'});
    } 
    
    // --- READ ACTIONS ---
    else if (action.startsWith('READ_')) {
      if (sheet.getLastRow() <= 1) return response([]); // Empty or Header only
      const data = sheet.getDataRange().getValues();
      
      if (action === 'READ_MAIL') {
          const records = [];
          for (let i = 1; i < data.length; i++) {
              const row = data[i];
              records.push({id: row[0], type: row[1], year: row[2], number: row[3], date: row[4], correspondent: row[5], subject: row[6], reference: row[7], notes: row[8]});
          }
          return response(records);
      } else if (action === 'READ_SEMINARS') {
          const records = [];
          for (let i = 1; i < data.length; i++) {
              const row = data[i];
              let targets = [];
              try { targets = JSON.parse(row[6]); } catch(e) { targets = []; }
              records.push({id: row[0], topic: row[1], date: row[2], location: row[3], isExternalLocation: row[4], duration: row[5], targetLevels: targets, supervisor: row[7], notes: row[8]});
          }
          return response(records);
      } else if (action === 'READ_ACQ') {
          const parsedRecords = [];
          for (let i = 1; i < data.length; i++) {
             try { const jsonStr = data[i][5]; if (jsonStr) parsedRecords.push(JSON.parse(jsonStr)); } catch(e) {}
          }
          return response(parsedRecords);
      } else {
          // READ_MAIN
          return response(data);
      }
    }
    
  } catch (error) {
    return response({status: 'error', message: error.toString()});
  } finally {
    lock.releaseLock();
  }
}

function response(data) {
  return ContentService.createTextOutput(JSON.stringify(data)).setMimeType(ContentService.MimeType.JSON);
}
`,b=()=>{navigator.clipboard.writeText(m),f(!0),setTimeout(()=>f(!1),2e3)},y=[{title:"1.   Google Sheet ",icon:e.jsx(oj,{size:24}),content:e.jsxs("div",{className:"space-y-5 text-right",children:[e.jsx("p",{className:"text-sm text-gray-600 leading-relaxed",children:'   ""  .       :'}),e.jsxs("div",{className:"space-y-4 bg-gray-50 p-5 rounded-xl border border-gray-100",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"bg-white border border-gray-200 text-gray-700 font-bold w-6 h-6 rounded-full flex items-center justify-center text-xs shrink-0 mt-0.5",children:"1"}),e.jsxs("p",{className:"text-sm text-gray-700",children:["  ",e.jsx("a",{href:"https://sheets.google.com",target:"_blank",className:"text-blue-600 underline font-bold hover:text-blue-800",children:"Google Sheets"}),"."]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"bg-white border border-gray-200 text-gray-700 font-bold w-6 h-6 rounded-full flex items-center justify-center text-xs shrink-0 mt-0.5",children:"2"}),e.jsxs("p",{className:"text-sm text-gray-700",children:["   ",e.jsx("strong",{children:"(+)"}),"    ",e.jsx("br",{}),e.jsx("span",{className:"text-xs text-gray-500 font-normal",children:"(Blank spreadsheet - Feuille de calcul vierge)"}),"."]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"bg-white border border-gray-200 text-gray-700 font-bold w-6 h-6 rounded-full flex items-center justify-center text-xs shrink-0 mt-0.5",children:"3"}),e.jsxs("p",{className:"text-sm text-gray-700",children:["     ",e.jsx("strong",{children:""})," ",e.jsx("br",{}),e.jsx("span",{className:"text-xs text-gray-500 font-normal",children:"(Extensions - Extensions)"}),"."]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"bg-white border border-gray-200 text-gray-700 font-bold w-6 h-6 rounded-full flex items-center justify-center text-xs shrink-0 mt-0.5",children:"4"}),e.jsxs("p",{className:"text-sm text-gray-700",children:["   ",e.jsx("strong",{children:"Apps Script"}),"."]})]})]}),e.jsxs("div",{className:"text-xs text-blue-600 bg-blue-50 p-3 rounded-lg border border-blue-100 flex items-center gap-2",children:[e.jsx(N,{size:16}),e.jsx("span",{children:"      .    ."})]})]})},{title:"2.    ( )",icon:e.jsx(Zt,{size:24}),content:e.jsxs("div",{className:"space-y-4 text-right",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:['  " "  .          ',e.jsx("strong",{children:""}),":"]}),e.jsxs("div",{className:"relative group mt-2 dir-ltr",children:[e.jsx("div",{className:"bg-gray-900 text-gray-300 p-4 rounded-lg text-left text-xs font-mono h-40 overflow-y-auto custom-scrollbar border border-gray-700 shadow-inner",children:e.jsx("pre",{children:m})}),e.jsxs("button",{onClick:b,className:"absolute top-2 right-2 bg-white text-gray-800 px-3 py-1.5 rounded-md text-xs font-bold shadow-sm hover:bg-gray-100 flex items-center gap-1 transition-all",children:[u?e.jsx(or,{size:14,className:"text-green-600"}):e.jsx(Ol,{size:14}),u?" ":" "]})]}),e.jsxs("div",{className:"space-y-3 mt-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700",children:[e.jsx(or,{size:16,className:"text-green-500 shrink-0"}),e.jsxs("span",{children:["       ( ",e.jsx("code",{children:"function myFunction..."}),")."]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700",children:[e.jsx(or,{size:16,className:"text-green-500 shrink-0"}),e.jsx("span",{children:"       ."})]}),e.jsxs("div",{className:"bg-red-50 p-3 rounded-lg border border-red-200 flex items-start gap-3 animate-pulse",children:[e.jsx(Zt,{size:20,className:"text-red-600 shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm text-red-800 font-bold",children:["  :     (Disquette)   .",e.jsx("br",{}),e.jsx("span",{className:"text-xs font-normal text-red-600",children:"(Save project - Enregistrer le projet)"})]})]})]})]})},{title:"3.   (Deploy)",icon:e.jsx(_j,{size:24}),content:e.jsxs("div",{className:"space-y-5 text-right",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"    .          :"}),e.jsxs("div",{className:"bg-indigo-50 p-5 rounded-xl border border-indigo-200 text-sm space-y-4 shadow-sm",children:[e.jsxs("p",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"bg-indigo-200 text-indigo-800 w-5 h-5 rounded-full flex items-center justify-center text-xs font-bold",children:"1"}),"    ",e.jsx("strong",{children:" (Deploy - Dployer)"}),"   ."]}),e.jsxs("p",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"bg-indigo-200 text-indigo-800 w-5 h-5 rounded-full flex items-center justify-center text-xs font-bold",children:"2"})," ",e.jsx("strong",{children:"  (New deployment - Nouvelle dploiement)"}),"."]}),e.jsxs("p",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"bg-indigo-200 text-indigo-800 w-5 h-5 rounded-full flex items-center justify-center text-xs font-bold",children:"3"}),"   (Select type)  ",e.jsx("strong",{children:"  (Web app)"}),"."]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-indigo-100 space-y-4 mt-2",children:[e.jsx("p",{className:"text-xs text-gray-500 font-bold border-b pb-2 mb-2",children:"   :"}),e.jsxs("div",{className:"space-y-3 text-xs",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-bold block text-gray-700 mb-1",children:" (Description):"}),e.jsx("span",{className:"text-gray-500",children:"   (: V1)."})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-bold block text-gray-700 mb-1",children:"  (Execute as - Excuter en tant que):"}),e.jsx("span",{className:"text-blue-700 font-bold bg-blue-50 px-2 py-1 rounded border border-blue-100 inline-block",children:" (Me - Moi)"})]}),e.jsxs("div",{className:"bg-yellow-50 p-2 rounded border border-yellow-200",children:[e.jsx("span",{className:"font-bold block text-gray-800 mb-1",children:"    (Who has access - Qui a accs):"}),e.jsxs("div",{className:"flex flex-col gap-2 mt-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(or,{size:14,className:"text-green-600"}),e.jsx("span",{className:"font-bold text-green-700",children:"  (Anyone - Anyone - N'importe qui)"})]}),e.jsxs("div",{className:"flex items-start gap-2 text-[10px] text-amber-700 bg-white/50 p-1.5 rounded",children:[e.jsx(ys,{size:12,className:"shrink-0 mt-0.5"}),e.jsx("span",{children:":   (Anyone with Google account)  (Anyone) ."})]})]})]})]})]}),e.jsxs("p",{className:"flex items-center gap-2 pt-2",children:[e.jsx("span",{className:"bg-indigo-200 text-indigo-800 w-5 h-5 rounded-full flex items-center justify-center text-xs font-bold",children:"4"})," ",e.jsx("strong",{children:" (Deploy - Dployer)"}),"."]})]})]})},{title:"4.   (Authorize)",icon:e.jsx(Er,{size:24}),content:e.jsxs("div",{className:"space-y-4 text-right",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"    (    ).       :"}),e.jsx("div",{className:"bg-gray-50 p-5 rounded-xl border border-gray-100 space-y-3 text-sm",children:e.jsxs("ol",{className:"list-decimal list-inside space-y-3 text-gray-700",children:[e.jsxs("li",{children:[" ",e.jsx("strong",{children:"  (Authorize access - Autoriser l'accs)"}),"."]}),e.jsx("li",{children:"   Google."}),e.jsxs("li",{className:"bg-white p-3 rounded border border-gray-200",children:[e.jsxs("div",{className:"text-red-500 font-bold text-xs mb-1 flex items-center gap-1",children:[e.jsx(ys,{size:12}),"   :"]}),`   "Google hasn't verified this app" (    ).`,e.jsx("br",{}),e.jsx("span",{className:"text-xs text-gray-500",children:"    ."}),e.jsxs("div",{className:"mt-2 text-xs font-bold text-blue-600",children:['1.   "Advanced" ( / Paramtres avancs).',e.jsx("br",{}),'2.      "Go to ... (unsafe)"  "Accder  ... (non scuris)".']})]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:" (Allow - Autoriser)"}),"."]})]})}),e.jsxs("div",{className:"mt-6 text-center bg-green-50 p-4 rounded-xl border border-green-200 shadow-sm animate-in zoom-in",children:[e.jsx("h4",{className:"text-green-800 font-bold mb-1",children:" !"}),e.jsxs("p",{className:"text-sm text-green-700 mb-2",children:["     ",e.jsx("strong",{children:"Web app URL"}),"."]}),e.jsx("p",{className:"text-xs text-green-600",children:"       ."})]})]})}];function N({size:C}){return e.jsxs("svg",{width:C,height:C,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),e.jsx("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})]})}return n?e.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/70 backdrop-blur-sm animate-in fade-in duration-200",dir:"rtl",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-lg w-full overflow-hidden flex flex-col max-h-[90vh]",children:[e.jsxs("div",{className:"bg-gray-50 p-4 border-b flex justify-between items-center shrink-0",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"font-bold text-gray-800 text-lg",children:"    ( )"}),e.jsx("p",{className:"text-xs text-gray-500",children:"     "})]}),e.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 bg-white p-1 rounded-full border hover:bg-gray-100 transition-colors",children:e.jsx(Ze,{size:20})})]}),e.jsxs("div",{className:"flex p-1 bg-gray-100 mx-4 mt-4 rounded-lg shrink-0",children:[e.jsxs("button",{onClick:()=>i("steps"),className:`flex-1 flex items-center justify-center gap-2 py-2 text-sm font-bold rounded-md transition-all ${l==="steps"?"bg-white text-blue-700 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:[e.jsx(Yj,{size:16})," ( )"]}),e.jsxs("button",{onClick:()=>i("video"),className:`flex-1 flex items-center justify-center gap-2 py-2 text-sm font-bold rounded-md transition-all ${l==="video"?"bg-white text-red-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:[e.jsx(Rw,{size:16})," "]})]}),e.jsx("div",{className:"p-6 overflow-y-auto flex-1 custom-scrollbar",children:l==="steps"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"text-blue-600 bg-blue-50 p-3 rounded-xl border border-blue-100 shadow-sm",children:y[o].icon}),e.jsxs("div",{children:[e.jsxs("span",{className:"text-[10px] font-bold text-blue-600 uppercase tracking-wider bg-blue-50 px-2 py-0.5 rounded-full border border-blue-100",children:[" ",o+1,"  ",y.length]}),e.jsx("h3",{className:"text-lg font-bold text-gray-900 mt-1",children:y[o].title})]})]}),e.jsx("div",{className:"animate-in slide-in-from-left-4 duration-300",children:y[o].content})]}):e.jsxs("div",{className:"flex flex-col h-full animate-in fade-in slide-in-from-right-4 duration-300",children:[e.jsx("div",{className:"w-full aspect-video bg-black rounded-xl overflow-hidden shadow-lg border border-gray-200 relative group",children:x.includes("placeholder")?e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-white bg-slate-800",children:[e.jsx(zb,{size:48,className:"text-red-500 mb-4 opacity-80"}),e.jsx("p",{className:"font-bold text-lg",children:"   "})]}):e.jsx("iframe",{src:x,title:"  Google Sheets",className:"w-full h-full",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}),e.jsxs("div",{className:"mt-6 text-center space-y-2",children:[e.jsx("h4",{className:"font-bold text-gray-800",children:"    "}),e.jsx("p",{className:"text-xs text-gray-500 max-w-xs mx-auto",children:"      ."})]})]})}),l==="steps"&&e.jsxs("div",{className:"p-4 border-t bg-gray-50 flex justify-between items-center shrink-0",children:[e.jsxs("button",{onClick:()=>c(Math.max(0,o-1)),disabled:o===0,className:"flex items-center gap-1 px-4 py-2 text-sm font-medium text-gray-600 hover:text-gray-900 disabled:opacity-30 disabled:cursor-not-allowed transition-colors",children:[e.jsx(Hs,{size:16}),e.jsx("span",{children:""})]}),e.jsx("div",{className:"flex gap-1.5",children:y.map((C,A)=>e.jsx("div",{className:`h-1.5 rounded-full transition-all duration-300 ${A===o?"bg-blue-600 w-6":"bg-gray-300 w-1.5"}`},A))}),o<y.length-1?e.jsxs("button",{onClick:()=>c(Math.min(y.length-1,o+1)),className:"flex items-center gap-1 px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700 shadow-sm transition-all",children:[e.jsx("span",{children:""}),e.jsx(pb,{size:16})]}):e.jsxs("button",{onClick:t,className:"flex items-center gap-2 px-5 py-2 bg-gray-900 text-white rounded-lg text-sm font-medium hover:bg-black shadow-lg shadow-gray-200 transition-all hover:scale-105",children:[e.jsx("span",{children:"  "}),e.jsx(or,{size:16})]})]})]})}):null},rA=({teachers:n,reportsMap:t,tenureReportsMap:l,onRestore:i,currentReport:o,isConnected:c,onConnectionChange:u,isAutoSync:f,onAutoSyncChange:x})=>{const[m,b]=k.useState(!1),[y,N]=k.useState("idle"),[C,A]=k.useState(""),[E,R]=k.useState(!1),[P,O]=k.useState(""),z=k.useRef(null);k.useEffect(()=>{const J=localStorage.getItem("mufattish_script_url");J&&(O(J),u(!0))},[]);const K=()=>{const J=!f;x(J),localStorage.setItem("mufattish_auto_sync",String(J))},G=async()=>{if(!P.includes("script.google.com")){N("error"),A("  .     script.google.com");return}localStorage.setItem("mufattish_script_url",P),uc()&&KT(P),u(!0),b(!0),A("    ...");try{const J=ic(n,o,t);await Gl(P,J,"SYNC_MAIN"),N("success"),A("  !   .")}catch(J){console.error(J),N("success"),A("      .      ( ).")}finally{b(!1)}},F=async()=>{if(!P){N("error"),A("    .");return}b(!0),A("    (  )...");try{const J=ic(n,o,t);await Gl(P,J,"SYNC_MAIN");const Q=localStorage.getItem("mufattish_mail_register"),U=Q?JSON.parse(Q):[];await Gl(P,U,"SYNC_MAIL");const ae=localStorage.getItem("mufattish_seminars_calendar"),se=ae?JSON.parse(ae):[];await Gl(P,se,"SYNC_SEMINARS"),N("success"),A("    !    .")}catch(J){console.error(J),N("error"),A(` : ${J.message}`)}finally{b(!1)}},$=async()=>{if(P&&window.confirm(":      (  )    Google Sheet.   ")){b(!0),A("   ...");try{const J=await vr(P,"READ_MAIN");if(Array.isArray(J)){const{teachers:ae,reportsMap:se}=Pb(J);i(ae,se,l)}const Q=await vr(P,"READ_MAIL");Array.isArray(Q)&&localStorage.setItem("mufattish_mail_register",JSON.stringify(Q));const U=await vr(P,"READ_SEMINARS");Array.isArray(U)&&localStorage.setItem("mufattish_seminars_calendar",JSON.stringify(U)),N("success"),A("     !"),setTimeout(()=>{window.location.reload()},1500)}catch(J){console.error(J),N("error"),A(` : ${J.message}`)}finally{b(!1)}}},B=()=>{const J={version:"1.1",date:new Date().toISOString(),teachers:n,reportsMap:t,tenureReportsMap:l,mailRegister:JSON.parse(localStorage.getItem("mufattish_mail_register")||"[]"),seminarsCalendar:JSON.parse(localStorage.getItem("mufattish_seminars_calendar")||"[]"),acqDB:JSON.parse(localStorage.getItem("mufattish_acq_db")||'{"records":[]}'),acqGlobalDB:JSON.parse(localStorage.getItem("mufattish_acq_global_db")||'{"records":[]}'),settings:{inspectorName:localStorage.getItem("mufattish_inspector_name"),signature:localStorage.getItem("mufattish_signature"),scriptUrl:localStorage.getItem("mufattish_script_url")}},Q=new Blob([JSON.stringify(J,null,2)],{type:"application/json"}),U=URL.createObjectURL(Q),ae=document.createElement("a");ae.href=U,ae.download=`mufattish_backup_full_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(ae),ae.click(),document.body.removeChild(ae)},q=async J=>{var ae;const Q=(ae=J.target.files)==null?void 0:ae[0];if(!Q)return;const U=new FileReader;U.onload=async se=>{var ne;try{const w=JSON.parse((ne=se.target)==null?void 0:ne.result);if(w.teachers&&window.confirm(":   **    .   ")){const D=w.teachers.map(Y=>({...Y,birthDate:ct(Y.birthDate),recruitmentDate:ct(Y.recruitmentDate),degreeDate:ct(Y.degreeDate),currentRankDate:ct(Y.currentRankDate),echelonDate:ct(Y.echelonDate),lastInspectionDate:ct(Y.lastInspectionDate),tenureDate:ct(Y.tenureDate)})),V={};w.reportsMap&&Object.entries(w.reportsMap).forEach(([Y,le])=>{V[Y]={...le,inspectionDate:ct(le.inspectionDate),legacyData:le.legacyData?{...le.legacyData,trainingDate:ct(le.legacyData.trainingDate),graduationDate:ct(le.legacyData.graduationDate)}:void 0}}),i(D,V,w.tenureReportsMap||{}),w.mailRegister&&localStorage.setItem("mufattish_mail_register",JSON.stringify(w.mailRegister)),w.seminarsCalendar&&localStorage.setItem("mufattish_seminars_calendar",JSON.stringify(w.seminarsCalendar)),w.acqDB&&localStorage.setItem("mufattish_acq_db",JSON.stringify(w.acqDB)),w.acqGlobalDB&&localStorage.setItem("mufattish_acq_global_db",JSON.stringify(w.acqGlobalDB)),w.settings&&(w.settings.scriptUrl&&(O(w.settings.scriptUrl),localStorage.setItem("mufattish_script_url",w.settings.scriptUrl),u(!0)),w.settings.inspectorName&&localStorage.setItem("mufattish_inspector_name",w.settings.inspectorName)),N("success"),A("    ."),window.location.reload()}}catch(w){console.error(w),N("error"),A("  .")}},U.readAsText(Q),z.current&&(z.current.value="")};return e.jsxs("div",{className:"p-4 md:p-8 max-w-6xl mx-auto animate-in fade-in duration-500",children:[e.jsx(iA,{isOpen:E,onClose:()=>R(!1)}),e.jsxs("div",{className:"text-center mb-10",children:[e.jsx("div",{className:"bg-gradient-to-br from-indigo-500 to-purple-600 w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg text-white",children:e.jsx(Cr,{size:40})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2 font-serif",children:"  "}),e.jsx("p",{className:"text-gray-500 max-w-lg mx-auto",children:"   Google Sheet           ."})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden relative group",children:[e.jsxs("div",{className:"bg-green-50 p-4 border-b border-green-100 flex items-center justify-between",children:[e.jsxs("h2",{className:"font-bold text-green-900 flex items-center gap-2",children:[e.jsx(VN,{size:20}),"Google Sheets ( )"]}),e.jsx("div",{className:`w-3 h-3 rounded-full ${c?"bg-green-500 animate-pulse":"bg-gray-300"}`,title:c?"":" "})]}),e.jsx("div",{className:"p-6",children:c?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"p-4 bg-green-50 rounded-xl border border-green-100",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[e.jsx(qj,{className:"text-green-600 mt-1",size:24}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-green-900 text-lg",children:" "}),e.jsxs("p",{className:"text-xs text-green-700 opacity-80 leading-relaxed",children:["   ",e.jsx("b",{children:" "}),"  :",e.jsx("br",{}),"(     )."]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{onClick:F,disabled:m,className:"bg-green-600 text-white py-3 rounded-xl font-bold text-sm flex flex-col items-center justify-center gap-1 hover:bg-green-700 transition-all shadow-sm disabled:opacity-50",children:[e.jsx(ii,{size:20}),e.jsx("span",{children:"  ()"})]}),e.jsxs("button",{onClick:$,disabled:m,className:"bg-white border-2 border-green-600 text-green-700 py-3 rounded-xl font-bold text-sm flex flex-col items-center justify-center gap-1 hover:bg-green-50 transition-all shadow-sm disabled:opacity-50",children:[e.jsx(Ju,{size:20}),e.jsx("span",{children:"  ()"})]})]})]}),e.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg border cursor-pointer transition-colors ${f?"bg-indigo-50 border-indigo-200":"bg-gray-50 border-gray-200"}`,onClick:K,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(sc,{size:16,className:f?"text-indigo-600":"text-gray-400"}),e.jsx("span",{className:"text-xs font-bold text-gray-700",children:"  ( 5 )"})]}),e.jsx("div",{className:`w-8 h-4 rounded-full p-0.5 transition-colors flex ${f?"bg-indigo-500 justify-end":"bg-gray-300 justify-start"}`,children:e.jsx("div",{className:"w-3 h-3 bg-white rounded-full shadow-sm"})})]}),e.jsx("button",{onClick:()=>{O(""),u(!1),localStorage.removeItem("mufattish_script_url")},className:"text-xs text-red-400 hover:text-red-600 underline w-full text-center mt-2",children:"  /  "})]}):e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"  Google Sheet         ."}),e.jsxs("button",{onClick:()=>R(!0),className:"w-full bg-blue-50 text-blue-700 py-3 rounded-xl font-bold text-sm border border-blue-100 hover:bg-blue-100 transition-colors flex items-center justify-center gap-2",children:[e.jsx(hc,{size:16}),"    "]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{placeholder:"  Web App URL ...",className:"w-full p-3 pl-10 border border-gray-300 rounded-xl text-sm focus:ring-2 focus:ring-green-500 outline-none",value:P,onChange:J=>O(J.target.value)}),e.jsx(_b,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:16})]}),e.jsxs("button",{onClick:G,disabled:m,className:"w-full bg-green-600 text-white py-3 rounded-xl font-bold hover:bg-green-700 transition-colors flex items-center justify-center gap-2 disabled:opacity-70",children:[m?e.jsx(sc,{className:"animate-spin",size:18}):e.jsx(Nh,{size:18}),"  "]})]})})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden relative group",children:[e.jsx("div",{className:"bg-purple-50 p-4 border-b border-purple-100 flex items-center justify-between",children:e.jsxs("h2",{className:"font-bold text-purple-900 flex items-center gap-2",children:[e.jsx(Nb,{size:20}),"   ( JSON)"]})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-6",children:[e.jsx(hj,{className:"text-purple-500 mt-1",size:24}),e.jsxs("p",{className:"text-sm text-gray-500",children:["           ",e.jsx("b",{children:"  "}),"    ."]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("button",{onClick:B,className:"w-full bg-purple-600 text-white py-3 rounded-xl font-bold flex items-center justify-center gap-2 hover:bg-purple-700 transition-colors shadow-sm",children:[e.jsx(Ju,{size:20}),"   (Backup)"]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"file",accept:".json",ref:z,onChange:q,className:"hidden"}),e.jsxs("button",{onClick:()=>{var J;return(J=z.current)==null?void 0:J.click()},className:"w-full bg-white border-2 border-purple-100 text-purple-700 py-3 rounded-xl font-bold flex items-center justify-center gap-2 hover:bg-purple-50 transition-colors",children:[e.jsx(ii,{size:20}),"  "]})]})]}),e.jsxs("div",{className:"mt-6 p-3 bg-yellow-50 border border-yellow-100 rounded-lg text-xs text-yellow-800 flex items-center gap-2",children:[e.jsx(Os,{size:14,className:"shrink-0"}),e.jsx("span",{children:":        ."})]})]})]})]}),y!=="idle"&&e.jsxs("div",{className:`mt-8 p-4 rounded-xl flex items-start gap-3 animate-in slide-in-from-bottom-2 
                    ${y==="success"?"bg-green-50 text-green-800 border border-green-200":"bg-red-50 text-red-800 border border-red-200"}`,children:[y==="success"?e.jsx(vt,{size:24,className:"shrink-0 mt-1"}):e.jsx(Os,{size:24,className:"shrink-0 mt-1"}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"font-bold",children:C})})]})]})},oA=({teachers:n,reportsMap:t,onNavigateToPromotions:l,fullTeacherCount:i,selectedSchool:o,onProgramSeminar:c})=>{const[u,f]=k.useState("modern");new Date().getFullYear();const x=i||n.length,m=k.useMemo(()=>n.filter(G=>{const F=t[G.id];return F&&F.inspectionDate&&F.inspectionDate.trim()!==""}).length,[n,t]),b=x>0?m/x*100:0;k.useMemo(()=>x===0?"0":(n.reduce((F,$)=>F+($.lastMark||0),0)/x).toFixed(2),[n]);const y=k.useMemo(()=>{const G=new Set;return Object.values(t).forEach(F=>{F.school&&G.add(F.school.trim())}),G.size},[t]);k.useMemo(()=>{const G={titulaire:0,contractuel:0,stagiere:0};return n.forEach(F=>{(F.status==="titulaire"||F.status==="contractuel"||F.status==="stagiere")&&G[F.status]++}),G},[n]);const N=k.useMemo(()=>{const G={};n.forEach($=>{const B=t[$.id];if(B&&B.school&&B.finalMark){const q=B.school.trim();G[q]||(G[q]={totalMark:0,count:0}),G[q].totalMark+=B.finalMark,G[q].count+=1}});const F=Object.entries(G).map(([$,B])=>({name:$,avg:B.totalMark/B.count,count:B.count})).sort(($,B)=>B.avg-$.avg);return{top3:F.slice(0,3),bottom3:F.slice(-3).reverse(),total:F.length}},[n,t]),C=k.useMemo(()=>{const G=localStorage.getItem("mufattish_promo_bonus_enabled")==="true",F=parseInt(localStorage.getItem("mufattish_promo_bonus_months")||"3"),$=new Date().getFullYear();return n.filter(B=>{if(B.status!=="titulaire"||!B.echelonDate||!B.echelon)return!1;const q=parseInt(B.echelon);if(q>=12)return!1;const J=new Date(B.echelonDate);if(isNaN(J.getTime()))return!1;let Q=30;G&&(Q=30/((12+F)/12));const U=new Date(J),ae=Q*30.44;U.setDate(U.getDate()+ae);const se=new Date($,11,31);if(U>se)return!1;const ne=13+q*.5;if(B.lastMark>=ne)return!1;const w=t[B.id];if(w){const D=w.inspectionDate&&w.inspectionDate.trim()!=="",V=w.finalMark!==void 0&&w.finalMark>0;if(D&&V)return!1}return!0}).length},[n,t]),A=k.useMemo(()=>{const G={};Object.values(t).forEach($=>{if(!(o&&$.school!==o)&&$.level){const B=$.level.trim(),q=$.studentCount||0;G[B]=(G[B]||0)+q}});const F=[" "," "," "," "," "," "];return Object.entries(G).map(([$,B])=>({name:$,count:B})).sort(($,B)=>{const q=F.indexOf($.name),J=F.indexOf(B.name);return(q===-1?99:q)-(J===-1?99:J)})},[t,o]),E=k.useMemo(()=>A.reduce((G,F)=>G+F.count,0),[A]),R=k.useMemo(()=>{const G={count:0,tech:0,control:0,planning:0},F={count:0,tech:0,control:0,planning:0},$=["env-phy-3"],B=["env-disc-1","env-disc-2"],q=["plan-1","plan-4"];n.forEach(Q=>{const U=t[Q.id];if(!U||!Q.recruitmentDate||U.reportModel==="legacy")return;const ae=new Date(Q.recruitmentDate),w=(new Date().getTime()-ae.getTime())/(1e3*60*60*24*365.25)<=10?G:F,D=V=>{let Y=0,le=0;return U.observations.forEach(_=>{V.includes(_.id)&&_.score!==null&&(Y+=_.score,le+=2)}),le>0?Y/le*100:0};w.count++,w.tech+=D($),w.control+=D(B),w.planning+=D(q)});const J=Q=>{Q.count!==0&&(Q.tech/=Q.count,Q.control/=Q.count,Q.planning/=Q.count)};return J(G),J(F),{juniors:G,seniors:F}},[n,t]),P=k.useMemo(()=>{const G={};return n.forEach($=>{const B=t[$.id];B&&B.reportModel!=="legacy"&&B.observations.forEach(q=>{q.score!==null&&(G[q.criteria]||(G[q.criteria]={sum:0,count:0,category:q.category}),G[q.criteria].sum+=q.score,G[q.criteria].count+=1)})}),Object.entries(G).map(([$,B])=>({name:$,category:B.category,avg:B.sum/B.count/2*100})).sort(($,B)=>$.avg-B.avg).slice(0,5).map($=>{const q=(Vw[$.category]||["    "+$.category])[0];return{...$,suggestedTitle:q}})},[n,t]),O=k.useMemo(()=>{const G=["","",""," ","",""," "," ",""],F={};return G.forEach($=>F[$]={sum:0,count:0}),n.forEach($=>{const B=t[$.id];B&&B.reportModel!=="legacy"&&B.observations.forEach(q=>{let J="";q.category===""?J="":q.category===""?J="":q.category===""?J="":q.category===" "?J=" ":q.category.includes("")?J="":q.category.includes("")?J="":q.category===" "?J=" ":q.category===" "?J=" ":q.category.includes("")&&(J=""),J&&q.score!==null&&(F[J].sum+=q.score,F[J].count+=1)})}),G.map($=>{const B=F[$],q=B.count>0?B.sum/B.count/2*100:0;return{domain:$,value:q}})},[n,t]),z=k.useMemo(()=>{let G=0;const F={excellent:0,good:0,weak:0},$={full:0,partial:0,none:0},B={good:0,average:0,bad:0},q={planning:0,methodology:0,evaluation:0,environment:0};n.forEach(U=>{const ae=t[U.id];if(ae&&ae.reportModel==="legacy"&&ae.legacyData){G++;const se=ae.legacyData;se.preparationValue.includes("")||se.preparationValue.includes("")?F.good++:se.preparationValue.includes("")||se.preparationValue.includes("")?(F.weak++,q.planning++):F.excellent++,se.objectivesAchieved.includes("")?$.full++:se.objectivesAchieved.includes("")?$.partial++:($.none++,q.methodology++),se.notebooksCare.includes("")?B.good++:se.notebooksCare.includes("")||se.notebooksCare.includes("")?(B.bad++,q.evaluation++):B.average++,(se.boardWork.includes("")||se.cleanliness.includes(""))&&q.environment++}});const J=[],Q=1;if(q.planning>=Q){const U=Bo.[0];J.push({title:U,count:q.planning,type:""})}if(q.methodology>=Q){const U=Bo.[0];J.push({title:U,count:q.methodology,type:""})}if(q.evaluation>=Q){const U=Bo.[0];J.push({title:U,count:q.evaluation,type:""})}if(q.environment>=Q){const U=Bo[" "][0];J.push({title:U,count:q.environment,type:" "})}return{total:G,preparation:F,objectives:$,notebooks:B,recommendations:J.sort((U,ae)=>ae.count-U.count)}},[n,t]),K=()=>e.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-200 relative overflow-hidden group hover:shadow-md transition-shadow",children:[e.jsx("div",{className:"absolute top-0 left-0 w-1.5 h-full bg-blue-500"}),e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-500 text-xs font-bold uppercase tracking-wider mb-1",children:"  "}),e.jsxs("h3",{className:"text-3xl font-bold text-slate-800",children:[m," ",e.jsxs("span",{className:"text-sm text-slate-400 font-medium",children:["/ ",x]})]})]}),e.jsxs("div",{className:"relative w-16 h-16",children:[e.jsxs("svg",{className:"w-full h-full transform -rotate-90",children:[e.jsx("circle",{cx:"32",cy:"32",r:"28",fill:"none",stroke:"#e2e8f0",strokeWidth:"6"}),e.jsx("circle",{cx:"32",cy:"32",r:"28",fill:"none",stroke:"#3b82f6",strokeWidth:"6",strokeDasharray:`${b*175/100} 175`,strokeLinecap:"round"})]}),e.jsxs("div",{className:"absolute inset-0 flex items-center justify-center text-xs font-bold text-blue-600",children:[b.toFixed(0),"%"]})]})]}),e.jsx("div",{className:"w-full bg-slate-100 rounded-full h-1.5 overflow-hidden",children:e.jsx("div",{className:"h-full bg-blue-500 rounded-full transition-all duration-1000",style:{width:`${b}%`}})}),e.jsx("p",{className:"text-[10px] text-slate-400 mt-2 text-right",children:"     "})]});return e.jsxs("div",{className:"p-4 md:p-8 h-full overflow-y-auto bg-gray-50/50",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-8 gap-4",children:[e.jsx("div",{className:"flex items-center gap-4 w-full md:w-auto",children:e.jsxs("div",{className:"bg-white p-1 rounded-xl border border-gray-200 shadow-sm flex w-full md:w-auto",children:[e.jsxs("button",{onClick:()=>f("modern"),className:`flex-1 md:flex-none flex items-center justify-center gap-2 px-6 py-2.5 rounded-lg text-sm font-bold transition-all ${u==="modern"?"bg-indigo-600 text-white shadow-md":"text-gray-500 hover:bg-gray-50"}`,children:[e.jsx(Hj,{size:16})," "]}),e.jsxs("button",{onClick:()=>f("legacy"),className:`flex-1 md:flex-none flex items-center justify-center gap-2 px-6 py-2.5 rounded-lg text-sm font-bold transition-all ${u==="legacy"?"bg-amber-600 text-white shadow-md":"text-gray-500 hover:bg-gray-50"}`,children:[e.jsx(Zu,{size:16})," "]})]})}),o&&e.jsxs("div",{className:"bg-indigo-50 text-indigo-700 px-4 py-2 rounded-lg font-bold text-sm flex items-center gap-2 shadow-sm animate-in fade-in border border-indigo-100",children:[e.jsx(Et,{size:16})," : ",o]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsx(K,{}),e.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-200 hover:shadow-md transition-shadow",children:[e.jsx("p",{className:"text-slate-500 text-xs font-bold uppercase tracking-wider mb-2",children:"  ()"}),e.jsxs("div",{className:"flex items-end gap-2",children:[e.jsx("span",{className:"text-3xl font-bold text-slate-800",children:E}),e.jsx("span",{className:"text-sm text-slate-400 mb-1",children:""})]}),e.jsxs("div",{className:"mt-4 flex items-center gap-2 text-xs text-emerald-600 bg-emerald-50 px-2 py-1 rounded w-fit",children:[e.jsx(Kl,{size:12}),e.jsx("span",{children:" "})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-200 hover:shadow-md transition-shadow",children:[e.jsx("p",{className:"text-slate-500 text-xs font-bold uppercase tracking-wider mb-2",children:" "}),e.jsxs("div",{className:"flex items-end gap-2",children:[e.jsx("span",{className:"text-3xl font-bold text-purple-600",children:y}),e.jsx("span",{className:"text-sm text-slate-400 mb-1",children:""})]}),e.jsxs("div",{className:"mt-4 flex items-center gap-2 text-xs text-purple-600 bg-purple-50 px-2 py-1 rounded w-fit",children:[e.jsx(Et,{size:12}),e.jsx("span",{children:" "})]})]}),e.jsxs("div",{onClick:l,className:"bg-gradient-to-br from-indigo-600 to-blue-700 p-6 rounded-2xl shadow-lg shadow-indigo-200 text-white cursor-pointer hover:scale-[1.02] transition-transform relative overflow-hidden group",children:[e.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10 group-hover:opacity-20 transition-opacity",children:e.jsx(di,{size:80})}),e.jsx("p",{className:"text-indigo-100 text-xs font-bold uppercase tracking-wider mb-2",children:" "}),e.jsxs("div",{className:"flex items-end gap-2 relative z-10",children:[e.jsx("span",{className:"text-4xl font-bold",children:C}),e.jsx("span",{className:"text-sm text-indigo-200 mb-1",children:""})]}),e.jsxs("div",{className:"mt-4 flex items-center gap-1 text-[10px] font-bold bg-white/20 w-fit px-2 py-1 rounded backdrop-blur-sm",children:[e.jsx("span",{children:" "}),e.jsx(pb,{size:10})]})]})]}),u==="legacy"&&e.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-right-4 duration-500",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 text-amber-700 font-bold bg-amber-50 px-4 py-2 rounded-lg w-fit border border-amber-100",children:[e.jsx(Zu,{size:18}),e.jsxs("span",{children:["    (",z.total," )"]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-200 flex flex-col justify-between",children:[e.jsx("div",{className:"flex justify-between items-start mb-4",children:e.jsxs("h3",{className:"font-bold text-lg text-slate-800 flex items-center gap-2",children:[e.jsx(_2,{className:"text-blue-500",size:20}),"  "]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-xs font-bold mb-1",children:[e.jsx("span",{className:"text-slate-600",children:" /"}),e.jsx("span",{className:"text-emerald-600",children:z.preparation.good+z.preparation.excellent})]}),e.jsx("div",{className:"h-2 bg-slate-100 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-emerald-500",style:{width:`${z.total>0?(z.preparation.good+z.preparation.excellent)/z.total*100:0}%`}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-xs font-bold mb-1",children:[e.jsx("span",{className:"text-slate-600",children:" /"}),e.jsx("span",{className:"text-red-600",children:z.preparation.weak})]}),e.jsx("div",{className:"h-2 bg-slate-100 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-red-500",style:{width:`${z.total>0?z.preparation.weak/z.total*100:0}%`}})})]})]}),e.jsx("p",{className:"text-[10px] text-slate-400 mt-4",children:'   " "'})]}),e.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-200",children:[e.jsxs("h3",{className:"font-bold text-lg text-slate-800 flex items-center gap-2 mb-6",children:[e.jsx(is,{className:"text-amber-500",size:20})," "]}),e.jsxs("div",{className:"flex items-center justify-center gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"w-16 h-16 rounded-full border-4 border-emerald-500 flex items-center justify-center text-xl font-bold text-emerald-700 bg-emerald-50 mb-2",children:[z.total>0?Math.round(z.objectives.full/z.total*100):0,"%"]}),e.jsx("span",{className:"text-xs font-bold text-slate-500",children:" "})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"w-16 h-16 rounded-full border-4 border-orange-400 flex items-center justify-center text-xl font-bold text-orange-700 bg-orange-50 mb-2",children:[z.total>0?Math.round(z.objectives.partial/z.total*100):0,"%"]}),e.jsx("span",{className:"text-xs font-bold text-slate-500",children:" "})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"w-16 h-16 rounded-full border-4 border-red-400 flex items-center justify-center text-xl font-bold text-red-700 bg-red-50 mb-2",children:[z.total>0?Math.round(z.objectives.none/z.total*100):0,"%"]}),e.jsx("span",{className:"text-xs font-bold text-slate-500",children:" "})]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-200",children:[e.jsxs("h3",{className:"font-bold text-lg text-slate-800 flex items-center gap-2 mb-4",children:[e.jsx(Vt,{className:"text-purple-500",size:20})," "]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-xs font-bold w-12 text-slate-500",children:""}),e.jsx("div",{className:"flex-1 h-3 bg-slate-100 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-purple-500",style:{width:`${z.total>0?z.notebooks.good/z.total*100:0}%`}})}),e.jsx("span",{className:"text-xs font-bold text-purple-600",children:z.notebooks.good})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-xs font-bold w-12 text-slate-500",children:""}),e.jsx("div",{className:"flex-1 h-3 bg-slate-100 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-purple-300",style:{width:`${z.total>0?z.notebooks.average/z.total*100:0}%`}})}),e.jsx("span",{className:"text-xs font-bold text-purple-400",children:z.notebooks.average})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-xs font-bold w-12 text-slate-500",children:""}),e.jsx("div",{className:"flex-1 h-3 bg-slate-100 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-red-400",style:{width:`${z.total>0?z.notebooks.bad/z.total*100:0}%`}})}),e.jsx("span",{className:"text-xs font-bold text-red-500",children:z.notebooks.bad})]})]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-200 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-1.5 h-full bg-amber-500"}),e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h3",{className:"font-bold text-lg text-slate-800 flex items-center gap-2",children:[e.jsx(dl,{className:"text-amber-600",size:20}),"   ( )"]}),e.jsx("span",{className:"text-[10px] bg-amber-50 text-amber-800 px-2 py-1 rounded border border-amber-200",children:"   "})]}),e.jsx("div",{className:"space-y-3",children:z.recommendations.length>0?z.recommendations.map((G,F)=>e.jsxs("div",{className:"flex items-center gap-4 bg-slate-50 p-4 rounded-xl border border-slate-100 hover:border-amber-200 transition-colors group",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-amber-100 text-amber-700 flex items-center justify-center font-bold shrink-0",children:F+1}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-bold text-slate-700 text-sm",children:G.title}),e.jsxs("p",{className:"text-[10px] text-slate-400 mt-1",children:["    : ",G.type," (",G.count," )"]})]}),e.jsx("button",{onClick:()=>c&&c(G.title),className:"text-xs bg-white border border-slate-200 text-slate-600 px-3 py-1.5 rounded-lg hover:bg-slate-800 hover:text-white transition-colors opacity-0 group-hover:opacity-100",children:""})]},F)):e.jsxs("div",{className:"text-center py-8 text-slate-400",children:[e.jsx(vt,{size:32,className:"mx-auto mb-2 opacity-30 text-emerald-500"}),e.jsx("p",{className:"text-sm",children:"      ."})]})})]})]}),u==="modern"&&e.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-right-4 duration-500",children:[!o&&N.total>0&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden",children:[e.jsx("div",{className:"bg-emerald-50 p-4 border-b border-emerald-100 flex justify-between items-center",children:e.jsxs("h3",{className:"font-bold text-emerald-800 flex items-center gap-2",children:[e.jsx(Cw,{size:18}),"   (Top 3)"]})}),e.jsx("div",{className:"divide-y divide-slate-100",children:N.top3.map((G,F)=>e.jsxs("div",{className:"p-4 flex items-center justify-between hover:bg-emerald-50/30 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm ${F===0?"bg-yellow-100 text-yellow-700":"bg-slate-100 text-slate-600"}`,children:["#",F+1]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-slate-800 text-sm",children:G.name}),e.jsxs("p",{className:"text-[10px] text-slate-500",children:[G.count," "]})]})]}),e.jsx("span",{className:"font-bold text-emerald-600 bg-emerald-50 px-2 py-1 rounded text-sm",children:G.avg.toFixed(2)})]},F))})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden",children:[e.jsx("div",{className:"bg-orange-50 p-4 border-b border-orange-100 flex justify-between items-center",children:e.jsxs("h3",{className:"font-bold text-orange-800 flex items-center gap-2",children:[e.jsx(ys,{size:18}),"   "]})}),e.jsx("div",{className:"divide-y divide-slate-100",children:N.bottom3.map((G,F)=>e.jsxs("div",{className:"p-4 flex items-center justify-between hover:bg-orange-50/30 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-100 text-slate-500 flex items-center justify-center font-bold text-sm",children:"!"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-slate-800 text-sm",children:G.name}),e.jsxs("p",{className:"text-[10px] text-slate-500",children:[G.count," "]})]})]}),e.jsx("span",{className:"font-bold text-orange-600 bg-orange-50 px-2 py-1 rounded text-sm",children:G.avg.toFixed(2)})]},F))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-200 lg:col-span-2 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-1.5 h-full bg-red-400"}),e.jsx("div",{className:"flex justify-between items-center mb-6",children:e.jsxs("h3",{className:"font-bold text-lg text-slate-800 flex items-center gap-2",children:[e.jsx(dl,{className:"text-red-500",size:20}),"   ()"]})}),e.jsx("div",{className:"space-y-4",children:P.length>0?P.map((G,F)=>e.jsxs("div",{className:"flex items-center gap-4 bg-slate-50 p-4 rounded-xl border border-slate-100 hover:border-red-200 transition-colors group",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-red-100 text-red-600 flex items-center justify-center font-bold shrink-0",children:F+1}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("h4",{className:"font-bold text-slate-700 text-sm",children:G.suggestedTitle}),e.jsxs("span",{className:"text-[10px] font-bold bg-white border px-2 py-0.5 rounded text-red-500",children:[": ",G.avg.toFixed(0),"%"]})]}),e.jsxs("p",{className:"text-[10px] text-slate-400 flex items-center gap-1",children:[e.jsx(is,{size:10}),"  : ",G.name," (",G.category,")"]})]}),e.jsx("button",{onClick:()=>c&&c(G.suggestedTitle),className:"text-xs bg-white border border-slate-200 text-slate-600 px-3 py-1.5 rounded-lg hover:bg-slate-800 hover:text-white transition-colors opacity-0 group-hover:opacity-100",children:""})]},F)):e.jsxs("div",{className:"text-center py-10 text-slate-400",children:[e.jsx(vt,{size:40,className:"mx-auto mb-2 opacity-20 text-emerald-500"}),e.jsx("p",{className:"text-sm",children:"     ."})]})})]}),e.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-200 flex flex-col items-center",children:[e.jsxs("h3",{className:"font-bold text-lg text-slate-800 mb-2 flex items-center gap-2 w-full",children:[e.jsx(R2,{className:"text-indigo-500",size:20}),"  "]}),e.jsx("p",{className:"text-xs text-slate-400 mb-6 w-full",children:"     "}),e.jsx("div",{className:"relative w-64 h-64",children:e.jsxs("svg",{viewBox:"0 0 200 200",className:"w-full h-full overflow-visible",children:[[20,40,60,80,100].map(G=>e.jsx("circle",{cx:"100",cy:"100",r:G*.8,fill:"none",stroke:"#e2e8f0",strokeDasharray:"4 4"},G)),O.map((G,F)=>{const $=Math.PI*2*F/O.length-Math.PI/2,B=100+80*Math.cos($),q=100+80*Math.sin($);return e.jsx("line",{x1:"100",y1:"100",x2:B,y2:q,stroke:"#f1f5f9"},F)}),e.jsx("polygon",{points:O.map((G,F)=>{const $=Math.PI*2*F/O.length-Math.PI/2,B=Math.max(G.value,10),q=100+80*(B/100)*Math.cos($),J=100+80*(B/100)*Math.sin($);return`${q},${J}`}).join(" "),fill:"rgba(99, 102, 241, 0.2)",stroke:"#6366f1",strokeWidth:"2"}),O.map((G,F)=>{const $=Math.PI*2*F/O.length-Math.PI/2,B=100+95*Math.cos($),q=100+95*Math.sin($);return e.jsxs("g",{children:[e.jsx("text",{x:B,y:q,textAnchor:"middle",dominantBaseline:"middle",className:"text-[8px] font-bold fill-slate-500",style:{fontSize:"8px"},children:G.domain}),e.jsxs("text",{x:B,y:q+10,textAnchor:"middle",className:"text-[8px] font-bold fill-indigo-600",children:[G.value.toFixed(0),"%"]})]},F)})]})})]}),e.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-200 lg:col-span-3",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h3",{className:"font-bold text-lg text-slate-800 flex items-center gap-2",children:[e.jsx(jj,{className:"text-cyan-500",size:20})," :   "]}),e.jsxs("div",{className:"flex gap-4 text-xs font-bold",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-cyan-400"}),"  (  10)"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-amber-400"}),"  (  10)"]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[{label:" ",j:R.juniors.tech,s:R.seniors.tech,icon:p2},{label:" ",j:R.juniors.control,s:R.seniors.control,icon:Er},{label:" ",j:R.juniors.planning,s:R.seniors.planning,icon:qN}].map((G,F)=>e.jsxs("div",{className:"bg-slate-50 p-4 rounded-xl border border-slate-100",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3 text-slate-700 font-bold",children:[e.jsx(G.icon,{size:16,className:"text-slate-400"}),G.label]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"relative pt-1",children:[e.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[e.jsx("span",{children:""}),e.jsxs("span",{className:"font-bold",children:[G.j.toFixed(0),"%"]})]}),e.jsx("div",{className:"h-2 bg-slate-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-cyan-400 rounded-full",style:{width:`${G.j}%`}})})]}),e.jsxs("div",{className:"relative pt-1",children:[e.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[e.jsx("span",{children:""}),e.jsxs("span",{className:"font-bold",children:[G.s.toFixed(0),"%"]})]}),e.jsx("div",{className:"h-2 bg-slate-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-amber-400 rounded-full",style:{width:`${G.s}%`}})})]})]})]},F))})]})]})]})]})},Yg=({teachers:n,reportsMap:t})=>{const l=new Date().getFullYear(),[i,o]=k.useState(()=>localStorage.getItem("mufattish_promo_bonus_enabled")==="true"),[c,u]=k.useState(()=>parseInt(localStorage.getItem("mufattish_promo_bonus_months")||"3"));k.useEffect(()=>{localStorage.setItem("mufattish_promo_bonus_enabled",String(i)),localStorage.setItem("mufattish_promo_bonus_months",String(c))},[i,c]);const f=k.useMemo(()=>n.filter(m=>{if(m.status!=="titulaire"||!m.echelonDate||!m.echelon)return!1;const b=parseInt(m.echelon);if(b>=12)return!1;const y=new Date(m.echelonDate);if(isNaN(y.getTime()))return!1;let N=30;i&&(N=30/((12+c)/12));const C=new Date(y),A=N*30.44;C.setDate(C.getDate()+A);const E=new Date(l,11,31);if(C>E)return!1;const R=13+b*.5;if(m.lastMark>=R)return!1;const P=t[m.id];if(P){const O=P.inspectionDate&&P.inspectionDate.trim()!=="",z=P.finalMark!==void 0&&P.finalMark>0;if(O&&z)return!1}return!0}).map(m=>{var P;const y=13+parseInt(m.echelon||"0")*.5,N=((P=t[m.id])==null?void 0:P.school)||" ",C=new Date(m.echelonDate),R=Math.abs(new Date().getTime()-C.getTime())/(1e3*60*60*24*365.25);return{...m,maxAllowedMark:y,schoolName:N,realSeniorityYears:R}}),[n,l,t,i,c]),x=()=>{window.print()};return e.jsxs("div",{className:"p-4 md:p-8 h-full overflow-y-auto bg-gray-50/50",children:[e.jsxs("div",{className:"flex flex-col gap-6 mb-8 print:hidden",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center border-b pb-4 gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-800 font-serif flex items-center gap-3",children:[e.jsx(yh,{className:"text-indigo-600",size:32}),"  "]}),e.jsxs("p",{className:"text-gray-500 mt-2 font-medium text-sm",children:["     ( )  31/12/",l,"."]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("button",{onClick:x,className:"bg-slate-800 text-white hover:bg-slate-900 px-5 py-2.5 rounded-xl font-bold flex items-center gap-2 shadow-lg transition-all",children:[e.jsx(bs,{size:18})," "]})})]}),e.jsxs("div",{className:"bg-white p-4 rounded-2xl border border-indigo-100 shadow-sm flex flex-col md:flex-row items-center justify-between gap-4 animate-in slide-in-from-top-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-full ${i?"bg-indigo-100 text-indigo-600":"bg-slate-100 text-slate-400"}`,children:e.jsx(Hl,{size:24})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-slate-700 text-sm",children:"  ( / )"}),e.jsx("p",{className:"text-xs text-slate-400",children:"     "})]})]}),e.jsxs("div",{className:"flex items-center gap-4 bg-slate-50 p-2 rounded-xl border border-slate-100",children:[e.jsxs("div",{className:"flex items-center gap-2 cursor-pointer select-none",onClick:()=>o(!i),children:[e.jsx("span",{className:`text-xs font-bold ${i?"text-indigo-600":"text-slate-400"}`,children:i?"":" "}),i?e.jsx(Nw,{size:32,className:"text-indigo-600 fill-indigo-100"}):e.jsx(vw,{size:32,className:"text-slate-300"})]}),i&&e.jsxs("div",{className:"flex items-center gap-2 border-r pr-4 mr-2 animate-in fade-in slide-in-from-right-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-600",children:" :"}),e.jsx("select",{value:c,onChange:m=>u(parseInt(m.target.value)),className:"bg-white border border-indigo-200 text-indigo-700 text-xs font-bold rounded-lg py-1.5 px-2 outline-none focus:ring-2 focus:ring-indigo-500 cursor-pointer",children:[1,2,3,4,5,6].map(m=>e.jsxs("option",{value:m,children:[m,"  / "]},m))})]})]}),i&&e.jsxs("div",{className:"hidden md:flex items-center gap-2 text-[10px] text-amber-600 bg-amber-50 px-3 py-1.5 rounded-lg border border-amber-100",children:[e.jsx(Os,{size:12}),e.jsx("span",{children:"      "})]})]})]}),e.jsx("div",{className:"print:hidden",children:f.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:f.map(m=>e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-indigo-100 overflow-hidden hover:shadow-md transition-all group relative",children:[i&&e.jsx("div",{className:"absolute top-0 left-0 bg-indigo-500 text-white text-[9px] px-2 py-0.5 rounded-br-lg font-bold z-10",children:"  "}),e.jsxs("div",{className:"bg-indigo-50/50 p-4 border-b border-indigo-100 flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg text-gray-900",children:m.fullName}),e.jsxs("div",{className:"flex items-center gap-1.5 text-indigo-700 text-sm mt-1 font-medium",children:[e.jsx(Et,{size:14}),e.jsx("span",{children:m.schoolName})]})]}),e.jsxs("div",{className:"bg-white border border-indigo-200 text-indigo-800 text-xs px-3 py-1 rounded-full font-bold shadow-sm mt-2",children:[" ",m.echelon]})]}),e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm bg-gray-50 p-2 rounded-lg border border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(gh,{size:16,className:"text-gray-400"}),e.jsx("span",{children:" "})]}),e.jsx("span",{className:"font-mono font-bold text-gray-800 dir-ltr",children:mt(m.echelonDate)})]}),i&&e.jsxs("div",{className:"flex justify-between items-center text-[10px] px-1",children:[e.jsx("span",{className:"text-slate-400",children:" :"}),e.jsxs("span",{className:"font-bold text-slate-600",children:[m.realSeniorityYears.toFixed(1)," "]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-2",children:[e.jsxs("div",{className:"text-center p-2 rounded-lg bg-green-50 border border-green-100",children:[e.jsx("span",{className:"text-xs text-green-700 block mb-1",children:" "}),e.jsx("span",{className:"text-xl font-bold text-green-800",children:m.lastMark})]}),e.jsxs("div",{className:"text-center p-2 rounded-lg bg-red-50 border border-red-100",children:[e.jsx("span",{className:"text-xs text-red-700 block mb-1",children:" "}),e.jsx("span",{className:"text-xl font-bold text-red-800",children:m.maxAllowedMark})]})]}),e.jsxs("div",{className:"mt-2 pt-2 border-t border-dashed flex items-center gap-2 text-xs text-gray-500",children:[e.jsx(Kl,{size:14,className:"text-green-500"}),e.jsx("span",{children:"  : "}),e.jsxs("span",{className:"font-bold text-gray-800",children:[(m.maxAllowedMark-m.lastMark).toFixed(2)," "]})]})]})]},m.id))}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 bg-white rounded-2xl border border-dashed border-gray-300",children:[e.jsx(vt,{size:64,className:"text-green-500 mb-4 opacity-20"}),e.jsxs("h3",{className:"text-xl font-bold text-gray-400",children:["      ",l]}),e.jsx("p",{className:"text-gray-400 mt-2",children:"              12."}),i&&e.jsxs("p",{className:"text-indigo-400 text-xs mt-2 font-bold",children:["     (",c," /)"]})]})}),e.jsxs("div",{className:"hidden print:block absolute top-0 left-0 w-full h-auto bg-white z-[9999] p-10 text-black",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-3xl font-bold mb-2",children:"    ( )"}),e.jsxs("div",{className:"font-bold border-2 border-black inline-flex flex-col items-center px-6 py-2 mt-2 gap-1",children:[e.jsxs("span",{className:"text-xl",children:["  ",l," (  31/12/",l,")"]}),i&&e.jsxs("span",{className:"text-sm font-normal bg-black text-white px-2 rounded",children:["*   :  ",c,"    "]})]})]}),e.jsxs("table",{className:"w-full border-collapse border-2 border-black text-right",dir:"rtl",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{className:"border border-black p-3 text-center w-16 font-bold",children:""}),e.jsx("th",{className:"border border-black p-3 font-bold",children:" "}),e.jsx("th",{className:"border border-black p-3 font-bold",children:""}),e.jsx("th",{className:"border border-black p-3 text-center w-24 font-bold",children:""}),e.jsx("th",{className:"border border-black p-3 text-center w-32 font-bold",children:" "}),e.jsx("th",{className:"border border-black p-3 text-center w-24 font-bold",children:""}),e.jsx("th",{className:"border border-black p-3 text-center w-24 font-bold",children:""}),i&&e.jsx("th",{className:"border border-black p-3 text-center w-24 font-bold text-[10px]",children:" "})]})}),e.jsx("tbody",{children:f.map((m,b)=>e.jsxs("tr",{style:{breakInside:"avoid"},children:[e.jsx("td",{className:"border border-black p-3 text-center",children:b+1}),e.jsx("td",{className:"border border-black p-3 font-bold",children:m.fullName}),e.jsx("td",{className:"border border-black p-3",children:m.schoolName}),e.jsx("td",{className:"border border-black p-3 text-center",children:m.echelon}),e.jsx("td",{className:"border border-black p-3 text-center",dir:"ltr",children:mt(m.echelonDate)}),e.jsx("td",{className:"border border-black p-3 text-center",children:m.lastMark}),e.jsx("td",{className:"border border-black p-3 text-center",children:m.maxAllowedMark}),i&&e.jsxs("td",{className:"border border-black p-3 text-center text-xs font-bold",children:[m.realSeniorityYears.toFixed(1)," "]})]},m.id))})]}),e.jsx("div",{className:"mt-8 text-left pl-10 font-bold underline",children:""})]})]})},cA=({teacher:n,isOpen:t,onClose:l,onStartInspection:i,onStartLegacyInspection:o,onStartTenure:c,onUpdateTeacher:u})=>{const[f,x]=k.useState(""),[m,b]=k.useState(""),[y,N]=k.useState(!1);if(k.useEffect(()=>{n&&(x(n.tenureDate||""),b(n.privateNotes||""))},[n]),!n)return null;const C=()=>{u&&u({...n,tenureDate:f})},A=()=>{N(!0),u&&u({...n,privateNotes:m}),setTimeout(()=>N(!1),500)},E=K=>K?new Date(K).toLocaleDateString("ar-DZ",{year:"numeric",month:"long",day:"numeric"}):" ",P=(K=>{if(!K)return 0;const G=new Date(K),$=new Date().getTime()-G.getTime();return Math.floor($/(1e3*60*60*24*365.25))})(n.recruitmentDate);let O=null;if(n.echelonDate){const K=new Date(n.echelonDate);K.setFullYear(K.getFullYear()+2),O=K}const z=O?O<=new Date:!1;return e.jsxs("div",{className:`fixed inset-0 z-[100] flex justify-end transition-all duration-500 ${t?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"}`,children:[e.jsx("div",{className:`absolute inset-0 bg-slate-900/60 backdrop-blur-sm transition-opacity duration-500 ${t?"opacity-100":"opacity-0"}`,onClick:l}),e.jsxs("div",{className:`relative w-full max-w-md bg-gray-50 h-full shadow-2xl transform transition-transform duration-500 cubic-bezier(0.32, 0.72, 0, 1) flex flex-col border-l border-white/10 ${t?"translate-x-0":"translate-x-full"}`,dir:"rtl",children:[e.jsxs("div",{className:"bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 text-white p-6 pb-8 relative overflow-hidden shrink-0",children:[e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-blue-500/10 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2 pointer-events-none"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-40 h-40 bg-indigo-500/10 rounded-full blur-2xl translate-y-1/2 -translate-x-1/2 pointer-events-none"}),e.jsx("button",{onClick:l,className:"absolute top-5 left-5 p-2 bg-white/10 hover:bg-white/20 rounded-full transition-all text-white/80 hover:text-white backdrop-blur-md",children:e.jsx(Ze,{size:20})}),e.jsxs("div",{className:"relative z-10 flex flex-col items-center text-center mt-2",children:[e.jsxs("div",{className:"relative mb-4",children:[e.jsx("div",{className:"w-24 h-24 bg-white text-blue-900 rounded-full flex items-center justify-center text-4xl font-bold shadow-xl border-4 border-white/20 backdrop-blur-sm",children:n.fullName.charAt(0)}),e.jsx("div",{className:`absolute bottom-0 right-0 w-7 h-7 rounded-full border-4 border-slate-900 flex items-center justify-center text-white text-[10px]
                                ${n.status==="titulaire"?"bg-emerald-500":n.status==="contractuel"?"bg-orange-500":"bg-blue-500"}`,title:n.status==="titulaire"?"":" ",children:e.jsx(Er,{size:14})})]}),e.jsx("h2",{className:"text-2xl font-bold font-serif tracking-wide",children:n.fullName}),e.jsxs("div",{className:"flex items-center gap-2 mt-2 text-blue-200 text-xs font-medium bg-blue-950/50 px-3 py-1 rounded-full border border-blue-800/50",children:[e.jsx(_r,{size:12}),e.jsx("span",{children:n.rank})]})]})]}),e.jsxs("div",{className:"px-6 -mt-6 relative z-20 grid grid-cols-3 gap-3",children:[e.jsxs("div",{className:"bg-white p-3 rounded-xl shadow-md border border-gray-100 flex flex-col items-center justify-center text-center",children:[e.jsx("span",{className:"text-[10px] text-gray-400 font-bold uppercase tracking-wider mb-1",children:""}),e.jsx("span",{className:"text-xl font-bold text-slate-800",children:n.echelon||"-"})]}),e.jsxs("div",{className:"bg-white p-3 rounded-xl shadow-md border border-gray-100 flex flex-col items-center justify-center text-center",children:[e.jsx("span",{className:"text-[10px] text-gray-400 font-bold uppercase tracking-wider mb-1",children:""}),e.jsxs("div",{className:"flex items-baseline gap-0.5",children:[e.jsx("span",{className:`text-xl font-bold ${n.lastMark>=16?"text-emerald-600":n.lastMark>=13?"text-blue-600":"text-orange-600"}`,children:n.lastMark}),e.jsx("span",{className:"text-[10px] text-gray-400",children:"/20"})]})]}),e.jsxs("div",{className:"bg-white p-3 rounded-xl shadow-md border border-gray-100 flex flex-col items-center justify-center text-center",children:[e.jsx("span",{className:"text-[10px] text-gray-400 font-bold uppercase tracking-wider mb-1",children:""}),e.jsxs("span",{className:"text-xl font-bold text-indigo-700",children:[P," ",e.jsx("span",{className:"text-[10px] font-normal text-gray-400",children:""})]})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[e.jsxs("div",{className:"bg-amber-50/50 border border-amber-100 rounded-2xl p-4 mb-8 relative group focus-within:ring-2 focus-within:ring-amber-200 transition-all",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-amber-800 font-bold text-sm",children:[e.jsx(Dt,{size:14,className:"text-amber-600"})," "]}),m!==n.privateNotes&&e.jsxs("button",{onClick:A,className:"text-[10px] bg-amber-500 text-white px-2 py-1 rounded flex items-center gap-1 hover:bg-amber-600 transition-colors",children:[e.jsx(Zt,{size:10})," "]})]}),e.jsx("textarea",{value:m,onChange:K=>b(K.target.value),onBlur:A,className:"w-full bg-transparent text-sm text-gray-700 outline-none resize-none placeholder:text-gray-400/70",placeholder:"          (    )...",rows:3})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx("div",{className:"p-2 bg-indigo-50 text-indigo-600 rounded-lg",children:e.jsx(wh,{size:20})}),e.jsx("h3",{className:"font-bold text-gray-800 text-lg",children:" "})]}),e.jsxs("div",{className:"relative border-r-2 border-indigo-100 mr-3 space-y-8 pb-2",children:[e.jsxs("div",{className:"relative pr-8 group",children:[e.jsx("div",{className:"absolute -right-[9px] top-1 w-4 h-4 bg-white rounded-full border-[3px] border-gray-300 group-hover:border-indigo-500 transition-colors z-10"}),e.jsxs("div",{className:"bg-white p-4 rounded-2xl shadow-sm border border-gray-100 hover:shadow-md transition-all hover:border-indigo-100 group-hover:translate-x-[-4px]",children:[e.jsxs("div",{className:"flex justify-between items-start mb-1",children:[e.jsx("p",{className:"font-bold text-gray-800 text-sm",children:" "}),e.jsx("span",{className:"text-[10px] font-mono bg-gray-100 text-gray-600 px-2 py-0.5 rounded-full",children:E(n.recruitmentDate)})]}),e.jsxs("p",{className:"text-xs text-gray-500 flex items-center gap-1",children:[e.jsx(vs,{size:12,className:"text-gray-400"}),"  "]})]})]}),n.status==="stagiere"&&e.jsxs("div",{className:"relative pr-8 group",children:[e.jsx("div",{className:"absolute -right-[9px] top-1 w-4 h-4 bg-white rounded-full border-[3px] border-blue-300 group-hover:border-blue-500 transition-colors z-10"}),e.jsxs("div",{className:"bg-blue-50/30 p-4 rounded-2xl shadow-sm border border-blue-100 hover:shadow-md transition-all group-hover:translate-x-[-4px]",children:[e.jsx("div",{className:"flex justify-between items-center mb-1",children:e.jsxs("p",{className:"font-bold text-blue-900 text-sm flex items-center gap-1",children:[e.jsx(tc,{size:14}),"   "]})}),e.jsx("div",{className:"flex items-center gap-2 mt-2",children:e.jsx("input",{type:"date",value:f,onChange:K=>x(K.target.value),onBlur:C,className:"bg-white border border-blue-200 rounded px-2 py-1 text-xs outline-none focus:ring-1 focus:ring-blue-400 flex-1"})}),e.jsx("p",{className:"text-[9px] text-blue-600 mt-1",children:"     "})]})]}),n.currentRankDate&&e.jsxs("div",{className:"relative pr-8 group",children:[e.jsx("div",{className:"absolute -right-[9px] top-1 w-4 h-4 bg-white rounded-full border-[3px] border-purple-300 group-hover:border-purple-500 transition-colors z-10"}),e.jsxs("div",{className:"bg-white p-4 rounded-2xl shadow-sm border border-gray-100 hover:shadow-md transition-all hover:border-purple-100 group-hover:translate-x-[-4px]",children:[e.jsxs("div",{className:"flex justify-between items-start mb-1",children:[e.jsx("p",{className:"font-bold text-gray-800 text-sm",children:"   "}),e.jsx("span",{className:"text-[10px] font-mono bg-purple-50 text-purple-700 px-2 py-0.5 rounded-full",children:E(n.currentRankDate)})]}),e.jsxs("p",{className:"text-xs text-gray-500 flex items-center gap-1",children:[e.jsx(fN,{size:12,className:"text-purple-400"}),n.rank]})]})]}),n.lastInspectionDate&&e.jsxs("div",{className:"relative pr-8 group",children:[e.jsx("div",{className:"absolute -right-[9px] top-1 w-4 h-4 bg-blue-100 rounded-full border-[3px] border-blue-500 z-10 shadow-sm"}),e.jsxs("div",{className:"bg-blue-50/50 p-4 rounded-2xl shadow-sm border border-blue-100 hover:shadow-md transition-all group-hover:translate-x-[-4px]",children:[e.jsxs("div",{className:"flex justify-between items-start mb-1",children:[e.jsx("p",{className:"font-bold text-blue-900 text-sm",children:"  "}),e.jsx("span",{className:"text-[10px] font-mono bg-white text-blue-700 px-2 py-0.5 rounded-full shadow-sm border border-blue-100",children:E(n.lastInspectionDate)})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsxs("div",{className:"flex items-center gap-1 bg-white px-2 py-1 rounded-lg border border-blue-100",children:[e.jsx(Ib,{size:12,className:"text-yellow-500 fill-yellow-500"}),e.jsx("span",{className:"text-xs font-bold text-gray-700",children:n.lastMark})]}),e.jsx("span",{className:"text-[10px] text-blue-400",children:" "})]})]})]}),O&&n.status==="titulaire"&&e.jsxs("div",{className:"relative pr-8 group",children:[e.jsx("div",{className:`absolute -right-[9px] top-1 w-4 h-4 rounded-full border-[3px] z-10 ${z?"bg-orange-100 border-orange-500 animate-pulse":"bg-gray-100 border-gray-300"}`}),e.jsxs("div",{className:`p-4 rounded-2xl border border-dashed transition-all group-hover:translate-x-[-4px] ${z?"bg-orange-50/50 border-orange-300":"bg-transparent border-gray-300"}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-1",children:[e.jsxs("p",{className:`font-bold text-sm ${z?"text-orange-800":"text-gray-500"}`,children:["  ( ",parseInt(n.echelon||"0")+1,")"]}),z&&e.jsx(Os,{size:14,className:"text-orange-500"})]}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1 flex items-center gap-1",children:[e.jsx(Nr,{size:12}),"  : ",E(n.echelonDate||"")]}),z&&e.jsx("p",{className:"text-[10px] font-bold text-orange-600 mt-2 bg-white/50 inline-block px-2 py-1 rounded",children:"  (  )"})]})]})]})]}),e.jsxs("div",{className:"p-6 bg-white border-t border-gray-100 shrink-0 space-y-3 shadow-[0_-10px_40px_rgba(0,0,0,0.05)] relative z-30",children:[e.jsxs("button",{onClick:()=>i(n),className:"w-full bg-slate-900 text-white font-bold text-base py-3.5 rounded-xl shadow-lg shadow-slate-900/20 hover:bg-slate-800 transition-all flex items-center justify-center gap-3 hover:scale-[1.01] active:scale-[0.99] group",children:[e.jsx("span",{className:"group-hover:translate-x-1 transition-transform",children:"   "}),e.jsx(Fl,{size:18,className:"text-blue-400"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o&&e.jsxs("button",{onClick:()=>o(n),className:"w-full bg-amber-500 text-white font-bold text-xs py-3 rounded-xl shadow-md hover:bg-amber-600 transition-all flex items-center justify-center gap-2 border-b-4 border-amber-700 active:border-b-0 active:translate-y-1 group",children:[e.jsx(Zu,{size:18,className:"text-amber-100 group-hover:rotate-12 transition-transform"}),e.jsx("span",{children:" "})]}),n.status==="stagiere"&&c?e.jsxs("button",{onClick:()=>c(n),className:"w-full bg-emerald-600 text-white font-bold text-xs py-3 rounded-xl shadow-md hover:bg-emerald-700 transition-all flex items-center justify-center gap-2 border-b-4 border-emerald-800 active:border-b-0 active:translate-y-1",children:[e.jsx(tc,{size:16}),e.jsx("span",{children:" "})]}):e.jsx("button",{onClick:l,className:"w-full text-slate-400 font-bold text-xs py-3 hover:text-slate-600 transition-colors",children:" "})]})]})]})]})},Xo=n=>{if(n==null)return null;const t=String(n).trim();return t.length>5?null:["",""].includes(t)?"A":[""].includes(t)?"B":[""].includes(t)?"C":[""].includes(t)?"D":t.toUpperCase()==="A"?"A":t.toUpperCase()==="B"?"B":t.toUpperCase()==="C"?"C":t.toUpperCase()==="D"?"D":null},Kg=n=>n?n.replace(/["']/g,"").replace(/\s+/g," ").trim():"",dA=n=>n?String(n).trim().replace(/[]/g,"").replace(//g,"").replace(//g,"").replace(//g,"").replace(/\s+/g," "):"",yr=n=>{if(!n)return!1;const t=String(n).toLowerCase();return t.includes("")||t.includes("")||t.includes("")||t.includes("")||t.includes("total")||t.includes("general")},uA=(n,t,l)=>{if(typeof XLSX>"u")return console.error("SheetJS not loaded."),[];const i=[],o=XLSX.read(n,{type:"array"}),c=o.SheetNames[0],u=o.Sheets[c],f=XLSX.utils.sheet_to_json(u,{header:1});if(!f||f.length===0)return[];for(let x=0;x<f.length;x++){const m=f[x];if(!m||m.length<2)continue;let b="";const y=[];let N=-1;for(let C=0;C<Math.min(m.length,6);C++){const A=String(m[C]||"").trim();if(/^[\d\/\-\.]+$/.test(A)||A.length<3||Xo(A))continue;if(yr(A)){b="";break}const E=String(m[C+1]||"").trim(),R=!!Xo(E);if(E.length>2&&!R&&!yr(E)&&!/^[\d\/\-\.]+$/.test(E)?b=Kg(A+" "+E):b=Kg(A),b){N=C;break}}if(!(b.includes("")||b.includes("")||yr(b))&&b){for(let C=0;C<m.length;C++){if(C<=N)continue;const A=Xo(m[C]);A&&y.push(A)}t==="2AP"?l.includes("")&&y.length>=8?i.push({id:Math.random().toString(36).substr(2,9),fullName:b,results:{reading_performance:{1:y[0],2:y[1],3:y[2]},written_comprehension:{1:y[3],2:y[4],3:y[5],4:y[6],5:y[7]}}}):l.includes("")&&y.length>=6&&i.push({id:Math.random().toString(36).substr(2,9),fullName:b,results:{control_numbers:{1:y[0],2:y[1]},problem_solving:{1:y[2],2:y[3],3:y[4],4:y[5]}}}):t==="4AP"?l.includes("")&&y.length>=19?i.push({id:Math.random().toString(36).substr(2,9),fullName:b,results:{oral_comms:{1:y[0],2:y[1],3:y[2],4:y[3],5:y[4]},reading_perf:{1:y[5],2:y[6],3:y[7],4:y[8]},written_comp:{1:y[9],2:y[10],3:y[11],4:y[12],5:y[13]},written_prod:{1:y[14],2:y[15],3:y[16],4:y[17],5:y[18]}}}):l.includes("")&&y.length>=7&&i.push({id:Math.random().toString(36).substr(2,9),fullName:b,results:{control_resources:{1:y[0],2:y[1],3:y[2]},methodological_solving:{1:y[3],2:y[4],3:y[5],4:y[6]}}}):t==="5AP"&&l.includes("")&&y.length>=26&&i.push({id:Math.random().toString(36).substr(2,9),fullName:b,results:{oral_comms:{1:y[0],2:y[1],3:y[2],4:y[3],5:y[4],6:y[5]},reading_perf:{1:y[6],2:y[7],3:y[8],4:y[9]},written_comp:{1:y[10],2:y[11],3:y[12],4:y[13],5:y[14],6:y[15],7:y[16],8:y[17],9:y[18]},written_prod:{1:y[19],2:y[20],3:y[21],4:y[22],5:y[23],6:y[24],7:y[25]}}})}}return i},hA=n=>{if(typeof XLSX>"u")return{students:[],detectedColumns:[]};const t=XLSX.read(n,{type:"array"}),l=t.SheetNames[0],i=t.Sheets[l],o=XLSX.utils.sheet_to_json(i,{header:1});if(!o||o.length===0)return{students:[],detectedColumns:[]};let c=-1;const u={},f=[],x={:" ",:" ",:" ",:" ",:" ",:" ",:"",:" ",:" ",:"",:"",:" ",:" ",:" "};for(let b=0;b<Math.min(o.length,10);b++){const y=o[b];if(!y)continue;let N=0;if(y.forEach((C,A)=>{const E=dA(String(C));for(const[R,P]of Object.entries(x))if(E.includes(R)){u[P]||(u[P]=A,f.push(P),N++);break}}),N>=3){c=b;break}}if(c===-1)throw new Error("     .        ( ...).");const m=[];for(let b=c+1;b<o.length;b++){const y=o[b];if(!y)continue;const N=String(y[0]).trim();if(yr(N)||yr(String(y[1]||"")))continue;const C={id:Math.random().toString(36).substr(2,9)+"_"+b,number:parseInt(N)||0,subjects:{}};let A=0;Object.entries(u).forEach(([E,R])=>{const P=y[R],O=Xo(P);O&&(C.subjects[E]=O,A++)}),A>=3&&m.push(C)}return{students:m,detectedColumns:f}},qh="mufattish_acq_db",Oh="mufattish_acq_global_db",Cn=()=>{const n=localStorage.getItem(qh);if(!n)return{records:[]};try{return JSON.parse(n)}catch{return{records:[]}}},Qg=n=>{const t=Cn(),l=t.records.findIndex(i=>i.id===n.id);l>=0?t.records[l]=n:t.records.push(n),localStorage.setItem(qh,JSON.stringify(t))},Xg=n=>{const t=Cn();t.records=t.records.filter(l=>l.id!==n),localStorage.setItem(qh,JSON.stringify(t))},ql=()=>{const n=localStorage.getItem(Oh);if(!n)return{records:[]};try{return JSON.parse(n)}catch{return{records:[]}}},Zg=n=>{const t=ql(),l=t.records.findIndex(i=>i.schoolName===n.schoolName);l>=0?t.records[l]=n:t.records.push(n),localStorage.setItem(Oh,JSON.stringify(t))},fA=n=>{const t=ql();t.records=t.records.filter(l=>l.id!==n),localStorage.setItem(Oh,JSON.stringify(t))},Fa={id:"arabic_y2",label:"  ( )",competencies:[{id:"reading_performance",label:"  ",criteria:[{id:1,label:"   "},{id:2,label:"   ( )"},{id:3,label:"    (  )"}]},{id:"written_comprehension",label:"  ",criteria:[{id:1,label:"    "},{id:2,label:"       "},{id:3,label:"      ( )"},{id:4,label:"     "},{id:5,label:"   ()"}]}]},Cv={distribution:{title:"  ( )",concept:"      ( ).        ()     ()    (/).",method:"      (   )    (+)   (+)."},homogeneity:{title:" ",concept:"          .       .",method:"   (Standard Deviation)  . (  15:   /   25: )."},matrix:{title:"  (/)",concept:"    ' ' ( /)  ' ' ().     (      ).",method:"   4         (/  50%)."}},xA=({records:n,scope:t,contextName:l})=>{const[i,o]=k.useState(null),[c,u]=k.useState(null),[f,x]=k.useState(null),[m,b]=k.useState(!1),[y,N]=k.useState(null),[C,A]=k.useState({}),[E,R]=k.useState(null);k.useEffect(()=>{const _=`mufattish_analysis_y2_arabic_${l}_${t}`,M=localStorage.getItem(_);if(M)try{A(JSON.parse(M))}catch(j){console.error("Failed to load custom analysis",j)}},[l,t]);const P=(_,M)=>{const j={...C,[_]:M};A(j),localStorage.setItem(`mufattish_analysis_y2_arabic_${l}_${t}`,JSON.stringify(j)),N(null)},O=_=>{const M={...C};delete M[_],A(M),localStorage.setItem(`mufattish_analysis_y2_arabic_${l}_${t}`,JSON.stringify(M))},z=k.useMemo(()=>n.flatMap(_=>_.students.map(M=>({...M,className:_.className,schoolName:_.schoolName}))),[n]),K=z.length,G=(_,M,j)=>{if(!_.results)return null;const T=_.results[M];return T?T[j]||T[String(j)]:null},F=k.useMemo(()=>z.map(_=>{let M=0,j=0,T=0,L=0,H=0,Z=0;Fa.competencies.forEach(we=>{we.criteria.forEach(xe=>{const Ne=G(_,we.id,xe.id);if(Ne){const Ae=Ne==="A"?3:Ne==="B"?2:Ne==="C"?1:0;j+=3,M+=Ae,we.id==="reading_performance"?(T+=Ae,L+=3):(H+=Ae,Z+=3)}})});const de=j>0?M/j*100:0,fe=L>0?T/L*100:0,je=Z>0?H/Z*100:0;return{..._,percent:de,oralPct:fe,writtenPct:je}}),[z]),$=k.useMemo(()=>{let _=0,M=0,j=0;return F.forEach(T=>{T.percent>=66?_++:T.percent>=33?M++:j++}),{controlled:_,partial:M,limited:j}},[F]),B=k.useMemo(()=>{if(F.length===0)return 0;const _=F.reduce((j,T)=>j+T.percent,0)/F.length,M=F.reduce((j,T)=>j+Math.pow(T.percent-_,2),0)/F.length;return Math.sqrt(M)},[F]),q=k.useMemo(()=>{const _={A:0,B:0,C:0,D:0,total:0};return z.forEach(M=>{Fa.competencies.forEach(j=>{j.criteria.forEach(T=>{const L=G(M,j.id,T.id);L&&(_[L]++,_.total++)})})}),_.total===0&&(_.total=1),_},[z]),J=k.useMemo(()=>{const _={balanced_high:0,rote_reading:0,struggling:0,decoding_issue:0,total:0};return F.forEach(M=>{const j=M.oralPct>=50,T=M.writtenPct>=50;j&&T?_.balanced_high++:j&&!T?_.rote_reading++:!j&&!T?_.struggling++:_.decoding_issue++,_.total++}),_},[F]),Q=k.useMemo(()=>Fa.competencies.flatMap(_=>_.criteria.map(M=>{const j={A:0,B:0,C:0,D:0,total:0};z.forEach(L=>{const H=G(L,_.id,M.id);H&&(j[H]++,j.total++)});const T=j.total?(j.A+j.B)/j.total*100:0;return{...M,compId:_.id,stats:j,successRate:T}})).sort((_,M)=>_.successRate-M.successRate),[z]),U=_=>{if(_==="distribution"){const M=q.A,j=q.B,T=q.C+q.D,L=q.total||1;let H=M+j>T?"    ( ).                 .":"    ().           .";return{reading:` : ${Math.round(M/L*100)}% |  : ${Math.round(j/L*100)}% | : ${Math.round(T/L*100)}%`,diagnosis:H,recommendation:M+j>T?"       .":"   ."}}if(_==="homogeneity"){let M="";return B<15?M="  :    .      .":B<25?M="  ( ):         .":M="  ( ):      .    .",{reading:` : ${B.toFixed(2)}`,diagnosis:M,recommendation:B>25?"   ()  .":"      ."}}if(_==="matrix"){const M=J.total||1,j=Math.round(J.rote_reading/M*100),T=Math.round(J.decoding_issue/M*100);let L=j>20?":       ' '.         .":"      .";return{reading:` : ${j}% |    : ${T}%`,diagnosis:L,recommendation:j>20?"     .":"   ."}}return{reading:"",diagnosis:"",recommendation:""}},ae=_=>C[_]||U(_),se=(_,M,j)=>{const T=_.currentTarget.getBoundingClientRect();u({x:T.left+T.width/2,y:T.top-15,text:j,title:M})},ne=()=>{u(null)},w=({section:_})=>e.jsx("button",{onClick:M=>{M.stopPropagation(),o(_)},className:"absolute top-4 left-4 p-2 bg-slate-100 hover:bg-indigo-100 text-slate-500 hover:text-indigo-600 rounded-full transition-all duration-300 opacity-0 group-hover:opacity-100 transform scale-90 group-hover:scale-100 z-10 shadow-sm",title:"  ",children:e.jsx(en,{size:18})}),D=_=>_.includes(" ")?"         .    .":_.includes(" ")?"       .     .":_.includes(" ")?" .   .":_.includes(" ")?"      .    .":"      .",V=(_,M)=>{const j=_.oralPct,T=_.writtenPct,L=j-T;let H="",Z="",de="";L>20?(H="  ()",Z="          .",de="   ' '   ."):L<-20?(H="   ",Z="         .",de="     ' '."):j<40&&T<40?(H=" ",Z="      .",de="    ( )."):(H=" ",Z="      .",de="   .");let fe;M&&(fe={label:M.label,advice:D(M.label)}),R({studentName:_.fullName,profileType:H,diagnosis:Z,remedy:de,scores:{oral:j,written:T},gap:L,clickedCriterion:fe})},Y=()=>{if(!i)return null;const _=Cv[i],M=ae(i);let j=null;switch(i){case"distribution":const T=q.A,L=q.B,H=q.C+q.D,Z=q.total;j=e.jsx("div",{className:"h-full flex flex-col items-center justify-center p-4 w-full",children:e.jsxs("div",{className:"grid grid-cols-3 gap-4 w-full max-w-2xl",children:[e.jsxs("div",{className:"bg-emerald-500/20 p-4 rounded-2xl border border-emerald-500/50 text-center",children:[e.jsxs("span",{className:"block text-4xl font-bold text-emerald-400 mb-2",children:[Math.round(T/Z*100),"%"]}),e.jsx("span",{className:"text-sm text-emerald-200",children:" "})]}),e.jsxs("div",{className:"bg-blue-500/20 p-4 rounded-2xl border border-blue-500/50 text-center",children:[e.jsxs("span",{className:"block text-4xl font-bold text-blue-400 mb-2",children:[Math.round(L/Z*100),"%"]}),e.jsx("span",{className:"text-sm text-blue-200",children:" "})]}),e.jsxs("div",{className:"bg-red-500/20 p-4 rounded-2xl border border-red-500/50 text-center",children:[e.jsxs("span",{className:"block text-4xl font-bold text-red-400 mb-2",children:[Math.round(H/Z*100),"%"]}),e.jsx("span",{className:"text-sm text-red-200",children:" (+)"})]})]})});break;case"homogeneity":j=e.jsxs("div",{className:"h-full flex flex-col items-center justify-center p-4 w-full",children:[e.jsx("div",{className:"relative w-80 h-40 bg-gray-700/50 rounded-t-full overflow-hidden mb-8 border-t-4 border-x-4 border-slate-600",children:e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-full origin-bottom transition-transform duration-1000",style:{transform:`rotate(${Math.min(B,40)/40*180-90}deg)`},children:e.jsx("div",{className:"w-2 h-full bg-white mx-auto shadow-[0_0_15px_white]"})})}),e.jsx("span",{className:"text-6xl font-bold text-purple-400 font-mono",children:B.toFixed(2)})]});break;case"matrix":j=e.jsx("div",{className:"h-full flex items-center justify-center w-full",children:e.jsxs("div",{className:"aspect-square w-[400px] relative bg-slate-700/30 rounded-2xl border border-slate-600 p-4 grid grid-cols-2 grid-rows-2 gap-2",children:[e.jsxs("div",{className:"bg-blue-500/20 rounded flex flex-col items-center justify-center border border-blue-500/30",children:[e.jsxs("span",{className:"text-2xl font-bold text-blue-400",children:[Math.round(J.decoding_issue/J.total*100),"%"]}),e.jsx("span",{className:"text-sm text-blue-300",children:"   "})]}),e.jsxs("div",{className:"bg-emerald-500/20 rounded flex flex-col items-center justify-center border border-emerald-500/30",children:[e.jsxs("span",{className:"text-2xl font-bold text-emerald-400",children:[Math.round(J.balanced_high/J.total*100),"%"]}),e.jsx("span",{className:"text-sm text-emerald-300",children:" "})]}),e.jsxs("div",{className:"bg-red-500/20 rounded flex flex-col items-center justify-center border border-red-500/30",children:[e.jsxs("span",{className:"text-2xl font-bold text-red-400",children:[Math.round(J.struggling/J.total*100),"%"]}),e.jsx("span",{className:"text-sm text-red-300",children:" "})]}),e.jsxs("div",{className:"bg-yellow-500/20 rounded flex flex-col items-center justify-center border border-yellow-500/30",children:[e.jsxs("span",{className:"text-2xl font-bold text-yellow-400",children:[Math.round(J.rote_reading/J.total*100),"%"]}),e.jsx("span",{className:"text-sm text-yellow-300",children:" "})]})]})});break}return e.jsxs("div",{className:"fixed inset-0 z-[100] bg-slate-950 text-white flex animate-in zoom-in-95 duration-300 overflow-hidden",children:[e.jsx("button",{onClick:()=>o(null),className:"absolute top-6 left-6 p-2 bg-white/10 hover:bg-white/20 rounded-full z-50 text-white transition-all",children:e.jsx(tn,{size:24})}),e.jsxs("div",{className:"w-[400px] lg:w-[35%] bg-slate-900 border-l border-slate-800 p-8 flex flex-col shadow-2xl relative z-40 overflow-y-auto",children:[e.jsx("div",{className:"mb-8 pb-6 border-b border-slate-800",children:e.jsx("h2",{className:"text-2xl font-bold text-white font-serif",children:_.title})}),e.jsxs("div",{className:"space-y-8 flex-1",children:[e.jsxs("div",{className:"relative pl-4 border-r-2 border-indigo-500/50 pr-4",children:[e.jsxs("h4",{className:"text-indigo-400 font-bold uppercase text-xs mb-2 flex items-center gap-2",children:[e.jsx($t,{size:14}),"   "]}),e.jsx("p",{className:"text-slate-300 leading-relaxed text-sm text-justify",children:M.reading})]}),e.jsxs("div",{className:"relative pl-4 border-r-2 border-amber-500/50 pr-4 bg-amber-500/5 p-4 rounded-l-xl",children:[e.jsxs("h4",{className:"text-amber-400 font-bold uppercase text-xs mb-2 flex items-center gap-2",children:[e.jsx(Qt,{size:14}),"  "]}),e.jsx("p",{className:"text-slate-200 leading-relaxed text-sm font-medium text-justify",children:M.diagnosis})]}),e.jsxs("div",{className:"relative pl-4 border-r-2 border-emerald-500/50 pr-4",children:[e.jsxs("h4",{className:"text-emerald-400 font-bold uppercase text-xs mb-2 flex items-center gap-2",children:[e.jsx(vt,{size:14}),"  "]}),e.jsx("p",{className:"text-slate-300 leading-relaxed text-sm text-justify",children:M.recommendation})]})]}),e.jsx("div",{className:"mt-8 pt-6 border-t border-slate-800 text-center",children:e.jsx("p",{className:"text-xs text-slate-500",children:"     2025"})})]}),e.jsxs("div",{className:"flex-1 bg-gradient-to-br from-slate-900 to-slate-950 flex flex-col items-center p-8 relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 opacity-10",style:{backgroundImage:"radial-gradient(circle at 2px 2px, white 1px, transparent 0)",backgroundSize:"40px 40px"}}),e.jsx("div",{className:"w-full max-w-3xl z-20 mb-4 mt-2 animate-in slide-in-from-top-4 shrink-0",children:e.jsxs("div",{className:"bg-white/5 backdrop-blur-md rounded-lg p-3 border border-white/10 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 p-1.5 bg-indigo-500/20 rounded-bl-lg border-b border-l border-white/10",children:e.jsx(it,{size:14,className:"text-indigo-300"})}),e.jsxs("div",{className:"space-y-2 pt-1",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-[11px] font-bold text-indigo-300 uppercase mb-0.5",children:" "}),e.jsx("p",{className:"text-xs text-white/90 leading-relaxed",children:_.concept})]}),e.jsxs("div",{className:"pt-2 border-t border-white/10",children:[e.jsxs("h4",{className:"text-[10px] font-bold text-slate-400 uppercase mb-0.5 flex items-center gap-1",children:[e.jsx(An,{size:10}),"  "]}),e.jsx("p",{className:"text-[10px] text-slate-400 leading-relaxed font-mono opacity-80",children:_.method})]})]})]})}),e.jsx("div",{className:"relative z-10 w-full flex-1 flex items-center justify-center min-h-0",children:j})]})]})},le=()=>{if(!y||!m)return null;const _=ae(y);return e.jsx(Wg,{section:y,initialData:_,onSave:M=>P(y,M),onReset:()=>O(y),onClose:()=>N(null)})};return K===0?e.jsx("div",{className:"text-center p-10 text-gray-400",children:"  "}):e.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-700 pb-24 relative",children:[c&&e.jsxs("div",{className:"fixed z-[9999] pointer-events-none bg-slate-900 text-white px-3 py-2 rounded-lg shadow-xl text-xs max-w-xs border border-slate-700",style:{left:c.x,top:c.y,transform:"translate(-50%, -100%)"},children:[c.title&&e.jsx("div",{className:"font-bold border-b border-slate-600 pb-1 mb-1 text-yellow-400",children:c.title}),e.jsx("div",{children:c.text}),e.jsx("div",{className:"absolute -bottom-1.5 left-1/2 -translate-x-1/2 w-3 h-3 bg-slate-900 rotate-45 border-r border-b border-slate-700"})]}),Y(),le(),e.jsxs("div",{className:"bg-white rounded-3xl shadow-xl border border-slate-100 overflow-hidden",children:[e.jsxs("div",{className:"bg-slate-900 text-white p-8 relative",children:[e.jsx("div",{className:"absolute top-0 right-0 p-10 opacity-10",children:e.jsx(Ds,{size:150})}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("div",{className:"flex items-center gap-2 mb-2 text-indigo-300 font-bold uppercase tracking-widest text-xs",children:t==="district"?"  ":t==="school"?" ":" "}),e.jsx("h2",{className:"text-4xl font-bold font-serif mb-2",children:Fa.label}),e.jsxs("p",{className:"text-slate-400 text-lg flex items-center gap-2",children:[e.jsx(Et,{size:18})," ",l]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 divide-y md:divide-y-0 md:divide-x md:divide-x-reverse divide-slate-100",children:[e.jsxs("div",{className:"p-6 flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-emerald-100 text-emerald-600 flex items-center justify-center",children:e.jsx(vt,{size:24})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase",children:" "}),e.jsxs("p",{className:"text-2xl font-bold text-emerald-700",children:[Math.round($.controlled/K*100),"%"]})]})]}),e.jsxs("div",{className:"p-6 flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-orange-100 text-orange-600 flex items-center justify-center",children:e.jsx(Kl,{size:24})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase",children:" "}),e.jsxs("p",{className:"text-2xl font-bold text-orange-700",children:[Math.round($.partial/K*100),"%"]})]})]}),e.jsxs("div",{className:"p-6 flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-red-100 text-red-600 flex items-center justify-center",children:e.jsx(ys,{size:24})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase",children:" "}),e.jsxs("p",{className:"text-2xl font-bold text-red-700",children:[Math.round($.limited/K*100),"%"]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-slate-200 cursor-pointer hover:shadow-lg hover:border-blue-300 transition-all group relative",onClick:()=>o("distribution"),onMouseEnter:_=>se(_," ","     ."),onMouseLeave:ne,children:[e.jsx(w,{section:"distribution"}),e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("h3",{className:"font-bold text-lg text-slate-800 flex items-center gap-2",children:[e.jsx($t,{size:20,className:"text-blue-500"})," "]}),e.jsx(it,{size:16,className:"text-slate-300 group-hover:text-blue-500 transition-colors"})]}),e.jsx("div",{className:"flex items-end gap-4 h-40",children:["A","B","C","D"].map(_=>{const M=q[_],j=q.total>0?M/q.total*100:0,T=_==="A"?"bg-emerald-500":_==="B"?"bg-blue-500":_==="C"?"bg-orange-500":"bg-red-500";return e.jsxs("div",{className:"flex-1 flex flex-col justify-end items-center h-full",children:[e.jsx("div",{className:`w-full rounded-t-lg ${T}`,style:{height:`${Math.max(j,5)}%`}}),e.jsx("span",{className:"mt-2 font-bold text-slate-600 text-xs",children:_})]},_)})})]}),e.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-slate-200 cursor-pointer hover:shadow-lg hover:border-purple-300 transition-all group relative",onClick:()=>o("homogeneity"),onMouseEnter:_=>se(_," ","     ."),onMouseLeave:ne,children:[e.jsx(w,{section:"homogeneity"}),e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("h3",{className:"font-bold text-lg text-slate-800 flex items-center gap-2",children:[e.jsx(Gs,{size:20,className:"text-purple-500"})," "]}),e.jsx(it,{size:16,className:"text-slate-300 group-hover:text-purple-500 transition-colors"})]}),e.jsx("div",{className:"flex justify-center items-center py-6",children:e.jsx("div",{className:"relative w-48 h-24 bg-gray-100 rounded-t-full overflow-hidden",children:e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-full origin-bottom transition-transform duration-1000",style:{transform:`rotate(${Math.min(B,40)/40*180-90}deg)`},children:e.jsx("div",{className:"w-1 h-full bg-slate-800 mx-auto"})})})}),e.jsx("div",{className:"text-center text-3xl font-bold text-purple-700",children:B.toFixed(1)})]}),e.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-slate-200 cursor-pointer hover:shadow-lg hover:border-teal-300 transition-all group relative lg:col-span-3 xl:col-span-1",onClick:()=>o("matrix"),children:[e.jsx(w,{section:"matrix"}),e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("h3",{className:"font-bold text-lg text-slate-800 flex items-center gap-2",children:[e.jsx(Yl,{size:20,className:"text-teal-500"}),"  "]}),e.jsx(it,{size:16,className:"text-slate-300 group-hover:text-teal-500 transition-colors"})]}),e.jsxs("div",{className:"flex gap-6 items-center justify-center relative",children:[f&&e.jsxs("div",{className:"absolute -top-16 left-1/2 -translate-x-1/2 z-20 bg-slate-800/90 text-white p-2 rounded text-xs w-40 text-center animate-in zoom-in-95 duration-200 pointer-events-none",children:[f==="q1"&&"    (  /  )",f==="q2"&&"  ()",f==="q3"&&"  ( )",f==="q4"&&"  ()",e.jsx("div",{className:"absolute bottom-[-6px] left-1/2 -translate-x-1/2 w-2 h-2 bg-slate-800/90 rotate-45"})]}),e.jsxs("div",{className:"aspect-square w-52 relative bg-slate-50 rounded-xl border border-slate-200 p-2 grid grid-cols-2 grid-rows-2 gap-1 shrink-0",children:[e.jsx("div",{className:"bg-blue-100 rounded flex flex-col items-center justify-center hover:bg-blue-200 transition-colors",onMouseEnter:()=>x("q1"),onMouseLeave:()=>x(null),children:e.jsxs("span",{className:"text-xs font-bold text-blue-800",children:[Math.round(J.decoding_issue/J.total*100),"%"]})}),e.jsx("div",{className:"bg-emerald-100 rounded flex flex-col items-center justify-center hover:bg-emerald-200 transition-colors",onMouseEnter:()=>x("q2"),onMouseLeave:()=>x(null),children:e.jsxs("span",{className:"text-xs font-bold text-emerald-800",children:[Math.round(J.balanced_high/J.total*100),"%"]})}),e.jsx("div",{className:"bg-red-100 rounded flex flex-col items-center justify-center hover:bg-red-200 transition-colors",onMouseEnter:()=>x("q3"),onMouseLeave:()=>x(null),children:e.jsxs("span",{className:"text-xs font-bold text-red-800",children:[Math.round(J.struggling/J.total*100),"%"]})}),e.jsx("div",{className:"bg-yellow-100 rounded flex flex-col items-center justify-center hover:bg-yellow-200 transition-colors",onMouseEnter:()=>x("q4"),onMouseLeave:()=>x(null),children:e.jsxs("span",{className:"text-xs font-bold text-yellow-800",children:[Math.round(J.rote_reading/J.total*100),"%"]})})]})]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-slate-200",children:[e.jsxs("h3",{className:"font-bold text-lg text-slate-800 flex items-center gap-2 mb-6",children:[e.jsx(is,{size:20,className:"text-red-500"}),"  "]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Q.map((_,M)=>e.jsxs("div",{className:"bg-slate-50 rounded-xl p-4 border border-slate-100 relative overflow-hidden",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("span",{className:"text-[10px] text-slate-400 font-bold bg-white px-2 py-0.5 rounded border border-slate-100",children:_.compId==="reading_performance"?" ":" "}),e.jsxs("span",{className:`text-xs font-bold px-2 py-1 rounded ${_.successRate<50?"bg-red-100 text-red-600":"bg-green-100 text-green-600"}`,children:[Math.round(_.successRate),"% "]})]}),e.jsx("h4",{className:"font-bold text-slate-800 text-sm mb-3",children:_.label}),e.jsxs("div",{className:"flex h-2 rounded-full overflow-hidden",children:[e.jsx("div",{className:"bg-emerald-500",style:{width:`${_.stats.A/_.stats.total*100}%`}}),e.jsx("div",{className:"bg-blue-400",style:{width:`${_.stats.B/_.stats.total*100}%`}}),e.jsx("div",{className:"bg-orange-400",style:{width:`${_.stats.C/_.stats.total*100}%`}}),e.jsx("div",{className:"bg-red-400",style:{width:`${_.stats.D/_.stats.total*100}%`}})]})]},M))})]}),t==="class"&&e.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-red-100 border-t-4 border-t-red-500 mt-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h3",{className:"font-bold text-lg text-slate-800 flex items-center gap-2",children:[e.jsx(Bl,{size:20,className:"text-red-500"}),"   ( )"]}),e.jsx("span",{className:"bg-red-50 text-red-600 text-xs px-3 py-1 rounded-full font-bold",children:"  "})]}),e.jsx("div",{className:"masonry-grid grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Fa.competencies.map(_=>e.jsx(Ws.Fragment,{children:_.criteria.map(M=>{const j=z.filter(T=>G(T,_.id,M.id)==="D");return j.length===0?null:e.jsxs("div",{className:"bg-red-50/30 rounded-xl p-4 border border-red-100 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start gap-2 mb-3",children:[e.jsx("div",{className:"mt-1 w-2 h-2 rounded-full bg-red-500 shrink-0"}),e.jsx("h5",{className:"font-bold text-slate-700 text-xs leading-snug",children:M.label})]}),e.jsx("div",{className:"flex flex-wrap gap-1.5",children:j.map(T=>{const L=F.find(H=>H.id===T.id)||T;return e.jsx("button",{onClick:()=>V(L,M),className:"px-2 py-1 rounded text-[10px] font-bold bg-white text-red-700 border border-red-100 shadow-sm hover:bg-red-500 hover:text-white hover:border-red-500 transition-all cursor-pointer",children:T.fullName},T.id)})})]},`${_.id}-${M.id}`)})},_.id))})]}),e.jsx("div",{className:"fixed bottom-6 left-1/2 transform -translate-x-1/2 z-50",children:e.jsxs("button",{onClick:()=>b(!0),className:"flex items-center gap-2 bg-slate-800 hover:bg-slate-700 text-white px-8 py-4 rounded-2xl font-bold text-sm transition-all shadow-xl hover:shadow-2xl border-2 border-slate-700 hover:border-slate-600 hover:scale-105 group",children:[e.jsx(Tt,{size:18,className:"group-hover:rotate-12 transition-transform"}),e.jsx("span",{children:" "})]})}),m&&e.jsx("div",{className:"fixed inset-0 z-[110] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 animate-in fade-in",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full p-6 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6 border-b pb-4",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-xl text-slate-800 flex items-center gap-2",children:[e.jsx(Tt,{size:24,className:"text-indigo-600"}),"  "]}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"         "})]}),e.jsx("button",{onClick:()=>b(!1),className:"text-slate-400 hover:text-red-500",children:e.jsx(Ze,{})})]}),y?e.jsx(Wg,{section:y,initialData:ae(y),onSave:_=>P(y,_),onReset:()=>O(y),onClose:()=>N(null)}):e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("button",{onClick:()=>N("distribution"),className:"p-4 bg-slate-50 hover:bg-indigo-50 border rounded-xl text-right transition-colors group",children:e.jsx("span",{className:"font-bold text-slate-700 block group-hover:text-indigo-700",children:" "})}),e.jsx("button",{onClick:()=>N("homogeneity"),className:"p-4 bg-slate-50 hover:bg-indigo-50 border rounded-xl text-right transition-colors group",children:e.jsx("span",{className:"font-bold text-slate-700 block group-hover:text-indigo-700",children:" "})}),e.jsx("button",{onClick:()=>N("matrix"),className:"p-4 bg-slate-50 hover:bg-indigo-50 border rounded-xl text-right transition-colors group col-span-2",children:e.jsx("span",{className:"font-bold text-slate-700 block group-hover:text-indigo-700",children:" "})})]})]})}),Y(),E&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-in fade-in",onClick:()=>R(null),children:e.jsxs("div",{className:"bg-slate-900 w-full max-w-md rounded-3xl p-6 border border-slate-700 overflow-hidden flex flex-col max-h-[90vh]",onClick:_=>_.stopPropagation(),children:[e.jsxs("div",{className:"bg-gradient-to-r from-slate-900 to-slate-800 p-6 border-b border-slate-700 relative shrink-0",children:[e.jsx("button",{onClick:()=>R(null),className:"absolute left-4 top-4 text-slate-400 hover:text-white",children:e.jsx(Ze,{size:20})}),e.jsx("h3",{className:"text-xl font-bold text-white",children:E.studentName})]}),e.jsxs("div",{className:"p-6 space-y-6 overflow-y-auto",children:[e.jsxs("div",{className:"bg-slate-800/50 rounded-xl p-4 border border-slate-700",children:[e.jsx("p",{className:"text-lg font-bold text-white mb-1",children:E.profileType}),e.jsx("p",{className:"text-sm text-slate-300",children:E.diagnosis})]}),e.jsxs("div",{className:"bg-emerald-900/20 rounded-xl p-4 border border-emerald-800/50",children:[e.jsxs("h4",{className:"text-xs font-bold text-emerald-400 mb-2 flex items-center gap-2",children:[e.jsx(hl,{size:14}),"  "]}),e.jsx("p",{className:"text-sm text-emerald-100",children:E.remedy})]})]})]})})]})},Wg=({section:n,initialData:t,onSave:l,onReset:i,onClose:o})=>{const[c,u]=k.useState(t),f=()=>Cv[n].title;return e.jsxs("div",{className:"space-y-4 animate-in slide-in-from-right-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("button",{onClick:o,className:"text-xs text-slate-500 hover:text-slate-800 flex items-center gap-1",children:[e.jsx(Hs,{size:12,className:"rotate-180"}),"  "]}),e.jsx("span",{className:"text-sm font-bold bg-indigo-100 text-indigo-700 px-3 py-1 rounded-full",children:f()})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-700 mb-1",children:"  "}),e.jsx(Pe,{value:c.reading,onChange:x=>u({...c,reading:x}),className:"w-full border rounded-lg p-3 text-sm bg-slate-50 focus:bg-white focus:ring-2 focus:ring-indigo-500 max-h-60 overflow-y-auto",minHeight:"min-h-[120px]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-700 mb-1",children:" "}),e.jsx(Pe,{value:c.diagnosis,onChange:x=>u({...c,diagnosis:x}),className:"w-full border rounded-lg p-3 text-sm bg-amber-50 focus:bg-white focus:ring-2 focus:ring-amber-500 max-h-60 overflow-y-auto",minHeight:"min-h-[120px]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-700 mb-1",children:" "}),e.jsx(Pe,{value:c.recommendation,onChange:x=>u({...c,recommendation:x}),className:"w-full border rounded-lg p-3 text-sm bg-emerald-50 focus:bg-white focus:ring-2 focus:ring-emerald-500 max-h-60 overflow-y-auto",minHeight:"min-h-[120px]"})]}),e.jsxs("div",{className:"flex justify-between pt-4 border-t",children:[e.jsxs("button",{onClick:i,className:"text-red-500 text-xs font-bold flex items-center gap-1 hover:underline",children:[e.jsx(Tn,{size:12}),"   "]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:o,className:"px-4 py-2 text-slate-500 font-bold hover:bg-slate-100 rounded-lg",children:""}),e.jsxs("button",{onClick:()=>l(c),className:"px-6 py-2 bg-indigo-600 text-white font-bold rounded-lg hover:bg-indigo-700 shadow-md flex items-center gap-2",children:[e.jsx(Zt,{size:16}),"  "]})]})]})]})},Ja={id:"math_y2",label:" ( )",competencies:[{id:"control_numbers",label:"    ",criteria:[{id:1,label:"      (   )"},{id:2,label:"     ( )"}]},{id:"problem_solving",label:"   ",criteria:[{id:1,label:"   (  )"},{id:2,label:"   (  )"},{id:3,label:"    ( )"},{id:4,label:"  ( )"}]}]},kv={distribution:{title:"  ( )",concept:"        (  ).        ().",method:"      (   )    (+)   (+)."},homogeneity:{title:" ",concept:"           .",method:"   (Standard Deviation)  . (  15:  /   25: )."},matrix:{title:"  ( / )",concept:"    ' ' ( )  ' ' ( ).",method:"   4      '  '  ' '."}},mA=({records:n,scope:t,contextName:l})=>{const[i,o]=k.useState(null),[c,u]=k.useState(null),[f,x]=k.useState(null),[m,b]=k.useState(!1),[y,N]=k.useState(null),[C,A]=k.useState({}),[E,R]=k.useState(null),[P,O]=k.useState(null);k.useEffect(()=>{const j=`mufattish_analysis_y2_math_${l}_${t}`,T=localStorage.getItem(j);if(T)try{A(JSON.parse(T))}catch(L){console.error("Failed to load custom analysis",L)}},[l,t]);const z=(j,T)=>{const L={...C,[j]:T};A(L),localStorage.setItem(`mufattish_analysis_y2_math_${l}_${t}`,JSON.stringify(L)),N(null)},K=j=>{const T={...C};delete T[j],A(T),localStorage.setItem(`mufattish_analysis_y2_math_${l}_${t}`,JSON.stringify(T))},G=k.useMemo(()=>n.flatMap(j=>j.students.map(T=>({...T,className:j.className,schoolName:j.schoolName}))),[n]),F=G.length,$=(j,T,L)=>{if(!j.results)return null;const H=j.results[T];return H?H[L]||H[String(L)]:null},B=k.useMemo(()=>G.map(j=>{let T=0,L=0,H=0,Z=0,de=0,fe=0;Ja.competencies.forEach(Ne=>{Ne.criteria.forEach(Ae=>{const ie=$(j,Ne.id,Ae.id);if(ie){const ee=ie==="A"?3:ie==="B"?2:ie==="C"?1:0;L+=3,T+=ee,Ne.id==="control_numbers"?(H+=ee,Z+=3):(de+=ee,fe+=3)}})});const je=L>0?T/L*100:0,we=Z>0?H/Z*100:0,xe=fe>0?de/fe*100:0;return{...j,percent:je,calcPct:we,logicPct:xe}}),[G]),q=k.useMemo(()=>{let j=0,T=0,L=0;return B.forEach(H=>{H.percent>=66?j++:H.percent>=33?T++:L++}),{controlled:j,partial:T,limited:L}},[B]),J=k.useMemo(()=>{if(B.length===0)return 0;const j=B.reduce((L,H)=>L+H.percent,0)/B.length,T=B.reduce((L,H)=>L+Math.pow(H.percent-j,2),0)/B.length;return Math.sqrt(T)},[B]),Q=k.useMemo(()=>{const j={A:0,B:0,C:0,D:0,total:0};return G.forEach(T=>{Ja.competencies.forEach(L=>{L.criteria.forEach(H=>{const Z=$(T,L.id,H.id);Z&&(j[Z]++,j.total++)})})}),j.total===0&&(j.total=1),j},[G]),U=k.useMemo(()=>{const j={balanced_high:0,procedural_issue:0,rote_learning:0,struggling:0,total:0};return B.forEach(T=>{const L=T.calcPct>=50,H=T.logicPct>=50;L&&H?j.balanced_high++:!L&&H?j.procedural_issue++:L&&!H?j.rote_learning++:j.struggling++,j.total++}),j},[B]),ae=k.useMemo(()=>Ja.competencies.flatMap(j=>j.criteria.map(T=>{const L={A:0,B:0,C:0,D:0,total:0};G.forEach(Z=>{const de=$(Z,j.id,T.id);de&&(L[de]++,L.total++)});const H=L.total?(L.A+L.B)/L.total*100:0;return{...T,compId:j.id,stats:L,successRate:H}})).sort((j,T)=>j.successRate-T.successRate),[G]),se=j=>{if(j==="distribution"){const T=Q.A,L=Q.B,H=Q.C+Q.D,Z=Q.total||1;let de=T+L>H?" :       .     () .":" :        ( )  .";return{reading:` : ${Math.round(T/Z*100)}% |  : ${Math.round(L/Z*100)}% | : ${Math.round(H/Z*100)}%`,diagnosis:de,recommendation:T+L>H?"    .":"     ."}}if(j==="homogeneity"){let T="";return J<15?T="  .      .":J<25?T=" .       .":T=" .     (    ).",{reading:` : ${J.toFixed(2)}`,diagnosis:T,recommendation:J>25?"   (  /  ).":"   ."}}if(j==="matrix"){const T=U.total||1,L=Math.round(U.rote_learning/T*100),H=Math.round(U.procedural_issue/T*100);let Z="       .";return L>20&&(Z="  :        ."),H>20&&(Z=" :       ( )."),{reading:` : ${L}% |  : ${H}%`,diagnosis:Z,recommendation:L>20?"  ' '  .":"    ."}}return{reading:"",diagnosis:"",recommendation:""}},ne=j=>C[j]||se(j),w=(j,T,L)=>{const H=j.currentTarget.getBoundingClientRect();u({x:H.left+H.width/2,y:H.top-15,text:L,title:T})},D=()=>{u(null)},V=({section:j})=>e.jsx("button",{onClick:T=>{T.stopPropagation(),o(j)},className:"absolute top-4 left-4 p-2 bg-slate-100 hover:bg-indigo-100 text-slate-500 hover:text-indigo-600 rounded-full transition-all duration-300 opacity-0 group-hover:opacity-100 transform scale-90 group-hover:scale-100 z-10 shadow-sm",title:"  ",children:e.jsx(en,{size:18})}),Y=j=>j.includes(" ")?"  ' '.     . :    ( ).":j.includes(" ")?" ''.       . :   .":j.includes(" ")?"  ' '.   . :      .":j.includes("")?"  ' '.   . :  .":j.includes("")?"  ''.       . :   .":"      .",le=(j,T)=>{const L=j.calcPct,H=j.logicPct,Z=L-H;let de="",fe="",je="";L>=60&&H<40?(de="  ( )",fe="  (/)     .",je="  ' '   ."):L<40&&H>=60?(de="  ( )",fe="        .",je="     ."):L<30&&H<30?(de="   ",fe="      .",je="  (Manipulatives)  ."):(de=" ",fe="      .",je="    .");let we;T&&(we={label:T.label,advice:Y(T.label)}),O({studentName:j.fullName,profileType:de,diagnosis:fe,remedy:je,scores:{calc:L,logic:H},gap:Z,clickedCriterion:we})},_=()=>{if(!i)return null;const j=kv[i],T=ne(i);let L=null;switch(i){case"distribution":const H=Q.A,Z=Q.B,de=Q.C+Q.D,fe=Q.total;L=e.jsx("div",{className:"h-full flex flex-col items-center justify-center p-4 w-full",children:e.jsxs("div",{className:"grid grid-cols-3 gap-4 w-full max-w-2xl",children:[e.jsxs("div",{className:"bg-emerald-500/20 p-4 rounded-2xl border border-emerald-500/50 text-center",children:[e.jsxs("span",{className:"block text-4xl font-bold text-emerald-400 mb-2",children:[Math.round(H/fe*100),"%"]}),e.jsx("span",{className:"text-sm text-emerald-200",children:" "})]}),e.jsxs("div",{className:"bg-blue-500/20 p-4 rounded-2xl border border-blue-500/50 text-center",children:[e.jsxs("span",{className:"block text-4xl font-bold text-blue-400 mb-2",children:[Math.round(Z/fe*100),"%"]}),e.jsx("span",{className:"text-sm text-blue-200",children:" "})]}),e.jsxs("div",{className:"bg-red-500/20 p-4 rounded-2xl border border-red-500/50 text-center",children:[e.jsxs("span",{className:"block text-4xl font-bold text-red-400 mb-2",children:[Math.round(de/fe*100),"%"]}),e.jsx("span",{className:"text-sm text-red-200",children:" (+)"})]})]})});break;case"homogeneity":L=e.jsxs("div",{className:"h-full flex flex-col items-center justify-center p-4 w-full",children:[e.jsx("div",{className:"relative w-80 h-40 bg-gray-700/50 rounded-t-full overflow-hidden mb-8 border-t-4 border-x-4 border-slate-600",children:e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-full origin-bottom transition-transform duration-1000",style:{transform:`rotate(${Math.min(J,40)/40*180-90}deg)`},children:e.jsx("div",{className:"w-2 h-full bg-white mx-auto shadow-[0_0_15px_white]"})})}),e.jsx("span",{className:"text-6xl font-bold text-purple-400 font-mono",children:J.toFixed(2)})]});break;case"matrix":L=e.jsx("div",{className:"h-full flex items-center justify-center w-full",children:e.jsxs("div",{className:"aspect-square w-[400px] relative bg-slate-700/30 rounded-2xl border border-slate-600 p-4 grid grid-cols-2 grid-rows-2 gap-2",children:[e.jsxs("div",{className:"bg-blue-100 rounded flex flex-col items-center justify-center hover:bg-blue-200 transition-colors",onMouseEnter:()=>x("q1"),onMouseLeave:()=>x(null),children:[e.jsxs("span",{className:"text-2xl font-bold text-blue-400",children:[Math.round(U.procedural_issue/U.total*100),"%"]}),e.jsx("span",{className:"text-sm text-blue-300",children:" "})]}),e.jsxs("div",{className:"bg-emerald-100 rounded flex flex-col items-center justify-center hover:bg-emerald-200 transition-colors",onMouseEnter:()=>x("q2"),onMouseLeave:()=>x(null),children:[e.jsxs("span",{className:"text-2xl font-bold text-emerald-400",children:[Math.round(U.balanced_high/U.total*100),"%"]}),e.jsx("span",{className:"text-sm text-emerald-300",children:" "})]}),e.jsxs("div",{className:"bg-red-100 rounded flex flex-col items-center justify-center hover:bg-red-200 transition-colors",onMouseEnter:()=>x("q3"),onMouseLeave:()=>x(null),children:[e.jsxs("span",{className:"text-2xl font-bold text-red-400",children:[Math.round(U.struggling/U.total*100),"%"]}),e.jsx("span",{className:"text-sm text-red-300",children:" "})]}),e.jsxs("div",{className:"bg-yellow-100 rounded flex flex-col items-center justify-center hover:bg-yellow-200 transition-colors",onMouseEnter:()=>x("q4"),onMouseLeave:()=>x(null),children:[e.jsxs("span",{className:"text-2xl font-bold text-yellow-400",children:[Math.round(U.rote_learning/U.total*100),"%"]}),e.jsx("span",{className:"text-sm text-yellow-300",children:" "})]})]})});break}return e.jsxs("div",{className:"fixed inset-0 z-[100] bg-slate-950 text-white flex animate-in zoom-in-95 duration-300 overflow-hidden",children:[e.jsx("button",{onClick:()=>o(null),className:"absolute top-6 left-6 p-2 bg-white/10 hover:bg-white/20 rounded-full z-50 text-white transition-all",children:e.jsx(tn,{size:24})}),e.jsxs("div",{className:"w-[400px] lg:w-[35%] bg-slate-900 border-l border-slate-800 p-8 flex flex-col shadow-2xl relative z-40 overflow-y-auto",children:[e.jsx("div",{className:"mb-8 pb-6 border-b border-slate-800",children:e.jsx("h2",{className:"text-2xl font-bold text-white font-serif",children:j.title})}),e.jsxs("div",{className:"space-y-8 flex-1",children:[e.jsxs("div",{className:"relative pl-4 border-r-2 border-indigo-500/50 pr-4",children:[e.jsxs("h4",{className:"text-indigo-400 font-bold uppercase text-xs mb-2 flex items-center gap-2",children:[e.jsx($t,{size:14}),"   "]}),e.jsx("p",{className:"text-slate-300 leading-relaxed text-sm text-justify",children:T.reading})]}),e.jsxs("div",{className:"relative pl-4 border-r-2 border-amber-500/50 pr-4 bg-amber-500/5 p-4 rounded-l-xl",children:[e.jsxs("h4",{className:"text-amber-400 font-bold uppercase text-xs mb-2 flex items-center gap-2",children:[e.jsx(Qt,{size:14}),"  "]}),e.jsx("p",{className:"text-slate-200 leading-relaxed text-sm font-medium text-justify",children:T.diagnosis})]}),e.jsxs("div",{className:"relative pl-4 border-r-2 border-emerald-500/50 pr-4",children:[e.jsxs("h4",{className:"text-emerald-400 font-bold uppercase text-xs mb-2 flex items-center gap-2",children:[e.jsx(vt,{size:14}),"  "]}),e.jsx("p",{className:"text-slate-300 leading-relaxed text-sm text-justify",children:T.recommendation})]})]}),e.jsx("div",{className:"mt-8 pt-6 border-t border-slate-800 text-center",children:e.jsx("p",{className:"text-xs text-slate-500",children:"     2025"})})]}),e.jsxs("div",{className:"flex-1 bg-gradient-to-br from-slate-900 to-slate-950 flex flex-col items-center p-8 relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 opacity-10",style:{backgroundImage:"radial-gradient(circle at 2px 2px, white 1px, transparent 0)",backgroundSize:"40px 40px"}}),e.jsx("div",{className:"w-full max-w-3xl z-20 mb-4 mt-2 animate-in slide-in-from-top-4 shrink-0",children:e.jsxs("div",{className:"bg-white/5 backdrop-blur-md rounded-lg p-3 border border-white/10 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 p-1.5 bg-indigo-500/20 rounded-bl-lg border-b border-l border-white/10",children:e.jsx(it,{size:14,className:"text-indigo-300"})}),e.jsxs("div",{className:"space-y-2 pt-1",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-[11px] font-bold text-indigo-300 uppercase mb-0.5",children:" "}),e.jsx("p",{className:"text-xs text-white/90 leading-relaxed",children:j.concept})]}),e.jsxs("div",{className:"pt-2 border-t border-white/10",children:[e.jsxs("h4",{className:"text-[10px] font-bold text-slate-400 uppercase mb-0.5 flex items-center gap-1",children:[e.jsx(An,{size:10}),"  "]}),e.jsx("p",{className:"text-[10px] text-slate-400 leading-relaxed font-mono opacity-80",children:j.method})]})]})]})}),e.jsx("div",{className:"relative z-10 w-full flex-1 flex items-center justify-center min-h-0",children:L})]})]})},M=()=>{if(!y||!m)return null;const j=ne(y);return e.jsx(eb,{section:y,initialData:j,onSave:T=>z(y,T),onReset:()=>K(y),onClose:()=>N(null)})};return F===0?e.jsx("div",{className:"text-center p-10 text-gray-400",children:"  "}):e.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-700 pb-24 relative",children:[c&&e.jsxs("div",{className:"fixed z-[9999] pointer-events-none bg-slate-900 text-white px-3 py-2 rounded-lg shadow-xl text-xs max-w-xs border border-slate-700",style:{left:c.x,top:c.y,transform:"translate(-50%, -100%)"},children:[c.title&&e.jsx("div",{className:"font-bold border-b border-slate-600 pb-1 mb-1 text-yellow-400",children:c.title}),e.jsx("div",{children:c.text}),e.jsx("div",{className:"absolute -bottom-1.5 left-1/2 -translate-x-1/2 w-3 h-3 bg-slate-900 rotate-45 border-r border-b border-slate-700"})]}),_(),M(),E&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-in fade-in",onClick:()=>R(null),children:e.jsxs("div",{className:"bg-slate-900 w-full max-w-lg rounded-2xl p-6 border border-slate-700 shadow-2xl",onClick:j=>j.stopPropagation(),children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[e.jsx(it,{size:20,className:"text-blue-400"})," ",E.title]}),e.jsx("button",{onClick:()=>R(null),className:"text-slate-400 hover:text-white transition-colors",children:e.jsx(Ze,{})})]}),e.jsxs("p",{className:"text-slate-300 text-sm mb-6 italic border-r-4 border-slate-600 pr-4 leading-relaxed",children:['"',E.definition,'"']}),e.jsxs("div",{className:"bg-blue-900/20 p-4 rounded-xl border border-blue-900/50 mb-6",children:[e.jsxs("h4",{className:"text-xs font-bold text-blue-400 mb-2 flex items-center gap-1 uppercase tracking-wider",children:[e.jsx(Vt,{size:12}),"  :"]}),e.jsx("p",{className:"text-xs text-blue-200 leading-relaxed text-justify",children:E.pedagogicalRef})]}),E.content]})}),P&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-in fade-in",onClick:()=>O(null),children:e.jsxs("div",{className:"bg-slate-900 w-full max-w-md rounded-3xl p-6 border border-slate-700 overflow-hidden flex flex-col max-h-[90vh] shadow-2xl",onClick:j=>j.stopPropagation(),children:[e.jsxs("div",{className:"flex justify-between items-start mb-6 shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-purple-500/20 flex items-center justify-center border border-purple-500/50 shadow-inner",children:e.jsx(Ds,{size:24,className:"text-purple-300"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:P.studentName}),e.jsx("span",{className:"text-[10px] bg-purple-900/50 text-purple-300 px-2 py-0.5 rounded border border-purple-800 block w-fit mt-1",children:P.profileType})]})]}),e.jsx("button",{onClick:()=>O(null),className:"text-slate-400 hover:text-white transition-colors",children:e.jsx(Ze,{})})]}),e.jsxs("div",{className:"space-y-4 overflow-y-auto pr-1 custom-scrollbar",children:[e.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-xl border border-slate-700",children:[e.jsxs("h4",{className:"text-xs font-bold text-slate-400 mb-2 flex items-center gap-2 uppercase tracking-wider",children:[e.jsx(Sh,{size:14}),"  "]}),e.jsx("p",{className:"text-sm text-slate-300 leading-relaxed text-justify",children:P.diagnosis})]}),e.jsxs("div",{className:"bg-emerald-900/20 p-4 rounded-xl border border-emerald-800/50",children:[e.jsxs("h4",{className:"text-xs font-bold text-emerald-400 mb-2 flex items-center gap-2 uppercase tracking-wider",children:[e.jsx(hl,{size:14}),"   "]}),e.jsx("p",{className:"text-sm text-emerald-100 leading-relaxed text-justify",children:P.remedy})]}),P.clickedCriterion&&e.jsxs("div",{className:"bg-orange-900/20 p-4 rounded-xl border border-orange-800/50 animate-in slide-in-from-bottom-2",children:[e.jsxs("h4",{className:"text-xs font-bold text-orange-400 mb-2 flex items-center gap-2 uppercase tracking-wider",children:[e.jsx(Qt,{size:14}),"    :"]}),e.jsx("div",{className:"mb-2 text-xs font-bold text-orange-200 bg-orange-950/50 px-2 py-1 rounded inline-block",children:P.clickedCriterion.label}),e.jsx("p",{className:"text-sm text-orange-100 leading-relaxed text-justify",children:P.clickedCriterion.advice})]})]})]})}),e.jsxs("div",{className:"bg-white rounded-3xl shadow-xl border border-slate-100 overflow-hidden cursor-default",children:[e.jsxs("div",{className:"bg-slate-900 text-white p-8 relative",children:[e.jsx("div",{className:"absolute top-0 right-0 p-10 opacity-10",children:e.jsx(Ds,{size:150})}),e.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row justify-between items-end gap-6",children:[e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center gap-2 mb-2 text-indigo-300 font-bold uppercase tracking-widest text-xs",children:t==="district"?"  ":t==="school"?" ":"  "}),e.jsx("h2",{className:"text-4xl font-bold font-serif mb-2",children:Ja.label}),e.jsxs("p",{className:"text-slate-400 text-lg flex items-center gap-2",children:[e.jsx(Et,{size:18})," ",l]})]}),e.jsx("div",{className:"flex gap-4",children:e.jsxs("div",{className:"bg-slate-800 p-4 rounded-2xl text-center min-w-[100px] border border-slate-700 flex flex-col justify-center",children:[e.jsx("span",{className:"block text-3xl font-bold text-white",children:F}),e.jsx("span",{className:"text-xs text-slate-400 font-bold",children:""})]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 divide-y md:divide-y-0 md:divide-x md:divide-x-reverse divide-slate-100",children:[e.jsxs("div",{className:"p-6 flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-emerald-100 text-emerald-600 flex items-center justify-center",children:e.jsx(vt,{size:24})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase",children:"  / "}),e.jsxs("p",{className:"text-2xl font-bold text-emerald-700",children:[Math.round(q.controlled/F*100),"%"]})]})]}),e.jsxs("div",{className:"p-6 flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-orange-100 text-orange-600 flex items-center justify-center",children:e.jsx(Kl,{size:24})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase",children:" "}),e.jsxs("p",{className:"text-2xl font-bold text-orange-700",children:[Math.round(q.partial/F*100),"%"]})]})]}),e.jsxs("div",{className:"p-6 flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-red-100 text-red-600 flex items-center justify-center",children:e.jsx(ys,{size:24})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase",children:" "}),e.jsxs("p",{className:"text-2xl font-bold text-red-700",children:[Math.round(q.limited/F*100),"%"]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-slate-200 cursor-pointer hover:shadow-lg hover:border-blue-300 transition-all group relative",onClick:()=>o("distribution"),onMouseEnter:j=>w(j," ","     ."),onMouseLeave:D,children:[e.jsx(V,{section:"distribution"}),e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("h3",{className:"font-bold text-lg text-slate-800 flex items-center gap-2",children:[e.jsx($t,{size:20,className:"text-blue-500"})," "]}),e.jsx(it,{size:16,className:"text-slate-300 group-hover:text-blue-500 transition-colors"})]}),e.jsx("div",{className:"flex items-end gap-4 h-40",children:["A","B","C","D"].map(j=>{const T=Q[j],L=Q.total>0?T/Q.total*100:0,H=j==="A"?"bg-emerald-500":j==="B"?"bg-blue-500":j==="C"?"bg-orange-500":"bg-red-500";return e.jsxs("div",{className:"flex-1 flex flex-col justify-end items-center h-full",children:[e.jsx("div",{className:`w-full rounded-t-lg ${H}`,style:{height:`${Math.max(L,5)}%`}}),e.jsx("span",{className:"mt-2 font-bold text-slate-600 text-xs",children:j})]},j)})})]}),e.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-slate-200 cursor-pointer hover:shadow-lg hover:border-purple-300 transition-all group relative",onClick:()=>o("homogeneity"),onMouseEnter:j=>w(j," ","     ."),onMouseLeave:D,children:[e.jsx(V,{section:"homogeneity"}),e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("h3",{className:"font-bold text-lg text-slate-800 flex items-center gap-2",children:[e.jsx(Gs,{size:20,className:"text-purple-500"})," "]}),e.jsx(it,{size:16,className:"text-slate-300 group-hover:text-purple-500 transition-colors"})]}),e.jsx("div",{className:"flex justify-center items-center py-6",children:e.jsx("div",{className:"relative w-48 h-24 bg-gray-100 rounded-t-full overflow-hidden",children:e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-full origin-bottom transition-transform duration-1000",style:{transform:`rotate(${Math.min(J,40)/40*180-90}deg)`},children:e.jsx("div",{className:"w-1 h-full bg-slate-800 mx-auto"})})})}),e.jsx("div",{className:"text-center text-3xl font-bold text-purple-700",children:J.toFixed(1)})]}),e.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-slate-200 cursor-pointer hover:shadow-lg hover:border-teal-300 transition-all group relative lg:col-span-3 xl:col-span-1",onClick:()=>o("matrix"),children:[e.jsx(V,{section:"matrix"}),e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("h3",{className:"font-bold text-lg text-slate-800 flex items-center gap-2",children:[e.jsx(Yl,{size:20,className:"text-teal-500"}),"  "]}),e.jsx(it,{size:16,className:"text-slate-300 group-hover:text-teal-500 transition-colors"})]}),e.jsxs("div",{className:"flex gap-6 items-center justify-center relative",children:[f&&e.jsxs("div",{className:"absolute -top-16 left-1/2 -translate-x-1/2 z-20 bg-slate-800/90 text-white p-2 rounded text-xs w-48 text-center animate-in zoom-in-95 duration-200 pointer-events-none border border-slate-600",children:[e.jsxs("div",{className:"font-bold border-b border-slate-600 pb-1 mb-1 text-slate-200",children:[f==="q1"&&"  /  ",f==="q2"&&"  ()",f==="q3"&&"   ",f==="q4"&&"  /  "]}),e.jsxs("div",{className:"text-[10px] text-slate-400",children:[f==="q1"&&"     ",f==="q2"&&"    ",f==="q3"&&"   ",f==="q4"&&"     "]}),e.jsx("div",{className:"absolute bottom-[-6px] left-1/2 -translate-x-1/2 w-3 h-3 bg-slate-800/90 rotate-45 border-r border-b border-slate-600"})]}),e.jsxs("div",{className:"aspect-square w-52 relative bg-slate-50 rounded-xl border border-slate-200 p-2 grid grid-cols-2 grid-rows-2 gap-1 shrink-0",children:[e.jsx("div",{className:"bg-blue-100 rounded flex flex-col items-center justify-center hover:bg-blue-200 transition-colors",onMouseEnter:()=>x("q1"),onMouseLeave:()=>x(null),children:e.jsxs("span",{className:"text-xs font-bold text-blue-800",children:[Math.round(U.procedural_issue/U.total*100),"%"]})}),e.jsx("div",{className:"bg-emerald-100 rounded flex flex-col items-center justify-center hover:bg-emerald-200 transition-colors",onMouseEnter:()=>x("q2"),onMouseLeave:()=>x(null),children:e.jsxs("span",{className:"text-xs font-bold text-emerald-800",children:[Math.round(U.balanced_high/U.total*100),"%"]})}),e.jsx("div",{className:"bg-red-100 rounded flex flex-col items-center justify-center hover:bg-red-200 transition-colors",onMouseEnter:()=>x("q3"),onMouseLeave:()=>x(null),children:e.jsxs("span",{className:"text-xs font-bold text-red-800",children:[Math.round(U.struggling/U.total*100),"%"]})}),e.jsx("div",{className:"bg-yellow-100 rounded flex flex-col items-center justify-center hover:bg-yellow-200 transition-colors",onMouseEnter:()=>x("q4"),onMouseLeave:()=>x(null),children:e.jsxs("span",{className:"text-xs font-bold text-yellow-800",children:[Math.round(U.rote_learning/U.total*100),"%"]})}),e.jsx("div",{className:"absolute -left-4 top-1/2 -translate-x-1/2 -rotate-90 text-[10px] text-slate-500 font-bold tracking-widest",children:" "}),e.jsx("div",{className:"absolute bottom-[-20px] left-1/2 -translate-x-1/2 text-[10px] text-slate-500 font-bold tracking-widest",children:""})]})]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-slate-200",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[e.jsxs("h3",{className:"font-bold text-lg text-slate-800 flex items-center gap-2",children:[e.jsx(is,{size:20,className:"text-red-500"}),"   (  )"]}),e.jsxs("div",{className:"flex gap-3 text-[10px] bg-slate-50 p-2 rounded-lg border border-slate-100",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-emerald-500 rounded-full"}),e.jsx("span",{children:" ()"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full"}),e.jsx("span",{children:" ()"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-orange-400 rounded-full"}),e.jsx("span",{children:" ()"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-red-400 rounded-full"}),e.jsx("span",{children:" ()"})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:ae.map((j,T)=>e.jsxs("div",{className:"bg-slate-50 rounded-xl p-4 border border-slate-100 group hover:border-indigo-100 transition-colors",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("span",{className:"text-[10px] text-slate-400 font-bold bg-white px-2 py-0.5 rounded border border-slate-100",children:j.compId==="control_resources"?" ":" "}),e.jsxs("span",{className:`text-xs font-bold px-2 py-1 rounded ${j.successRate<50?"bg-red-100 text-red-600":"bg-green-100 text-green-600"}`,children:[Math.round(j.successRate),"% "]})]}),e.jsx("h4",{className:"font-bold text-slate-800 text-sm mb-3 line-clamp-2 min-h-[40px]",children:j.label}),e.jsxs("div",{className:"flex h-2 rounded-full overflow-hidden relative",children:[e.jsx("div",{className:"bg-emerald-500",style:{width:`${j.stats.A/j.stats.total*100}%`}}),e.jsx("div",{className:"bg-blue-400",style:{width:`${j.stats.B/j.stats.total*100}%`}}),e.jsx("div",{className:"bg-orange-400",style:{width:`${j.stats.C/j.stats.total*100}%`}}),e.jsx("div",{className:"bg-red-400",style:{width:`${j.stats.D/j.stats.total*100}%`}})]}),e.jsxs("div",{className:"flex justify-between text-[10px] text-slate-400 font-mono mt-2 pt-2 border-t border-slate-100",children:[e.jsxs("span",{className:"font-bold text-slate-500",children:[j.stats.A+j.stats.B," "]}),e.jsxs("span",{className:"font-bold text-slate-500",children:[j.stats.C+j.stats.D," "]})]})]},T))})]}),t==="class"&&e.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-red-100 border-t-4 border-t-red-500 mt-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h3",{className:"font-bold text-lg text-slate-800 flex items-center gap-2",children:[e.jsx(Bl,{size:20,className:"text-red-500"}),"   ()"]}),e.jsx("span",{className:"bg-red-50 text-red-600 text-xs px-3 py-1 rounded-full font-bold",children:"  "})]}),e.jsx("div",{className:"masonry-grid grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Ja.competencies.map(j=>e.jsx(Ws.Fragment,{children:j.criteria.map(T=>{const L=G.filter(H=>$(H,j.id,T.id)==="D");return L.length===0?null:e.jsxs("div",{className:"bg-red-50/30 rounded-xl p-4 border border-red-100 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start gap-2 mb-3",children:[e.jsx("div",{className:"mt-1 w-2 h-2 rounded-full bg-red-500 shrink-0"}),e.jsx("h5",{className:"font-bold text-slate-700 text-xs leading-snug",children:T.label})]}),e.jsx("div",{className:"flex flex-wrap gap-1.5",children:L.map(H=>{const Z=B.find(de=>de.id===H.id)||H;return e.jsx("button",{onClick:()=>le(Z,T),className:"px-2 py-1 rounded text-[10px] font-bold bg-white text-red-700 border border-red-100 shadow-sm hover:bg-red-500 hover:text-white hover:border-red-500 transition-all cursor-pointer",children:H.fullName},H.id)})})]},`${j.id}-${T.id}`)})},j.id))})]}),e.jsx("div",{className:"fixed bottom-6 left-1/2 transform -translate-x-1/2 z-50",children:e.jsxs("button",{onClick:()=>b(!0),className:"flex items-center gap-2 bg-slate-800 hover:bg-slate-700 text-white px-8 py-4 rounded-2xl font-bold text-sm transition-all shadow-xl hover:shadow-2xl border-2 border-slate-700 hover:border-slate-600 hover:scale-105 group",children:[e.jsx(Tt,{size:18,className:"group-hover:rotate-12 transition-transform"}),e.jsx("span",{children:" "})]})}),m&&e.jsx("div",{className:"fixed inset-0 z-[110] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 animate-in fade-in",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full p-6 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6 border-b pb-4",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-xl text-slate-800 flex items-center gap-2",children:[e.jsx(Tt,{size:24,className:"text-indigo-600"}),"  "]}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"         "})]}),e.jsx("button",{onClick:()=>b(!1),className:"text-slate-400 hover:text-red-500",children:e.jsx(Ze,{})})]}),y?e.jsx(eb,{section:y,initialData:ne(y),onSave:j=>z(y,j),onReset:()=>K(y),onClose:()=>N(null)}):e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("button",{onClick:()=>N("distribution"),className:"p-4 bg-slate-50 hover:bg-indigo-50 border rounded-xl text-right transition-colors group",children:e.jsx("span",{className:"font-bold text-slate-700 block group-hover:text-indigo-700",children:" "})}),e.jsx("button",{onClick:()=>N("homogeneity"),className:"p-4 bg-slate-50 hover:bg-indigo-50 border rounded-xl text-right transition-colors group",children:e.jsx("span",{className:"font-bold text-slate-700 block group-hover:text-indigo-700",children:" "})}),e.jsx("button",{onClick:()=>N("matrix"),className:"p-4 bg-slate-50 hover:bg-indigo-50 border rounded-xl text-right transition-colors group col-span-2",children:e.jsx("span",{className:"font-bold text-slate-700 block group-hover:text-indigo-700",children:" "})})]})]})})]})},eb=({section:n,initialData:t,onSave:l,onReset:i,onClose:o})=>{const[c,u]=k.useState(t),f=()=>kv[n].title;return e.jsxs("div",{className:"space-y-4 animate-in slide-in-from-right-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("button",{onClick:o,className:"text-xs text-slate-500 hover:text-slate-800 flex items-center gap-1",children:[e.jsx(Hs,{size:12,className:"rotate-180"}),"  "]}),e.jsx("span",{className:"text-sm font-bold bg-indigo-100 text-indigo-700 px-3 py-1 rounded-full",children:f()})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-700 mb-1",children:"  "}),e.jsx(Pe,{value:c.reading,onChange:x=>u({...c,reading:x}),className:"w-full border rounded-lg p-3 text-sm bg-slate-50 focus:bg-white focus:ring-2 focus:ring-indigo-500 max-h-60 overflow-y-auto",minHeight:"min-h-[120px]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-700 mb-1",children:" "}),e.jsx(Pe,{value:c.diagnosis,onChange:x=>u({...c,diagnosis:x}),className:"w-full border rounded-lg p-3 text-sm bg-amber-50 focus:bg-white focus:ring-2 focus:ring-amber-500 max-h-60 overflow-y-auto",minHeight:"min-h-[120px]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-700 mb-1",children:" "}),e.jsx(Pe,{value:c.recommendation,onChange:x=>u({...c,recommendation:x}),className:"w-full border rounded-lg p-3 text-sm bg-emerald-50 focus:bg-white focus:ring-2 focus:ring-emerald-500 max-h-60 overflow-y-auto",minHeight:"min-h-[120px]"})]}),e.jsxs("div",{className:"flex justify-between pt-4 border-t",children:[e.jsxs("button",{onClick:i,className:"text-red-500 text-xs font-bold flex items-center gap-1 hover:underline",children:[e.jsx(Tn,{size:12}),"   "]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:o,className:"px-4 py-2 text-slate-500 font-bold hover:bg-slate-100 rounded-lg",children:""}),e.jsxs("button",{onClick:()=>l(c),className:"px-6 py-2 bg-indigo-600 text-white font-bold rounded-lg hover:bg-indigo-700 shadow-md flex items-center gap-2",children:[e.jsx(Zt,{size:16}),"  "]})]})]})]})},Ya={id:"arabic_y4",label:"  ( )",competencies:[{id:"oral_comms",label:"   ",criteria:[{id:1,label:"   "},{id:2,label:"    "},{id:3,label:"  "},{id:4,label:"   "},{id:5,label:"    "}]},{id:"reading_perf",label:"  ",criteria:[{id:1,label:"  "},{id:2,label:"    "},{id:3,label:"   "},{id:4,label:"   ( )"}]},{id:"written_comp",label:"  ",criteria:[{id:1,label:"  "},{id:2,label:"  "},{id:3,label:"  "},{id:4,label:"   "},{id:5,label:"  "}]},{id:"written_prod",label:"  ",criteria:[{id:1,label:"   "},{id:2,label:"  "},{id:3,label:"  "},{id:4,label:"       "},{id:5,label:" "}]}]},Ev={distribution:{title:"  ( )",concept:"          (   ).",method:"      (   )    (+)   (+)."},homogeneity:{title:" ",concept:"              .",method:"   (Standard Deviation)  . (  15:  /   25: )."},matrix:{title:"  (/)",concept:"    ' ' (/)  ' ' (/).",method:"   4          ."}},pA=({records:n,scope:t,contextName:l})=>{const[i,o]=k.useState(null),[c,u]=k.useState(null),[f,x]=k.useState(null),[m,b]=k.useState(!1),[y,N]=k.useState(null),[C,A]=k.useState({}),[E,R]=k.useState(null),[P,O]=k.useState(null);k.useEffect(()=>{const j=`mufattish_analysis_y4_arabic_${l}_${t}`,T=localStorage.getItem(j);if(T)try{A(JSON.parse(T))}catch(L){console.error("Failed to load custom analysis",L)}},[l,t]);const z=(j,T)=>{const L={...C,[j]:T};A(L),localStorage.setItem(`mufattish_analysis_y4_arabic_${l}_${t}`,JSON.stringify(L)),N(null)},K=j=>{const T={...C};delete T[j],A(T),localStorage.setItem(`mufattish_analysis_y4_arabic_${l}_${t}`,JSON.stringify(T))},G=k.useMemo(()=>n.flatMap(j=>j.students.map(T=>({...T,className:j.className,schoolName:j.schoolName}))),[n]),F=G.length,$=(j,T,L)=>{if(!j.results)return null;const H=j.results[T];return H?H[L]||H[String(L)]:null},B=k.useMemo(()=>G.map(j=>{let T=0,L=0,H=0,Z=0,de=0,fe=0;Ya.competencies.forEach(Ne=>{Ne.criteria.forEach(Ae=>{const ie=$(j,Ne.id,Ae.id);if(ie){const ee=ie==="A"?3:ie==="B"?2:ie==="C"?1:0;L+=3,T+=ee,Ne.id==="oral_comms"||Ne.id==="reading_perf"?(H+=ee,Z+=3):(de+=ee,fe+=3)}})});const je=L>0?T/L*100:0,we=Z>0?H/Z*100:0,xe=fe>0?de/fe*100:0;return{...j,percent:je,oralPct:we,writtenPct:xe}}),[G]),q=k.useMemo(()=>{let j=0,T=0,L=0;return B.forEach(H=>{H.percent>=66?j++:H.percent>=33?T++:L++}),{controlled:j,partial:T,limited:L}},[B]),J=k.useMemo(()=>{if(B.length===0)return 0;const j=B.reduce((L,H)=>L+H.percent,0)/B.length,T=B.reduce((L,H)=>L+Math.pow(H.percent-j,2),0)/B.length;return Math.sqrt(T)},[B]),Q=k.useMemo(()=>{const j={A:0,B:0,C:0,D:0,total:0};return G.forEach(T=>{Ya.competencies.forEach(L=>{L.criteria.forEach(H=>{const Z=$(T,L.id,H.id);Z&&(j[Z]++,j.total++)})})}),j.total===0&&(j.total=1),j},[G]),U=k.useMemo(()=>{const j={balanced_high:0,oral_dominant:0,written_dominant:0,struggling:0,total:0};return B.forEach(T=>{const L=T.oralPct>=50,H=T.writtenPct>=50;L&&H?j.balanced_high++:L&&!H?j.oral_dominant++:!L&&!H?j.struggling++:j.written_dominant++,j.total++}),j},[B]),ae=k.useMemo(()=>Ya.competencies.flatMap(j=>j.criteria.map(T=>{const L={A:0,B:0,C:0,D:0,total:0};G.forEach(Z=>{const de=$(Z,j.id,T.id);de&&(L[de]++,L.total++)});const H=L.total?(L.A+L.B)/L.total*100:0;return{...T,compId:j.id,stats:L,successRate:H}})).sort((j,T)=>j.successRate-T.successRate),[G]),se=j=>{if(j==="distribution"){const T=Q.A,L=Q.B,H=Q.C+Q.D,Z=Q.total||1;return{reading:` : ${Math.round(T/Z*100)}% |  : ${Math.round(L/Z*100)}% | : ${Math.round(H/Z*100)}%`,diagnosis:T+L>H?"         .":"       .",recommendation:T+L>H?"     .":"      ."}}if(j==="homogeneity"){let T="";return J<18?T="       .":J<30?T="      .":T="        ().",{reading:` : ${J.toFixed(2)}`,diagnosis:T,recommendation:J>30?"    .":"       ."}}if(j==="matrix"){const T=U.total||1,L=Math.round(U.oral_dominant/T*100);return{reading:`   : ${L}%  .`,diagnosis:L>20?"  :       .":"     .",recommendation:L>20?"    .":"    ."}}return{reading:"",diagnosis:"",recommendation:""}},ne=j=>C[j]||se(j),w=j=>j.includes(" ")?"              .":j.includes(" ")?"   .         .":j.includes("")?"              .":j.includes("")?"             .":j.includes(" ")?"      (/ ).    .":j.includes(" ")?"        (/)   .":j.includes(" ")?"    ( /)  .     .":j.includes(" ")?"    .      .":j.includes(" ")?"    ' ' (Dysgraphia)     .":"          .",D=(j,T,L)=>{const H=j.currentTarget.getBoundingClientRect();u({x:H.left+H.width/2,y:H.top-15,text:L,title:T})},V=()=>{u(null)},Y=({section:j})=>e.jsx("button",{onClick:T=>{T.stopPropagation(),o(j)},className:"absolute top-4 left-4 p-2 bg-slate-100 hover:bg-indigo-100 text-slate-500 hover:text-indigo-600 rounded-full transition-all duration-300 opacity-0 group-hover:opacity-100 transform scale-90 group-hover:scale-100 z-10 shadow-sm",title:"  ",children:e.jsx(en,{size:18})}),le=(j,T)=>{const L=j.oralPct,H=j.writtenPct,Z=L-H;let de="",fe="",je="";Z>25?(de="   /  ",fe="              .",je="           ."):Z<-25?(de="   /  ",fe="     .        .",je="    (Pair Work)   ."):L<40&&H<40?(de="   ",fe="        .",je="    (PPRE)   ."):(de=" ",fe="           .",je="         .");let we;T&&(we={label:T.label,advice:w(T.label)}),O({studentName:j.fullName,profileType:de,diagnosis:fe,remedy:je,scores:{oral:L,written:H},clickedCriterion:we})},_=()=>{if(!i)return null;const j=Ev[i],T=ne(i);let L=null;switch(i){case"distribution":const H=Q.A,Z=Q.B,de=Q.C+Q.D,fe=Q.total;L=e.jsx("div",{className:"h-full flex flex-col items-center justify-center p-4 w-full",children:e.jsxs("div",{className:"grid grid-cols-3 gap-4 w-full max-w-2xl",children:[e.jsxs("div",{className:"bg-emerald-500/20 p-4 rounded-2xl border border-emerald-500/50 text-center",children:[e.jsxs("span",{className:"block text-4xl font-bold text-emerald-400 mb-2",children:[Math.round(H/fe*100),"%"]}),e.jsx("span",{className:"text-sm text-emerald-200",children:" "})]}),e.jsxs("div",{className:"bg-blue-500/20 p-4 rounded-2xl border border-blue-500/50 text-center",children:[e.jsxs("span",{className:"block text-4xl font-bold text-blue-400 mb-2",children:[Math.round(Z/fe*100),"%"]}),e.jsx("span",{className:"text-sm text-blue-200",children:" "})]}),e.jsxs("div",{className:"bg-red-500/20 p-4 rounded-2xl border border-red-500/50 text-center",children:[e.jsxs("span",{className:"block text-4xl font-bold text-red-400 mb-2",children:[Math.round(de/fe*100),"%"]}),e.jsx("span",{className:"text-sm text-red-200",children:" (+)"})]})]})});break;case"homogeneity":L=e.jsxs("div",{className:"h-full flex flex-col items-center justify-center p-4 w-full",children:[e.jsx("div",{className:"relative w-80 h-40 bg-gray-700/50 rounded-t-full overflow-hidden mb-8 border-t-4 border-x-4 border-slate-600",children:e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-full origin-bottom transition-transform duration-1000",style:{transform:`rotate(${Math.min(J,40)/40*180-90}deg)`},children:e.jsx("div",{className:"w-2 h-full bg-white mx-auto shadow-[0_0_15px_white]"})})}),e.jsx("span",{className:"text-6xl font-bold text-purple-400 font-mono",children:J.toFixed(2)})]});break;case"matrix":L=e.jsx("div",{className:"h-full flex items-center justify-center w-full",children:e.jsxs("div",{className:"aspect-square w-[400px] relative bg-slate-700/30 rounded-2xl border border-slate-600 p-4 grid grid-cols-2 grid-rows-2 gap-2",children:[e.jsxs("div",{className:"bg-blue-500/20 rounded flex flex-col items-center justify-center border border-blue-500/30",children:[e.jsxs("span",{className:"text-2xl font-bold text-blue-400",children:[Math.round(U.oral_dominant/U.total*100),"%"]}),e.jsx("span",{className:"text-sm text-blue-300",children:"  ( > )"})]}),e.jsxs("div",{className:"bg-emerald-500/20 rounded flex flex-col items-center justify-center border border-emerald-500/30",children:[e.jsxs("span",{className:"text-2xl font-bold text-emerald-400",children:[Math.round(U.balanced_high/U.total*100),"%"]}),e.jsx("span",{className:"text-sm text-emerald-300",children:" "})]}),e.jsxs("div",{className:"bg-red-500/20 rounded flex flex-col items-center justify-center border border-red-500/30",children:[e.jsxs("span",{className:"text-2xl font-bold text-red-400",children:[Math.round(U.struggling/U.total*100),"%"]}),e.jsx("span",{className:"text-sm text-red-300",children:" "})]}),e.jsxs("div",{className:"bg-yellow-500/20 rounded flex flex-col items-center justify-center border border-yellow-500/30",children:[e.jsxs("span",{className:"text-2xl font-bold text-yellow-400",children:[Math.round(U.written_dominant/U.total*100),"%"]}),e.jsx("span",{className:"text-sm text-yellow-300",children:"  ( > )"})]})]})});break}return e.jsxs("div",{className:"fixed inset-0 z-[100] bg-slate-950 text-white flex animate-in zoom-in-95 duration-300 overflow-hidden",children:[e.jsx("button",{onClick:()=>o(null),className:"absolute top-6 left-6 p-2 bg-white/10 hover:bg-white/20 rounded-full z-50 text-white transition-all",children:e.jsx(tn,{size:24})}),e.jsxs("div",{className:"w-[400px] lg:w-[35%] bg-slate-900 border-l border-slate-800 p-8 flex flex-col shadow-2xl relative z-40 overflow-y-auto",children:[e.jsx("div",{className:"mb-8 pb-6 border-b border-slate-800",children:e.jsx("h2",{className:"text-2xl font-bold text-white font-serif",children:j.title})}),e.jsxs("div",{className:"space-y-8 flex-1",children:[e.jsxs("div",{className:"relative pl-4 border-r-2 border-indigo-500/50 pr-4",children:[e.jsxs("h4",{className:"text-indigo-400 font-bold uppercase text-xs mb-2 flex items-center gap-2",children:[e.jsx($t,{size:14}),"   "]}),e.jsx("p",{className:"text-slate-300 leading-relaxed text-sm text-justify",children:T.reading})]}),e.jsxs("div",{className:"relative pl-4 border-r-2 border-amber-500/50 pr-4 bg-amber-500/5 p-4 rounded-l-xl",children:[e.jsxs("h4",{className:"text-amber-400 font-bold uppercase text-xs mb-2 flex items-center gap-2",children:[e.jsx(Qt,{size:14}),"  "]}),e.jsx("p",{className:"text-slate-200 leading-relaxed text-sm font-medium text-justify",children:T.diagnosis})]}),e.jsxs("div",{className:"relative pl-4 border-r-2 border-emerald-500/50 pr-4",children:[e.jsxs("h4",{className:"text-emerald-400 font-bold uppercase text-xs mb-2 flex items-center gap-2",children:[e.jsx(vt,{size:14}),"  "]}),e.jsx("p",{className:"text-slate-300 leading-relaxed text-sm text-justify",children:T.recommendation})]})]}),e.jsx("div",{className:"mt-8 pt-6 border-t border-slate-800 text-center",children:e.jsx("p",{className:"text-xs text-slate-500",children:"     2025"})})]}),e.jsxs("div",{className:"flex-1 bg-gradient-to-br from-slate-900 to-slate-950 flex flex-col items-center p-8 relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 opacity-10",style:{backgroundImage:"radial-gradient(circle at 2px 2px, white 1px, transparent 0)",backgroundSize:"40px 40px"}}),e.jsx("div",{className:"w-full max-w-3xl z-20 mb-4 mt-2 animate-in slide-in-from-top-4 shrink-0",children:e.jsxs("div",{className:"bg-white/5 backdrop-blur-md rounded-lg p-3 border border-white/10 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 p-1.5 bg-indigo-500/20 rounded-bl-lg border-b border-l border-white/10",children:e.jsx(it,{size:14,className:"text-indigo-300"})}),e.jsxs("div",{className:"space-y-2 pt-1",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-[11px] font-bold text-indigo-300 uppercase mb-0.5",children:" "}),e.jsx("p",{className:"text-xs text-white/90 leading-relaxed",children:j.concept})]}),e.jsxs("div",{className:"pt-2 border-t border-white/10",children:[e.jsxs("h4",{className:"text-[10px] font-bold text-slate-400 uppercase mb-0.5 flex items-center gap-1",children:[e.jsx(An,{size:10}),"  "]}),e.jsx("p",{className:"text-[10px] text-slate-400 leading-relaxed font-mono opacity-80",children:j.method})]})]})]})}),e.jsx("div",{className:"relative z-10 w-full flex-1 flex items-center justify-center min-h-0",children:L})]})]})},M=()=>{if(!y||!m)return null;const j=ne(y);return e.jsx(tb,{section:y,initialData:j,onSave:T=>z(y,T),onReset:()=>K(y),onClose:()=>N(null)})};return F===0?e.jsx("div",{className:"text-center p-10 text-gray-400",children:"  "}):e.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-700 pb-12 relative",children:[c&&e.jsxs("div",{className:"fixed z-[9999] pointer-events-none bg-slate-900 text-white px-3 py-2 rounded-lg shadow-xl text-xs max-w-xs border border-slate-700",style:{left:c.x,top:c.y,transform:"translate(-50%, -100%)"},children:[c.title&&e.jsx("div",{className:"font-bold border-b border-slate-600 pb-1 mb-1 text-yellow-400",children:c.title}),e.jsx("div",{children:c.text}),e.jsx("div",{className:"absolute -bottom-1.5 left-1/2 -translate-x-1/2 w-3 h-3 bg-slate-900 rotate-45 border-r border-b border-slate-700"})]}),_(),M(),E&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-in fade-in",onClick:()=>R(null),children:e.jsxs("div",{className:"bg-slate-900 w-full max-w-lg rounded-2xl p-6 border border-slate-700 shadow-2xl",onClick:j=>j.stopPropagation(),children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[e.jsx(it,{size:20,className:"text-blue-400"})," ",E.title]}),e.jsx("button",{onClick:()=>R(null),className:"text-slate-400 hover:text-white transition-colors",children:e.jsx(Ze,{})})]}),e.jsxs("p",{className:"text-slate-300 text-sm mb-6 italic border-r-4 border-slate-600 pr-4 leading-relaxed",children:['"',E.definition,'"']}),e.jsxs("div",{className:"bg-blue-900/20 p-4 rounded-xl border border-blue-900/50 mb-6",children:[e.jsxs("h4",{className:"text-xs font-bold text-blue-400 mb-2 flex items-center gap-1 uppercase tracking-wider",children:[e.jsx(Vt,{size:12}),"  :"]}),e.jsx("p",{className:"text-xs text-blue-200 leading-relaxed text-justify",children:E.pedagogicalRef})]}),E.content]})}),P&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-in fade-in",onClick:()=>O(null),children:e.jsxs("div",{className:"bg-slate-900 w-full max-w-md rounded-3xl p-6 border border-slate-700 overflow-hidden flex flex-col max-h-[90vh] shadow-2xl",onClick:j=>j.stopPropagation(),children:[e.jsxs("div",{className:"flex justify-between items-start mb-6 shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-800 flex items-center justify-center border border-slate-600",children:e.jsx(vs,{size:20,className:"text-slate-300"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-white",children:P.studentName}),e.jsx("span",{className:"text-[10px] bg-indigo-900/50 text-indigo-300 px-2 py-0.5 rounded border border-indigo-800 block w-fit mt-1",children:P.profileType})]})]}),e.jsx("button",{onClick:()=>O(null),className:"text-slate-400 hover:text-white transition-colors",children:e.jsx(Ze,{})})]}),e.jsxs("div",{className:"space-y-4 overflow-y-auto pr-1 custom-scrollbar",children:[e.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-xl border border-slate-700",children:[e.jsxs("h4",{className:"text-xs font-bold text-slate-400 mb-2 flex items-center gap-2 uppercase tracking-wider",children:[e.jsx(Sh,{size:14}),"  "]}),e.jsx("p",{className:"text-sm text-slate-300 leading-relaxed text-justify",children:P.diagnosis})]}),e.jsxs("div",{className:"bg-emerald-900/20 p-4 rounded-xl border border-emerald-800/50",children:[e.jsxs("h4",{className:"text-xs font-bold text-emerald-400 mb-2 flex items-center gap-2 uppercase tracking-wider",children:[e.jsx(hl,{size:14}),"   "]}),e.jsx("p",{className:"text-sm text-emerald-100 leading-relaxed text-justify",children:P.remedy})]}),P.clickedCriterion&&e.jsxs("div",{className:"bg-orange-900/20 p-4 rounded-xl border border-orange-800/50 animate-in slide-in-from-bottom-2",children:[e.jsxs("h4",{className:"text-xs font-bold text-orange-400 mb-2 flex items-center gap-2 uppercase tracking-wider",children:[e.jsx(Qt,{size:14}),"    :"]}),e.jsx("div",{className:"mb-2 text-xs font-bold text-orange-200 bg-orange-950/50 px-2 py-1 rounded inline-block",children:P.clickedCriterion.label}),e.jsx("p",{className:"text-sm text-orange-100 leading-relaxed text-justify",children:P.clickedCriterion.advice})]})]})]})}),e.jsxs("div",{className:"bg-white rounded-3xl shadow-xl border border-slate-100 overflow-hidden",children:[e.jsxs("div",{className:"bg-slate-900 text-white p-8 relative",children:[e.jsx("div",{className:"absolute top-0 right-0 p-10 opacity-10",children:e.jsx(kn,{size:150})}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("div",{className:"flex items-center gap-2 mb-2 text-indigo-300 font-bold uppercase tracking-widest text-xs",children:t==="district"?"  ":t==="school"?" ":" "}),e.jsx("h2",{className:"text-4xl font-bold font-serif mb-2",children:Ya.label}),e.jsxs("p",{className:"text-slate-400 text-lg flex items-center gap-2",children:[e.jsx(Et,{size:18})," ",l]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 divide-y md:divide-y-0 md:divide-x md:divide-x-reverse divide-slate-100",children:[e.jsxs("div",{className:"p-6 flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-emerald-100 text-emerald-600 flex items-center justify-center",children:e.jsx(vt,{size:24})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase",children:" "}),e.jsxs("p",{className:"text-2xl font-bold text-emerald-700",children:[Math.round(q.controlled/F*100),"%"]})]})]}),e.jsxs("div",{className:"p-6 flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-orange-100 text-orange-600 flex items-center justify-center",children:e.jsx(Kl,{size:24})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase",children:" "}),e.jsxs("p",{className:"text-2xl font-bold text-orange-700",children:[Math.round(q.partial/F*100),"%"]})]})]}),e.jsxs("div",{className:"p-6 flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-red-100 text-red-600 flex items-center justify-center",children:e.jsx(ys,{size:24})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase",children:" "}),e.jsxs("p",{className:"text-2xl font-bold text-red-700",children:[Math.round(q.limited/F*100),"%"]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-slate-200 cursor-pointer hover:shadow-lg hover:border-blue-300 transition-all group",onClick:()=>o("distribution"),onMouseEnter:j=>D(j," ","     ."),onMouseLeave:V,children:[e.jsx(Y,{section:"distribution"}),e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("h3",{className:"font-bold text-lg text-slate-800 flex items-center gap-2",children:[e.jsx($t,{size:20,className:"text-blue-500"})," "]}),e.jsx(it,{size:16,className:"text-slate-300 group-hover:text-blue-500 transition-colors"})]}),e.jsx("div",{className:"flex items-end gap-4 h-40",children:["A","B","C","D"].map(j=>{const T=Q[j],L=Q.total>0?T/Q.total*100:0,H=j==="A"?"bg-emerald-500":j==="B"?"bg-blue-500":j==="C"?"bg-orange-500":"bg-red-500";return e.jsxs("div",{className:"flex-1 flex flex-col justify-end items-center h-full",children:[e.jsx("div",{className:`w-full rounded-t-lg ${H}`,style:{height:`${Math.max(L,5)}%`}}),e.jsxs("span",{className:"mt-2 font-bold text-slate-600 text-xs",children:[j," (",Math.round(L),"%)"]})]},j)})})]}),e.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-slate-200 cursor-pointer hover:shadow-lg hover:border-purple-300 transition-all",onClick:()=>o("homogeneity"),onMouseEnter:j=>D(j," ","     ."),onMouseLeave:V,children:[e.jsx(Y,{section:"homogeneity"}),e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("h3",{className:"font-bold text-lg text-slate-800 flex items-center gap-2",children:[e.jsx(Gs,{size:20,className:"text-purple-500"})," "]}),e.jsx(it,{size:16,className:"text-slate-300 group-hover:text-purple-500 transition-colors"})]}),e.jsx("div",{className:"flex justify-center items-center py-6",children:e.jsx("div",{className:"relative w-48 h-24 bg-gray-100 rounded-t-full overflow-hidden",children:e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-full origin-bottom transition-transform duration-1000",style:{transform:`rotate(${Math.min(J,40)/40*180-90}deg)`},children:e.jsx("div",{className:"w-1 h-full bg-slate-800 mx-auto"})})})}),e.jsxs("div",{className:"flex justify-between text-[10px] font-bold text-slate-400 px-8 -mt-2 mb-2",children:[e.jsx("span",{children:""}),e.jsx("span",{children:""})]}),e.jsx("div",{className:"text-center text-3xl font-bold text-purple-700",children:J.toFixed(1)})]}),e.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-slate-200 cursor-pointer hover:shadow-lg hover:border-teal-300 transition-all group relative lg:col-span-3 xl:col-span-1",onClick:()=>o("matrix"),children:[e.jsx(Y,{section:"matrix"}),e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("h3",{className:"font-bold text-lg text-slate-800 flex items-center gap-2",children:[e.jsx(Yl,{size:20,className:"text-teal-500"}),"  (/)"]}),e.jsx(it,{size:16,className:"text-slate-300 group-hover:text-teal-500 transition-colors"})]}),e.jsxs("div",{className:"flex gap-6 items-center justify-center relative",children:[f&&e.jsxs("div",{className:"absolute -top-16 left-1/2 -translate-x-1/2 z-20 bg-slate-800/90 text-white p-2 rounded text-xs w-40 text-center animate-in zoom-in-95 duration-200",children:[f==="q1"&&"  ( )",f==="q2"&&"  ()",f==="q3"&&" ",f==="q4"&&"  ()",e.jsx("div",{className:"absolute bottom-[-6px] left-1/2 -translate-x-1/2 w-2 h-2 bg-slate-800/90 rotate-45"})]}),e.jsxs("div",{className:"aspect-square w-52 relative bg-slate-50 rounded-xl border border-slate-200 p-2 grid grid-cols-2 grid-rows-2 gap-1 shrink-0",children:[e.jsx("div",{className:"bg-blue-100 rounded flex flex-col items-center justify-center hover:bg-blue-200 transition-colors",onMouseEnter:()=>x("q1"),onMouseLeave:()=>x(null),children:e.jsxs("span",{className:"text-xs font-bold text-blue-800",children:[Math.round(U.oral_dominant/U.total*100),"%"]})}),e.jsx("div",{className:"bg-emerald-100 rounded flex flex-col items-center justify-center hover:bg-emerald-200 transition-colors",onMouseEnter:()=>x("q2"),onMouseLeave:()=>x(null),children:e.jsxs("span",{className:"text-xs font-bold text-emerald-800",children:[Math.round(U.balanced_high/U.total*100),"%"]})}),e.jsx("div",{className:"bg-red-100 rounded flex flex-col items-center justify-center hover:bg-red-200 transition-colors",onMouseEnter:()=>x("q3"),onMouseLeave:()=>x(null),children:e.jsxs("span",{className:"text-xs font-bold text-red-800",children:[Math.round(U.struggling/U.total*100),"%"]})}),e.jsx("div",{className:"bg-yellow-100 rounded flex flex-col items-center justify-center hover:bg-yellow-200 transition-colors",onMouseEnter:()=>x("q4"),onMouseLeave:()=>x(null),children:e.jsxs("span",{className:"text-xs font-bold text-yellow-800",children:[Math.round(U.written_dominant/U.total*100),"%"]})}),e.jsx("div",{className:"absolute -left-4 top-1/2 -translate-y-1/2 -rotate-90 text-[10px] text-slate-500 font-bold tracking-widest",children:""}),e.jsx("div",{className:"absolute bottom-[-20px] left-1/2 -translate-x-1/2 text-[10px] text-slate-500 font-bold tracking-widest",children:""})]})]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-slate-200",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[e.jsxs("h3",{className:"font-bold text-lg text-slate-800 flex items-center gap-2",children:[e.jsx(is,{size:20,className:"text-red-500"}),"   (  )"]}),e.jsxs("div",{className:"flex gap-3 text-[10px] bg-slate-50 p-2 rounded-lg border border-slate-100",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-emerald-500 rounded-full"}),e.jsx("span",{children:" ()"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full"}),e.jsx("span",{children:" ()"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-orange-400 rounded-full"}),e.jsx("span",{children:" ()"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-red-400 rounded-full"}),e.jsx("span",{children:" ()"})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:ae.map((j,T)=>e.jsxs("div",{className:"bg-slate-50 rounded-xl p-4 border border-slate-100 group hover:border-indigo-100 transition-colors",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("span",{className:"text-[10px] text-slate-400 font-bold bg-white px-2 py-0.5 rounded border border-slate-100",children:j.compId==="oral_comms"?" ":j.compId==="reading_perf"?" ":j.compId==="written_comp"?" ":" "}),e.jsxs("span",{className:`text-xs font-bold px-2 py-1 rounded ${j.successRate<50?"bg-red-100 text-red-600":"bg-green-100 text-green-600"}`,children:[Math.round(j.successRate),"% "]})]}),e.jsx("h4",{className:"font-bold text-slate-800 text-sm mb-3 line-clamp-2 min-h-[40px]",children:j.label}),e.jsxs("div",{className:"flex h-2 rounded-full overflow-hidden relative",children:[e.jsx("div",{className:"bg-emerald-500",style:{width:`${j.stats.A/j.stats.total*100}%`}}),e.jsx("div",{className:"bg-blue-400",style:{width:`${j.stats.B/j.stats.total*100}%`}}),e.jsx("div",{className:"bg-orange-400",style:{width:`${j.stats.C/j.stats.total*100}%`}}),e.jsx("div",{className:"bg-red-400",style:{width:`${j.stats.D/j.stats.total*100}%`}})]}),e.jsxs("div",{className:"flex justify-between text-[10px] text-slate-400 font-mono mt-2 pt-2 border-t border-slate-100",children:[e.jsxs("span",{className:"font-bold text-slate-500",children:[j.stats.A+j.stats.B," "]}),e.jsxs("span",{className:"font-bold text-slate-500",children:[j.stats.C+j.stats.D," "]})]})]},T))})]}),t==="class"&&e.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-red-100 border-t-4 border-t-red-500 mt-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h3",{className:"font-bold text-lg text-slate-800 flex items-center gap-2",children:[e.jsx(Bl,{size:20,className:"text-red-500"}),"   ( )"]}),e.jsx("span",{className:"bg-red-50 text-red-600 text-xs px-3 py-1 rounded-full font-bold",children:"  "})]}),e.jsx("div",{className:"masonry-grid grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Ya.competencies.map(j=>e.jsx(Ws.Fragment,{children:j.criteria.map(T=>{const L=G.filter(H=>$(H,j.id,T.id)==="D");return L.length===0?null:e.jsxs("div",{className:"bg-red-50/30 rounded-xl p-4 border border-red-100 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start gap-2 mb-3",children:[e.jsx("div",{className:"mt-1 w-2 h-2 rounded-full bg-red-500 shrink-0"}),e.jsx("h5",{className:"font-bold text-slate-700 text-xs leading-snug",children:T.label})]}),e.jsx("div",{className:"flex flex-wrap gap-1.5",children:L.map(H=>{const Z=B.find(de=>de.id===H.id)||H;return e.jsx("button",{onClick:()=>le(Z,T),className:"px-2 py-1 rounded text-[10px] font-bold bg-white text-red-700 border border-red-100 shadow-sm hover:bg-red-500 hover:text-white hover:border-red-500 transition-all cursor-pointer",children:H.fullName},H.id)})})]},`${j.id}-${T.id}`)})},j.id))})]}),e.jsx("div",{className:"fixed bottom-6 left-1/2 transform -translate-x-1/2 z-50",children:e.jsxs("button",{onClick:()=>b(!0),className:"flex items-center gap-2 bg-slate-800 hover:bg-slate-700 text-white px-8 py-4 rounded-2xl font-bold text-sm transition-all shadow-xl hover:shadow-2xl border-2 border-slate-700 hover:border-slate-600 hover:scale-105 group",children:[e.jsx(Tt,{size:18,className:"group-hover:rotate-12 transition-transform"}),e.jsx("span",{children:" "})]})}),m&&e.jsx("div",{className:"fixed inset-0 z-[110] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 animate-in fade-in",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full p-6 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6 border-b pb-4",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-xl text-slate-800 flex items-center gap-2",children:[e.jsx(Tt,{size:24,className:"text-indigo-600"}),"  "]}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"         "})]}),e.jsx("button",{onClick:()=>b(!1),className:"text-slate-400 hover:text-red-500",children:e.jsx(Ze,{})})]}),y?e.jsx(tb,{section:y,initialData:ne(y),onSave:j=>z(y,j),onReset:()=>K(y),onClose:()=>N(null)}):e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("button",{onClick:()=>N("distribution"),className:"p-4 bg-slate-50 hover:bg-indigo-50 border rounded-xl text-right transition-colors group",children:e.jsx("span",{className:"font-bold text-slate-700 block group-hover:text-indigo-700",children:" "})}),e.jsx("button",{onClick:()=>N("homogeneity"),className:"p-4 bg-slate-50 hover:bg-indigo-50 border rounded-xl text-right transition-colors group",children:e.jsx("span",{className:"font-bold text-slate-700 block group-hover:text-indigo-700",children:" "})}),e.jsx("button",{onClick:()=>N("matrix"),className:"p-4 bg-slate-50 hover:bg-indigo-50 border rounded-xl text-right transition-colors group col-span-2",children:e.jsx("span",{className:"font-bold text-slate-700 block group-hover:text-indigo-700",children:" "})})]})]})})]})},tb=({section:n,initialData:t,onSave:l,onReset:i,onClose:o})=>{const[c,u]=k.useState(t),f=()=>Ev[n].title;return e.jsxs("div",{className:"space-y-4 animate-in slide-in-from-right-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("button",{onClick:o,className:"text-xs text-slate-500 hover:text-slate-800 flex items-center gap-1",children:[e.jsx(Hs,{size:12,className:"rotate-180"}),"  "]}),e.jsx("span",{className:"text-sm font-bold bg-indigo-100 text-indigo-700 px-3 py-1 rounded-full",children:f()})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-700 mb-1",children:"  "}),e.jsx(Pe,{value:c.reading,onChange:x=>u({...c,reading:x}),className:"w-full border rounded-lg p-3 text-sm bg-slate-50 focus:bg-white focus:ring-2 focus:ring-indigo-500 max-h-60 overflow-y-auto",minHeight:"min-h-[120px]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-700 mb-1",children:" "}),e.jsx(Pe,{value:c.diagnosis,onChange:x=>u({...c,diagnosis:x}),className:"w-full border rounded-lg p-3 text-sm bg-amber-50 focus:bg-white focus:ring-2 focus:ring-amber-500 max-h-60 overflow-y-auto",minHeight:"min-h-[120px]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-700 mb-1",children:" "}),e.jsx(Pe,{value:c.recommendation,onChange:x=>u({...c,recommendation:x}),className:"w-full border rounded-lg p-3 text-sm bg-emerald-50 focus:bg-white focus:ring-2 focus:ring-emerald-500 max-h-60 overflow-y-auto",minHeight:"min-h-[120px]"})]}),e.jsxs("div",{className:"flex justify-between pt-4 border-t",children:[e.jsxs("button",{onClick:i,className:"text-red-500 text-xs font-bold flex items-center gap-1 hover:underline",children:[e.jsx(Tn,{size:12}),"   "]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:o,className:"px-4 py-2 text-slate-500 font-bold hover:bg-slate-100 rounded-lg",children:""}),e.jsxs("button",{onClick:()=>l(c),className:"px-6 py-2 bg-indigo-600 text-white font-bold rounded-lg hover:bg-indigo-700 shadow-md flex items-center gap-2",children:[e.jsx(Zt,{size:16}),"  "]})]})]})]})},Ka={id:"math_y4",label:" ( )",competencies:[{id:"control_resources",label:"    ",criteria:[{id:1,label:" (< 1,000,000)    "},{id:2,label:"  (    )"},{id:3,label:"   ( )"}]},{id:"methodological_solving",label:"   ",criteria:[{id:1,label:"  (  )"},{id:2,label:"   (  )"},{id:3,label:"   (  )"},{id:4,label:"  (  )"}]}]},Tv={distribution:{title:"  ( )",concept:"         (     ).",method:"      (   ).  (+)    (+)  ."},homogeneity:{title:" ",concept:"            .",method:"   (Standard Deviation). (  15:  /   25:   )."},matrix:{title:" ( / )",concept:"    ' ' ( )  '  ' ( ).",method:"   4      '  '  ''."}},gA=({records:n,scope:t,contextName:l})=>{const[i,o]=k.useState(null),[c,u]=k.useState(null),[f,x]=k.useState(null),[m,b]=k.useState(!1),[y,N]=k.useState(null),[C,A]=k.useState({}),[E,R]=k.useState(null),[P,O]=k.useState(null);k.useEffect(()=>{const j=`mufattish_analysis_y4_math_${l}_${t}`,T=localStorage.getItem(j);if(T)try{A(JSON.parse(T))}catch(L){console.error("Failed to load custom analysis",L)}},[l,t]);const z=(j,T)=>{const L={...C,[j]:T};A(L),localStorage.setItem(`mufattish_analysis_y4_math_${l}_${t}`,JSON.stringify(L)),N(null)},K=j=>{const T={...C};delete T[j],A(T),localStorage.setItem(`mufattish_analysis_y4_math_${l}_${t}`,JSON.stringify(T))},G=k.useMemo(()=>n.flatMap(j=>j.students.map(T=>({...T,className:j.className,schoolName:j.schoolName}))),[n]),F=G.length,$=(j,T,L)=>{if(!j.results)return null;const H=j.results[T];return H?H[L]||H[String(L)]:null},B=k.useMemo(()=>G.map(j=>{let T=0,L=0,H=0,Z=0,de=0,fe=0;Ka.competencies.forEach(Ne=>{Ne.criteria.forEach(Ae=>{const ie=$(j,Ne.id,Ae.id);if(ie){const ee=ie==="A"?3:ie==="B"?2:ie==="C"?1:0;L+=3,T+=ee,Ne.id==="control_resources"?(H+=ee,Z+=3):(de+=ee,fe+=3)}})});const je=L>0?T/L*100:0,we=Z>0?H/Z*100:0,xe=fe>0?de/fe*100:0;return{...j,percent:je,resPct:we,solvPct:xe}}),[G]),q=k.useMemo(()=>{let j=0,T=0,L=0;return B.forEach(H=>{H.percent>=66?j++:H.percent>=33?T++:L++}),{controlled:j,partial:T,limited:L}},[B]),J=k.useMemo(()=>{if(B.length===0)return 0;const j=B.reduce((L,H)=>L+H.percent,0)/B.length,T=B.reduce((L,H)=>L+Math.pow(H.percent-j,2),0)/B.length;return Math.sqrt(T)},[B]),Q=k.useMemo(()=>{const j={A:0,B:0,C:0,D:0,total:0};return G.forEach(T=>{Ka.competencies.forEach(L=>{L.criteria.forEach(H=>{const Z=$(T,L.id,H.id);Z&&(j[Z]++,j.total++)})})}),j.total===0&&(j.total=1),j},[G]),U=k.useMemo(()=>{const j={balanced_high:0,method_gap:0,knowledge_gap:0,struggling:0,total:0};return B.forEach(T=>{const L=T.resPct>=50,H=T.solvPct>=50;L&&H?j.balanced_high++:L&&!H?j.method_gap++:!L&&H?j.knowledge_gap++:j.struggling++,j.total++}),j},[B]),ae=k.useMemo(()=>Ka.competencies.flatMap(j=>j.criteria.map(T=>{const L={A:0,B:0,C:0,D:0,total:0};G.forEach(Z=>{const de=$(Z,j.id,T.id);de&&(L[de]++,L.total++)});const H=L.total?(L.A+L.B)/L.total*100:0;return{...T,compId:j.id,stats:L,successRate:H}})).sort((j,T)=>j.successRate-T.successRate),[G]),se=j=>{if(j==="distribution"){const T=Q.A,L=Q.B,H=Q.C+Q.D,Z=Q.total||1;let de=T+L>H?" :      (  ).    .":" :    (+)        ( ).";return{reading:` : ${Math.round(T/Z*100)}% |  : ${Math.round(L/Z*100)}% | : ${Math.round(H/Z*100)}%`,diagnosis:de,recommendation:T+L>H?"   .":"     ."}}if(j==="homogeneity"){let T="";return J<18?T="  .      .":J<28?T=" .      .":T=" .        .",{reading:` : ${J.toFixed(2)}`,diagnosis:T,recommendation:J>28?"   (  /  ).":"   ."}}if(j==="matrix"){const T=U.total||1,L=Math.round(U.method_gap/T*100),H=Math.round(U.knowledge_gap/T*100);return{reading:` >  (): ${L}% |  >  (): ${H}%`,diagnosis:L>20?"          .":"    .",recommendation:L>20?"  ' '  .":"   ."}}return{reading:"",diagnosis:"",recommendation:""}},ne=j=>C[j]||se(j),w=(j,T,L)=>{const H=j.currentTarget.getBoundingClientRect();u({x:H.left+H.width/2,y:H.top-15,text:L,title:T})},D=()=>{u(null)},V=({section:j})=>e.jsx("button",{onClick:T=>{T.stopPropagation(),o(j)},className:"absolute top-4 left-4 p-2 bg-slate-100 hover:bg-indigo-100 text-slate-500 hover:text-indigo-600 rounded-full transition-all duration-300 opacity-0 group-hover:opacity-100 transform scale-90 group-hover:scale-100 z-10 shadow-sm",title:"  ",children:e.jsx(en,{size:18})}),Y=j=>j.includes("")||j.includes("")?"       /. :     .":j.includes("")?"      ()    . :   .":j.includes("")?"    ( ). :     ( ).":j.includes(" ")?"       . :     .":j.includes("")?"     (   ...). :   .":"      .",le=(j,T)=>{const L=j.resPct,H=j.solvPct;let Z="",de="",fe="";L>=60&&H<40?(Z="  ()",de="        (   ).",fe="  ' '    ."):L<40&&H>=60?(Z="   ",de="         ( ).",fe="      ."):L<35&&H<35?(Z=" ",de="     ( ).",fe="    ."):(Z=" ",de="    .",fe="   .");let je;T&&(je={label:T.label,advice:Y(T.label)}),O({studentName:j.fullName,profileType:Z,diagnosis:de,remedy:fe,scores:{resources:L,solving:H},clickedCriterion:je})},_=()=>{if(!i)return null;const j=Tv[i],T=ne(i);let L=null;switch(i){case"distribution":const H=Q.A,Z=Q.B,de=Q.C+Q.D,fe=Q.total;L=e.jsx("div",{className:"h-full flex flex-col items-center justify-center p-4 w-full",children:e.jsxs("div",{className:"grid grid-cols-3 gap-4 w-full max-w-2xl",children:[e.jsxs("div",{className:"bg-emerald-500/20 p-4 rounded-2xl border border-emerald-500/50 text-center",children:[e.jsxs("span",{className:"block text-4xl font-bold text-emerald-400 mb-2",children:[Math.round(H/fe*100),"%"]}),e.jsx("span",{className:"text-sm text-emerald-200",children:" "})]}),e.jsxs("div",{className:"bg-blue-500/20 p-4 rounded-2xl border border-blue-500/50 text-center",children:[e.jsxs("span",{className:"block text-4xl font-bold text-blue-400 mb-2",children:[Math.round(Z/fe*100),"%"]}),e.jsx("span",{className:"text-sm text-blue-200",children:" "})]}),e.jsxs("div",{className:"bg-red-500/20 p-4 rounded-2xl border border-red-500/50 text-center",children:[e.jsxs("span",{className:"block text-4xl font-bold text-red-400 mb-2",children:[Math.round(de/fe*100),"%"]}),e.jsx("span",{className:"text-sm text-red-200",children:" (+)"})]})]})});break;case"homogeneity":L=e.jsxs("div",{className:"h-full flex flex-col items-center justify-center p-4 w-full",children:[e.jsx("div",{className:"relative w-80 h-40 bg-gray-700/50 rounded-t-full overflow-hidden mb-8 border-t-4 border-x-4 border-slate-600",children:e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-full origin-bottom transition-transform duration-1000",style:{transform:`rotate(${Math.min(J,40)/40*180-90}deg)`},children:e.jsx("div",{className:"w-2 h-full bg-white mx-auto shadow-[0_0_15px_white]"})})}),e.jsx("span",{className:"text-6xl font-bold text-purple-400 font-mono",children:J.toFixed(2)})]});break;case"matrix":L=e.jsx("div",{className:"h-full flex items-center justify-center w-full",children:e.jsxs("div",{className:"aspect-square w-[400px] relative bg-slate-700/30 rounded-2xl border border-slate-600 p-4 grid grid-cols-2 grid-rows-2 gap-2",children:[e.jsxs("div",{className:"bg-blue-100 rounded flex flex-col items-center justify-center hover:bg-blue-200 transition-colors",onMouseEnter:()=>x("q1"),onMouseLeave:()=>x(null),children:[e.jsxs("span",{className:"text-2xl font-bold text-blue-800",children:[Math.round(U.knowledge_gap/U.total*100),"%"]}),e.jsxs("span",{className:"text-sm text-blue-800 font-bold mt-1",children:[" ",">"," "]})]}),e.jsxs("div",{className:"bg-emerald-100 rounded flex flex-col items-center justify-center hover:bg-emerald-200 transition-colors",onMouseEnter:()=>x("q2"),onMouseLeave:()=>x(null),children:[e.jsxs("span",{className:"text-2xl font-bold text-emerald-800",children:[Math.round(U.balanced_high/U.total*100),"%"]}),e.jsx("span",{className:"text-sm text-emerald-800 font-bold mt-1",children:" "})]}),e.jsxs("div",{className:"bg-red-100 rounded flex flex-col items-center justify-center hover:bg-red-200 transition-colors",onMouseEnter:()=>x("q3"),onMouseLeave:()=>x(null),children:[e.jsxs("span",{className:"text-2xl font-bold text-red-800",children:[Math.round(U.struggling/U.total*100),"%"]}),e.jsx("span",{className:"text-sm text-red-800 font-bold mt-1",children:" "})]}),e.jsxs("div",{className:"bg-yellow-100 rounded flex flex-col items-center justify-center hover:bg-yellow-200 transition-colors",onMouseEnter:()=>x("q4"),onMouseLeave:()=>x(null),children:[e.jsxs("span",{className:"text-2xl font-bold text-yellow-800",children:[Math.round(U.method_gap/U.total*100),"%"]}),e.jsxs("span",{className:"text-sm text-yellow-800 font-bold mt-1",children:[" ",">"," "]})]})]})});break}return e.jsxs("div",{className:"fixed inset-0 z-[100] bg-slate-950 text-white flex animate-in zoom-in-95 duration-300 overflow-hidden",children:[e.jsx("button",{onClick:()=>o(null),className:"absolute top-6 left-6 p-2 bg-white/10 hover:bg-white/20 rounded-full z-50 text-white transition-all",children:e.jsx(tn,{size:24})}),e.jsxs("div",{className:"w-[400px] lg:w-[35%] bg-slate-900 border-l border-slate-800 p-8 flex flex-col shadow-2xl relative z-40 overflow-y-auto",children:[e.jsx("div",{className:"mb-8 pb-6 border-b border-slate-800",children:e.jsx("h2",{className:"text-2xl font-bold text-white font-serif",children:j.title})}),e.jsxs("div",{className:"space-y-8 flex-1",children:[e.jsxs("div",{className:"relative pl-4 border-r-2 border-indigo-500/50 pr-4",children:[e.jsxs("h4",{className:"text-indigo-400 font-bold uppercase text-xs mb-2 flex items-center gap-2",children:[e.jsx($t,{size:14}),"   "]}),e.jsx("p",{className:"text-slate-300 leading-relaxed text-sm text-justify",children:T.reading})]}),e.jsxs("div",{className:"relative pl-4 border-r-2 border-amber-500/50 pr-4 bg-amber-500/5 p-4 rounded-l-xl",children:[e.jsxs("h4",{className:"text-amber-400 font-bold uppercase text-xs mb-2 flex items-center gap-2",children:[e.jsx(Qt,{size:14}),"  "]}),e.jsx("p",{className:"text-slate-200 leading-relaxed text-sm font-medium text-justify",children:T.diagnosis})]}),e.jsxs("div",{className:"relative pl-4 border-r-2 border-emerald-500/50 pr-4",children:[e.jsxs("h4",{className:"text-emerald-400 font-bold uppercase text-xs mb-2 flex items-center gap-2",children:[e.jsx(vt,{size:14}),"  "]}),e.jsx("p",{className:"text-slate-300 leading-relaxed text-sm text-justify",children:T.recommendation})]})]}),e.jsx("div",{className:"mt-8 pt-6 border-t border-slate-800 text-center",children:e.jsx("p",{className:"text-xs text-slate-500",children:"     2025"})})]}),e.jsxs("div",{className:"flex-1 bg-gradient-to-br from-slate-900 to-slate-950 flex flex-col items-center p-8 relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 opacity-10",style:{backgroundImage:"radial-gradient(circle at 2px 2px, white 1px, transparent 0)",backgroundSize:"40px 40px"}}),e.jsx("div",{className:"w-full max-w-3xl z-20 mb-4 mt-2 animate-in slide-in-from-top-4 shrink-0",children:e.jsxs("div",{className:"bg-white/5 backdrop-blur-md rounded-lg p-3 border border-white/10 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 p-1.5 bg-indigo-500/20 rounded-bl-lg border-b border-l border-white/10",children:e.jsx(it,{size:14,className:"text-indigo-300"})}),e.jsxs("div",{className:"space-y-2 pt-1",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-[11px] font-bold text-indigo-300 uppercase mb-0.5",children:" "}),e.jsx("p",{className:"text-xs text-white/90 leading-relaxed",children:j.concept})]}),e.jsxs("div",{className:"pt-2 border-t border-white/10",children:[e.jsxs("h4",{className:"text-[10px] font-bold text-slate-400 uppercase mb-0.5 flex items-center gap-1",children:[e.jsx(An,{size:10}),"  "]}),e.jsx("p",{className:"text-[10px] text-slate-400 leading-relaxed font-mono opacity-80",children:j.method})]})]})]})}),e.jsx("div",{className:"relative z-10 w-full flex-1 flex items-center justify-center min-h-0",children:L})]})]})},M=()=>{if(!y||!m)return null;const j=ne(y);return e.jsx(sb,{section:y,initialData:j,onSave:T=>z(y,T),onReset:()=>K(y),onClose:()=>N(null)})};return F===0?e.jsx("div",{className:"text-center p-10 text-gray-400",children:"  "}):e.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-700 pb-12 relative",children:[c&&e.jsxs("div",{className:"fixed z-[9999] pointer-events-none bg-slate-900 text-white px-3 py-2 rounded-lg shadow-xl text-xs max-w-xs border border-slate-700",style:{left:c.x,top:c.y,transform:"translate(-50%, -100%)"},children:[c.title&&e.jsx("div",{className:"font-bold border-b border-slate-600 pb-1 mb-1 text-yellow-400",children:c.title}),e.jsx("div",{children:c.text}),e.jsx("div",{className:"absolute -bottom-1.5 left-1/2 -translate-x-1/2 w-3 h-3 bg-slate-900 rotate-45 border-r border-b border-slate-700"})]}),_(),M(),E&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-in fade-in",onClick:()=>R(null),children:e.jsxs("div",{className:"bg-slate-900 w-full max-w-lg rounded-2xl p-6 border border-slate-700 shadow-2xl",onClick:j=>j.stopPropagation(),children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[e.jsx(it,{size:20,className:"text-blue-400"})," ",E.title]}),e.jsx("button",{onClick:()=>R(null),className:"text-slate-400 hover:text-white transition-colors",children:e.jsx(Ze,{})})]}),e.jsxs("p",{className:"text-slate-300 text-sm mb-6 italic border-r-4 border-slate-600 pr-4 leading-relaxed",children:['"',E.definition,'"']}),e.jsxs("div",{className:"bg-blue-900/20 p-4 rounded-xl border border-blue-900/50 mb-6",children:[e.jsxs("h4",{className:"text-xs font-bold text-blue-400 mb-2 flex items-center gap-1 uppercase tracking-wider",children:[e.jsx(Vt,{size:12}),"  :"]}),e.jsx("p",{className:"text-xs text-blue-200 leading-relaxed text-justify",children:E.pedagogicalRef})]}),E.content]})}),P&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-in fade-in",onClick:()=>O(null),children:e.jsxs("div",{className:"bg-slate-900 w-full max-w-md rounded-3xl p-6 border border-slate-700 overflow-hidden flex flex-col max-h-[90vh] shadow-2xl",onClick:j=>j.stopPropagation(),children:[e.jsxs("div",{className:"flex justify-between items-start mb-6 shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-purple-500/20 flex items-center justify-center border border-purple-500/50 shadow-inner",children:e.jsx(Ds,{size:24,className:"text-purple-300"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:P.studentName}),e.jsx("span",{className:"text-[10px] bg-purple-900/50 text-purple-300 px-2 py-0.5 rounded border border-purple-800 block w-fit mt-1",children:P.profileType})]})]}),e.jsx("button",{onClick:()=>O(null),className:"text-slate-400 hover:text-white transition-colors",children:e.jsx(Ze,{})})]}),e.jsxs("div",{className:"space-y-4 overflow-y-auto pr-1 custom-scrollbar",children:[e.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-xl border border-slate-700",children:[e.jsxs("h4",{className:"text-xs font-bold text-slate-400 mb-2 flex items-center gap-2 uppercase tracking-wider",children:[e.jsx(Sh,{size:14}),"  "]}),e.jsx("p",{className:"text-sm text-slate-300 leading-relaxed text-justify",children:P.diagnosis})]}),e.jsxs("div",{className:"bg-emerald-900/20 p-4 rounded-xl border border-emerald-800/50",children:[e.jsxs("h4",{className:"text-xs font-bold text-emerald-400 mb-2 flex items-center gap-2 uppercase tracking-wider",children:[e.jsx(hl,{size:14}),"   "]}),e.jsx("p",{className:"text-sm text-emerald-100 leading-relaxed text-justify",children:P.remedy})]}),P.clickedCriterion&&e.jsxs("div",{className:"bg-orange-900/20 p-4 rounded-xl border border-orange-800/50 animate-in slide-in-from-bottom-2",children:[e.jsxs("h4",{className:"text-xs font-bold text-orange-400 mb-2 flex items-center gap-2 uppercase tracking-wider",children:[e.jsx(Qt,{size:14}),"    :"]}),e.jsx("div",{className:"mb-2 text-xs font-bold text-orange-200 bg-orange-950/50 px-2 py-1 rounded inline-block",children:P.clickedCriterion.label}),e.jsx("p",{className:"text-sm text-orange-100 leading-relaxed text-justify",children:P.clickedCriterion.advice})]})]})]})}),e.jsxs("div",{className:"bg-white rounded-3xl shadow-xl border border-slate-100 overflow-hidden",children:[e.jsxs("div",{className:"bg-slate-900 text-white p-8 relative",children:[e.jsx("div",{className:"absolute top-0 right-0 p-10 opacity-10",children:e.jsx(Ds,{size:150})}),e.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row justify-between items-end gap-6",children:[e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center gap-2 mb-2 text-indigo-300 font-bold uppercase tracking-widest text-xs",children:t==="district"?"  ":t==="school"?" ":" "}),e.jsx("h2",{className:"text-4xl font-bold font-serif mb-2",children:Ka.label}),e.jsxs("p",{className:"text-slate-400 text-lg flex items-center gap-2",children:[e.jsx(Et,{size:18})," ",l]})]}),e.jsx("div",{className:"flex gap-4",children:e.jsxs("div",{className:"bg-slate-800 p-4 rounded-2xl text-center min-w-[100px] border border-slate-700 flex flex-col justify-center",children:[e.jsx("span",{className:"block text-3xl font-bold text-white",children:F}),e.jsx("span",{className:"text-xs text-slate-400 font-bold",children:""})]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 divide-y md:divide-y-0 md:divide-x md:divide-x-reverse divide-slate-100",children:[e.jsxs("div",{className:"p-6 flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-emerald-100 text-emerald-600 flex items-center justify-center",children:e.jsx(vt,{size:24})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase",children:" "}),e.jsxs("p",{className:"text-2xl font-bold text-emerald-700",children:[Math.round(q.controlled/F*100),"%"]})]})]}),e.jsxs("div",{className:"p-6 flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-orange-100 text-orange-600 flex items-center justify-center",children:e.jsx(Kl,{size:24})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase",children:" "}),e.jsxs("p",{className:"text-2xl font-bold text-orange-700",children:[Math.round(q.partial/F*100),"%"]})]})]}),e.jsxs("div",{className:"p-6 flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-red-100 text-red-600 flex items-center justify-center",children:e.jsx(ys,{size:24})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase",children:" "}),e.jsxs("p",{className:"text-2xl font-bold text-red-700",children:[Math.round(q.limited/F*100),"%"]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-slate-200 cursor-pointer hover:shadow-lg hover:border-blue-300 transition-all group",onClick:()=>o("distribution"),onMouseEnter:j=>w(j," ","     ."),onMouseLeave:D,children:[e.jsx(V,{section:"distribution"}),e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("h3",{className:"font-bold text-lg text-slate-800 flex items-center gap-2",children:[e.jsx($t,{size:20,className:"text-blue-500"})," "]}),e.jsx(it,{size:16,className:"text-slate-300 group-hover:text-blue-500 transition-colors"})]}),e.jsx("div",{className:"flex items-end gap-4 h-40",children:["A","B","C","D"].map(j=>{const T=Q[j],L=Q.total>0?T/Q.total*100:0,H=j==="A"?"bg-emerald-500":j==="B"?"bg-blue-500":j==="C"?"bg-orange-500":"bg-red-500";return e.jsxs("div",{className:"flex-1 flex flex-col justify-end items-center h-full",children:[e.jsx("div",{className:`w-full rounded-t-lg ${H}`,style:{height:`${Math.max(L,5)}%`}}),e.jsxs("span",{className:"mt-2 font-bold text-slate-600 text-xs",children:[j," (",Math.round(L),"%)"]})]},j)})})]}),e.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-slate-200 cursor-pointer hover:shadow-lg hover:border-purple-300 transition-all",onClick:()=>o("homogeneity"),onMouseEnter:j=>w(j," ","     ."),onMouseLeave:D,children:[e.jsx(V,{section:"homogeneity"}),e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("h3",{className:"font-bold text-lg text-slate-800 flex items-center gap-2",children:[e.jsx(Gs,{size:20,className:"text-purple-500"})," "]}),e.jsx(it,{size:16,className:"text-slate-300 group-hover:text-purple-500 transition-colors"})]}),e.jsx("div",{className:"flex justify-center items-center py-6",children:e.jsx("div",{className:"relative w-48 h-24 bg-gray-100 rounded-t-full overflow-hidden",children:e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-full origin-bottom transition-transform duration-1000",style:{transform:`rotate(${Math.min(J,40)/40*180-90}deg)`},children:e.jsx("div",{className:"w-1 h-full bg-slate-800 mx-auto"})})})}),e.jsx("div",{className:"text-center text-3xl font-bold text-purple-700",children:J.toFixed(1)})]}),e.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-slate-200 cursor-pointer hover:shadow-lg hover:border-teal-300 transition-all group relative lg:col-span-3 xl:col-span-1",onClick:()=>o("matrix"),children:[e.jsx(V,{section:"matrix"}),e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("h3",{className:"font-bold text-lg text-slate-800 flex items-center gap-2",children:[e.jsx(Yl,{size:20,className:"text-teal-500"}),"  (/)"]}),e.jsx(it,{size:16,className:"text-slate-300 group-hover:text-teal-500 transition-colors"})]}),e.jsxs("div",{className:"flex gap-6 items-center justify-center relative",children:[f&&e.jsxs("div",{className:"absolute -top-16 left-1/2 -translate-x-1/2 z-20 bg-slate-800/90 text-white p-2 rounded-xl text-xs w-48 text-center animate-in zoom-in-95 duration-200 shadow-xl border border-slate-600",children:[e.jsxs("div",{className:"font-bold border-b border-slate-600 pb-1 mb-1 text-slate-200",children:[f==="q1"&&"  /  ",f==="q2"&&"  ()",f==="q3"&&"   ",f==="q4"&&"  /  "]}),e.jsxs("div",{className:"text-[10px] text-slate-400",children:[f==="q1"&&"     ",f==="q2"&&"    ",f==="q3"&&"   ",f==="q4"&&"     "]}),e.jsx("div",{className:"absolute bottom-[-6px] left-1/2 -translate-x-1/2 w-3 h-3 bg-slate-800/90 rotate-45 border-r border-b border-slate-600"})]}),e.jsxs("div",{className:"aspect-square w-52 relative bg-slate-50 rounded-xl border border-slate-200 p-2 grid grid-cols-2 grid-rows-2 gap-1 shrink-0",children:[e.jsx("div",{className:"bg-blue-100 rounded flex flex-col items-center justify-center hover:bg-blue-200 transition-colors",onMouseEnter:()=>x("q1"),onMouseLeave:()=>x(null),children:e.jsxs("span",{className:"text-xs font-bold text-blue-800",children:[Math.round(U.knowledge_gap/U.total*100),"%"]})}),e.jsx("div",{className:"bg-emerald-100 rounded flex flex-col items-center justify-center hover:bg-emerald-200 transition-colors",onMouseEnter:()=>x("q2"),onMouseLeave:()=>x(null),children:e.jsxs("span",{className:"text-xs font-bold text-emerald-800",children:[Math.round(U.balanced_high/U.total*100),"%"]})}),e.jsx("div",{className:"bg-red-100 rounded flex flex-col items-center justify-center hover:bg-red-200 transition-colors",onMouseEnter:()=>x("q3"),onMouseLeave:()=>x(null),children:e.jsxs("span",{className:"text-xs font-bold text-red-800",children:[Math.round(U.struggling/U.total*100),"%"]})}),e.jsx("div",{className:"bg-yellow-100 rounded flex flex-col items-center justify-center hover:bg-yellow-200 transition-colors",onMouseEnter:()=>x("q4"),onMouseLeave:()=>x(null),children:e.jsxs("span",{className:"text-xs font-bold text-yellow-800",children:[Math.round(U.method_gap/U.total*100),"%"]})}),e.jsx("div",{className:"absolute -left-4 top-1/2 -translate-x-1/2 -rotate-90 text-[10px] text-slate-500 font-bold tracking-widest",children:" "}),e.jsx("div",{className:"absolute bottom-[-20px] left-1/2 -translate-x-1/2 text-[10px] text-slate-500 font-bold tracking-widest",children:""})]})]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-slate-200",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[e.jsxs("h3",{className:"font-bold text-lg text-slate-800 flex items-center gap-2",children:[e.jsx(is,{size:20,className:"text-red-500"}),"   (  )"]}),e.jsxs("div",{className:"flex gap-3 text-[10px] bg-slate-50 p-2 rounded-lg border border-slate-100",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-emerald-500 rounded-full"}),e.jsx("span",{children:" ()"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full"}),e.jsx("span",{children:" ()"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-orange-400 rounded-full"}),e.jsx("span",{children:" ()"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-red-400 rounded-full"}),e.jsx("span",{children:" ()"})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:ae.map((j,T)=>e.jsxs("div",{className:"bg-slate-50 rounded-xl p-4 border border-slate-100 group hover:border-indigo-100 transition-colors",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("span",{className:"text-[10px] text-slate-400 font-bold bg-white px-2 py-0.5 rounded border border-slate-100",children:j.compId==="control_resources"?" ":" "}),e.jsxs("span",{className:`text-xs font-bold px-2 py-1 rounded ${j.successRate<50?"bg-red-100 text-red-600":"bg-green-100 text-green-600"}`,children:[Math.round(j.successRate),"% "]})]}),e.jsx("h4",{className:"font-bold text-slate-800 text-sm mb-3 line-clamp-2 min-h-[40px]",children:j.label}),e.jsxs("div",{className:"flex h-2 rounded-full overflow-hidden relative",children:[e.jsx("div",{className:"bg-emerald-500",style:{width:`${j.stats.A/j.stats.total*100}%`}}),e.jsx("div",{className:"bg-blue-400",style:{width:`${j.stats.B/j.stats.total*100}%`}}),e.jsx("div",{className:"bg-orange-400",style:{width:`${j.stats.C/j.stats.total*100}%`}}),e.jsx("div",{className:"bg-red-400",style:{width:`${j.stats.D/j.stats.total*100}%`}})]}),e.jsxs("div",{className:"flex justify-between text-[10px] text-slate-400 font-mono mt-2 pt-2 border-t border-slate-100",children:[e.jsxs("span",{className:"font-bold text-slate-500",children:[j.stats.A+j.stats.B," "]}),e.jsxs("span",{className:"font-bold text-slate-500",children:[j.stats.C+j.stats.D," "]})]})]},T))})]}),t==="class"&&e.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-red-100 border-t-4 border-t-red-500 mt-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h3",{className:"font-bold text-lg text-slate-800 flex items-center gap-2",children:[e.jsx(Bl,{size:20,className:"text-red-500"}),"   ()"]}),e.jsx("span",{className:"bg-red-50 text-red-600 text-xs px-3 py-1 rounded-full font-bold",children:"  "})]}),e.jsx("div",{className:"masonry-grid grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Ka.competencies.map(j=>e.jsx(Ws.Fragment,{children:j.criteria.map(T=>{const L=G.filter(H=>$(H,j.id,T.id)==="D");return L.length===0?null:e.jsxs("div",{className:"bg-red-50/30 rounded-xl p-4 border border-red-100 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start gap-2 mb-3",children:[e.jsx("div",{className:"mt-1 w-2 h-2 rounded-full bg-red-500 shrink-0"}),e.jsx("h5",{className:"font-bold text-slate-700 text-xs leading-snug",children:T.label})]}),e.jsx("div",{className:"flex flex-wrap gap-1.5",children:L.map(H=>{const Z=B.find(de=>de.id===H.id)||H;return e.jsx("button",{onClick:()=>le(Z,T),className:"px-2 py-1 rounded text-[10px] font-bold bg-white text-red-700 border border-red-100 shadow-sm hover:bg-red-500 hover:text-white hover:border-red-500 transition-all cursor-pointer",children:H.fullName},H.id)})})]},`${j.id}-${T.id}`)})},j.id))})]}),e.jsx("div",{className:"fixed bottom-6 left-1/2 transform -translate-x-1/2 z-50",children:e.jsxs("button",{onClick:()=>b(!0),className:"flex items-center gap-2 bg-slate-800 hover:bg-slate-700 text-white px-8 py-4 rounded-2xl font-bold text-sm transition-all shadow-xl hover:shadow-2xl border-2 border-slate-700 hover:border-slate-600 hover:scale-105 group",children:[e.jsx(Tt,{size:18,className:"group-hover:rotate-12 transition-transform"}),e.jsx("span",{children:" "})]})}),m&&e.jsx("div",{className:"fixed inset-0 z-[110] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 animate-in fade-in",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full p-6 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6 border-b pb-4",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-xl text-slate-800 flex items-center gap-2",children:[e.jsx(Tt,{size:24,className:"text-indigo-600"}),"  "]}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"         "})]}),e.jsx("button",{onClick:()=>b(!1),className:"text-slate-400 hover:text-red-500",children:e.jsx(Ze,{})})]}),y?e.jsx(sb,{section:y,initialData:ne(y),onSave:j=>z(y,j),onReset:()=>K(y),onClose:()=>N(null)}):e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("button",{onClick:()=>N("distribution"),className:"p-4 bg-slate-50 hover:bg-indigo-50 border rounded-xl text-right transition-colors group",children:e.jsx("span",{className:"font-bold text-slate-700 block group-hover:text-indigo-700",children:" "})}),e.jsx("button",{onClick:()=>N("homogeneity"),className:"p-4 bg-slate-50 hover:bg-indigo-50 border rounded-xl text-right transition-colors group",children:e.jsx("span",{className:"font-bold text-slate-700 block group-hover:text-indigo-700",children:" "})}),e.jsx("button",{onClick:()=>N("matrix"),className:"p-4 bg-slate-50 hover:bg-indigo-50 border rounded-xl text-right transition-colors group col-span-2",children:e.jsx("span",{className:"font-bold text-slate-700 block group-hover:text-indigo-700",children:" "})})]})]})})]})},sb=({section:n,initialData:t,onSave:l,onReset:i,onClose:o})=>{const[c,u]=k.useState(t),f=()=>Tv[n].title;return e.jsxs("div",{className:"space-y-4 animate-in slide-in-from-right-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("button",{onClick:o,className:"text-xs text-slate-500 hover:text-slate-800 flex items-center gap-1",children:[e.jsx(Hs,{size:12,className:"rotate-180"}),"  "]}),e.jsx("span",{className:"text-sm font-bold bg-indigo-100 text-indigo-700 px-3 py-1 rounded-full",children:f()})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-700 mb-1",children:"  "}),e.jsx(Pe,{value:c.reading,onChange:x=>u({...c,reading:x}),className:"w-full border rounded-lg p-3 text-sm bg-slate-50 focus:bg-white focus:ring-2 focus:ring-indigo-500 max-h-60 overflow-y-auto",minHeight:"min-h-[120px]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-700 mb-1",children:" "}),e.jsx(Pe,{value:c.diagnosis,onChange:x=>u({...c,diagnosis:x}),className:"w-full border rounded-lg p-3 text-sm bg-amber-50 focus:bg-white focus:ring-2 focus:ring-amber-500 max-h-60 overflow-y-auto",minHeight:"min-h-[120px]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-700 mb-1",children:" "}),e.jsx(Pe,{value:c.recommendation,onChange:x=>u({...c,recommendation:x}),className:"w-full border rounded-lg p-3 text-sm bg-emerald-50 focus:bg-white focus:ring-2 focus:ring-emerald-500 max-h-60 overflow-y-auto",minHeight:"min-h-[120px]"})]}),e.jsxs("div",{className:"flex justify-between pt-4 border-t",children:[e.jsxs("button",{onClick:i,className:"text-red-500 text-xs font-bold flex items-center gap-1 hover:underline",children:[e.jsx(Tn,{size:12}),"   "]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:o,className:"px-4 py-2 text-slate-500 font-bold hover:bg-slate-100 rounded-lg",children:""}),e.jsxs("button",{onClick:()=>l(c),className:"px-6 py-2 bg-indigo-600 text-white font-bold rounded-lg hover:bg-indigo-700 shadow-md flex items-center gap-2",children:[e.jsx(Zt,{size:16}),"  "]})]})]})]})},fh={id:"arabic_y5",label:"  ( )",competencies:[{id:"oral_comms",label:"   ",criteria:[{id:1,label:"   "},{id:2,label:"    "},{id:3,label:"  "},{id:4,label:"  "},{id:5,label:"   "},{id:6,label:"    "}]},{id:"reading_perf",label:"  ",criteria:[{id:1,label:"     "},{id:2,label:"   "},{id:3,label:"   "},{id:4,label:"   ( )"}]},{id:"written_comp",label:"  ",criteria:[{id:1,label:"     "},{id:2,label:"     "},{id:3,label:"     "},{id:4,label:"      "},{id:5,label:"      "},{id:6,label:"     "},{id:7,label:"    "},{id:8,label:"  "},{id:9,label:"      "}]},{id:"written_prod",label:"  ",criteria:[{id:1,label:"   "},{id:2,label:"    "},{id:3,label:"  "},{id:4,label:"   (  )"},{id:5,label:"   "},{id:6,label:"       "},{id:7,label:"  (    ...)"}]}]},xh={gap:{title:"  ( )",concept:"    ' '  ( )   ''   .",method:"     4  5    ()      4   .",icon:e.jsx(Gs,{size:24})},textType:{title:"  ",concept:"        ( )    (  ).",method:"      ( 2  3)     ( 6  9).",icon:e.jsx(hl,{size:24})},radar:{title:" ",concept:"             (    ).",method:"      (     )  .",icon:e.jsx($t,{size:24})},illiteracy:{title:"  ",concept:"            .",method:"       ()   ( )   (/) .",icon:e.jsx(jr,{size:24})},funnel:{title:"  ( )",concept:"  :   ->   ->   () ->  .",method:"           (  1   9).",icon:e.jsx(Jl,{size:24})},patterns:{title:"  ",concept:"       (///).",method:"        .",icon:e.jsx(yb,{size:24})},sustainability:{title:"  ",concept:"           .",method:"         .",icon:e.jsx(Vl,{size:24})}},ur={A:{label:" ",color:"#10b981",score:3,description:"       "},B:{label:" ",color:"#3b82f6",score:2,description:"    "},C:{label:" ",color:"#f59e0b",score:1,description:"    "},D:{label:" ",color:"#ef4444",score:0,description:"   "}},hr=n=>n>=96?"":n>=81?"":n>=61?"":n>=41?"":"",bA=n=>{switch(n){case"":return"bg-gradient-to-r from-emerald-500 to-teal-600";case"":return"bg-gradient-to-r from-blue-500 to-indigo-600";case"":return"bg-gradient-to-r from-yellow-500 to-amber-600";case"":return"bg-gradient-to-r from-orange-500 to-red-500";case"":return"bg-gradient-to-r from-red-500 to-pink-600"}},vA=({records:n,scope:t,contextName:l})=>{const[i,o]=k.useState(null),[c,u]=k.useState(null),[f,x]=k.useState(!1),[m,b]=k.useState(null),[y,N]=k.useState({});k.useEffect(()=>{const _=`mufattish_analysis_${l}_${t}`,M=localStorage.getItem(_);if(M)try{N(JSON.parse(M))}catch(j){console.error("Failed to load custom analysis",j)}},[l,t]);const C=(_,M)=>{const j={...y,[_]:M};N(j),localStorage.setItem(`mufattish_analysis_${l}_${t}`,JSON.stringify(j)),b(null)},A=_=>{const M={...y};delete M[_],N(M),localStorage.setItem(`mufattish_analysis_${l}_${t}`,JSON.stringify(M))},E=k.useMemo(()=>n.flatMap(_=>_.students),[n]),R=E.length,P=(_,M,j)=>{if(!_.results)return null;const T=_.results[M];return T?T[j]||T[String(j)]:null},O=_=>{var M;return _&&((M=ur[_])==null?void 0:M.score)||0},z=k.useMemo(()=>{let _=0,M=0,j=0,T=0;E.forEach(de=>{const fe=P(de,"written_comp",4),je=P(de,"written_comp",5);[fe,je].forEach(xe=>{xe&&(M+=3,_+=O(xe))});const we=P(de,"written_prod",4);we&&(T+=3,j+=O(we))});const L=M>0?_/M*100:0,H=T>0?j/T*100:0,Z=L-H;return{rPct:L,cPct:H,gap:Z,rLevel:hr(L),cLevel:hr(H),gapSeverity:Math.abs(Z)>15?"":Math.abs(Z)>8?"":""}},[E]),K=k.useMemo(()=>{let _=0,M=0,j=0,T=0;E.forEach(Z=>{const de=P(Z,"written_comp",6),fe=P(Z,"written_comp",8),je=P(Z,"written_comp",9);[de,fe,je].forEach(Ne=>{Ne&&(M+=3,_+=O(Ne))});const we=P(Z,"written_comp",2),xe=P(Z,"written_comp",3);[we,xe].forEach(Ne=>{Ne&&(T+=3,j+=O(Ne))})});const L=M>0?_/M*100:0,H=T>0?j/T*100:0;return{complexPct:L,basicPct:H,complexLevel:hr(L),basicLevel:hr(H),gap:H-L}},[E]),G=k.useMemo(()=>{const _=E.filter(j=>{const T=P(j,"reading_perf",1),L=P(j,"written_prod",3);return T==="D"&&L==="D"}).length,M=R>0?_/R*100:0;return{percentage:M,count:_,level:M>15?"":M>8?"":""}},[E,R]),F=k.useMemo(()=>[{key:"oral",label:" ",compId:"oral_comms"},{key:"reading",label:" ",compId:"reading_perf"},{key:"comp",label:" ",compId:"written_comp"},{key:"prod",label:" ",compId:"written_prod"}].map(M=>{let j=0,T=0;E.forEach(H=>{const Z=fh.competencies.find(de=>de.id===M.compId);Z==null||Z.criteria.forEach(de=>{const fe=P(H,M.compId,de.id);fe&&(T+=3,j+=O(fe))})});const L=T>0?j/T*100:0;return{subject:M.label,A:L,fullMark:100,level:hr(L)}}),[E]),$=k.useMemo(()=>{const _=R,M=E.filter(H=>{const Z=P(H,"reading_perf",1);return Z==="A"||Z==="B"}).length,j=E.filter(H=>{const Z=P(H,"written_comp",2),de=P(H,"written_comp",3);return(Z==="A"||Z==="B")&&(de==="A"||de==="B")}).length,T=E.filter(H=>{const Z=P(H,"written_comp",4),de=P(H,"written_comp",5);return(Z==="A"||Z==="B")&&(de==="A"||de==="B")}).length,L=E.filter(H=>{const Z=P(H,"written_comp",8),de=P(H,"written_comp",9);return Z==="A"||Z==="B"||de==="A"||de==="B"}).length;return[{label:" ",count:M,color:"bg-slate-300",text:"text-slate-700",desc:"     ",percentage:_>0?M/_*100:0},{label:" ",count:j,color:"bg-blue-300",text:"text-blue-900",desc:"       ",percentage:_>0?j/_*100:0},{label:" ",count:T,color:"bg-indigo-400",text:"text-white",desc:"     ()",percentage:_>0?T/_*100:0},{label:" ",count:L,color:"bg-pink-600",text:"text-white",desc:"    ",percentage:_>0?L/_*100:0}]},[E,R]),B=k.useMemo(()=>{let _=0,M=0,j=0,T=0,L=0;return E.forEach(H=>{const Z=xe=>{let Ne=0,Ae=0;const ie=fh.competencies.find(ee=>ee.id===xe);return ie==null||ie.criteria.forEach(ee=>{const ke=P(H,xe,ee.id);ke&&(Ae+=3,Ne+=O(ke))}),Ae>0?Ne/Ae*100:0},de=Z("oral_comms"),fe=Z("written_prod"),je=Z("reading_perf"),we=Z("written_comp");de>75&&fe<50?_++:fe>75&&de<50?M++:Math.abs(de-fe)<20&&Math.abs(je-we)<20?j++:we>je+25?T++:fe<40?L++:j++}),{verbalDominant:_,writtenDominant:M,balanced:j,comprehensionFocused:T,productionChallenged:L,total:R}},[E,R]),q=k.useMemo(()=>{const _=E.filter(j=>[{comp:"reading_perf",crit:1},{comp:"written_comp",crit:2},{comp:"written_prod",crit:3}].every(L=>{const H=P(j,L.comp,L.crit);return H==="A"||H==="B"})).length,M=_/R*100;return{count:_,percentage:M,level:M>70?"":M>50?"":"",atRisk:R-_}},[E,R]),J=k.useMemo(()=>{const _=[z.gapSeverity,G.level,q.level,K.gap>30?"":K.gap>15?"":""],M=_.filter(Z=>Z==="").length,j=_.filter(Z=>Z==="").length,T=_.filter(Z=>Z==="").length,L=_.filter(Z=>Z==="").length,H=(M*4+j*3+T*2+L*1)/(_.length*4)*100;return{score:H,level:H>75?"":H>60?"":H>40?"":"",color:H>75?"text-emerald-600":H>60?"text-blue-600":H>40?"text-amber-600":"text-red-600",bgColor:H>75?"bg-emerald-100":H>60?"bg-blue-100":H>40?"bg-amber-100":"bg-red-100"}},[z,G,q,K]),Q=_=>{switch(_){case"gap":const M=z.gap;return{reading:`   ${Math.abs(M).toFixed(1)}%. ${M>0?" ":" "}   ${Math.abs(M).toFixed(1)}%.`,diagnosis:M>15?" :     ' '        .":M>8?"    ":" :         .",recommendation:M>15?"       ' '     .":"       ."};case"funnel":const j=$[1].count,T=$[3].count;return{reading:`   ${j>0?((j-T)/j*100).toFixed(0):"0"}%. ${$[3].count}     ' '   ${j}.`,diagnosis:"   ' ' ( )     (  ).",recommendation:"    ' '  '  '  ."};case"textType":const H=K.complexPct<K.basicPct-20;return{reading:`    ${K.basicPct.toFixed(1)}%  ${K.complexPct.toFixed(1)}%    ( ${K.gap.toFixed(1)}%).`,diagnosis:H?"      (   ).       .":"          .",recommendation:"           ."};case"radar":const Z=F.reduce((je,we)=>je.A<we.A?je:we),de=F.reduce((je,we)=>je.A>we.A?je:we);return{reading:`     ${Z.subject} (${Z.A.toFixed(1)}%)  ${de.subject} (${de.A.toFixed(1)}%).`,diagnosis:`  "${Z.subject}"    .`,recommendation:`      "${Z.subject}"  .`};case"illiteracy":return{reading:`  ${G.percentage.toFixed(1)}% (${G.count} ).`,diagnosis:G.percentage>15?"            .":"      .",recommendation:G.percentage>15?"      .":"    ."};case"patterns":const fe=Object.entries({:B.verbalDominant,:B.writtenDominant,:B.balanced,:B.comprehensionFocused}).reduce((je,we)=>je[1]>we[1]?je:we)[0];return{reading:`   '${fe}'  ${(B[fe===""?"verbalDominant":fe===""?"writtenDominant":fe===""?"balanced":"comprehensionFocused"]/R*100).toFixed(0)}%.`,diagnosis:fe===""?"      .":"       .",recommendation:"       ."};case"sustainability":return{reading:`   ${q.percentage.toFixed(1)}% (${q.count} ).`,diagnosis:q.level===""?"         .":"     .",recommendation:q.level===""?"     .":"     ."};default:return{reading:"",diagnosis:"",recommendation:""}}},U=_=>y[_]||Q(_),ae=({section:_})=>e.jsx("button",{onClick:M=>{M.stopPropagation(),o(_)},className:"absolute top-4 left-4 p-2 bg-slate-100 hover:bg-indigo-100 text-slate-500 hover:text-indigo-600 rounded-full transition-all duration-300 opacity-0 group-hover:opacity-100 transform scale-90 group-hover:scale-100 z-10 shadow-sm",title:"  ",children:e.jsx(en,{size:18})}),se=({level:_,text:M=""})=>e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold ${bA(_)} text-white`,children:M||_}),ne=()=>e.jsxs("div",{className:`flex items-center gap-2 ${J.bgColor} px-4 py-2 rounded-full shadow-lg border border-white/20 backdrop-blur-sm`,children:[e.jsx(Qu,{size:18,className:J.color}),e.jsxs("span",{className:`font-bold ${J.color} text-xs md:text-sm`,children:[" : ",J.level]}),e.jsx("div",{className:"w-12 md:w-16 h-2 bg-white/30 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full ${J.color.replace("text-","bg-")} rounded-full`,style:{width:`${J.score}%`}})})]}),w=()=>e.jsx("div",{className:"flex flex-wrap items-center justify-center gap-4 mb-6",children:Object.entries(ur).map(([_,M])=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:M.color}}),e.jsx("span",{className:"text-xs md:text-sm font-medium text-slate-600",children:M.label}),e.jsxs("span",{className:"text-[10px] text-slate-400",children:["(",_,")"]})]},_))}),D=()=>{if(!i)return null;const _=U(i),M=xh[i];let j=null;switch(i){case"gap":j=e.jsxs("div",{className:"w-full max-w-lg space-y-8 py-10",children:[e.jsxs("div",{className:"relative group",children:[e.jsxs("div",{className:"flex justify-between text-lg font-bold mb-2 text-slate-300",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(Vt,{size:24}),"   "]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-indigo-400 text-2xl",children:[z.rPct.toFixed(1),"%"]}),e.jsx(se,{level:z.rLevel})]})]}),e.jsx("div",{className:"h-6 bg-slate-700/50 rounded-full overflow-hidden border border-slate-600",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-indigo-500 to-blue-500 rounded-full transition-all duration-1000 shadow-[0_0_20px_rgba(99,102,241,0.5)]",style:{width:`${z.rPct}%`}})}),e.jsx("p",{className:"text-slate-400 mt-1 text-xs",children:ur.A.description})]}),e.jsxs("div",{className:"relative group",children:[e.jsxs("div",{className:"flex justify-between text-lg font-bold mb-2 text-slate-300",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(Bl,{size:24}),"   ()"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-amber-400 text-2xl",children:[z.cPct.toFixed(1),"%"]}),e.jsx(se,{level:z.cLevel})]})]}),e.jsx("div",{className:"h-6 bg-slate-700/50 rounded-full overflow-hidden border border-slate-600",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-amber-500 to-orange-500 rounded-full transition-all duration-1000 shadow-[0_0_20px_rgba(245,158,11,0.5)]",style:{width:`${z.cPct}%`}})}),e.jsx("p",{className:"text-slate-400 mt-1 text-xs",children:ur.B.description})]}),e.jsx("div",{className:"mt-8 pt-8 border-t border-slate-700",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:`text-3xl font-bold mb-2 ${z.gap>0?"text-indigo-400":"text-amber-400"}`,children:[Math.abs(z.gap).toFixed(1),"%"]}),e.jsx("div",{className:"text-sm text-slate-400",children:z.gap>0?"  ":"  "}),e.jsx("div",{className:`mt-2 px-4 py-1 rounded-full inline-block text-sm font-bold ${z.gapSeverity===""?"bg-red-500/20 text-red-400":z.gapSeverity===""?"bg-yellow-500/20 text-yellow-400":"bg-emerald-500/20 text-emerald-400"}`,children:z.gapSeverity===""?" ":z.gapSeverity===""?" ":" "})]})})]});break;case"funnel":j=e.jsxs("div",{className:"w-full max-w-2xl space-y-3 py-10",children:[$.map((Z,de)=>{const fe=de>0?$[de-1].count:R,je=fe>0?Z.count/fe*100:0;return e.jsxs("div",{className:"flex items-center gap-4 animate-in slide-in-from-left-4",style:{animationDelay:`${de*100}ms`},children:[e.jsxs("div",{className:"w-40 text-right font-bold text-slate-400 text-sm",children:[e.jsx("div",{children:Z.label}),e.jsx("div",{className:"text-xs text-slate-500",children:Z.desc})]}),e.jsxs("div",{className:"flex-1 bg-slate-800/50 rounded-r-lg h-16 relative overflow-hidden flex items-center shadow-lg border border-slate-700",children:[e.jsx("div",{className:`h-full ${Z.color.replace("bg-","bg-gradient-to-r from-").replace("300","500").replace("400","600")} flex items-center justify-end px-4 transition-all duration-1000 absolute left-0 top-0 opacity-80`,style:{width:`${Z.percentage}%`}}),e.jsxs("div",{className:"relative z-10 px-4 w-full flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-white font-bold text-2xl",children:Z.count}),e.jsx("span",{className:"text-slate-300 text-sm mr-2",children:""})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-white font-bold text-lg",children:[Z.percentage.toFixed(1),"%"]}),de>0&&e.jsxs("div",{className:"text-xs text-slate-400",children:[": ",je.toFixed(1),"%"]})]})]})]})]},de)}),e.jsxs("div",{className:"mt-8 p-6 bg-slate-800/50 rounded-xl border border-slate-700 max-w-2xl",children:[e.jsx("h4",{className:"text-lg font-bold text-white mb-3",children:"  "}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-slate-900/50 rounded-lg",children:[e.jsx("div",{className:"text-3xl font-bold text-red-400",children:R-$[3].count}),e.jsx("div",{className:"text-sm text-slate-300",children:"   "})]}),e.jsxs("div",{className:"text-center p-4 bg-slate-900/50 rounded-lg",children:[e.jsxs("div",{className:"text-3xl font-bold text-blue-400",children:[$[0].count>0?(($[0].count-$[3].count)/$[0].count*100).toFixed(1):0,"%"]}),e.jsx("div",{className:"text-sm text-slate-300",children:"  "})]})]})]})]});break;case"textType":j=e.jsxs("div",{className:"w-full flex flex-col items-center py-10",children:[e.jsxs("div",{className:"flex items-end gap-8 md:gap-16 h-80 w-full max-w-2xl justify-center",children:[e.jsxs("div",{className:"flex flex-col items-center gap-3 group w-1/3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-3xl font-bold text-blue-400",children:[K.complexPct.toFixed(0),"%"]}),e.jsx(se,{level:K.complexLevel})]}),e.jsx("div",{className:"w-full bg-slate-700 rounded-t-2xl relative overflow-hidden border-x border-t border-slate-600 shadow-2xl h-56",children:e.jsx("div",{className:"absolute bottom-0 w-full bg-gradient-to-t from-blue-600 to-cyan-400 transition-all duration-1000",style:{height:`${K.complexPct}%`}})}),e.jsxs("div",{className:"text-center",children:[e.jsx("span",{className:"text-lg font-bold text-blue-300 block mb-0.5",children:" "}),e.jsx("span",{className:"text-xs text-slate-400",children:"  "})]})]}),e.jsxs("div",{className:"flex flex-col items-center gap-3 group w-1/3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-3xl font-bold text-slate-300",children:[K.basicPct.toFixed(0),"%"]}),e.jsx(se,{level:K.basicLevel})]}),e.jsx("div",{className:"w-full bg-slate-700 rounded-t-2xl relative overflow-hidden border-x border-t border-slate-600 shadow-2xl h-56",children:e.jsx("div",{className:"absolute bottom-0 w-full bg-gradient-to-t from-slate-500 to-slate-400 transition-all duration-1000",style:{height:`${K.basicPct}%`}})}),e.jsxs("div",{className:"text-center",children:[e.jsx("span",{className:"text-lg font-bold text-slate-300 block mb-0.5",children:" "}),e.jsx("span",{className:"text-xs text-slate-500",children:"  "})]})]})]}),e.jsx("div",{className:"mt-8",children:e.jsx("div",{className:`px-6 py-3 rounded-xl backdrop-blur-sm border inline-block ${K.gap>30?"bg-red-500/20 border-red-500/30":K.gap>15?"bg-yellow-500/20 border-yellow-500/30":"bg-emerald-500/20 border-emerald-500/30"}`,children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-white",children:[K.gap.toFixed(1),"%"]}),e.jsx("div",{className:"text-sm text-slate-300",children:K.gap>0?"  ":"  "})]})})})]});break;case"radar":const T=Z=>{if(Z.length===0)return"";const de=100,fe=80;return Z.map((je,we)=>{const xe=Math.PI*2*we/Z.length-Math.PI/2,Ne=je.A/100,Ae=de+fe*Ne*Math.cos(xe),ie=de+fe*Ne*Math.sin(xe);return`${Ae},${ie}`}).join(" ")};j=e.jsx("div",{className:"w-full flex items-center justify-center py-10",children:e.jsx("div",{className:"relative w-[380px] h-[380px]",children:e.jsxs("svg",{viewBox:"0 0 200 200",className:"w-full h-full overflow-visible",children:[[20,40,60,80,100].map(Z=>e.jsx("circle",{cx:"100",cy:"100",r:Z*.8,fill:"none",stroke:"#334155",strokeDasharray:"4 4"},Z)),F.map((Z,de)=>{const fe=Math.PI*2*de/F.length-Math.PI/2,je=100+80*Math.cos(fe),we=100+80*Math.sin(fe);return e.jsx("line",{x1:"100",y1:"100",x2:je,y2:we,stroke:"#475569"},de)}),e.jsx("polygon",{points:T(F),fill:"rgba(139, 92, 246, 0.4)",stroke:"#a78bfa",strokeWidth:"3",className:"drop-shadow-[0_0_15px_rgba(139,92,246,0.6)]"}),F.map((Z,de)=>{const fe=Math.PI*2*de/F.length-Math.PI/2,je=100+95*Math.cos(fe),we=100+95*Math.sin(fe);return e.jsxs("g",{className:"group",children:[e.jsx("text",{x:je,y:we,textAnchor:"middle",dominantBaseline:"middle",className:"text-[8px] font-bold fill-slate-300 uppercase tracking-widest",children:Z.subject}),e.jsxs("text",{x:je,y:we+8,textAnchor:"middle",dominantBaseline:"middle",className:"text-[10px] font-bold fill-purple-400",children:[Z.A.toFixed(0),"%"]}),e.jsx("text",{x:je,y:we+16,textAnchor:"middle",dominantBaseline:"middle",className:"text-[8px] fill-slate-400",children:Z.level})]},de)})]})})});break;case"illiteracy":const L=G.percentage>15;j=e.jsxs("div",{className:"w-full flex flex-col items-center justify-center text-center py-10",children:[e.jsxs("div",{className:`relative w-72 h-72 flex items-center justify-center rounded-full border-[12px] ${L?"border-red-500/30":"border-emerald-500/30"} bg-slate-800`,children:[e.jsx("div",{className:`absolute inset-0 rounded-full animate-pulse opacity-10 ${L?"bg-red-500":"bg-emerald-500"}`}),e.jsxs("div",{children:[e.jsxs("span",{className:`text-7xl font-bold block ${L?"text-red-500":"text-emerald-500"}`,children:[G.percentage.toFixed(1),"%"]}),e.jsx("span",{className:"text-slate-400 text-lg uppercase tracking-widest mt-2 block",children:" "}),e.jsxs("div",{className:"mt-4",children:[e.jsx("span",{className:"text-3xl font-bold text-white",children:G.count}),e.jsx("span",{className:"text-slate-400 mr-2",children:" "})]})]})]}),e.jsxs("div",{className:"mt-8 grid grid-cols-3 gap-4 max-w-xl",children:[e.jsxs("div",{className:"text-center p-4 bg-slate-800/50 rounded-xl",children:[e.jsx("div",{className:"text-2xl font-bold text-amber-400",children:E.filter(Z=>P(Z,"reading_perf",1)==="D").length}),e.jsx("div",{className:"text-sm text-slate-300",children:"  "})]}),e.jsxs("div",{className:"text-center p-4 bg-slate-800/50 rounded-xl",children:[e.jsx("div",{className:"text-2xl font-bold text-amber-400",children:E.filter(Z=>P(Z,"written_prod",3)==="D").length}),e.jsx("div",{className:"text-sm text-slate-300",children:"  "})]}),e.jsxs("div",{className:"text-center p-4 bg-slate-800/50 rounded-xl",children:[e.jsx("div",{className:`text-2xl font-bold ${G.level===""?"text-red-400":G.level===""?"text-yellow-400":"text-emerald-400"}`,children:G.level}),e.jsx("div",{className:"text-sm text-slate-300",children:" "})]})]})]});break;case"patterns":const H=[{label:"",value:B.balanced,color:"bg-emerald-500"},{label:"",value:B.verbalDominant,color:"bg-blue-500"},{label:"",value:B.writtenDominant,color:"bg-purple-500"},{label:"",value:B.comprehensionFocused,color:"bg-amber-500"},{label:" ",value:B.productionChallenged,color:"bg-red-500"}];j=e.jsxs("div",{className:"w-full max-w-2xl py-10",children:[e.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-5 gap-4 mb-8",children:H.map((Z,de)=>e.jsxs("div",{className:"text-center p-4 bg-slate-800/50 rounded-xl",children:[e.jsx("div",{className:`w-12 h-12 rounded-full ${Z.color} flex items-center justify-center mx-auto mb-2`,children:e.jsxs("span",{className:"text-white font-bold",children:[(Z.value/R*100).toFixed(0),"%"]})}),e.jsx("div",{className:"text-lg font-bold text-white mb-1",children:Z.label}),e.jsxs("div",{className:"text-sm text-slate-300",children:[Z.value," "]})]},de))}),e.jsxs("div",{className:"bg-slate-800/50 rounded-xl p-6",children:[e.jsx("h4",{className:"text-lg font-bold text-white mb-4",children:"  "}),e.jsxs("div",{className:"space-y-3",children:[B.verbalDominant>B.total*.3&&e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-blue-500/10 rounded-lg",children:[e.jsx(wb,{size:20,className:"text-blue-400 mt-1"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-blue-300",children:" "}),e.jsx("div",{className:"text-sm text-slate-300",children:"        "})]})]}),B.productionChallenged>0&&e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-red-500/10 rounded-lg",children:[e.jsx(ys,{size:20,className:"text-red-400 mt-1"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-red-300",children:" "}),e.jsx("div",{className:"text-sm text-slate-300",children:"       "})]})]})]})]})]});break;case"sustainability":j=e.jsxs("div",{className:"w-full flex flex-col items-center justify-center py-10",children:[e.jsxs("div",{className:"relative w-64 h-64 mb-8",children:[e.jsxs("svg",{viewBox:"0 0 100 100",className:"w-full h-full",children:[e.jsx("circle",{cx:"50",cy:"50",r:"45",fill:"none",stroke:"#1e293b",strokeWidth:"2"}),e.jsx("circle",{cx:"50",cy:"50",r:"40",fill:"none",stroke:"#334155",strokeWidth:"1"}),e.jsx("path",{d:"M50,5 A45,45 0 1,1 50,95 A45,45 0 1,1 50,5",fill:"none",stroke:"#10b981",strokeWidth:"8",strokeLinecap:"round",strokeDasharray:`${q.percentage*2.83} 283`,transform:"rotate(-90 50 50)"}),e.jsx("path",{d:"M50,5 A45,45 0 1,1 50,95 A45,45 0 1,1 50,5",fill:"none",stroke:"#ef4444",strokeWidth:"8",strokeLinecap:"round",strokeDasharray:`${(100-q.percentage)*2.83} 283`,strokeDashoffset:`${-q.percentage*2.83}`,transform:"rotate(-90 50 50)"})]}),e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[e.jsxs("span",{className:"text-4xl font-bold text-white",children:[q.percentage.toFixed(1),"%"]}),e.jsx("span",{className:"text-slate-300 text-sm",children:" "}),e.jsx("span",{className:"text-slate-400 text-xs mt-1",children:q.level})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6 max-w-xl",children:[e.jsxs("div",{className:"text-center p-4 bg-emerald-500/10 rounded-xl border border-emerald-500/20",children:[e.jsx("div",{className:"text-2xl font-bold text-emerald-600",children:q.count}),e.jsx("div",{className:"text-sm text-slate-600",children:" "}),e.jsx("div",{className:"text-xs text-emerald-300 mt-1",children:"  "})]}),e.jsxs("div",{className:"text-center p-4 bg-red-500/10 rounded-xl border border-red-500/20",children:[e.jsx("div",{className:"text-2xl font-bold text-red-400",children:q.atRisk}),e.jsx("div",{className:"text-sm text-slate-300",children:" "}),e.jsx("div",{className:"text-xs text-red-300 mt-1",children:"  "})]})]})]});break}return e.jsxs("div",{className:"fixed inset-0 z-[100] bg-slate-950 text-white flex flex-col md:flex-row animate-in zoom-in-95 duration-300 overflow-hidden",children:[e.jsx("button",{onClick:()=>o(null),className:"absolute top-6 left-6 p-2 bg-white/10 hover:bg-white/20 rounded-full z-50 text-white transition-all",children:e.jsx(tn,{size:24})}),e.jsxs("div",{className:"w-full md:w-[400px] lg:w-[35%] bg-slate-900 border-l border-slate-800 flex flex-col shadow-2xl relative z-40 order-2 md:order-1 h-full",children:[e.jsx("div",{className:"p-8 pb-6 border-b border-slate-800 shrink-0",children:e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"p-3 bg-slate-800 rounded-xl border border-slate-700 shadow-inner",children:Ws.isValidElement(M.icon)?Ws.cloneElement(M.icon,{size:24}):null}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white font-serif",children:M.title}),e.jsx("p",{className:"text-slate-400 text-sm",children:"   "})]})]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-8 pt-6 custom-scrollbar",children:[e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"relative pl-4 border-r-2 border-indigo-500/50 pr-4",children:[e.jsxs("h4",{className:"text-indigo-400 font-bold uppercase text-xs mb-2 flex items-center gap-2",children:[e.jsx($t,{size:14}),"   "]}),e.jsx("p",{className:"text-slate-300 leading-relaxed text-sm text-justify",children:_.reading})]}),e.jsxs("div",{className:"relative pl-4 border-r-2 border-amber-500/50 pr-4 bg-amber-500/5 p-4 rounded-l-xl",children:[e.jsxs("h4",{className:"text-amber-400 font-bold uppercase text-xs mb-2 flex items-center gap-2",children:[e.jsx(Qt,{size:14}),"  "]}),e.jsx("p",{className:"text-slate-200 leading-relaxed text-sm font-medium text-justify",children:_.diagnosis})]}),e.jsxs("div",{className:"relative pl-4 border-r-2 border-emerald-500/50 pr-4",children:[e.jsxs("h4",{className:"text-emerald-400 font-bold uppercase text-xs mb-2 flex items-center gap-2",children:[e.jsx(vt,{size:14}),"  "]}),e.jsx("p",{className:"text-slate-300 leading-relaxed text-sm text-justify",children:_.recommendation})]})]}),e.jsxs("div",{className:"mt-8 pt-6 border-t border-slate-800 text-center",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"text-xs font-bold text-slate-400 mb-2",children:" :"}),e.jsx("div",{className:"flex flex-wrap justify-center gap-2",children:Object.entries(ur).map(([T,L])=>e.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:L.color}}),e.jsx("span",{className:"text-slate-300",children:L.label})]},T))})]}),e.jsx("p",{className:"text-xs text-slate-500 text-center",children:"     2025"})]})]})]}),e.jsxs("div",{className:"flex-1 bg-gradient-to-br from-slate-900 to-slate-950 flex flex-col relative order-1 md:order-2 h-full overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 opacity-10 pointer-events-none",style:{backgroundImage:"radial-gradient(circle at 2px 2px, white 1px, transparent 0)",backgroundSize:"40px 40px"}}),e.jsx("div",{className:"flex-1 overflow-y-auto p-8 w-full custom-scrollbar z-10",children:e.jsxs("div",{className:"min-h-full flex flex-col items-center justify-center gap-8",children:[e.jsx("div",{className:"w-full max-w-3xl shrink-0",children:e.jsxs("div",{className:"bg-white/5 backdrop-blur-md rounded-lg p-3 border border-white/10 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 p-1.5 bg-indigo-500/20 rounded-bl-lg border-b border-l border-white/10",children:e.jsx(it,{size:14,className:"text-indigo-300"})}),e.jsxs("div",{className:"space-y-2 pt-1",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-[11px] font-bold text-indigo-300 uppercase mb-0.5",children:" "}),e.jsx("p",{className:"text-xs text-white/90 leading-relaxed",children:M.concept})]}),e.jsxs("div",{className:"pt-2 border-t border-white/10",children:[e.jsxs("h4",{className:"text-[10px] font-bold text-slate-400 uppercase mb-0.5 flex items-center gap-1",children:[e.jsx(An,{size:10}),"  "]}),e.jsx("p",{className:"text-[10px] text-slate-400 leading-relaxed font-mono opacity-80",children:M.method})]})]})]})}),e.jsx("div",{className:"w-full flex justify-center",children:j})]})})]})]})},V=()=>!m||!f?null:e.jsx(nb,{section:m,initialData:U(m),onSave:_=>C(m,_),onReset:()=>A(m),onClose:()=>b(null)});if(R===0)return e.jsx("div",{className:"text-center p-10 text-gray-400",children:"   "});const le=(()=>{const _=[];return z.gapSeverity===""&&_.push({priority:"",title:"  ",action:'  "  "',icon:e.jsx(Gs,{size:16})}),G.level===""&&_.push({priority:"",title:"  ",action:"    ",icon:e.jsx(jr,{size:16})}),q.level===""&&_.push({priority:"",title:"  ",action:"     ",icon:e.jsx(Vl,{size:16})}),K.gap>30&&_.push({priority:"",title:"  ",action:"     ",icon:e.jsx(hl,{size:16})}),_})();return e.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-700 pb-24 relative",children:[c&&e.jsxs("div",{className:"fixed z-[9999] pointer-events-none bg-slate-900 text-white px-3 py-2 rounded-lg shadow-xl text-xs max-w-xs border border-slate-700",style:{left:c.x,top:c.y,transform:"translate(-50%, -100%)"},children:[c.title&&e.jsx("div",{className:"font-bold border-b border-slate-600 pb-1 mb-1 text-yellow-400",children:c.title}),e.jsx("div",{children:c.text}),e.jsx("div",{className:"absolute -bottom-1.5 left-1/2 -translate-x-1/2 w-3 h-3 bg-slate-900 rotate-45 border-r border-b border-slate-700"})]}),D(),V(),e.jsxs("div",{className:"bg-gradient-to-r from-slate-900 to-slate-800 text-white p-8 rounded-3xl shadow-xl relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-5",children:e.jsx(Fm,{size:300})}),e.jsx("div",{className:"absolute top-6 left-6 z-20",children:e.jsx(ne,{})}),e.jsx("div",{className:"relative z-10 flex flex-col md:flex-row justify-between items-center gap-6",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 text-emerald-400 font-bold uppercase tracking-wider text-xs",children:[e.jsx(is,{size:14}),"   ( )"]}),e.jsx("h2",{className:"text-3xl font-bold font-serif mb-2",children:"   "}),e.jsxs("p",{className:"text-slate-300 text-sm flex items-center gap-2",children:[e.jsx(Et,{size:16})," ",l," ",e.jsx("span",{className:"mx-2",children:"|"}),e.jsx(rs,{size:16})," ",R,"  ( )"]})]})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-8",children:[e.jsxs("div",{className:"bg-white/5 p-4 rounded-xl border border-white/10",children:[e.jsx("div",{className:"text-xs text-slate-300 mb-1",children:" "}),e.jsxs("div",{className:"text-2xl font-bold text-white",children:[F.reduce((_,M)=>_+M.A,0)/F.length>0?(F.reduce((_,M)=>_+M.A,0)/F.length).toFixed(1):"0","%"]})]}),e.jsxs("div",{className:"bg-white/5 p-4 rounded-xl border border-white/10",children:[e.jsx("div",{className:"text-xs text-slate-300 mb-1",children:" "}),e.jsx("div",{className:"text-2xl font-bold text-emerald-400",children:F.reduce((_,M)=>_.A>M.A?_:M).subject})]}),e.jsxs("div",{className:"bg-white/5 p-4 rounded-xl border border-white/10",children:[e.jsx("div",{className:"text-xs text-slate-300 mb-1",children:" "}),e.jsx("div",{className:"text-2xl font-bold text-amber-400",children:F.reduce((_,M)=>_.A<M.A?_:M).subject})]}),e.jsxs("div",{className:"bg-white/5 p-4 rounded-xl border border-white/10",children:[e.jsx("div",{className:"text-xs text-slate-300 mb-1",children:" "}),e.jsxs("div",{className:"text-2xl font-bold text-blue-400",children:[q.percentage.toFixed(1),"%"]})]})]})]}),e.jsx(w,{}),le.length>0&&e.jsxs("div",{className:"bg-gradient-to-r from-amber-50 to-orange-50 border border-amber-200 rounded-2xl p-6",children:[e.jsxs("h3",{className:"font-bold text-lg text-slate-800 mb-4 flex items-center gap-2",children:[e.jsx(is,{size:20,className:"text-amber-600"}),"  "]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:le.map((_,M)=>e.jsxs("div",{className:`p-4 rounded-xl border ${_.priority===""?"bg-red-50 border-red-200":_.priority===""?"bg-amber-50 border-amber-200":"bg-blue-50 border-blue-200"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:`px-2 py-1 rounded text-xs font-bold ${_.priority===""?"bg-red-100 text-red-800":_.priority===""?"bg-amber-100 text-amber-800":"bg-blue-100 text-blue-800"}`,children:[" ",_.priority]}),_.icon]}),e.jsx("h4",{className:"font-bold text-slate-800 mb-1",children:_.title}),e.jsx("p",{className:"text-sm text-slate-600",children:_.action})]},M))})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-slate-200 lg:col-span-2 relative group hover:shadow-md transition-shadow cursor-pointer overflow-hidden",onClick:()=>o("gap"),children:[e.jsx(ae,{section:"gap"}),e.jsxs("div",{className:"flex justify-between items-start mb-8 relative z-10",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-lg text-slate-800 flex items-center gap-2",children:[e.jsx(Gs,{className:"text-indigo-600",size:20}),"  ( vs )"]}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"      "})]}),e.jsx("div",{className:`px-3 py-1 rounded-full text-xs font-bold ${z.gapSeverity===""?"bg-red-100 text-red-600":z.gapSeverity===""?"bg-yellow-100 text-yellow-600":"bg-emerald-100 text-emerald-600"}`,children:z.gapSeverity===""?" ":z.gapSeverity===""?" ":" "})]}),e.jsxs("div",{className:"space-y-6 relative z-10",children:[e.jsxs("div",{className:"relative pt-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("span",{className:"text-slate-600 flex items-center gap-2 text-sm font-bold",children:[e.jsx(Vt,{size:16}),"   ",e.jsx(se,{level:z.rLevel})]}),e.jsxs("span",{className:"text-indigo-600 font-bold",children:[z.rPct.toFixed(1),"%"]})]}),e.jsx("div",{className:"h-4 bg-slate-100 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-indigo-500 to-blue-500 rounded-full transition-all duration-1000 shadow-[0_0_20px_rgba(99,102,241,0.5)]",style:{width:`${z.rPct}%`}})})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("span",{className:"text-slate-600 flex items-center gap-2 text-sm font-bold",children:[e.jsx(Bl,{size:16}),"   ()",e.jsx(se,{level:z.cLevel})]}),e.jsxs("span",{className:"text-amber-500 font-bold",children:[z.cPct.toFixed(1),"%"]})]}),e.jsx("div",{className:"h-4 bg-slate-100 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-amber-500 to-orange-500 rounded-full transition-all duration-1000",style:{width:`${z.cPct}%`}})})]}),e.jsx("div",{className:"pt-4 border-t border-slate-100",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:`text-2xl font-bold mb-1 ${Math.abs(z.gap)>15?"text-red-600":Math.abs(z.gap)>8?"text-yellow-600":"text-emerald-600"}`,children:[Math.abs(z.gap).toFixed(1),"% "]}),e.jsx("div",{className:"text-sm text-slate-500",children:z.gap>0?"  ":"  "})]})})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-slate-200 flex flex-col items-center justify-center text-center relative overflow-hidden group hover:shadow-md transition-shadow cursor-pointer",onClick:()=>o("illiteracy"),children:[e.jsx(ae,{section:"illiteracy"}),e.jsx("div",{className:`w-20 h-20 rounded-full flex items-center justify-center mb-4 shadow-lg relative z-10 ${G.level===""?"bg-red-100 text-red-600":G.level===""?"bg-yellow-100 text-yellow-600":"bg-emerald-100 text-emerald-600"}`,children:e.jsx(jr,{size:40})}),e.jsxs("h3",{className:"font-bold text-2xl text-slate-800 mb-1 relative z-10",children:[G.percentage.toFixed(1),"%"]}),e.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-4 relative z-10",children:" "}),e.jsx("div",{className:"mb-4 relative z-10",children:e.jsxs("div",{className:"text-sm font-bold text-slate-600",children:[G.count,"  "]})}),e.jsx("p",{className:"text-sm text-slate-600 leading-relaxed px-4 relative z-10",children:G.level===""?"    ":G.level===""?"   ":"   "})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-slate-200 relative group cursor-pointer hover:shadow-md transition-shadow overflow-hidden",onClick:()=>o("funnel"),children:[e.jsx(ae,{section:"funnel"}),e.jsxs("div",{className:"flex justify-between items-start mb-6 relative z-10",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-lg text-slate-800 flex items-center gap-2",children:[e.jsx(Jl,{size:20,className:"text-pink-500"}),"  ( )"]}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"       "})]}),e.jsxs("div",{className:"text-sm font-bold text-slate-600",children:[R-$[3].count,"  "]})]}),e.jsx("div",{className:"space-y-2 relative z-10",children:$.map((_,M)=>{const j=R>0?_.count/R*100:0,T=M>0?$[M-1].count:R,L=T>0?_.count/T*100:0;return e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"w-28 text-left font-bold text-slate-500 text-sm",children:[e.jsx("div",{children:_.label}),e.jsxs("div",{className:"text-xs text-slate-400",children:[_.percentage.toFixed(1),"%"]})]}),e.jsx("div",{className:"flex-1 bg-slate-100 rounded-r-lg h-10 relative overflow-hidden",children:e.jsxs("div",{className:`h-full ${_.color.replace("bg-","bg-gradient-to-r from-").replace("300","500").replace("400","600")} flex items-center justify-between px-4 transition-all duration-1000 absolute left-0 top-0`,style:{width:`${j}%`},children:[e.jsx("span",{className:_.text+" font-bold",children:_.count}),M>0&&e.jsxs("span",{className:"text-xs bg-white/30 px-2 py-1 rounded",children:[L.toFixed(0),"%"]})]})})]},M)})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-slate-200 lg:col-span-1 group hover:shadow-md transition-shadow relative cursor-pointer overflow-hidden",onClick:()=>o("radar"),children:[e.jsx(ae,{section:"radar"}),e.jsxs("h3",{className:"font-bold text-lg text-slate-800 mb-6 flex items-center gap-2 relative z-10",children:[e.jsx($t,{size:20,className:"text-purple-600"}),"  "]}),e.jsx("div",{className:"flex justify-center py-4 relative z-10",children:e.jsx("div",{className:"relative w-64 h-64",children:e.jsxs("svg",{viewBox:"0 0 200 200",className:"w-full h-full overflow-visible",children:[[20,40,60,80,100].map(_=>e.jsx("circle",{cx:"100",cy:"100",r:_*.8,fill:"none",stroke:"#e2e8f0",strokeDasharray:"4 4"},_)),F.map((_,M)=>{const j=Math.PI*2*M/F.length-Math.PI/2,T=100+80*Math.cos(j),L=100+80*Math.sin(j);return e.jsx("line",{x1:"100",y1:"100",x2:T,y2:L,stroke:"#cbd5e1"},M)}),e.jsx("polygon",{points:F.map((_,M)=>{const j=Math.PI*2*M/F.length-Math.PI/2,T=_.A/100,L=100+80*T*Math.cos(j),H=100+80*T*Math.sin(j);return`${L},${H}`}).join(" "),fill:"rgba(139, 92, 246, 0.2)",stroke:"#8b5cf6",strokeWidth:"2"}),F.map((_,M)=>{const j=Math.PI*2*M/F.length-Math.PI/2,T=_.A/100,L=100+80*T*Math.cos(j),H=100+80*T*Math.sin(j);return e.jsxs("g",{children:[e.jsx("circle",{cx:L,cy:H,r:"4",fill:"#8b5cf6"}),e.jsxs("text",{x:L,y:H-8,textAnchor:"middle",className:"text-xs font-bold fill-purple-600",children:[_.A.toFixed(0),"%"]})]},M)})]})})}),e.jsx("div",{className:"grid grid-cols-2 gap-2 mt-4 relative z-10",children:F.map((_,M)=>e.jsxs("div",{className:"text-center p-2 bg-slate-50 rounded-lg",children:[e.jsx("div",{className:"text-sm font-bold text-slate-700",children:_.subject}),e.jsxs("div",{className:"text-lg font-bold text-purple-600",children:[_.A.toFixed(1),"%"]}),e.jsx("div",{className:"text-xs text-slate-500",children:_.level})]},M))})]}),e.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-slate-200 lg:col-span-2 group hover:shadow-md transition-shadow relative cursor-pointer overflow-hidden",onClick:()=>o("textType"),children:[e.jsx(ae,{section:"textType"}),e.jsxs("h3",{className:"font-bold text-lg text-slate-800 mb-2 flex items-center gap-2 relative z-10",children:[e.jsx(hl,{size:20,className:"text-blue-500"}),"   "]}),e.jsx("p",{className:"text-xs text-slate-400 mb-8 relative z-10",children:"      "}),e.jsxs("div",{className:"flex flex-col gap-6 relative z-10",children:[e.jsxs("div",{className:"flex items-center gap-4 p-2 rounded hover:bg-slate-50 transition-colors",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-blue-50 flex items-center justify-center text-blue-600 font-bold shrink-0",children:e.jsx(Fm,{size:24})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-bold text-slate-700 text-sm",children:"  (/)"}),e.jsx(se,{level:K.complexLevel})]}),e.jsxs("span",{className:"font-bold text-blue-600",children:[K.complexPct.toFixed(0),"%"]})]}),e.jsx("div",{className:"h-2 bg-slate-100 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-cyan-500",style:{width:`${K.complexPct}%`}})})]})]}),e.jsxs("div",{className:"flex items-center gap-4 p-2 rounded hover:bg-slate-50 transition-colors",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-slate-50 flex items-center justify-center text-slate-500 font-bold shrink-0",children:e.jsx(vt,{size:24})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-bold text-slate-700 text-sm",children:"  ( )"}),e.jsx(se,{level:K.basicLevel})]}),e.jsxs("span",{className:"font-bold text-slate-600",children:[K.basicPct.toFixed(0),"%"]})]}),e.jsx("div",{className:"h-2 bg-slate-100 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-slate-400 to-slate-500",style:{width:`${K.basicPct}%`}})})]})]})]}),e.jsx("div",{className:"mt-6 pt-4 border-t border-slate-100 relative z-10",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:`text-xl font-bold mb-1 ${K.gap>30?"text-red-600":K.gap>15?"text-yellow-600":"text-emerald-600"}`,children:[" ",K.gap.toFixed(1),"%"]}),e.jsx("div",{className:"text-sm text-slate-500",children:K.gap>0?"  ":"  "})]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-slate-200 group hover:shadow-md transition-shadow relative cursor-pointer overflow-hidden",onClick:()=>o("patterns"),children:[e.jsx(ae,{section:"patterns"}),e.jsxs("h3",{className:"font-bold text-lg text-slate-800 mb-6 flex items-center gap-2 relative z-10",children:[e.jsx(yb,{size:20,className:"text-green-600"}),"  "]}),e.jsx("div",{className:"space-y-4 relative z-10",children:[{label:"",value:B.balanced,color:"bg-emerald-500"},{label:"",value:B.verbalDominant,color:"bg-blue-500"},{label:"",value:B.writtenDominant,color:"bg-purple-500"},{label:"",value:B.comprehensionFocused,color:"bg-amber-500"},{label:" ",value:B.productionChallenged,color:"bg-red-500"}].map((_,M)=>{const j=R>0?_.value/R*100:0;return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${_.color}`}),e.jsx("span",{className:"font-medium text-slate-700",children:_.label})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-32 h-2 bg-slate-100 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full ${_.color}`,style:{width:`${j}%`}})}),e.jsxs("span",{className:"text-sm font-bold text-slate-600",children:[_.value," ",e.jsxs("span",{className:"text-slate-400 text-xs",children:["(",j.toFixed(0),"%)"]})]})]})]},M)})}),e.jsx("div",{className:"mt-6 p-4 bg-slate-50 rounded-xl relative z-10",children:e.jsxs("div",{className:"text-sm text-slate-600",children:[e.jsx("span",{className:"font-bold text-slate-800",children:" : "}),B.balanced>B.total*.4?" -   ":"   "]})})]}),e.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-slate-200 group hover:shadow-md transition-shadow relative cursor-pointer overflow-hidden",onClick:()=>o("sustainability"),children:[e.jsx(ae,{section:"sustainability"}),e.jsxs("h3",{className:"font-bold text-lg text-slate-800 mb-6 flex items-center gap-2 relative z-10",children:[e.jsx(Vl,{size:20,className:"text-teal-600"}),"  "]}),e.jsx("div",{className:"flex items-center justify-center mb-6 relative z-10",children:e.jsxs("div",{className:"relative w-48 h-48",children:[e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-5xl font-bold text-teal-600",children:[q.percentage.toFixed(1),"%"]}),e.jsx("div",{className:"text-sm text-slate-500 mt-1",children:" "}),e.jsx("div",{className:"text-xs text-slate-400 mt-1",children:q.level})]})}),e.jsxs("svg",{className:"w-full h-full transform -rotate-90",children:[e.jsx("circle",{cx:"96",cy:"96",r:"88",fill:"none",stroke:"#e2e8f0",strokeWidth:"12"}),e.jsx("circle",{cx:"96",cy:"96",r:"88",fill:"none",stroke:"#10b981",strokeWidth:"12",strokeLinecap:"round",strokeDasharray:`${q.percentage*5.53} 553`})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 relative z-10",children:[e.jsxs("div",{className:"text-center p-3 bg-emerald-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-emerald-600",children:q.count}),e.jsx("div",{className:"text-sm text-slate-600",children:" "})]}),e.jsxs("div",{className:"text-center p-3 bg-red-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:q.atRisk}),e.jsx("div",{className:"text-sm text-slate-600",children:" "})]})]})]})]}),e.jsx("div",{className:"fixed bottom-6 left-1/2 transform -translate-x-1/2 z-50",children:e.jsxs("button",{onClick:()=>x(!0),className:"flex items-center gap-2 bg-slate-800 hover:bg-slate-700 text-white px-8 py-4 rounded-2xl font-bold text-sm transition-all shadow-xl hover:shadow-2xl border-2 border-slate-700 hover:border-slate-600 hover:scale-105 group",children:[e.jsx(Tt,{size:18,className:"group-hover:rotate-12 transition-transform"}),e.jsx("span",{children:" "})]})}),f&&e.jsx("div",{className:"fixed inset-0 z-[110] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 animate-in fade-in",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full p-6 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6 border-b pb-4",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-xl text-slate-800 flex items-center gap-2",children:[e.jsx(Tt,{size:24,className:"text-indigo-600"}),"  "]}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"         "})]}),e.jsx("button",{onClick:()=>x(!1),className:"text-slate-400 hover:text-red-500",children:e.jsx(Ze,{})})]}),m?e.jsx(nb,{section:m,initialData:U(m),onSave:_=>C(m,_),onReset:()=>A(m),onClose:()=>b(null)}):e.jsx("div",{className:"grid grid-cols-2 gap-4",children:Object.entries(xh).map(([_,M])=>e.jsxs("button",{onClick:()=>b(_),className:"p-4 bg-slate-50 hover:bg-indigo-50 border rounded-xl text-right transition-colors group flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-white rounded-lg text-slate-600",children:Ws.cloneElement(M.icon,{size:20})}),e.jsx("div",{className:"text-right",children:e.jsx("span",{className:"font-bold text-slate-700 block group-hover:text-indigo-700 text-sm",children:M.title.split("(")[0].trim()})})]}),e.jsx(Hs,{className:"text-slate-300 group-hover:text-indigo-500"})]},_))})]})})]})},nb=({section:n,initialData:t,onSave:l,onReset:i,onClose:o})=>{const[c,u]=k.useState(t),f=()=>xh[n].title;return e.jsxs("div",{className:"space-y-4 animate-in slide-in-from-right-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("button",{onClick:o,className:"text-xs text-slate-500 hover:text-slate-800 flex items-center gap-1",children:[e.jsx(Fu,{size:12,className:"rotate-180"}),"  "]}),e.jsx("span",{className:"text-sm font-bold bg-indigo-100 text-indigo-700 px-3 py-1 rounded-full",children:f()})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-700 mb-1",children:"  "}),e.jsx(Pe,{value:c.reading,onChange:x=>u({...c,reading:x}),className:"w-full border rounded-lg p-3 text-sm bg-slate-50 focus:bg-white focus:ring-2 focus:ring-indigo-500 max-h-60 overflow-y-auto",minHeight:"min-h-[120px]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-700 mb-1",children:" "}),e.jsx(Pe,{value:c.diagnosis,onChange:x=>u({...c,diagnosis:x}),className:"w-full border rounded-lg p-3 text-sm bg-amber-50 focus:bg-white focus:ring-2 focus:ring-amber-500 max-h-60 overflow-y-auto",minHeight:"min-h-[120px]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-700 mb-1",children:""}),e.jsx(Pe,{value:c.recommendation,onChange:x=>u({...c,recommendation:x}),className:"w-full border rounded-lg p-3 text-sm bg-emerald-50 focus:bg-white focus:ring-2 focus:ring-emerald-500 max-h-60 overflow-y-auto",minHeight:"min-h-[120px]"})]}),e.jsxs("div",{className:"flex justify-between pt-4 border-t",children:[e.jsxs("button",{onClick:i,className:"text-red-500 text-xs font-bold flex items-center gap-1 hover:underline",children:[e.jsx(Tn,{size:12}),"   "]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:o,className:"px-4 py-2 text-slate-500 font-bold hover:bg-slate-100 rounded-lg",children:""}),e.jsxs("button",{onClick:()=>l(c),className:"px-6 py-2 bg-indigo-600 text-white font-bold rounded-lg hover:bg-indigo-700 shadow-md flex items-center gap-2",children:[e.jsx(Zt,{size:16}),"  "]})]})]})]})},mh={id:"math_y5",label:" ( )",competencies:[{id:"control_numbers",label:"    ",criteria:[{id:1,label:"    "},{id:2,label:" "},{id:3,label:"  "},{id:4,label:"  "}]},{id:"geometry_space",label:"      ",criteria:[{id:1,label:"          "},{id:2,label:"        "},{id:3,label:"  "}]},{id:"measurements",label:"   ",criteria:[{id:1,label:"  "},{id:2,label:"       "},{id:3,label:"  "}]},{id:"data_org",label:" ",criteria:[{id:1,label:"    "},{id:2,label:"     "},{id:3,label:"  "},{id:4,label:"  "}]}]},lb={A:{label:" ",score:3,color:"#10b981",description:"      "},B:{label:" ",score:2,color:"#3b82f6",description:"     "},C:{label:" ",score:1,color:"#f59e0b",description:"     "},D:{label:" ",score:0,color:"#ef4444",description:"     "}},as={communication:{title:"   ( )",concept:"             .        .",method:"     ''  ( 4    3    3    4  ).",icon:e.jsx(Cb,{className:"text-blue-500",size:20})},abstractTriangle:{title:"  ",concept:"    ( -   -  ).          .",method:"   :  (1.2)   (1.1)   (4.3).",icon:e.jsx(nc,{className:"text-purple-500",size:20})},matrix:{title:"  ( / )",concept:"       :   ' '  ' '",method:"    ' ' (1.3)   '' (4.2).",icon:e.jsx(Yl,{className:"text-teal-500",size:20})},radar:{title:" ",concept:"           (   ).",method:"      (    )  .",icon:e.jsx($t,{className:"text-indigo-500",size:20})},illiteracy:{title:"  ",concept:"           .",method:"       ()  ' '  ' ' .",icon:e.jsx(ys,{className:"text-red-500",size:20})},funnel:{title:"  ",concept:"     :    ->  ->  ->    ().",method:"         .",icon:e.jsx(Jl,{className:"text-pink-500",size:20})}},yA=({records:n,scope:t,contextName:l})=>{const[i,o]=k.useState(null),[c,u]=k.useState(null),[f,x]=k.useState(!1),[m,b]=k.useState(null),[y,N]=k.useState({});k.useEffect(()=>{const w=`mufattish_analysis_y5_math_v2_${l}_${t}`,D=localStorage.getItem(w);if(D)try{N(JSON.parse(D))}catch(V){console.error(V)}},[l,t]);const C=(w,D)=>{const V={...y,[w]:D};N(V),localStorage.setItem(`mufattish_analysis_y5_math_v2_${l}_${t}`,JSON.stringify(V)),b(null)},A=w=>{const D={...y};delete D[w],N(D),localStorage.setItem(`mufattish_analysis_y5_math_v2_${l}_${t}`,JSON.stringify(D))},E=k.useMemo(()=>n.flatMap(w=>w.students.map(D=>({...D,className:w.className,schoolName:w.schoolName,id:`${w.schoolName}-${w.className}-${D.fullName}`}))),[n]),R=E.length,P=(w,D,V)=>{if(!w.results)return null;const Y=w.results[D];if(!Y)return null;const le=Y[V]||Y[String(V)];return typeof le=="string"?le:null},O=w=>!w||!lb[w]?0:lb[w].score,z=k.useMemo(()=>{let w=0,D=0;return E.forEach(V=>{const Y=P(V,"control_numbers",4),le=P(V,"geometry_space",3),_=P(V,"measurements",3),M=P(V,"data_org",4);[Y,le,_,M].forEach(j=>{j&&(D+=3,w+=O(j))})}),D>0?w/D*100:0},[E]),K=k.useMemo(()=>{let w=0,D=0,V=0,Y=0,le=0,_=0;E.forEach(H=>{const Z=P(H,"control_numbers",2);Z&&(D+=3,w+=O(Z));const de=P(H,"control_numbers",1);de&&(Y+=3,V+=O(de));const fe=P(H,"data_org",3);fe&&(_+=3,le+=O(fe))});const M=[w,V,le],j=Math.max(...M),T=Math.min(...M),L=j>0?100-(j-T)/j*100:0;return{fractions:D>0?w/D*100:0,decimals:Y>0?V/Y*100:0,percentages:_>0?le/_*100:0,consistency:L}},[E]),G=k.useMemo(()=>{const w=E.filter(D=>{const V=P(D,"control_numbers",3),Y=P(D,"measurements",1);return V==="D"&&Y==="D"}).length;return R>0?w/R*100:0},[E,R]),F=k.useMemo(()=>[{key:"numbers",label:" ",compId:"control_numbers",color:"#3b82f6"},{key:"geom",label:" ",compId:"geometry_space",color:"#8b5cf6"},{key:"measure",label:" ",compId:"measurements",color:"#10b981"},{key:"data",label:" ",compId:"data_org",color:"#ec4899"}].map(D=>{let V=0,Y=0;return E.forEach(le=>{const _=mh.competencies.find(M=>M.id===D.compId);_==null||_.criteria.forEach(M=>{const j=P(le,D.compId,M.id);j&&(Y+=3,V+=O(j))})}),{subject:D.label,A:Y>0?V/Y*100:0,fullMark:100,color:D.color}}),[E]),$=k.useMemo(()=>{const w=R,D=E.filter(_=>{const M=P(_,"control_numbers",3);return M==="A"||M==="B"}).length,V=E.filter(_=>{const M=P(_,"measurements",1);return M==="A"||M==="B"}).length,Y=E.filter(_=>{const M=P(_,"control_numbers",2);return M==="A"||M==="B"}).length,le=E.filter(_=>{const M=P(_,"data_org",2);return M==="A"||M==="B"}).length;return[{label:"",count:w,color:"bg-slate-300",text:"text-slate-700",desc:" "},{label:" ",count:D,color:"bg-blue-300",text:"text-blue-900",desc:"   "},{label:" ",count:V,color:"bg-indigo-400",text:"text-white",desc:"  "},{label:"",count:Y,color:"bg-purple-500",text:"text-white",desc:"   "},{label:"",count:le,color:"bg-pink-600",text:"text-white",desc:"   "}]},[E,R]),B=k.useMemo(()=>E.map(w=>{let D=0,V=0,Y=0,le=0;const _=P(w,"control_numbers",3);_&&(V+=3,D+=O(_));const M=P(w,"data_org",2);return M&&(le+=3,Y+=O(M)),{...w,opsPct:V>0?D/V*100:0,propPct:le>0?Y/le*100:0}}),[E]),q=k.useMemo(()=>{const w={balanced:0,rote:0,logic_error:0,struggling:0,total:0};return B.forEach(D=>{const V=D.opsPct>=50,Y=D.propPct>=50;V&&Y?w.balanced++:V&&!Y?w.rote++:!V&&Y?w.logic_error++:w.struggling++,w.total++}),w},[B]),J=w=>{if(w==="communication")return{reading:`    ${z.toFixed(1)}%.            (   ).`,diagnosis:z<50?" ' ':         ''  ''.          .":"    .      .",recommendation:"    ' '  '   '    ."};if(w==="abstractTriangle"){const{fractions:D,decimals:V,percentages:Y}=K,le=(D+V+Y)/3;return{reading:`  :  (${D.toFixed(0)}%)    (${V.toFixed(0)}%)    (${Y.toFixed(0)}%).`,diagnosis:Math.abs(D-Y)>20?"   .      (1/2)   (0.5)  (50%).     .":le<50?"        .":"  .          .",recommendation:" ' '  ''     ."}}if(w==="funnel"){const D=$[1].count,V=$[4].count,Y=D>0?((D-V)/D*100).toFixed(0):0,le=$.slice(1).find((_,M,j)=>M<j.length-1&&_.count>j[M+1].count*1.5);return{reading:`    ''  ''  ${Y}%. ${le?`  : ${le.label}`:""}`,diagnosis:parseInt(Y)>50?"    ()    ()   .":"          .",recommendation:"       ( )   ."}}if(w==="matrix"){const D=q.total||1,V=Math.round(q.rote/D*100),Y=Math.round(q.balanced/D*100);return{reading:` ' '  ${V}% '' ${Y}% '' ${Math.round(q.struggling/D*100)}% '' ${Math.round(q.logic_error/D*100)}%.`,diagnosis:V>25?"   '' ( )  '' (   ).    .":Y>40?"       .":"         .",recommendation:"         ."}}if(w==="radar"){const D=F.reduce((le,_)=>le.A<_.A?le:_),V=F.reduce((le,_)=>le.A>_.A?le:_),Y=100-(V.A-D.A);return{reading:` : "${D.subject}" (${D.A.toFixed(1)}%) : "${V.subject}" (${V.A.toFixed(1)}%).  : ${Y.toFixed(0)}%.`,diagnosis:Y<60?`      .  ${D.subject}        .`:Y<75?`       ${D.subject}.`:"    .",recommendation:`     ${D.subject}.`}}if(w==="illiteracy"){const D=G>10,V=G>5&&G<=10;return{reading:` ${G.toFixed(1)}%       ( + ).`,diagnosis:D?" .            .":V?" .    .":"    .",recommendation:"      ."}}return{reading:"",diagnosis:"",recommendation:""}},Q=w=>y[w]||J(w),U=({section:w})=>e.jsx("button",{onClick:D=>{D.stopPropagation(),o(w)},className:"absolute top-4 left-4 p-2 bg-slate-100 hover:bg-indigo-100 text-slate-500 hover:text-indigo-600 rounded-full transition-all duration-300 opacity-0 group-hover:opacity-100 transform scale-90 group-hover:scale-100 z-10 shadow-sm",children:e.jsx(en,{size:18})}),ae=w=>{if(w.length===0)return"";const D=100,V=80;return w.map((Y,le)=>{const _=Math.PI*2*le/w.length-Math.PI/2,M=isNaN(Y.A)?0:Y.A/100,j=D+V*M*Math.cos(_),T=D+V*M*Math.sin(_);return`${j},${T}`}).join(" ")},se=()=>{if(!i)return null;const w=as[i],D=Q(i);let V=null,Y=null;switch(i){case"communication":Y=e.jsx(Cb,{size:24,className:"text-blue-500"}),V=e.jsx("div",{className:"h-full flex items-center justify-center p-4 w-full",children:e.jsxs("div",{className:"text-center space-y-6",children:[e.jsxs("div",{className:"relative w-48 h-48 mx-auto flex items-center justify-center",children:[e.jsxs("svg",{className:"w-full h-full transform -rotate-90",children:[e.jsx("circle",{cx:"96",cy:"96",r:"88",fill:"none",stroke:"#f1f5f9",strokeWidth:"12"}),e.jsx("circle",{cx:"96",cy:"96",r:"88",fill:"none",stroke:"#3b82f6",strokeWidth:"12",strokeDasharray:`${z*553/100} 553`,strokeLinecap:"round"})]}),e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[e.jsxs("span",{className:"text-5xl font-bold text-blue-600",children:[z.toFixed(0),"%"]}),e.jsx("span",{className:"text-sm text-slate-400 font-bold uppercase mt-1",children:" "})]})]}),e.jsx("p",{className:"text-slate-500 max-w-md mx-auto text-sm leading-relaxed",children:'      " " (Communication Mathmatique)   .'})]})});break;case"abstractTriangle":Y=e.jsx(nc,{size:24,className:"text-purple-500"});const{fractions:le,decimals:_,percentages:M,consistency:j}=K;V=e.jsx("div",{className:"h-full flex items-center justify-center p-4 w-full",children:e.jsx("div",{className:"relative w-[400px] h-[350px]",children:e.jsxs("svg",{viewBox:"0 0 400 350",className:"w-full h-full overflow-visible",children:[e.jsx("path",{d:"M200 50 L350 300 L50 300 Z",fill:"none",stroke:"#e2e8f0",strokeWidth:"2",strokeDasharray:"5 5"}),e.jsx("path",{d:"M200 50 L350 300 L50 300 Z",fill:"rgba(168, 85, 247, 0.1)",stroke:"none"}),e.jsxs("g",{className:"group",children:[e.jsx("circle",{cx:"200",cy:"50",r:le/2.5,fill:"#a855f7",opacity:"0.8",className:"transition-all duration-1000"}),e.jsxs("text",{x:"200",y:"30",textAnchor:"middle",className:"text-xs font-bold fill-slate-600",children:[" (",le.toFixed(0),"%)"]})]}),e.jsxs("g",{className:"group",children:[e.jsx("circle",{cx:"350",cy:"300",r:M/2.5,fill:"#ec4899",opacity:"0.8",className:"transition-all duration-1000"}),e.jsxs("text",{x:"350",y:"330",textAnchor:"middle",className:"text-xs font-bold fill-slate-600",children:["  (",M.toFixed(0),"%)"]})]}),e.jsxs("g",{className:"group",children:[e.jsx("circle",{cx:"50",cy:"300",r:_/2.5,fill:"#3b82f6",opacity:"0.8",className:"transition-all duration-1000"}),e.jsxs("text",{x:"50",y:"330",textAnchor:"middle",className:"text-xs font-bold fill-slate-600",children:["  (",_.toFixed(0),"%)"]})]}),e.jsx("line",{x1:"200",y1:"50",x2:"350",y2:"300",stroke:"#a855f7",strokeWidth:Math.min(le,M)/20,opacity:"0.5"}),e.jsx("line",{x1:"350",y1:"300",x2:"50",y2:"300",stroke:"#a855f7",strokeWidth:Math.min(M,_)/20,opacity:"0.5"}),e.jsx("line",{x1:"50",y1:"300",x2:"200",y2:"50",stroke:"#a855f7",strokeWidth:Math.min(_,le)/20,opacity:"0.5"}),e.jsxs("text",{x:"200",y:"200",textAnchor:"middle",className:"text-sm font-bold fill-slate-500",children:[" : ",j.toFixed(0),"%"]})]})})});break;case"matrix":Y=e.jsx(Yl,{size:24,className:"text-teal-400"}),V=e.jsx("div",{className:"h-full flex items-center justify-center w-full",children:e.jsxs("div",{className:"aspect-square w-[400px] relative bg-slate-700/30 rounded-2xl border border-slate-600 p-4 grid grid-cols-2 grid-rows-2 gap-2",children:[e.jsxs("div",{className:"bg-blue-500/20 rounded flex flex-col items-center justify-center border border-blue-500/30",children:[e.jsxs("span",{className:"text-2xl font-bold text-blue-400",children:[q.total>0?Math.round(q.logic_error/q.total*100):0,"%"]}),e.jsx("span",{className:"text-sm text-blue-300",children:"  /  "})]}),e.jsxs("div",{className:"bg-emerald-500/20 rounded flex flex-col items-center justify-center border border-emerald-500/30",children:[e.jsxs("span",{className:"text-2xl font-bold text-emerald-400",children:[q.total>0?Math.round(q.balanced/q.total*100):0,"%"]}),e.jsx("span",{className:"text-sm text-emerald-300",children:" "})]}),e.jsxs("div",{className:"bg-red-500/20 rounded flex flex-col items-center justify-center border border-red-500/30",children:[e.jsxs("span",{className:"text-2xl font-bold text-red-400",children:[q.total>0?Math.round(q.struggling/q.total*100):0,"%"]}),e.jsx("span",{className:"text-sm text-red-300",children:" "})]}),e.jsxs("div",{className:"bg-yellow-500/20 rounded flex flex-col items-center justify-center border border-yellow-500/30",children:[e.jsxs("span",{className:"text-2xl font-bold text-yellow-400",children:[q.total>0?Math.round(q.rote/q.total*100):0,"%"]}),e.jsx("span",{className:"text-sm text-yellow-300",children:"  ()"})]})]})});break;case"radar":Y=e.jsx($t,{size:24,className:"text-purple-400"}),V=e.jsx("div",{className:"h-full flex items-center justify-center w-full",children:e.jsx("div",{className:"relative w-[380px] h-[380px]",children:e.jsxs("svg",{viewBox:"0 0 200 200",className:"w-full h-full overflow-visible",children:[[20,40,60,80,100].map(L=>e.jsx("circle",{cx:"100",cy:"100",r:L*.8,fill:"none",stroke:"#334155",strokeDasharray:"4 4"},L)),F.map((L,H)=>{const Z=Math.PI*2*H/F.length-Math.PI/2,de=100+80*Math.cos(Z),fe=100+80*Math.sin(Z);return e.jsx("line",{x1:"100",y1:"100",x2:de,y2:fe,stroke:"#475569"},H)}),e.jsx("polygon",{points:ae(F),fill:"rgba(139, 92, 246, 0.4)",stroke:"#a78bfa",strokeWidth:"3",className:"drop-shadow-[0_0_15px_rgba(139,92,246,0.6)]"}),F.map((L,H)=>{const Z=Math.PI*2*H/F.length-Math.PI/2,de=100+95*Math.cos(Z),fe=100+95*Math.sin(Z);return e.jsxs("g",{className:"group",children:[e.jsx("text",{x:de,y:fe,textAnchor:"middle",dominantBaseline:"middle",className:"text-[8px] font-bold fill-slate-300 uppercase tracking-widest",children:L.subject}),e.jsxs("text",{x:de,y:fe+8,textAnchor:"middle",dominantBaseline:"middle",className:"text-[10px] font-bold",style:{fill:L.color},children:[L.A.toFixed(0),"%"]})]},H)})]})})});break;case"funnel":Y=e.jsx(Jl,{size:24,className:"text-pink-500"}),V=e.jsx("div",{className:"h-full flex items-center justify-center p-4 w-full flex-col",children:e.jsx("div",{className:"w-full max-w-2xl space-y-3",children:$.map((L,H)=>{const Z=R>0?L.count/R*100:0;return e.jsxs("div",{className:"flex items-center gap-4 animate-in slide-in-from-left-4",style:{animationDelay:`${H*100}ms`},children:[e.jsx("div",{className:"w-32 text-right font-bold text-slate-400 text-xs",children:L.label}),e.jsxs("div",{className:"flex-1 bg-slate-800/50 rounded-r-lg h-12 relative overflow-hidden flex items-center shadow-lg border border-slate-700",children:[e.jsx("div",{className:`h-full ${L.color.replace("bg-","bg-gradient-to-r from-").replace("300","500").replace("400","600")} flex items-center justify-end px-4 transition-all duration-1000 absolute left-0 top-0 opacity-80`,style:{width:`${Z}%`}}),e.jsx("span",{className:"relative z-10 text-white font-bold text-xl px-4",children:L.count})]})]},H)})})});break;case"illiteracy":Y=e.jsx(ys,{size:24,className:"text-red-400"});const T=G>10;V=e.jsxs("div",{className:"h-full flex flex-col items-center justify-center p-4 text-center w-full",children:[e.jsxs("div",{className:`relative w-64 h-64 flex items-center justify-center rounded-full border-[10px] ${T?"border-red-500/30":"border-emerald-500/30"} bg-slate-800`,children:[e.jsx("div",{className:`absolute inset-0 rounded-full animate-pulse opacity-10 ${T?"bg-red-500":"bg-emerald-500"}`}),e.jsxs("div",{children:[e.jsxs("span",{className:`text-7xl font-bold block ${T?"text-red-500":"text-emerald-500"}`,children:[G.toFixed(1),"%"]}),e.jsx("span",{className:"text-slate-400 text-lg uppercase tracking-widest mt-2 block",children:" "})]})]}),e.jsx("p",{className:"mt-8 text-lg text-slate-300 max-w-xl leading-relaxed font-light",children:T?"  ( + ).     .":"   ."})]});break}return e.jsxs("div",{className:"fixed inset-0 z-[100] bg-slate-950 text-white flex animate-in zoom-in-95 duration-300 overflow-hidden",children:[e.jsx("button",{onClick:()=>o(null),className:"absolute top-6 left-6 p-2 bg-white/10 hover:bg-white/20 rounded-full z-50 text-white transition-all",children:e.jsx(tn,{size:24})}),e.jsxs("div",{className:"w-[400px] lg:w-[35%] bg-slate-900 border-l border-slate-800 p-8 flex flex-col shadow-2xl relative z-40 overflow-y-auto",children:[e.jsxs("div",{className:"mb-8 pb-6 border-b border-slate-800",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"p-3 bg-slate-800 rounded-xl border border-slate-700 shadow-inner",children:Y}),e.jsx("h2",{className:"text-2xl font-bold text-white font-serif",children:w.title})]}),e.jsx("p",{className:"text-slate-400 text-sm",children:"    ()"})]}),e.jsxs("div",{className:"space-y-8 flex-1",children:[e.jsxs("div",{className:"relative pl-4 border-r-2 border-indigo-500/50 pr-4",children:[e.jsxs("h4",{className:"text-indigo-400 font-bold uppercase text-xs mb-2 flex items-center gap-2",children:[e.jsx($t,{size:14}),"   "]}),e.jsx("p",{className:"text-slate-300 leading-relaxed text-sm text-justify",children:D.reading})]}),e.jsxs("div",{className:"relative pl-4 border-r-2 border-amber-500/50 pr-4 bg-amber-500/5 p-4 rounded-l-xl",children:[e.jsxs("h4",{className:"text-amber-400 font-bold uppercase text-xs mb-2 flex items-center gap-2",children:[e.jsx(Qt,{size:14}),"  "]}),e.jsx("p",{className:"text-slate-200 leading-relaxed text-sm font-medium text-justify",children:D.diagnosis})]}),e.jsxs("div",{className:"relative pl-4 border-r-2 border-emerald-500/50 pr-4",children:[e.jsxs("h4",{className:"text-emerald-400 font-bold uppercase text-xs mb-2 flex items-center gap-2",children:[e.jsx(vt,{size:14}),"  "]}),e.jsx("p",{className:"text-slate-300 leading-relaxed text-sm text-justify",children:D.recommendation})]})]})]}),e.jsxs("div",{className:"flex-1 bg-gradient-to-br from-slate-900 to-slate-950 flex flex-col items-center p-8 relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 opacity-10",style:{backgroundImage:"radial-gradient(circle at 2px 2px, white 1px, transparent 0)",backgroundSize:"40px 40px"}}),e.jsx("div",{className:"w-full max-w-3xl z-20 mb-4 mt-2 animate-in slide-in-from-top-4 shrink-0",children:e.jsxs("div",{className:"bg-white/5 backdrop-blur-md rounded-lg p-3 border border-white/10 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 p-1.5 bg-indigo-500/20 rounded-bl-lg border-b border-l border-white/10",children:e.jsx(it,{size:14,className:"text-indigo-300"})}),e.jsxs("div",{className:"space-y-2 pt-1",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-[11px] font-bold text-indigo-300 uppercase mb-0.5",children:" "}),e.jsx("p",{className:"text-xs text-white/90 leading-relaxed",children:w.concept})]}),e.jsxs("div",{className:"pt-2 border-t border-white/10",children:[e.jsxs("h4",{className:"text-[10px] font-bold text-slate-400 uppercase mb-0.5 flex items-center gap-1",children:[e.jsx(An,{size:10}),"  "]}),e.jsx("p",{className:"text-[10px] text-slate-400 leading-relaxed font-mono opacity-80",children:w.method})]})]})]})}),e.jsx("div",{className:"relative z-10 w-full flex-1 flex items-center justify-center min-h-0",children:V})]})]})},ne=()=>!m||!f?null:e.jsx(ab,{section:m,initialData:Q(m),onSave:w=>C(m,w),onReset:()=>A(m),onClose:()=>b(null)});return R===0?e.jsx("div",{className:"text-center p-10 text-gray-400",children:"   "}):e.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-700 pb-24 relative",children:[c&&e.jsxs("div",{className:"fixed z-[9999] pointer-events-none bg-slate-900 text-white px-3 py-2 rounded-lg shadow-xl text-xs max-w-xs border border-slate-700",style:{left:c.x,top:c.y,transform:"translate(-50%, -100%)"},children:[c.title&&e.jsx("div",{className:"font-bold border-b border-slate-600 pb-1 mb-1 text-yellow-400",children:c.title}),e.jsx("div",{children:c.text})]}),se(),ne(),e.jsxs("div",{className:"bg-gradient-to-r from-slate-900 to-indigo-900 text-white p-8 rounded-3xl shadow-xl relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-5",children:e.jsx(aw,{size:300})}),e.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row justify-between items-center gap-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 text-indigo-400 font-bold uppercase tracking-wider text-xs",children:[e.jsx(is,{size:14}),"  ( )"]}),e.jsx("h2",{className:"text-3xl font-bold font-serif mb-2",children:mh.label}),e.jsxs("p",{className:"text-slate-300 text-sm flex items-center gap-2",children:[e.jsx(Et,{size:16})," ",l,e.jsx("span",{className:"mx-2",children:"|"}),e.jsx(rs,{size:16})," ",R," ",e.jsx("span",{className:"mx-2",children:"|"}),e.jsx(di,{size:16}),"   "]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("div",{className:"text-center bg-white/10 p-3 rounded-xl backdrop-blur-sm",children:[e.jsx("div",{className:"text-2xl font-bold",children:R}),e.jsx("div",{className:"text-xs text-slate-300",children:""})]}),e.jsxs("div",{className:"text-center bg-white/10 p-3 rounded-xl backdrop-blur-sm",children:[e.jsx("div",{className:"text-2xl font-bold",children:"6"}),e.jsx("div",{className:"text-xs text-slate-300",children:" "})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-slate-200 cursor-pointer hover:shadow-lg transition-all group relative",onClick:()=>o("communication"),children:[e.jsx(U,{section:"communication"}),e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("h3",{className:"font-bold text-lg text-slate-800 flex items-center gap-2",children:[as.communication.icon,"  "]}),e.jsx("span",{className:`text-xs font-bold px-2 py-1 rounded-full ${z>=70?"bg-emerald-100 text-emerald-800":z>=50?"bg-amber-100 text-amber-800":"bg-red-100 text-red-800"}`,children:z>=70?"":z>=50?"":""})]}),e.jsxs("div",{className:"flex items-center justify-center py-6",children:[e.jsx("div",{className:"relative w-48 h-24 bg-gray-100 rounded-t-full overflow-hidden",children:e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-full origin-bottom transition-transform duration-1000",style:{transform:`rotate(${Math.min(z,100)/100*180-90}deg)`},children:e.jsx("div",{className:"w-2 h-full bg-blue-600 mx-auto shadow-[0_0_15px_#2563eb]"})})}),e.jsx("div",{className:"absolute bottom-10 text-center",children:e.jsxs("span",{className:"text-4xl font-bold text-slate-800",children:[z.toFixed(0),"%"]})})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-slate-200 cursor-pointer hover:shadow-lg transition-all group relative",onClick:()=>o("abstractTriangle"),children:[e.jsx(U,{section:"abstractTriangle"}),e.jsx("div",{className:"flex justify-between items-start mb-6",children:e.jsxs("h3",{className:"font-bold text-lg text-slate-800 flex items-center gap-2",children:[as.abstractTriangle.icon,"   "]})}),e.jsxs("div",{className:"flex items-center justify-center py-2 h-40",children:[e.jsx("div",{className:"relative",children:e.jsxs("svg",{viewBox:"0 0 120 100",className:"w-28 h-28 overflow-visible",children:[e.jsx("circle",{cx:"60",cy:"20",r:"10",fill:"#a855f7",className:"animate-pulse"}),e.jsx("circle",{cx:"20",cy:"80",r:"10",fill:"#3b82f6"}),e.jsx("circle",{cx:"100",cy:"80",r:"10",fill:"#ec4899"}),e.jsx("path",{d:"M60 20 L20 80 L100 80 Z",fill:"none",stroke:"#cbd5e1",strokeWidth:"2"}),e.jsxs("text",{x:"60",y:"15",textAnchor:"middle",className:"text-xs font-bold fill-purple-600",children:[K.fractions.toFixed(0),"%"]}),e.jsxs("text",{x:"15",y:"85",textAnchor:"middle",className:"text-xs font-bold fill-blue-600",children:[K.decimals.toFixed(0),"%"]}),e.jsxs("text",{x:"100",y:"85",textAnchor:"middle",className:"text-xs font-bold fill-pink-600",children:[K.percentages.toFixed(0),"%"]})]})}),e.jsxs("div",{className:"mr-6 space-y-2 text-xs font-bold text-slate-500",children:[e.jsxs("p",{children:[e.jsx("span",{className:"text-purple-500",children:""})," : ",K.fractions.toFixed(0),"%"]}),e.jsxs("p",{children:[e.jsx("span",{className:"text-blue-500",children:""}),"  : ",K.decimals.toFixed(0),"%"]}),e.jsxs("p",{children:[e.jsx("span",{className:"text-pink-500",children:""}),"  : ",K.percentages.toFixed(0),"%"]})]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-slate-200 cursor-pointer hover:shadow-lg transition-all group relative",onClick:()=>o("radar"),children:[e.jsx(U,{section:"radar"}),e.jsxs("h3",{className:"font-bold text-lg text-slate-800 mb-6 flex items-center gap-2",children:[as.radar.icon,"   "]}),e.jsx("div",{className:"flex justify-center py-4",children:e.jsx("div",{className:"relative w-40 h-40",children:e.jsx("svg",{viewBox:"0 0 200 200",className:"w-full h-full overflow-visible",children:e.jsx("polygon",{points:ae(F),fill:"rgba(99, 102, 241, 0.2)",stroke:"#6366f1",strokeWidth:"2"})})})}),e.jsx("div",{className:"grid grid-cols-2 gap-2 text-center mt-4",children:F.slice(0,2).map((w,D)=>e.jsxs("div",{className:"text-xs",children:[e.jsx("div",{className:"font-bold text-slate-600",children:w.subject}),e.jsxs("div",{className:"font-bold",style:{color:w.color},children:[w.A.toFixed(0),"%"]})]},D))})]}),e.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-slate-200 cursor-pointer hover:shadow-lg transition-all group relative",onClick:()=>o("illiteracy"),children:[e.jsx(U,{section:"illiteracy"}),e.jsxs("h3",{className:"font-bold text-lg text-slate-800 mb-6 flex items-center gap-2",children:[as.illiteracy.icon,"  "]}),e.jsxs("div",{className:"text-center py-8",children:[e.jsxs("div",{className:`text-5xl font-bold mb-2 ${G>10?"text-red-500 animate-pulse":G>5?"text-amber-500":"text-emerald-500"}`,children:[G.toFixed(1),"%"]}),e.jsx("p",{className:"text-slate-400 text-xs mt-2 font-bold uppercase",children:" "}),G>10&&e.jsx("div",{className:"mt-3 text-xs bg-red-100 text-red-700 px-2 py-1 rounded-full inline-block animate-pulse",children:"   "})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-slate-200 cursor-pointer hover:shadow-lg transition-all group relative",onClick:()=>o("matrix"),children:[e.jsx(U,{section:"matrix"}),e.jsxs("h3",{className:"font-bold text-lg text-slate-800 mb-4 flex items-center gap-2",children:[as.matrix.icon,"  "]}),e.jsxs("div",{className:"aspect-square grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded p-2 text-center",children:[e.jsx("div",{className:"text-xs text-blue-700",children:" "}),e.jsxs("div",{className:"text-xl font-bold text-blue-600",children:[q.total>0?Math.round(q.logic_error/q.total*100):0,"%"]})]}),e.jsxs("div",{className:"bg-emerald-50 border border-emerald-200 rounded p-2 text-center",children:[e.jsx("div",{className:"text-xs text-emerald-700",children:" "}),e.jsxs("div",{className:"text-xl font-bold text-emerald-600",children:[q.total>0?Math.round(q.balanced/q.total*100):0,"%"]})]}),e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded p-2 text-center",children:[e.jsx("div",{className:"text-xs text-red-700",children:" "}),e.jsxs("div",{className:"text-xl font-bold text-red-600",children:[q.total>0?Math.round(q.struggling/q.total*100):0,"%"]})]}),e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded p-2 text-center",children:[e.jsx("div",{className:"text-xs text-yellow-700",children:" "}),e.jsxs("div",{className:"text-xl font-bold text-yellow-600",children:[q.total>0?Math.round(q.rote/q.total*100):0,"%"]})]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-slate-200 cursor-pointer hover:shadow-lg transition-all group relative",onClick:()=>o("funnel"),children:[e.jsx(U,{section:"funnel"}),e.jsxs("h3",{className:"font-bold text-lg text-slate-800 mb-4 flex items-center gap-2",children:[as.funnel.icon,"   "]}),e.jsx("div",{className:"space-y-3",children:$.map((w,D)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${w.color}`}),e.jsx("span",{className:"text-sm text-slate-600",children:w.label})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-24 h-2 bg-slate-200 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full ${w.color}`,style:{width:`${w.count/$[0].count*100}%`}})}),e.jsx("span",{className:"text-sm font-bold text-slate-700",children:w.count})]})]},D))})]})]}),e.jsx("div",{className:"fixed bottom-6 left-1/2 transform -translate-x-1/2 z-50",children:e.jsxs("button",{onClick:()=>x(!0),className:"flex items-center gap-2 bg-slate-800 hover:bg-slate-700 text-white px-8 py-4 rounded-2xl font-bold text-sm transition-all shadow-xl hover:shadow-2xl border-2 border-slate-700 hover:border-slate-600 hover:scale-105 group",children:[e.jsx(Tt,{size:18,className:"group-hover:rotate-12 transition-transform"}),e.jsx("span",{children:" "})]})}),f&&e.jsx("div",{className:"fixed inset-0 z-[110] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 animate-in fade-in",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full p-6 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6 border-b pb-4",children:[e.jsx("h3",{className:"font-bold text-xl text-slate-800",children:"  "}),e.jsx("button",{onClick:()=>x(!1),className:"text-slate-400 hover:text-red-500",children:e.jsx(Ze,{})})]}),m?e.jsx(ab,{section:m,initialData:Q(m),onSave:w=>C(m,w),onReset:()=>A(m),onClose:()=>b(null)}):e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("button",{onClick:()=>b("communication"),className:"p-4 bg-slate-50 hover:bg-indigo-50 border rounded-xl font-bold text-slate-700 flex items-center gap-2",children:[as.communication.icon,e.jsx("span",{children:""})]}),e.jsxs("button",{onClick:()=>b("abstractTriangle"),className:"p-4 bg-slate-50 hover:bg-indigo-50 border rounded-xl font-bold text-slate-700 flex items-center gap-2",children:[as.abstractTriangle.icon,e.jsx("span",{children:" "})]}),e.jsxs("button",{onClick:()=>b("radar"),className:"p-4 bg-slate-50 hover:bg-indigo-50 border rounded-xl font-bold text-slate-700 flex items-center gap-2",children:[as.radar.icon,e.jsx("span",{children:""})]}),e.jsxs("button",{onClick:()=>b("illiteracy"),className:"p-4 bg-slate-50 hover:bg-indigo-50 border rounded-xl font-bold text-slate-700 flex items-center gap-2",children:[as.illiteracy.icon,e.jsx("span",{children:""})]}),e.jsxs("button",{onClick:()=>b("matrix"),className:"p-4 bg-slate-50 hover:bg-indigo-50 border rounded-xl font-bold text-slate-700 flex items-center gap-2",children:[as.matrix.icon,e.jsx("span",{children:""})]}),e.jsxs("button",{onClick:()=>b("funnel"),className:"p-4 bg-slate-50 hover:bg-indigo-50 border rounded-xl font-bold text-slate-700 flex items-center gap-2",children:[as.funnel.icon,e.jsx("span",{children:""})]})]})]})})]})},ab=({section:n,initialData:t,onSave:l,onReset:i,onClose:o})=>{const[c,u]=k.useState(t),f=()=>as[n].title;return e.jsxs("div",{className:"space-y-4 animate-in slide-in-from-right-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("button",{onClick:o,className:"text-xs text-slate-500 hover:text-slate-800 flex items-center gap-1",children:[e.jsx(Hs,{size:12,className:"rotate-180"})," "]}),e.jsx("span",{className:"text-sm font-bold bg-indigo-100 text-indigo-700 px-3 py-1 rounded-full",children:f()})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-700 mb-1",children:"  "}),e.jsx(Pe,{value:c.reading,onChange:x=>u({...c,reading:x}),className:"w-full border rounded-lg p-3 text-sm",minHeight:"min-h-[100px]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-700 mb-1",children:" "}),e.jsx(Pe,{value:c.diagnosis,onChange:x=>u({...c,diagnosis:x}),className:"w-full border rounded-lg p-3 text-sm bg-amber-50",minHeight:"min-h-[100px]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-700 mb-1",children:" "}),e.jsx(Pe,{value:c.recommendation,onChange:x=>u({...c,recommendation:x}),className:"w-full border rounded-lg p-3 text-sm bg-emerald-50",minHeight:"min-h-[100px]"})]}),e.jsxs("div",{className:"flex justify-between pt-4 border-t",children:[e.jsxs("button",{onClick:i,className:"text-red-500 text-xs font-bold flex items-center gap-1 hover:underline",children:[e.jsx(Tn,{size:12}),"   "]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:o,className:"px-4 py-2 text-slate-500 font-bold hover:bg-slate-100 rounded-lg",children:""}),e.jsxs("button",{onClick:()=>l(c),className:"px-6 py-2 bg-indigo-600 text-white font-bold rounded-lg hover:bg-indigo-700 shadow-md flex items-center gap-2",children:[e.jsx(Zt,{size:16}),"  "]})]})]})]})},Zo={id:"islamic_y5",label:"  ( )",competencies:[{id:"behavior",label:"    ( )",criteria:[{id:1,label:"     "},{id:2,label:"      "},{id:3,label:"       "}]},{id:"recitation",label:"  ",criteria:[{id:1,label:"  "},{id:2,label:"  "},{id:3,label:"  ()"}]},{id:"understanding",label:"   ",criteria:[{id:1,label:"   "},{id:2,label:"     "},{id:3,label:"     "}]},{id:"sira",label:"   ",criteria:[{id:1,label:"       "},{id:2,label:"     (/)"},{id:3,label:"    "}]}]},Av={behaviorGap:{title:"  ( / )",concept:"       ' ' ()     ' ' ( ).",method:"     1 ( -  )   3 (  -  )."},memoryVsComp:{title:"  ( vs )",concept:"   :     ' ' ()  ' ' ( )",method:"     ' '    '  '."},siraAction:{title:"   ( )",concept:"        '  '  ' '     .",method:"       (   )."},crossSubject:{title:"  ( )",concept:"    ''   (   )   ' '.       .",method:" :   (50%  )   (50%  )    4 ."}},NA=({records:n,allRecords:t,scope:l,contextName:i})=>{const[o,c]=k.useState(null),[u,f]=k.useState(null),[x,m]=k.useState(null),[b,y]=k.useState(null),[N,C]=k.useState(!1),[A,E]=k.useState(null),[R,P]=k.useState({});k.useEffect(()=>{const w=`mufattish_analysis_y5_islamic_${i}_${l}`,D=localStorage.getItem(w);if(D)try{P(JSON.parse(D))}catch(V){console.error(V)}},[i,l]);const O=(w,D)=>{const V={...R,[w]:D};P(V),localStorage.setItem(`mufattish_analysis_y5_islamic_${i}_${l}`,JSON.stringify(V)),E(null)},z=w=>{const D={...R};delete D[w],P(D),localStorage.setItem(`mufattish_analysis_y5_islamic_${i}_${l}`,JSON.stringify(D))},K=k.useMemo(()=>n.flatMap(w=>w.students.map(D=>({...D,className:w.className,schoolName:w.schoolName}))),[n]),G=K.length,F=(w,D,V)=>{if(!w.results)return null;const Y=w.results[D];return Y?Y[V]||Y[String(V)]:null},$=k.useMemo(()=>{let w=0,D=0,V=0,Y=0;K.forEach(M=>{Zo.competencies[0].criteria.forEach(j=>{const T=F(M,"behavior",j.id);T&&(D+=3,T==="A"?w+=3:T==="B"?w+=2:T==="C"&&(w+=1))}),Zo.competencies[2].criteria.forEach(j=>{const T=F(M,"understanding",j.id);T&&(Y+=3,T==="A"?V+=3:T==="B"?V+=2:T==="C"&&(V+=1))})});const le=D>0?Math.min(100,w/D*100):0,_=Y>0?Math.min(100,V/Y*100):0;return{bPct:le,uPct:_,gap:le-_}},[K]),B=k.useMemo(()=>{let w=0,D=0;return K.forEach(Y=>{Zo.competencies[1].criteria.forEach(le=>{const _=F(Y,"recitation",le.id);_&&(D+=3,_==="A"?w+=3:_==="B"?w+=2:_==="C"&&(w+=1))})}),{rPct:D>0?Math.min(100,w/D*100):0}},[K]),q=k.useMemo(()=>{let w=0,D=0;const V={A:0,B:0,C:0,D:0};return K.forEach(Y=>{const le=F(Y,"sira",3);le&&(D++,le==="A"?(w+=3,V.A++):le==="B"?(w+=2,V.B++):le==="C"?(w+=1,V.C++):V.D++)}),{pct:D>0?Math.min(100,w/(D*3)*100):0,distribution:V,total:D}},[K]),J=k.useMemo(()=>{if(!t||t.length===0)return null;const w=[];let D=0,V=0;const Y=new Map;if(t.forEach(_=>{if(_.level==="5AP"&&_.subject.includes("")){const M=`${_.schoolName}-${_.className}`.trim();_.students.forEach(j=>{const T=`${M}-${j.fullName.trim()}`;Y.set(T,j)})}}),n.forEach(_=>{const M=`${_.schoolName}-${_.className}`.trim();_.students.forEach(j=>{const T=`${M}-${j.fullName.trim()}`,L=Y.get(T);if(L){let H=0,Z=0,de=0,fe=0;[1,2,3,4].forEach(xe=>{var Ae;const Ne=(Ae=L.results.reading_perf)==null?void 0:Ae[xe];Ne&&(Z+=3,Ne==="A"?H+=3:Ne==="B"?H+=2:Ne==="C"&&(H+=1))});const je=Z>0?Math.min(100,H/Z*100):0;[1,2,3].forEach(xe=>{var Ae;const Ne=(Ae=j.results.recitation)==null?void 0:Ae[xe];Ne&&(fe+=3,Ne==="A"?de+=3:Ne==="B"?de+=2:Ne==="C"&&(de+=1))});const we=fe>0?Math.min(100,de/fe*100):0;w.push({x:je,y:we,name:j.fullName}),D+=Math.abs(je-we),V++}})}),V===0)return null;const le=D/V;return{points:w,count:V,avgGap:le}},[n,t]),Q=w=>{if(w==="behaviorGap"){const D=$.gap;return{reading:`    ( ): ${$.bPct.toFixed(1)}%  ${$.uPct.toFixed(1)}%    ().  ${D.toFixed(1)} .`,diagnosis:D>15?"    .       ' '          .":"   .          .",recommendation:"       (Checklists)      ."}}if(w==="memoryVsComp"){const D=B.rPct,V=$.uPct,Y=D-V;return{reading:`   (): ${D.toFixed(1)}% |    (): ${V.toFixed(1)}%.`,diagnosis:Y>20?" ' '.     ''      ' '.     .":"  .           .",recommendation:"          ."}}if(w==="siraAction"){const D=q.distribution;return{reading:`  ${q.total}   ${D.A+D.B}          .`,diagnosis:q.pct>65?"   ' '.      (   )     (   ).":"     ' '.          .",recommendation:"     ' '.            : '  '."}}if(w==="crossSubject"){if(!J)return{reading:"   ",diagnosis:"          .",recommendation:""};const D=J.avgGap;return{reading:`  ${J.count}  .        ${D.toFixed(1)} .`,diagnosis:D<12?"  .     ' '     (  )   ( ).":"    (Transversalit).      .           .",recommendation:"     .       ."}}return{reading:"",diagnosis:"",recommendation:""}},U=w=>R[w]||Q(w),ae=({section:w})=>e.jsx("button",{onClick:D=>{D.stopPropagation(),c(w)},className:"absolute top-4 left-4 p-2 bg-slate-100 hover:bg-indigo-100 text-slate-500 hover:text-indigo-600 rounded-full transition-all duration-300 opacity-0 group-hover:opacity-100 transform scale-90 group-hover:scale-100 z-10 shadow-sm",title:"  ",children:e.jsx(en,{size:18})}),se=()=>{if(!o)return null;const w=Av[o],D=U(o);let V=null,Y=null;switch(o){case"behaviorGap":Y=e.jsx(Gs,{size:24,className:"text-emerald-500"}),V=e.jsx("div",{className:"h-full flex items-center justify-center p-4 w-full",children:e.jsxs("div",{className:"w-full max-w-lg space-y-8",children:[e.jsxs("div",{className:"relative group",children:[e.jsxs("div",{className:"flex justify-between text-lg font-bold mb-2 text-slate-300",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(Qu,{size:24,className:"text-pink-500"}),"  ( )"]}),e.jsxs("span",{className:"text-emerald-400 text-2xl",children:[$.bPct.toFixed(1),"%"]})]}),e.jsx("div",{className:"h-6 bg-slate-700/50 rounded-full overflow-hidden border border-slate-600",children:e.jsx("div",{className:"h-full bg-emerald-500 rounded-full transition-all duration-1000",style:{width:`${$.bPct}%`}})})]}),e.jsxs("div",{className:"relative group",children:[e.jsxs("div",{className:"flex justify-between text-lg font-bold mb-2 text-slate-300",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(Vt,{size:24,className:"text-blue-500"}),"  ( )"]}),e.jsxs("span",{className:"text-blue-400 text-2xl",children:[$.uPct.toFixed(1),"%"]})]}),e.jsx("div",{className:"h-6 bg-slate-700/50 rounded-full overflow-hidden border border-slate-600",children:e.jsx("div",{className:"h-full bg-blue-500 rounded-full transition-all duration-1000",style:{width:`${$.uPct}%`}})})]})]})});break;case"siraAction":Y=e.jsx(Vt,{size:24,className:"text-purple-500"});const le=q.distribution,_=q.total;V=e.jsx("div",{className:"h-full flex items-center justify-center p-4 w-full",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4 w-full max-w-lg",children:[e.jsxs("div",{className:"bg-emerald-500/20 p-6 rounded-2xl border border-emerald-500/30 text-center flex flex-col items-center justify-center",children:[e.jsxs("span",{className:"text-4xl font-bold text-emerald-400 mb-2",children:[Math.round((le.A+le.B)/_*100),"%"]}),e.jsx("span",{className:"text-sm font-bold text-emerald-200",children:" "}),e.jsx("p",{className:"text-[10px] text-emerald-300/70 mt-1",children:"    "})]}),e.jsxs("div",{className:"bg-red-500/20 p-6 rounded-2xl border border-red-500/30 text-center flex flex-col items-center justify-center",children:[e.jsxs("span",{className:"text-4xl font-bold text-red-400 mb-2",children:[Math.round((le.C+le.D)/_*100),"%"]}),e.jsx("span",{className:"text-sm font-bold text-red-200",children:" "}),e.jsx("p",{className:"text-[10px] text-red-300/70 mt-1",children:"    "})]})]})});break;case"crossSubject":Y=e.jsx(ni,{size:24,className:"text-indigo-400"}),V=e.jsx("div",{className:"h-full flex flex-col items-center justify-center w-full p-4 relative",children:J?e.jsxs(e.Fragment,{children:[x&&e.jsx("div",{className:"fixed z-[9999] pointer-events-none transform -translate-x-1/2 mb-2 transition-all duration-200",style:{left:x.x,top:x.y,marginTop:x.y<250?"20px":"-100%",transform:x.y<250?"translate(-50%, 0)":"translate(-50%, -100%)"},children:e.jsxs("div",{className:"bg-slate-900 border border-slate-500 rounded-xl shadow-[0_0_30px_rgba(0,0,0,0.5)] p-4 w-64 text-white relative",children:[e.jsx("div",{className:`absolute left-1/2 -translate-x-1/2 w-3 h-3 bg-slate-900 border-slate-500 ${x.y<250?"-top-1.5 border-t border-l rotate-45":"-bottom-1.5 border-r border-b rotate-45"}`}),e.jsxs("div",{className:"flex items-center gap-2 mb-3 border-b border-slate-700 pb-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-700 flex items-center justify-center font-bold text-xs",children:x.name.charAt(0)}),e.jsx("div",{className:"font-bold text-sm truncate",children:x.name})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-[10px] text-slate-400 mb-1",children:[e.jsx("span",{children:"  ()"}),e.jsxs("span",{className:"text-blue-400",children:[x.arabic.toFixed(0),"%"]})]}),e.jsx("div",{className:"h-1.5 bg-slate-800 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-blue-500",style:{width:`${x.arabic}%`}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-[10px] text-slate-400 mb-1",children:[e.jsx("span",{children:" ()"}),e.jsxs("span",{className:"text-emerald-400",children:[x.islamic.toFixed(0),"%"]})]}),e.jsx("div",{className:"h-1.5 bg-slate-800 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-emerald-500",style:{width:`${x.islamic}%`}})})]})]})]})}),e.jsxs("div",{className:"flex flex-col gap-4 items-center w-full max-w-5xl justify-center",children:[e.jsxs("div",{className:"relative w-[500px] h-[500px] bg-slate-800/50 rounded-2xl border border-slate-700 shadow-2xl shrink-0 overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 z-10",children:[e.jsx("div",{className:"absolute top-0 right-0 w-1/2 h-1/2 border-b border-l border-slate-600/30 cursor-help hover:bg-white/5 transition-colors",onMouseEnter:()=>y({title:"  ( )",desc:" :    ()   ().   .",x:"75%",y:"25%"}),onMouseLeave:()=>y(null)}),e.jsx("div",{className:"absolute bottom-0 left-0 w-1/2 h-1/2 border-t border-r border-slate-600/30 cursor-help hover:bg-white/5 transition-colors",onMouseEnter:()=>y({title:"  ( )",desc:" :        .",x:"25%",y:"75%"}),onMouseLeave:()=>y(null)}),e.jsx("div",{className:"absolute top-0 left-0 w-1/2 h-1/2 cursor-help hover:bg-white/5 transition-colors",onMouseEnter:()=>y({title:"  ( )",desc:"     ( )      .",x:"25%",y:"25%"}),onMouseLeave:()=>y(null)}),e.jsx("div",{className:"absolute bottom-0 right-0 w-1/2 h-1/2 cursor-help hover:bg-white/5 transition-colors",onMouseEnter:()=>y({title:"  /  ",desc:"            .",x:"75%",y:"75%"}),onMouseLeave:()=>y(null)})]}),e.jsx("div",{className:"absolute inset-0 z-10 pointer-events-none bg-[linear-gradient(rgba(255,255,255,0.05)_1px,transparent_1px),linear-gradient(90deg,rgba(255,255,255,0.05)_1px,transparent_1px)] bg-[size:10%_10%]"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-[141%] h-0 border-t-2 border-dashed border-white/20 transform -rotate-45 origin-bottom-left pointer-events-none z-10"}),e.jsx("div",{className:"absolute top-0 bottom-0 left-1/2 w-px bg-slate-500/50 border-r border-dashed border-slate-500/50 pointer-events-none z-10"}),e.jsx("div",{className:"absolute left-0 right-0 top-1/2 h-px bg-slate-500/50 border-b border-dashed border-slate-500/50 pointer-events-none z-10"}),b&&!x&&e.jsx("div",{className:"absolute z-20 transform -translate-x-1/2 -translate-y-1/2 pointer-events-none text-center max-w-[200px]",style:{left:b.x,top:b.y},children:e.jsxs("div",{className:"bg-slate-900/90 backdrop-blur border border-indigo-500/50 rounded-xl p-3 shadow-2xl animate-in zoom-in-95 duration-200",children:[e.jsx("h4",{className:"text-indigo-300 font-bold text-lg mb-1",children:b.title}),e.jsx("p",{className:"text-xs text-slate-300 leading-relaxed",children:b.desc})]})}),e.jsx("div",{className:"absolute inset-6 z-30 pointer-events-none",children:J.points.map((M,j)=>{const T=Math.abs(M.x-M.y),H=T<15?"bg-emerald-400 ring-4 ring-emerald-500/20":"bg-red-400 ring-4 ring-red-500/20";return e.jsx("div",{className:"absolute w-8 h-8 -ml-4 -mb-4 flex items-center justify-center cursor-pointer group z-30 hover:z-50 pointer-events-auto",style:{left:`${M.x}%`,bottom:`${M.y}%`},onMouseEnter:Z=>{const de=Z.currentTarget.getBoundingClientRect();m({x:de.left+de.width/2,y:de.top,name:M.name,gap:T,arabic:M.x,islamic:M.y})},onMouseLeave:()=>m(null),children:e.jsx("div",{className:`w-3 h-3 rounded-full shadow-md border border-white/50 transition-transform duration-200 group-hover:scale-150 ${H}`})},j)})}),e.jsx("div",{className:"absolute bottom-1 right-2 text-[10px] text-blue-300 font-bold bg-slate-900/80 px-2 py-1 rounded z-10 pointer-events-none",children:" ( ) "}),e.jsx("div",{className:"absolute top-2 left-1 text-[10px] text-emerald-300 font-bold bg-slate-900/80 px-2 py-1 rounded writing-vertical z-10 pointer-events-none",children:"  ()"})]}),e.jsx("div",{className:"text-center w-full max-w-[500px] mt-8 bg-slate-800/80 p-3 rounded-2xl border border-slate-700 shadow-lg",children:e.jsxs("p",{className:"text-xs font-bold text-slate-300 flex items-center justify-center gap-6",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-3 h-3 rounded-full bg-emerald-400"}),"   ( )"]}),e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-3 h-3 rounded-full bg-red-400"}),"   (  )"]})]})})]})]}):e.jsx("div",{className:"text-slate-500",children:"    "})});break}return e.jsxs("div",{className:"fixed inset-0 z-[100] bg-slate-950 text-white flex flex-col md:flex-row animate-in zoom-in-95 duration-300 overflow-hidden",children:[e.jsx("button",{onClick:()=>c(null),className:"absolute top-4 left-4 p-2 bg-white/10 hover:bg-white/20 rounded-full z-50 text-white transition-all",children:e.jsx(tn,{size:24})}),e.jsxs("div",{className:"w-full md:w-[400px] lg:w-[35%] bg-slate-900 border-l border-slate-800 flex flex-col shadow-2xl relative z-40 order-2 md:order-1 h-full",children:[e.jsxs("div",{className:"p-8 pb-6 border-b border-slate-800 shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"p-3 bg-slate-800 rounded-xl border border-slate-700 shadow-inner",children:Y}),e.jsx("h2",{className:"text-2xl font-bold text-white font-serif",children:w.title})]}),e.jsx("p",{className:"text-slate-400 text-sm",children:"   "})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-8 pt-6 custom-scrollbar",children:[e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"relative pl-4 border-r-2 border-slate-500/30 pr-4 bg-slate-800/30 p-4 rounded-l-xl",children:[e.jsxs("h4",{className:"text-slate-300 font-bold uppercase text-xs mb-2 flex items-center gap-2",children:[e.jsx(it,{size:14}),"  "]}),e.jsx("p",{className:"text-slate-400 leading-relaxed text-xs text-justify font-light",children:w.concept})]}),o==="crossSubject"&&e.jsxs("div",{className:"relative pl-4 border-r-2 border-blue-500/30 pr-4 bg-blue-900/10 p-4 rounded-l-xl",children:[e.jsxs("h4",{className:"text-blue-300 font-bold uppercase text-xs mb-2 flex items-center gap-2",children:[e.jsx(hc,{size:14}),"   "]}),e.jsxs("ul",{className:"text-slate-400 text-xs space-y-2 list-disc list-inside",children:[e.jsxs("li",{children:[e.jsx("span",{className:"text-emerald-400 font-bold",children:" :"}),"   ( )."]}),e.jsxs("li",{children:[e.jsx("span",{className:"text-red-400 font-bold",children:" :"}),"   (   )."]}),e.jsxs("li",{children:[e.jsx("span",{className:"text-yellow-400 font-bold",children:" :"}),"     ."]}),e.jsxs("li",{children:[e.jsx("span",{className:"text-yellow-400 font-bold",children:" :"}),"      ."]})]})]}),e.jsxs("div",{className:"relative pl-4 border-r-2 border-indigo-500/50 pr-4",children:[e.jsxs("h4",{className:"text-indigo-400 font-bold uppercase text-xs mb-2 flex items-center gap-2",children:[e.jsx($t,{size:14}),"   "]}),e.jsx("p",{className:"text-slate-300 leading-relaxed text-sm text-justify",children:D.reading})]}),e.jsxs("div",{className:"relative pl-4 border-r-2 border-amber-500/50 pr-4 bg-amber-500/5 p-4 rounded-l-xl",children:[e.jsxs("h4",{className:"text-amber-400 font-bold uppercase text-xs mb-2 flex items-center gap-2",children:[e.jsx(Qt,{size:14}),"  "]}),e.jsx("p",{className:"text-slate-200 leading-relaxed text-sm font-medium text-justify",children:D.diagnosis})]}),e.jsxs("div",{className:"relative pl-4 border-r-2 border-emerald-500/50 pr-4",children:[e.jsxs("h4",{className:"text-emerald-400 font-bold uppercase text-xs mb-2 flex items-center gap-2",children:[e.jsx(vt,{size:14})," "]}),e.jsx("p",{className:"text-slate-300 leading-relaxed text-sm text-justify",children:D.recommendation})]})]}),e.jsx("div",{className:"mt-8 pt-6 border-t border-slate-800 text-center",children:e.jsx("p",{className:"text-xs text-slate-500",children:"     2025"})})]})]}),e.jsxs("div",{className:"flex-1 bg-gradient-to-br from-slate-900 to-slate-950 flex flex-col relative overflow-hidden order-1 md:order-2 h-full",children:[e.jsx("div",{className:"absolute inset-0 opacity-10",style:{backgroundImage:"radial-gradient(circle at 2px 2px, white 1px, transparent 0)",backgroundSize:"40px 40px"}}),e.jsx("div",{className:"w-full z-20 p-4 shrink-0 flex justify-center",children:e.jsxs("div",{className:"bg-white/5 backdrop-blur-md rounded-lg p-3 border border-white/10 relative overflow-hidden max-w-xl w-full flex items-center gap-4",children:[e.jsx("div",{className:"p-2 bg-indigo-500/20 rounded-lg border border-white/10",children:e.jsx(An,{size:16,className:"text-indigo-300"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-[10px] font-bold text-indigo-300 uppercase mb-0.5",children:" "}),e.jsx("p",{className:"text-xs text-slate-300 leading-relaxed font-mono opacity-90",children:w.method})]})]})}),e.jsx("div",{className:"relative z-10 w-full flex-1 flex items-center justify-center min-h-0 p-4 overflow-hidden",children:V})]})]})},ne=()=>!A||!N?null:e.jsx(ib,{section:A,initialData:U(A),onSave:w=>O(A,w),onReset:()=>z(A),onClose:()=>E(null)});return G===0?e.jsx("div",{className:"text-center p-10 text-gray-400",children:"   "}):e.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-700 pb-24 relative",children:[u&&e.jsxs("div",{className:"fixed z-[9999] pointer-events-none bg-slate-900 text-white px-3 py-2 rounded-lg shadow-xl text-xs max-w-xs border border-slate-700",style:{left:u.x,top:u.y,transform:"translate(-50%, -100%)"},children:[u.title&&e.jsx("div",{className:"font-bold border-b border-slate-600 pb-1 mb-1 text-yellow-400",children:u.title}),e.jsx("div",{children:u.text})]}),se(),ne(),e.jsxs("div",{className:"bg-gradient-to-r from-slate-900 to-emerald-900 text-white p-8 rounded-3xl shadow-xl relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-5",children:e.jsx(v2,{size:300})}),e.jsx("div",{className:"relative z-10 flex flex-col md:flex-row justify-between items-center gap-6",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 text-emerald-400 font-bold uppercase tracking-wider text-xs",children:[e.jsx(is,{size:14}),"  "]}),e.jsx("h2",{className:"text-3xl font-bold font-serif mb-2",children:"  ( )"}),e.jsxs("p",{className:"text-slate-300 text-sm flex items-center gap-2",children:[e.jsx(Et,{size:16})," ",i]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-slate-200 cursor-pointer hover:shadow-lg transition-all group relative",onClick:()=>c("behaviorGap"),children:[e.jsx(ae,{section:"behaviorGap"}),e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("h3",{className:"font-bold text-lg text-slate-800 flex items-center gap-2",children:[e.jsx(Qu,{className:"text-pink-600",size:20}),"   ( vs )"]}),e.jsxs("div",{className:`px-3 py-1 rounded-full text-xs font-bold ${Math.abs($.gap)>10?"bg-red-100 text-red-600":"bg-emerald-100 text-emerald-600"}`,children:[": ",$.gap.toFixed(1),"%"]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"relative pt-2",children:[e.jsxs("div",{className:"flex justify-between text-sm font-bold mb-2",children:[e.jsx("span",{className:"text-slate-600",children:"  ( )"}),e.jsxs("span",{className:"text-emerald-600",children:[$.bPct.toFixed(1),"%"]})]}),e.jsx("div",{className:"h-3 bg-slate-100 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-emerald-500 rounded-full",style:{width:`${$.bPct}%`}})})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex justify-between text-sm font-bold mb-2",children:[e.jsx("span",{className:"text-slate-600",children:"  ( )"}),e.jsxs("span",{className:"text-blue-500",children:[$.uPct.toFixed(1),"%"]})]}),e.jsx("div",{className:"h-3 bg-slate-100 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-blue-500 rounded-full",style:{width:`${$.uPct}%`}})})]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-slate-200 flex flex-col justify-between cursor-pointer hover:shadow-lg transition-all group relative",onClick:()=>c("siraAction"),children:[e.jsx(ae,{section:"siraAction"}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-lg text-slate-800 flex items-center gap-2 mb-2",children:[e.jsx(Vt,{className:"text-purple-600",size:20}),"   "]}),e.jsx("p",{className:"text-xs text-slate-400",children:'    " "'})]}),e.jsx("div",{className:"flex items-center justify-center py-6",children:e.jsxs("div",{className:"relative w-40 h-40",children:[e.jsxs("svg",{className:"w-full h-full transform -rotate-90",children:[e.jsx("circle",{cx:"80",cy:"80",r:"70",fill:"none",stroke:"#f1f5f9",strokeWidth:"12"}),e.jsx("circle",{cx:"80",cy:"80",r:"70",fill:"none",stroke:"#9333ea",strokeWidth:"12",strokeDasharray:`${q.pct*440/100} 440`,strokeLinecap:"round"})]}),e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[e.jsxs("span",{className:"text-3xl font-bold text-purple-700",children:[q.pct.toFixed(0),"%"]}),e.jsx("span",{className:"text-[10px] text-slate-500 font-bold uppercase",children:""})]})]})})]}),e.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-3xl p-6 lg:col-span-2 relative group hover:shadow-md transition-shadow cursor-pointer",onClick:()=>c("crossSubject"),children:[e.jsx(ae,{section:"crossSubject"}),e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-lg text-slate-800 flex items-center gap-2",children:[e.jsx(ni,{className:"text-indigo-600",size:20}),"   ( )"]}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"         "})]}),J?e.jsxs("span",{className:"bg-indigo-100 text-indigo-700 text-xs px-3 py-1 rounded-full font-bold",children:[" : ",J.count," "]}):e.jsx("span",{className:"bg-slate-200 text-slate-500 text-xs px-3 py-1 rounded-full font-bold",children:"   "})]}),J?e.jsxs("div",{className:"h-48 relative border-l border-b border-slate-300 mx-4 bg-white/50 rounded-tr-xl",children:[e.jsx("div",{className:"absolute top-0 right-0 w-1/2 h-1/2 bg-emerald-500/5 rounded-tr-xl"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-1/2 h-1/2 bg-red-500/5"}),e.jsx("div",{className:"absolute inset-0",children:J.points.map((w,D)=>e.jsx("div",{className:"absolute w-2 h-2 rounded-full",style:{left:`${w.x}%`,bottom:`${w.y}%`,backgroundColor:Math.abs(w.x-w.y)<15?"#10b981":"#f43f5e",opacity:.6}},D))}),e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-full border-t border-dashed border-slate-400/20 transform -rotate-45 origin-bottom-left pointer-events-none"}),e.jsx("div",{className:"absolute -bottom-6 w-full text-center text-[10px] text-slate-500 font-bold",children:" ()"}),e.jsx("div",{className:"absolute -left-8 top-1/2 -rotate-90 text-[10px] text-slate-500 font-bold",children:" ()"})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-slate-400",children:[e.jsx(di,{size:32,className:"mb-2 opacity-20"}),e.jsx("p",{className:"text-sm",children:"         ."})]})]})]}),e.jsx("div",{className:"fixed bottom-6 left-1/2 transform -translate-x-1/2 z-50",children:e.jsxs("button",{onClick:()=>C(!0),className:"flex items-center gap-2 bg-slate-800 hover:bg-slate-700 text-white px-8 py-4 rounded-2xl font-bold text-sm transition-all shadow-xl hover:shadow-2xl border-2 border-slate-700 hover:border-slate-600 hover:scale-105 group",children:[e.jsx(Tt,{size:18,className:"group-hover:rotate-12 transition-transform"}),e.jsx("span",{children:" "})]})}),N&&e.jsx("div",{className:"fixed inset-0 z-[110] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 animate-in fade-in",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full p-6 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6 border-b pb-4",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-xl text-slate-800 flex items-center gap-2",children:[e.jsx(Tt,{size:24,className:"text-indigo-600"}),"  "]}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"   "})]}),e.jsx("button",{onClick:()=>C(!1),className:"text-slate-400 hover:text-red-500",children:e.jsx(Ze,{})})]}),A?e.jsx(ib,{section:A,initialData:U(A),onSave:w=>O(A,w),onReset:()=>z(A),onClose:()=>E(null)}):e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("button",{onClick:()=>E("behaviorGap"),className:"p-4 bg-slate-50 hover:bg-indigo-50 border rounded-xl text-right transition-colors group",children:e.jsx("span",{className:"font-bold text-slate-700 block group-hover:text-indigo-700",children:" "})}),e.jsx("button",{onClick:()=>E("siraAction"),className:"p-4 bg-slate-50 hover:bg-indigo-50 border rounded-xl text-right transition-colors group",children:e.jsx("span",{className:"font-bold text-slate-700 block group-hover:text-indigo-700",children:" "})}),e.jsx("button",{onClick:()=>E("crossSubject"),className:"p-4 bg-slate-50 hover:bg-indigo-50 border rounded-xl text-right transition-colors group col-span-2",children:e.jsx("span",{className:"font-bold text-slate-700 block group-hover:text-indigo-700",children:"  ( )"})})]})]})})]})},ib=({section:n,initialData:t,onSave:l,onReset:i,onClose:o})=>{const[c,u]=k.useState(t),f=()=>Av[n].title;return e.jsxs("div",{className:"space-y-4 animate-in slide-in-from-right-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("button",{onClick:o,className:"text-xs text-slate-500 hover:text-slate-800 flex items-center gap-1",children:[e.jsx(Hs,{size:12,className:"rotate-180"}),"  "]}),e.jsx("span",{className:"text-sm font-bold bg-indigo-100 text-indigo-700 px-3 py-1 rounded-full",children:f()})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-700 mb-1",children:"  "}),e.jsx(Pe,{value:c.reading,onChange:x=>u({...c,reading:x}),className:"w-full border rounded-lg p-3 text-sm bg-slate-50 focus:bg-white focus:ring-2 focus:ring-indigo-500 max-h-60 overflow-y-auto",minHeight:"min-h-[120px]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-700 mb-1",children:" "}),e.jsx(Pe,{value:c.diagnosis,onChange:x=>u({...c,diagnosis:x}),className:"w-full border rounded-lg p-3 text-sm bg-amber-50 focus:bg-white focus:ring-2 focus:ring-amber-500 max-h-60 overflow-y-auto",minHeight:"min-h-[120px]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-700 mb-1",children:""}),e.jsx(Pe,{value:c.recommendation,onChange:x=>u({...c,recommendation:x}),className:"w-full border rounded-lg p-3 text-sm bg-emerald-50 focus:bg-white focus:ring-2 focus:ring-emerald-500 max-h-60 overflow-y-auto",minHeight:"min-h-[120px]"})]}),e.jsxs("div",{className:"flex justify-between pt-4 border-t",children:[e.jsxs("button",{onClick:i,className:"text-red-500 text-xs font-bold flex items-center gap-1 hover:underline",children:[e.jsx(Tn,{size:12}),"   "]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:o,className:"px-4 py-2 text-slate-500 font-bold hover:bg-slate-100 rounded-lg",children:""}),e.jsxs("button",{onClick:()=>l(c),className:"px-6 py-2 bg-indigo-600 text-white font-bold rounded-lg hover:bg-indigo-700 shadow-md flex items-center gap-2",children:[e.jsx(Zt,{size:16}),"  "]})]})]})]})},Wo={id:"history_y5",label:" ( )",competencies:[{id:"general_history",label:"    ",criteria:[{id:1,label:"  "},{id:2,label:"      "},{id:3,label:"    "}]},{id:"national_history",label:"  ",criteria:[{id:1,label:"    "},{id:2,label:"     "},{id:3,label:"    "},{id:4,label:"    "}]}]},Mv={identityIndex:{title:"  ",concept:"      ( )     .",method:"      (  )   4 ."},chronoAwareness:{title:"  ( )",concept:"         ( ).",method:"      (    )."},nationalDepth:{title:"  ",concept:"    :          (  )",method:"       (  )."},crossLang:{title:"  ",concept:"    .           ''  '' (   ).",method:"  ' ' ( )   '' ( )  ."}},jA=({records:n,allRecords:t,scope:l,contextName:i})=>{const[o,c]=k.useState(null),[u,f]=k.useState(null),[x,m]=k.useState(null),[b,y]=k.useState(null),[N,C]=k.useState(!1),[A,E]=k.useState(null),[R,P]=k.useState({});k.useEffect(()=>{const w=`mufattish_analysis_y5_history_${i}_${l}`,D=localStorage.getItem(w);if(D)try{P(JSON.parse(D))}catch(V){console.error(V)}},[i,l]);const O=(w,D)=>{const V={...R,[w]:D};P(V),localStorage.setItem(`mufattish_analysis_y5_history_${i}_${l}`,JSON.stringify(V)),E(null)},z=w=>{const D={...R};delete D[w],P(D),localStorage.setItem(`mufattish_analysis_y5_history_${i}_${l}`,JSON.stringify(D))},K=k.useMemo(()=>n.flatMap(w=>w.students.map(D=>({...D,className:w.className,schoolName:w.schoolName}))),[n]),G=K.length,F=(w,D,V)=>{if(!w.results)return null;const Y=w.results[D];return Y?Y[V]||Y[String(V)]:null},$=k.useMemo(()=>{let w=0,D=0;return K.forEach(V=>{Wo.competencies[1].criteria.forEach(Y=>{const le=F(V,"national_history",Y.id);le&&(D+=3,le==="A"?w+=3:le==="B"?w+=2:le==="C"&&(w+=1))})}),D>0?w/D*100:0},[K]),B=k.useMemo(()=>{let w=0,D=0;return K.forEach(V=>{Wo.competencies[0].criteria.forEach(Y=>{const le=F(V,"general_history",Y.id);le&&(D+=3,le==="A"?w+=3:le==="B"?w+=2:le==="C"&&(w+=1))})}),D>0?w/D*100:0},[K]),q=k.useMemo(()=>{let w=0,D=0;return K.forEach(V=>{const Y=F(V,"national_history",1);Y&&(D+=3,Y==="A"?w+=3:Y==="B"?w+=2:Y==="C"&&(w+=1))}),D>0?w/D*100:0},[K]),J=k.useMemo(()=>{if(!t||t.length===0)return null;const w=[];let D=0,V=0;const Y=new Map;if(t.forEach(_=>{if(_.level==="5AP"&&_.subject.includes("")){const M=`${_.schoolName}-${_.className}`.trim();_.students.forEach(j=>{const T=`${M}-${j.fullName.trim()}`;Y.set(T,j)})}}),n.forEach(_=>{const M=`${_.schoolName}-${_.className}`.trim();_.students.forEach(j=>{const T=`${M}-${j.fullName.trim()}`,L=Y.get(T);if(L){let H=0,Z=0;[1,2,3,4].forEach(xe=>{var Ae;const Ne=(Ae=L.results.reading_perf)==null?void 0:Ae[xe];Ne&&(Z+=3,Ne==="A"?H+=3:Ne==="B"?H+=2:Ne==="C"&&(H+=1))});const de=Z>0?Math.min(100,H/Z*100):0;let fe=0,je=0;Wo.competencies.forEach(xe=>{xe.criteria.forEach(Ne=>{const Ae=F(j,xe.id,Ne.id);Ae&&(je+=3,Ae==="A"?fe+=3:Ae==="B"?fe+=2:Ae==="C"&&(fe+=1))})});const we=je>0?Math.min(100,fe/je*100):0;w.push({x:de,y:we,name:j.fullName}),D+=Math.abs(de-we),V++}})}),V===0)return null;const le=D/V;return{points:w,count:V,avgGap:le}},[n,t]),Q=w=>{if(w==="identityIndex")return{reading:`       ${$.toFixed(1)}%.`,diagnosis:$>60?"         .":"        .",recommendation:"          ."};if(w==="chronoAwareness")return{reading:`        ${B.toFixed(1)}%.`,diagnosis:"      ( ).        .",recommendation:"     (Frise Chronologique)    ."};if(w==="nationalDepth")return{reading:`       ${q.toFixed(1)}%.`,diagnosis:q>50?"     .":"       (   ).",recommendation:"  ' '      ."};if(w==="crossLang"){if(!J)return{reading:"   .",diagnosis:"",recommendation:""};const D=J.avgGap;return{reading:`     ()     ${D.toFixed(1)} .`,diagnosis:D<15?" .       .":" ' '.                .",recommendation:"          ( )."}}return{reading:"",diagnosis:"",recommendation:""}},U=w=>R[w]||Q(w),ae=({section:w})=>e.jsx("button",{onClick:D=>{D.stopPropagation(),c(w)},className:"absolute top-4 left-4 p-2 bg-slate-100 hover:bg-indigo-100 text-slate-500 hover:text-indigo-600 rounded-full transition-all duration-300 opacity-0 group-hover:opacity-100 transform scale-90 group-hover:scale-100 z-10 shadow-sm",title:"  ",children:e.jsx(en,{size:18})}),se=()=>{if(!o)return null;const w=Mv[o],D=U(o);let V=null,Y=null;switch(o){case"identityIndex":Y=e.jsx(Hl,{size:24,className:"text-emerald-500"}),V=e.jsx("div",{className:"h-full flex items-center justify-center p-4 w-full",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsxs("span",{className:"text-8xl font-bold text-emerald-400 font-serif",children:[$.toFixed(0),"%"]}),e.jsx("p",{className:"text-emerald-200 text-xl",children:"   "})]})});break;case"chronoAwareness":Y=e.jsx(Zm,{size:24,className:"text-blue-500"}),V=e.jsx("div",{className:"h-full flex items-center justify-center p-4 w-full",children:e.jsxs("div",{className:"relative w-64 h-64",children:[e.jsxs("svg",{className:"w-full h-full",viewBox:"0 0 100 100",children:[e.jsx("circle",{cx:"50",cy:"50",r:"45",fill:"none",stroke:"#1e293b",strokeWidth:"10"}),e.jsx("circle",{cx:"50",cy:"50",r:"45",fill:"none",stroke:"#3b82f6",strokeWidth:"10",strokeDasharray:`${B*283/100} 283`,transform:"rotate(-90 50 50)",strokeLinecap:"round"})]}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("span",{className:"text-4xl font-bold text-blue-400",children:[B.toFixed(0),"%"]})})]})});break;case"nationalDepth":Y=e.jsx(Qt,{size:24,className:"text-amber-500"}),V=e.jsx("div",{className:"h-full flex items-center justify-center p-4 w-full",children:e.jsx("div",{className:"w-full max-w-lg space-y-6",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-2 text-amber-200",children:[e.jsx("span",{children:"  ()"}),e.jsx("span",{children:"  ()"})]}),e.jsx("div",{className:"h-4 bg-slate-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-amber-500",style:{width:`${q}%`}})}),e.jsxs("p",{className:"text-center mt-2 text-3xl font-bold text-amber-400",children:[q.toFixed(0),"%"]})]})})});break;case"crossLang":Y=e.jsx(ni,{size:24,className:"text-indigo-400"}),V=e.jsx("div",{className:"h-full flex flex-col items-center justify-center w-full p-4 relative",children:J?e.jsxs(e.Fragment,{children:[x&&e.jsx("div",{className:"fixed z-[9999] pointer-events-none transform -translate-x-1/2 mb-2 transition-all duration-200",style:{left:x.x,top:x.y,marginTop:x.y<250?"20px":"-100%",transform:x.y<250?"translate(-50%, 0)":"translate(-50%, -100%)"},children:e.jsxs("div",{className:"bg-slate-900 border border-slate-500 rounded-xl shadow-[0_0_30px_rgba(0,0,0,0.5)] p-4 w-64 text-white relative",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3 border-b border-slate-700 pb-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-700 flex items-center justify-center font-bold text-xs",children:x.name.charAt(0)}),e.jsx("div",{className:"font-bold text-sm truncate",children:x.name})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-[10px] text-slate-400 mb-1",children:[e.jsx("span",{children:"  ()"}),e.jsxs("span",{className:"text-blue-400",children:[x.arabic.toFixed(0),"%"]})]}),e.jsx("div",{className:"h-1.5 bg-slate-800 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-blue-500",style:{width:`${x.arabic}%`}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-[10px] text-slate-400 mb-1",children:[e.jsx("span",{children:" ()"}),e.jsxs("span",{className:"text-amber-400",children:[x.history.toFixed(0),"%"]})]}),e.jsx("div",{className:"h-1.5 bg-slate-800 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-amber-500",style:{width:`${x.history}%`}})})]})]})]})}),e.jsxs("div",{className:"flex flex-col gap-4 items-center w-full max-w-5xl justify-center",children:[e.jsxs("div",{className:"relative w-[500px] h-[500px] bg-slate-800/50 rounded-2xl border border-slate-700 shadow-2xl shrink-0 overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 z-10",children:[e.jsx("div",{className:"absolute top-0 right-0 w-1/2 h-1/2 border-b border-l border-slate-600/30 cursor-help hover:bg-white/5 transition-colors",onMouseEnter:()=>y({title:" ",desc:"    .",x:"75%",y:"25%"}),onMouseLeave:()=>y(null)}),e.jsx("div",{className:"absolute bottom-0 left-0 w-1/2 h-1/2 border-t border-r border-slate-600/30 cursor-help hover:bg-white/5 transition-colors",onMouseEnter:()=>y({title:"  ( )",desc:"    .",x:"25%",y:"75%"}),onMouseLeave:()=>y(null)}),e.jsx("div",{className:"absolute top-0 left-0 w-1/2 h-1/2 cursor-help hover:bg-white/5 transition-colors",onMouseEnter:()=>y({title:" ",desc:"     .",x:"25%",y:"25%"}),onMouseLeave:()=>y(null)}),e.jsx("div",{className:"absolute bottom-0 right-0 w-1/2 h-1/2 cursor-help hover:bg-white/5 transition-colors",onMouseEnter:()=>y({title:"  ",desc:"       .",x:"75%",y:"75%"}),onMouseLeave:()=>y(null)})]}),e.jsx("div",{className:"absolute inset-0 z-20 pointer-events-none bg-[linear-gradient(rgba(255,255,255,0.05)_1px,transparent_1px),linear-gradient(90deg,rgba(255,255,255,0.05)_1px,transparent_1px)] bg-[size:10%_10%]"}),e.jsx("div",{className:"absolute top-0 bottom-0 left-1/2 w-px bg-slate-500/50 border-r border-dashed border-slate-500/50 pointer-events-none z-20"}),e.jsx("div",{className:"absolute left-0 right-0 top-1/2 h-px bg-slate-500/50 border-b border-dashed border-slate-500/50 pointer-events-none z-20"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-[141%] h-0 border-t-2 border-dashed border-white/20 transform -rotate-45 origin-bottom-left pointer-events-none z-20"}),b&&!x&&e.jsx("div",{className:"absolute z-20 transform -translate-x-1/2 -translate-y-1/2 pointer-events-none text-center",style:{left:b.x,top:b.y},children:e.jsxs("div",{className:"bg-slate-900/90 backdrop-blur border border-indigo-500/50 rounded-xl p-3 shadow-2xl animate-in zoom-in-95 duration-200",children:[e.jsx("h4",{className:"text-indigo-300 font-bold text-lg mb-1",children:b.title}),e.jsx("p",{className:"text-xs text-slate-300 whitespace-nowrap",children:b.desc})]})}),e.jsx("div",{className:"absolute inset-6 z-50 pointer-events-none",children:J.points.map((le,_)=>{const M=Math.abs(le.x-le.y),T=M<15?"bg-emerald-400 ring-4 ring-emerald-500/20":"bg-red-400 ring-4 ring-red-500/20";return e.jsx("div",{className:"absolute w-8 h-8 -ml-4 -mb-4 flex items-center justify-center cursor-pointer group hover:z-[60] pointer-events-auto",style:{left:`${le.x}%`,bottom:`${le.y}%`},onMouseEnter:L=>{const H=L.currentTarget.getBoundingClientRect();m({x:H.left+H.width/2,y:H.top,name:le.name,gap:M,arabic:le.x,history:le.y})},onMouseLeave:()=>m(null),children:e.jsx("div",{className:`w-3 h-3 rounded-full shadow-md border border-white/50 transition-transform duration-200 group-hover:scale-150 ${T}`})},_)})}),e.jsx("div",{className:"absolute bottom-1 right-2 text-[10px] text-blue-300 font-bold bg-slate-900/80 px-2 py-1 rounded z-30 pointer-events-none",children:" ( ) "}),e.jsx("div",{className:"absolute top-2 left-1 text-[10px] text-amber-300 font-bold bg-slate-900/80 px-2 py-1 rounded writing-vertical z-30 pointer-events-none",children:" "})]}),e.jsx("div",{className:"text-center w-full max-w-[500px] mt-4 bg-slate-800/80 p-3 rounded-2xl border border-slate-700 shadow-lg",children:e.jsxs("p",{className:"text-xs font-bold text-slate-300 flex items-center justify-center gap-6",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-3 h-3 rounded-full bg-emerald-400"}),"  (  )"]}),e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-3 h-3 rounded-full bg-red-400"}),"  (   )"]})]})})]})]}):e.jsx("div",{className:"text-slate-500",children:"    "})});break}return e.jsxs("div",{className:"fixed inset-0 z-[100] bg-slate-950 text-white flex flex-col md:flex-row animate-in zoom-in-95 duration-300 overflow-hidden",children:[e.jsx("button",{onClick:()=>c(null),className:"absolute top-4 left-4 p-2 bg-white/10 hover:bg-white/20 rounded-full z-50 text-white transition-all",children:e.jsx(tn,{size:24})}),e.jsxs("div",{className:"w-full md:w-[400px] lg:w-[35%] bg-slate-900 border-l border-slate-800 flex flex-col shadow-2xl relative z-40 order-2 md:order-1 h-full",children:[e.jsxs("div",{className:"p-8 pb-6 border-b border-slate-800 shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"p-3 bg-slate-800 rounded-xl border border-slate-700 shadow-inner",children:Y}),e.jsx("h2",{className:"text-2xl font-bold text-white font-serif",children:w.title})]}),e.jsx("p",{className:"text-slate-400 text-sm",children:"   "})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-8 pt-6 custom-scrollbar",children:[e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"relative pl-4 border-r-2 border-slate-500/30 pr-4 bg-slate-800/30 p-4 rounded-l-xl",children:[e.jsxs("h4",{className:"text-slate-300 font-bold uppercase text-xs mb-2 flex items-center gap-2",children:[e.jsx(it,{size:14}),"  "]}),e.jsx("p",{className:"text-slate-400 leading-relaxed text-xs text-justify font-light",children:w.concept})]}),o==="crossLang"&&e.jsxs("div",{className:"relative pl-4 border-r-2 border-blue-500/30 pr-4 bg-blue-900/10 p-4 rounded-l-xl",children:[e.jsxs("h4",{className:"text-blue-300 font-bold uppercase text-xs mb-2 flex items-center gap-2",children:[e.jsx(hc,{size:14}),"   "]}),e.jsxs("ul",{className:"text-slate-400 text-xs space-y-2 list-disc list-inside",children:[e.jsxs("li",{children:[e.jsx("span",{className:"text-emerald-400 font-bold",children:" :"}),"   ( )."]}),e.jsxs("li",{children:[e.jsx("span",{className:"text-red-400 font-bold",children:" :"}),"   ( )."]}),e.jsxs("li",{children:[e.jsx("span",{className:"text-yellow-400 font-bold",children:" :"}),"   (  )."]}),e.jsxs("li",{children:[e.jsx("span",{className:"text-yellow-400 font-bold",children:" :"}),"   ."]})]})]}),e.jsxs("div",{className:"relative pl-4 border-r-2 border-indigo-500/50 pr-4",children:[e.jsxs("h4",{className:"text-indigo-400 font-bold uppercase text-xs mb-2 flex items-center gap-2",children:[e.jsx($t,{size:14}),"   "]}),e.jsx("p",{className:"text-slate-300 leading-relaxed text-sm text-justify",children:D.reading})]}),e.jsxs("div",{className:"relative pl-4 border-r-2 border-amber-500/50 pr-4 bg-amber-500/5 p-4 rounded-l-xl",children:[e.jsxs("h4",{className:"text-amber-400 font-bold uppercase text-xs mb-2 flex items-center gap-2",children:[e.jsx(Qt,{size:14}),"  "]}),e.jsx("p",{className:"text-slate-200 leading-relaxed text-sm font-medium text-justify",children:D.diagnosis})]}),e.jsxs("div",{className:"relative pl-4 border-r-2 border-emerald-500/50 pr-4",children:[e.jsxs("h4",{className:"text-emerald-400 font-bold uppercase text-xs mb-2 flex items-center gap-2",children:[e.jsx(vt,{size:14})," "]}),e.jsx("p",{className:"text-slate-300 leading-relaxed text-sm text-justify",children:D.recommendation})]})]}),e.jsx("div",{className:"mt-8 pt-6 border-t border-slate-800 text-center",children:e.jsx("p",{className:"text-xs text-slate-500",children:"     2025"})})]})]}),e.jsxs("div",{className:"flex-1 bg-gradient-to-br from-slate-900 to-slate-950 flex flex-col relative order-1 md:order-2 h-full",children:[e.jsx("div",{className:"absolute inset-0 opacity-10 pointer-events-none",style:{backgroundImage:"radial-gradient(circle at 2px 2px, white 1px, transparent 0)",backgroundSize:"40px 40px"}}),e.jsx("div",{className:"w-full z-20 p-4 shrink-0 flex justify-center pointer-events-none",children:e.jsxs("div",{className:"bg-white/5 backdrop-blur-md rounded-lg p-3 border border-white/10 relative overflow-hidden max-w-xl w-full flex items-center gap-4",children:[e.jsx("div",{className:"p-2 bg-indigo-500/20 rounded-lg border border-white/10",children:e.jsx(An,{size:16,className:"text-indigo-300"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-[10px] font-bold text-indigo-300 uppercase mb-0.5",children:" "}),e.jsx("p",{className:"text-xs text-slate-300 leading-relaxed font-mono opacity-90",children:w.method})]})]})}),e.jsx("div",{className:"relative z-10 w-full flex-1 overflow-y-auto p-4 custom-scrollbar",children:e.jsx("div",{className:"min-h-full flex flex-col items-center justify-center",children:V})})]})]})},ne=()=>!A||!N?null:e.jsx(rb,{section:A,initialData:U(A),onSave:w=>O(A,w),onReset:()=>z(A),onClose:()=>E(null)});return G===0?e.jsx("div",{className:"text-center p-10 text-gray-400",children:"   "}):e.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-700 pb-24 relative",children:[u&&e.jsxs("div",{className:"fixed z-[9999] pointer-events-none bg-slate-900 text-white px-3 py-2 rounded-lg shadow-xl text-xs max-w-xs border border-slate-700",style:{left:u.x,top:u.y,transform:"translate(-50%, -100%)"},children:[u.title&&e.jsx("div",{className:"font-bold border-b border-slate-600 pb-1 mb-1 text-yellow-400",children:u.title}),e.jsx("div",{children:u.text})]}),se(),ne(),e.jsxs("div",{className:"bg-gradient-to-r from-slate-900 to-amber-900 text-white p-8 rounded-3xl shadow-xl relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-5",children:e.jsx(Et,{size:300})}),e.jsx("div",{className:"relative z-10 flex flex-col md:flex-row justify-between items-center gap-6",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 text-amber-400 font-bold uppercase tracking-wider text-xs",children:[e.jsx(is,{size:14}),"  "]}),e.jsx("h2",{className:"text-3xl font-bold font-serif mb-2",children:" ( )"}),e.jsxs("p",{className:"text-slate-300 text-sm flex items-center gap-2",children:[e.jsx(Et,{size:16})," ",i]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-slate-200 cursor-pointer hover:shadow-lg transition-all group relative",onClick:()=>c("identityIndex"),children:[e.jsx(ae,{section:"identityIndex"}),e.jsx("div",{className:"flex justify-between items-start mb-6",children:e.jsxs("h3",{className:"font-bold text-lg text-slate-800 flex items-center gap-2",children:[e.jsx(Hl,{className:"text-emerald-600",size:20}),"   "]})}),e.jsxs("div",{className:"flex items-center justify-center py-6",children:[e.jsx("div",{className:"relative w-48 h-24 bg-gray-100 rounded-t-full overflow-hidden",children:e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-full origin-bottom transition-transform duration-1000",style:{transform:`rotate(${Math.min($,100)/100*180-90}deg)`},children:e.jsx("div",{className:"w-2 h-full bg-emerald-600 mx-auto shadow-[0_0_15px_#059669]"})})}),e.jsx("div",{className:"absolute bottom-10 text-center",children:e.jsxs("span",{className:"text-4xl font-bold text-slate-800",children:[$.toFixed(0),"%"]})})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-slate-200 cursor-pointer hover:shadow-lg transition-all group relative",onClick:()=>c("chronoAwareness"),children:[e.jsx(ae,{section:"chronoAwareness"}),e.jsx("div",{className:"flex justify-between items-start mb-6",children:e.jsxs("h3",{className:"font-bold text-lg text-slate-800 flex items-center gap-2",children:[e.jsx(Zm,{className:"text-blue-600",size:20}),"   ()"]})}),e.jsx("div",{className:"flex items-center justify-center py-6",children:e.jsxs("div",{className:"relative w-40 h-40",children:[e.jsxs("svg",{className:"w-full h-full",viewBox:"0 0 100 100",children:[e.jsx("circle",{cx:"50",cy:"50",r:"45",fill:"none",stroke:"#f1f5f9",strokeWidth:"10"}),e.jsx("circle",{cx:"50",cy:"50",r:"45",fill:"none",stroke:"#3b82f6",strokeWidth:"10",strokeDasharray:`${B*283/100} 283`,transform:"rotate(-90 50 50)",strokeLinecap:"round"})]}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("span",{className:"text-3xl font-bold text-blue-600",children:[B.toFixed(0),"%"]})})]})})]}),e.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-3xl p-6 relative group hover:shadow-md transition-shadow cursor-pointer",onClick:()=>c("crossLang"),children:[e.jsx(ae,{section:"crossLang"}),e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-lg text-slate-800 flex items-center gap-2",children:[e.jsx(ni,{className:"text-indigo-600",size:20}),"   "]}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"     "})]}),J?e.jsxs("span",{className:"bg-indigo-100 text-indigo-700 text-xs px-3 py-1 rounded-full font-bold",children:[" : ",J.count," "]}):e.jsx("span",{className:"bg-slate-200 text-slate-500 text-xs px-3 py-1 rounded-full font-bold",children:"   "})]}),J?e.jsxs("div",{className:"h-48 relative border-l border-b border-slate-300 mx-4 bg-white/50 rounded-tr-xl",children:[e.jsx("div",{className:"absolute top-0 right-0 w-1/2 h-1/2 bg-emerald-500/5 rounded-tr-xl"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-1/2 h-1/2 bg-red-500/5"}),e.jsx("div",{className:"absolute inset-0",children:J.points.map((w,D)=>e.jsx("div",{className:"absolute w-2 h-2 rounded-full",style:{left:`${w.x}%`,bottom:`${w.y}%`,backgroundColor:Math.abs(w.x-w.y)<15?"#10b981":"#f43f5e",opacity:.6}},D))}),e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-full border-t border-dashed border-slate-400/20 transform -rotate-45 origin-bottom-left pointer-events-none"}),e.jsx("div",{className:"absolute -bottom-6 w-full text-center text-[10px] text-slate-500 font-bold",children:" ()"}),e.jsx("div",{className:"absolute -left-8 top-1/2 -rotate-90 text-[10px] text-slate-500 font-bold",children:""})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-slate-400",children:[e.jsx(di,{size:32,className:"mb-2 opacity-20"}),e.jsx("p",{className:"text-sm",children:"      ."})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-slate-200 cursor-pointer hover:shadow-lg transition-all group relative",onClick:()=>c("nationalDepth"),children:[e.jsx(ae,{section:"nationalDepth"}),e.jsx("div",{className:"flex justify-between items-start mb-6",children:e.jsxs("h3",{className:"font-bold text-lg text-slate-800 flex items-center gap-2",children:[e.jsx(Qt,{className:"text-amber-600",size:20}),"   ( )"]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between text-sm text-slate-600",children:[e.jsx("span",{children:" "}),e.jsx("span",{children:"  ()"})]}),e.jsx("div",{className:"h-4 bg-slate-100 rounded-full overflow-hidden relative",children:e.jsx("div",{className:"h-full bg-amber-500",style:{width:`${q}%`}})}),e.jsxs("div",{className:"text-center font-bold text-2xl text-amber-500",children:[q.toFixed(0),"%"]})]})]})]}),e.jsx("div",{className:"fixed bottom-6 left-1/2 transform -translate-x-1/2 z-50",children:e.jsxs("button",{onClick:()=>C(!0),className:"flex items-center gap-2 bg-slate-800 hover:bg-slate-700 text-white px-8 py-4 rounded-2xl font-bold text-sm transition-all shadow-xl hover:shadow-2xl border-2 border-slate-700 hover:border-slate-600 hover:scale-105 group",children:[e.jsx(Tt,{size:18,className:"group-hover:rotate-12 transition-transform"}),e.jsx("span",{children:" "})]})}),N&&e.jsx("div",{className:"fixed inset-0 z-[110] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 animate-in fade-in",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full p-6 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6 border-b pb-4",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-xl text-slate-800 flex items-center gap-2",children:[e.jsx(Tt,{size:24,className:"text-indigo-600"}),"  "]}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"   "})]}),e.jsx("button",{onClick:()=>C(!1),className:"text-slate-400 hover:text-red-500",children:e.jsx(Ze,{})})]}),A?e.jsx(rb,{section:A,initialData:U(A),onSave:w=>O(A,w),onReset:()=>z(A),onClose:()=>E(null)}):e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("button",{onClick:()=>E("identityIndex"),className:"p-4 bg-slate-50 hover:bg-indigo-50 border rounded-xl text-right transition-colors group",children:e.jsx("span",{className:"font-bold text-slate-700 block group-hover:text-indigo-700",children:" "})}),e.jsx("button",{onClick:()=>E("chronoAwareness"),className:"p-4 bg-slate-50 hover:bg-indigo-50 border rounded-xl text-right transition-colors group",children:e.jsx("span",{className:"font-bold text-slate-700 block group-hover:text-indigo-700",children:" "})}),e.jsx("button",{onClick:()=>E("nationalDepth"),className:"p-4 bg-slate-50 hover:bg-indigo-50 border rounded-xl text-right transition-colors group",children:e.jsx("span",{className:"font-bold text-slate-700 block group-hover:text-indigo-700",children:" "})}),e.jsx("button",{onClick:()=>E("crossLang"),className:"p-4 bg-slate-50 hover:bg-indigo-50 border rounded-xl text-right transition-colors group",children:e.jsx("span",{className:"font-bold text-slate-700 block group-hover:text-indigo-700",children:" "})})]})]})})]})},rb=({section:n,initialData:t,onSave:l,onReset:i,onClose:o})=>{const[c,u]=k.useState(t),f=()=>Mv[n].title;return e.jsxs("div",{className:"space-y-4 animate-in slide-in-from-right-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("button",{onClick:o,className:"text-xs text-slate-500 hover:text-slate-800 flex items-center gap-1",children:[e.jsx(Hs,{size:12,className:"rotate-180"}),"  "]}),e.jsx("span",{className:"text-sm font-bold bg-indigo-100 text-indigo-700 px-3 py-1 rounded-full",children:f()})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-700 mb-1",children:"  "}),e.jsx(Pe,{value:c.reading,onChange:x=>u({...c,reading:x}),className:"w-full border rounded-lg p-3 text-sm bg-slate-50 focus:bg-white focus:ring-2 focus:ring-indigo-500 max-h-60 overflow-y-auto",minHeight:"min-h-[120px]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-700 mb-1",children:" "}),e.jsx(Pe,{value:c.diagnosis,onChange:x=>u({...c,diagnosis:x}),className:"w-full border rounded-lg p-3 text-sm bg-amber-50 focus:bg-white focus:ring-2 focus:ring-amber-500 max-h-60 overflow-y-auto",minHeight:"min-h-[120px]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-700 mb-1",children:""}),e.jsx(Pe,{value:c.recommendation,onChange:x=>u({...c,recommendation:x}),className:"w-full border rounded-lg p-3 text-sm bg-emerald-50 focus:bg-white focus:ring-2 focus:ring-emerald-500 max-h-60 overflow-y-auto",minHeight:"min-h-[120px]"})]}),e.jsxs("div",{className:"flex justify-between pt-4 border-t",children:[e.jsxs("button",{onClick:i,className:"text-red-500 text-xs font-bold flex items-center gap-1 hover:underline",children:[e.jsx(Tn,{size:12}),"   "]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:o,className:"px-4 py-2 text-slate-500 font-bold hover:bg-slate-100 rounded-lg",children:""}),e.jsxs("button",{onClick:()=>l(c),className:"px-6 py-2 bg-indigo-600 text-white font-bold rounded-lg hover:bg-indigo-700 shadow-md flex items-center gap-2",children:[e.jsx(Zt,{size:16}),"  "]})]})]})]})},Pl={id:"civics_y5",label:"  ( )",competencies:[{id:"coexistence",label:"    ( )",criteria:[{id:1,label:"     "},{id:2,label:"    "},{id:3,label:"    "}]},{id:"citizenship",label:"     ( )",criteria:[{id:1,label:"      "},{id:2,label:"       "}]},{id:"democracy",label:"    ",criteria:[{id:1,label:"      "},{id:2,label:"     "}]}]},Dv={citizenMatrix:{title:"  ( / )",concept:"    ' ' (  )  ' ' (  ).",method:"    (1+3)     (2)."},institutionalAwareness:{title:" ",concept:"           .",method:"      (  )."},activeCitizenship:{title:" ",concept:"         (    ).",method:"      (    )."},democracyIndex:{title:"  ",concept:"          .",method:"      (  )."}},wA=({records:n,scope:t,contextName:l})=>{const[i,o]=k.useState(null),[c,u]=k.useState(null),[f,x]=k.useState(null),[m,b]=k.useState(null),[y,N]=k.useState(!1),[C,A]=k.useState(null),[E,R]=k.useState({});k.useEffect(()=>{const ne=`mufattish_analysis_y5_civics_${l}_${t}`,w=localStorage.getItem(ne);if(w)try{R(JSON.parse(w))}catch(D){console.error(D)}},[l,t]);const P=(ne,w)=>{const D={...E,[ne]:w};R(D),localStorage.setItem(`mufattish_analysis_y5_civics_${l}_${t}`,JSON.stringify(D)),A(null)},O=ne=>{const w={...E};delete w[ne],R(w),localStorage.setItem(`mufattish_analysis_y5_civics_${l}_${t}`,JSON.stringify(w))},z=k.useMemo(()=>n.flatMap(ne=>ne.students.map(w=>({...w,className:ne.className,schoolName:ne.schoolName}))),[n]),K=z.length,G=(ne,w,D)=>{if(!ne.results)return null;const V=ne.results[w];return V?V[D]||V[String(D)]:null},F=k.useMemo(()=>{let ne=0,w=0;return z.forEach(D=>{Pl.competencies[0].criteria.forEach(V=>{const Y=G(D,"coexistence",V.id);Y&&(w+=3,Y==="A"?ne+=3:Y==="B"?ne+=2:Y==="C"&&(ne+=1))})}),w>0?ne/w*100:0},[z]),$=k.useMemo(()=>{let ne=0,w=0;return z.forEach(D=>{Pl.competencies[1].criteria.forEach(V=>{const Y=G(D,"citizenship",V.id);Y&&(w+=3,Y==="A"?ne+=3:Y==="B"?ne+=2:Y==="C"&&(ne+=1))})}),w>0?ne/w*100:0},[z]),B=k.useMemo(()=>{let ne=0,w=0;return z.forEach(D=>{Pl.competencies[2].criteria.forEach(V=>{const Y=G(D,"democracy",V.id);Y&&(w+=3,Y==="A"?ne+=3:Y==="B"?ne+=2:Y==="C"&&(ne+=1))})}),w>0?ne/w*100:0},[z]),q=k.useMemo(()=>{const ne=[];let w=0;return z.forEach(D=>{let V=0,Y=0;Pl.competencies[0].criteria.forEach(T=>{const L=G(D,"coexistence",T.id);L&&(Y+=3,L==="A"?V+=3:L==="B"?V+=2:L==="C"&&(V+=1))}),Pl.competencies[2].criteria.forEach(T=>{const L=G(D,"democracy",T.id);L&&(Y+=3,L==="A"?V+=3:L==="B"?V+=2:L==="C"&&(V+=1))});const le=Y>0?V/Y*100:0;let _=0,M=0;Pl.competencies[1].criteria.forEach(T=>{const L=G(D,"citizenship",T.id);L&&(M+=3,L==="A"?_+=3:L==="B"?_+=2:L==="C"&&(_+=1))});const j=M>0?_/M*100:0;ne.push({x:le,y:j,name:D.fullName}),w++}),{points:ne,count:w}},[z]),J=ne=>ne==="institutionalAwareness"?{reading:`      ${F.toFixed(1)}%.`,diagnosis:F>60?"     ( )    .":"   .     .",recommendation:"          (  )."}:ne==="activeCitizenship"?{reading:`   ( )  ${$.toFixed(1)}%.`,diagnosis:$>60?"       .":"   .     .",recommendation:"        ( )."}:ne==="democracyIndex"?{reading:`    ${B.toFixed(1)}%.`,diagnosis:"       .",recommendation:"        ."}:ne==="citizenMatrix"?{reading:"      .",diagnosis:"        ",recommendation:"          ."}:{reading:"",diagnosis:"",recommendation:""},Q=ne=>E[ne]||J(ne),U=({section:ne})=>e.jsx("button",{onClick:w=>{w.stopPropagation(),o(ne)},className:"absolute top-4 left-4 p-2 bg-slate-100 hover:bg-indigo-100 text-slate-500 hover:text-indigo-600 rounded-full transition-all duration-300 opacity-0 group-hover:opacity-100 transform scale-90 group-hover:scale-100 z-10 shadow-sm",children:e.jsx(en,{size:18})}),ae=()=>{if(!i)return null;const ne=Dv[i],w=Q(i);let D=null,V=null;switch(i){case"citizenMatrix":V=e.jsx(rs,{size:24,className:"text-blue-500"}),D=e.jsx("div",{className:"h-full flex flex-col items-center justify-center w-full p-4 relative",children:e.jsxs("div",{className:"flex flex-col gap-4 items-center w-full max-w-5xl justify-center",children:[f&&e.jsx("div",{className:"fixed z-[9999] pointer-events-none transform -translate-x-1/2 mb-2 transition-all duration-200",style:{left:f.x,top:f.y,marginTop:f.y<250?"20px":"-100%",transform:f.y<250?"translate(-50%, 0)":"translate(-50%, -100%)"},children:e.jsxs("div",{className:"bg-slate-900 border border-slate-500 rounded-xl shadow-[0_0_30px_rgba(0,0,0,0.5)] p-4 w-64 text-white relative",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3 border-b border-slate-700 pb-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-700 flex items-center justify-center font-bold text-xs",children:f.name.charAt(0)}),e.jsx("div",{className:"font-bold text-sm truncate",children:f.name})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-[10px] text-slate-400 mb-1",children:[e.jsx("span",{children:" (/)"}),e.jsxs("span",{className:"text-blue-400",children:[f.knowledge.toFixed(0),"%"]})]}),e.jsx("div",{className:"h-1.5 bg-slate-800 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-blue-500",style:{width:`${f.knowledge}%`}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-[10px] text-slate-400 mb-1",children:[e.jsx("span",{children:" (/)"}),e.jsxs("span",{className:"text-emerald-400",children:[f.practice.toFixed(0),"%"]})]}),e.jsx("div",{className:"h-1.5 bg-slate-800 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-emerald-500",style:{width:`${f.practice}%`}})})]})]})]})}),e.jsxs("div",{className:"relative w-[500px] h-[500px] bg-slate-800/50 rounded-2xl border border-slate-700 shadow-2xl shrink-0 overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 z-10",children:[e.jsx("div",{className:"absolute top-0 right-0 w-1/2 h-1/2 border-b border-l border-slate-600/30 cursor-help hover:bg-white/5 transition-colors",onMouseEnter:()=>b({title:"  ()",desc:"    .",x:"75%",y:"25%"}),onMouseLeave:()=>b(null)}),e.jsx("div",{className:"absolute bottom-0 left-0 w-1/2 h-1/2 border-t border-r border-slate-600/30 cursor-help hover:bg-white/5 transition-colors",onMouseEnter:()=>b({title:" ",desc:"      .",x:"25%",y:"75%"}),onMouseLeave:()=>b(null)}),e.jsx("div",{className:"absolute top-0 left-0 w-1/2 h-1/2 cursor-help hover:bg-white/5 transition-colors",onMouseEnter:()=>b({title:" ",desc:"      .",x:"25%",y:"25%"}),onMouseLeave:()=>b(null)}),e.jsx("div",{className:"absolute bottom-0 right-0 w-1/2 h-1/2 cursor-help hover:bg-white/5 transition-colors",onMouseEnter:()=>b({title:" ",desc:"      .",x:"75%",y:"75%"}),onMouseLeave:()=>b(null)})]}),e.jsx("div",{className:"absolute inset-0 z-10 pointer-events-none bg-[linear-gradient(rgba(255,255,255,0.05)_1px,transparent_1px),linear-gradient(90deg,rgba(255,255,255,0.05)_1px,transparent_1px)] bg-[size:10%_10%]"}),e.jsx("div",{className:"absolute top-0 bottom-0 left-1/2 w-px bg-slate-500/50 border-r border-dashed border-slate-500/50 pointer-events-none z-10"}),e.jsx("div",{className:"absolute left-0 right-0 top-1/2 h-px bg-slate-500/50 border-b border-dashed border-slate-500/50 pointer-events-none z-10"}),m&&!f&&e.jsx("div",{className:"absolute z-20 transform -translate-x-1/2 -translate-y-1/2 pointer-events-none text-center",style:{left:m.x,top:m.y},children:e.jsxs("div",{className:"bg-slate-900/90 backdrop-blur border border-indigo-500/50 rounded-xl p-3 shadow-2xl animate-in zoom-in-95 duration-200",children:[e.jsx("h4",{className:"text-indigo-300 font-bold text-lg mb-1",children:m.title}),e.jsx("p",{className:"text-xs text-slate-300 whitespace-nowrap",children:m.desc})]})}),e.jsx("div",{className:"absolute inset-6 z-30 pointer-events-none",children:q.points.map((Y,le)=>{let _="bg-slate-400";return Y.x>=50&&Y.y>=50?_="bg-emerald-400 ring-4 ring-emerald-500/20":Y.x<50&&Y.y<50?_="bg-red-400 ring-4 ring-red-500/20":Y.x>=50&&Y.y<50?_="bg-yellow-400 ring-4 ring-yellow-500/20":_="bg-blue-400 ring-4 ring-blue-500/20",e.jsx("div",{className:"absolute w-8 h-8 -ml-4 -mb-4 flex items-center justify-center cursor-pointer group z-30 hover:z-50 pointer-events-auto",style:{left:`${Y.x}%`,bottom:`${Y.y}%`},onMouseEnter:M=>{const j=M.currentTarget.getBoundingClientRect();x({x:j.left+j.width/2,y:j.top,name:Y.name,knowledge:Y.x,practice:Y.y})},onMouseLeave:()=>x(null),children:e.jsx("div",{className:`w-3 h-3 rounded-full shadow-md border border-white/50 transition-transform duration-200 group-hover:scale-150 ${_}`})},le)})}),e.jsx("div",{className:"absolute bottom-1 right-2 text-[10px] text-blue-300 font-bold bg-slate-900/80 px-2 py-1 rounded z-10 pointer-events-none",children:"  (/) "}),e.jsx("div",{className:"absolute top-2 left-1 text-[10px] text-emerald-300 font-bold bg-slate-900/80 px-2 py-1 rounded writing-vertical z-10 pointer-events-none",children:"  "})]})]})});break;case"institutionalAwareness":V=e.jsx(Xa,{size:24,className:"text-blue-500"}),D=e.jsx("div",{className:"h-full flex items-center justify-center p-4 w-full",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsxs("span",{className:"text-8xl font-bold text-blue-500 font-serif",children:[F.toFixed(0),"%"]}),e.jsx("p",{className:"text-blue-200 text-xl",children:"  "})]})});break;case"activeCitizenship":V=e.jsx(Qm,{size:24,className:"text-emerald-500"}),D=e.jsx("div",{className:"h-full flex items-center justify-center p-4 w-full",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsxs("span",{className:"text-8xl font-bold text-emerald-500 font-serif",children:[$.toFixed(0),"%"]}),e.jsx("p",{className:"text-emerald-200 text-xl",children:"  "})]})});break;case"democracyIndex":V=e.jsx(Km,{size:24,className:"text-purple-500"}),D=e.jsx("div",{className:"h-full flex items-center justify-center p-4 w-full",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsxs("span",{className:"text-8xl font-bold text-purple-500 font-serif",children:[B.toFixed(0),"%"]}),e.jsx("p",{className:"text-purple-200 text-xl",children:"  "})]})});break}return e.jsxs("div",{className:"fixed inset-0 z-[100] bg-slate-950 text-white flex flex-col md:flex-row animate-in zoom-in-95 duration-300 overflow-hidden",children:[e.jsx("button",{onClick:()=>o(null),className:"absolute top-4 left-4 p-2 bg-white/10 hover:bg-white/20 rounded-full z-50 text-white transition-all",children:e.jsx(tn,{size:24})}),e.jsxs("div",{className:"w-full md:w-[400px] lg:w-[35%] bg-slate-900 border-l border-slate-800 flex flex-col shadow-2xl relative z-40 order-2 md:order-1 h-full",children:[e.jsxs("div",{className:"p-8 pb-6 border-b border-slate-800 shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"p-3 bg-slate-800 rounded-xl border border-slate-700 shadow-inner",children:V}),e.jsx("h2",{className:"text-2xl font-bold text-white font-serif",children:ne.title})]}),e.jsx("p",{className:"text-slate-400 text-sm",children:"   "})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-8 pt-6 custom-scrollbar",children:[e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"relative pl-4 border-r-2 border-slate-500/30 pr-4 bg-slate-800/30 p-4 rounded-l-xl",children:[e.jsxs("h4",{className:"text-slate-300 font-bold uppercase text-xs mb-2 flex items-center gap-2",children:[e.jsx(it,{size:14}),"  "]}),e.jsx("p",{className:"text-slate-400 leading-relaxed text-xs text-justify font-light",children:ne.concept})]}),e.jsxs("div",{className:"relative pl-4 border-r-2 border-indigo-500/50 pr-4",children:[e.jsxs("h4",{className:"text-indigo-400 font-bold uppercase text-xs mb-2 flex items-center gap-2",children:[e.jsx($t,{size:14}),"   "]}),e.jsx("p",{className:"text-slate-300 leading-relaxed text-sm text-justify",children:w.reading})]}),e.jsxs("div",{className:"relative pl-4 border-r-2 border-amber-500/50 pr-4 bg-amber-500/5 p-4 rounded-l-xl",children:[e.jsxs("h4",{className:"text-amber-400 font-bold uppercase text-xs mb-2 flex items-center gap-2",children:[e.jsx(Qt,{size:14}),"  "]}),e.jsx("p",{className:"text-slate-200 leading-relaxed text-sm font-medium text-justify",children:w.diagnosis})]}),e.jsxs("div",{className:"relative pl-4 border-r-2 border-emerald-500/50 pr-4",children:[e.jsxs("h4",{className:"text-emerald-400 font-bold uppercase text-xs mb-2 flex items-center gap-2",children:[e.jsx(vt,{size:14})," "]}),e.jsx("p",{className:"text-slate-300 leading-relaxed text-sm text-justify",children:w.recommendation})]})]}),e.jsx("div",{className:"mt-8 pt-6 border-t border-slate-800 text-center",children:e.jsx("p",{className:"text-xs text-slate-500",children:"     2025"})})]})]}),e.jsxs("div",{className:"flex-1 bg-gradient-to-br from-slate-900 to-slate-950 flex flex-col relative overflow-hidden order-1 md:order-2 h-full",children:[e.jsx("div",{className:"absolute inset-0 opacity-10",style:{backgroundImage:"radial-gradient(circle at 2px 2px, white 1px, transparent 0)",backgroundSize:"40px 40px"}}),e.jsx("div",{className:"w-full z-20 p-4 shrink-0 flex justify-center",children:e.jsxs("div",{className:"bg-white/5 backdrop-blur-md rounded-lg p-3 border border-white/10 relative overflow-hidden max-w-xl w-full flex items-center gap-4",children:[e.jsx("div",{className:"p-2 bg-indigo-500/20 rounded-lg border border-white/10",children:e.jsx(An,{size:16,className:"text-indigo-300"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-[10px] font-bold text-indigo-300 uppercase mb-0.5",children:" "}),e.jsx("p",{className:"text-xs text-slate-300 leading-relaxed font-mono opacity-90",children:ne.method})]})]})}),e.jsx("div",{className:"relative z-10 w-full flex-1 flex items-center justify-center min-h-0 p-4 overflow-hidden",children:D})]})]})},se=()=>!C||!y?null:e.jsx(ob,{section:C,initialData:Q(C),onSave:ne=>P(C,ne),onReset:()=>O(C),onClose:()=>A(null)});return K===0?e.jsx("div",{className:"text-center p-10 text-gray-400",children:"   "}):e.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-700 pb-24 relative",children:[c&&e.jsxs("div",{className:"fixed z-[9999] pointer-events-none bg-slate-900 text-white px-3 py-2 rounded-lg shadow-xl text-xs max-w-xs border border-slate-700",style:{left:c.x,top:c.y,transform:"translate(-50%, -100%)"},children:[c.title&&e.jsx("div",{className:"font-bold border-b border-slate-600 pb-1 mb-1 text-yellow-400",children:c.title}),e.jsx("div",{children:c.text})]}),ae(),se(),e.jsxs("div",{className:"bg-gradient-to-r from-slate-900 to-cyan-900 text-white p-8 rounded-3xl shadow-xl relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-5",children:e.jsx(Xa,{size:300})}),e.jsx("div",{className:"relative z-10 flex flex-col md:flex-row justify-between items-center gap-6",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 text-cyan-400 font-bold uppercase tracking-wider text-xs",children:[e.jsx(is,{size:14}),"  "]}),e.jsx("h2",{className:"text-3xl font-bold font-serif mb-2",children:"  ( )"}),e.jsxs("p",{className:"text-slate-300 text-sm flex items-center gap-2",children:[e.jsx(Et,{size:16})," ",l]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-slate-200 cursor-pointer hover:shadow-lg transition-all group relative lg:col-span-2",onClick:()=>o("citizenMatrix"),children:[e.jsx(U,{section:"citizenMatrix"}),e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-lg text-slate-800 flex items-center gap-2",children:[e.jsx(rs,{className:"text-blue-600",size:20}),"   ( vs )"]}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"    "})]}),e.jsx("span",{className:"bg-blue-100 text-blue-700 text-xs px-3 py-1 rounded-full font-bold",children:" "})]}),e.jsxs("div",{className:"h-48 relative border-l border-b border-slate-300 mx-4 bg-white/50 rounded-tr-xl",children:[e.jsx("div",{className:"absolute top-0 right-0 w-1/2 h-1/2 bg-emerald-500/5 rounded-tr-xl"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-1/2 h-1/2 bg-red-500/5"}),e.jsx("div",{className:"absolute inset-0",children:q.points.map((ne,w)=>e.jsx("div",{className:"absolute w-2 h-2 rounded-full",style:{left:`${ne.x}%`,bottom:`${ne.y}%`,backgroundColor:ne.x>=50&&ne.y>=50?"#10b981":ne.x<50&&ne.y<50?"#f43f5e":ne.x>=50?"#facc15":"#60a5fa",opacity:.6}},w))}),e.jsx("div",{className:"absolute -bottom-6 w-full text-center text-[10px] text-slate-500 font-bold",children:"  ()"}),e.jsx("div",{className:"absolute -left-8 top-1/2 -rotate-90 text-[10px] text-slate-500 font-bold",children:" ()"})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-slate-200 cursor-pointer hover:shadow-lg transition-all group relative",onClick:()=>o("institutionalAwareness"),children:[e.jsx(U,{section:"institutionalAwareness"}),e.jsx("div",{className:"flex justify-between items-start mb-6",children:e.jsxs("h3",{className:"font-bold text-lg text-slate-800 flex items-center gap-2",children:[e.jsx(Xa,{className:"text-blue-600",size:20}),"  "]})}),e.jsxs("div",{className:"text-center py-6",children:[e.jsxs("span",{className:"text-5xl font-bold text-blue-600 font-serif",children:[F.toFixed(0),"%"]}),e.jsx("p",{className:"text-xs text-slate-400 mt-2",children:"  "})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-slate-200 cursor-pointer hover:shadow-lg transition-all group relative",onClick:()=>o("activeCitizenship"),children:[e.jsx(U,{section:"activeCitizenship"}),e.jsx("div",{className:"flex justify-between items-start mb-6",children:e.jsxs("h3",{className:"font-bold text-lg text-slate-800 flex items-center gap-2",children:[e.jsx(Qm,{className:"text-emerald-600",size:20}),"  "]})}),e.jsxs("div",{className:"text-center py-6",children:[e.jsxs("span",{className:"text-5xl font-bold text-emerald-600 font-serif",children:[$.toFixed(0),"%"]}),e.jsx("p",{className:"text-xs text-slate-400 mt-2",children:"  "})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-slate-200 cursor-pointer hover:shadow-lg transition-all group relative lg:col-span-2",onClick:()=>o("democracyIndex"),children:[e.jsx(U,{section:"democracyIndex"}),e.jsx("div",{className:"flex justify-between items-start mb-6",children:e.jsxs("h3",{className:"font-bold text-lg text-slate-800 flex items-center gap-2",children:[e.jsx(Km,{className:"text-purple-600",size:20}),"   "]})}),e.jsxs("div",{className:"relative pt-2 px-4",children:[e.jsxs("div",{className:"flex justify-between text-sm font-bold mb-2",children:[e.jsx("span",{className:"text-slate-600",children:"  "}),e.jsxs("span",{className:"text-purple-600",children:[B.toFixed(1),"%"]})]}),e.jsx("div",{className:"h-4 bg-slate-100 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-purple-500 rounded-full transition-all duration-1000",style:{width:`${B}%`}})})]})]})]}),e.jsx("div",{className:"fixed bottom-6 left-1/2 transform -translate-x-1/2 z-50",children:e.jsxs("button",{onClick:()=>N(!0),className:"flex items-center gap-2 bg-slate-800 hover:bg-slate-700 text-white px-8 py-4 rounded-2xl font-bold text-sm transition-all shadow-xl hover:shadow-2xl border-2 border-slate-700 hover:border-slate-600 hover:scale-105 group",children:[e.jsx(Tt,{size:18,className:"group-hover:rotate-12 transition-transform"}),e.jsx("span",{children:" "})]})}),y&&e.jsx("div",{className:"fixed inset-0 z-[110] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 animate-in fade-in",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full p-6 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6 border-b pb-4",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-xl text-slate-800 flex items-center gap-2",children:[e.jsx(Tt,{size:24,className:"text-indigo-600"}),"  "]}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"   "})]}),e.jsx("button",{onClick:()=>N(!1),className:"text-slate-400 hover:text-red-500",children:e.jsx(Ze,{})})]}),C?e.jsx(ob,{section:C,initialData:Q(C),onSave:ne=>P(C,ne),onReset:()=>O(C),onClose:()=>A(null)}):e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("button",{onClick:()=>A("citizenMatrix"),className:"p-4 bg-slate-50 hover:bg-indigo-50 border rounded-xl text-right transition-colors group col-span-2",children:e.jsx("span",{className:"font-bold text-slate-700 block group-hover:text-indigo-700",children:" "})}),e.jsx("button",{onClick:()=>A("institutionalAwareness"),className:"p-4 bg-slate-50 hover:bg-indigo-50 border rounded-xl text-right transition-colors group",children:e.jsx("span",{className:"font-bold text-slate-700 block group-hover:text-indigo-700",children:" "})}),e.jsx("button",{onClick:()=>A("activeCitizenship"),className:"p-4 bg-slate-50 hover:bg-indigo-50 border rounded-xl text-right transition-colors group",children:e.jsx("span",{className:"font-bold text-slate-700 block group-hover:text-indigo-700",children:" "})}),e.jsx("button",{onClick:()=>A("democracyIndex"),className:"p-4 bg-slate-50 hover:bg-indigo-50 border rounded-xl text-right transition-colors group col-span-2",children:e.jsx("span",{className:"font-bold text-slate-700 block group-hover:text-indigo-700",children:" "})})]})]})})]})},ob=({section:n,initialData:t,onSave:l,onReset:i,onClose:o})=>{const[c,u]=k.useState(t),f=()=>Dv[n].title;return e.jsxs("div",{className:"space-y-4 animate-in slide-in-from-right-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("button",{onClick:o,className:"text-xs text-slate-500 hover:text-slate-800 flex items-center gap-1",children:[e.jsx(Hs,{size:12,className:"rotate-180"}),"  "]}),e.jsx("span",{className:"text-sm font-bold bg-indigo-100 text-indigo-700 px-3 py-1 rounded-full",children:f()})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-700 mb-1",children:"  "}),e.jsx(Pe,{value:c.reading,onChange:x=>u({...c,reading:x}),className:"w-full border rounded-lg p-3 text-sm bg-slate-50 focus:bg-white focus:ring-2 focus:ring-indigo-500 max-h-60 overflow-y-auto",minHeight:"min-h-[120px]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-700 mb-1",children:" "}),e.jsx(Pe,{value:c.diagnosis,onChange:x=>u({...c,diagnosis:x}),className:"w-full border rounded-lg p-3 text-sm bg-amber-50 focus:bg-white focus:ring-2 focus:ring-amber-500 max-h-60 overflow-y-auto",minHeight:"min-h-[120px]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-700 mb-1",children:""}),e.jsx(Pe,{value:c.recommendation,onChange:x=>u({...c,recommendation:x}),className:"w-full border rounded-lg p-3 text-sm bg-emerald-50 focus:bg-white focus:ring-2 focus:ring-emerald-500 max-h-60 overflow-y-auto",minHeight:"min-h-[120px]"})]}),e.jsxs("div",{className:"flex justify-between pt-4 border-t",children:[e.jsxs("button",{onClick:i,className:"text-red-500 text-xs font-bold flex items-center gap-1 hover:underline",children:[e.jsx(Tn,{size:12}),"   "]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:o,className:"px-4 py-2 text-slate-500 font-bold hover:bg-slate-100 rounded-lg",children:""}),e.jsxs("button",{onClick:()=>l(c),className:"px-6 py-2 bg-indigo-600 text-white font-bold rounded-lg hover:bg-indigo-700 shadow-md flex items-center gap-2",children:[e.jsx(Zt,{size:16}),"  "]})]})]})]})},_A=({records:n,className:t,schoolName:l})=>{const[i,o]=k.useState(!1),c=k.useMemo(()=>{const f={};return n.forEach(m=>{const b=m.subject;f[b]||(f[b]={totalScore:0,maxScore:0,studentCount:m.students.length,criteria:[]});const y={};m.students.forEach(N=>{let C=0,A=0;Object.keys(N.results).forEach(E=>{Object.keys(N.results[E]).forEach(R=>{const P=N.results[E][parseInt(R)],O=`${E}-${R}`;y[O]||(y[O]={label:` ${R}`,failCount:0,total:0}),y[O].total++,P&&(A+=3,P==="A"?C+=3:P==="B"?C+=2:P==="C"?C+=1:y[O].failCount++)})}),f[b].totalScore+=C,f[b].maxScore+=A}),f[b].criteria=Object.values(y).map(N=>({...N,failRate:N.total>0?N.failCount/N.total*100:0})).sort((N,C)=>C.failRate-N.failRate)}),{subjectScores:Object.entries(f).map(([m,b])=>{const y=b.maxScore>0?b.totalScore/b.maxScore*100:0;return{subject:m,pct:y,criteria:b.criteria}})}},[n]),u=k.useMemo(()=>{const f=c.subjectScores;if(f.length<2)return null;const x=f.find(E=>E.subject.includes("")),m=f.find(E=>E.subject.includes("")),b=[];let y="",N="text-blue-600",C=Gs;if(x&&m){const E=x.pct-m.pct;E>15?(y=" /",N="text-green-600",C=Vt,b.push("             .          .")):E<-15?(y=" /",N="text-purple-600",C=Ds,b.push("       .                .")):x.pct>75&&m.pct>75?(y="  ",N="text-emerald-600",C=di,b.push("     ()   .     .")):x.pct<50&&m.pct<50&&(y="  ",N="text-red-600",C=jr,b.push("    .              ."))}const A=[];return f.forEach(E=>{E.criteria.length>0&&E.criteria[0].failRate>60&&A.push({subject:E.subject,rate:E.criteria[0].failRate})}),A.length>0&&b.push(` " " .   (${A[0].subject})  ${Math.round(A[0].rate)}%      .           (      ).`),{profileType:y,color:N,icon:C,insights:b}},[c]);return n.length===0?null:(Math.max(...c.subjectScores.map(f=>f.pct),100),e.jsxs("div",{className:"bg-white rounded-3xl shadow-xl border border-slate-200 overflow-hidden mb-8 animate-in fade-in slide-in-from-top-4 duration-700",children:[e.jsxs("div",{className:"bg-slate-900 text-white p-6 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-full opacity-10",children:e.jsx(hl,{size:400,className:"absolute -left-20 -top-20"})}),e.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row justify-between items-center gap-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 text-indigo-300 font-bold uppercase text-xs mb-1",children:[e.jsx(Qt,{size:14}),"   "]}),e.jsx("h2",{className:"text-2xl font-bold font-serif",children:"  "}),e.jsxs("p",{className:"text-slate-400 text-sm",children:[l," - : ",e.jsx("span",{className:"text-white font-bold",children:t})]})]}),u&&e.jsxs("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-xl p-3 flex items-center gap-4 min-w-[250px]",children:[e.jsx("div",{className:`w-12 h-12 rounded-full bg-white flex items-center justify-center ${u.color}`,children:e.jsx(u.icon,{size:24})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] text-slate-300 uppercase font-bold",children:" "}),e.jsx("p",{className:"text-lg font-bold",children:u.profileType})]})]})]})]}),e.jsxs("div",{className:"p-6 md:p-8 grid grid-cols-1 lg:grid-cols-2 gap-10",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-gray-800 mb-6 flex items-center gap-2",children:[e.jsx(Kl,{size:20,className:"text-blue-600"}),"  (  )"]}),e.jsxs("div",{className:"space-y-5",children:[c.subjectScores.map((f,x)=>e.jsxs("div",{className:"group",children:[e.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[e.jsxs("span",{className:"font-bold text-gray-700 flex items-center gap-2",children:[f.subject.includes("")?e.jsx(Vt,{size:14,className:"text-green-500"}):f.subject.includes("")?e.jsx(Ds,{size:14,className:"text-purple-500"}):e.jsx("div",{className:"w-3.5 h-3.5 rounded-full bg-slate-400"}),f.subject]}),e.jsxs("span",{className:`font-bold ${f.pct>75?"text-emerald-600":f.pct<50?"text-red-500":"text-slate-600"}`,children:[f.pct.toFixed(1),"%"]})]}),e.jsxs("div",{className:"h-4 bg-slate-100 rounded-full overflow-hidden relative",children:[e.jsx("div",{className:"absolute top-0 bottom-0 left-[25%] w-px bg-white/50"}),e.jsx("div",{className:"absolute top-0 bottom-0 left-[50%] w-px bg-white/50"}),e.jsx("div",{className:"absolute top-0 bottom-0 left-[75%] w-px bg-white/50"}),e.jsx("div",{className:`h-full rounded-full transition-all duration-1000 ${f.pct>75?"bg-gradient-to-r from-emerald-400 to-emerald-600":f.pct<50?"bg-gradient-to-r from-red-400 to-red-600":"bg-gradient-to-r from-blue-400 to-blue-600"}`,style:{width:`${f.pct}%`}})]}),f.pct<50&&e.jsx("p",{className:"text-[10px] text-red-500 mt-1 font-bold animate-pulse",children:"     "})]},x)),c.subjectScores.length===1&&e.jsxs("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-xl text-xs text-yellow-800 flex items-start gap-2",children:[e.jsx(wb,{size:16,className:"shrink-0 mt-0.5"}),e.jsx("p",{children:"           (  ...)   ."})]})]})]}),e.jsxs("div",{className:"bg-slate-50 rounded-2xl border border-slate-200 p-6 relative",children:[e.jsx("div",{className:"absolute top-4 left-4 text-slate-200",children:e.jsx(Qt,{size:80})}),e.jsxs("h3",{className:"font-bold text-gray-800 mb-4 flex items-center gap-2 relative z-10",children:[e.jsx(_h,{size:18,className:"text-amber-500"}),"  (Expert Insights)"]}),u?e.jsxs("div",{className:"space-y-4 relative z-10",children:[u.insights.map((f,x)=>e.jsxs("div",{className:"flex gap-3 items-start bg-white p-3 rounded-xl shadow-sm border border-slate-100",children:[e.jsx("div",{className:"mt-1 w-2 h-2 rounded-full bg-indigo-500 shrink-0"}),e.jsx("p",{className:"text-sm text-slate-700 leading-relaxed font-medium text-justify",children:f})]},x)),!i&&e.jsx("div",{className:"p-4 bg-indigo-50 border border-indigo-100 rounded-xl text-center cursor-pointer hover:bg-indigo-100 transition-colors",onClick:()=>o(!0),children:e.jsxs("span",{className:"text-xs font-bold text-indigo-700 flex items-center justify-center gap-2",children:["    ",e.jsx(Fl,{size:14})]})}),i&&e.jsxs("div",{className:"space-y-2 animate-in slide-in-from-top-2",children:[e.jsx("h4",{className:"text-xs font-bold text-slate-400 uppercase mt-4",children:" :"}),e.jsxs("ul",{className:"space-y-2",children:[e.jsx("li",{className:"text-xs text-slate-600 bg-white p-2 rounded border border-slate-100",children:"         ."}),e.jsx("li",{className:"text-xs text-slate-600 bg-white p-2 rounded border border-slate-100",children:"           ."}),e.jsx("li",{className:"text-xs text-slate-600 bg-white p-2 rounded border border-slate-100",children:'    " "       .'})]})]})]}):e.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center text-slate-400 relative z-10",children:[e.jsx("p",{className:"mb-2",children:"    ."}),e.jsx("p",{className:"text-xs",children:"      ."})]})]})]})]}))},SA=({onClose:n})=>{const[t,l]=k.useState("general"),i=()=>{switch(t){case"general":return e.jsxs("div",{className:"space-y-8 animate-in fade-in",children:[e.jsxs("div",{className:"bg-blue-50 p-6 rounded-2xl border border-blue-100",children:[e.jsxs("h3",{className:"text-lg font-bold text-blue-800 mb-4 flex items-center gap-2",children:[e.jsx(Ds,{size:20})," 1.   ( - Quantification)"]}),e.jsx("p",{className:"text-slate-700 leading-relaxed mb-4 text-sm",children:"          ()    ()   .   :"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center",children:[e.jsxs("div",{className:"bg-white p-3 rounded-lg border border-emerald-200 shadow-sm",children:[e.jsx("span",{className:"block font-bold text-emerald-600 text-lg",children:""}),e.jsx("span",{className:"text-xs text-slate-500",children:"  = 3 "})]}),e.jsxs("div",{className:"bg-white p-3 rounded-lg border border-blue-200 shadow-sm",children:[e.jsx("span",{className:"block font-bold text-blue-600 text-lg",children:""}),e.jsx("span",{className:"text-xs text-slate-500",children:"  = 2 "})]}),e.jsxs("div",{className:"bg-white p-3 rounded-lg border border-orange-200 shadow-sm",children:[e.jsx("span",{className:"block font-bold text-orange-600 text-lg",children:""}),e.jsx("span",{className:"text-xs text-slate-500",children:"  = 1 "})]}),e.jsxs("div",{className:"bg-white p-3 rounded-lg border border-red-200 shadow-sm",children:[e.jsx("span",{className:"block font-bold text-red-600 text-lg",children:""}),e.jsx("span",{className:"text-xs text-slate-500",children:"  = 0"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-800 flex items-center gap-2",children:[e.jsx(Gs,{size:20,className:"text-purple-600"})," 2.   (Homogeneity Index)"]}),e.jsxs("div",{className:"bg-white p-5 rounded-xl border border-slate-200 shadow-sm",children:[e.jsx("h4",{className:"font-bold text-sm text-slate-700 mb-2",children:" "}),e.jsxs("p",{className:"text-sm text-slate-600 leading-relaxed mb-3",children:["   ",e.jsx("strong",{children:"  (Standard Deviation)"}),"  .             ."]}),e.jsxs("ul",{className:"list-disc list-inside text-sm text-slate-600 space-y-1 bg-slate-50 p-3 rounded-lg",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"  15:"}),"   (  )."]}),e.jsxs("li",{children:[e.jsx("strong",{children:" 15  25:"}),"   ( )."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"  25:"}),"   (   )."]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-800 flex items-center gap-2",children:[e.jsx(Sr,{size:20,className:"text-indigo-600"})," 3.   ( )"]}),e.jsx("div",{className:"bg-white p-5 rounded-xl border border-slate-200 shadow-sm",children:e.jsxs("p",{className:"text-sm text-slate-600 leading-relaxed",children:["   .   ( )      ()     ()    ().",e.jsx("br",{}),e.jsx("strong",{children:" :"}),"    ( + )    ( + )."]})})]})]});case"cross":return e.jsx("div",{className:"space-y-8 animate-in fade-in",children:e.jsxs("div",{className:"bg-indigo-50 p-6 rounded-2xl border border-indigo-100",children:[e.jsxs("h3",{className:"text-lg font-bold text-indigo-900 mb-4 flex items-center gap-2",children:[e.jsx(ni,{size:20}),"   ( )"]}),e.jsxs("p",{className:"text-slate-700 leading-relaxed mb-4 text-sm text-justify",children:["          ",e.jsx("strong",{children:" "}),"  ",e.jsx("strong",{children:" "}),".     :"]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-indigo-200",children:[e.jsx("h4",{className:"font-bold text-sm text-indigo-700 mb-2",children:"1.    (X):  "}),e.jsxs("p",{className:"text-xs text-slate-600 leading-loose",children:['   " "    (4 ).',e.jsx("br",{}),"  = 12 .",e.jsx("br",{}),e.jsx("strong",{children:":"})," (   / 12)  100.",e.jsx("br",{}),":   (   ) = 10    83% ( )."]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-indigo-200",children:[e.jsx("h4",{className:"font-bold text-sm text-indigo-700 mb-2",children:"2.    (Y):  "}),e.jsxs("p",{className:"text-xs text-slate-600 leading-loose",children:['   " "    (3 ).',e.jsx("br",{}),"  = 9 .",e.jsx("br",{}),e.jsx("strong",{children:":"})," (   / 9)  100.",e.jsx("br",{}),":   (  ) = 2    22% ()."]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-indigo-200",children:[e.jsx("h4",{className:"font-bold text-sm text-indigo-700 mb-2",children:"3.   (  )"}),e.jsx("p",{className:"text-xs text-slate-600 leading-loose mb-2",children:"   : |  -  |."}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-emerald-500"}),e.jsx("span",{className:"text-xs font-bold",children:"  ( ):"}),e.jsx("span",{className:"text-xs text-slate-500",children:"   15 .    ."})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500"}),e.jsx("span",{className:"text-xs font-bold",children:"  ():"}),e.jsx("span",{className:"text-xs text-slate-500",children:" .     ."})]})]})]}),e.jsxs("div",{className:"bg-slate-800 text-white p-4 rounded-xl",children:[e.jsx("h4",{className:"font-bold text-sm text-amber-400 mb-3",children:"   :"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-xs",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-bold text-emerald-300 block mb-1",children:"   ( ):"}),"     ."]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-bold text-red-300 block mb-1",children:"   ( ):"}),"   (   )."]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-bold text-yellow-300 block mb-1",children:"   ( ):"}),"    (   )."]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-bold text-blue-300 block mb-1",children:"   (  ):"}),"      ."]})]})]})]})]})});case"math":return e.jsxs("div",{className:"space-y-8 animate-in fade-in",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-800 flex items-center gap-2",children:[e.jsx(Yl,{size:20,className:"text-teal-500"})," 1.   ( / )"]}),e.jsxs("div",{className:"bg-white p-5 rounded-xl border border-slate-200 shadow-sm text-sm text-slate-600 leading-relaxed text-justify",children:[e.jsxs("p",{className:"mb-2",children:[e.jsx("strong",{children:":"}),'   "  " ( )  " " ( ).']}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 bg-slate-50 p-3 rounded-lg border border-slate-100",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"  ():"}),"    ()      (/).       ."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"  ( ):"}),"       ()     ().    ."]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-800 flex items-center gap-2",children:[e.jsx(nc,{size:20,className:"text-purple-500"})," 2.   "]}),e.jsxs("div",{className:"bg-white p-5 rounded-xl border border-slate-200 shadow-sm text-sm text-slate-600 leading-relaxed text-justify",children:[e.jsxs("p",{className:"mb-2",children:[e.jsx("strong",{children:":"}),"    ( -   -  )."]}),e.jsx("p",{children:'        .    " " ( )     (0.5 = 1/2 = 50%).          " " (     ).'})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-800 flex items-center gap-2",children:[e.jsx(Jl,{size:20,className:"text-pink-500"})," 3.   "]}),e.jsx("div",{className:"bg-white p-5 rounded-xl border border-slate-200 shadow-sm text-sm text-slate-600 leading-relaxed text-justify",children:e.jsxs("p",{children:['    "   "     .',e.jsx("br",{}),e.jsx("strong",{children:":"}),"         .",e.jsx("br",{}),'  (   )      " "  .']})})]})]});case"language":return e.jsxs("div",{className:"space-y-8 animate-in fade-in",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-800 flex items-center gap-2",children:[e.jsx(Gs,{size:20,className:"text-indigo-500"})," 1.   ( )"]}),e.jsxs("div",{className:"bg-white p-5 rounded-xl border border-slate-200 shadow-sm text-sm text-slate-600 leading-relaxed text-justify",children:[e.jsxs("p",{className:"mb-2",children:[e.jsx("strong",{children:" :"}),'     " " (/)  "  "  .']}),e.jsx("p",{children:'     ( 90% /  40%)        (  )     .   " ".'})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-800 flex items-center gap-2",children:[e.jsx($t,{size:20,className:"text-purple-500"})," 2.  "]}),e.jsx("div",{className:"bg-white p-5 rounded-xl border border-slate-200 shadow-sm text-sm text-slate-600 leading-relaxed text-justify",children:e.jsx("p",{children:'      (     )           .    ""  "" .         .'})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-800 flex items-center gap-2",children:[e.jsx(ys,{size:20,className:"text-red-500"})," 3.   "]}),e.jsx("div",{className:"bg-white p-5 rounded-xl border border-slate-200 shadow-sm text-sm text-slate-600 leading-relaxed text-justify",children:e.jsxs("p",{children:[e.jsx("strong",{children:" :"}),'        ( -  )   " " ( )',e.jsx("strong",{children:""}),'  ()  " " .',e.jsx("br",{}),"              ()."]})})]})]})}};return e.jsx("div",{className:"fixed inset-0 z-[120] flex items-center justify-center p-4 bg-slate-900/80 backdrop-blur-sm animate-in fade-in",onClick:n,children:e.jsxs("div",{className:"bg-white w-full max-w-5xl h-[85vh] rounded-3xl shadow-2xl flex flex-col overflow-hidden",onClick:o=>o.stopPropagation(),children:[e.jsxs("div",{className:"bg-slate-50 p-6 border-b flex justify-between items-center shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-slate-900 text-white p-3 rounded-xl shadow-lg",children:e.jsx(tc,{size:24})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold font-serif text-slate-800",children:"   "}),e.jsx("p",{className:"text-sm text-slate-500",children:"    "})]})]}),e.jsx("button",{onClick:n,className:"p-2 hover:bg-slate-200 rounded-full transition-colors",children:e.jsx(Ze,{})})]}),e.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[e.jsxs("div",{className:"w-64 bg-slate-50 border-l border-slate-200 p-4 space-y-2 overflow-y-auto",children:[e.jsxs("button",{onClick:()=>l("general"),className:`w-full text-right px-4 py-3 rounded-xl text-sm font-bold flex items-center gap-3 transition-all ${t==="general"?"bg-white text-indigo-700 shadow-md ring-1 ring-indigo-100":"text-slate-500 hover:bg-white/50"}`,children:[e.jsx(Ds,{size:16}),"  "]}),e.jsxs("button",{onClick:()=>l("cross"),className:`w-full text-right px-4 py-3 rounded-xl text-sm font-bold flex items-center gap-3 transition-all ${t==="cross"?"bg-white text-indigo-700 shadow-md ring-1 ring-indigo-100":"text-slate-500 hover:bg-white/50"}`,children:[e.jsx(ni,{size:16}),"  (/)"]}),e.jsxs("button",{onClick:()=>l("math"),className:`w-full text-right px-4 py-3 rounded-xl text-sm font-bold flex items-center gap-3 transition-all ${t==="math"?"bg-white text-indigo-700 shadow-md ring-1 ring-indigo-100":"text-slate-500 hover:bg-white/50"}`,children:[e.jsx(nc,{size:16}),"  "]}),e.jsxs("button",{onClick:()=>l("language"),className:`w-full text-right px-4 py-3 rounded-xl text-sm font-bold flex items-center gap-3 transition-all ${t==="language"?"bg-white text-indigo-700 shadow-md ring-1 ring-indigo-100":"text-slate-500 hover:bg-white/50"}`,children:[e.jsx(Vt,{size:16}),"  "]})]}),e.jsx("div",{className:"flex-1 p-8 overflow-y-auto bg-white custom-scrollbar",children:i()})]})]})})},CA=({records:n,filters:t})=>{const{scope:l,selectedSchool:i,selectedLevel:o,selectedClass:c,selectedSubject:u}=t,[f,x]=k.useState(!1),m=k.useMemo(()=>n.filter(N=>o&&N.level!==o||u&&N.subject!==u?!1:l==="district"?!0:!((l==="school"||l==="class")&&N.schoolName!==i||l==="class"&&N.className!==c)),[n,l,i,o,c,u]),b=k.useMemo(()=>l!=="class"||!i||!c||!o?[]:n.filter(N=>N.schoolName===i&&N.className===c&&N.level===o),[n,l,i,c,o]),y=k.useMemo(()=>!(!o||!u||l==="school"&&!i||l==="class"&&(!i||!c)),[l,i,o,c,u]);return e.jsxs("div",{className:"flex flex-col h-full bg-slate-50/50 relative",children:[f&&e.jsx(SA,{onClose:()=>x(!1)}),e.jsxs("div",{className:"bg-white p-4 border-b flex justify-between items-center shadow-sm shrink-0",children:[e.jsxs("div",{className:"text-sm text-slate-500",children:[e.jsx("span",{className:"font-bold text-slate-700",children:" :"})," ",l==="district"?"":l==="school"?i:`${i} / ${c}`]}),e.jsxs("button",{onClick:()=>x(!0),className:"flex items-center gap-2 bg-indigo-50 text-indigo-700 px-4 py-2 rounded-lg text-xs font-bold hover:bg-indigo-100 transition-colors border border-indigo-200",children:[e.jsx(hc,{size:16}),"  "]})]}),e.jsx("div",{className:"flex-1 p-6 md:p-8 overflow-y-auto",children:y?e.jsxs("div",{className:"max-w-[1600px] mx-auto animate-in zoom-in-95 duration-500",children:[l==="class"&&e.jsx(_A,{records:b,className:c,schoolName:i}),o==="2AP"&&u.includes("")?e.jsx(xA,{records:m,scope:l,contextName:l==="district"?"":l==="school"?i:`${i} - ${c}`}):o==="2AP"&&u.includes("")?e.jsx(mA,{records:m,scope:l,contextName:l==="district"?"":l==="school"?i:`${i} - ${c}`}):o==="4AP"&&u.includes("")?e.jsx(pA,{records:m,scope:l,contextName:l==="district"?"":l==="school"?i:`${i} - ${c}`}):o==="4AP"&&u.includes("")?e.jsx(gA,{records:m,scope:l,contextName:l==="district"?"":l==="school"?i:`${i} - ${c}`}):o==="5AP"&&u.includes("")?e.jsx(vA,{records:m,scope:l,contextName:l==="district"?"":l==="school"?i:`${i} - ${c}`}):o==="5AP"&&u.includes("")?e.jsx(yA,{records:m,scope:l,contextName:l==="district"?"":l==="school"?i:`${i} - ${c}`}):o==="5AP"&&u.includes("")?e.jsx(NA,{records:m,allRecords:n,scope:l,contextName:l==="district"?"":l==="school"?i:`${i} - ${c}`}):o==="5AP"&&u.includes("")?e.jsx(jA,{records:m,allRecords:n,scope:l,contextName:l==="district"?"":l==="school"?i:`${i} - ${c}`}):o==="5AP"&&u.includes("")?e.jsx(wA,{records:m,scope:l,contextName:l==="district"?"":l==="school"?i:`${i} - ${c}`}):e.jsxs("div",{className:"bg-white rounded-3xl shadow-xl border border-slate-200 overflow-hidden min-h-[400px] flex flex-col",children:[e.jsx("div",{className:"bg-slate-900 text-white p-6 flex justify-between items-start",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold font-serif mb-1",children:` : ${u}`}),e.jsx("div",{className:"flex items-center gap-3 text-slate-400 text-sm",children:e.jsx("span",{className:"bg-slate-800 px-2 py-0.5 rounded text-white font-bold",children:o})})]})}),e.jsxs("div",{className:"flex-1 p-8 flex flex-col items-center justify-center text-center bg-slate-50/50",children:[e.jsx("div",{className:"w-24 h-24 bg-white rounded-full shadow-lg flex items-center justify-center mb-6",children:e.jsx(Sr,{size:48,className:"text-gray-400"})}),e.jsx("h3",{className:"text-xl font-bold text-slate-700 mb-2",children:" "}),e.jsxs("p",{className:"text-slate-500",children:["    ",e.jsxs("b",{children:[u," - ",o]}),"  .",e.jsx("br",{}),"     :",e.jsxs("ul",{className:"mt-2 text-sm text-slate-600 list-disc list-inside",children:[e.jsx("li",{children:"  ( )"}),e.jsx("li",{children:" ( )"}),e.jsx("li",{children:"  ( )"}),e.jsx("li",{children:" ( )"}),e.jsx("li",{children:"  ( )"}),e.jsx("li",{children:" ( )"}),e.jsx("li",{children:"  ( )"}),e.jsx("li",{children:" ( )"}),e.jsx("li",{children:"  ( )"})]})]})]})]})]}):e.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-slate-400 pb-20",children:[e.jsx("div",{className:"w-32 h-32 bg-slate-200 rounded-full flex items-center justify-center mb-6 opacity-50 animate-pulse",children:e.jsx(bh,{size:64,className:"text-slate-400"})}),e.jsx("h3",{className:"text-xl font-bold text-slate-600 mb-2",children:"   "}),e.jsxs("p",{className:"text-slate-400 max-w-sm text-center mb-6",children:["  ",e.jsx("b",{children:" "}),"       ."]})]})})]})},kA=({mode:n="detailed",records:t=[],globalRecords:l=[],level:i,subject:o})=>{const c=k.useMemo(()=>{if(!i||!o)return null;if(i==="2AP"){if(o.includes(""))return Fa;if(o.includes(""))return Ja}if(i==="4AP"){if(o.includes(""))return Ya;if(o.includes(""))return Ka}if(i==="5AP"){if(o.includes(""))return fh;if(o.includes(""))return mh;if(o.includes(""))return Zo;if(o.includes(""))return Wo;if(o.includes(""))return Pl}return null},[i,o]),u=k.useMemo(()=>t.flatMap(y=>y.students.map(N=>({...N,className:y.className,schoolName:y.schoolName}))).sort((y,N)=>y.fullName.localeCompare(N.fullName)),[t]),f=k.useMemo(()=>l?l.flatMap(y=>y.students.map(N=>({...N,schoolName:y.schoolName}))).sort((y,N)=>y.schoolName!==N.schoolName?y.schoolName.localeCompare(N.schoolName):y.number-N.number):[],[l]),x=k.useMemo(()=>{if(f.length===0)return[];const y=new Set;return f.forEach(C=>{Object.keys(C.subjects).forEach(A=>y.add(A))}),Array.from(y).sort((C,A)=>{const E=R=>R.includes("")?1:R.includes("")||R.includes("")?2:R.includes("")?3:R.includes("")?4:10;return E(C)-E(A)})},[f]),m=y=>{switch(y){case"A":return"bg-emerald-100 text-emerald-800 font-bold";case"B":return"bg-blue-100 text-blue-800 font-bold";case"C":return"bg-orange-100 text-orange-800 font-bold";case"D":return"bg-red-100 text-red-800 font-bold";default:return"bg-gray-50 text-gray-400"}},b=y=>y?{A:"",B:"",C:"",D:""}[y]||y:"-";return n==="detailed"?!i||!o?e.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-12 text-slate-400",children:[e.jsx(si,{size:64,className:"mb-4 opacity-20"}),e.jsx("p",{children:"         ."})]}):c?u.length===0?e.jsx("div",{className:"flex flex-col items-center justify-center h-full p-12 text-slate-400",children:e.jsx("p",{children:"         ."})}):e.jsxs("div",{className:"h-full flex flex-col bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden animate-in fade-in",children:[e.jsxs("div",{className:"p-4 border-b bg-slate-50 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"font-bold text-slate-800 text-lg flex items-center gap-2",children:[e.jsx(si,{size:20,className:"text-teal-600"}),"  "]}),e.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["     : ",e.jsx("span",{className:"font-bold text-teal-700",children:c.label})]})]}),e.jsxs("div",{className:"flex gap-2 text-[10px] font-bold",children:[e.jsx("span",{className:"bg-emerald-100 text-emerald-800 px-2 py-1 rounded",children:":  "}),e.jsx("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded",children:":  "}),e.jsx("span",{className:"bg-orange-100 text-orange-800 px-2 py-1 rounded",children:":  "}),e.jsx("span",{className:"bg-red-100 text-red-800 px-2 py-1 rounded",children:":  "})]})]}),e.jsx("div",{className:"flex-1 overflow-auto custom-scrollbar relative",children:e.jsxs("table",{className:"w-full text-sm text-right border-collapse min-w-max",children:[e.jsxs("thead",{className:"bg-slate-800 text-white sticky top-0 z-20 shadow-md",children:[e.jsxs("tr",{children:[e.jsx("th",{rowSpan:2,className:"p-3 border-l border-slate-600 w-12 text-center bg-slate-900 sticky right-0 z-30",children:"#"}),e.jsxs("th",{rowSpan:2,className:"p-3 border-l border-slate-600 min-w-[200px] text-right bg-slate-900 sticky right-12 z-30",children:[" ",e.jsx("span",{className:"block text-[10px] font-normal text-slate-400 mt-1",children:" / "})]}),c.competencies.map(y=>e.jsx("th",{colSpan:y.criteria.length,className:"p-2 text-center border-l border-b border-slate-600 text-xs font-bold bg-slate-800",children:y.label},y.id))]}),e.jsx("tr",{children:c.competencies.map(y=>y.criteria.map(N=>e.jsxs("th",{className:"p-2 text-center border-l border-slate-600 w-12 bg-slate-700 hover:bg-slate-600 transition-colors group cursor-help relative",children:[N.id,e.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 w-48 bg-black text-white text-[10px] p-2 rounded opacity-0 group-hover:opacity-100 pointer-events-none transition-opacity z-50 font-normal leading-relaxed",children:[N.label,e.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 border-4 border-transparent border-t-black"})]})]},`${y.id}-${N.id}`)))})]}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:u.map((y,N)=>e.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[e.jsx("td",{className:"p-2 text-center border-l border-slate-100 text-slate-400 font-mono text-xs sticky right-0 bg-white z-10",children:N+1}),e.jsxs("td",{className:"p-2 border-l border-slate-100 sticky right-12 bg-white z-10 shadow-[2px_0_5px_-2px_rgba(0,0,0,0.1)]",children:[e.jsx("div",{className:"font-bold text-slate-800",children:y.fullName}),e.jsxs("div",{className:"text-[10px] text-slate-500 flex items-center gap-1",children:[e.jsx(vs,{size:10})," ",y.schoolName," - ",y.className]})]}),c.competencies.map(C=>C.criteria.map(A=>{var R,P;const E=(P=(R=y.results)==null?void 0:R[C.id])==null?void 0:P[A.id];return e.jsx("td",{className:`p-2 text-center border-l border-slate-100 text-xs font-serif ${m(E)}`,children:b(E)},`${y.id}-${C.id}-${A.id}`)}))]},`${y.id}-${N}`))})]})})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-12 text-slate-400",children:[e.jsx(Os,{size:64,className:"mb-4 opacity-20 text-amber-500"}),e.jsxs("p",{children:["    (",o," - ",i,")     ."]})]}):n==="global"?f.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-12 text-slate-400",children:[e.jsx(Yu,{size:64,className:"mb-4 opacity-20"}),e.jsx("p",{children:"       ."})]}):e.jsxs("div",{className:"h-full flex flex-col bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden animate-in fade-in",children:[e.jsx("div",{className:"p-4 border-b bg-indigo-50 flex justify-between items-center",children:e.jsxs("div",{children:[e.jsxs("h2",{className:"font-bold text-indigo-900 text-lg flex items-center gap-2",children:[e.jsx(Yu,{size:20,className:"text-indigo-600"}),"  "]}),e.jsxs("p",{className:"text-xs text-indigo-700 mt-1",children:["      ( : ",f.length,")"]})]})}),e.jsx("div",{className:"flex-1 overflow-auto custom-scrollbar relative",children:e.jsxs("table",{className:"w-full text-sm text-right border-collapse min-w-max",children:[e.jsx("thead",{className:"bg-slate-900 text-white sticky top-0 z-20 shadow-md",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 border-l border-slate-700 w-16 text-center sticky right-0 bg-slate-900 z-30",children:""}),x.map(y=>e.jsx("th",{className:"p-3 border-l border-slate-700 text-center font-bold text-xs whitespace-nowrap",children:y},y))]})}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:f.map(y=>e.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[e.jsx("td",{className:"p-3 text-center border-l border-slate-100 font-mono text-slate-500 font-bold sticky right-0 bg-white z-10 shadow-[2px_0_5px_-2px_rgba(0,0,0,0.1)]",children:y.number}),x.map(N=>{const C=y.subjects[N];return e.jsx("td",{className:`p-2 text-center border-l border-slate-100 font-bold font-serif ${m(C)}`,children:b(C)},N)})]},y.id))})]})})]}):null},EA=({globalRecords:n,detailedRecords:t,filters:l})=>{const i=k.useMemo(()=>{let u=[];return n.forEach(f=>{(l.scope==="district"||f.schoolName===l.selectedSchool)&&(u=[...u,...f.students])}),u},[n,l]),o=i.length,c=k.useMemo(()=>{if(o===0)return{general:0,eliteCount:0,successCount:0,qualitative:0,relative:0,avgSubjects:0,excludedAmazigh:!1};let u=0,f=0,x=0,m=!1;const b=" ";let y=!1;return i.some(C=>C.subjects[b])&&i.every(A=>!A.subjects[b]||A.subjects[b]==="D")&&(t.some(E=>(l.scope==="district"||E.schoolName===l.selectedSchool)&&(E.subject.includes("")||E.subject.includes("")))||(y=!0,m=!0)),i.forEach(C=>{let A=Object.keys(C.subjects);y&&(A=A.filter(P=>P!==b)),u+=A.length,A.length>0&&A.every(P=>C.subjects[P]==="A")&&f++,A.length>0&&A.every(P=>{const O=C.subjects[P];return O==="A"||O==="B"})&&x++}),{general:u,eliteCount:f,successCount:x,qualitative:f/o*100,relative:x/o*100,avgSubjects:Math.round(u/o),excludedAmazigh:m}},[i,o,t,l]);return o===0?e.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-slate-400",children:[e.jsx(kn,{size:48,className:"mb-4 opacity-20"}),e.jsx("p",{children:"       ."}),e.jsx("p",{className:"text-xs mt-2",children:"      ."})]}):e.jsxs("div",{className:"h-full p-6 overflow-y-auto bg-slate-50/50 animate-in fade-in",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8 gap-4",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-slate-800 font-serif flex items-center gap-2",children:[e.jsx(is,{className:"text-indigo-600"})," :  "]}),e.jsx("p",{className:"text-slate-500 text-sm mt-1",children:"        ."})]}),e.jsxs("div",{className:"flex flex-col items-end gap-2",children:[e.jsxs("div",{className:"bg-white px-4 py-2 rounded-xl border border-slate-200 shadow-sm flex items-center gap-3 text-xs font-bold text-slate-600",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(rs,{size:14})," ",o," "]}),e.jsx("span",{className:"h-4 w-px bg-slate-300"}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Vt,{size:14})," ",c.avgSubjects,"  ()"]})]}),c.excludedAmazigh&&e.jsxs("div",{className:"bg-amber-50 text-amber-700 px-3 py-1 rounded-lg border border-amber-200 text-[10px] font-bold flex items-center gap-1.5 animate-in fade-in",children:[e.jsx(it,{size:12}),"      "]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 p-6 relative overflow-hidden group hover:shadow-md transition-all",children:[e.jsx("div",{className:"absolute top-0 right-0 w-2 h-full bg-blue-500"}),e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("div",{className:"p-3 bg-blue-50 rounded-xl text-blue-600",children:e.jsx(rs,{size:24})}),e.jsx("span",{className:"bg-slate-100 text-slate-500 text-[10px] px-2 py-1 rounded font-bold",children:""})]}),e.jsx("h3",{className:"text-lg font-bold text-slate-700 mb-1",children:"  "}),e.jsx("p",{className:"text-xs text-slate-400 mb-6",children:"   ()"}),e.jsxs("div",{className:"flex items-end gap-2 mb-4",children:[e.jsx("span",{className:"text-4xl font-bold text-slate-800 font-mono",children:c.general.toLocaleString()}),e.jsx("span",{className:"text-xs text-slate-500 mb-1 font-bold",children:""})]}),e.jsxs("div",{className:"bg-slate-50 p-3 rounded-lg border border-slate-100",children:[e.jsxs("div",{className:"flex items-center gap-1 text-[10px] font-bold text-slate-500 mb-1",children:[e.jsx(Ds,{size:10}),"  :"]}),e.jsxs("p",{className:"text-xs text-slate-700 font-mono dir-ltr text-right",children:[o," ()  ",c.avgSubjects," ()"]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 p-6 relative overflow-hidden group hover:shadow-md transition-all",children:[e.jsx("div",{className:"absolute top-0 right-0 w-2 h-full bg-emerald-500"}),e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("div",{className:"p-3 bg-emerald-50 rounded-xl text-emerald-600",children:e.jsx(is,{size:24})}),e.jsx("span",{className:"bg-slate-100 text-slate-500 text-[10px] px-2 py-1 rounded font-bold",children:""})]}),e.jsx("h3",{className:"text-lg font-bold text-slate-700 mb-1",children:"  "}),e.jsx("p",{className:"text-xs text-slate-400 mb-6",children:'  (  ""   )'}),e.jsx("div",{className:"flex items-end gap-2 mb-4",children:e.jsxs("span",{className:"text-4xl font-bold text-emerald-600 font-mono",children:[c.qualitative.toFixed(2),"%"]})}),e.jsxs("div",{className:"bg-emerald-50/50 p-3 rounded-lg border border-emerald-100",children:[e.jsxs("div",{className:"flex items-center gap-1 text-[10px] font-bold text-emerald-700 mb-1",children:[e.jsx(Ds,{size:10}),"  :"]}),e.jsxs("p",{className:"text-xs text-slate-700 font-mono dir-ltr text-right",children:["(",c.eliteCount,' ""   100)  ',o]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 p-6 relative overflow-hidden group hover:shadow-md transition-all",children:[e.jsx("div",{className:"absolute top-0 right-0 w-2 h-full bg-amber-500"}),e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("div",{className:"p-3 bg-amber-50 rounded-xl text-amber-600",children:e.jsx(mb,{size:24})}),e.jsx("span",{className:"bg-slate-100 text-slate-500 text-[10px] px-2 py-1 rounded font-bold",children:""})]}),e.jsx("h3",{className:"text-lg font-bold text-slate-700 mb-1",children:"  "}),e.jsx("p",{className:"text-xs text-slate-400 mb-6",children:'   (  ""  "")'}),e.jsx("div",{className:"flex items-end gap-2 mb-4",children:e.jsxs("span",{className:"text-4xl font-bold text-amber-600 font-mono",children:[c.relative.toFixed(2),"%"]})}),e.jsxs("div",{className:"bg-amber-50/50 p-3 rounded-lg border border-amber-100",children:[e.jsxs("div",{className:"flex items-center gap-1 text-[10px] font-bold text-amber-700 mb-1",children:[e.jsx(Ds,{size:10}),"  :"]}),e.jsxs("p",{className:"text-xs text-slate-700 font-mono dir-ltr text-right",children:["(",c.successCount,' "+"  100)  ',o]})]})]})]}),e.jsxs("div",{className:"mt-8 bg-white border border-slate-200 rounded-xl p-4 flex items-center justify-between text-xs text-slate-500",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Et,{size:14}),e.jsxs("span",{children:[" : ",e.jsx("strong",{children:l.scope==="district"?"":l.scope==="school"?l.selectedSchool:""})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Sb,{size:14}),e.jsxs("span",{children:[": ",e.jsx("strong",{children:"  "})]})]})]})]})},TA={"2AP":[" ",""],"4AP":[" ",""],"5AP":[" ",""," ",""," "," ",""," "," "," "," "," "]},AA=["  (   )"," 1"," 2"," 3"," 4"," 5"," 6"," 7"," 8"," 9"," 10"],MA=({availableSchools:n,onDataUpdated:t,externalFilters:l,onUpdateFilters:i})=>{const[o,c]=k.useState("stats"),[u,f]=k.useState("list"),[x,m]=k.useState("detailed"),[b,y]=k.useState("detailed"),[N,C]=k.useState("detailed"),[A,E]=k.useState([]),[R,P]=k.useState([]),[O,z]=k.useState(!1),[K,G]=k.useState("");k.useEffect(()=>{E(Cn().records),P(ql().records)},[o,u]);const[F,$]=k.useState(""),[B,q]=k.useState(""),[J,Q]=k.useState(""),[U,ae]=k.useState(""),[se,ne]=k.useState([]),[w,D]=k.useState(0),[V,Y]=k.useState([]),[le,_]=k.useState([]),[M,j]=k.useState(""),T=k.useRef(null),L=k.useRef(null),[H,Z]=k.useState(!1),[de,fe]=k.useState(null),[je,we]=k.useState(""),[xe,Ne]=k.useState(""),Ae=k.useMemo(()=>B?TA[B]||[]:[],[B]),ie=k.useMemo(()=>{const ge=new Set;return A.forEach(Te=>{(l.scope==="district"||Te.schoolName===l.selectedSchool)&&ge.add(Te.level)}),Array.from(ge).sort()},[A,l.scope,l.selectedSchool]),ee=k.useMemo(()=>{if(l.scope!=="class"||!l.selectedSchool||!l.selectedLevel)return[];const ge=new Set;return A.forEach(Te=>{Te.schoolName===l.selectedSchool&&Te.level===l.selectedLevel&&ge.add(Te.className)}),Array.from(ge).sort()},[A,l.scope,l.selectedSchool,l.selectedLevel]),ke=k.useMemo(()=>{if(!l.selectedLevel)return[];const ge=new Set;return A.forEach(Te=>{Te.level===l.selectedLevel&&(l.scope==="district"||l.selectedSchool&&Te.schoolName===l.selectedSchool)&&ge.add(Te.subject)}),Array.from(ge).sort()},[A,l.scope,l.selectedSchool,l.selectedLevel]),jt=k.useMemo(()=>A.filter(ge=>!(je&&ge.schoolName!==je||xe&&ge.subject!==xe)),[A,je,xe]),os=k.useMemo(()=>R,[R]),Rn=k.useMemo(()=>A.filter(ge=>l.selectedLevel&&ge.level!==l.selectedLevel||l.selectedSubject&&ge.subject!==l.selectedSubject?!1:l.scope==="district"?!0:!((l.scope==="school"||l.scope==="class")&&ge.schoolName!==l.selectedSchool||l.scope==="class"&&ge.className!==l.selectedClass)),[A,l]),In=k.useMemo(()=>l.selectedSchool?R.filter(ge=>ge.schoolName===l.selectedSchool):R,[R,l.selectedSchool]),Zl=()=>{var ge;if(N==="detailed"){if(!F||!B||!J||!U){alert(":      .");return}}else if(N==="global"&&!F){alert(":      .");return}(ge=T.current)==null||ge.click()},Wl=ge=>{var We;const Te=(We=ge.target.files)==null?void 0:We[0];if(!Te)return;j(Te.name);const pt=new FileReader;pt.onload=Ft=>{var nn;const Fs=(nn=Ft.target)==null?void 0:nn.result;try{if(N==="detailed"){const Rt=uA(Fs,B,J);Rt.length===0&&alert("    ."),ne(Rt)}else{const{students:Rt,detectedColumns:ln}=hA(Fs);Rt.length===0&&alert("    ."),_(Rt),D(Rt.length),Y(ln)}}catch(Rt){console.error(Rt),alert(`   : ${Rt.message}`),j("")}},pt.readAsArrayBuffer(Te)},Qe=()=>{if(N==="detailed"){const ge=A.find(Te=>Te.schoolName===F&&Te.level===B&&Te.className===U&&Te.subject===J);ge?(fe(ge.id),Z(!0)):ml()}else R.find(Te=>Te.schoolName===F)?confirm(`      ${F}.   `)&&zn():zn()},ml=(ge=null)=>{ge&&Xg(ge);const Te={id:Math.random().toString(36).substr(2,9),schoolName:F,className:U,level:B,subject:J,academicYear:`${new Date().getFullYear()}/${new Date().getFullYear()+1}`,uploadDate:new Date().toISOString().split("T")[0],students:se};Qg(Te),ea()},zn=()=>{const ge={id:Math.random().toString(36).substr(2,9),schoolName:F,academicYear:`${new Date().getFullYear()}/${new Date().getFullYear()+1}`,uploadDate:new Date().toISOString().split("T")[0],totalStudents:w,students:le};Zg(ge),alert(`     ${F}.`),P(ql().records),_([]),D(0),Y([]),j(""),f("list"),m("global"),t&&t()},ea=()=>{E(Cn().records),f("list"),t&&t(),ne([]),j(""),Z(!1),fe(null)},Vs=(ge,Te)=>{confirm("    ")&&(Te==="detailed"?(Xg(ge),E(Cn().records)):(fA(ge),P(ql().records)),t&&t())},sn=async()=>{const ge=localStorage.getItem("mufattish_script_url");if(!ge){alert("      Google Sheets.    ' ' .");return}z(!0),G("   ...");try{const Te=Cn().records,pt=ql().records,We=[...Te,...pt.map(Ft=>({...Ft,type:"GLOBAL_RECORD"}))];await Gl(ge,We,"SYNC_ACQ"),G("    !"),setTimeout(()=>G(""),3e3)}catch(Te){console.error(Te),G(" : "+Te.message)}finally{z(!1)}},Ln=async()=>{const ge=localStorage.getItem("mufattish_script_url");if(!ge){alert("      Google Sheets.");return}if(confirm(":         .   ")){z(!0),G("  ...");try{const Te=await vr(ge,"READ_ACQ");if(Array.isArray(Te)){let pt=0;Te.forEach(We=>{We.type==="GLOBAL_RECORD"?Zg(We):Qg(We),pt++}),E(Cn().records),P(ql().records),t&&t(),G(`  ${pt}  .`),setTimeout(()=>G(""),3e3)}else G("     .")}catch(Te){G(" : "+Te.message)}finally{z(!1)}}},mi=()=>{const ge=Cn(),Te=JSON.stringify(ge,null,2),pt=new Blob([Te],{type:"application/json"}),We=URL.createObjectURL(pt),Ft=document.createElement("a");Ft.href=We,Ft.download="Acq_Backup.json",document.body.appendChild(Ft),Ft.click(),document.body.removeChild(Ft)},ta=ge=>{var We;const Te=(We=ge.target.files)==null?void 0:We[0];if(!Te)return;const pt=new FileReader;pt.onload=Ft=>{var nn;const Fs=JSON.parse((nn=Ft.target)==null?void 0:nn.result);Fs.records&&(localStorage.setItem("mufattish_acq_db",JSON.stringify(Fs)),E(Fs.records),t&&t())},pt.readAsText(Te)};return e.jsxs("div",{className:"h-full flex flex-col bg-slate-50/50 w-full animate-in fade-in relative",children:[H&&e.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/70 backdrop-blur-sm animate-in fade-in",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-6 max-w-md w-full border border-slate-200",children:[e.jsxs("div",{className:"flex items-center gap-3 text-amber-600 mb-4",children:[e.jsx("div",{className:"bg-amber-100 p-3 rounded-full",children:e.jsx(jr,{size:24})}),e.jsx("h3",{className:"text-lg font-bold",children:":  "})]}),e.jsx("p",{className:"text-slate-600 text-sm mb-6 leading-relaxed",children:"     .   "}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>{Z(!1),fe(null)},className:"px-4 py-2 rounded-xl text-slate-500 font-bold hover:bg-slate-100 transition-colors",children:""}),e.jsx("button",{onClick:()=>ml(de),className:"px-5 py-2 rounded-xl bg-amber-500 text-white font-bold hover:bg-amber-600 shadow-md transition-colors",children:" "})]})]})}),e.jsx("div",{className:"bg-white border-b px-4 py-3 flex flex-col md:flex-row justify-between items-start md:items-center sticky top-0 z-20 shadow-sm gap-4",children:e.jsxs("div",{className:"flex items-center gap-4 w-full md:w-auto overflow-x-auto no-scrollbar",children:[e.jsxs("h1",{className:"text-xl font-bold text-slate-800 flex items-center gap-2 font-serif shrink-0",children:[e.jsx(Sr,{className:"text-teal-600",size:24}),"  "]}),e.jsxs("div",{className:"flex bg-slate-100 p-1 rounded-lg shrink-0",children:[e.jsxs("button",{onClick:()=>c("data"),className:`px-3 py-1.5 rounded-md text-xs font-bold flex gap-2 ${o==="data"?"bg-white text-slate-800 shadow-sm":"text-slate-500"}`,children:[e.jsx(Cr,{size:14}),"  "]}),e.jsxs("button",{onClick:()=>c("results"),className:`px-3 py-1.5 rounded-md text-xs font-bold flex gap-2 ${o==="results"?"bg-white text-indigo-700 shadow-sm":"text-slate-500"}`,children:[e.jsx(xw,{size:14}),"  "]}),e.jsxs("button",{onClick:()=>c("stats"),className:`px-3 py-1.5 rounded-md text-xs font-bold flex gap-2 ${o==="stats"?"bg-white text-teal-700 shadow-sm":"text-slate-500"}`,children:[e.jsx(bh,{size:14}),"  "]}),e.jsxs("button",{onClick:()=>c("remediation"),className:`px-3 py-1.5 rounded-md text-xs font-bold flex gap-2 ${o==="remediation"?"bg-white text-orange-700 shadow-sm":"text-slate-500"}`,children:[e.jsx(kn,{size:14}),"  "]}),e.jsxs("button",{onClick:()=>c("print"),className:`px-3 py-1.5 rounded-md text-xs font-bold flex gap-2 ${o==="print"?"bg-white text-blue-700 shadow-sm":"text-slate-500"}`,children:[e.jsx(bs,{size:14}),"  "]})]})]})}),(o==="stats"||o==="results"||o==="remediation")&&e.jsxs("div",{className:"bg-slate-50 border-b border-slate-200 px-6 py-3 flex flex-col lg:flex-row gap-4 items-start lg:items-center animate-in slide-in-from-top-2 relative z-10",children:[e.jsxs("div",{className:"flex bg-white rounded-lg border border-slate-200 shadow-sm p-1 shrink-0",children:[e.jsxs("button",{onClick:()=>i({scope:"district"}),className:`px-3 py-1.5 rounded-md text-xs font-bold ${l.scope==="district"?"bg-indigo-50 text-indigo-700":"text-slate-500"}`,children:[e.jsx(Sb,{size:14})," "]}),e.jsxs("button",{onClick:()=>i({scope:"school"}),className:`px-3 py-1.5 rounded-md text-xs font-bold ${l.scope==="school"?"bg-blue-50 text-blue-700":"text-slate-500"}`,children:[e.jsx(Et,{size:14})," "]}),e.jsxs("button",{onClick:()=>i({scope:"class"}),className:`px-3 py-1.5 rounded-md text-xs font-bold ${l.scope==="class"?"bg-teal-50 text-teal-700":"text-slate-500"}`,children:[e.jsx(rs,{size:14})," "]})]}),e.jsxs("div",{className:"flex flex-wrap gap-3 items-center flex-1",children:[e.jsxs("select",{value:l.selectedSchool,onChange:ge=>i({selectedSchool:ge.target.value}),className:"p-2 border rounded-lg text-xs font-bold",children:[e.jsx("option",{value:"",children:"--  --"}),n.map(ge=>e.jsx("option",{value:ge,children:ge},ge))]}),e.jsxs("select",{value:l.selectedLevel,onChange:ge=>i({selectedLevel:ge.target.value}),className:"p-2 border rounded-lg text-xs font-bold",children:[e.jsx("option",{value:"",children:"--  --"}),ie.map(ge=>e.jsx("option",{value:ge,children:ge},ge))]}),l.scope==="class"&&e.jsxs("select",{value:l.selectedClass,onChange:ge=>i({selectedClass:ge.target.value}),className:"p-2 border rounded-lg text-xs font-bold",children:[e.jsx("option",{value:"",children:"--  --"}),ee.map(ge=>e.jsx("option",{value:ge,children:ge},ge))]}),e.jsxs("select",{value:l.selectedSubject,onChange:ge=>i({selectedSubject:ge.target.value}),className:"p-2 border rounded-lg text-xs font-bold",children:[e.jsx("option",{value:"",children:"--  --"}),ke.map(ge=>e.jsx("option",{value:ge,children:ge},ge))]})]}),o==="results"&&e.jsxs("div",{className:"flex bg-white rounded-lg border border-slate-200 p-1 shrink-0 ml-auto",children:[e.jsxs("button",{onClick:()=>y("detailed"),className:`px-3 py-1.5 rounded text-xs font-bold flex items-center gap-1 ${b==="detailed"?"bg-teal-100 text-teal-800":"text-slate-500"}`,children:[e.jsx(si,{size:14})," "]}),e.jsxs("button",{onClick:()=>y("global"),className:`px-3 py-1.5 rounded text-xs font-bold flex items-center gap-1 ${b==="global"?"bg-indigo-100 text-indigo-800":"text-slate-500"}`,children:[e.jsx(Yu,{size:14})," "]})]})]}),e.jsxs("div",{className:"flex-1 overflow-hidden",children:[o==="stats"&&e.jsx(CA,{records:A,availableSchools:n,filters:l}),o==="results"&&e.jsx("div",{className:"h-full p-6",children:e.jsx(kA,{mode:b,records:Rn,globalRecords:In,level:l.selectedLevel,subject:l.selectedSubject})}),o==="remediation"&&e.jsx(EA,{globalRecords:In,detailedRecords:A,filters:l}),o==="print"&&e.jsxs("div",{className:"h-full flex flex-col items-center justify-center p-12 text-slate-400",children:[e.jsx(bs,{size:64,className:"mb-4 opacity-20"}),e.jsx("h3",{className:"text-2xl font-bold",children:" "}),e.jsx("span",{className:"mt-2 bg-yellow-100 text-yellow-800 text-xs font-bold px-3 py-1 rounded-full",children:" "})]}),o==="data"&&e.jsx("div",{className:"h-full overflow-y-auto p-6 md:p-8",children:u==="list"?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"font-bold text-slate-700 text-lg",children:"  "}),e.jsx("p",{className:"text-xs text-slate-500",children:"     "})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs("button",{onClick:sn,disabled:O,className:"px-4 py-2 bg-sky-100 text-sky-700 hover:bg-sky-200 rounded shadow-sm text-xs font-bold flex items-center gap-2 transition-colors disabled:opacity-50",title:"   Google Sheet",children:[e.jsx(JN,{size:16})," ",O?" ...":" "]}),e.jsxs("button",{onClick:Ln,disabled:O,className:"px-4 py-2 bg-indigo-100 text-indigo-700 hover:bg-indigo-200 rounded shadow-sm text-xs font-bold flex items-center gap-2 transition-colors disabled:opacity-50",title:"   Google Sheet",children:[e.jsx(HN,{size:16})," ",O?" ...":" "]}),e.jsx("div",{className:"w-px bg-slate-300 mx-1"}),e.jsx("button",{onClick:mi,className:"px-4 py-2 bg-white border rounded shadow-sm text-xs font-bold",children:" "}),e.jsx("button",{onClick:()=>{var ge;return(ge=L.current)==null?void 0:ge.click()},className:"px-4 py-2 bg-white border rounded shadow-sm text-xs font-bold",children:" "}),e.jsx("input",{type:"file",ref:L,accept:".json",onChange:ta,className:"hidden"}),e.jsxs("button",{onClick:()=>f("upload"),className:"bg-slate-900 text-white px-5 py-2 rounded-xl shadow font-bold text-sm flex gap-2 items-center",children:[e.jsx(ii,{size:18}),"   "]})]})]}),K&&e.jsxs("div",{className:"bg-blue-50 text-blue-800 p-3 rounded-xl text-sm font-bold border border-blue-100 flex items-center gap-2 animate-in slide-in-from-top-2",children:[e.jsx(it,{size:16})," ",K]}),e.jsxs("div",{className:"flex bg-white border p-1 rounded-xl shadow-sm w-fit mb-4",children:[e.jsx("button",{onClick:()=>m("detailed"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${x==="detailed"?"bg-teal-50 text-teal-700":"text-slate-500"}`,children:" "}),e.jsx("button",{onClick:()=>m("global"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${x==="global"?"bg-indigo-50 text-indigo-700":"text-slate-500"}`,children:" "})]}),x==="detailed"?e.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden",children:e.jsxs("table",{className:"w-full text-right",children:[e.jsx("thead",{className:"bg-slate-50 text-slate-500 text-xs font-bold",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-4",children:""}),e.jsx("th",{className:"p-4",children:""}),e.jsx("th",{className:"p-4",children:""}),e.jsx("th",{className:"p-4",children:""}),e.jsx("th",{className:"p-4",children:""})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:jt.map(ge=>e.jsxs("tr",{className:"hover:bg-slate-50",children:[e.jsx("td",{className:"p-4 font-bold text-slate-700",children:ge.schoolName}),e.jsxs("td",{className:"p-4 text-xs",children:[ge.level," / ",ge.className]}),e.jsx("td",{className:"p-4 text-xs font-bold text-indigo-600",children:ge.subject}),e.jsx("td",{className:"p-4 font-mono",children:ge.students.length}),e.jsx("td",{className:"p-4",children:e.jsx("button",{onClick:()=>Vs(ge.id,"detailed"),className:"text-slate-300 hover:text-red-500",children:e.jsx(fl,{size:16})})})]},ge.id))})]})}):e.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden",children:e.jsxs("table",{className:"w-full text-right",children:[e.jsx("thead",{className:"bg-indigo-50 text-indigo-900 text-xs font-bold",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-4",children:""}),e.jsx("th",{className:"p-4 text-center",children:" "}),e.jsx("th",{className:"p-4 text-center",children:""})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:os.map(ge=>e.jsxs("tr",{className:"hover:bg-slate-50",children:[e.jsx("td",{className:"p-4 font-bold text-slate-700",children:ge.schoolName}),e.jsx("td",{className:"p-4 text-center font-mono",children:ge.totalStudents}),e.jsx("td",{className:"p-4 text-center",children:e.jsx("button",{onClick:()=>Vs(ge.id,"global"),className:"text-slate-300 hover:text-red-500",children:e.jsx(fl,{size:16})})})]},ge.id))})]})})]}):e.jsxs("div",{className:"w-full max-w-5xl mx-auto animate-in slide-in-from-right-4",children:[e.jsxs("button",{onClick:()=>f("list"),className:"flex items-center gap-2 text-slate-500 hover:text-slate-800 font-bold text-xs mb-6 transition-colors",children:[e.jsx(xb,{size:14}),"  "]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-slate-200 overflow-hidden",children:[e.jsx("div",{className:"bg-slate-900 text-white p-6 border-b border-slate-800",children:e.jsx("h2",{className:"text-xl font-bold font-serif",children:"   "})}),e.jsxs("div",{className:"p-6 md:p-8 space-y-8",children:[e.jsxs("div",{className:"flex gap-4 mb-6",children:[e.jsx("button",{onClick:()=>C("detailed"),className:`flex-1 p-4 rounded-xl border-2 ${N==="detailed"?"border-teal-500 bg-teal-50":"border-slate-200"}`,children:" "}),e.jsx("button",{onClick:()=>C("global"),className:`flex-1 p-4 rounded-xl border-2 ${N==="global"?"border-indigo-500 bg-indigo-50":"border-slate-200"}`,children:" "})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-bold text-slate-600 mb-2",children:[" ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:F,onChange:ge=>$(ge.target.value),className:"w-full p-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm font-bold",children:[e.jsx("option",{value:"",children:"--   --"}),n.map(ge=>e.jsx("option",{value:ge,children:ge},ge))]})]}),N==="detailed"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-600 mb-2",children:""}),e.jsxs("select",{value:B,onChange:ge=>q(ge.target.value),className:"w-full p-2.5 bg-slate-50 border rounded-xl",children:[e.jsx("option",{value:"",children:"--"}),e.jsx("option",{value:"2AP",children:"2AP"}),e.jsx("option",{value:"4AP",children:"4AP"}),e.jsx("option",{value:"5AP",children:"5AP"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-600 mb-2",children:""}),e.jsxs("select",{value:J,onChange:ge=>Q(ge.target.value),className:"w-full p-2.5 bg-slate-50 border rounded-xl",children:[e.jsx("option",{value:"",children:"--"}),Ae.map(ge=>e.jsx("option",{value:ge,children:ge},ge))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-600 mb-2",children:""}),e.jsxs("select",{value:U,onChange:ge=>ae(ge.target.value),className:"w-full p-2.5 bg-slate-50 border rounded-xl",children:[e.jsx("option",{value:"",children:"--"}),AA.map(ge=>e.jsx("option",{value:ge,children:ge},ge))]})]})]})]}),e.jsxs("div",{onClick:Zl,className:"border-2 border-dashed border-slate-300 rounded-2xl p-8 text-center cursor-pointer hover:bg-slate-50",children:[e.jsx("input",{type:"file",ref:T,accept:".xls,.xlsx",onChange:Wl,className:"hidden"}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(si,{size:24,className:"mb-2 text-slate-400"}),e.jsx("p",{children:M||"  "})]})]}),N==="detailed"&&se.length>0&&e.jsx("button",{onClick:Qe,className:"w-full bg-slate-900 text-white px-8 py-2.5 rounded-xl font-bold",children:" "}),N==="global"&&le.length>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-indigo-50 border border-indigo-100 rounded-xl p-4",children:[e.jsxs("h3",{className:"font-bold text-indigo-900 text-sm mb-2 flex items-center gap-2",children:[e.jsx(it,{size:16}),"  "]}),e.jsx("div",{className:"grid grid-cols-2 gap-4 text-xs",children:e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-500 block",children:" :"}),e.jsx("span",{className:"font-bold text-slate-800 text-lg",children:w})]})}),e.jsxs("div",{className:"mt-3 pt-3 border-t border-indigo-200",children:[e.jsx("span",{className:"text-slate-500 block mb-1",children:"    :"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:V.map(ge=>e.jsx("span",{className:"bg-white px-2 py-1 rounded border text-indigo-700 font-bold text-[10px]",children:ge},ge))})]})]}),e.jsx("button",{onClick:Qe,className:"w-full bg-indigo-600 text-white px-8 py-2.5 rounded-xl font-bold",children:"  "})]})]})]})]})})]})]})},DA=({inspectorInfo:n})=>{const[t,l]=k.useState(null),[i,o]=k.useState([]),[c,u]=k.useState(!0),[f,x]=k.useState(0),m=k.useRef(null),b=new Date().getFullYear(),y=b+1;return k.useEffect(()=>{(async()=>{u(!0);const C=await Sv();C&&C.length>0?o(C):o([]),u(!1)})()},[]),k.useEffect(()=>(t!=null&&t.is_interactive?(x(0),m.current=setInterval(()=>{x(N=>{if(N>=45)return N;const C=Math.floor(Math.random()*3);return N+C})},2500)):m.current&&clearInterval(m.current),()=>{m.current&&clearInterval(m.current)}),[t]),t?ul.createPortal(e.jsxs("div",{className:"fixed inset-0 z-[99999] bg-white flex flex-col animate-in fade-in duration-300 overflow-hidden font-serif",style:{width:"100vw",height:"100vh"},children:[e.jsx("button",{onClick:()=>l(null),className:"absolute top-4 left-4 p-2 bg-slate-100 hover:bg-red-50 text-slate-400 hover:text-red-600 rounded-full transition-all shadow-sm z-50 print:hidden",title:"   ",children:e.jsx(Ze,{size:24})}),e.jsxs("div",{className:"w-full px-8 pt-6 pb-2 shrink-0 bg-white relative z-10",children:[e.jsxs("div",{className:"relative h-24 flex items-center justify-center w-full mb-2",children:[e.jsx("div",{className:"absolute right-0 top-0 h-full flex items-center",children:e.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/7/77/Flag_of_Algeria.svg/320px-Flag_of_Algeria.svg.png",alt:"Flag",className:"h-16 w-auto object-contain drop-shadow-md"})}),e.jsxs("div",{className:"text-center z-10 pt-2",children:[e.jsx("h2",{className:"text-xl md:text-2xl font-bold text-slate-900 tracking-wide mb-1",children:"   "}),e.jsx("h3",{className:"text-lg md:text-xl font-bold text-slate-800",children:"  "})]}),e.jsx("div",{className:"absolute left-0 top-0 h-full flex items-center",children:e.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/d/d8/%D9%88%D8%B2%D8%A7%D8%B1%D8%A9_%D8%A7%D9%84%D8%AA%D8%B1%D8%A8%D9%8A%D8%A9_%D8%A7%D9%84%D9%88%D8%B7%D9%86%D9%8A%D8%A9.svg/960px-%D9%88%D8%B2%D8%A7%D8%B1%D8%A9_%D8%A7%D9%84%D8%AA%D8%B1%D8%A8%D9%8A%D8%A9_%D8%A7%D9%84%D9%88%D8%B7%D9%86%D9%8A%D8%A9.svg.png?20230207012220",alt:"Logo",className:"h-20 w-auto object-contain drop-shadow-sm"})})]}),e.jsxs("div",{className:"flex justify-between items-end border-b-4 border-double border-slate-900 pb-2 mt-2",children:[e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:"text-sm md:text-base font-bold text-slate-800",children:["   ",n.wilaya]})}),e.jsx("div",{className:"text-left pl-14",children:e.jsxs("p",{className:"text-sm md:text-base font-bold text-slate-800",children:["   : ",n.district]})})]})]}),e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-center w-full max-w-7xl mx-auto px-4 relative z-0",children:[e.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-[0.03] pointer-events-none",children:e.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/d/d8/%D9%88%D8%B2%D8%A7%D8%B1%D8%A9_%D8%A7%D9%84%D8%AA%D8%B1%D8%A8%D9%8A%D8%A9_%D8%A7%D9%84%D9%88%D8%B7%D9%86%D9%8A%D8%A9.svg/960px-%D9%88%D8%B2%D8%A7%D8%B1%D8%A9_%D8%A7%D9%84%D8%AA%D8%B1%D8%A8%D9%8A%D8%A9_%D8%A7%D9%84%D9%88%D8%B7%D9%86%D9%8A%D8%A9.svg.png?20230207012220",className:"w-1/2 h-auto grayscale"})}),e.jsxs("div",{className:"relative z-10 w-full",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-3xl text-slate-600 font-bold decoration-slate-300 underline underline-offset-8 decoration-2",children:"  :"}),e.jsx("h1",{className:"text-5xl md:text-7xl font-extrabold text-slate-900 leading-tight drop-shadow-sm py-4 max-w-5xl mx-auto",children:t.title}),t.is_interactive&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 inline-block px-8 py-3 rounded-2xl shadow-sm animate-in fade-in slide-in-from-bottom-2",children:[e.jsx("p",{className:"text-xs font-bold text-slate-400 mb-1 uppercase tracking-widest",children:"  "}),e.jsx("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",className:"text-2xl font-mono font-bold text-blue-700 hover:underline dir-ltr block",children:t.url})]})]}),e.jsx("div",{className:"w-48 h-1 bg-slate-800 mx-auto rounded-full my-8"}),e.jsx("div",{className:"inline-block border-2 border-slate-800 px-12 py-3 rounded-lg bg-slate-50 shadow-md",children:e.jsxs("p",{className:"text-2xl font-bold text-slate-800",children:[" : ",b," / ",y]})}),e.jsx("div",{className:"pt-12",children:e.jsxs("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-3 bg-slate-900 text-white px-12 py-4 rounded-xl text-2xl font-bold hover:bg-blue-900 hover:scale-105 transition-all shadow-xl hover:shadow-2xl group font-sans",children:[t.is_interactive?e.jsx(li,{size:28,className:"animate-pulse"}):e.jsx(Ab,{fill:"currentColor",size:24}),e.jsx("span",{children:t.is_interactive?"  ":" "})]})})]})]}),t.is_interactive&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"absolute bottom-16 right-8 z-20 flex flex-col items-center bg-white p-3 rounded-xl shadow-2xl border-2 border-slate-900 animate-in slide-in-from-right-10 duration-700",children:[e.jsx("img",{src:`https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=${encodeURIComponent(t.url)}`,alt:"Scan to join",className:"w-32 h-32 object-contain mb-2"}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-wider mb-1",children:" "}),e.jsxs("div",{className:"flex items-center justify-center gap-1 bg-green-100 text-green-800 px-2 py-0.5 rounded-full text-xs font-bold",children:[e.jsx(rs,{size:10}),e.jsxs("span",{children:[f," "]})]})]})]}),e.jsxs("div",{className:"absolute bottom-16 left-8 z-20 flex flex-col items-center bg-white p-3 rounded-xl shadow-2xl border-2 border-slate-900 animate-in slide-in-from-left-10 duration-700",children:[e.jsx("img",{src:`https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=${encodeURIComponent(t.url)}`,alt:"Scan to join",className:"w-32 h-32 object-contain mb-2"}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-wider mb-1",children:" "}),e.jsxs("div",{className:"flex items-center justify-center gap-1 bg-green-100 text-green-800 px-2 py-0.5 rounded-full text-xs font-bold",children:[e.jsx(rs,{size:10}),e.jsxs("span",{children:[f," "]})]})]})]})]}),e.jsxs("div",{className:"w-full bg-white border-t border-slate-200 py-4 px-8 flex justify-between items-center shrink-0 relative z-30",children:[e.jsx("p",{className:"text-[10px] text-slate-400 font-sans",children:"   "}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-600"}),e.jsx("div",{className:"w-2 h-2 rounded-full bg-yellow-500"}),e.jsx("div",{className:"w-2 h-2 rounded-full bg-red-600"})]})]})]}),document.body):e.jsx("div",{className:"p-6 md:p-8 animate-in fade-in",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-10",children:[e.jsx("h2",{className:"text-3xl font-bold text-slate-800 font-serif mb-2",children:"   (Live)"}),e.jsx("p",{className:"text-slate-500",children:"      .    ."})]}),c?e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-slate-400",children:[e.jsx(ci,{size:48,className:"animate-spin mb-4 text-indigo-500"}),e.jsx("p",{children:"    ..."})]}):i.length===0?e.jsxs("div",{className:"text-center py-20 bg-white rounded-3xl border-2 border-dashed border-slate-200",children:[e.jsx(Uw,{size:48,className:"mx-auto mb-4 text-slate-300"}),e.jsx("p",{className:"text-slate-400 font-bold",children:"    ."}),e.jsx("p",{className:"text-xs text-slate-400 mt-2",children:"       ."})]}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:i.map((N,C)=>e.jsxs("div",{onClick:()=>l(N),className:"bg-white p-6 rounded-3xl shadow-sm border border-slate-100 hover:shadow-xl hover:scale-[1.02] transition-all cursor-pointer group flex flex-col items-center text-center h-full min-h-[220px] relative overflow-hidden",children:[N.is_interactive&&e.jsxs("div",{className:"absolute top-0 right-0 bg-purple-600 text-white text-[9px] px-3 py-1 rounded-bl-xl font-bold flex items-center gap-1 shadow-sm z-10",children:[e.jsx(li,{size:10}),e.jsx("span",{children:""})]}),e.jsx("div",{className:`w-16 h-16 rounded-2xl ${N.color||"bg-blue-600"} text-white flex items-center justify-center mb-6 shadow-lg group-hover:rotate-6 transition-transform`,children:e.jsx(dl,{size:32})}),e.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-4 leading-snug line-clamp-3",children:N.title}),e.jsxs("span",{className:"mt-auto inline-flex items-center gap-1 text-xs font-bold text-slate-400 group-hover:text-blue-600 transition-colors bg-slate-50 px-3 py-1 rounded-full group-hover:bg-blue-50",children:["  ",e.jsx(bb,{size:12})]})]},C))})]})})},cb=[" "," "," "," "," "," "],RA=({teachers:n,reportsMap:t,inspectorInfo:l,signature:i,isExpired:o=!1,onUpgradeClick:c,initialTopic:u,onClearInitialTopic:f})=>{var Ae;const[x,m]=k.useState("attendance"),[b,y]=k.useState(""),[N,C]=k.useState(new Date().toISOString().split("T")[0]),[A,E]=k.useState(""),[R,P]=k.useState(""),[O,z]=k.useState([]),[K,G]=k.useState([]),[F,$]=k.useState(null),[B,q]=k.useState(""),[J,Q]=k.useState(()=>{const ie=localStorage.getItem("mufattish_seminars_calendar");if(ie)try{return JSON.parse(ie)}catch(ee){console.error("Failed to parse saved seminars",ee)}return[{id:"1",topic:"  ...",date:new Date().toISOString().split("T")[0],location:"",isExternalLocation:!1,duration:"1/2 ",targetLevels:[" "," "],supervisor:" ",notes:""}]});k.useEffect(()=>{localStorage.setItem("mufattish_seminars_calendar",JSON.stringify(J))},[J]);const[U,ae]=k.useState(!1),[se,ne]=k.useState(null),[w,D]=k.useState(null),[V,Y]=k.useState(0),le=k.useRef(null);k.useEffect(()=>{if(u){m("calendar");const ie={id:Math.random().toString(36).substr(2,9),topic:u,date:new Date().toISOString().split("T")[0],location:"",isExternalLocation:!1,duration:"1/2 ",targetLevels:[],supervisor:" ",notes:"",isInteractive:!1};ne(ie),ae(!0),f&&f()}},[u,f]),k.useEffect(()=>(w?(Y(0),le.current=setInterval(()=>{Y(ie=>{const ee=Math.floor(Math.random()*3);return Math.min(ie+ee,45)})},2500)):le.current&&clearInterval(le.current),()=>{le.current&&clearInterval(le.current)}),[w]);const _=k.useMemo(()=>{const ie=new Set;return Object.values(t).forEach(ee=>{ee.school&&ie.add(ee.school.trim())}),Array.from(ie).sort()},[t]),M=ie=>ie.length===0?0:n.filter(ee=>{const ke=t[ee.id],jt=(ke==null?void 0:ke.level)||"";return ie.some(os=>jt.includes(os))}).length,j=ie=>{z(ee=>ee.includes(ie)?ee.filter(ke=>ke!==ie):[...ee,ie])},T=k.useMemo(()=>O.length===0?[]:n.filter(ie=>{const ee=t[ie.id],ke=(ee==null?void 0:ee.level)||"";return O.some(jt=>ke.includes(jt))}).map(ie=>{var ee,ke;return{...ie,schoolName:((ee=t[ie.id])==null?void 0:ee.school)||" ",levelName:((ke=t[ie.id])==null?void 0:ke.level)||" "}}).sort((ie,ee)=>ie.schoolName.localeCompare(ee.schoolName)),[n,t,O]),L=k.useMemo(()=>{const ie=[];if(T.length===0)return[];let ke=[...T];for(;ke.length>0;)ie.push(ke.slice(0,18)),ke=ke.slice(18);return ie},[T]),H=ie=>{G(ee=>ee.includes(ie)?ee.filter(ke=>ke!==ie):[...ee,ie])},Z=()=>{const ie={id:Math.random().toString(36).substr(2,9),topic:"",date:new Date().toISOString().split("T")[0],location:"",isExternalLocation:!1,duration:"1/2 ",targetLevels:[],supervisor:" ",notes:"",isInteractive:!1};ne(ie),ae(!0)},de=ie=>{ne({...ie}),ae(!0)},fe=ie=>{confirm("      ")&&Q(ee=>ee.filter(ke=>ke.id!==ie))},je=()=>{if(se){if(!se.topic){alert("   ");return}Q(ie=>ie.find(ke=>ke.id===se.id)?ie.map(ke=>ke.id===se.id?se:ke):[...ie,se]),ae(!1),ne(null)}},we=ie=>{ie.isInteractive?D(ie):confirm(`    : "${ie.topic}"`)&&alert("   (  ).")},xe=()=>{o?c&&c():window.print()},Ne=ie=>{navigator.clipboard.writeText(ie),alert("   !")};return e.jsxs("div",{className:"h-full flex flex-col bg-slate-50 relative",children:[e.jsx("div",{className:"bg-white border-b px-6 py-2 flex items-center justify-between shadow-sm z-20 overflow-x-auto no-scrollbar",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>m("attendance"),className:`px-4 py-2 rounded-lg text-xs font-bold flex items-center gap-2 transition-all whitespace-nowrap ${x==="attendance"?"bg-indigo-50 text-indigo-700 ring-1 ring-indigo-200":"text-slate-500 hover:bg-slate-100"}`,children:[e.jsx(Wu,{size:16}),"  ()"]}),e.jsxs("button",{onClick:()=>m("calendar"),className:`px-4 py-2 rounded-lg text-xs font-bold flex items-center gap-2 transition-all whitespace-nowrap ${x==="calendar"?"bg-indigo-50 text-indigo-700 ring-1 ring-indigo-200":"text-slate-500 hover:bg-slate-100"}`,children:[e.jsx(Jm,{size:16})," "]}),e.jsxs("button",{onClick:()=>m("ready-made"),className:`px-4 py-2 rounded-lg text-xs font-bold flex items-center gap-2 transition-all whitespace-nowrap ${x==="ready-made"?"bg-indigo-50 text-indigo-700 ring-1 ring-indigo-200":"text-slate-500 hover:bg-slate-100"}`,children:[e.jsx(dl,{size:16})," "]})]})}),x==="ready-made"&&e.jsx("div",{className:"p-6 md:p-8 flex-1 overflow-y-auto print:hidden animate-in fade-in",children:e.jsx(DA,{inspectorInfo:l})}),F&&x==="attendance"&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/70 backdrop-blur-sm print:hidden",children:e.jsxs("div",{className:"bg-white w-full max-w-3xl rounded-xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[e.jsxs("div",{className:"bg-slate-100 p-4 border-b flex justify-between items-center",children:[e.jsxs("h3",{className:"font-bold text-lg flex items-center gap-2",children:[e.jsx(kn,{size:20,className:"text-red-600"})," "]}),e.jsx("button",{onClick:()=>$(null),children:e.jsx(Ze,{size:20,className:"text-slate-500 hover:text-red-500"})})]}),e.jsxs("div",{className:"p-8 overflow-y-auto bg-white flex-1",children:[e.jsx("div",{className:"text-center font-bold text-gray-400 mb-4 text-xs uppercase tracking-widest border-b pb-2",children:"  (   )"}),e.jsxs("div",{className:"border p-4 rounded bg-gray-50 text-sm space-y-4",children:[e.jsxs("p",{children:[e.jsx("strong",{children:" ():"})," ",F.fullName]}),e.jsxs("p",{children:[e.jsx("strong",{children:":"}),"   "]}),e.jsxs("p",{className:"leading-loose text-gray-600",children:["      ",R?" ":"","                  ",e.jsx("b",{children:N})," : ",e.jsx("b",{children:A}),'   "',e.jsx("b",{children:b}),'".']})]})]}),e.jsxs("div",{className:"p-4 bg-slate-50 border-t flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>$(null),className:"px-4 py-2 rounded text-slate-600 hover:bg-slate-200 font-bold",children:""}),e.jsxs("button",{onClick:xe,className:`bg-red-600 text-white px-6 py-2 rounded shadow flex items-center gap-2 hover:bg-red-700 font-bold ${o?"opacity-70":""}`,children:[o?e.jsx(Dt,{size:18}):e.jsx(bs,{size:18}),"  "]})]})]})}),U&&se&&x==="calendar"&&e.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/70 backdrop-blur-sm print:hidden animate-in fade-in zoom-in-95",children:e.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-2xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[e.jsxs("div",{className:"bg-indigo-600 text-white p-4 border-b flex justify-between items-center shrink-0",children:[e.jsxs("h3",{className:"font-bold text-lg flex items-center gap-2",children:[e.jsx(Jm,{size:20}),J.find(ie=>ie.id===se.id)?" ":"  "]}),e.jsx("button",{onClick:()=>ae(!1),className:"text-white/70 hover:text-white p-1 rounded-full hover:bg-white/10 transition-colors",children:e.jsx(Ze,{size:20})})]}),e.jsxs("div",{className:"p-6 overflow-y-auto custom-scrollbar flex-1 space-y-6",children:[e.jsxs("div",{className:"bg-indigo-50 p-4 rounded-xl border border-indigo-100 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${se.isInteractive?"bg-purple-600 text-white":"bg-slate-200 text-slate-400"}`,children:se.isInteractive?e.jsx(li,{size:20}):e.jsx(ep,{size:20})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-indigo-900 text-sm",children:" "}),e.jsx("p",{className:"text-xs text-indigo-600/70",children:se.isInteractive?"  (   )":"  ( )"})]})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:se.isInteractive||!1,onChange:ie=>ne({...se,isInteractive:ie.target.checked})}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-purple-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-purple-600"}),e.jsx("span",{className:"ml-3 text-sm font-medium text-gray-900",children:""})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:" "}),e.jsx(ve,{value:se.topic,onChange:ie=>ne({...se,topic:ie}),placeholder:":     ...",className:"w-full"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:""}),e.jsx("input",{type:"date",value:se.date,onChange:ie=>ne({...se,date:ie.target.value}),className:"w-full border rounded-lg p-2 text-sm focus:ring-2 focus:ring-indigo-500 outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:""}),e.jsxs("select",{value:se.duration,onChange:ie=>ne({...se,duration:ie.target.value}),className:"w-full border rounded-lg p-2 text-sm focus:ring-2 focus:ring-indigo-500 outline-none bg-white",children:[e.jsx("option",{value:"1/2 ",children:"  (1/2)"}),e.jsx("option",{value:"1 ",children:"  (1)"}),e.jsx("option",{value:"2 ",children:" (2)"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:""}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>ne({...se,isExternalLocation:!1,location:""}),className:`flex-1 py-2 text-xs font-bold rounded border ${se.isExternalLocation?"bg-gray-50 border-gray-200 text-gray-500":"bg-indigo-50 border-indigo-500 text-indigo-700"}`,children:" "}),e.jsx("button",{onClick:()=>ne({...se,isExternalLocation:!0,location:""}),className:`flex-1 py-2 text-xs font-bold rounded border ${se.isExternalLocation?"bg-indigo-50 border-indigo-500 text-indigo-700":"bg-gray-50 border-gray-200 text-gray-500"}`,children:"  (/)"})]}),se.isExternalLocation?e.jsx(ve,{value:se.location,onChange:ie=>ne({...se,location:ie}),placeholder:"  ...",className:"w-full"}):e.jsxs("select",{value:se.location,onChange:ie=>ne({...se,location:ie.target.value}),className:"w-full border rounded-lg p-2.5 text-sm focus:ring-2 focus:ring-indigo-500 outline-none bg-white",children:[e.jsx("option",{value:"",children:"--   --"}),_.map(ie=>e.jsx("option",{value:ie,children:ie},ie))]})]})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-xl border border-gray-200",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700",children:" "}),e.jsxs("span",{className:"text-xs bg-indigo-100 text-indigo-700 px-2 py-0.5 rounded-full font-bold",children:[" : ",M(se.targetLevels)]})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:cb.map(ie=>{const ee=se.targetLevels.includes(ie);return e.jsxs("button",{onClick:()=>{const ke=ee?se.targetLevels.filter(jt=>jt!==ie):[...se.targetLevels,ie];ne({...se,targetLevels:ke})},className:`px-3 py-1.5 rounded-full text-xs font-bold transition-all border ${ee?"bg-indigo-600 text-white border-indigo-600 shadow-md transform scale-105":"bg-white text-gray-600 border-gray-300 hover:border-indigo-400"}`,children:[ie," ",ee&&e.jsx("span",{className:"mr-1",children:""})]},ie)})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"  "}),e.jsx(ve,{value:se.supervisor,onChange:ie=>ne({...se,supervisor:ie}),className:"w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:""}),e.jsx(ve,{value:se.notes,onChange:ie=>ne({...se,notes:ie}),placeholder:"...",className:"w-full"})]})]})]}),e.jsxs("div",{className:"p-4 bg-gray-50 border-t flex justify-end gap-3 shrink-0",children:[e.jsx("button",{onClick:()=>ae(!1),className:"px-5 py-2.5 rounded-xl font-bold text-gray-500 hover:bg-gray-200 transition-colors",children:""}),e.jsxs("button",{onClick:je,className:"px-6 py-2.5 rounded-xl font-bold bg-indigo-600 text-white hover:bg-indigo-700 shadow-md flex items-center gap-2 transition-colors",children:[e.jsx(Zt,{size:18})," "]})]})]})}),w&&e.jsx("div",{className:"fixed inset-0 z-[100] bg-slate-900/95 backdrop-blur-md flex items-center justify-center p-4 animate-in zoom-in-95 duration-300",children:e.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-5xl overflow-hidden relative border border-slate-700/50 flex flex-col md:flex-row h-[85vh] max-h-[700px]",children:[e.jsx("button",{onClick:()=>D(null),className:"absolute top-4 left-4 z-50 p-2 bg-white/10 hover:bg-white/20 text-white/50 hover:text-white rounded-full transition-all",children:e.jsx(Ze,{size:24})}),e.jsxs("div",{className:"w-full md:w-5/12 bg-gradient-to-br from-indigo-900 to-violet-900 text-white p-10 flex flex-col justify-between relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-full h-full opacity-10 bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-white via-transparent to-transparent"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 bg-white/10 px-3 py-1.5 rounded-full border border-white/10 mb-6",children:[e.jsxs("span",{className:"relative flex h-3 w-3",children:[e.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"}),e.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-red-500"})]}),e.jsx("span",{className:"text-xs font-bold tracking-widest uppercase",children:"Live Session"})]}),e.jsx("h2",{className:"text-3xl md:text-4xl font-bold font-serif leading-tight mb-4",children:w.topic}),e.jsxs("p",{className:"text-indigo-200 text-sm",children:[l.wilaya," - ",l.district]})]}),e.jsx("div",{className:"relative z-10 mt-auto",children:e.jsxs("div",{className:"text-center p-6 bg-white/5 rounded-2xl border border-white/10 backdrop-blur-sm",children:[e.jsx("p",{className:"text-indigo-200 text-xs font-bold uppercase mb-2",children:"  "}),e.jsxs("div",{className:"text-6xl font-bold font-mono tracking-tighter tabular-nums flex items-center justify-center gap-2",children:[e.jsx(rs,{size:32,className:"text-indigo-400"}),V]}),e.jsx("p",{className:"text-[10px] text-indigo-300/50 mt-2 animate-pulse",children:" ..."})]})})]}),e.jsxs("div",{className:"flex-1 bg-white p-10 flex flex-col items-center justify-center text-center relative",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-2xl font-bold text-slate-800 mb-2",children:"  "}),e.jsx("p",{className:"text-slate-500",children:"      "})]}),e.jsx("div",{className:"bg-white p-4 rounded-3xl shadow-xl border-4 border-slate-100 mb-8 transform hover:scale-105 transition-transform duration-300",children:e.jsx("img",{src:`https://api.qrserver.com/v1/create-qr-code/?size=250x250&data=https://live.mufattish.dz/join/${w.id}`,alt:"QR Code",className:"w-64 h-64 object-contain mix-blend-multiply"})}),e.jsxs("div",{className:"w-full max-w-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 bg-slate-100 p-2 pl-4 rounded-xl border border-slate-200 mb-6 group",children:[e.jsxs("span",{className:"flex-1 text-left text-slate-600 font-mono text-sm truncate dir-ltr",children:["live.mufattish.dz/join/",w.id.substring(0,4)]}),e.jsx("button",{onClick:()=>Ne(`https://live.mufattish.dz/join/${w.id}`),className:"p-2 bg-white text-slate-500 hover:text-indigo-600 rounded-lg shadow-sm hover:shadow transition-all",title:" ",children:e.jsx(Ol,{size:16})})]}),e.jsxs("button",{onClick:()=>alert("  ! (   )"),className:"w-full bg-slate-900 text-white py-4 rounded-2xl font-bold text-lg hover:bg-black transition-all shadow-lg hover:shadow-2xl flex items-center justify-center gap-3 group",children:[e.jsx("span",{children:" "}),e.jsx(Fl,{className:"group-hover:-translate-x-1 transition-transform"})]})]})]})]})}),x==="attendance"&&e.jsx("div",{className:"p-6 md:p-8 flex-1 overflow-y-auto print:hidden animate-in fade-in",children:e.jsxs("div",{className:"max-w-6xl mx-auto space-y-8",children:[e.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-200",children:[e.jsxs("h3",{className:"font-bold text-lg text-indigo-800 mb-4 flex items-center gap-2",children:[e.jsx(Wu,{size:20}),"   ( )"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-4",children:[e.jsx(ve,{label:" ",value:b,onChange:y,placeholder:":  ..."}),e.jsx(ve,{label:" ( ...)",value:A,onChange:E,placeholder:":  1  /  ..."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsx(ve,{type:"date",label:"",value:N,onChange:C}),e.jsx(ve,{label:" (/ - )",value:R,onChange:P,placeholder:" ....   ...."})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-3",children:"  ( ):"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:cb.map(ie=>e.jsx("button",{onClick:()=>j(ie),className:`px-4 py-2 rounded-full text-xs font-bold transition-all border ${O.includes(ie)?"bg-indigo-600 text-white border-indigo-600 shadow-md":"bg-slate-50 text-slate-600 border-slate-200 hover:bg-slate-100"}`,children:ie},ie))})]})]}),T.length>0?e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b bg-slate-50 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(rs,{size:18,className:"text-slate-500"}),e.jsxs("span",{className:"font-bold text-slate-700",children:["  (",T.length," )"]})]}),e.jsxs("button",{onClick:xe,className:"bg-indigo-600 text-white px-4 py-2 rounded-lg text-sm font-bold shadow hover:bg-indigo-700 flex items-center gap-2",children:[o?e.jsx(Dt,{size:16}):e.jsx(bs,{size:16}),"   "]})]}),e.jsxs("table",{className:"w-full text-right text-sm",children:[e.jsx("thead",{className:"bg-slate-100 text-slate-600 font-bold",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 w-12",children:"#"}),e.jsx("th",{className:"p-3",children:" "}),e.jsx("th",{className:"p-3",children:""}),e.jsx("th",{className:"p-3",children:""}),e.jsx("th",{className:"p-3 text-center w-32",children:" "}),e.jsx("th",{className:"p-3 w-32",children:" "})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:T.map((ie,ee)=>{const ke=K.includes(ie.id);return e.jsxs("tr",{className:`hover:bg-slate-50 transition-colors ${ke?"bg-red-50/50":""}`,children:[e.jsx("td",{className:"p-3 text-slate-400 font-mono",children:ee+1}),e.jsx("td",{className:"p-3 font-bold text-slate-800",children:ie.fullName}),e.jsx("td",{className:"p-3 text-slate-600",children:ie.schoolName}),e.jsx("td",{className:"p-3 text-slate-500 text-xs",children:e.jsx("span",{className:"bg-slate-100 px-2 py-1 rounded border",children:ie.levelName})}),e.jsx("td",{className:"p-3 text-center",children:e.jsx("button",{onClick:()=>H(ie.id),className:`w-full py-1.5 rounded text-xs font-bold transition-all border ${ke?"bg-red-100 text-red-700 border-red-200":"bg-white text-slate-400 border-slate-200 hover:border-slate-300"}`,children:ke?"":""})}),e.jsx("td",{className:"p-3",children:ke&&e.jsxs("button",{onClick:()=>$(ie),className:"text-red-600 text-xs font-bold hover:underline flex items-center gap-1",children:[e.jsx(kn,{size:14})," "]})})]},ie.id)})})]})]}):e.jsxs("div",{className:"text-center py-12 text-slate-400 bg-slate-50 rounded-2xl border-2 border-dashed border-slate-200",children:[e.jsx(Et,{size:48,className:"mx-auto mb-3 opacity-20"}),e.jsx("p",{children:"         ."})]})]})}),x==="calendar"&&e.jsx("div",{className:"p-6 md:p-8 flex-1 overflow-y-auto print:hidden animate-in fade-in",children:e.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-800 font-serif",children:"  "}),e.jsx("p",{className:"text-slate-500 text-xs",children:"     "})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 bg-white px-3 py-1.5 rounded-lg border shadow-sm",children:[e.jsx("span",{className:"text-xs font-bold text-slate-500",children:":"}),e.jsxs("select",{value:B,onChange:ie=>q(ie.target.value),className:"bg-transparent text-sm font-bold text-indigo-700 outline-none",children:[e.jsx("option",{value:"",children:""}),e.jsx("option",{value:"",children:""}),e.jsx("option",{value:"",children:""})]})]}),e.jsxs("button",{onClick:xe,className:"bg-indigo-600 text-white px-4 py-2 rounded-lg text-sm font-bold shadow hover:bg-indigo-700 flex items-center gap-2",children:[o?e.jsx(Dt,{size:16}):e.jsx(bs,{size:16}),"  "]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm text-right",children:[e.jsx("thead",{className:"bg-slate-50 text-slate-600 font-bold border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 w-10",children:"#"}),e.jsx("th",{className:"p-3 w-8",children:""}),e.jsx("th",{className:"p-3",children:" "}),e.jsx("th",{className:"p-3 w-28",children:""}),e.jsx("th",{className:"p-3 w-32",children:""}),e.jsx("th",{className:"p-3 w-20",children:""}),e.jsx("th",{className:"p-3",children:" "}),e.jsx("th",{className:"p-3 w-20",children:""}),e.jsx("th",{className:"p-3 w-32",children:""}),e.jsx("th",{className:"p-3 w-24 text-center",children:""})]})}),e.jsxs("tbody",{className:"divide-y divide-slate-100",children:[J.map((ie,ee)=>{const ke=M(ie.targetLevels);return e.jsxs("tr",{className:"hover:bg-slate-50 group",children:[e.jsx("td",{className:"p-3 text-slate-400 font-mono",children:ee+1}),e.jsx("td",{className:"p-3 text-center",title:ie.isInteractive?"":"",children:ie.isInteractive?e.jsx(li,{size:16,className:"text-purple-600 mx-auto"}):e.jsx(ep,{size:16,className:"text-slate-400 mx-auto"})}),e.jsxs("td",{className:"p-3 font-bold text-slate-800",children:[ie.topic,ie.isInteractive&&e.jsx("span",{className:"mr-2 text-[9px] bg-purple-100 text-purple-700 px-1.5 py-0.5 rounded border border-purple-200",children:""})]}),e.jsx("td",{className:"p-3 text-slate-600 dir-ltr",children:new Date(ie.date).toLocaleDateString("ar-DZ")}),e.jsx("td",{className:"p-3 text-slate-600",children:ie.location||"-"}),e.jsx("td",{className:"p-3 text-slate-600",children:ie.duration}),e.jsx("td",{className:"p-3",children:e.jsx("div",{className:"flex flex-wrap gap-1",children:ie.targetLevels.map(jt=>e.jsx("span",{className:"bg-indigo-50 text-indigo-700 px-2 py-0.5 rounded text-[10px] border border-indigo-100",children:jt.replace("","")},jt))})}),e.jsx("td",{className:"p-3 text-center",children:e.jsx("span",{className:"font-bold text-slate-700 bg-slate-100 px-2 py-1 rounded text-xs",children:ke})}),e.jsx("td",{className:"p-3 text-slate-600 text-xs",children:ie.supervisor}),e.jsx("td",{className:"p-3 text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx("button",{onClick:()=>we(ie),className:`p-1.5 rounded transition-colors ${ie.isInteractive?"text-purple-600 hover:bg-purple-50":"text-blue-500 hover:bg-blue-50"}`,title:ie.isInteractive?"  ":" ",children:ie.isInteractive?e.jsx(U2,{size:16}):e.jsx(Ab,{size:16})}),e.jsx("button",{onClick:()=>de(ie),className:"text-slate-400 hover:text-blue-500 hover:bg-slate-100 p-1.5 rounded",children:e.jsx(Tt,{size:16})}),e.jsx("button",{onClick:()=>fe(ie.id),className:"text-slate-400 hover:text-red-500 hover:bg-slate-100 p-1.5 rounded",children:e.jsx(fl,{size:16})})]})})]},ie.id)}),J.length===0&&e.jsx("tr",{children:e.jsxs("td",{colSpan:10,className:"p-8 text-center text-slate-400",children:[e.jsx(Os,{size:32,className:"mx-auto mb-2 opacity-20"}),'   .   "  ".']})})]})]})}),e.jsxs("button",{onClick:Z,className:"w-full py-4 bg-slate-50 hover:bg-slate-100 text-slate-500 font-bold text-sm flex items-center justify-center gap-2 transition-colors border-t",children:[e.jsx(kr,{size:18}),"   "]})]})]})}),x==="attendance"&&!F&&ul.createPortal(e.jsx("div",{className:"hidden print:block absolute top-0 left-0 w-full h-auto bg-white z-[9999] text-black",children:L.map((ie,ee)=>e.jsxs("div",{className:"a4-page relative flex flex-col justify-start",style:{height:"auto",minHeight:"0",padding:"10mm 15mm",pageBreakAfter:ee<L.length-1?"always":"auto",marginBottom:"0"},children:[e.jsxs("div",{className:"text-center font-bold text-sm mb-4 space-y-1",children:[e.jsx("p",{children:"   "}),e.jsx("p",{children:"  "}),e.jsxs("div",{className:"flex justify-between items-end mt-4 px-2",children:[e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{children:["   ",l.wilaya]}),e.jsxs("p",{children:["   - : ",l.district]})]}),e.jsx("div",{className:"text-left border border-black p-1 px-3 rounded",children:e.jsxs("p",{children:[" : ",new Date().getFullYear(),"/",new Date().getFullYear()+1]})})]})]}),e.jsx("div",{className:"text-center mb-4",children:e.jsxs("h1",{className:"text-lg font-bold border-2 border-black inline-block px-6 py-1.5 bg-gray-50 shadow-[3px_3px_0px_0px_black]",children:["    ",L.length>1?`( ${ee+1})`:""]})}),e.jsxs("div",{className:"flex justify-between items-center mb-4 border-b-2 border-black pb-2 text-xs font-bold bg-gray-50 p-2 rounded border border-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"underline ml-1",children:":"})," ",b||"................................"]}),e.jsxs("p",{children:[e.jsx("span",{className:"underline ml-1",children:":"})," ",N]}),e.jsxs("p",{children:[e.jsx("span",{className:"underline ml-1",children:":"})," ",A||"..........."]})]}),e.jsxs("table",{className:"w-full border-collapse border border-black text-xs text-center",dir:"rtl",children:[e.jsx("thead",{className:"bg-gray-100 h-8",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border border-black p-1 w-10",children:""}),e.jsx("th",{className:"border border-black p-1 w-1/4",children:" "}),e.jsx("th",{className:"border border-black p-1 w-1/4",children:""}),e.jsx("th",{className:"border border-black p-1",children:""}),e.jsx("th",{className:"border border-black p-1 w-24",children:""})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:ie.map((ke,jt)=>e.jsxs("tr",{style:{height:"35px"},children:[e.jsx("td",{className:"border border-black p-1",children:ee*18+jt+1}),e.jsx("td",{className:"border border-black p-1 font-bold text-right pr-2",children:ke.fullName}),e.jsx("td",{className:"border border-black p-1 text-right pr-2",children:ke.schoolName}),e.jsx("td",{className:"border border-black p-1",children:ke.levelName}),e.jsx("td",{className:"border border-black p-1"})]},ke.id))})]})]},ee))}),document.body),F&&x==="attendance"&&ul.createPortal(e.jsx("div",{className:"hidden print:block fixed inset-0 bg-white z-[9999] overflow-visible text-black font-serif top-0 left-0 w-full h-full",children:e.jsxs("div",{className:"p-12 max-w-[210mm] mx-auto h-full",children:[e.jsxs("div",{className:"text-center font-bold text-sm mb-4 space-y-1",children:[e.jsx("p",{children:"   "}),e.jsx("p",{children:"  "})]}),e.jsxs("div",{className:"flex justify-between items-start font-bold text-sm mb-8 px-2",children:[e.jsx("div",{className:"text-right",children:e.jsxs("p",{children:["   ",l.wilaya]})}),e.jsx("div",{className:"text-left",children:e.jsxs("p",{children:["   - : ",l.district]})})]}),e.jsx("div",{className:"flex justify-end mt-4 pl-4 mb-6",children:e.jsxs("div",{className:"text-center w-80",children:[e.jsxs("p",{className:"font-bold text-lg mb-1",children:[" (): ",F.fullName]}),e.jsxs("p",{className:"font-bold text-base mb-1",children:["() : ",(Ae=t[F.id])==null?void 0:Ae.school]}),e.jsx("p",{className:"font-bold text-sm",children:"(/ () )"})]})}),e.jsx("h1",{className:"text-center text-2xl font-bold underline mb-6 decoration-2 underline-offset-8",children:":   "}),e.jsxs("div",{className:"text-justify text-lg leading-[2.2] px-4",children:[R&&e.jsxs("p",{className:"mb-1",children:[e.jsx("span",{className:"font-bold",children:":"})," ",R]}),e.jsxs("p",{children:["      ",R?" ":"","                  ",e.jsx("span",{className:"font-bold",children:N})," : ",e.jsx("span",{className:"font-bold",children:A}),'   "',e.jsx("span",{className:"font-bold",children:b}),'".']}),e.jsx("p",{className:"mt-2",children:"    48      ."}),e.jsx("p",{className:"mt-6 text-center font-bold",children:"   ."})]}),e.jsxs("div",{className:"mt-8 flex justify-between px-12 font-bold text-lg relative",children:[e.jsxs("div",{children:[e.jsxs("p",{children:[" : ",l.wilaya]}),e.jsxs("p",{children:[": ",new Date().toLocaleDateString("ar-DZ")]})]}),e.jsxs("div",{className:"text-center w-48 relative",children:[e.jsx("p",{className:"underline mb-12",children:""}),e.jsx("div",{className:"h-24 w-full flex justify-center items-center relative",children:i&&e.jsx("img",{src:i,alt:"Signature",className:"absolute -top-4 w-32 h-24 object-contain mix-blend-multiply transform -rotate-6 scale-110 pointer-events-none"})})]})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t-2 border-dashed border-black",children:[e.jsx("h3",{className:"font-bold underline text-lg mb-2 px-4",children:" ():"}),e.jsxs("div",{className:"p-4 min-h-[220px] relative border-2 border-black rounded-lg",children:[e.jsxs("div",{className:"space-y-10 mt-4",children:[e.jsx("div",{className:"border-b-2 border-black border-dotted h-1 w-full"}),e.jsx("div",{className:"border-b-2 border-black border-dotted h-1 w-full"}),e.jsx("div",{className:"border-b-2 border-black border-dotted h-1 w-full"}),e.jsx("div",{className:"border-b-2 border-black border-dotted h-1 w-full"})]}),e.jsx("div",{className:"absolute bottom-2 left-4 text-sm font-bold",children:" ():"}),e.jsx("div",{className:"absolute bottom-2 right-4 text-sm font-bold",children:" :"})]})]})]})}),document.body),x==="calendar"&&ul.createPortal(e.jsxs("div",{className:"hidden print:block fixed inset-0 bg-white z-[9999] overflow-visible text-black font-serif top-0 left-0 w-full h-full",children:[e.jsx("style",{children:"@page { size: A4 landscape; margin: 0; }"}),e.jsxs("div",{className:"a4-page-landscape w-[297mm] h-[210mm] p-[10mm] mx-auto relative flex flex-col justify-between",children:[e.jsxs("div",{className:"w-full mb-4 relative",children:[e.jsxs("div",{className:"text-center font-bold text-sm mb-4",children:[e.jsx("p",{children:"   "}),e.jsx("p",{children:"  "})]}),e.jsxs("div",{className:"text-right font-bold text-xs pr-4",children:[e.jsxs("p",{children:["   ",l.wilaya]}),e.jsxs("p",{children:["   - : ",l.district]})]})]}),e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"border-2 border-black rounded-[50%] px-16 py-3 shadow-[3px_3px_0px_0px_rgba(0,0,0,1)] bg-white text-center",children:e.jsxs("h1",{className:"text-xl font-bold font-serif tracking-wide",children:["    ",B]})})}),e.jsx("div",{className:"flex-1",children:e.jsxs("table",{className:"w-full border-collapse border border-black text-center text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"h-10",children:[e.jsx("th",{className:"border border-black p-1 w-8",children:""}),e.jsx("th",{className:"border border-black p-1",children:" "}),e.jsx("th",{className:"border border-black p-1 w-24",children:""}),e.jsx("th",{className:"border border-black p-1 w-32",children:""}),e.jsx("th",{className:"border border-black p-1 w-20",children:" "}),e.jsx("th",{className:"border border-black p-1 w-48",children:" "}),e.jsx("th",{className:"border border-black p-1 w-12",children:""}),e.jsx("th",{className:"border border-black p-1 w-32",children:"  "}),e.jsx("th",{className:"border border-black p-1 w-48",children:""})]})}),e.jsx("tbody",{children:J.map((ie,ee)=>{const ke=M(ie.targetLevels);return e.jsxs("tr",{className:"h-12",children:[e.jsx("td",{className:"border border-black p-1 font-bold",children:ee+1}),e.jsx("td",{className:"border border-black p-1 font-bold",children:ie.topic}),e.jsx("td",{className:"border border-black p-1",children:new Date(ie.date).toLocaleDateString("ar-DZ")}),e.jsx("td",{className:"border border-black p-1",children:ie.location}),e.jsx("td",{className:"border border-black p-1",children:ie.duration}),e.jsx("td",{className:"border border-black p-1 text-xs",children:ie.targetLevels.map(jt=>jt.replace("","").replace("","")).join(" + ")}),e.jsx("td",{className:"border border-black p-1",children:ke>0?ke:""}),e.jsx("td",{className:"border border-black p-1 font-bold text-xs",children:ie.supervisor}),e.jsx("td",{className:"border border-black p-1 text-xs text-right",children:ie.notes})]},ie.id)})})]})}),e.jsx("div",{className:"flex justify-end px-16 mt-4 pb-4",children:e.jsxs("div",{className:"text-center relative",children:[e.jsxs("p",{className:"font-bold text-xs mb-2",children:[" : ",l.wilaya," : ",new Date().toLocaleDateString("ar-DZ")]}),e.jsx("p",{className:"font-bold underline mb-16",children:"  "}),i&&e.jsx("div",{className:"absolute top-12 left-1/2 transform -translate-x-1/2 w-48 h-32 flex items-center justify-center",children:e.jsx("img",{src:i,alt:"Signature",className:"w-full h-full object-contain mix-blend-multiply transform -rotate-6 scale-125"})})]})})]})]}),document.body)]})},Rv="mufattish_mail_register",Ar=()=>{const n=localStorage.getItem(Rv);if(!n)return[];try{return JSON.parse(n)}catch{return[]}},Gh=n=>{localStorage.setItem(Rv,JSON.stringify(n))},vc=(n,t)=>{const i=Ar().filter(c=>c.type===n&&c.year===t&&!isNaN(parseInt(c.number)));if(i.length===0)return"01";let o=0;return i.forEach(c=>{const u=parseInt(c.number);u>o&&(o=u)}),String(o+1).padStart(2,"0")},yc=(n,t,l,i=!1,o)=>{const c=new Date,u=c.getFullYear(),f=c.toISOString().split("T")[0];let x=" ";i||(x=vc(n,u));const m={id:Math.random().toString(36).substr(2,9),type:n,year:u,date:f,number:x,correspondent:t,subject:l,reference:o||""},b=Ar();return b.push(m),Gh(b),m},IA=n=>{const t=Ar();return n?t.filter(l=>l.type===n).sort((l,i)=>new Date(i.date).getTime()-new Date(l.date).getTime()):t.sort((l,i)=>new Date(i.date).getTime()-new Date(l.date).getTime())},zA=n=>{const l=Ar().filter(i=>i.id!==n);Gh(l)},LA=n=>{const t=Ar(),l=t.findIndex(i=>i.id===n.id);l!==-1&&(t[l]=n,Gh(t))},UA=["  ","  ","  "," "," "," "],PA=({teachers:n,reportsMap:t,tenureReportsMap:l,inspectorName:i,wilaya:o,district:c,onBack:u,signature:f,isExpired:x=!1,onUpgradeClick:m})=>{const[b,y]=k.useState("education_director"),[N,C]=k.useState(""),[A,E]=k.useState("  "),[R,P]=k.useState(""),[O,z]=k.useState("visit_report"),[K,G]=k.useState([]),[F,$]=k.useState(""),[B,q]=k.useState("1"),[J,Q]=k.useState(""),U=new Date().getFullYear(),[ae,se]=k.useState(""),[ne,w]=k.useState("03"),[D,V]=k.useState("      "),[Y,le]=k.useState(new Set);k.useEffect(()=>{const xe=vc("outgoing",U);se(xe),J||Q(xe)},[U]);const _=k.useMemo(()=>{const xe=new Set;return Object.values(t).forEach(Ne=>{Ne.school&&xe.add(Ne.school.trim())}),Array.from(xe).sort()},[t]),M=k.useMemo(()=>n.filter(xe=>{var Ne,Ae;if(b==="school_director"&&N&&(((Ne=t[xe.id])==null?void 0:Ne.school)||((Ae=l[xe.id])==null?void 0:Ae.school))!==N)return!1;if(O==="visit_report"){const ie=t[xe.id];return ie&&ie.inspectionDate&&ie.inspectionDate.trim()!==""}else if(O==="tenure_report"){const ie=l[xe.id];return xe.tenureDate&&xe.tenureDate.trim()!==""||ie&&ie.examDate}return!1}).map(xe=>{var Ne,Ae,ie,ee;return{...xe,schoolName:((Ne=t[xe.id])==null?void 0:Ne.school)||((Ae=l[xe.id])==null?void 0:Ae.school)||" ",reportDate:O==="visit_report"?(ie=t[xe.id])==null?void 0:ie.inspectionDate:((ee=l[xe.id])==null?void 0:ee.examDate)||xe.tenureDate}}),[n,t,l,b,N,O]),j=xe=>{const Ne=new Set(Y);Ne.has(xe)?Ne.delete(xe):Ne.add(xe),le(Ne)},T=()=>{const xe=M.map(Ne=>Ne.id);le(new Set(xe))},L=()=>{le(new Set)},H=()=>{if(!F)return;const xe={id:Math.random().toString(36).substr(2,9),name:F,count:B};G([...K,xe]),$(""),q("1")},Z=xe=>{G(K.filter(Ne=>Ne.id!==xe))},de=()=>{if(x&&m)m();else if(window.print(),confirm("        ")){let xe="";b==="education_director"?xe=`  (${A})`:b==="school_director"?xe=`  ${N}`:xe=R||" ";let Ne="";O==="visit_report"?Ne="  ( )":O==="tenure_report"?Ne="  ( )":Ne="  ( )",yc("outgoing",xe,Ne,!1),alert("    .")}},fe=M.filter(xe=>Y.has(xe.id));let je=0;if(O==="other_docs")je=K.reduce((xe,Ne)=>xe+(parseInt(Ne.count)||0),0);else{const xe=fe.length,Ne=parseInt(ne)||0;je=xe*Ne}const we=e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"text-center mb-8 shrink-0",children:[e.jsx("h3",{className:"font-bold text-sm",children:"   "}),e.jsx("h3",{className:"font-bold text-sm mb-4",children:"  "}),e.jsxs("div",{className:"flex justify-between items-start text-xs font-bold px-2 mt-6",children:[e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{children:["   ",o]}),e.jsx("p",{children:"  "}),e.jsxs("p",{children:[": ",c]}),e.jsxs("p",{className:"mt-1",children:[": ",e.jsx("span",{className:"font-mono text-sm",children:J||"...."})," / ",U]})]}),e.jsxs("div",{className:"text-center pt-6 pl-4",children:[e.jsx("p",{children:" "}),e.jsx("p",{children:" :"}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("p",{className:"text-sm mt-1 mb-1 font-bold",children:b==="education_director"?" ":b==="school_director"?`  ${N}`:R||"..........................."}),b==="education_director"&&e.jsxs("p",{className:"text-xs font-normal",children:["(",A,")"]})]})]})]})]}),e.jsx("div",{className:"text-center mb-8 shrink-0",children:e.jsx("h1",{className:"text-2xl font-bold underline decoration-2 underline-offset-8",children:" "})}),e.jsxs("div",{className:"border-2 border-black flex-1 flex flex-col min-h-0",children:[e.jsxs("div",{className:"flex border-b-2 border-black bg-gray-100 text-center font-bold text-sm shrink-0",children:[e.jsx("div",{className:"w-16 border-l-2 border-black py-2",children:""}),e.jsx("div",{className:"flex-1 border-l-2 border-black py-2",children:"  "}),e.jsx("div",{className:"w-20 border-l-2 border-black py-2",children:""}),e.jsx("div",{className:"w-36 py-2",children:""})]}),e.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[e.jsx("div",{className:"w-16 border-l-2 border-black text-center py-4 font-bold text-sm",children:O==="other_docs"?e.jsx("div",{className:"space-y-3",children:K.map((xe,Ne)=>e.jsx("div",{className:"h-6",children:String(Ne+1).padStart(2,"0")},Ne))}):"01"}),e.jsxs("div",{className:"flex-1 border-l-2 border-black p-4 text-sm font-bold leading-loose overflow-visible",children:[e.jsx("p",{className:"mb-6 text-base",children:"     :"}),O==="other_docs"?e.jsx("div",{className:"space-y-3 mr-4",children:K.map(xe=>e.jsxs("div",{className:"h-6",children:["- ",xe.name]},xe.id))}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"mb-4 text-sm underline underline-offset-4",children:O==="visit_report"?"      :":"      :"}),e.jsx("div",{className:"space-y-3 mr-4",children:fe.map(xe=>e.jsxs("div",{className:"h-6 flex items-center",children:[e.jsxs("span",{children:["- ",xe.fullName]}),b==="education_director"&&e.jsxs("span",{className:"text-[10px] font-normal mx-2 text-gray-600",children:["(",xe.schoolName,")"]})]},xe.id))})]})]}),e.jsx("div",{className:"w-20 border-l-2 border-black pt-4 pb-4 flex flex-col",children:O==="other_docs"?e.jsx("div",{className:"space-y-3 text-center text-sm font-bold pt-10",children:K.map(xe=>e.jsx("div",{className:"h-6",children:parseInt(xe.count)>9?xe.count:`0${xe.count}`},xe.id))}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-10 mb-4"}),e.jsx("div",{className:"space-y-3 text-center text-sm font-bold pt-6",children:fe.map(xe=>e.jsx("div",{className:"h-6 flex items-center justify-center",children:ne.padStart(2,"0")},xe.id))})]})}),e.jsx("div",{className:"w-36 p-2 text-center text-xs font-bold leading-relaxed flex items-center justify-center",children:D})]}),e.jsxs("div",{className:"flex border-t-2 border-black h-10 font-bold text-sm shrink-0",children:[e.jsx("div",{className:"flex-1 border-l-2 border-black flex items-center justify-center bg-gray-50",children:" "}),e.jsx("div",{className:"w-20 border-l-2 border-black flex items-center justify-center text-lg",children:je>0?String(je).padStart(2,"0"):""}),e.jsx("div",{className:"w-36 bg-gray-50"})]})]}),e.jsxs("div",{className:"mt-8 flex justify-between px-8 shrink-0",children:[e.jsx("div",{className:"text-center font-bold text-sm",children:e.jsx("p",{children:""})}),e.jsxs("div",{className:"text-center font-bold text-sm w-1/3 relative",children:[e.jsxs("p",{className:"mb-8",children:[o," : ",new Date().toLocaleDateString("ar-DZ")]}),e.jsx("p",{className:"mb-2",children:" "}),e.jsx("p",{className:"text-xs text-gray-400 mt-8"}),f&&e.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-40 h-28 pointer-events-none mix-blend-multiply mt-4",children:e.jsx("img",{src:f,className:"w-full h-full object-contain opacity-90 -rotate-6",alt:"Signature"})})]})]})]});return e.jsxs("div",{className:"h-full flex flex-col md:flex-row bg-slate-50 overflow-hidden",children:[e.jsxs("div",{className:"w-full md:w-80 bg-white border-l border-slate-200 flex flex-col h-full overflow-y-auto print:hidden shadow-lg z-10",children:[e.jsxs("div",{className:"p-4 bg-slate-800 text-white shrink-0 flex items-center gap-3",children:[e.jsx("button",{onClick:u,className:"p-1 hover:bg-white/20 rounded-full transition-colors",children:e.jsx(Fl,{size:20})}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-bold text-lg",children:" "}),e.jsx("p",{className:"text-slate-400 text-[10px]",children:"  "})]})]}),e.jsxs("div",{className:"p-5 space-y-6 flex-1",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase block",children:"1.  "}),e.jsxs("div",{className:"bg-slate-50 p-3 rounded-xl border border-slate-200 mb-2",children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsxs("label",{className:"text-[10px] font-bold text-slate-500 flex items-center gap-1",children:[e.jsx(Ku,{size:10}),"   "]}),ae&&e.jsxs("span",{className:"text-[9px] bg-blue-50 text-blue-600 px-1.5 py-0.5 rounded border border-blue-100 flex items-center gap-1",children:[e.jsx(wh,{size:8})," : ",ae]})]}),e.jsx(ve,{value:J,onChange:Q,placeholder:": 45",className:"w-full"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsxs("button",{onClick:()=>{y("education_director")},className:`p-2 rounded-xl border flex flex-col items-center gap-1 transition-all ${b==="education_director"?"bg-blue-50 border-blue-500 text-blue-700":"bg-white border-slate-200 hover:bg-slate-50"}`,children:[e.jsx(Xa,{size:18}),e.jsx("span",{className:"text-[10px] font-bold",children:" "})]}),e.jsxs("button",{onClick:()=>{y("school_director")},className:`p-2 rounded-xl border flex flex-col items-center gap-1 transition-all ${b==="school_director"?"bg-blue-50 border-blue-500 text-blue-700":"bg-white border-slate-200 hover:bg-slate-50"}`,children:[e.jsx(Et,{size:18}),e.jsx("span",{className:"text-[10px] font-bold",children:" "})]}),e.jsxs("button",{onClick:()=>{y("other_entity")},className:`p-2 rounded-xl border flex flex-col items-center gap-1 transition-all ${b==="other_entity"?"bg-blue-50 border-blue-500 text-blue-700":"bg-white border-slate-200 hover:bg-slate-50"}`,children:[e.jsx(vs,{size:18}),e.jsx("span",{className:"text-[10px] font-bold",children:" "})]})]}),b==="education_director"&&e.jsx("div",{className:"animate-in fade-in slide-in-from-top-2",children:e.jsx("select",{value:A,onChange:xe=>E(xe.target.value),className:"w-full p-2.5 bg-slate-50 border border-slate-300 rounded-lg text-sm font-bold text-slate-700 outline-none focus:ring-2 focus:ring-blue-500",children:UA.map(xe=>e.jsx("option",{value:xe,children:xe},xe))})}),b==="school_director"&&e.jsx("div",{className:"animate-in fade-in slide-in-from-top-2",children:e.jsxs("select",{value:N,onChange:xe=>{C(xe.target.value),le(new Set)},className:"w-full p-2.5 bg-slate-50 border border-slate-300 rounded-lg text-sm font-bold text-slate-700 outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"--   --"}),_.map(xe=>e.jsx("option",{value:xe,children:xe},xe))]})}),b==="other_entity"&&e.jsx("div",{className:"animate-in fade-in slide-in-from-top-2",children:e.jsx(ve,{value:R,onChange:P,placeholder:"   ...",className:"w-full"})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase block",children:"2.  "}),e.jsxs("div",{className:"flex bg-slate-100 p-1 rounded-lg overflow-x-auto no-scrollbar",children:[e.jsx("button",{onClick:()=>{z("visit_report"),le(new Set)},className:`flex-1 py-2 px-1 text-[10px] font-bold rounded-md transition-all whitespace-nowrap ${O==="visit_report"?"bg-white shadow text-slate-900":"text-slate-500"}`,children:" "}),e.jsx("button",{onClick:()=>{z("tenure_report"),le(new Set)},className:`flex-1 py-2 px-1 text-[10px] font-bold rounded-md transition-all whitespace-nowrap ${O==="tenure_report"?"bg-white shadow text-slate-900":"text-slate-500"}`,children:" "}),e.jsx("button",{onClick:()=>{z("other_docs")},className:`flex-1 py-2 px-1 text-[10px] font-bold rounded-md transition-all whitespace-nowrap ${O==="other_docs"?"bg-white shadow text-slate-900":"text-slate-500"}`,children:" "})]})]}),O!=="other_docs"&&e.jsxs("div",{className:"space-y-3 bg-gray-50 p-3 rounded-lg border border-gray-200",children:[e.jsxs("label",{className:"text-xs font-bold text-slate-500 uppercase flex items-center gap-2",children:[e.jsx(Rb,{size:14}),"  "]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] font-bold text-gray-400 mb-1",children:"   "}),e.jsx("input",{type:"number",min:"1",value:ne,onChange:xe=>w(xe.target.value),className:"w-full p-2 border rounded text-sm font-bold text-center"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] font-bold text-gray-400 mb-1",children:" ( )"}),e.jsx("textarea",{value:D,onChange:xe=>V(xe.target.value),className:"w-full p-2 border rounded text-xs h-16 resize-none"})]}),e.jsx("div",{className:"flex-1 flex flex-col min-h-0",children:O==="other_docs"?e.jsxs("div",{className:"space-y-3 border-t pt-2",children:[e.jsxs("label",{className:"text-xs font-bold text-slate-500 uppercase flex items-center gap-2",children:[e.jsx(pj,{size:14}),"  "]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"flex-1",children:e.jsx(ve,{value:F,onChange:$,placeholder:" ...",className:"w-full"})}),e.jsx("div",{className:"w-16",children:e.jsx("input",{type:"number",min:"1",value:B,onChange:xe=>q(xe.target.value),className:"w-full p-2 border rounded text-sm font-bold text-center h-[38px]",placeholder:""})}),e.jsx("button",{onClick:H,className:"bg-blue-600 text-white p-2 rounded hover:bg-blue-700 h-[38px] w-[38px] flex items-center justify-center",children:e.jsx(kr,{size:20})})]}),e.jsxs("div",{className:"space-y-2 mt-2 max-h-[150px] overflow-y-auto",children:[K.map((xe,Ne)=>e.jsxs("div",{className:"flex justify-between items-center bg-slate-50 p-2 rounded border border-slate-200 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"font-mono text-slate-400",children:[Ne+1,"."]}),e.jsx("span",{className:"font-bold text-slate-700",children:xe.name})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"bg-white px-2 py-0.5 rounded border font-mono font-bold",children:xe.count}),e.jsx("button",{onClick:()=>Z(xe.id),className:"text-red-400 hover:text-red-600",children:e.jsx(fl,{size:14})})]})]},xe.id)),K.length===0&&e.jsx("p",{className:"text-center text-xs text-slate-400 py-2",children:"    "})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("label",{className:"text-xs font-bold text-slate-500 uppercase",children:["  (",M.length,")"]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:T,className:"text-[10px] text-blue-600 hover:underline",children:""}),e.jsx("span",{className:"text-slate-300",children:"|"}),e.jsx("button",{onClick:L,className:"text-[10px] text-slate-400 hover:text-slate-600",children:" "})]})]}),e.jsx("div",{className:"border border-slate-200 rounded-lg flex-1 overflow-y-auto p-2 bg-white min-h-[150px]",children:M.length>0?M.map(xe=>e.jsxs("div",{onClick:()=>j(xe.id),className:`flex items-center gap-3 p-2 rounded-lg cursor-pointer mb-1 transition-colors ${Y.has(xe.id)?"bg-blue-50 border border-blue-200":"hover:bg-slate-50 border border-transparent"}`,children:[e.jsx("div",{className:`w-4 h-4 rounded border flex items-center justify-center ${Y.has(xe.id)?"bg-blue-600 border-blue-600":"border-slate-300"}`,children:Y.has(xe.id)&&e.jsx(gs,{size:12,className:"text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs font-bold text-slate-800 truncate",children:xe.fullName}),e.jsxs("p",{className:"text-[10px] text-slate-500 flex justify-between",children:[e.jsx("span",{children:xe.schoolName}),e.jsx("span",{children:xe.reportDate})]})]})]},xe.id)):e.jsx("div",{className:"text-center py-8 text-slate-400 text-xs",children:"    "})})]})}),e.jsxs("button",{onClick:de,disabled:O!=="other_docs"&&Y.size===0,className:"w-full bg-slate-900 text-white py-3 rounded-xl font-bold shadow-lg hover:bg-slate-800 transition-all flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed mt-4",children:[x?e.jsx(Dt,{size:18}):e.jsx(bs,{size:18})," "]})]})]}),e.jsx("div",{className:"flex-1 bg-slate-100 p-8 overflow-y-auto flex justify-center items-start print:hidden",children:e.jsx("div",{className:"bg-white shadow-2xl w-[210mm] min-h-[297mm] p-[15mm] relative text-black font-serif flex flex-col",children:we})}),ul.createPortal(e.jsx("div",{className:"hidden print:flex fixed inset-0 w-full h-full bg-white z-[9999] p-[15mm] flex-col text-black font-serif",children:we}),document.body)]})},$A=({teachers:n,reportsMap:t,inspectorName:l,wilaya:i,district:o,onBack:c,signature:u,isExpired:f=!1,onUpgradeClick:x})=>{const[m,b]=k.useState(""),[y,N]=k.useState(new Date().toISOString().split("T")[0]),[C,A]=k.useState(""),[E,R]=k.useState(`                . 
              .`),P=k.useMemo(()=>n.filter(G=>G.status==="stagiere").map(G=>{var F;return{...G,schoolName:((F=t[G.id])==null?void 0:F.school)||" "}}),[n,t]),O=k.useMemo(()=>P.find(G=>G.id===m),[P,m]),z=()=>{if(f&&x)x();else if(window.print(),confirm("       ( )")){const G=O?` ${O.fullName} ( ${O.schoolName})`:" ";yc("outgoing",G,"   ",!0),alert(" .")}},K=e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"text-center mb-6 shrink-0",children:[e.jsx("h3",{className:"font-bold text-sm",children:"   "}),e.jsx("h3",{className:"font-bold text-sm mb-4",children:"  "}),e.jsxs("div",{className:"flex justify-between items-start text-sm font-bold px-2 border-b-2 border-black pb-3",children:[e.jsxs("div",{className:"text-right w-1/2 space-y-1",children:[e.jsxs("p",{children:["   ",i]}),e.jsx("p",{children:"  "}),e.jsxs("p",{children:[": ",o]})]}),e.jsx("div",{className:"text-left w-1/2",children:e.jsxs("p",{children:[i," : ",new Date().toLocaleDateString("ar-DZ")]})})]})]}),e.jsxs("div",{className:"flex-1 px-4 flex flex-col",children:[e.jsx("div",{className:"flex justify-center mb-8 shrink-0",children:e.jsx("div",{className:"border-[3px] border-black px-10 py-2 bg-gray-50 shadow-[4px_4px_0px_0px_rgba(0,0,0,1)]",children:e.jsx("h1",{className:"text-2xl font-bold tracking-wide",children:"   "})})}),e.jsxs("div",{className:"mb-8 text-base leading-relaxed font-bold shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"w-32 whitespace-nowrap",children:" ():"}),e.jsx("span",{className:"border-b border-dotted border-black flex-1 inline-block",children:(O==null?void 0:O.fullName)||"................................"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-32 whitespace-nowrap",children:"() :"}),e.jsx("span",{className:"border-b border-dotted border-black flex-1 inline-block",children:(O==null?void 0:O.schoolName)||"................................"})]}),e.jsx("div",{className:"mt-4 text-center w-full",children:e.jsx("span",{className:"underline decoration-1 underline-offset-4",children:"  () () "})})]}),e.jsxs("div",{className:"mb-6 border border-black p-3 rounded-lg shrink-0",children:[e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx("span",{className:"font-bold underline text-base w-20",children:":"}),e.jsx("span",{className:"text-base font-bold",children:"    ()."})]}),e.jsxs("div",{className:"flex gap-2 items-start",children:[e.jsx("span",{className:"font-bold underline text-base w-20",children:":"}),e.jsx("span",{className:"text-base flex-1 leading-relaxed",children:C||"................................................................"})]})]}),e.jsxs("div",{className:"mb-8 text-justify text-base leading-loose font-medium indent-8 flex-1",children:[e.jsx("p",{className:"whitespace-pre-line",children:E}),e.jsxs("p",{className:"mt-3",children:["    : ",e.jsx("span",{className:"font-bold bg-gray-100 px-2 border border-gray-300 mx-1",children:new Date(y).toLocaleDateString("ar-DZ")}),"       (08:00) ."]})]}),e.jsxs("div",{className:"flex justify-between items-start mt-auto pt-4 shrink-0",children:[e.jsxs("div",{className:"text-center w-1/3",children:[e.jsx("p",{className:"font-bold underline mb-2",children:" () "}),e.jsx("p",{className:"text-xs text-gray-400 mb-8",children:"( )"})]}),e.jsx("div",{className:"text-center w-1/3",children:e.jsx("p",{className:"font-bold underline mb-2",children:" () "})}),e.jsxs("div",{className:"text-center w-1/3 relative",children:[e.jsx("p",{className:"font-bold underline mb-8",children:" "}),e.jsx("div",{className:"h-24 w-full"}),u&&e.jsx("div",{className:"absolute top-10 left-1/2 transform -translate-x-1/2 w-40 h-28 pointer-events-none mix-blend-multiply",children:e.jsx("img",{src:u,className:"w-full h-full object-contain opacity-90 -rotate-6",alt:"Signature"})})]})]})]})]});return e.jsxs("div",{className:"h-full flex flex-col md:flex-row bg-slate-50 overflow-hidden",children:[e.jsxs("div",{className:"w-full md:w-80 bg-white border-l border-slate-200 flex flex-col h-full overflow-y-auto print:hidden shadow-lg z-10",children:[e.jsxs("div",{className:"p-4 bg-slate-800 text-white shrink-0 flex items-center gap-3",children:[e.jsx("button",{onClick:c,className:"p-1 hover:bg-white/20 rounded-full transition-colors",children:e.jsx(Fl,{size:20})}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-bold text-lg",children:" "}),e.jsx("p",{className:"text-slate-400 text-[10px]",children:"  "})]})]}),e.jsxs("div",{className:"p-5 space-y-6 flex-1",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase block",children:"1.  "}),P.length>0?e.jsx("div",{className:"space-y-2",children:P.map(G=>e.jsxs("div",{onClick:()=>b(G.id),className:`p-3 rounded-xl border cursor-pointer transition-all flex items-center gap-3 ${m===G.id?"bg-indigo-50 border-indigo-500 ring-1 ring-indigo-500":"bg-white border-slate-200 hover:bg-slate-50"}`,children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold ${m===G.id?"bg-indigo-200 text-indigo-700":"bg-slate-100 text-slate-500"}`,children:e.jsx(vs,{size:16})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-bold text-slate-800 truncate",children:G.fullName}),e.jsxs("p",{className:"text-[10px] text-slate-500 truncate flex items-center gap-1",children:[e.jsx(Et,{size:10})," ",G.schoolName]})]})]},G.id))}):e.jsx("div",{className:"text-center py-8 bg-slate-50 border border-dashed border-slate-300 text-slate-400 text-xs",children:"   "})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase block",children:"2.  "}),e.jsx(ve,{type:"date",label:" ",value:y,onChange:N}),e.jsx(ve,{label:" ( )",placeholder:":   ...  ...",value:C,onChange:A})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase block",children:"3.  "}),e.jsx(Pe,{value:E,onChange:R,className:"w-full p-3 border rounded-xl text-xs leading-relaxed min-h-[120px] resize-none focus:ring-2 focus:ring-indigo-500 outline-none"})]}),e.jsxs("button",{onClick:z,disabled:!m,className:"w-full bg-indigo-600 text-white py-3 rounded-xl font-bold shadow-lg hover:bg-indigo-700 transition-all flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed mt-auto",children:[f?e.jsx(Dt,{size:18}):e.jsx(bs,{size:18}),"  "]})]})]}),e.jsx("div",{className:"flex-1 bg-slate-100 p-8 overflow-y-auto flex justify-center items-start print:hidden",children:e.jsx("div",{className:"bg-white shadow-2xl w-[210mm] min-h-[297mm] p-[15mm] relative text-black font-serif flex flex-col",children:K})}),ul.createPortal(e.jsx("div",{className:"hidden print:flex fixed inset-0 w-full h-full bg-white z-[9999] p-[15mm] flex-col text-black font-serif",children:K}),document.body)]})},qA=({reportsMap:n,inspectorName:t,wilaya:l,district:i,onBack:o,signature:c,isExpired:u=!1,onUpgradeClick:f})=>{const[x,m]=k.useState("school"),[b,y]=k.useState(""),[N,C]=k.useState(""),[A,E]=k.useState(""),R=new Date().getFullYear(),[P,O]=k.useState(""),[z,K]=k.useState(""),[G,F]=k.useState(""),[$,B]=k.useState(""),[q,J]=k.useState("   ...");k.useEffect(()=>{const ne=vc("outgoing",R);O(ne),A||E(ne)},[R]);const Q=k.useMemo(()=>{const ne=new Set;return Object.values(n).forEach(w=>{w.school&&ne.add(w.school.trim())}),Array.from(ne).sort()},[n]),U=()=>{if(u&&f)f();else if(window.print(),confirm("       ")){const ne=x==="school"?`()  ${b}`:N.split(`
`)[0];yc("outgoing",ne,z,!1),alert(" .")}},ae=()=>{if(x==="school")return e.jsxs("div",{className:"text-center min-w-[250px]",children:[e.jsx("p",{className:"mb-1 text-sm",children:" ():"}),e.jsx("div",{className:"border-b border-black pb-1",children:e.jsxs("p",{className:"font-bold",children:["()  ",b||"................"]})})]});{const ne=N.split(`
`),w=ne[0],D=ne.slice(1);return e.jsxs("div",{className:"text-center min-w-[250px]",children:[e.jsx("p",{className:"mb-1 text-sm",children:" ():"}),e.jsxs("div",{className:"border-b border-black pb-1",children:[e.jsx("p",{className:"font-bold",children:w||"................................"}),D.map((V,Y)=>e.jsx("p",{className:"text-sm font-normal mt-0.5",children:V},Y))]})]})}},se=e.jsxs("div",{className:"flex flex-col h-full justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"text-center mb-6 shrink-0",children:[e.jsx("h3",{className:"font-bold text-sm",children:"   "}),e.jsx("h3",{className:"font-bold text-sm mb-6",children:"  "}),e.jsxs("div",{className:"flex justify-between items-start text-sm font-bold px-2 border-b-2 border-black pb-4",children:[e.jsxs("div",{className:"text-right w-1/2 space-y-1",children:[e.jsxs("p",{children:["   ",l]}),e.jsx("p",{children:"  "}),e.jsxs("p",{children:[": ",i]}),e.jsxs("p",{className:"mt-1",children:[": ",e.jsx("span",{className:"font-mono text-sm",children:A||"...."})," / ",R]})]}),e.jsx("div",{className:"text-left w-1/2",children:e.jsxs("p",{children:[l," : ",new Date().toLocaleDateString("ar-DZ")]})})]})]}),e.jsx("div",{className:"mb-8 text-lg pl-8 flex justify-end shrink-0",children:ae()}),e.jsxs("div",{className:"mb-6 space-y-2 shrink-0",children:[e.jsxs("div",{className:"flex gap-2 items-start",children:[e.jsx("span",{className:"font-bold underline text-base w-20 shrink-0",children:":"}),e.jsx("span",{className:"text-base font-bold leading-normal",children:z||"................................................................"})]}),G&&e.jsxs("div",{className:"flex gap-2 items-start",children:[e.jsx("span",{className:"font-bold underline text-base w-20 shrink-0",children:":"}),e.jsx("span",{className:"text-base leading-normal",children:G})]}),$&&e.jsxs("div",{className:"flex gap-2 items-start",children:[e.jsx("span",{className:"font-bold underline text-base w-20 shrink-0",children:":"}),e.jsx("span",{className:"text-base leading-normal",children:$})]})]})]}),e.jsx("div",{className:"flex-1 mb-4 text-justify text-lg leading-[2.2] font-medium indent-8 whitespace-pre-line overflow-hidden",children:q}),e.jsx("div",{className:"flex justify-end pt-4 px-8 mt-auto shrink-0",children:e.jsxs("div",{className:"text-center w-64 relative",children:[e.jsx("p",{className:"font-bold underline mb-8",children:" "}),e.jsx("div",{className:"h-16 w-full"}),c&&e.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-40 h-28 pointer-events-none mix-blend-multiply mt-4",children:e.jsx("img",{src:c,className:"w-full h-full object-contain opacity-90 -rotate-6",alt:"Signature"})})]})})]});return e.jsxs("div",{className:"h-full flex flex-col md:flex-row bg-slate-50 overflow-hidden",children:[e.jsxs("div",{className:"w-full md:w-80 bg-white border-l border-slate-200 flex flex-col h-full overflow-y-auto print:hidden shadow-lg z-10",children:[e.jsxs("div",{className:"p-4 bg-slate-800 text-white shrink-0 flex items-center gap-3",children:[e.jsx("button",{onClick:o,className:"p-1 hover:bg-white/20 rounded-full transition-colors",children:e.jsx(Fl,{size:20})}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-bold text-lg",children:" "}),e.jsx("p",{className:"text-slate-400 text-[10px]",children:"   "})]})]}),e.jsxs("div",{className:"p-5 space-y-6 flex-1",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase block",children:"1.  "}),e.jsxs("div",{className:"flex bg-slate-100 p-1 rounded-lg",children:[e.jsxs("button",{onClick:()=>m("school"),className:`flex-1 py-2 text-xs font-bold rounded-md transition-all flex items-center justify-center gap-2 ${x==="school"?"bg-white shadow text-indigo-700":"text-slate-500"}`,children:[e.jsx(Et,{size:14})," "]}),e.jsxs("button",{onClick:()=>m("other"),className:`flex-1 py-2 text-xs font-bold rounded-md transition-all flex items-center justify-center gap-2 ${x==="other"?"bg-white shadow text-indigo-700":"text-slate-500"}`,children:[e.jsx(Xa,{size:14}),"  "]})]}),x==="school"?e.jsx("div",{className:"animate-in fade-in slide-in-from-top-1",children:e.jsxs("select",{value:b,onChange:ne=>y(ne.target.value),className:"w-full p-3 bg-white border border-slate-300 rounded-xl text-sm font-bold text-slate-700 outline-none focus:ring-2 focus:ring-indigo-500",children:[e.jsx("option",{value:"",children:"--   --"}),Q.map(ne=>e.jsx("option",{value:ne,children:ne},ne))]})}):e.jsxs("div",{className:"animate-in fade-in slide-in-from-top-1",children:[e.jsx("label",{className:"text-[10px] text-slate-400 mb-1 block",children:" Enter   "}),e.jsx(Pe,{value:N,onChange:C,placeholder:`:   
( )`,className:"w-full p-3 border rounded-xl text-sm focus:ring-2 focus:ring-indigo-500 outline-none min-h-[80px]"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase block",children:"2.  "}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsxs("label",{className:"text-[10px] font-bold text-slate-400 flex items-center gap-1",children:[e.jsx(Ku,{size:10}),"   ()"]}),P&&e.jsxs("span",{className:"text-[9px] bg-blue-50 text-blue-600 px-1.5 py-0.5 rounded border border-blue-100 flex items-center gap-1",children:[e.jsx(wh,{size:8})," : ",P]})]}),e.jsx(ve,{value:A,onChange:E,placeholder:": 12"}),A!==P&&e.jsxs("p",{className:"text-[9px] text-amber-600 mt-1 text-right",children:[":       ",P]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("label",{className:"text-[10px] font-bold text-slate-400 flex items-center gap-1",children:[e.jsx(kn,{size:10})," "]}),e.jsx(ve,{value:z,onChange:K,placeholder:"  ..."})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("label",{className:"text-[10px] font-bold text-slate-400 flex items-center gap-1",children:[e.jsx(Ku,{size:10}),"  ()"]}),e.jsx(ve,{value:G,onChange:F,placeholder:" / ..."})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("label",{className:"text-[10px] font-bold text-slate-400 flex items-center gap-1",children:[e.jsx(j2,{size:10}),"  ()"]}),e.jsx(ve,{value:$,onChange:B,placeholder:" ..."})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase block",children:"3.  "}),e.jsx(Pe,{value:q,onChange:J,className:"w-full p-3 border rounded-xl text-xs leading-relaxed min-h-[150px] resize-none focus:ring-2 focus:ring-indigo-500 outline-none",placeholder:"   ..."})]}),e.jsxs("button",{onClick:U,className:"w-full bg-indigo-600 text-white py-3 rounded-xl font-bold shadow-lg hover:bg-indigo-700 transition-all flex items-center justify-center gap-2 mt-auto",children:[u?e.jsx(Dt,{size:18}):e.jsx(bs,{size:18}),"  "]})]})]}),e.jsx("div",{className:"flex-1 bg-slate-100 p-8 overflow-y-auto flex justify-center items-start print:hidden",children:e.jsx("div",{className:"bg-white shadow-2xl w-[210mm] h-[296mm] p-[15mm] relative text-black font-serif flex flex-col justify-between",children:se})}),ul.createPortal(e.jsx("div",{className:"hidden print:flex fixed inset-0 w-full h-full bg-white z-[9999] p-[15mm] flex-col justify-between text-black font-serif",children:se}),document.body)]})},OA=({onBack:n})=>{const[t,l]=k.useState("outgoing"),[i,o]=k.useState([]),[c,u]=k.useState(!1),[f,x]=k.useState(null),[m,b]=k.useState(""),[y,N]=k.useState(""),[C,A]=k.useState(""),[E,R]=k.useState(""),[P,O]=k.useState(""),[z,K]=k.useState(""),[G,F]=k.useState(!1),$=new Date().getFullYear(),B=vc(t,$);k.useEffect(()=>{q()},[t]);const q=()=>{o(IA(t))},J=w=>{confirm("         .")&&(zA(w),q())},Q=w=>{x(w),b(w.notes||"")},U=()=>{f&&(LA({...f,notes:m}),x(null),q())},ae=w=>{w.preventDefault(),yc(t,E,P,G,z),u(!1),R(""),O(""),K(""),F(!1),q()},se=k.useMemo(()=>i.filter(w=>{const D=w.subject.toLowerCase().includes(y.toLowerCase())||w.correspondent.toLowerCase().includes(y.toLowerCase())||w.number.includes(y),V=C?w.correspondent.includes(C):!0;return D&&V}),[i,y,C]),ne=k.useMemo(()=>Array.from(new Set(i.map(w=>w.correspondent))),[i]);return e.jsxs("div",{className:"h-full flex flex-col bg-slate-100 animate-in fade-in",children:[e.jsxs("div",{className:"bg-white border-b border-slate-200 p-4 flex items-center justify-between shadow-sm sticky top-0 z-10",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:n,className:"p-2 hover:bg-slate-100 rounded-full transition-colors text-slate-500",children:e.jsx(Fl,{size:20})}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold text-slate-800 font-serif flex items-center gap-2",children:[e.jsx(fb,{size:24,className:"text-amber-600"}),"  ",t==="outgoing"?"":""]}),e.jsx("p",{className:"text-xs text-slate-400",children:"   "})]})]}),e.jsxs("div",{className:"flex bg-slate-100 p-1 rounded-xl",children:[e.jsxs("button",{onClick:()=>l("outgoing"),className:`px-6 py-2 rounded-lg text-sm font-bold flex items-center gap-2 transition-all ${t==="outgoing"?"bg-white text-orange-600 shadow-md":"text-slate-500 hover:bg-slate-200"}`,children:[e.jsx(Fu,{size:18})," "]}),e.jsxs("button",{onClick:()=>l("incoming"),className:`px-6 py-2 rounded-lg text-sm font-bold flex items-center gap-2 transition-all ${t==="incoming"?"bg-white text-emerald-600 shadow-md":"text-slate-500 hover:bg-slate-200"}`,children:[e.jsx(Vm,{size:18})," "]})]})]}),e.jsxs("div",{className:"px-6 py-4 flex flex-col md:flex-row justify-between items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 w-full md:w-auto flex-1",children:[e.jsxs("div",{className:"relative flex-1 max-w-md group",children:[e.jsx("input",{type:"text",placeholder:"    ...",value:y,onChange:w=>N(w.target.value),className:"w-full pl-4 pr-10 py-2.5 bg-white border border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-500 outline-none transition-all shadow-sm"}),e.jsx(Mb,{size:18,className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 group-focus-within:text-blue-500"})]}),e.jsxs("div",{className:"relative group",children:[e.jsxs("select",{value:C,onChange:w=>A(w.target.value),className:"pl-3 pr-9 py-2.5 bg-white border border-slate-300 rounded-xl text-sm font-bold text-slate-600 focus:ring-2 focus:ring-blue-500 outline-none shadow-sm appearance-none cursor-pointer min-w-[150px]",children:[e.jsx("option",{value:"",children:" "}),ne.map(w=>e.jsx("option",{value:w,children:w},w))]}),e.jsx(Jl,{size:16,className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 pointer-events-none"})]})]}),e.jsxs("button",{onClick:()=>u(!0),className:`px-6 py-2.5 rounded-xl font-bold text-white shadow-lg hover:shadow-xl transition-all flex items-center gap-2 ${t==="outgoing"?"bg-orange-600 hover:bg-orange-700":"bg-emerald-600 hover:bg-emerald-700"}`,children:[e.jsx(kr,{size:20})," ",t==="outgoing"?"":""," "]})]}),e.jsx("div",{className:"flex-1 overflow-auto px-6 pb-6",children:e.jsx("div",{className:"bg-white rounded-xl shadow border border-slate-300 overflow-hidden min-h-[500px] flex flex-col w-full overflow-x-auto",children:e.jsxs("table",{className:"w-full text-right border-collapse min-w-[800px]",children:[e.jsx("thead",{className:`${t==="outgoing"?"bg-orange-50 text-orange-900":"bg-emerald-50 text-emerald-900"} text-xs font-bold uppercase sticky top-0 z-30 shadow-sm`,children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-4 border-b border-slate-200 w-24",children:""}),e.jsx("th",{className:"p-4 border-b border-slate-200 w-32",children:""}),e.jsx("th",{className:"p-4 border-b border-slate-200 w-1/4",children:t==="outgoing"?" ":" "}),e.jsx("th",{className:"p-4 border-b border-slate-200",children:""}),t==="incoming"?e.jsx("th",{className:"p-4 border-b border-slate-200 w-32",children:" "}):e.jsx("th",{className:"p-4 border-b border-slate-200 w-1/4",children:""}),e.jsx("th",{className:"p-4 border-b border-slate-200 w-32 text-center bg-gray-50/50",children:""})]})}),e.jsxs("tbody",{className:"divide-y divide-slate-200 font-serif text-slate-700 bg-white",children:[se.map(w=>e.jsxs("tr",{className:"hover:bg-yellow-50/50 transition-colors group",children:[e.jsxs("td",{className:"p-4 border-l border-slate-100 font-bold font-mono text-slate-800",children:[w.number," ",e.jsxs("span",{className:"text-[10px] text-slate-400",children:["/ ",w.year]})]}),e.jsx("td",{className:"p-4 border-l border-slate-100 text-sm whitespace-nowrap",children:new Date(w.date).toLocaleDateString("ar-DZ")}),e.jsx("td",{className:"p-4 border-l border-slate-100 font-bold",children:w.correspondent}),e.jsx("td",{className:"p-4 border-l border-slate-100 text-sm leading-relaxed",children:w.subject}),t==="incoming"?e.jsx("td",{className:"p-4 border-l border-slate-100 text-xs text-slate-500 font-mono",children:w.reference||"-"}):e.jsx("td",{className:"p-4 border-l border-slate-100 text-xs text-slate-500 truncate max-w-[200px]",title:w.notes,children:w.notes||"-"}),e.jsx("td",{className:"p-4 text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("button",{onClick:D=>{D.preventDefault(),D.stopPropagation(),Q(w)},className:"text-blue-600 bg-blue-50 hover:bg-blue-600 hover:text-white transition-all p-2 rounded-lg shadow-sm border border-blue-200",title:" ",children:e.jsx(Tt,{size:16})}),e.jsx("button",{onClick:D=>{D.preventDefault(),D.stopPropagation(),J(w.id)},className:"text-red-600 bg-red-50 hover:bg-red-600 hover:text-white transition-all p-2 rounded-lg shadow-sm border border-red-200",title:" ",children:e.jsx(fl,{size:16})})]})})]},w.id)),se.length===0&&e.jsx("tr",{children:e.jsxs("td",{colSpan:6,className:"p-12 text-center text-slate-400",children:[e.jsx(pN,{size:48,className:"mx-auto mb-2 opacity-20"}),e.jsx("p",{children:"  ."})]})})]})]})})}),c&&e.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md p-6 border border-slate-200",children:[e.jsxs("h3",{className:"font-bold text-xl mb-6 text-slate-800 flex items-center gap-2",children:[t==="outgoing"?e.jsx(Fu,{className:"text-orange-600"}):e.jsx(Vm,{className:"text-emerald-600"})," ",t==="outgoing"?"":""," "]}),e.jsxs("form",{onSubmit:ae,className:"space-y-4",children:[e.jsxs("div",{className:"bg-slate-50 p-3 rounded-xl border border-slate-200 flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-bold text-slate-500",children:"  :"}),e.jsx("span",{className:"font-mono font-bold text-lg text-blue-600 bg-white px-3 py-1 rounded border border-blue-200 shadow-sm",children:G?" ":`${B} / ${$}`})]}),t==="outgoing"&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"noNumber",checked:G,onChange:w=>F(w.target.checked),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),e.jsx("label",{htmlFor:"noNumber",className:"text-sm text-slate-600 font-bold cursor-pointer",children:"  (  )"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:t==="outgoing"?" ":" "}),e.jsx(ve,{value:E,onChange:R,placeholder:":   / ...",className:"w-full"})]}),t==="incoming"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:"  ( )"}),e.jsx("input",{type:"text",value:z,onChange:w=>K(w.target.value),className:"w-full p-2 border rounded-lg text-sm",placeholder:" ....  ...."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:""}),e.jsx(ve,{value:P,onChange:O,placeholder:" ...",className:"w-full"})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>u(!1),className:"flex-1 py-2.5 rounded-xl border border-slate-300 text-slate-500 font-bold hover:bg-slate-50",children:""}),e.jsx("button",{type:"submit",className:`flex-1 py-2.5 rounded-xl text-white font-bold shadow-lg ${t==="outgoing"?"bg-orange-600 hover:bg-orange-700":"bg-emerald-600 hover:bg-emerald-700"}`,children:"  "})]})]})]})}),f&&e.jsx("div",{className:"fixed inset-0 z-[110] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-sm p-6 border border-slate-200",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"font-bold text-lg text-slate-800 flex items-center gap-2",children:[e.jsx(Tt,{size:18,className:"text-blue-600"})," "]}),e.jsx("button",{onClick:()=>x(null),className:"text-slate-400 hover:text-red-500",children:e.jsx(Ze,{size:20})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 font-bold mb-1",children:":"}),e.jsx("p",{className:"text-sm text-slate-700 bg-slate-50 p-2 rounded border border-slate-100 line-clamp-2",children:f.subject})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:" (  )"}),e.jsx(Pe,{value:m,onChange:b,className:"w-full border rounded-xl p-3 text-sm focus:ring-2 focus:ring-blue-500 min-h-[100px]",placeholder:"  ..."})]}),e.jsxs("button",{onClick:U,className:"w-full bg-blue-600 text-white py-2.5 rounded-xl font-bold shadow hover:bg-blue-700 flex items-center justify-center gap-2",children:[e.jsx(Zt,{size:18}),"  "]})]})]})})]})},GA=({teachers:n,reportsMap:t,tenureReportsMap:l,inspectorName:i,wilaya:o,district:c,signature:u,isExpired:f=!1,onUpgradeClick:x})=>{const[m,b]=k.useState("menu");return f?e.jsx("div",{className:"h-full bg-slate-50 p-8 flex flex-col items-center justify-center text-center animate-in fade-in",children:e.jsxs("div",{className:"bg-white p-10 rounded-3xl shadow-xl border border-amber-100 max-w-lg w-full relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-full h-2 bg-gradient-to-r from-amber-400 to-orange-500"}),e.jsx("div",{className:"bg-amber-50 w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6 shadow-inner",children:e.jsx(ec,{size:40,className:"text-amber-500"})}),e.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-2 font-serif",children:"  "}),e.jsx("p",{className:"text-slate-500 mb-8 text-sm leading-relaxed",children:"     ( ).          ."}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 text-sm text-slate-600 bg-slate-50 p-3 rounded-lg border border-slate-100",children:[e.jsx(Dt,{size:16,className:"text-slate-400"}),e.jsx("span",{children:"   "})]}),e.jsxs("div",{className:"flex items-center gap-3 text-sm text-slate-600 bg-slate-50 p-3 rounded-lg border border-slate-100",children:[e.jsx(Dt,{size:16,className:"text-slate-400"}),e.jsx("span",{children:"  "})]})]}),e.jsx("button",{onClick:x,className:"w-full bg-amber-500 hover:bg-amber-600 text-white font-bold py-3.5 rounded-xl mt-8 shadow-lg shadow-amber-200 transition-all transform hover:scale-105",children:"  "}),e.jsx("p",{className:"text-xs text-slate-400 mt-4",children:"  "})]})}):m==="schedule"?e.jsx(PA,{teachers:n,reportsMap:t,tenureReportsMap:l,inspectorName:i,wilaya:o,district:c,onBack:()=>b("menu"),signature:u,isExpired:f,onUpgradeClick:x}):m==="tenure_notice"?e.jsx($A,{teachers:n,reportsMap:t,inspectorName:i,wilaya:o,district:c,onBack:()=>b("menu"),signature:u,isExpired:f,onUpgradeClick:x}):m==="correspondence"?e.jsx(qA,{reportsMap:t,inspectorName:i,wilaya:o,district:c,onBack:()=>b("menu"),signature:u,isExpired:f,onUpgradeClick:x}):m==="register"?e.jsx(OA,{onBack:()=>b("menu")}):e.jsxs("div",{className:"h-full bg-slate-50 p-8 flex flex-col animate-in fade-in",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("div",{className:"w-20 h-20 bg-blue-900 rounded-3xl flex items-center justify-center mx-auto mb-4 text-white shadow-xl rotate-3",children:e.jsx(_r,{size:40})}),e.jsx("h1",{className:"text-3xl font-bold text-slate-800 font-serif",children:" "}),e.jsx("p",{className:"text-slate-500 mt-2",children:"     "})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-6 max-w-7xl mx-auto w-full",children:[e.jsxs("button",{onClick:()=>b("schedule"),className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-200 hover:shadow-xl hover:border-blue-300 hover:-translate-y-1 transition-all group text-right",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-50 text-blue-600 rounded-xl flex items-center justify-center mb-4 group-hover:bg-blue-600 group-hover:text-white transition-colors",children:e.jsx(kn,{size:24})}),e.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-2",children:" "}),e.jsx("p",{className:"text-xs text-slate-400 leading-relaxed",children:"         ."})]}),e.jsxs("button",{onClick:()=>b("tenure_notice"),className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-200 hover:shadow-xl hover:border-indigo-300 hover:-translate-y-1 transition-all group text-right",children:[e.jsx("div",{className:"w-12 h-12 bg-indigo-50 text-indigo-600 rounded-xl flex items-center justify-center mb-4 group-hover:bg-indigo-600 group-hover:text-white transition-colors",children:e.jsx(tc,{size:24})}),e.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-2",children:" "}),e.jsx("p",{className:"text-xs text-slate-400 leading-relaxed",children:"       ."})]}),e.jsxs("button",{onClick:()=>b("correspondence"),className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-200 hover:shadow-xl hover:border-emerald-300 hover:-translate-y-1 transition-all group text-right",children:[e.jsx("div",{className:"w-12 h-12 bg-emerald-50 text-emerald-600 rounded-xl flex items-center justify-center mb-4 group-hover:bg-emerald-600 group-hover:text-white transition-colors",children:e.jsx(Bl,{size:24})}),e.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-2",children:" "}),e.jsx("p",{className:"text-xs text-slate-400 leading-relaxed",children:"        ."})]}),e.jsxs("button",{onClick:()=>b("register"),className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-200 hover:shadow-xl hover:border-amber-300 hover:-translate-y-1 transition-all group text-right relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-2 h-full bg-amber-500"}),e.jsx("div",{className:"w-12 h-12 bg-amber-50 text-amber-600 rounded-xl flex items-center justify-center mb-4 group-hover:bg-amber-600 group-hover:text-white transition-colors",children:e.jsx(fb,{size:24})}),e.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-2",children:" "}),e.jsx("p",{className:"text-xs text-slate-400 leading-relaxed",children:"  (/)    ."})]})]})]})},HA=()=>e.jsx("div",{className:"p-6 md:p-8 h-full overflow-y-auto bg-slate-50 animate-in fade-in custom-scrollbar",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-12 pb-12",children:[e.jsxs("div",{className:"bg-white rounded-3xl shadow-sm border border-slate-200 p-6 flex flex-col md:flex-row justify-between items-center gap-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-20 h-20 drop-shadow-xl shrink-0",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:`
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
  <defs>
    <linearGradient id="grad1" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#1e3a8a;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#172554;stop-opacity:1" />
    </linearGradient>
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feGaussianBlur in="SourceAlpha" stdDeviation="15" result="blur"/>
      <feOffset in="blur" dx="5" dy="5" result="offsetBlur"/>
      <feMerge>
        <feMergeNode in="offsetBlur"/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>
  </defs>
  <path fill="url(#grad1)" d="M256 0L477.7 128V384L256 512L34.3 384V128L256 0Z" filter="url(#shadow)" />
  <path fill="none" stroke="#fbbf24" stroke-width="40" stroke-linecap="round" stroke-linejoin="round" d="M360 160C360 160 340 250 256 350C190 270 170 230 170 230" />
  <path fill="none" stroke="#fbbf24" stroke-width="40" stroke-linecap="round" d="M256 350L310 410" />
</svg>
    `},className:"w-full h-full"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-800 font-serif mb-1",children:" "}),e.jsx("p",{className:"text-slate-500 font-medium",children:" "})]})]}),e.jsxs("div",{className:"flex items-center gap-4 bg-slate-50 p-2 pr-4 rounded-full border border-slate-100",children:[e.jsx("span",{className:"text-xs font-bold text-slate-400",children:" :"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("a",{href:"https://www.facebook.com/profile.php?id=61584959875720",target:"_blank",rel:"noopener noreferrer",className:"w-10 h-10 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center hover:bg-blue-600 hover:text-white transition-all shadow-sm transform hover:scale-110",title:"",children:e.jsx(vb,{size:20})}),e.jsx("a",{href:"https://t.me/+5TbKaIJ_kgZhZDA0",target:"_blank",rel:"noopener noreferrer",className:"w-10 h-10 rounded-full bg-sky-100 text-sky-500 flex items-center justify-center hover:bg-sky-500 hover:text-white transition-all shadow-sm transform hover:scale-110",title:"",children:e.jsx(Db,{size:20})}),e.jsx("a",{href:"https://chat.whatsapp.com/HTIWa3WFjq41WtAyFGzaDb?mode=hqrc",target:"_blank",rel:"noopener noreferrer",className:"w-10 h-10 rounded-full bg-green-100 text-green-600 flex items-center justify-center hover:bg-green-600 hover:text-white transition-all shadow-sm transform hover:scale-110",title:"",children:e.jsx(Tb,{size:20})})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-slate-900 via-blue-900 to-indigo-900 rounded-3xl shadow-2xl p-8 text-white relative overflow-hidden group",children:[e.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-10 group-hover:opacity-20 transition-opacity duration-1000",children:e.jsx(Er,{size:250})}),e.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row gap-8 items-center",children:[e.jsx("div",{className:"p-5 bg-white/10 rounded-3xl backdrop-blur-md border border-white/20 shadow-inner",children:e.jsx(Dt,{size:56,className:"text-emerald-400"})}),e.jsxs("div",{className:"flex-1 text-center md:text-right",children:[e.jsx("h2",{className:"text-2xl font-bold mb-3 font-serif text-emerald-300",children:"  "}),e.jsxs("p",{className:"leading-relaxed text-slate-200 text-lg mb-4 max-w-3xl",children:["      ",e.jsx("strong",{children:'"  "'}),".    :"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm font-medium",children:[e.jsxs("div",{className:"bg-white/5 rounded-xl p-3 border border-white/10 flex items-center gap-3",children:[e.jsx(vt,{size:20,className:"text-emerald-400 shrink-0"}),e.jsx("span",{children:"     ."})]}),e.jsxs("div",{className:"bg-white/5 rounded-xl p-3 border border-white/10 flex items-center gap-3",children:[e.jsx(vt,{size:20,className:"text-emerald-400 shrink-0"}),e.jsx("span",{children:"      ."})]}),e.jsxs("div",{className:"bg-white/5 rounded-xl p-3 border border-white/10 flex items-center gap-3",children:[e.jsx(vt,{size:20,className:"text-emerald-400 shrink-0"}),e.jsx("span",{children:"     ."})]})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-800 font-serif mb-8 border-r-4 border-blue-600 pr-4",children:"  "}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-white rounded-3xl border border-slate-200 shadow-sm overflow-hidden flex flex-col h-full",children:[e.jsxs("div",{className:"bg-blue-50/50 p-6 border-b border-blue-100 flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-blue-100 text-blue-700 rounded-xl",children:e.jsx(Cr,{size:28})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-slate-800",children:"1.   "}),e.jsx("p",{className:"text-sm text-slate-500",children:"    "})]})]}),e.jsxs("div",{className:"p-6 space-y-6 flex-1",children:[e.jsxs("div",{className:"flex gap-4 items-start group",children:[e.jsx("div",{className:"mt-1 w-2 h-2 rounded-full bg-blue-400 group-hover:scale-150 transition-transform"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-slate-700 mb-1",children:"  (Excel)"}),e.jsx("p",{className:"text-sm text-slate-500 leading-relaxed",children:"        (Excel)       ."})]})]}),e.jsxs("div",{className:"flex gap-4 items-start group",children:[e.jsx("div",{className:"mt-1 w-2 h-2 rounded-full bg-blue-400 group-hover:scale-150 transition-transform"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-slate-700 mb-1",children:"  (Google Sheets)"}),e.jsx("p",{className:"text-sm text-slate-500 leading-relaxed",children:"   Google Sheet          ( )   ."})]})]}),e.jsxs("div",{className:"flex gap-4 items-start group",children:[e.jsx("div",{className:"mt-1 w-2 h-2 rounded-full bg-blue-400 group-hover:scale-150 transition-transform"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-slate-700 mb-1",children:"   "}),e.jsx("p",{className:"text-sm text-slate-500 leading-relaxed",children:"          ."})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-3xl border border-slate-200 shadow-sm overflow-hidden flex flex-col h-full",children:[e.jsxs("div",{className:"bg-indigo-50/50 p-6 border-b border-indigo-100 flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-indigo-100 text-indigo-700 rounded-xl",children:e.jsx(kn,{size:28})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-slate-800",children:"2.   "}),e.jsx("p",{className:"text-sm text-slate-500",children:"  "})]})]}),e.jsxs("div",{className:"p-6 space-y-6 flex-1",children:[e.jsxs("div",{className:"flex gap-4 items-start group",children:[e.jsx("div",{className:"mt-1 w-2 h-2 rounded-full bg-indigo-400 group-hover:scale-150 transition-transform"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-slate-700 mb-1",children:"  "}),e.jsxs("p",{className:"text-sm text-slate-500 leading-relaxed",children:["      .   ",e.jsx("strong",{children:" "}),"    ."]})]})]}),e.jsxs("div",{className:"flex gap-4 items-start group",children:[e.jsx("div",{className:"mt-1 w-2 h-2 rounded-full bg-indigo-400 group-hover:scale-150 transition-transform"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-slate-700 mb-1",children:"  ()"}),e.jsx("p",{className:"text-sm text-slate-500 leading-relaxed",children:"    :            ."})]})]}),e.jsxs("div",{className:"flex gap-4 items-start group",children:[e.jsx("div",{className:"mt-1 w-2 h-2 rounded-full bg-indigo-400 group-hover:scale-150 transition-transform"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-slate-700 mb-1",children:"  ()"}),e.jsx("p",{className:"text-sm text-slate-500 leading-relaxed",children:"    (  )      ."})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-3xl border border-slate-200 shadow-sm overflow-hidden flex flex-col h-full",children:[e.jsxs("div",{className:"bg-teal-50/50 p-6 border-b border-teal-100 flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-teal-100 text-teal-700 rounded-xl",children:e.jsx(Sr,{size:28})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-slate-800",children:"3.   "}),e.jsx("p",{className:"text-sm text-slate-500",children:"  "})]})]}),e.jsxs("div",{className:"p-6 space-y-6 flex-1",children:[e.jsxs("div",{className:"flex gap-4 items-start group",children:[e.jsx("div",{className:"mt-1 w-2 h-2 rounded-full bg-teal-400 group-hover:scale-150 transition-transform"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-slate-700 mb-1",children:"  "}),e.jsx("p",{className:"text-sm text-slate-500 leading-relaxed",children:"   (  )      (  )."})]})]}),e.jsxs("div",{className:"flex gap-4 items-start group",children:[e.jsx("div",{className:"mt-1 w-2 h-2 rounded-full bg-teal-400 group-hover:scale-150 transition-transform"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-slate-700 mb-1",children:"  (Focus Mode)"}),e.jsx("p",{className:"text-sm text-slate-500 leading-relaxed",children:"   (:    /)     ."})]})]}),e.jsxs("div",{className:"flex gap-4 items-start group",children:[e.jsx("div",{className:"mt-1 w-2 h-2 rounded-full bg-teal-400 group-hover:scale-150 transition-transform"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-slate-700 mb-1",children:"  "}),e.jsx("p",{className:"text-sm text-slate-500 leading-relaxed",children:'            " ".'})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-3xl border border-slate-200 shadow-sm overflow-hidden flex flex-col h-full",children:[e.jsxs("div",{className:"bg-amber-50/50 p-6 border-b border-amber-100 flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-amber-100 text-amber-700 rounded-xl",children:e.jsx(_r,{size:28})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-slate-800",children:"4.   "}),e.jsx("p",{className:"text-sm text-slate-500",children:"  "})]})]}),e.jsxs("div",{className:"p-6 space-y-6 flex-1",children:[e.jsxs("div",{className:"flex gap-4 items-start group",children:[e.jsx("div",{className:"mt-1 w-2 h-2 rounded-full bg-amber-400 group-hover:scale-150 transition-transform"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-slate-700 mb-1",children:"  "}),e.jsx("p",{className:"text-sm text-slate-500 leading-relaxed",children:"            ."})]})]}),e.jsxs("div",{className:"flex gap-4 items-start group",children:[e.jsx("div",{className:"mt-1 w-2 h-2 rounded-full bg-amber-400 group-hover:scale-150 transition-transform"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-slate-700 mb-1",children:" "}),e.jsx("p",{className:"text-sm text-slate-500 leading-relaxed",children:"        ()  ."})]})]}),e.jsxs("div",{className:"flex gap-4 items-start group",children:[e.jsx("div",{className:"mt-1 w-2 h-2 rounded-full bg-amber-400 group-hover:scale-150 transition-transform"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-slate-700 mb-1",children:" "}),e.jsx("p",{className:"text-sm text-slate-500 leading-relaxed",children:"    (  )     ."})]})]})]})]})]})]}),e.jsx("div",{className:"text-center pt-8 border-t border-slate-200",children:e.jsx("p",{className:"text-slate-400 font-serif italic text-lg",children:'"             :  ."'})})]})}),BA=()=>{const[n,t]=k.useState(!1),[l,i]=k.useState(""),[o,c]=k.useState(""),[u,f]=k.useState(""),[x,m]=k.useState(""),[b,y]=k.useState(!0),[N,C]=k.useState(""),[A,E]=k.useState(""),R=()=>{C(""),E(""),c(""),m(""),b||f("")},P=async O=>{if(O.preventDefault(),!uc()||!$e){C("   Supabase  .");return}if(!b){if(o!==x){C("    .");return}if(u.trim().length<3){C("     .");return}}t(!0),C(""),E("");try{if(b){const{error:z}=await $e.auth.signInWithPassword({email:l,password:o});if(z)throw z}else{const{error:z}=await $e.auth.signUp({email:l,password:o,options:{data:{full_name:u}}});if(z)throw z;E("   !       ."),y(!0),c(""),m("")}}catch(z){console.error(z),z.message.includes("Invalid login")?C("      ."):z.message.includes("Email not confirmed")?C("       ."):z.message.includes("User already registered")?C("      ."):z.message.includes("Password should be")?C("     6   ."):C(" : "+z.message)}finally{t(!1)}};return uc()?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 p-4",dir:"rtl",children:e.jsxs("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-2xl overflow-hidden animate-in fade-in zoom-in-95 duration-300",children:[e.jsxs("div",{className:"bg-white p-8 pb-0 text-center relative z-10",children:[e.jsx("div",{className:"w-20 h-20 bg-blue-600 rounded-2xl rotate-3 flex items-center justify-center mx-auto mb-6 shadow-lg shadow-blue-500/30",children:e.jsx(Dt,{className:"text-white -rotate-3",size:40})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800 font-serif",children:" "}),e.jsx("p",{className:"text-gray-500 mt-2 text-sm font-medium",children:"  "})]}),e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"flex bg-gray-100 p-1 rounded-lg mb-6",children:[e.jsx("button",{onClick:()=>{y(!0),R()},className:`flex-1 py-2 text-sm font-bold rounded-md transition-all ${b?"bg-white text-blue-800 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:""}),e.jsx("button",{onClick:()=>{y(!1),R()},className:`flex-1 py-2 text-sm font-bold rounded-md transition-all ${b?"text-gray-500 hover:text-gray-700":"bg-white text-blue-800 shadow-sm"}`,children:" "})]}),N&&e.jsxs("div",{className:"mb-6 p-4 bg-red-50 text-red-700 rounded-xl text-xs border border-red-100 flex items-start gap-3 animate-in slide-in-from-top-2",children:[e.jsx(Os,{size:18,className:"shrink-0"}),e.jsx("span",{className:"leading-snug",children:N})]}),A&&e.jsxs("div",{className:"mb-6 p-4 bg-green-50 text-green-700 rounded-xl text-xs border border-green-100 flex items-start gap-3 animate-in slide-in-from-top-2",children:[e.jsx(vt,{size:18,className:"shrink-0"}),e.jsx("span",{className:"leading-snug",children:A})]}),e.jsxs("form",{onSubmit:P,className:"space-y-4",children:[!b&&e.jsxs("div",{className:"animate-in slide-in-from-top-2",children:[e.jsx("label",{className:"block text-xs font-bold text-gray-700 mb-2 mr-1",children:" "}),e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",required:!b,value:u,onChange:O=>f(O.target.value),className:"w-full pl-4 pr-11 py-3 border-2 border-gray-100 rounded-xl focus:border-blue-500 focus:ring-0 outline-none transition-all text-sm bg-gray-50 focus:bg-white font-bold text-gray-700",placeholder:" "}),e.jsx("div",{className:"absolute right-3 top-3 text-gray-400 group-focus-within:text-blue-500 transition-colors",children:e.jsx(vs,{size:20})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-700 mb-2 mr-1",children:" "}),e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"email",required:!0,value:l,onChange:O=>i(O.target.value),className:"w-full pl-4 pr-11 py-3 border-2 border-gray-100 rounded-xl focus:border-blue-500 focus:ring-0 outline-none transition-all text-sm bg-gray-50 focus:bg-white font-bold text-gray-700",placeholder:"name@education.dz"}),e.jsx("div",{className:"absolute right-3 top-3 text-gray-400 group-focus-within:text-blue-500 transition-colors",children:e.jsx(s2,{size:20})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-700 mb-2 mr-1",children:" "}),e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"password",required:!0,value:o,onChange:O=>c(O.target.value),className:"w-full pl-4 pr-11 py-3 border-2 border-gray-100 rounded-xl focus:border-blue-500 focus:ring-0 outline-none transition-all text-sm bg-gray-50 focus:bg-white font-bold text-gray-700",placeholder:"",minLength:6}),e.jsx("div",{className:"absolute right-3 top-3 text-gray-400 group-focus-within:text-blue-500 transition-colors",children:e.jsx(Dt,{size:20})})]})]}),!b&&e.jsxs("div",{className:"animate-in slide-in-from-top-2",children:[e.jsx("label",{className:"block text-xs font-bold text-gray-700 mb-2 mr-1",children:"  "}),e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"password",required:!b,value:x,onChange:O=>m(O.target.value),className:`w-full pl-4 pr-11 py-3 border-2 rounded-xl focus:ring-0 outline-none transition-all text-sm bg-gray-50 focus:bg-white font-bold text-gray-700 ${x&&o!==x?"border-red-200 focus:border-red-500":"border-gray-100 focus:border-blue-500"}`,placeholder:"",minLength:6}),e.jsx("div",{className:"absolute right-3 top-3 text-gray-400 group-focus-within:text-blue-500 transition-colors",children:e.jsx(Dt,{size:20})})]}),x&&o!==x&&e.jsx("p",{className:"text-[10px] text-red-500 mt-1 mr-1 font-bold",children:"   "})]}),e.jsx("button",{type:"submit",disabled:n,className:"w-full bg-blue-800 text-white font-bold py-3.5 rounded-xl hover:bg-blue-900 transition-all shadow-lg hover:shadow-xl hover:-translate-y-0.5 flex items-center justify-center gap-2 disabled:opacity-70 disabled:cursor-not-allowed disabled:transform-none mt-4",children:n?e.jsx(ci,{className:"animate-spin",size:20}):b?e.jsxs(e.Fragment,{children:[e.jsx(Xj,{size:20})," "]}):e.jsxs(e.Fragment,{children:[e.jsx(Tw,{size:20})," "]})})]}),e.jsxs("div",{className:"mt-8 pt-6 border-t border-gray-100 text-[11px] text-gray-500 flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-blue-700 font-bold mb-1",children:[e.jsx(Vl,{size:14}),e.jsx("span",{children:"  "})]}),e.jsxs("p",{className:"leading-relaxed opacity-80",children:["   ",e.jsx("b",{children:" "})," ( ).   ( )     Google Sheets        ."]})]})]})]})}):e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 p-4",dir:"rtl",children:e.jsxs("div",{className:"max-w-lg w-full bg-white rounded-xl shadow-lg p-8 text-center border border-orange-100",children:[e.jsx("div",{className:"w-20 h-20 bg-orange-50 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(Uj,{size:40,className:"text-orange-500"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"   "}),e.jsxs("div",{className:"text-gray-600 mb-8 text-sm leading-relaxed space-y-4 text-right",children:[e.jsxs("p",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-orange-500 font-bold",children:""}),e.jsxs("span",{children:["      ",e.jsx("b",{children:"Supabase"}),"      ."]})]}),e.jsxs("p",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-orange-500 font-bold",children:""}),e.jsxs("span",{children:["    ",e.jsx("b",{children:" "}),"     Supabase."]})]})]}),e.jsxs("div",{className:"bg-gray-900 text-gray-300 p-4 rounded-lg text-left text-xs font-mono mb-6 overflow-x-auto shadow-inner",children:[e.jsx("span",{className:"text-green-400",children:"# In services/supabaseService.ts or .env file:"}),e.jsx("br",{}),'const SUPABASE_URL = "YOUR_PROJECT_URL";',e.jsx("br",{}),'const SUPABASE_ANON_KEY = "YOUR_ANON_KEY";']}),e.jsxs("p",{className:"text-xs text-gray-400 border-t pt-4",children:["    : ",e.jsx("code",{children:"npm install @supabase/supabase-js"})]})]})})},VA=()=>{const[n,t]=k.useState(1),[l,i]=k.useState(!1),[o,c]=k.useState("idle"),[u,f]=k.useState(""),[x,m]=k.useState(""),b=R=>{navigator.clipboard.writeText(R),i(!0),setTimeout(()=>i(!1),2e3)},y=async()=>{c("loading"),f(""),m("");try{if(!$e)throw new Error("Supabase  ");console.log("Testing connection to 'super-action'...");const R="00000000-0000-0000-0000-000000000000",{data:P,error:O}=await $e.functions.invoke("super-action",{body:{planType:"monthly",userId:R}});if(O)throw console.error("Edge Function Error:",O),O;if(console.log("Response Data:",P),P&&(P.checkout_url||P.id))c("success"),f(" !     Chargily."),P.checkout_url&&m(P.checkout_url);else throw P&&P.error?new Error("  : "+P.error):new Error("    .    .")}catch(R){console.error(R),c("error"),f(R.message||" .     super-action.")}},N=`
-- 1.     ( )
create table if not exists public.profiles (
  id uuid references auth.users on delete cascade not null primary key,
  email text,
  full_name text,
  subscription_status text default 'trial',
  plan_type text, 
  trial_ends_at timestamp with time zone default (now() + interval '30 days'),
  subscription_ends_at timestamp with time zone,
  payment_receipt_url text,
  created_at timestamp with time zone default now()
);

-- 2.    (RLS)
alter table public.profiles enable row level security;

-- 3.    ( )
drop policy if exists "Public profiles are viewable by everyone." on public.profiles;
drop policy if exists "Users can insert their own profile." on public.profiles;
drop policy if exists "Users can update own profile." on public.profiles;

-- 4.  
create policy "Public profiles are viewable by everyone." on public.profiles for select using (true);
create policy "Users can insert their own profile." on public.profiles for insert with check (auth.uid() = id);
create policy "Users can update own profile." on public.profiles for update using (auth.uid() = id);

-- 5.   (Storage)
insert into storage.buckets (id, name, public) 
values ('receipts', 'receipts', true)
on conflict (id) do nothing;

drop policy if exists "Anyone can upload receipts" on storage.objects;
drop policy if exists "Anyone can view receipts" on storage.objects;

create policy "Anyone can upload receipts" on storage.objects for insert with check ( bucket_id = 'receipts' );
create policy "Anyone can view receipts" on storage.objects for select using ( bucket_id = 'receipts' );

-- 6.   
create or replace function public.handle_new_user()
returns trigger as $$
begin
  insert into public.profiles (id, email, full_name, trial_ends_at)
  values (new.id, new.email, new.raw_user_meta_data->>'full_name', (now() + interval '30 days'));
  return new;
end;
$$ language plpgsql security definer;

-- 7.  
drop trigger if exists on_auth_user_created on auth.users;
create trigger on_auth_user_created
  after insert on auth.users
  for each row execute procedure public.handle_new_user();
`,C=`
-- 1.    ( )
create table if not exists public_seminars (
  id uuid default gen_random_uuid() primary key,
  created_at timestamp with time zone default now(),
  title text not null, 
  url text not null,   
  color text default 'bg-blue-600',
  is_interactive boolean default false
);

-- 2.   (     )
do $$
begin
  if not exists (select 1 from information_schema.columns where table_name = 'public_seminars' and column_name = 'is_interactive') then
    alter table public_seminars add column is_interactive boolean default false;
  end if;
end $$;

-- 3.  
alter table public_seminars enable row level security;

-- 4.      ()
drop policy if exists "Public Seminars are viewable by everyone" on public_seminars;
drop policy if exists "Admins can insert seminars" on public_seminars;
drop policy if exists "Admins can delete seminars" on public_seminars;

-- 5.  
create policy "Public Seminars are viewable by everyone" 
on public_seminars for select using ( true );

create policy "Admins can insert seminars" 
on public_seminars for insert with check ( auth.role() = 'authenticated' );

create policy "Admins can delete seminars" 
on public_seminars for delete using ( auth.role() = 'authenticated' );
`,A=`
//   (    )
Deno.serve(async (req) => {
  const corsHeaders = {
    'Access-Control-Allow-Origin': '*',
    'Access-Control-Allow-Headers': 'authorization, x-client-info, apikey, content-type',
  }

  if (req.method === 'OPTIONS') {
    return new Response('ok', { headers: corsHeaders })
  }

  try {
    const { planType, userId } = await req.json()
    
    let amount = 700;
    if (planType === 'quarterly') amount = 1800;
    if (planType === 'yearly') amount = 4500;

    const CHARGILY_SECRET_KEY = Deno.env.get('CHARGILY_SECRET_KEY')
    if (!CHARGILY_SECRET_KEY) {
      throw new Error('     ')
    }

    const response = await fetch("https://pay.chargily.net/api/v2/checkouts", {
      method: "POST",
      headers: {
        "Authorization": "Bearer " + CHARGILY_SECRET_KEY,
        "Content-Type": "application/json"
      },
      body: JSON.stringify({
        amount: amount,
        currency: "dzd",
        success_url: "http://localhost:5173/success", 
        failure_url: "http://localhost:5173/failure", 
        metadata: { user_id: userId, plan_type: planType },
        locale: "ar"
      })
    })

    const data = await response.json()

    return new Response(
      JSON.stringify(data),
      { headers: { ...corsHeaders, 'Content-Type': 'application/json' }, status: 200 }
    )

  } catch (error) {
    return new Response(
      JSON.stringify({ error: error.message }),
      { headers: { ...corsHeaders, 'Content-Type': 'application/json' }, status: 400 }
    )
  }
})
`,E=`
//       : payment-webhook
import { createClient } from 'https://esm.sh/@supabase/supabase-js@2'

Deno.serve(async (req) => {
  try {
    // 1.    Chargily
    const payload = await req.json()
    const eventType = payload.type

    // 2.    
    if (eventType === 'checkout.paid') {
      const checkout = payload.data
      const userId = checkout.metadata.user_id
      const planType = checkout.metadata.plan_type
      
      // 3.    ( )
      const supabaseUrl = Deno.env.get('SUPABASE_URL')
      const supabaseKey = Deno.env.get('SUPABASE_SERVICE_ROLE_KEY')
      const supabase = createClient(supabaseUrl, supabaseKey)

      // 4.   
      const now = new Date()
      let endDate = new Date()
      
      if (planType === 'monthly') endDate.setMonth(endDate.getMonth() + 1)
      else if (planType === 'quarterly') endDate.setMonth(endDate.getMonth() + 3)
      else if (planType === 'yearly') endDate.setFullYear(endDate.getFullYear() + 1)

      // 5.   
      const { error } = await supabase
        .from('profiles')
        .update({ 
            subscription_status: 'active',
            plan_type: planType,
            subscription_ends_at: endDate.toISOString()
        })
        .eq('id', userId)

      if (error) throw error
      console.log('User activated:', userId)
    }

    return new Response(JSON.stringify({ received: true }), { status: 200 })

  } catch (err) {
    return new Response(JSON.stringify({ error: err.message }), { status: 400 })
  }
})
`;return e.jsxs("div",{className:"bg-slate-900 text-slate-300 p-6 rounded-2xl shadow-2xl border border-slate-700 h-full overflow-y-auto custom-scrollbar",dir:"rtl",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-8 border-b border-slate-700 pb-6",children:[e.jsx("div",{className:"p-3 bg-indigo-600 rounded-xl text-white shadow-lg shadow-indigo-500/30",children:e.jsx(gw,{size:32})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white font-serif",children:"   (Backend)"}),e.jsx("p",{className:"text-sm text-slate-400 mt-1",children:"   "})]})]}),e.jsxs("div",{className:"flex gap-2 mb-8 overflow-x-auto pb-2 no-scrollbar",children:[e.jsxs("button",{onClick:()=>t(1),className:`flex-1 min-w-[120px] py-3 px-2 rounded-xl font-bold text-[10px] md:text-xs flex flex-col md:flex-row items-center justify-center gap-2 transition-all ${n===1?"bg-blue-600 text-white shadow-lg":"bg-slate-800 text-slate-500 hover:bg-slate-700"}`,children:[e.jsx(Cr,{size:16})," 1. "]}),e.jsxs("button",{onClick:()=>t(2),className:`flex-1 min-w-[120px] py-3 px-2 rounded-xl font-bold text-[10px] md:text-xs flex flex-col md:flex-row items-center justify-center gap-2 transition-all ${n===2?"bg-orange-600 text-white shadow-lg":"bg-slate-800 text-slate-500 hover:bg-slate-700"}`,children:[e.jsx(zb,{size:16})," 2. "]}),e.jsxs("button",{onClick:()=>t(3),className:`flex-1 min-w-[120px] py-3 px-2 rounded-xl font-bold text-[10px] md:text-xs flex flex-col md:flex-row items-center justify-center gap-2 transition-all ${n===3?"bg-purple-600 text-white shadow-lg":"bg-slate-800 text-slate-500 hover:bg-slate-700"}`,children:[e.jsx(Uu,{size:16})," 3. "]}),e.jsxs("button",{onClick:()=>t(4),className:`flex-1 min-w-[120px] py-3 px-2 rounded-xl font-bold text-[10px] md:text-xs flex flex-col md:flex-row items-center justify-center gap-2 transition-all ${n===4?"bg-emerald-600 text-white shadow-lg":"bg-slate-800 text-slate-500 hover:bg-slate-700"}`,children:[e.jsx(Xu,{size:16})," 4. "]}),e.jsxs("button",{onClick:()=>t(5),className:`flex-1 min-w-[120px] py-3 px-2 rounded-xl font-bold text-[10px] md:text-xs flex flex-col md:flex-row items-center justify-center gap-2 transition-all ${n===5?"bg-pink-600 text-white shadow-lg":"bg-slate-800 text-slate-500 hover:bg-slate-700"}`,children:[e.jsx(xb,{size:16})," 5. "]})]}),e.jsxs("div",{className:"bg-black/50 rounded-2xl border border-slate-700 p-6 relative",children:[e.jsxs("button",{onClick:()=>b(n===1?N:n===2?C:n===3?A:n===5?E:""),className:"absolute top-4 left-4 bg-white/10 hover:bg-white/20 text-white px-3 py-1.5 rounded-lg text-xs font-bold flex items-center gap-2 transition-all",disabled:n===4,children:[l?e.jsx(gs,{size:14,className:"text-emerald-400"}):e.jsx(Ol,{size:14}),l?" ":" "]}),n===1&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-3 text-blue-300 text-sm bg-blue-500/10 p-4 rounded-lg border border-blue-500/20",children:[e.jsx(Nb,{size:20,className:"shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("strong",{className:"block mb-2 font-bold text-lg",children:" :   "}),e.jsxs("p",{className:"leading-relaxed mb-2",children:["     ",e.jsx("strong",{children:"SQL Editor"}),"  Supabase  Run.",e.jsx("br",{}),e.jsx("span",{className:"text-xs opacity-70",children:"(         )."})]})]})]}),e.jsx("pre",{className:"text-left text-xs font-mono text-emerald-400 overflow-x-auto p-4 bg-black rounded-xl border border-slate-800 leading-relaxed selection:bg-emerald-900",dir:"ltr",children:N})]}),n===2&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-3 text-orange-300 text-sm bg-orange-500/10 p-4 rounded-lg border border-orange-500/20",children:[e.jsx(it,{size:20,className:"shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("strong",{className:"block mb-2 font-bold text-lg",children:" :  "}),e.jsxs("p",{className:"leading-relaxed",children:['    " ".     ',e.jsx("code",{children:"is_interactive"}),"    ."]})]})]}),e.jsx("pre",{className:"text-left text-xs font-mono text-orange-300 overflow-x-auto p-4 bg-black rounded-xl border border-slate-800 leading-relaxed selection:bg-orange-900",dir:"ltr",children:C})]}),n===3&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-3 text-purple-300 text-sm bg-purple-500/10 p-4 rounded-lg border border-purple-500/20",children:[e.jsx(Uu,{size:20,className:"shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("strong",{className:"block mb-2 font-bold text-lg",children:" :   (super-action)"}),e.jsxs("p",{className:"leading-relaxed mb-3",children:["    ",e.jsx("strong",{children:"  "}),"."]}),e.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-slate-300 text-xs",children:[e.jsxs("li",{children:["  Supabase   ",e.jsx("strong",{children:"Edge Functions"}),"."]}),e.jsxs("li",{children:["   ",e.jsx("code",{children:"super-action"})," (   )."]}),e.jsx("li",{children:"  ."})]})]})]}),e.jsx("pre",{className:"text-left text-xs font-mono text-blue-300 overflow-x-auto p-4 bg-black rounded-xl border border-slate-800 leading-relaxed selection:bg-blue-900",dir:"ltr",children:A})]}),n===4&&e.jsxs("div",{className:"space-y-6 text-center py-8",children:[e.jsx("div",{className:"w-20 h-20 bg-emerald-500/10 rounded-full flex items-center justify-center mx-auto border border-emerald-500/30",children:e.jsx(Xu,{size:40,className:"text-emerald-400"})}),e.jsx("h3",{className:"text-xl font-bold text-white",children:" :   "}),e.jsx("p",{className:"text-slate-400 max-w-lg mx-auto leading-relaxed text-sm",children:"         (Secret Key)  Chargily."}),e.jsxs("div",{className:"bg-slate-800 p-6 rounded-xl border border-slate-700 text-right space-y-4 max-w-2xl mx-auto",children:[e.jsxs("div",{className:"flex gap-3 items-start bg-yellow-500/10 p-3 rounded-lg border border-yellow-500/30",children:[e.jsx(ys,{size:18,className:"text-yellow-400 shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-xs text-yellow-200",children:[e.jsx("strong",{children:" :"}),"        Secrets   (super-action  payment-webhook)       ."]})]}),e.jsxs("div",{className:"space-y-4 pt-2",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsx("span",{className:"bg-slate-700 w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold shrink-0",children:"1"}),e.jsxs("p",{className:"text-sm",children:["   ",e.jsx("strong",{children:"Environment Variables"})," ( Secrets)."]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("span",{className:"bg-slate-700 w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold shrink-0",children:"2"}),e.jsx("p",{className:"text-sm",children:"   (New Secret)  :"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",dir:"ltr",children:[e.jsxs("div",{className:"bg-black p-3 rounded border border-slate-600",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Name ()"}),e.jsx("code",{className:"text-yellow-400 font-bold select-all",children:"CHARGILY_SECRET_KEY"})]}),e.jsxs("div",{className:"bg-black p-3 rounded border border-slate-600",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Value ()"}),e.jsx("code",{className:"text-emerald-400 select-all",children:"test_sk_... ( )"})]})]})]}),e.jsxs("div",{className:"mt-8 border-t border-slate-700 pt-6",children:[e.jsxs("h4",{className:"text-lg font-bold text-white mb-4 flex items-center justify-center gap-2",children:[e.jsx(di,{className:"text-yellow-400",size:20}),"  "]}),e.jsxs("button",{onClick:y,disabled:o==="loading",className:`px-6 py-3 rounded-xl font-bold flex items-center justify-center gap-2 mx-auto transition-all ${o==="success"?"bg-green-600 text-white":o==="error"?"bg-red-600 text-white":"bg-white text-slate-900 hover:bg-slate-200"}`,children:[o==="loading"?e.jsx(ci,{size:18,className:"animate-spin"}):e.jsx(Uu,{size:18}),o==="success"?" !":o==="error"?" ":"   Chargily "]}),u&&e.jsx("p",{className:`mt-4 text-xs font-bold ${o==="success"?"text-green-400":"text-red-400"}`,children:u}),o==="success"&&x&&e.jsxs("div",{className:"mt-6 bg-slate-800 p-4 rounded-xl border border-slate-600 animate-in fade-in slide-in-from-bottom-2",children:[e.jsxs("h5",{className:"text-emerald-400 font-bold mb-3 flex items-center gap-2 justify-center",children:[e.jsx(gb,{size:18}),"   "]}),e.jsx("p",{className:"text-slate-300 text-sm mb-4",children:"    :"}),e.jsx("div",{className:"bg-black p-3 rounded border border-slate-500 font-mono text-sm text-yellow-400 select-all mb-4 dir-ltr",children:"5078 0300 0000 0001"}),e.jsxs("a",{href:x,target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-2 bg-emerald-600 text-white px-5 py-2.5 rounded-lg font-bold hover:bg-emerald-700 transition-all shadow-lg hover:shadow-emerald-900/20 w-full justify-center",children:[e.jsx(bb,{size:18}),"   ()"]})]})]})]}),n===5&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-3 text-pink-300 text-sm bg-pink-500/10 p-4 rounded-lg border border-pink-500/20",children:[e.jsx(z2,{size:20,className:"shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("strong",{className:"block mb-2 font-bold text-lg",children:" :   (Webhook)"}),e.jsxs("p",{className:"leading-relaxed mb-3",children:["       . ",e.jsx("strong",{className:"text-white bg-red-600 px-1 rounded",children:"   super-action !"})]}),e.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-slate-300 text-xs",children:[e.jsxs("li",{children:["  ",e.jsx("strong",{children:""}),"  ",e.jsx("code",{children:"payment-webhook"}),"."]}),e.jsx("li",{children:"    ."}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:"Deploy"}),"."]}),e.jsxs("li",{children:["      ",e.jsx("strong",{children:"Webhook URL"}),"  Chargily."]})]})]})]}),e.jsx("pre",{className:"text-left text-xs font-mono text-pink-300 overflow-x-auto p-4 bg-black rounded-xl border border-slate-800 leading-relaxed selection:bg-pink-900",dir:"ltr",children:E})]})]})]})},FA=()=>{const[n,t]=k.useState("subs"),[l,i]=k.useState([]),[o,c]=k.useState(!0),[u,f]=k.useState(null),[x,m]=k.useState(null),[b,y]=k.useState([]),[N,C]=k.useState(!1),[A,E]=k.useState({title:"",url:"",color:"bg-blue-600",is_interactive:!1}),[R,P]=k.useState(!1);k.useEffect(()=>{n==="subs"&&O(),n==="content"&&z()},[n]);const O=async()=>{c(!0);const Q=await sA();i(Q),c(!1)},z=async()=>{C(!0);const Q=await Sv();y(Q),C(!1)},K=Q=>{i(U=>U.filter(ae=>ae.id!==Q))},G=async Q=>{if(!confirm(`      ${Q.full_name}  ${Q.plan_type}`))return;m(Q.id);const U=await nA(Q.id,Q.plan_type||"monthly");U!=null&&U.success?(K(Q.id),alert("   !")):alert(" .      (RLS)  Supabase."),m(null)},F=async Q=>{if(!confirm(`      ${Q.full_name}`))return;m(Q.id);const U=await lA(Q.id);U!=null&&U.success?(K(Q.id),alert("    .")):alert("   ."),m(null)},$=async Q=>{if(Q.preventDefault(),!A.title||!A.url)return;P(!0);const{data:U,error:ae}=await XT(A);ae?alert(" : "+ae.message):(E({title:"",url:"",color:"bg-blue-600",is_interactive:!1}),z()),P(!1)},B=async Q=>{if(!confirm("      "))return;const{error:U}=await ZT(Q);U?alert(" "):y(ae=>ae.filter(se=>se.id!==Q))},q=Q=>{switch(Q){case"monthly":return" ";case"quarterly":return"3 ";case"yearly":return" ";default:return" "}},J=[{label:"",value:"bg-blue-600"},{label:"",value:"bg-emerald-600"},{label:"",value:"bg-purple-600"},{label:"",value:"bg-orange-600"},{label:"",value:"bg-teal-600"},{label:"",value:"bg-red-600"}];return e.jsxs("div",{className:"p-8 h-full overflow-y-auto bg-slate-50",children:[u&&e.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/90 backdrop-blur-sm animate-in fade-in",onClick:()=>f(null),children:e.jsxs("div",{className:"relative max-w-4xl max-h-[90vh]",children:[e.jsx("button",{onClick:()=>f(null),className:"absolute -top-4 -right-4 bg-white rounded-full p-2 text-black hover:bg-red-500 hover:text-white transition-colors",children:e.jsx(Ze,{size:24})}),e.jsx("img",{src:u,alt:"Receipt",className:"max-w-full max-h-[85vh] rounded-lg shadow-2xl border border-white/20"})]})}),e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"bg-slate-900 text-white p-8 rounded-3xl shadow-xl mb-8 flex justify-between items-center relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-10",children:e.jsx(Vl,{size:200})}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2 text-blue-400 font-bold uppercase tracking-widest text-xs",children:[e.jsx(Vl,{size:16}),"   "]}),e.jsx("h1",{className:"text-3xl font-bold font-serif mb-2",children:" "}),e.jsx("p",{className:"text-slate-300",children:"     "})]}),e.jsxs("div",{className:"flex bg-white/10 p-1 rounded-xl backdrop-blur-sm z-10",children:[e.jsxs("button",{onClick:()=>t("subs"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all flex items-center gap-2 ${n==="subs"?"bg-white text-slate-900 shadow":"text-slate-300 hover:bg-white/10"}`,children:[e.jsx(rs,{size:16}),"  (",l.length,")"]}),e.jsxs("button",{onClick:()=>t("content"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all flex items-center gap-2 ${n==="content"?"bg-white text-slate-900 shadow":"text-slate-300 hover:bg-white/10"}`,children:[e.jsx(dl,{size:16}),"  "]}),e.jsxs("button",{onClick:()=>t("setup"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all flex items-center gap-2 ${n==="setup"?"bg-white text-slate-900 shadow":"text-slate-300 hover:bg-white/10"}`,children:[e.jsx(QN,{size:16}),"  "]})]})]}),n==="subs"&&e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden animate-in fade-in",children:[e.jsxs("div",{className:"p-4 border-b bg-slate-50 flex justify-between items-center",children:[e.jsxs("h3",{className:"font-bold text-slate-700 flex items-center gap-2",children:[e.jsx(rs,{size:20}),"   "]}),e.jsx("button",{onClick:O,className:"text-slate-500 hover:text-blue-600 p-2 rounded-full hover:bg-blue-50 transition-colors",title:"",children:e.jsx(xr,{size:18,className:o?"animate-spin":""})})]}),o?e.jsx("div",{className:"p-12 text-center text-slate-400",children:"  ..."}):l.length===0?e.jsxs("div",{className:"p-12 text-center text-slate-400 flex flex-col items-center",children:[e.jsx(gs,{size:48,className:"mb-4 text-emerald-200"}),e.jsx("p",{children:"    ."})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-right",children:[e.jsx("thead",{className:"bg-slate-100 text-slate-600 text-xs font-bold uppercase",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-4",children:""}),e.jsx("th",{className:"p-4",children:" "}),e.jsx("th",{className:"p-4",children:" "}),e.jsx("th",{className:"p-4 text-center",children:" "}),e.jsx("th",{className:"p-4 text-center",children:""})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:l.map(Q=>e.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[e.jsxs("td",{className:"p-4",children:[e.jsx("p",{className:"font-bold text-slate-800",children:Q.full_name||"  "}),e.jsx("p",{className:"text-xs text-slate-400 font-mono mt-1 truncate max-w-[200px]",children:Q.id})]}),e.jsx("td",{className:"p-4",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold border ${Q.plan_type==="yearly"?"bg-amber-50 text-amber-700 border-amber-200":Q.plan_type==="quarterly"?"bg-indigo-50 text-indigo-700 border-indigo-200":"bg-blue-50 text-blue-700 border-blue-200"}`,children:q(Q.plan_type)})}),e.jsx("td",{className:"p-4 text-sm text-slate-500",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(gh,{size:14})," "]})}),e.jsx("td",{className:"p-4 text-center",children:Q.payment_receipt_url?e.jsxs("button",{onClick:()=>f(Q.payment_receipt_url),className:"inline-flex items-center gap-1 text-xs font-bold text-slate-600 bg-white border border-slate-300 px-3 py-1.5 rounded-lg hover:bg-slate-100 hover:text-blue-600 transition-colors",children:[e.jsx(aj,{size:14})," "]}):e.jsxs("span",{className:"text-xs text-red-400 flex items-center justify-center gap-1",children:[e.jsx(Os,{size:12}),"   "]})}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("button",{onClick:()=>F(Q),disabled:x===Q.id,className:"p-2 rounded-lg text-red-500 hover:bg-red-50 transition-colors border border-transparent hover:border-red-200",title:"",children:e.jsx(Ze,{size:18})}),e.jsxs("button",{onClick:()=>G(Q),disabled:x===Q.id,className:"flex items-center gap-2 bg-emerald-600 text-white px-4 py-2 rounded-lg text-sm font-bold shadow-sm hover:bg-emerald-700 hover:shadow-md transition-all disabled:opacity-50",children:[x===Q.id?e.jsx(xr,{size:16,className:"animate-spin"}):e.jsx(gs,{size:16}),""]})]})})]},Q.id))})]})})]}),n==="content"&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 animate-in fade-in",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 p-6 sticky top-8",children:[e.jsxs("h3",{className:"font-bold text-lg text-slate-800 mb-4 flex items-center gap-2",children:[e.jsx(dl,{size:20,className:"text-indigo-600"}),"  "]}),e.jsxs("form",{onSubmit:$,className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between bg-slate-50 p-3 rounded-xl border border-slate-200",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(li,{size:18,className:A.is_interactive?"text-purple-600":"text-slate-400"}),e.jsx("span",{className:"text-sm font-bold text-slate-700",children:" "})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:A.is_interactive,onChange:Q=>E({...A,is_interactive:Q.target.checked}),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-purple-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-purple-600"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:" "}),e.jsx("input",{required:!0,value:A.title,onChange:Q=>E({...A,title:Q.target.value}),className:"w-full p-3 border rounded-xl text-sm outline-none focus:ring-2 focus:ring-indigo-500",placeholder:":  ..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:"  (URL)"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{required:!0,value:A.url,onChange:Q=>E({...A,url:Q.target.value}),className:"w-full pl-3 pr-10 py-3 border rounded-xl text-sm outline-none focus:ring-2 focus:ring-indigo-500 dir-ltr",placeholder:"https://..."}),e.jsx(_b,{size:16,className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-2",children:" "}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:J.map(Q=>e.jsx("button",{type:"button",onClick:()=>E({...A,color:Q.value}),className:`h-8 rounded-lg ${Q.value} hover:opacity-80 transition-opacity relative flex items-center justify-center`,title:Q.label,children:A.color===Q.value&&e.jsx(gs,{size:16,className:"text-white"})},Q.value))})]}),e.jsxs("button",{type:"submit",disabled:R,className:"w-full bg-slate-900 text-white py-3 rounded-xl font-bold hover:bg-black transition-all flex items-center justify-center gap-2 mt-2 disabled:opacity-70",children:[R?e.jsx(xr,{size:18,className:"animate-spin"}):e.jsx(kr,{size:18})," "]})]})]})}),e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b bg-slate-50 flex justify-between items-center",children:[e.jsxs("h3",{className:"font-bold text-slate-700 flex items-center gap-2",children:["  (",b.length,")"]}),e.jsx("button",{onClick:z,className:"text-slate-500 hover:text-blue-600 p-2 rounded-full hover:bg-blue-50 transition-colors",children:e.jsx(xr,{size:18,className:N?"animate-spin":""})})]}),b.length===0?e.jsx("div",{className:"p-12 text-center text-slate-400",children:"   ."}):e.jsx("div",{className:"divide-y divide-slate-100",children:b.map(Q=>e.jsxs("div",{className:"p-4 flex items-center gap-4 hover:bg-slate-50 transition-colors group",children:[e.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center text-white shrink-0 ${Q.color||"bg-blue-600"}`,children:Q.is_interactive?e.jsx(li,{size:24}):e.jsx(dl,{size:24})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h4",{className:"font-bold text-slate-800 text-base",children:Q.title}),Q.is_interactive&&e.jsx("span",{className:"text-[10px] bg-purple-100 text-purple-700 px-2 py-0.5 rounded-full font-bold",children:""})]}),e.jsx("a",{href:Q.url,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-500 hover:underline truncate block mt-1 dir-ltr text-right",children:Q.url})]}),e.jsx("button",{onClick:()=>B(Q.id),className:"p-2 text-slate-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors opacity-0 group-hover:opacity-100",title:"",children:e.jsx(fl,{size:18})})]},Q.id))})]})})]}),n==="setup"&&e.jsx("div",{className:"animate-in fade-in h-full",children:e.jsx(VA,{})})]})]})},JA=({onSave:n})=>{const[t,l]=k.useState(""),[i,o]=k.useState(""),[c,u]=k.useState(""),f=x=>{x.preventDefault(),t&&i&&c&&n({fullName:t,wilaya:i,district:c,showSignature:!0})};return e.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-slate-900/95 backdrop-blur-sm animate-in fade-in duration-500",children:e.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-md overflow-hidden relative",children:[e.jsxs("div",{className:"bg-slate-900 text-white p-8 text-center relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-full opacity-10 bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] from-indigo-400 via-slate-900 to-slate-900"}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("div",{className:"w-16 h-16 bg-white/10 rounded-2xl flex items-center justify-center mx-auto mb-4 backdrop-blur-md border border-white/20",children:e.jsx(Ym,{size:40,className:"text-emerald-400"})}),e.jsx("h2",{className:"text-2xl font-bold font-serif mb-2",children:"   "}),e.jsx("p",{className:"text-slate-400 text-sm",children:"         ."})]})]}),e.jsxs("form",{onSubmit:f,className:"p-8 space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-2 mr-1",children:"  (   )"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",required:!0,value:t,onChange:x=>l(x.target.value),className:"w-full pl-4 pr-10 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-emerald-500 focus:bg-white transition-all font-bold text-slate-800",placeholder:":  "}),e.jsx(Ym,{size:18,className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-2 mr-1",children:""}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",required:!0,value:i,onChange:x=>o(x.target.value),className:"w-full pl-2 pr-9 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-emerald-500 focus:bg-white transition-all font-bold text-slate-800",placeholder:""}),e.jsx(Hl,{size:18,className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-2 mr-1",children:""}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",required:!0,value:c,onChange:x=>u(x.target.value),className:"w-full pl-2 pr-9 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-emerald-500 focus:bg-white transition-all font-bold text-slate-800",placeholder:" 1"}),e.jsx(Xa,{size:18,className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400"})]})]})]}),e.jsx("div",{className:"pt-4",children:e.jsxs("button",{type:"submit",className:"w-full bg-emerald-600 text-white font-bold py-4 rounded-xl shadow-lg hover:bg-emerald-700 transition-all flex items-center justify-center gap-2 hover:scale-[1.02] active:scale-[0.98]",children:[e.jsx(gs,{size:20}),"  "]})})]})]})})},YA=({isOpen:n,onClose:t,profile:l,onSaveProfile:i})=>{const[o,c]=k.useState("profile"),[u,f]=k.useState(l),[x,m]=k.useState(""),[b,y]=k.useState(""),[N,C]=k.useState(null),[A,E]=k.useState(!1),R=k.useRef(null);if(!n)return null;const P=K=>{var F;const G=(F=K.target.files)==null?void 0:F[0];if(G){const $=new FileReader;$.onloadend=()=>{f(B=>({...B,signatureUrl:$.result}))},$.readAsDataURL(G)}},O=()=>{i(u),t()},z=async()=>{if(x.length<6){C({type:"error",text:"     6   ."});return}if(x!==b){C({type:"error",text:"   ."});return}E(!0),C(null);const{error:K}=await QT(x);K?C({type:"error",text:"   : "+K.message}):(C({type:"success",text:"    ."}),m(""),y("")),E(!1)};return e.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-slate-900/80 backdrop-blur-sm animate-in fade-in",onClick:t,children:e.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-2xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh]",onClick:K=>K.stopPropagation(),children:[e.jsxs("div",{className:"bg-slate-50 border-b p-4 flex justify-between items-center shrink-0",children:[e.jsxs("h2",{className:"text-xl font-bold text-slate-800 flex items-center gap-2",children:[e.jsx(vs,{size:24,className:"text-indigo-600"})," "]}),e.jsx("button",{onClick:t,className:"p-2 hover:bg-slate-200 rounded-full transition-colors",children:e.jsx(Ze,{size:20,className:"text-slate-500"})})]}),e.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[e.jsxs("div",{className:"w-1/3 bg-slate-50 border-l border-slate-200 p-4 space-y-2",children:[e.jsxs("button",{onClick:()=>c("profile"),className:`w-full text-right px-4 py-3 rounded-xl text-sm font-bold flex items-center gap-3 transition-all ${o==="profile"?"bg-white text-indigo-700 shadow-md ring-1 ring-indigo-100":"text-slate-500 hover:bg-white/50"}`,children:[e.jsx(vs,{size:18}),"  "]}),e.jsxs("button",{onClick:()=>c("signature"),className:`w-full text-right px-4 py-3 rounded-xl text-sm font-bold flex items-center gap-3 transition-all ${o==="signature"?"bg-white text-indigo-700 shadow-md ring-1 ring-indigo-100":"text-slate-500 hover:bg-white/50"}`,children:[e.jsx(ai,{size:18}),"  "]}),e.jsxs("button",{onClick:()=>c("security"),className:`w-full text-right px-4 py-3 rounded-xl text-sm font-bold flex items-center gap-3 transition-all ${o==="security"?"bg-white text-indigo-700 shadow-md ring-1 ring-indigo-100":"text-slate-500 hover:bg-white/50"}`,children:[e.jsx(Vl,{size:18}),"   "]})]}),e.jsxs("div",{className:"flex-1 p-6 overflow-y-auto",children:[o==="profile"&&e.jsxs("div",{className:"space-y-6 animate-in slide-in-from-left-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"  ()"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:u.fullName,onChange:K=>f({...u,fullName:K.target.value}),className:"w-full pl-4 pr-10 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-500 outline-none font-bold"}),e.jsx(vs,{size:18,className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400"})]}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"       ."})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:""}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:u.wilaya,onChange:K=>f({...u,wilaya:K.target.value}),className:"w-full pl-4 pr-10 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-500 outline-none font-bold"}),e.jsx(Hl,{size:18,className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:""}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:u.district,onChange:K=>f({...u,district:K.target.value}),className:"w-full pl-4 pr-10 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-500 outline-none font-bold"}),e.jsx(Hl,{size:18,className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400"})]})]})]})]}),o==="signature"&&e.jsxs("div",{className:"space-y-6 animate-in slide-in-from-left-4",children:[e.jsxs("div",{className:"flex items-center justify-between bg-slate-50 p-4 rounded-xl border border-slate-200",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${u.showSignature?"bg-emerald-100 text-emerald-600":"bg-slate-200 text-slate-400"}`,children:e.jsx(ai,{size:20})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-slate-700",children:"   "}),e.jsx("p",{className:"text-xs text-slate-400",children:"     "})]})]}),e.jsx("button",{onClick:()=>f({...u,showSignature:!u.showSignature}),className:`w-12 h-6 rounded-full transition-colors relative ${u.showSignature?"bg-emerald-500":"bg-slate-300"}`,children:e.jsx("div",{className:`w-4 h-4 bg-white rounded-full absolute top-1 transition-all ${u.showSignature?"left-1":"right-1"}`})})]}),e.jsxs("div",{className:"border-2 border-dashed border-slate-300 rounded-2xl p-6 text-center",children:[u.signatureUrl?e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:u.signatureUrl,alt:"Signature",className:"max-h-32 mx-auto mix-blend-multiply"}),e.jsxs("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-2 rounded-lg",children:[e.jsx("button",{onClick:()=>{var K;return(K=R.current)==null?void 0:K.click()},className:"bg-white p-2 rounded-full text-slate-800 hover:bg-slate-100",children:e.jsx(ii,{size:18})}),e.jsx("button",{onClick:()=>f({...u,signatureUrl:void 0}),className:"bg-red-500 p-2 rounded-full text-white hover:bg-red-600",children:e.jsx(fl,{size:18})})]})]}):e.jsxs("div",{className:"flex flex-col items-center gap-2 text-slate-400 py-4",children:[e.jsx(jb,{size:40,className:"mb-2 opacity-50"}),e.jsx("p",{className:"text-sm font-bold",children:"   "}),e.jsx("button",{onClick:()=>{var K;return(K=R.current)==null?void 0:K.click()},className:"text-indigo-600 text-sm font-bold hover:underline",children:"  "})]}),e.jsx("input",{type:"file",ref:R,className:"hidden",accept:"image/*",onChange:P})]}),e.jsx("p",{className:"text-xs text-slate-400 text-center",children:"     (PNG)  ."})]}),o==="security"&&e.jsxs("div",{className:"space-y-6 animate-in slide-in-from-left-4",children:[e.jsxs("div",{className:"bg-orange-50 border border-orange-100 p-4 rounded-xl flex gap-3 text-orange-800 mb-4",children:[e.jsx(Xu,{size:24,className:"shrink-0"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-bold mb-1",children:"  "}),e.jsx("p",{className:"opacity-80 text-xs",children:"       ."})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-2",children:"  "}),e.jsx("input",{type:"password",value:x,onChange:K=>m(K.target.value),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-500 outline-none",placeholder:""})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-2",children:"  "}),e.jsx("input",{type:"password",value:b,onChange:K=>y(K.target.value),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-500 outline-none",placeholder:""})]}),N&&e.jsx("div",{className:`p-3 rounded-lg text-xs font-bold ${N.type==="success"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:N.text}),e.jsx("button",{onClick:z,disabled:A||!x,className:"w-full bg-slate-800 text-white font-bold py-3 rounded-xl hover:bg-slate-900 transition-all disabled:opacity-50",children:A?" ...":"  "})]})]})]}),o!=="security"&&e.jsxs("div",{className:"p-4 border-t bg-slate-50 flex justify-end gap-3 shrink-0",children:[e.jsx("button",{onClick:t,className:"px-6 py-2.5 rounded-xl font-bold text-slate-500 hover:bg-slate-200 transition-colors",children:""}),e.jsxs("button",{onClick:O,className:"px-8 py-2.5 rounded-xl font-bold bg-indigo-600 text-white hover:bg-indigo-700 shadow-lg hover:shadow-xl transition-all flex items-center gap-2",children:[e.jsx(Zt,{size:18}),"  "]})]})]})})};var ze=(n=>(n.DASHBOARD="DASHBOARD",n.EDITOR="EDITOR",n.LEGACY_EDITOR="LEGACY_EDITOR",n.PRINT="PRINT",n.DATABASE="DATABASE",n.PROMOTIONS="PROMOTIONS",n.TENURE_EDITOR="TENURE_EDITOR",n.QUARTERLY_REPORT="QUARTERLY_REPORT",n.ACQUISITIONS="ACQUISITIONS",n.SEMINARS="SEMINARS",n.ADMIN_ASSISTANT="ADMIN_ASSISTANT",n.BRANDING="BRANDING",n.ADMIN_DASHBOARD="ADMIN_DASHBOARD",n))(ze||{});const KA=()=>{const[n,t]=k.useState(null),[l,i]=k.useState({isGold:!1,isTrial:!1,daysLeft:0,status:"expired"}),[o,c]=k.useState(!0);k.useEffect(()=>{(async()=>{c(!0);const N=await Fg();t(N),i(Jg(N)),c(!1)})()},[]);const u=l.isGold||l.isTrial,f=()=>u,x=()=>u,m=()=>!0,b=()=>u;return{loading:o,profile:n,status:l.status,daysLeft:l.daysLeft,isGold:l.isGold,isTrial:l.isTrial,isActive:u,canUseAI:f,canPrint:x,canAccessTenure:m,canUseAdminAssistant:b,refetch:async()=>{const y=await Fg();t(y),i(Jg(y))}}},fr=()=>Math.random().toString(36).substr(2,9),QA=["dellihakamal@gmail.com","mufattish.admin@education.dz"],XA=()=>{const[n,t]=k.useState(null),[l,i]=k.useState(!0),{isGold:o,isActive:c,status:u,daysLeft:f,canPrint:x,refetch:m}=KA(),[b,y]=k.useState(!1),[N,C]=k.useState(!1),[A,E]=k.useState(!1),[R,P]=k.useState(!1),[O,z]=k.useState(()=>localStorage.getItem("mufattish_last_view")||ze.DASHBOARD),[K,G]=k.useState("stats"),[F,$]=k.useState(y_),[B,q]=k.useState(()=>localStorage.getItem("mufattish_last_teacher_id")||""),[J,Q]=k.useState(null),[U,ae]=k.useState({fullName:"",wilaya:"",district:"",showSignature:!0}),[se,ne]=k.useState(ol),[w,D]=k.useState({}),[V,Y]=k.useState(sp),[le,_]=k.useState({}),[M,j]=k.useState(N_),[T,L]=k.useState({scope:"district",selectedSchool:"",selectedLevel:"",selectedClass:"",selectedSubject:""}),[H,Z]=k.useState(0),[de,fe]=k.useState(!1),[je,we]=k.useState("idle"),[xe,Ne]=k.useState(""),[Ae,ie]=k.useState(()=>localStorage.getItem("mufattish_auto_sync")==="true"),ee=k.useRef(!0),[ke,jt]=k.useState(""),[os,Rn]=k.useState(""),[In,Zl]=k.useState(null);k.useEffect(()=>{const ye=localStorage.getItem("mufattish_inspector_profile");if(ye)try{ae(JSON.parse(ye))}catch{C(!0)}else C(!0)},[]);const Wl=ye=>{ae(ye),localStorage.setItem("mufattish_inspector_profile",JSON.stringify(ye)),C(!1)},Qe=k.useMemo(()=>{let ye=U.district||se.district,Se=U.wilaya||se.wilaya;if(!ye||ye.trim()===""){const De=Object.values(w).find(et=>et.district&&et.district.trim()!=="");De&&(ye=De.district)}if(!Se||Se===""){const De=Object.values(w).find(et=>et.wilaya&&et.wilaya.trim()!==""&&et.wilaya!=="");De&&(Se=De.wilaya)}return{district:ye||"",wilaya:Se||""}},[se,w,U]),ml=k.useMemo(()=>!n||!n.user||!n.user.email?!1:QA.includes(n.user.email),[n]),zn=k.useMemo(()=>{const ye=new Set;return Object.values(w).forEach(Se=>{Se.school&&ye.add(Se.school.trim())}),Array.from(ye).sort()},[w]),ea=k.useMemo(()=>{const ye=new Set;return Cn().records.forEach(De=>ye.add(De.schoolName)),Object.values(w).forEach(De=>{De.school&&De.school.trim()!==""&&ye.add(De.school.trim())}),Array.from(ye).sort()},[H,O,w]),Vs=k.useMemo(()=>{const ye=new Set;return Object.values(w).forEach(Se=>{Se.level&&ye.add(Se.level.trim())}),Array.from(ye).sort()},[w]),sn=k.useMemo(()=>F.filter(ye=>{const Se=w[ye.id];return!(ke&&(!Se||Se.school.trim()!==ke)||os&&(!Se||Se.level.trim()!==os))}),[F,w,ke,os]);k.useEffect(()=>{const ye=new Date;let Se=0;const De=F.map(et=>{const wt=w[et.id];if(wt&&wt.inspectionDate&&wt.finalMark>0){const qt=new Date(wt.inspectionDate);if(!isNaN(qt.getTime())){const Ys=ye.getTime()-qt.getTime();if(Math.ceil(Ys/(1e3*60*60*24))>15&&et.lastInspectionDate!==wt.inspectionDate)return Se++,{...et,lastInspectionDate:wt.inspectionDate,lastMark:wt.finalMark}}}return et});Se>0&&$(De)},[w]),k.useEffect(()=>{if(uc()&&$e){$e.auth.getSession().then(({data:{session:Se}})=>{t(Se),i(!1),Se!=null&&Se.user&&typeof Vg=="function"&&Vg().then(De=>{De&&(localStorage.setItem("mufattish_script_url",De),fe(!0))})}).catch(Se=>{console.error("Session check failed:",Se),i(!1)});const{data:{subscription:ye}}=$e.auth.onAuthStateChange((Se,De)=>{t(De),i(!1)});return()=>ye.unsubscribe()}else i(!1)},[]),k.useEffect(()=>{const ye=localStorage.getItem("mufattish_teachers"),Se=localStorage.getItem("mufattish_reports_map"),De=localStorage.getItem("mufattish_tenure_reports_map"),et=localStorage.getItem("mufattish_quarterly_report");if(ye)try{$(JSON.parse(ye))}catch{}if(Se)try{D(JSON.parse(Se))}catch{}if(De)try{_(JSON.parse(De))}catch{}if(et)try{j(JSON.parse(et))}catch{}const wt=localStorage.getItem("mufattish_script_url");wt&&(fe(!0),(!ye||ye==="[]")&&(we("syncing"),Ne("   ..."),vr(wt).then(qt=>{if(Array.isArray(qt)){const{teachers:Ys,reportsMap:dt}=Pb(qt);Ys.length>0?($(Ys),D(dt),we("success"),Ne("  "),setTimeout(()=>we("idle"),3e3)):we("idle")}}).catch(qt=>{we("error"),Ne("  ")})))},[]),k.useEffect(()=>{localStorage.setItem("mufattish_teachers",JSON.stringify(F))},[F]),k.useEffect(()=>{localStorage.setItem("mufattish_reports_map",JSON.stringify(w))},[w]),k.useEffect(()=>{localStorage.setItem("mufattish_tenure_reports_map",JSON.stringify(le))},[le]),k.useEffect(()=>{localStorage.setItem("mufattish_quarterly_report",JSON.stringify(M))},[M]),k.useEffect(()=>{O&&localStorage.setItem("mufattish_last_view",O)},[O]),k.useEffect(()=>{localStorage.setItem("mufattish_last_teacher_id",B)},[B]),k.useEffect(()=>{if(ee.current){ee.current=!1;return}if(!Ae||!de||F.length===0)return;const ye=localStorage.getItem("mufattish_script_url");if(!ye)return;we("syncing");const Se=setTimeout(async()=>{try{if(F.length===0){we("idle");return}const De=ic(F,se,w,U);await Gl(ye,De,"SYNC_MAIN"),we("success"),Ne("   Google Sheets"),setTimeout(()=>we("idle"),3e3)}catch{we("error"),Ne("  -   ")}},5e3);return()=>clearTimeout(Se)},[F,w,le,Ae,de,U]);const Ln=ye=>{Q(ye)},mi=async()=>{$e&&(await $e.auth.signOut(),t(null))},ta=(ye,Se)=>{if(Q(null),q(ye.id),w[ye.id]){const De=w[ye.id];ne({...De,reportModel:Se,inspectorName:De.inspectorName||U.fullName})}else{const De={...ol,id:fr(),teacherId:ye.id,reportModel:Se,wilaya:se.wilaya||U.wilaya||Qe.wilaya,school:se.school||"",district:se.district||U.district||Qe.district,inspectorName:U.fullName};ne(De),D(et=>({...et,[ye.id]:De}))}},ge=ye=>{ta(ye,"modern"),z(ze.EDITOR)},Te=ye=>{ta(ye,"legacy"),z(ze.LEGACY_EDITOR)},pt=ye=>{if(Q(null),q(ye.id),le[ye.id]){const Se=le[ye.id];Y({...Se,inspectorName:Se.inspectorName||U.fullName})}else{const Se={...sp,id:fr(),teacherId:ye.id,wilaya:se.wilaya||U.wilaya||Qe.wilaya,district:se.district||U.district||Qe.district,school:se.school||"",inspectorName:U.fullName};Y(Se),_(De=>({...De,[ye.id]:Se}))}z(ze.TENURE_EDITOR)},We=()=>{j(ye=>({...ye,inspectorName:U.fullName,wilaya:U.wilaya||Qe.wilaya,district:U.district||Qe.district,teachersTotal:F.length,teachersTrainee:F.filter(Se=>Se.status==="stagiere").length})),z(ze.QUARTERLY_REPORT)},Ft=ye=>{ne(ye),D(Se=>({...Se,[ye.teacherId]:ye}))},Fs=ye=>{Y(ye),_(Se=>({...Se,[ye.teacherId]:ye}))},nn=ye=>{j(ye)},Rt=ye=>{$(Se=>Se.map(De=>De.id===ye.id?ye:De)),J&&J.id===ye.id&&Q(ye)},ln=async ye=>{if(window.confirm("           ( ).")){$(et=>et.filter(wt=>wt.id!==ye));const Se={...w};delete Se[ye],D(Se);const De={...le};delete De[ye],_(De),B===ye&&(q(""),O!==ze.DATABASE&&O!==ze.PROMOTIONS&&O!==ze.QUARTERLY_REPORT&&z(ze.DASHBOARD))}},an=()=>{if(B){const ye=F.find(Se=>Se.id===B);ye&&(document.title=`_${ye.fullName.replace(/\s/g,"_")}`)}window.print()},Js=()=>{const ye=prompt("   :");if(ye){const Se={id:fr(),fullName:ye,birthDate:"",birthPlace:"",degree:"",recruitmentDate:new Date().toISOString().split("T")[0],rank:"  ",lastInspectionDate:"",lastMark:10,status:"titulaire"};$([...F,Se]),Ln(Se)}},pl=async(ye,Se)=>{const De=[...F],et={...w},wt=U.wilaya||se.wilaya||Qe.wilaya,qt=U.district||se.district||Qe.district;ye.forEach(dt=>{const At=dt.fullName.trim().toLowerCase(),zt=De.findIndex(Lt=>{const rn=Lt.fullName.trim().toLowerCase()===At;return rn&&dt.birthDate&&Lt.birthDate?dt.birthDate===Lt.birthDate:rn});if(zt>=0){const Lt=De[zt];De[zt]={...Lt,...dt};const rn=Se[dt.id];if(rn){const pi=et[Lt.id]||{...ol,id:fr(),teacherId:Lt.id};et[Lt.id]={...pi,...rn,wilaya:pi.wilaya||wt,district:pi.district||qt}}}else{De.push(dt);const Lt=Se[dt.id];Lt?et[dt.id]={...Lt,wilaya:wt,district:qt}:et[dt.id]={...ol,id:fr(),teacherId:dt.id,wilaya:wt,district:qt}}}),$(De),D(et);const Ys=localStorage.getItem("mufattish_script_url");if(Ys){we("syncing"),Ne("     Google Sheet...");try{const dt=ic(De,se,et,U);await Gl(Ys,dt,"SYNC_MAIN"),we("success"),Ne("     ."),setTimeout(()=>we("idle"),3e3)}catch{we("error"),Ne("       .")}}alert(`  ${ye.length}  .`)},gl=(ye,Se,De)=>{$(ye),D(Se),_(De),alert("    .")},Nc=ye=>{Zl(ye),z(ze.SEMINARS)},Is=({targetView:ye,icon:Se,label:De})=>e.jsxs("button",{onClick:()=>{ye===ze.QUARTERLY_REPORT?We():z(ye),P(!1)},className:`flex-1 min-w-[40px] md:w-full p-2 rounded-lg transition-all flex items-center justify-center md:justify-start gap-3 ${O===ye?"bg-white text-blue-800 shadow-sm":"hover:bg-white/10 text-blue-100"}`,title:De,children:[e.jsx(Se,{size:18}),e.jsx("span",{className:"hidden md:inline text-sm font-medium",children:De})]}),zs=U.showSignature?U.signatureUrl:void 0;if(l)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-900",children:e.jsxs("div",{className:"text-center animate-pulse",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("div",{className:"text-blue-400 font-bold font-serif text-xl",children:" "}),e.jsx("div",{className:"text-slate-500 text-sm mt-2",children:"  ..."})]})});if(!n)return e.jsx(BA,{});const It=F.find(ye=>ye.id===B),jc=O===ze.EDITOR||O===ze.LEGACY_EDITOR||O===ze.TENURE_EDITOR;return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 text-gray-900 font-sans p-0 md:p-3 lg:p-4 overflow-hidden h-screen flex flex-col",children:[e.jsxs("div",{className:"print:hidden",children:[N&&e.jsx(JA,{onSave:Wl}),A&&e.jsx(YA,{isOpen:A,onClose:()=>E(!1),profile:U,onSaveProfile:Wl}),e.jsx(aA,{isOpen:b,onClose:()=>y(!1),onUpgrade:()=>{m(),y(!1)},userStatus:u}),e.jsx(cA,{teacher:J,isOpen:!!J,onClose:()=>Q(null),onStartInspection:ge,onStartLegacyInspection:Te,onStartTenure:pt,onUpdateTeacher:Rt})]}),e.jsxs("div",{className:"hidden print:block",children:[It&&O===ze.EDITOR&&e.jsx(rE,{report:se,teacher:It,signature:zs}),It&&O===ze.LEGACY_EDITOR&&e.jsx(cE,{report:se,teacher:It,signature:zs}),It&&O===ze.TENURE_EDITOR&&e.jsx(oE,{report:V,teacher:It,signature:zs}),O===ze.PROMOTIONS&&e.jsx(Yg,{teachers:sn,reportsMap:w}),O===ze.QUARTERLY_REPORT&&e.jsx(fv,{report:M,signature:zs})]}),e.jsxs("div",{className:"md:hidden bg-blue-900 text-white p-3 flex justify-between items-center shrink-0 z-50 shadow-md print:hidden",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Xm,{className:"text-blue-300",size:24}),e.jsx("h1",{className:"font-bold font-serif text-lg",children:" "})]}),e.jsx("button",{onClick:()=>P(!0),className:"p-2 bg-white/10 rounded-lg",children:e.jsx(r2,{size:24})})]}),e.jsxs("div",{className:"flex-1 flex gap-4 overflow-hidden relative print:hidden",children:[e.jsx("aside",{className:`
            fixed inset-y-0 right-0 z-50 w-72 bg-gradient-to-br from-blue-800 to-indigo-900 text-white shadow-2xl transform transition-transform duration-300
            md:relative md:translate-x-0 md:w-64 md:rounded-3xl md:shadow-2xl md:border md:border-white/20 md:flex md:flex-col md:overflow-hidden md:shrink-0
            ${R?"translate-x-0":"translate-x-full"}
            print:hidden
        `,children:e.jsxs("div",{className:"p-6 h-full flex flex-col relative overflow-hidden",children:[e.jsx("button",{onClick:()=>P(!1),className:"md:hidden absolute top-4 left-4 p-2 text-white/70 hover:text-white",children:e.jsx(Ze,{size:24})}),e.jsxs("div",{className:"relative z-10 flex-1 flex flex-col",children:[e.jsx("div",{className:"hidden md:flex justify-between items-center mb-6",children:e.jsxs("div",{className:"flex items-center gap-2 cursor-pointer group",onClick:()=>z(ze.DASHBOARD),children:[e.jsx(Xm,{className:"text-blue-300 group-hover:rotate-180 transition-transform duration-700",size:28,strokeWidth:1.5}),e.jsx("h1",{className:"text-xl font-bold font-serif tracking-wide",children:" "})]})}),e.jsxs("div",{onClick:()=>y(!0),className:`mb-3 px-2 py-1.5 rounded-lg flex items-center gap-2 cursor-pointer border hover:bg-white/10 transition-all ${o?"bg-amber-500/10 border-amber-500/30":c?"bg-blue-500/10 border-blue-500/30":"bg-red-500/10 border-red-500/30"}`,children:[o?e.jsx(ec,{size:14,className:"text-amber-400 fill-amber-400 shrink-0"}):e.jsx(Nr,{size:14,className:"text-blue-300 shrink-0"}),e.jsxs("div",{className:"flex-1 flex items-center gap-1 overflow-hidden",children:[e.jsx("span",{className:"font-bold text-white text-[10px] truncate",children:o?" ":c?" ":" "}),f>0&&e.jsxs("span",{className:`text-[9px] ${o?"text-amber-200":"text-blue-200"} opacity-80 whitespace-nowrap`,children:["(",f," )"]})]}),e.jsx("button",{className:`text-[9px] px-1.5 py-0.5 rounded font-bold shrink-0 shadow-sm transition-colors ${o?"bg-amber-500 text-white hover:bg-amber-600":"bg-white/90 text-blue-900 hover:bg-white"}`,children:o?"":""})]}),e.jsxs("div",{className:"space-y-1 overflow-y-auto flex-1 custom-scrollbar pr-1 -mr-2",children:[e.jsx(Is,{targetView:ze.DASHBOARD,icon:Wm,label:""}),e.jsx(Is,{targetView:ze.ACQUISITIONS,icon:Sr,label:" "}),e.jsx(Is,{targetView:ze.PROMOTIONS,icon:yh,label:" "}),e.jsx(Is,{targetView:ze.QUARTERLY_REPORT,icon:bh,label:" "}),e.jsx("div",{className:"my-2 border-t border-white/10"}),e.jsx(Is,{targetView:ze.SEMINARS,icon:dl,label:" "}),e.jsx(Is,{targetView:ze.ADMIN_ASSISTANT,icon:_r,label:" "}),e.jsx(Is,{targetView:ze.DATABASE,icon:Cr,label:" "}),e.jsx(Is,{targetView:ze.BRANDING,icon:jb,label:" "}),ml&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"my-2 border-t border-red-500/30"}),e.jsxs("button",{onClick:()=>{z(ze.ADMIN_DASHBOARD),P(!1)},className:`flex-1 min-w-[40px] md:w-full p-2 rounded-lg transition-all flex items-center justify-center md:justify-start gap-3 ${O===ze.ADMIN_DASHBOARD?"bg-red-500 text-white shadow-sm":"hover:bg-red-500/20 text-red-200"}`,children:[e.jsx(tw,{size:18}),e.jsx("span",{className:"hidden md:inline text-sm font-bold",children:" "})]})]})]}),de&&e.jsxs("div",{className:`mt-4 px-3 py-2 rounded-xl flex items-center justify-between backdrop-blur-md border transition-all duration-300 ${je==="error"?"bg-red-500/20 border-red-400/30":"bg-white/10 border-white/10"}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[je==="syncing"?e.jsx(sc,{size:14,className:"animate-spin text-blue-200"}):je==="error"?e.jsx(Os,{size:14,className:"text-red-300"}):e.jsx(Nh,{size:14,className:"text-green-300"}),e.jsx("span",{className:"text-[10px] font-bold text-blue-50",children:je==="syncing"?" ...":je==="error"?" ":" "})]}),e.jsx("div",{className:`w-2 h-2 rounded-full ${je==="error"?"bg-red-50":"bg-green-400"} animate-pulse`})]})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-white/10 flex items-center justify-between",children:[e.jsxs("div",{onClick:()=>E(!0),className:"flex items-center gap-3 overflow-hidden cursor-pointer hover:bg-white/10 p-1.5 rounded-lg transition-colors flex-1",children:[e.jsxs("div",{className:"w-9 h-9 rounded-full bg-gradient-to-br from-blue-100 to-indigo-100 border border-blue-200 flex items-center justify-center text-blue-700 shrink-0 shadow-sm relative",children:[e.jsx(UN,{size:20}),e.jsx("div",{className:"absolute -bottom-1 -right-1 bg-white rounded-full p-0.5 shadow-sm",children:e.jsx(Rb,{size:10,className:"text-slate-500"})})]}),e.jsxs("div",{className:"text-xs text-blue-200 truncate max-w-[120px]",children:[e.jsx("span",{className:"font-bold text-white text-sm truncate block",title:U.fullName||"",children:U.fullName||""}),e.jsx("span",{className:"text-[10px] opacity-70",children:" "})]})]}),e.jsx("button",{onClick:mi,className:"p-2 text-red-300 hover:text-red-100 hover:bg-red-500/20 rounded-xl transition-all shadow-sm",title:" ",children:e.jsx(e2,{size:18})})]})]})}),R&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 md:hidden backdrop-blur-sm",onClick:()=>P(!1)}),e.jsxs("main",{className:"flex-1 bg-white/95 backdrop-blur-xl md:rounded-3xl shadow-2xl flex relative overflow-hidden border border-white/20 min-w-0 print:hidden",children:[e.jsx("div",{className:`transition-all duration-300 flex flex-col bg-white border-l border-gray-200 z-10 print:hidden ${jc?"w-80 h-full absolute right-0 md:static transform translate-x-full md:translate-x-0 shadow-xl md:shadow-none block":"hidden"} `,children:e.jsx(np,{teachers:sn,reportsMap:w,currentReport:se,onSelect:Ln,selectedId:B,onAddNew:Js,onImport:pl,onDelete:ln,availableSchools:zn,availableLevels:Vs,filterSchool:ke,filterLevel:os,onSetFilterSchool:jt,onSetFilterLevel:Rn})}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden relative w-full print:hidden",children:[O===ze.DASHBOARD&&e.jsxs("div",{className:"flex flex-col h-full bg-slate-50/50",children:[e.jsxs("div",{className:"bg-white border-b px-6 py-3 flex justify-between items-center shadow-sm shrink-0 z-20",children:[e.jsxs("h1",{className:"text-xl font-bold text-slate-800 font-serif flex items-center gap-2",children:[e.jsx(Wm,{className:"text-blue-600"})," "]}),e.jsxs("div",{className:"flex bg-slate-100 p-1 rounded-xl",children:[e.jsxs("button",{onClick:()=>G("stats"),className:`px-4 py-2 rounded-lg text-sm font-bold flex items-center gap-2 transition-all ${K==="stats"?"bg-white text-blue-700 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:[e.jsx(mb,{size:18})," "]}),e.jsxs("button",{onClick:()=>G("list"),className:`px-4 py-2 rounded-lg text-sm font-bold flex items-center gap-2 transition-all ${K==="list"?"bg-white text-blue-700 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:[e.jsx(rs,{size:18}),"  "]})]})]}),e.jsx("div",{className:"flex-1 overflow-hidden relative",children:K==="stats"?e.jsx("div",{className:"h-full overflow-y-auto animate-in fade-in slide-in-from-bottom-2 duration-300",children:e.jsx(oA,{teachers:sn,reportsMap:w,onNavigateToPromotions:()=>z(ze.PROMOTIONS),fullTeacherCount:F.length,selectedSchool:ke,onProgramSeminar:Nc})}):e.jsx("div",{className:"h-full p-6 animate-in fade-in slide-in-from-right-2 duration-300",children:e.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 h-full overflow-hidden flex flex-col",children:e.jsx("div",{className:"flex-1 overflow-hidden",children:e.jsx(np,{teachers:sn,reportsMap:w,currentReport:se,onSelect:Ln,selectedId:B,onAddNew:Js,onImport:pl,onDelete:ln,availableSchools:zn,availableLevels:Vs,filterSchool:ke,filterLevel:os,onSetFilterSchool:jt,onSetFilterLevel:Rn})})})})})]}),O===ze.DATABASE&&e.jsx(rA,{teachers:F,reportsMap:w,tenureReportsMap:le,onRestore:gl,currentReport:se,onConnectionChange:fe,isConnected:de,onAutoSyncChange:ie,isAutoSync:Ae}),O===ze.ACQUISITIONS&&e.jsx(MA,{availableSchools:ea,onDataUpdated:()=>Z(ye=>ye+1),externalFilters:T,onUpdateFilters:ye=>L(Se=>({...Se,...ye}))}),O===ze.PROMOTIONS&&e.jsx(Yg,{teachers:sn,reportsMap:w}),O===ze.EDITOR&&It&&e.jsx(lE,{report:se,teacher:It,onChange:Ft,onTeacherChange:Rt,onPrint:an,isGoldMember:o,isExpired:!x(),onUpgradeClick:()=>y(!0)}),O===ze.LEGACY_EDITOR&&It&&e.jsx(iE,{report:se,teacher:It,onChange:Ft,onTeacherChange:Rt,onPrint:an,isGoldMember:o,isExpired:!x(),onUpgradeClick:()=>y(!0)}),O===ze.TENURE_EDITOR&&It&&e.jsx(aE,{report:V,teacher:It,onChange:Fs,onPrint:an,isGoldMember:o,isExpired:!x(),onUpgradeClick:()=>y(!0)}),O===ze.QUARTERLY_REPORT&&e.jsx(dE,{report:M,onChange:nn,onPrint:an,teachers:F,reportsMap:w,tenureReportsMap:le,signature:zs,inspectorName:U.fullName,globalWilaya:U.wilaya||Qe.wilaya,globalDistrict:U.district||Qe.district,isExpired:!x(),onUpgradeClick:()=>y(!0)}),O===ze.SEMINARS&&e.jsx(RA,{teachers:F,reportsMap:w,inspectorInfo:{name:U.fullName,district:U.district||Qe.district,wilaya:U.wilaya||Qe.wilaya},signature:zs,isExpired:!x(),onUpgradeClick:()=>y(!0),initialTopic:In,onClearInitialTopic:()=>Zl(null)}),O===ze.ADMIN_ASSISTANT&&e.jsx(GA,{teachers:F,reportsMap:w,tenureReportsMap:le,inspectorName:U.fullName,wilaya:U.wilaya||Qe.wilaya,district:U.district||Qe.district,signature:zs,isExpired:!c,onUpgradeClick:()=>y(!0)}),O===ze.BRANDING&&e.jsx(HA,{}),O===ze.ADMIN_DASHBOARD&&ml&&e.jsx(FA,{})]})]})]})]})},Iv=document.getElementById("root");if(!Iv)throw new Error("Could not find root element to mount to");const ZA=eN.createRoot(Iv);ZA.render(e.jsx(Ws.StrictMode,{children:e.jsx(XA,{})}));export{db as g};
