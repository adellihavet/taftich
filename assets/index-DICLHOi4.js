(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const u of c.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function a(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(o){if(o.ep)return;o.ep=!0;const c=a(o);fetch(o.href,c)}})();function _g(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var su={exports:{}},Ri={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nx;function Xy(){if(nx)return Ri;nx=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function a(i,o,c){var u=null;if(c!==void 0&&(u=""+c),o.key!==void 0&&(u=""+o.key),"key"in o){c={};for(var x in o)x!=="key"&&(c[x]=o[x])}else c=o;return o=c.ref,{$$typeof:n,type:i,key:u,ref:o!==void 0?o:null,props:c}}return Ri.Fragment=t,Ri.jsx=a,Ri.jsxs=a,Ri}var lx;function Zy(){return lx||(lx=1,su.exports=Xy()),su.exports}var e=Zy(),nu={exports:{}},Te={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ax;function Wy(){if(ax)return Te;ax=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),u=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),N=Symbol.iterator;function w(C){return C===null||typeof C!="object"?null:(C=N&&C[N]||C["@@iterator"],typeof C=="function"?C:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},I=Object.assign,H={};function G(C,D,j){this.props=C,this.context=D,this.refs=H,this.updater=j||A}G.prototype.isReactComponent={},G.prototype.setState=function(C,D){if(typeof C!="object"&&typeof C!="function"&&C!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,C,D,"setState")},G.prototype.forceUpdate=function(C){this.updater.enqueueForceUpdate(this,C,"forceUpdate")};function F(){}F.prototype=G.prototype;function O(C,D,j){this.props=C,this.context=D,this.refs=H,this.updater=j||A}var V=O.prototype=new F;V.constructor=O,I(V,G.prototype),V.isPureReactComponent=!0;var X=Array.isArray;function ee(){}var Q={H:null,A:null,T:null,S:null},se=Object.prototype.hasOwnProperty;function ne(C,D,j){var S=j.ref;return{$$typeof:n,type:C,key:D,ref:S!==void 0?S:null,props:j}}function P(C,D){return ne(C.type,D,C.props)}function ie(C){return typeof C=="object"&&C!==null&&C.$$typeof===n}function le(C){var D={"=":"=0",":":"=2"};return"$"+C.replace(/[=:]/g,function(j){return D[j]})}var Z=/\/+/g;function q(C,D){return typeof C=="object"&&C!==null&&C.key!=null?le(""+C.key):D.toString(36)}function Y(C){switch(C.status){case"fulfilled":return C.value;case"rejected":throw C.reason;default:switch(typeof C.status=="string"?C.then(ee,ee):(C.status="pending",C.then(function(D){C.status==="pending"&&(C.status="fulfilled",C.value=D)},function(D){C.status==="pending"&&(C.status="rejected",C.reason=D)})),C.status){case"fulfilled":return C.value;case"rejected":throw C.reason}}throw C}function T(C,D,j,S,k){var z=typeof C;(z==="undefined"||z==="boolean")&&(C=null);var W=!1;if(C===null)W=!0;else switch(z){case"bigint":case"string":case"number":W=!0;break;case"object":switch(C.$$typeof){case n:case t:W=!0;break;case b:return W=C._init,T(W(C._payload),D,j,S,k)}}if(W)return k=k(C),W=S===""?"."+q(C,0):S,X(k)?(j="",W!=null&&(j=W.replace(Z,"$&/")+"/"),T(k,D,j,"",function(be){return be})):k!=null&&(ie(k)&&(k=P(k,j+(k.key==null||C&&C.key===k.key?"":(""+k.key).replace(Z,"$&/")+"/")+W)),D.push(k)),1;W=0;var ue=S===""?".":S+":";if(X(C))for(var J=0;J<C.length;J++)S=C[J],z=ue+q(S,J),W+=T(S,D,j,z,k);else if(J=w(C),typeof J=="function")for(C=J.call(C),J=0;!(S=C.next()).done;)S=S.value,z=ue+q(S,J++),W+=T(S,D,j,z,k);else if(z==="object"){if(typeof C.then=="function")return T(Y(C),D,j,S,k);throw D=String(C),Error("Objects are not valid as a React child (found: "+(D==="[object Object]"?"object with keys {"+Object.keys(C).join(", ")+"}":D)+"). If you meant to render a collection of children, use an array instead.")}return W}function E(C,D,j){if(C==null)return C;var S=[],k=0;return T(C,S,"","",function(z){return D.call(j,z,k++)}),S}function L(C){if(C._status===-1){var D=C._result;D=D(),D.then(function(j){(C._status===0||C._status===-1)&&(C._status=1,C._result=j)},function(j){(C._status===0||C._status===-1)&&(C._status=2,C._result=j)}),C._status===-1&&(C._status=0,C._result=D)}if(C._status===1)return C._result.default;throw C._result}var U=typeof reportError=="function"?reportError:function(C){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var D=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof C=="object"&&C!==null&&typeof C.message=="string"?String(C.message):String(C),error:C});if(!window.dispatchEvent(D))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",C);return}console.error(C)},$={map:E,forEach:function(C,D,j){E(C,function(){D.apply(this,arguments)},j)},count:function(C){var D=0;return E(C,function(){D++}),D},toArray:function(C){return E(C,function(D){return D})||[]},only:function(C){if(!ie(C))throw Error("React.Children.only expected to receive a single React element child.");return C}};return Te.Activity=y,Te.Children=$,Te.Component=G,Te.Fragment=a,Te.Profiler=o,Te.PureComponent=O,Te.StrictMode=i,Te.Suspense=h,Te.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Q,Te.__COMPILER_RUNTIME={__proto__:null,c:function(C){return Q.H.useMemoCache(C)}},Te.cache=function(C){return function(){return C.apply(null,arguments)}},Te.cacheSignal=function(){return null},Te.cloneElement=function(C,D,j){if(C==null)throw Error("The argument must be a React element, but you passed "+C+".");var S=I({},C.props),k=C.key;if(D!=null)for(z in D.key!==void 0&&(k=""+D.key),D)!se.call(D,z)||z==="key"||z==="__self"||z==="__source"||z==="ref"&&D.ref===void 0||(S[z]=D[z]);var z=arguments.length-2;if(z===1)S.children=j;else if(1<z){for(var W=Array(z),ue=0;ue<z;ue++)W[ue]=arguments[ue+2];S.children=W}return ne(C.type,k,S)},Te.createContext=function(C){return C={$$typeof:u,_currentValue:C,_currentValue2:C,_threadCount:0,Provider:null,Consumer:null},C.Provider=C,C.Consumer={$$typeof:c,_context:C},C},Te.createElement=function(C,D,j){var S,k={},z=null;if(D!=null)for(S in D.key!==void 0&&(z=""+D.key),D)se.call(D,S)&&S!=="key"&&S!=="__self"&&S!=="__source"&&(k[S]=D[S]);var W=arguments.length-2;if(W===1)k.children=j;else if(1<W){for(var ue=Array(W),J=0;J<W;J++)ue[J]=arguments[J+2];k.children=ue}if(C&&C.defaultProps)for(S in W=C.defaultProps,W)k[S]===void 0&&(k[S]=W[S]);return ne(C,z,k)},Te.createRef=function(){return{current:null}},Te.forwardRef=function(C){return{$$typeof:x,render:C}},Te.isValidElement=ie,Te.lazy=function(C){return{$$typeof:b,_payload:{_status:-1,_result:C},_init:L}},Te.memo=function(C,D){return{$$typeof:p,type:C,compare:D===void 0?null:D}},Te.startTransition=function(C){var D=Q.T,j={};Q.T=j;try{var S=C(),k=Q.S;k!==null&&k(j,S),typeof S=="object"&&S!==null&&typeof S.then=="function"&&S.then(ee,U)}catch(z){U(z)}finally{D!==null&&j.types!==null&&(D.types=j.types),Q.T=D}},Te.unstable_useCacheRefresh=function(){return Q.H.useCacheRefresh()},Te.use=function(C){return Q.H.use(C)},Te.useActionState=function(C,D,j){return Q.H.useActionState(C,D,j)},Te.useCallback=function(C,D){return Q.H.useCallback(C,D)},Te.useContext=function(C){return Q.H.useContext(C)},Te.useDebugValue=function(){},Te.useDeferredValue=function(C,D){return Q.H.useDeferredValue(C,D)},Te.useEffect=function(C,D){return Q.H.useEffect(C,D)},Te.useEffectEvent=function(C){return Q.H.useEffectEvent(C)},Te.useId=function(){return Q.H.useId()},Te.useImperativeHandle=function(C,D,j){return Q.H.useImperativeHandle(C,D,j)},Te.useInsertionEffect=function(C,D){return Q.H.useInsertionEffect(C,D)},Te.useLayoutEffect=function(C,D){return Q.H.useLayoutEffect(C,D)},Te.useMemo=function(C,D){return Q.H.useMemo(C,D)},Te.useOptimistic=function(C,D){return Q.H.useOptimistic(C,D)},Te.useReducer=function(C,D,j){return Q.H.useReducer(C,D,j)},Te.useRef=function(C){return Q.H.useRef(C)},Te.useState=function(C){return Q.H.useState(C)},Te.useSyncExternalStore=function(C,D,j){return Q.H.useSyncExternalStore(C,D,j)},Te.useTransition=function(){return Q.H.useTransition()},Te.version="19.2.0",Te}var ix;function qu(){return ix||(ix=1,nu.exports=Wy()),nu.exports}var R=qu();const Cl=_g(R);var lu={exports:{}},Di={},au={exports:{}},iu={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rx;function e1(){return rx||(rx=1,(function(n){function t(T,E){var L=T.length;T.push(E);e:for(;0<L;){var U=L-1>>>1,$=T[U];if(0<o($,E))T[U]=E,T[L]=$,L=U;else break e}}function a(T){return T.length===0?null:T[0]}function i(T){if(T.length===0)return null;var E=T[0],L=T.pop();if(L!==E){T[0]=L;e:for(var U=0,$=T.length,C=$>>>1;U<C;){var D=2*(U+1)-1,j=T[D],S=D+1,k=T[S];if(0>o(j,L))S<$&&0>o(k,j)?(T[U]=k,T[S]=L,U=S):(T[U]=j,T[D]=L,U=D);else if(S<$&&0>o(k,L))T[U]=k,T[S]=L,U=S;else break e}}return E}function o(T,E){var L=T.sortIndex-E.sortIndex;return L!==0?L:T.id-E.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;n.unstable_now=function(){return c.now()}}else{var u=Date,x=u.now();n.unstable_now=function(){return u.now()-x}}var h=[],p=[],b=1,y=null,N=3,w=!1,A=!1,I=!1,H=!1,G=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;function V(T){for(var E=a(p);E!==null;){if(E.callback===null)i(p);else if(E.startTime<=T)i(p),E.sortIndex=E.expirationTime,t(h,E);else break;E=a(p)}}function X(T){if(I=!1,V(T),!A)if(a(h)!==null)A=!0,ee||(ee=!0,le());else{var E=a(p);E!==null&&Y(X,E.startTime-T)}}var ee=!1,Q=-1,se=5,ne=-1;function P(){return H?!0:!(n.unstable_now()-ne<se)}function ie(){if(H=!1,ee){var T=n.unstable_now();ne=T;var E=!0;try{e:{A=!1,I&&(I=!1,F(Q),Q=-1),w=!0;var L=N;try{t:{for(V(T),y=a(h);y!==null&&!(y.expirationTime>T&&P());){var U=y.callback;if(typeof U=="function"){y.callback=null,N=y.priorityLevel;var $=U(y.expirationTime<=T);if(T=n.unstable_now(),typeof $=="function"){y.callback=$,V(T),E=!0;break t}y===a(h)&&i(h),V(T)}else i(h);y=a(h)}if(y!==null)E=!0;else{var C=a(p);C!==null&&Y(X,C.startTime-T),E=!1}}break e}finally{y=null,N=L,w=!1}E=void 0}}finally{E?le():ee=!1}}}var le;if(typeof O=="function")le=function(){O(ie)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,q=Z.port2;Z.port1.onmessage=ie,le=function(){q.postMessage(null)}}else le=function(){G(ie,0)};function Y(T,E){Q=G(function(){T(n.unstable_now())},E)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(T){T.callback=null},n.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):se=0<T?Math.floor(1e3/T):5},n.unstable_getCurrentPriorityLevel=function(){return N},n.unstable_next=function(T){switch(N){case 1:case 2:case 3:var E=3;break;default:E=N}var L=N;N=E;try{return T()}finally{N=L}},n.unstable_requestPaint=function(){H=!0},n.unstable_runWithPriority=function(T,E){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var L=N;N=T;try{return E()}finally{N=L}},n.unstable_scheduleCallback=function(T,E,L){var U=n.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?U+L:U):L=U,T){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=L+$,T={id:b++,callback:E,priorityLevel:T,startTime:L,expirationTime:$,sortIndex:-1},L>U?(T.sortIndex=L,t(p,T),a(h)===null&&T===a(p)&&(I?(F(Q),Q=-1):I=!0,Y(X,L-U))):(T.sortIndex=$,t(h,T),A||w||(A=!0,ee||(ee=!0,le()))),T},n.unstable_shouldYield=P,n.unstable_wrapCallback=function(T){var E=N;return function(){var L=N;N=E;try{return T.apply(this,arguments)}finally{N=L}}}})(iu)),iu}var ox;function t1(){return ox||(ox=1,au.exports=e1()),au.exports}var ru={exports:{}},Pt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cx;function s1(){if(cx)return Pt;cx=1;var n=qu();function t(h){var p="https://react.dev/errors/"+h;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)p+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+h+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(){}var i={d:{f:a,r:function(){throw Error(t(522))},D:a,C:a,L:a,m:a,X:a,S:a,M:a},p:0,findDOMNode:null},o=Symbol.for("react.portal");function c(h,p,b){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:y==null?null:""+y,children:h,containerInfo:p,implementation:b}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function x(h,p){if(h==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Pt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Pt.createPortal=function(h,p){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(t(299));return c(h,p,null,b)},Pt.flushSync=function(h){var p=u.T,b=i.p;try{if(u.T=null,i.p=2,h)return h()}finally{u.T=p,i.p=b,i.d.f()}},Pt.preconnect=function(h,p){typeof h=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,i.d.C(h,p))},Pt.prefetchDNS=function(h){typeof h=="string"&&i.d.D(h)},Pt.preinit=function(h,p){if(typeof h=="string"&&p&&typeof p.as=="string"){var b=p.as,y=x(b,p.crossOrigin),N=typeof p.integrity=="string"?p.integrity:void 0,w=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;b==="style"?i.d.S(h,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:y,integrity:N,fetchPriority:w}):b==="script"&&i.d.X(h,{crossOrigin:y,integrity:N,fetchPriority:w,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Pt.preinitModule=function(h,p){if(typeof h=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var b=x(p.as,p.crossOrigin);i.d.M(h,{crossOrigin:b,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&i.d.M(h)},Pt.preload=function(h,p){if(typeof h=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var b=p.as,y=x(b,p.crossOrigin);i.d.L(h,b,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Pt.preloadModule=function(h,p){if(typeof h=="string")if(p){var b=x(p.as,p.crossOrigin);i.d.m(h,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:b,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else i.d.m(h)},Pt.requestFormReset=function(h){i.d.r(h)},Pt.unstable_batchedUpdates=function(h,p){return h(p)},Pt.useFormState=function(h,p,b){return u.H.useFormState(h,p,b)},Pt.useFormStatus=function(){return u.H.useHostTransitionStatus()},Pt.version="19.2.0",Pt}var dx;function Sg(){if(dx)return ru.exports;dx=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),ru.exports=s1(),ru.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ux;function n1(){if(ux)return Di;ux=1;var n=t1(),t=qu(),a=Sg();function i(s){var l="https://react.dev/errors/"+s;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)l+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+s+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function c(s){var l=s,r=s;if(s.alternate)for(;l.return;)l=l.return;else{s=l;do l=s,(l.flags&4098)!==0&&(r=l.return),s=l.return;while(s)}return l.tag===3?r:null}function u(s){if(s.tag===13){var l=s.memoizedState;if(l===null&&(s=s.alternate,s!==null&&(l=s.memoizedState)),l!==null)return l.dehydrated}return null}function x(s){if(s.tag===31){var l=s.memoizedState;if(l===null&&(s=s.alternate,s!==null&&(l=s.memoizedState)),l!==null)return l.dehydrated}return null}function h(s){if(c(s)!==s)throw Error(i(188))}function p(s){var l=s.alternate;if(!l){if(l=c(s),l===null)throw Error(i(188));return l!==s?null:s}for(var r=s,d=l;;){var g=r.return;if(g===null)break;var v=g.alternate;if(v===null){if(d=g.return,d!==null){r=d;continue}break}if(g.child===v.child){for(v=g.child;v;){if(v===r)return h(g),s;if(v===d)return h(g),l;v=v.sibling}throw Error(i(188))}if(r.return!==d.return)r=g,d=v;else{for(var _=!1,M=g.child;M;){if(M===r){_=!0,r=g,d=v;break}if(M===d){_=!0,d=g,r=v;break}M=M.sibling}if(!_){for(M=v.child;M;){if(M===r){_=!0,r=v,d=g;break}if(M===d){_=!0,d=v,r=g;break}M=M.sibling}if(!_)throw Error(i(189))}}if(r.alternate!==d)throw Error(i(190))}if(r.tag!==3)throw Error(i(188));return r.stateNode.current===r?s:l}function b(s){var l=s.tag;if(l===5||l===26||l===27||l===6)return s;for(s=s.child;s!==null;){if(l=b(s),l!==null)return l;s=s.sibling}return null}var y=Object.assign,N=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),H=Symbol.for("react.strict_mode"),G=Symbol.for("react.profiler"),F=Symbol.for("react.consumer"),O=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),X=Symbol.for("react.suspense"),ee=Symbol.for("react.suspense_list"),Q=Symbol.for("react.memo"),se=Symbol.for("react.lazy"),ne=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),ie=Symbol.iterator;function le(s){return s===null||typeof s!="object"?null:(s=ie&&s[ie]||s["@@iterator"],typeof s=="function"?s:null)}var Z=Symbol.for("react.client.reference");function q(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===Z?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case I:return"Fragment";case G:return"Profiler";case H:return"StrictMode";case X:return"Suspense";case ee:return"SuspenseList";case ne:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case A:return"Portal";case O:return s.displayName||"Context";case F:return(s._context.displayName||"Context")+".Consumer";case V:var l=s.render;return s=s.displayName,s||(s=l.displayName||l.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case Q:return l=s.displayName||null,l!==null?l:q(s.type)||"Memo";case se:l=s._payload,s=s._init;try{return q(s(l))}catch{}}return null}var Y=Array.isArray,T=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,E=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,L={pending:!1,data:null,method:null,action:null},U=[],$=-1;function C(s){return{current:s}}function D(s){0>$||(s.current=U[$],U[$]=null,$--)}function j(s,l){$++,U[$]=s.current,s.current=l}var S=C(null),k=C(null),z=C(null),W=C(null);function ue(s,l){switch(j(z,l),j(k,s),j(S,null),l.nodeType){case 9:case 11:s=(s=l.documentElement)&&(s=s.namespaceURI)?C0(s):0;break;default:if(s=l.tagName,l=l.namespaceURI)l=C0(l),s=E0(l,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}D(S),j(S,s)}function J(){D(S),D(k),D(z)}function be(s){s.memoizedState!==null&&j(W,s);var l=S.current,r=E0(l,s.type);l!==r&&(j(k,s),j(S,r))}function Ee(s){k.current===s&&(D(S),D(k)),W.current===s&&(D(W),Ti._currentValue=L)}var Re,_e;function ke(s){if(Re===void 0)try{throw Error()}catch(r){var l=r.stack.trim().match(/\n( *(at )?)/);Re=l&&l[1]||"",_e=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Re+s+_e}var ae=!1;function Je(s,l){if(!s||ae)return"";ae=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(l){var xe=function(){throw Error()};if(Object.defineProperty(xe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(xe,[])}catch(de){var ce=de}Reflect.construct(s,[],xe)}else{try{xe.call()}catch(de){ce=de}s.call(xe.prototype)}}else{try{throw Error()}catch(de){ce=de}(xe=s())&&typeof xe.catch=="function"&&xe.catch(function(){})}}catch(de){if(de&&ce&&typeof de.stack=="string")return[de.stack,ce.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=d.DetermineComponentFrameRoot(),_=v[0],M=v[1];if(_&&M){var B=_.split(`
`),oe=M.split(`
`);for(g=d=0;d<B.length&&!B[d].includes("DetermineComponentFrameRoot");)d++;for(;g<oe.length&&!oe[g].includes("DetermineComponentFrameRoot");)g++;if(d===B.length||g===oe.length)for(d=B.length-1,g=oe.length-1;1<=d&&0<=g&&B[d]!==oe[g];)g--;for(;1<=d&&0<=g;d--,g--)if(B[d]!==oe[g]){if(d!==1||g!==1)do if(d--,g--,0>g||B[d]!==oe[g]){var fe=`
`+B[d].replace(" at new "," at ");return s.displayName&&fe.includes("<anonymous>")&&(fe=fe.replace("<anonymous>",s.displayName)),fe}while(1<=d&&0<=g);break}}}finally{ae=!1,Error.prepareStackTrace=r}return(r=s?s.displayName||s.name:"")?ke(r):""}function Qn(s,l){switch(s.tag){case 26:case 27:case 5:return ke(s.type);case 16:return ke("Lazy");case 13:return s.child!==l&&l!==null?ke("Suspense Fallback"):ke("Suspense");case 19:return ke("SuspenseList");case 0:case 15:return Je(s.type,!1);case 11:return Je(s.type.render,!1);case 1:return Je(s.type,!0);case 31:return ke("Activity");default:return""}}function qa(s){try{var l="",r=null;do l+=Qn(s,r),r=s,s=s.return;while(s);return l}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}var Al=Object.prototype.hasOwnProperty,Oa=n.unstable_scheduleCallback,Ml=n.unstable_cancelCallback,Xn=n.unstable_shouldYield,Ut=n.unstable_requestPaint,At=n.unstable_now,Vo=n.unstable_getCurrentPriorityLevel,$a=n.unstable_ImmediatePriority,Zi=n.unstable_UserBlockingPriority,Rl=n.unstable_NormalPriority,Bo=n.unstable_LowPriority,Wi=n.unstable_IdlePriority,er=n.log,Fo=n.unstable_setDisableYieldValue,Zn=null,Mt=null;function _s(s){if(typeof er=="function"&&Fo(s),Mt&&typeof Mt.setStrictMode=="function")try{Mt.setStrictMode(Zn,s)}catch{}}var Ct=Math.clz32?Math.clz32:Jo,tr=Math.log,sr=Math.LN2;function Jo(s){return s>>>=0,s===0?32:31-(tr(s)/sr|0)|0}var Os=256,is=262144,rs=4194304;function bt(s){var l=s&42;if(l!==0)return l;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Wn(s,l,r){var d=s.pendingLanes;if(d===0)return 0;var g=0,v=s.suspendedLanes,_=s.pingedLanes;s=s.warmLanes;var M=d&134217727;return M!==0?(d=M&~v,d!==0?g=bt(d):(_&=M,_!==0?g=bt(_):r||(r=M&~s,r!==0&&(g=bt(r))))):(M=d&~v,M!==0?g=bt(M):_!==0?g=bt(_):r||(r=d&~s,r!==0&&(g=bt(r)))),g===0?0:l!==0&&l!==g&&(l&v)===0&&(v=g&-g,r=l&-l,v>=r||v===32&&(r&4194048)!==0)?l:g}function el(s,l){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&l)===0}function nr(s,l){switch(s){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ha(){var s=rs;return rs<<=1,(rs&62914560)===0&&(rs=4194304),s}function Dl(s){for(var l=[],r=0;31>r;r++)l.push(s);return l}function gn(s,l){s.pendingLanes|=l,l!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function ge(s,l,r,d,g,v){var _=s.pendingLanes;s.pendingLanes=r,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=r,s.entangledLanes&=r,s.errorRecoveryDisabledLanes&=r,s.shellSuspendCounter=0;var M=s.entanglements,B=s.expirationTimes,oe=s.hiddenUpdates;for(r=_&~r;0<r;){var fe=31-Ct(r),xe=1<<fe;M[fe]=0,B[fe]=-1;var ce=oe[fe];if(ce!==null)for(oe[fe]=null,fe=0;fe<ce.length;fe++){var de=ce[fe];de!==null&&(de.lane&=-536870913)}r&=~xe}d!==0&&ve(s,d,0),v!==0&&g===0&&s.tag!==0&&(s.suspendedLanes|=v&~(_&~l))}function ve(s,l,r){s.pendingLanes|=l,s.suspendedLanes&=~l;var d=31-Ct(l);s.entangledLanes|=l,s.entanglements[d]=s.entanglements[d]|1073741824|r&261930}function we(s,l){var r=s.entangledLanes|=l;for(s=s.entanglements;r;){var d=31-Ct(r),g=1<<d;g&l|s[d]&l&&(s[d]|=l),r&=~g}}function $e(s,l){var r=l&-l;return r=(r&42)!==0?1:vt(r),(r&(s.suspendedLanes|l))!==0?0:r}function vt(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Kt(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Ds(){var s=E.p;return s!==0?s:(s=window.event,s===void 0?32:Q0(s.type))}function Ke(s,l){var r=E.p;try{return E.p=s,l()}finally{E.p=r}}var Qt=Math.random().toString(36).slice(2),Qe="__reactFiber$"+Qt,De="__reactProps$"+Qt,os="__reactContainer$"+Qt,$s="__reactEvents$"+Qt,Ob="__reactListeners$"+Qt,$b="__reactHandles$"+Qt,hf="__reactResources$"+Qt,Ga="__reactMarker$"+Qt;function Yo(s){delete s[Qe],delete s[De],delete s[$s],delete s[Ob],delete s[$b]}function Il(s){var l=s[Qe];if(l)return l;for(var r=s.parentNode;r;){if(l=r[os]||r[Qe]){if(r=l.alternate,l.child!==null||r!==null&&r.child!==null)for(s=I0(s);s!==null;){if(r=s[Qe])return r;s=I0(s)}return l}s=r,r=s.parentNode}return null}function zl(s){if(s=s[Qe]||s[os]){var l=s.tag;if(l===5||l===6||l===13||l===31||l===26||l===27||l===3)return s}return null}function Va(s){var l=s.tag;if(l===5||l===26||l===27||l===6)return s.stateNode;throw Error(i(33))}function Ll(s){var l=s[hf];return l||(l=s[hf]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function Et(s){s[Ga]=!0}var mf=new Set,xf={};function tl(s,l){Ul(s,l),Ul(s+"Capture",l)}function Ul(s,l){for(xf[s]=l,s=0;s<l.length;s++)mf.add(l[s])}var Hb=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),pf={},gf={};function Gb(s){return Al.call(gf,s)?!0:Al.call(pf,s)?!1:Hb.test(s)?gf[s]=!0:(pf[s]=!0,!1)}function lr(s,l,r){if(Gb(l))if(r===null)s.removeAttribute(l);else{switch(typeof r){case"undefined":case"function":case"symbol":s.removeAttribute(l);return;case"boolean":var d=l.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){s.removeAttribute(l);return}}s.setAttribute(l,""+r)}}function ar(s,l,r){if(r===null)s.removeAttribute(l);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttribute(l,""+r)}}function Hs(s,l,r,d){if(d===null)s.removeAttribute(r);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(r);return}s.setAttributeNS(l,r,""+d)}}function cs(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function bf(s){var l=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function Vb(s,l,r){var d=Object.getOwnPropertyDescriptor(s.constructor.prototype,l);if(!s.hasOwnProperty(l)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var g=d.get,v=d.set;return Object.defineProperty(s,l,{configurable:!0,get:function(){return g.call(this)},set:function(_){r=""+_,v.call(this,_)}}),Object.defineProperty(s,l,{enumerable:d.enumerable}),{getValue:function(){return r},setValue:function(_){r=""+_},stopTracking:function(){s._valueTracker=null,delete s[l]}}}}function Ko(s){if(!s._valueTracker){var l=bf(s)?"checked":"value";s._valueTracker=Vb(s,l,""+s[l])}}function vf(s){if(!s)return!1;var l=s._valueTracker;if(!l)return!0;var r=l.getValue(),d="";return s&&(d=bf(s)?s.checked?"true":"false":s.value),s=d,s!==r?(l.setValue(s),!0):!1}function ir(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var Bb=/[\n"\\]/g;function ds(s){return s.replace(Bb,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function Qo(s,l,r,d,g,v,_,M){s.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?s.type=_:s.removeAttribute("type"),l!=null?_==="number"?(l===0&&s.value===""||s.value!=l)&&(s.value=""+cs(l)):s.value!==""+cs(l)&&(s.value=""+cs(l)):_!=="submit"&&_!=="reset"||s.removeAttribute("value"),l!=null?Xo(s,_,cs(l)):r!=null?Xo(s,_,cs(r)):d!=null&&s.removeAttribute("value"),g==null&&v!=null&&(s.defaultChecked=!!v),g!=null&&(s.checked=g&&typeof g!="function"&&typeof g!="symbol"),M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"?s.name=""+cs(M):s.removeAttribute("name")}function yf(s,l,r,d,g,v,_,M){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(s.type=v),l!=null||r!=null){if(!(v!=="submit"&&v!=="reset"||l!=null)){Ko(s);return}r=r!=null?""+cs(r):"",l=l!=null?""+cs(l):r,M||l===s.value||(s.value=l),s.defaultValue=l}d=d??g,d=typeof d!="function"&&typeof d!="symbol"&&!!d,s.checked=M?s.checked:!!d,s.defaultChecked=!!d,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(s.name=_),Ko(s)}function Xo(s,l,r){l==="number"&&ir(s.ownerDocument)===s||s.defaultValue===""+r||(s.defaultValue=""+r)}function Pl(s,l,r,d){if(s=s.options,l){l={};for(var g=0;g<r.length;g++)l["$"+r[g]]=!0;for(r=0;r<s.length;r++)g=l.hasOwnProperty("$"+s[r].value),s[r].selected!==g&&(s[r].selected=g),g&&d&&(s[r].defaultSelected=!0)}else{for(r=""+cs(r),l=null,g=0;g<s.length;g++){if(s[g].value===r){s[g].selected=!0,d&&(s[g].defaultSelected=!0);return}l!==null||s[g].disabled||(l=s[g])}l!==null&&(l.selected=!0)}}function Nf(s,l,r){if(l!=null&&(l=""+cs(l),l!==s.value&&(s.value=l),r==null)){s.defaultValue!==l&&(s.defaultValue=l);return}s.defaultValue=r!=null?""+cs(r):""}function jf(s,l,r,d){if(l==null){if(d!=null){if(r!=null)throw Error(i(92));if(Y(d)){if(1<d.length)throw Error(i(93));d=d[0]}r=d}r==null&&(r=""),l=r}r=cs(l),s.defaultValue=r,d=s.textContent,d===r&&d!==""&&d!==null&&(s.value=d),Ko(s)}function ql(s,l){if(l){var r=s.firstChild;if(r&&r===s.lastChild&&r.nodeType===3){r.nodeValue=l;return}}s.textContent=l}var Fb=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function wf(s,l,r){var d=l.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?d?s.setProperty(l,""):l==="float"?s.cssFloat="":s[l]="":d?s.setProperty(l,r):typeof r!="number"||r===0||Fb.has(l)?l==="float"?s.cssFloat=r:s[l]=(""+r).trim():s[l]=r+"px"}function _f(s,l,r){if(l!=null&&typeof l!="object")throw Error(i(62));if(s=s.style,r!=null){for(var d in r)!r.hasOwnProperty(d)||l!=null&&l.hasOwnProperty(d)||(d.indexOf("--")===0?s.setProperty(d,""):d==="float"?s.cssFloat="":s[d]="");for(var g in l)d=l[g],l.hasOwnProperty(g)&&r[g]!==d&&wf(s,g,d)}else for(var v in l)l.hasOwnProperty(v)&&wf(s,v,l[v])}function Zo(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Jb=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Yb=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function rr(s){return Yb.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function Gs(){}var Wo=null;function ec(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Ol=null,$l=null;function Sf(s){var l=zl(s);if(l&&(s=l.stateNode)){var r=s[De]||null;e:switch(s=l.stateNode,l.type){case"input":if(Qo(s,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),l=r.name,r.type==="radio"&&l!=null){for(r=s;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+ds(""+l)+'"][type="radio"]'),l=0;l<r.length;l++){var d=r[l];if(d!==s&&d.form===s.form){var g=d[De]||null;if(!g)throw Error(i(90));Qo(d,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(l=0;l<r.length;l++)d=r[l],d.form===s.form&&vf(d)}break e;case"textarea":Nf(s,r.value,r.defaultValue);break e;case"select":l=r.value,l!=null&&Pl(s,!!r.multiple,l,!1)}}}var tc=!1;function Cf(s,l,r){if(tc)return s(l,r);tc=!0;try{var d=s(l);return d}finally{if(tc=!1,(Ol!==null||$l!==null)&&(Yr(),Ol&&(l=Ol,s=$l,$l=Ol=null,Sf(l),s)))for(l=0;l<s.length;l++)Sf(s[l])}}function Ba(s,l){var r=s.stateNode;if(r===null)return null;var d=r[De]||null;if(d===null)return null;r=d[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(s=s.type,d=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!d;break e;default:s=!1}if(s)return null;if(r&&typeof r!="function")throw Error(i(231,l,typeof r));return r}var Vs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),sc=!1;if(Vs)try{var Fa={};Object.defineProperty(Fa,"passive",{get:function(){sc=!0}}),window.addEventListener("test",Fa,Fa),window.removeEventListener("test",Fa,Fa)}catch{sc=!1}var bn=null,nc=null,or=null;function Ef(){if(or)return or;var s,l=nc,r=l.length,d,g="value"in bn?bn.value:bn.textContent,v=g.length;for(s=0;s<r&&l[s]===g[s];s++);var _=r-s;for(d=1;d<=_&&l[r-d]===g[v-d];d++);return or=g.slice(s,1<d?1-d:void 0)}function cr(s){var l=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&l===13&&(s=13)):s=l,s===10&&(s=13),32<=s||s===13?s:0}function dr(){return!0}function Tf(){return!1}function Gt(s){function l(r,d,g,v,_){this._reactName=r,this._targetInst=g,this.type=d,this.nativeEvent=v,this.target=_,this.currentTarget=null;for(var M in s)s.hasOwnProperty(M)&&(r=s[M],this[M]=r?r(v):v[M]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?dr:Tf,this.isPropagationStopped=Tf,this}return y(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=dr)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=dr)},persist:function(){},isPersistent:dr}),l}var sl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ur=Gt(sl),Ja=y({},sl,{view:0,detail:0}),Kb=Gt(Ja),lc,ac,Ya,fr=y({},Ja,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:rc,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Ya&&(Ya&&s.type==="mousemove"?(lc=s.screenX-Ya.screenX,ac=s.screenY-Ya.screenY):ac=lc=0,Ya=s),lc)},movementY:function(s){return"movementY"in s?s.movementY:ac}}),kf=Gt(fr),Qb=y({},fr,{dataTransfer:0}),Xb=Gt(Qb),Zb=y({},Ja,{relatedTarget:0}),ic=Gt(Zb),Wb=y({},sl,{animationName:0,elapsedTime:0,pseudoElement:0}),ev=Gt(Wb),tv=y({},sl,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),sv=Gt(tv),nv=y({},sl,{data:0}),Af=Gt(nv),lv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},av={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},iv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function rv(s){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(s):(s=iv[s])?!!l[s]:!1}function rc(){return rv}var ov=y({},Ja,{key:function(s){if(s.key){var l=lv[s.key]||s.key;if(l!=="Unidentified")return l}return s.type==="keypress"?(s=cr(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?av[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:rc,charCode:function(s){return s.type==="keypress"?cr(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?cr(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),cv=Gt(ov),dv=y({},fr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Mf=Gt(dv),uv=y({},Ja,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:rc}),fv=Gt(uv),hv=y({},sl,{propertyName:0,elapsedTime:0,pseudoElement:0}),mv=Gt(hv),xv=y({},fr,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),pv=Gt(xv),gv=y({},sl,{newState:0,oldState:0}),bv=Gt(gv),vv=[9,13,27,32],oc=Vs&&"CompositionEvent"in window,Ka=null;Vs&&"documentMode"in document&&(Ka=document.documentMode);var yv=Vs&&"TextEvent"in window&&!Ka,Rf=Vs&&(!oc||Ka&&8<Ka&&11>=Ka),Df=" ",If=!1;function zf(s,l){switch(s){case"keyup":return vv.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Lf(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Hl=!1;function Nv(s,l){switch(s){case"compositionend":return Lf(l);case"keypress":return l.which!==32?null:(If=!0,Df);case"textInput":return s=l.data,s===Df&&If?null:s;default:return null}}function jv(s,l){if(Hl)return s==="compositionend"||!oc&&zf(s,l)?(s=Ef(),or=nc=bn=null,Hl=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return Rf&&l.locale!=="ko"?null:l.data;default:return null}}var wv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Uf(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l==="input"?!!wv[s.type]:l==="textarea"}function Pf(s,l,r,d){Ol?$l?$l.push(d):$l=[d]:Ol=d,l=to(l,"onChange"),0<l.length&&(r=new ur("onChange","change",null,r,d),s.push({event:r,listeners:l}))}var Qa=null,Xa=null;function _v(s){y0(s,0)}function hr(s){var l=Va(s);if(vf(l))return s}function qf(s,l){if(s==="change")return l}var Of=!1;if(Vs){var cc;if(Vs){var dc="oninput"in document;if(!dc){var $f=document.createElement("div");$f.setAttribute("oninput","return;"),dc=typeof $f.oninput=="function"}cc=dc}else cc=!1;Of=cc&&(!document.documentMode||9<document.documentMode)}function Hf(){Qa&&(Qa.detachEvent("onpropertychange",Gf),Xa=Qa=null)}function Gf(s){if(s.propertyName==="value"&&hr(Xa)){var l=[];Pf(l,Xa,s,ec(s)),Cf(_v,l)}}function Sv(s,l,r){s==="focusin"?(Hf(),Qa=l,Xa=r,Qa.attachEvent("onpropertychange",Gf)):s==="focusout"&&Hf()}function Cv(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return hr(Xa)}function Ev(s,l){if(s==="click")return hr(l)}function Tv(s,l){if(s==="input"||s==="change")return hr(l)}function kv(s,l){return s===l&&(s!==0||1/s===1/l)||s!==s&&l!==l}var Xt=typeof Object.is=="function"?Object.is:kv;function Za(s,l){if(Xt(s,l))return!0;if(typeof s!="object"||s===null||typeof l!="object"||l===null)return!1;var r=Object.keys(s),d=Object.keys(l);if(r.length!==d.length)return!1;for(d=0;d<r.length;d++){var g=r[d];if(!Al.call(l,g)||!Xt(s[g],l[g]))return!1}return!0}function Vf(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Bf(s,l){var r=Vf(s);s=0;for(var d;r;){if(r.nodeType===3){if(d=s+r.textContent.length,s<=l&&d>=l)return{node:r,offset:l-s};s=d}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Vf(r)}}function Ff(s,l){return s&&l?s===l?!0:s&&s.nodeType===3?!1:l&&l.nodeType===3?Ff(s,l.parentNode):"contains"in s?s.contains(l):s.compareDocumentPosition?!!(s.compareDocumentPosition(l)&16):!1:!1}function Jf(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var l=ir(s.document);l instanceof s.HTMLIFrameElement;){try{var r=typeof l.contentWindow.location.href=="string"}catch{r=!1}if(r)s=l.contentWindow;else break;l=ir(s.document)}return l}function uc(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l&&(l==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||l==="textarea"||s.contentEditable==="true")}var Av=Vs&&"documentMode"in document&&11>=document.documentMode,Gl=null,fc=null,Wa=null,hc=!1;function Yf(s,l,r){var d=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;hc||Gl==null||Gl!==ir(d)||(d=Gl,"selectionStart"in d&&uc(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Wa&&Za(Wa,d)||(Wa=d,d=to(fc,"onSelect"),0<d.length&&(l=new ur("onSelect","select",null,l,r),s.push({event:l,listeners:d}),l.target=Gl)))}function nl(s,l){var r={};return r[s.toLowerCase()]=l.toLowerCase(),r["Webkit"+s]="webkit"+l,r["Moz"+s]="moz"+l,r}var Vl={animationend:nl("Animation","AnimationEnd"),animationiteration:nl("Animation","AnimationIteration"),animationstart:nl("Animation","AnimationStart"),transitionrun:nl("Transition","TransitionRun"),transitionstart:nl("Transition","TransitionStart"),transitioncancel:nl("Transition","TransitionCancel"),transitionend:nl("Transition","TransitionEnd")},mc={},Kf={};Vs&&(Kf=document.createElement("div").style,"AnimationEvent"in window||(delete Vl.animationend.animation,delete Vl.animationiteration.animation,delete Vl.animationstart.animation),"TransitionEvent"in window||delete Vl.transitionend.transition);function ll(s){if(mc[s])return mc[s];if(!Vl[s])return s;var l=Vl[s],r;for(r in l)if(l.hasOwnProperty(r)&&r in Kf)return mc[s]=l[r];return s}var Qf=ll("animationend"),Xf=ll("animationiteration"),Zf=ll("animationstart"),Mv=ll("transitionrun"),Rv=ll("transitionstart"),Dv=ll("transitioncancel"),Wf=ll("transitionend"),eh=new Map,xc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");xc.push("scrollEnd");function Ss(s,l){eh.set(s,l),tl(l,[s])}var mr=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},us=[],Bl=0,pc=0;function xr(){for(var s=Bl,l=pc=Bl=0;l<s;){var r=us[l];us[l++]=null;var d=us[l];us[l++]=null;var g=us[l];us[l++]=null;var v=us[l];if(us[l++]=null,d!==null&&g!==null){var _=d.pending;_===null?g.next=g:(g.next=_.next,_.next=g),d.pending=g}v!==0&&th(r,g,v)}}function pr(s,l,r,d){us[Bl++]=s,us[Bl++]=l,us[Bl++]=r,us[Bl++]=d,pc|=d,s.lanes|=d,s=s.alternate,s!==null&&(s.lanes|=d)}function gc(s,l,r,d){return pr(s,l,r,d),gr(s)}function al(s,l){return pr(s,null,null,l),gr(s)}function th(s,l,r){s.lanes|=r;var d=s.alternate;d!==null&&(d.lanes|=r);for(var g=!1,v=s.return;v!==null;)v.childLanes|=r,d=v.alternate,d!==null&&(d.childLanes|=r),v.tag===22&&(s=v.stateNode,s===null||s._visibility&1||(g=!0)),s=v,v=v.return;return s.tag===3?(v=s.stateNode,g&&l!==null&&(g=31-Ct(r),s=v.hiddenUpdates,d=s[g],d===null?s[g]=[l]:d.push(l),l.lane=r|536870912),v):null}function gr(s){if(50<Ni)throw Ni=0,Cd=null,Error(i(185));for(var l=s.return;l!==null;)s=l,l=s.return;return s.tag===3?s.stateNode:null}var Fl={};function Iv(s,l,r,d){this.tag=s,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zt(s,l,r,d){return new Iv(s,l,r,d)}function bc(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Bs(s,l){var r=s.alternate;return r===null?(r=Zt(s.tag,l,s.key,s.mode),r.elementType=s.elementType,r.type=s.type,r.stateNode=s.stateNode,r.alternate=s,s.alternate=r):(r.pendingProps=l,r.type=s.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=s.flags&65011712,r.childLanes=s.childLanes,r.lanes=s.lanes,r.child=s.child,r.memoizedProps=s.memoizedProps,r.memoizedState=s.memoizedState,r.updateQueue=s.updateQueue,l=s.dependencies,r.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},r.sibling=s.sibling,r.index=s.index,r.ref=s.ref,r.refCleanup=s.refCleanup,r}function sh(s,l){s.flags&=65011714;var r=s.alternate;return r===null?(s.childLanes=0,s.lanes=l,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=r.childLanes,s.lanes=r.lanes,s.child=r.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=r.memoizedProps,s.memoizedState=r.memoizedState,s.updateQueue=r.updateQueue,s.type=r.type,l=r.dependencies,s.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),s}function br(s,l,r,d,g,v){var _=0;if(d=s,typeof s=="function")bc(s)&&(_=1);else if(typeof s=="string")_=qy(s,r,S.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case ne:return s=Zt(31,r,l,g),s.elementType=ne,s.lanes=v,s;case I:return il(r.children,g,v,l);case H:_=8,g|=24;break;case G:return s=Zt(12,r,l,g|2),s.elementType=G,s.lanes=v,s;case X:return s=Zt(13,r,l,g),s.elementType=X,s.lanes=v,s;case ee:return s=Zt(19,r,l,g),s.elementType=ee,s.lanes=v,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case O:_=10;break e;case F:_=9;break e;case V:_=11;break e;case Q:_=14;break e;case se:_=16,d=null;break e}_=29,r=Error(i(130,s===null?"null":typeof s,"")),d=null}return l=Zt(_,r,l,g),l.elementType=s,l.type=d,l.lanes=v,l}function il(s,l,r,d){return s=Zt(7,s,d,l),s.lanes=r,s}function vc(s,l,r){return s=Zt(6,s,null,l),s.lanes=r,s}function nh(s){var l=Zt(18,null,null,0);return l.stateNode=s,l}function yc(s,l,r){return l=Zt(4,s.children!==null?s.children:[],s.key,l),l.lanes=r,l.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},l}var lh=new WeakMap;function fs(s,l){if(typeof s=="object"&&s!==null){var r=lh.get(s);return r!==void 0?r:(l={value:s,source:l,stack:qa(l)},lh.set(s,l),l)}return{value:s,source:l,stack:qa(l)}}var Jl=[],Yl=0,vr=null,ei=0,hs=[],ms=0,vn=null,Is=1,zs="";function Fs(s,l){Jl[Yl++]=ei,Jl[Yl++]=vr,vr=s,ei=l}function ah(s,l,r){hs[ms++]=Is,hs[ms++]=zs,hs[ms++]=vn,vn=s;var d=Is;s=zs;var g=32-Ct(d)-1;d&=~(1<<g),r+=1;var v=32-Ct(l)+g;if(30<v){var _=g-g%5;v=(d&(1<<_)-1).toString(32),d>>=_,g-=_,Is=1<<32-Ct(l)+g|r<<g|d,zs=v+s}else Is=1<<v|r<<g|d,zs=s}function Nc(s){s.return!==null&&(Fs(s,1),ah(s,1,0))}function jc(s){for(;s===vr;)vr=Jl[--Yl],Jl[Yl]=null,ei=Jl[--Yl],Jl[Yl]=null;for(;s===vn;)vn=hs[--ms],hs[ms]=null,zs=hs[--ms],hs[ms]=null,Is=hs[--ms],hs[ms]=null}function ih(s,l){hs[ms++]=Is,hs[ms++]=zs,hs[ms++]=vn,Is=l.id,zs=l.overflow,vn=s}var Rt=null,at=null,He=!1,yn=null,xs=!1,wc=Error(i(519));function Nn(s){var l=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ti(fs(l,s)),wc}function rh(s){var l=s.stateNode,r=s.type,d=s.memoizedProps;switch(l[Qe]=s,l[De]=d,r){case"dialog":Ue("cancel",l),Ue("close",l);break;case"iframe":case"object":case"embed":Ue("load",l);break;case"video":case"audio":for(r=0;r<wi.length;r++)Ue(wi[r],l);break;case"source":Ue("error",l);break;case"img":case"image":case"link":Ue("error",l),Ue("load",l);break;case"details":Ue("toggle",l);break;case"input":Ue("invalid",l),yf(l,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0);break;case"select":Ue("invalid",l);break;case"textarea":Ue("invalid",l),jf(l,d.value,d.defaultValue,d.children)}r=d.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||l.textContent===""+r||d.suppressHydrationWarning===!0||_0(l.textContent,r)?(d.popover!=null&&(Ue("beforetoggle",l),Ue("toggle",l)),d.onScroll!=null&&Ue("scroll",l),d.onScrollEnd!=null&&Ue("scrollend",l),d.onClick!=null&&(l.onclick=Gs),l=!0):l=!1,l||Nn(s,!0)}function oh(s){for(Rt=s.return;Rt;)switch(Rt.tag){case 5:case 31:case 13:xs=!1;return;case 27:case 3:xs=!0;return;default:Rt=Rt.return}}function Kl(s){if(s!==Rt)return!1;if(!He)return oh(s),He=!0,!1;var l=s.tag,r;if((r=l!==3&&l!==27)&&((r=l===5)&&(r=s.type,r=!(r!=="form"&&r!=="button")||$d(s.type,s.memoizedProps)),r=!r),r&&at&&Nn(s),oh(s),l===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));at=D0(s)}else if(l===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));at=D0(s)}else l===27?(l=at,zn(s.type)?(s=Fd,Fd=null,at=s):at=l):at=Rt?gs(s.stateNode.nextSibling):null;return!0}function rl(){at=Rt=null,He=!1}function _c(){var s=yn;return s!==null&&(Jt===null?Jt=s:Jt.push.apply(Jt,s),yn=null),s}function ti(s){yn===null?yn=[s]:yn.push(s)}var Sc=C(null),ol=null,Js=null;function jn(s,l,r){j(Sc,l._currentValue),l._currentValue=r}function Ys(s){s._currentValue=Sc.current,D(Sc)}function Cc(s,l,r){for(;s!==null;){var d=s.alternate;if((s.childLanes&l)!==l?(s.childLanes|=l,d!==null&&(d.childLanes|=l)):d!==null&&(d.childLanes&l)!==l&&(d.childLanes|=l),s===r)break;s=s.return}}function Ec(s,l,r,d){var g=s.child;for(g!==null&&(g.return=s);g!==null;){var v=g.dependencies;if(v!==null){var _=g.child;v=v.firstContext;e:for(;v!==null;){var M=v;v=g;for(var B=0;B<l.length;B++)if(M.context===l[B]){v.lanes|=r,M=v.alternate,M!==null&&(M.lanes|=r),Cc(v.return,r,s),d||(_=null);break e}v=M.next}}else if(g.tag===18){if(_=g.return,_===null)throw Error(i(341));_.lanes|=r,v=_.alternate,v!==null&&(v.lanes|=r),Cc(_,r,s),_=null}else _=g.child;if(_!==null)_.return=g;else for(_=g;_!==null;){if(_===s){_=null;break}if(g=_.sibling,g!==null){g.return=_.return,_=g;break}_=_.return}g=_}}function Ql(s,l,r,d){s=null;for(var g=l,v=!1;g!==null;){if(!v){if((g.flags&524288)!==0)v=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var _=g.alternate;if(_===null)throw Error(i(387));if(_=_.memoizedProps,_!==null){var M=g.type;Xt(g.pendingProps.value,_.value)||(s!==null?s.push(M):s=[M])}}else if(g===W.current){if(_=g.alternate,_===null)throw Error(i(387));_.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(s!==null?s.push(Ti):s=[Ti])}g=g.return}s!==null&&Ec(l,s,r,d),l.flags|=262144}function yr(s){for(s=s.firstContext;s!==null;){if(!Xt(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function cl(s){ol=s,Js=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function Dt(s){return ch(ol,s)}function Nr(s,l){return ol===null&&cl(s),ch(s,l)}function ch(s,l){var r=l._currentValue;if(l={context:l,memoizedValue:r,next:null},Js===null){if(s===null)throw Error(i(308));Js=l,s.dependencies={lanes:0,firstContext:l},s.flags|=524288}else Js=Js.next=l;return r}var zv=typeof AbortController<"u"?AbortController:function(){var s=[],l=this.signal={aborted:!1,addEventListener:function(r,d){s.push(d)}};this.abort=function(){l.aborted=!0,s.forEach(function(r){return r()})}},Lv=n.unstable_scheduleCallback,Uv=n.unstable_NormalPriority,yt={$$typeof:O,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Tc(){return{controller:new zv,data:new Map,refCount:0}}function si(s){s.refCount--,s.refCount===0&&Lv(Uv,function(){s.controller.abort()})}var ni=null,kc=0,Xl=0,Zl=null;function Pv(s,l){if(ni===null){var r=ni=[];kc=0,Xl=Rd(),Zl={status:"pending",value:void 0,then:function(d){r.push(d)}}}return kc++,l.then(dh,dh),l}function dh(){if(--kc===0&&ni!==null){Zl!==null&&(Zl.status="fulfilled");var s=ni;ni=null,Xl=0,Zl=null;for(var l=0;l<s.length;l++)(0,s[l])()}}function qv(s,l){var r=[],d={status:"pending",value:null,reason:null,then:function(g){r.push(g)}};return s.then(function(){d.status="fulfilled",d.value=l;for(var g=0;g<r.length;g++)(0,r[g])(l)},function(g){for(d.status="rejected",d.reason=g,g=0;g<r.length;g++)(0,r[g])(void 0)}),d}var uh=T.S;T.S=function(s,l){Ym=At(),typeof l=="object"&&l!==null&&typeof l.then=="function"&&Pv(s,l),uh!==null&&uh(s,l)};var dl=C(null);function Ac(){var s=dl.current;return s!==null?s:st.pooledCache}function jr(s,l){l===null?j(dl,dl.current):j(dl,l.pool)}function fh(){var s=Ac();return s===null?null:{parent:yt._currentValue,pool:s}}var Wl=Error(i(460)),Mc=Error(i(474)),wr=Error(i(542)),_r={then:function(){}};function hh(s){return s=s.status,s==="fulfilled"||s==="rejected"}function mh(s,l,r){switch(r=s[r],r===void 0?s.push(l):r!==l&&(l.then(Gs,Gs),l=r),l.status){case"fulfilled":return l.value;case"rejected":throw s=l.reason,ph(s),s;default:if(typeof l.status=="string")l.then(Gs,Gs);else{if(s=st,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=l,s.status="pending",s.then(function(d){if(l.status==="pending"){var g=l;g.status="fulfilled",g.value=d}},function(d){if(l.status==="pending"){var g=l;g.status="rejected",g.reason=d}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw s=l.reason,ph(s),s}throw fl=l,Wl}}function ul(s){try{var l=s._init;return l(s._payload)}catch(r){throw r!==null&&typeof r=="object"&&typeof r.then=="function"?(fl=r,Wl):r}}var fl=null;function xh(){if(fl===null)throw Error(i(459));var s=fl;return fl=null,s}function ph(s){if(s===Wl||s===wr)throw Error(i(483))}var ea=null,li=0;function Sr(s){var l=li;return li+=1,ea===null&&(ea=[]),mh(ea,s,l)}function ai(s,l){l=l.props.ref,s.ref=l!==void 0?l:null}function Cr(s,l){throw l.$$typeof===N?Error(i(525)):(s=Object.prototype.toString.call(l),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":s)))}function gh(s){function l(te,K){if(s){var re=te.deletions;re===null?(te.deletions=[K],te.flags|=16):re.push(K)}}function r(te,K){if(!s)return null;for(;K!==null;)l(te,K),K=K.sibling;return null}function d(te){for(var K=new Map;te!==null;)te.key!==null?K.set(te.key,te):K.set(te.index,te),te=te.sibling;return K}function g(te,K){return te=Bs(te,K),te.index=0,te.sibling=null,te}function v(te,K,re){return te.index=re,s?(re=te.alternate,re!==null?(re=re.index,re<K?(te.flags|=67108866,K):re):(te.flags|=67108866,K)):(te.flags|=1048576,K)}function _(te){return s&&te.alternate===null&&(te.flags|=67108866),te}function M(te,K,re,me){return K===null||K.tag!==6?(K=vc(re,te.mode,me),K.return=te,K):(K=g(K,re),K.return=te,K)}function B(te,K,re,me){var Se=re.type;return Se===I?fe(te,K,re.props.children,me,re.key):K!==null&&(K.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===se&&ul(Se)===K.type)?(K=g(K,re.props),ai(K,re),K.return=te,K):(K=br(re.type,re.key,re.props,null,te.mode,me),ai(K,re),K.return=te,K)}function oe(te,K,re,me){return K===null||K.tag!==4||K.stateNode.containerInfo!==re.containerInfo||K.stateNode.implementation!==re.implementation?(K=yc(re,te.mode,me),K.return=te,K):(K=g(K,re.children||[]),K.return=te,K)}function fe(te,K,re,me,Se){return K===null||K.tag!==7?(K=il(re,te.mode,me,Se),K.return=te,K):(K=g(K,re),K.return=te,K)}function xe(te,K,re){if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return K=vc(""+K,te.mode,re),K.return=te,K;if(typeof K=="object"&&K!==null){switch(K.$$typeof){case w:return re=br(K.type,K.key,K.props,null,te.mode,re),ai(re,K),re.return=te,re;case A:return K=yc(K,te.mode,re),K.return=te,K;case se:return K=ul(K),xe(te,K,re)}if(Y(K)||le(K))return K=il(K,te.mode,re,null),K.return=te,K;if(typeof K.then=="function")return xe(te,Sr(K),re);if(K.$$typeof===O)return xe(te,Nr(te,K),re);Cr(te,K)}return null}function ce(te,K,re,me){var Se=K!==null?K.key:null;if(typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint")return Se!==null?null:M(te,K,""+re,me);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case w:return re.key===Se?B(te,K,re,me):null;case A:return re.key===Se?oe(te,K,re,me):null;case se:return re=ul(re),ce(te,K,re,me)}if(Y(re)||le(re))return Se!==null?null:fe(te,K,re,me,null);if(typeof re.then=="function")return ce(te,K,Sr(re),me);if(re.$$typeof===O)return ce(te,K,Nr(te,re),me);Cr(te,re)}return null}function de(te,K,re,me,Se){if(typeof me=="string"&&me!==""||typeof me=="number"||typeof me=="bigint")return te=te.get(re)||null,M(K,te,""+me,Se);if(typeof me=="object"&&me!==null){switch(me.$$typeof){case w:return te=te.get(me.key===null?re:me.key)||null,B(K,te,me,Se);case A:return te=te.get(me.key===null?re:me.key)||null,oe(K,te,me,Se);case se:return me=ul(me),de(te,K,re,me,Se)}if(Y(me)||le(me))return te=te.get(re)||null,fe(K,te,me,Se,null);if(typeof me.then=="function")return de(te,K,re,Sr(me),Se);if(me.$$typeof===O)return de(te,K,re,Nr(K,me),Se);Cr(K,me)}return null}function Ne(te,K,re,me){for(var Se=null,Ve=null,je=K,Me=K=0,qe=null;je!==null&&Me<re.length;Me++){je.index>Me?(qe=je,je=null):qe=je.sibling;var Be=ce(te,je,re[Me],me);if(Be===null){je===null&&(je=qe);break}s&&je&&Be.alternate===null&&l(te,je),K=v(Be,K,Me),Ve===null?Se=Be:Ve.sibling=Be,Ve=Be,je=qe}if(Me===re.length)return r(te,je),He&&Fs(te,Me),Se;if(je===null){for(;Me<re.length;Me++)je=xe(te,re[Me],me),je!==null&&(K=v(je,K,Me),Ve===null?Se=je:Ve.sibling=je,Ve=je);return He&&Fs(te,Me),Se}for(je=d(je);Me<re.length;Me++)qe=de(je,te,Me,re[Me],me),qe!==null&&(s&&qe.alternate!==null&&je.delete(qe.key===null?Me:qe.key),K=v(qe,K,Me),Ve===null?Se=qe:Ve.sibling=qe,Ve=qe);return s&&je.forEach(function(On){return l(te,On)}),He&&Fs(te,Me),Se}function Ce(te,K,re,me){if(re==null)throw Error(i(151));for(var Se=null,Ve=null,je=K,Me=K=0,qe=null,Be=re.next();je!==null&&!Be.done;Me++,Be=re.next()){je.index>Me?(qe=je,je=null):qe=je.sibling;var On=ce(te,je,Be.value,me);if(On===null){je===null&&(je=qe);break}s&&je&&On.alternate===null&&l(te,je),K=v(On,K,Me),Ve===null?Se=On:Ve.sibling=On,Ve=On,je=qe}if(Be.done)return r(te,je),He&&Fs(te,Me),Se;if(je===null){for(;!Be.done;Me++,Be=re.next())Be=xe(te,Be.value,me),Be!==null&&(K=v(Be,K,Me),Ve===null?Se=Be:Ve.sibling=Be,Ve=Be);return He&&Fs(te,Me),Se}for(je=d(je);!Be.done;Me++,Be=re.next())Be=de(je,te,Me,Be.value,me),Be!==null&&(s&&Be.alternate!==null&&je.delete(Be.key===null?Me:Be.key),K=v(Be,K,Me),Ve===null?Se=Be:Ve.sibling=Be,Ve=Be);return s&&je.forEach(function(Qy){return l(te,Qy)}),He&&Fs(te,Me),Se}function tt(te,K,re,me){if(typeof re=="object"&&re!==null&&re.type===I&&re.key===null&&(re=re.props.children),typeof re=="object"&&re!==null){switch(re.$$typeof){case w:e:{for(var Se=re.key;K!==null;){if(K.key===Se){if(Se=re.type,Se===I){if(K.tag===7){r(te,K.sibling),me=g(K,re.props.children),me.return=te,te=me;break e}}else if(K.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===se&&ul(Se)===K.type){r(te,K.sibling),me=g(K,re.props),ai(me,re),me.return=te,te=me;break e}r(te,K);break}else l(te,K);K=K.sibling}re.type===I?(me=il(re.props.children,te.mode,me,re.key),me.return=te,te=me):(me=br(re.type,re.key,re.props,null,te.mode,me),ai(me,re),me.return=te,te=me)}return _(te);case A:e:{for(Se=re.key;K!==null;){if(K.key===Se)if(K.tag===4&&K.stateNode.containerInfo===re.containerInfo&&K.stateNode.implementation===re.implementation){r(te,K.sibling),me=g(K,re.children||[]),me.return=te,te=me;break e}else{r(te,K);break}else l(te,K);K=K.sibling}me=yc(re,te.mode,me),me.return=te,te=me}return _(te);case se:return re=ul(re),tt(te,K,re,me)}if(Y(re))return Ne(te,K,re,me);if(le(re)){if(Se=le(re),typeof Se!="function")throw Error(i(150));return re=Se.call(re),Ce(te,K,re,me)}if(typeof re.then=="function")return tt(te,K,Sr(re),me);if(re.$$typeof===O)return tt(te,K,Nr(te,re),me);Cr(te,re)}return typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint"?(re=""+re,K!==null&&K.tag===6?(r(te,K.sibling),me=g(K,re),me.return=te,te=me):(r(te,K),me=vc(re,te.mode,me),me.return=te,te=me),_(te)):r(te,K)}return function(te,K,re,me){try{li=0;var Se=tt(te,K,re,me);return ea=null,Se}catch(je){if(je===Wl||je===wr)throw je;var Ve=Zt(29,je,null,te.mode);return Ve.lanes=me,Ve.return=te,Ve}finally{}}}var hl=gh(!0),bh=gh(!1),wn=!1;function Rc(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Dc(s,l){s=s.updateQueue,l.updateQueue===s&&(l.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function _n(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Sn(s,l,r){var d=s.updateQueue;if(d===null)return null;if(d=d.shared,(Ye&2)!==0){var g=d.pending;return g===null?l.next=l:(l.next=g.next,g.next=l),d.pending=l,l=gr(s),th(s,null,r),l}return pr(s,d,l,r),gr(s)}function ii(s,l,r){if(l=l.updateQueue,l!==null&&(l=l.shared,(r&4194048)!==0)){var d=l.lanes;d&=s.pendingLanes,r|=d,l.lanes=r,we(s,r)}}function Ic(s,l){var r=s.updateQueue,d=s.alternate;if(d!==null&&(d=d.updateQueue,r===d)){var g=null,v=null;if(r=r.firstBaseUpdate,r!==null){do{var _={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};v===null?g=v=_:v=v.next=_,r=r.next}while(r!==null);v===null?g=v=l:v=v.next=l}else g=v=l;r={baseState:d.baseState,firstBaseUpdate:g,lastBaseUpdate:v,shared:d.shared,callbacks:d.callbacks},s.updateQueue=r;return}s=r.lastBaseUpdate,s===null?r.firstBaseUpdate=l:s.next=l,r.lastBaseUpdate=l}var zc=!1;function ri(){if(zc){var s=Zl;if(s!==null)throw s}}function oi(s,l,r,d){zc=!1;var g=s.updateQueue;wn=!1;var v=g.firstBaseUpdate,_=g.lastBaseUpdate,M=g.shared.pending;if(M!==null){g.shared.pending=null;var B=M,oe=B.next;B.next=null,_===null?v=oe:_.next=oe,_=B;var fe=s.alternate;fe!==null&&(fe=fe.updateQueue,M=fe.lastBaseUpdate,M!==_&&(M===null?fe.firstBaseUpdate=oe:M.next=oe,fe.lastBaseUpdate=B))}if(v!==null){var xe=g.baseState;_=0,fe=oe=B=null,M=v;do{var ce=M.lane&-536870913,de=ce!==M.lane;if(de?(Pe&ce)===ce:(d&ce)===ce){ce!==0&&ce===Xl&&(zc=!0),fe!==null&&(fe=fe.next={lane:0,tag:M.tag,payload:M.payload,callback:null,next:null});e:{var Ne=s,Ce=M;ce=l;var tt=r;switch(Ce.tag){case 1:if(Ne=Ce.payload,typeof Ne=="function"){xe=Ne.call(tt,xe,ce);break e}xe=Ne;break e;case 3:Ne.flags=Ne.flags&-65537|128;case 0:if(Ne=Ce.payload,ce=typeof Ne=="function"?Ne.call(tt,xe,ce):Ne,ce==null)break e;xe=y({},xe,ce);break e;case 2:wn=!0}}ce=M.callback,ce!==null&&(s.flags|=64,de&&(s.flags|=8192),de=g.callbacks,de===null?g.callbacks=[ce]:de.push(ce))}else de={lane:ce,tag:M.tag,payload:M.payload,callback:M.callback,next:null},fe===null?(oe=fe=de,B=xe):fe=fe.next=de,_|=ce;if(M=M.next,M===null){if(M=g.shared.pending,M===null)break;de=M,M=de.next,de.next=null,g.lastBaseUpdate=de,g.shared.pending=null}}while(!0);fe===null&&(B=xe),g.baseState=B,g.firstBaseUpdate=oe,g.lastBaseUpdate=fe,v===null&&(g.shared.lanes=0),An|=_,s.lanes=_,s.memoizedState=xe}}function vh(s,l){if(typeof s!="function")throw Error(i(191,s));s.call(l)}function yh(s,l){var r=s.callbacks;if(r!==null)for(s.callbacks=null,s=0;s<r.length;s++)vh(r[s],l)}var ta=C(null),Er=C(0);function Nh(s,l){s=nn,j(Er,s),j(ta,l),nn=s|l.baseLanes}function Lc(){j(Er,nn),j(ta,ta.current)}function Uc(){nn=Er.current,D(ta),D(Er)}var Wt=C(null),ps=null;function Cn(s){var l=s.alternate;j(xt,xt.current&1),j(Wt,s),ps===null&&(l===null||ta.current!==null||l.memoizedState!==null)&&(ps=s)}function Pc(s){j(xt,xt.current),j(Wt,s),ps===null&&(ps=s)}function jh(s){s.tag===22?(j(xt,xt.current),j(Wt,s),ps===null&&(ps=s)):En()}function En(){j(xt,xt.current),j(Wt,Wt.current)}function es(s){D(Wt),ps===s&&(ps=null),D(xt)}var xt=C(0);function Tr(s){for(var l=s;l!==null;){if(l.tag===13){var r=l.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||Vd(r)||Bd(r)))return l}else if(l.tag===19&&(l.memoizedProps.revealOrder==="forwards"||l.memoizedProps.revealOrder==="backwards"||l.memoizedProps.revealOrder==="unstable_legacy-backwards"||l.memoizedProps.revealOrder==="together")){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var Ks=0,Ae=null,We=null,Nt=null,kr=!1,sa=!1,ml=!1,Ar=0,ci=0,na=null,Ov=0;function ht(){throw Error(i(321))}function qc(s,l){if(l===null)return!1;for(var r=0;r<l.length&&r<s.length;r++)if(!Xt(s[r],l[r]))return!1;return!0}function Oc(s,l,r,d,g,v){return Ks=v,Ae=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,T.H=s===null||s.memoizedState===null?am:td,ml=!1,v=r(d,g),ml=!1,sa&&(v=_h(l,r,d,g)),wh(s),v}function wh(s){T.H=fi;var l=We!==null&&We.next!==null;if(Ks=0,Nt=We=Ae=null,kr=!1,ci=0,na=null,l)throw Error(i(300));s===null||jt||(s=s.dependencies,s!==null&&yr(s)&&(jt=!0))}function _h(s,l,r,d){Ae=s;var g=0;do{if(sa&&(na=null),ci=0,sa=!1,25<=g)throw Error(i(301));if(g+=1,Nt=We=null,s.updateQueue!=null){var v=s.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}T.H=im,v=l(r,d)}while(sa);return v}function $v(){var s=T.H,l=s.useState()[0];return l=typeof l.then=="function"?di(l):l,s=s.useState()[0],(We!==null?We.memoizedState:null)!==s&&(Ae.flags|=1024),l}function $c(){var s=Ar!==0;return Ar=0,s}function Hc(s,l,r){l.updateQueue=s.updateQueue,l.flags&=-2053,s.lanes&=~r}function Gc(s){if(kr){for(s=s.memoizedState;s!==null;){var l=s.queue;l!==null&&(l.pending=null),s=s.next}kr=!1}Ks=0,Nt=We=Ae=null,sa=!1,ci=Ar=0,na=null}function $t(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nt===null?Ae.memoizedState=Nt=s:Nt=Nt.next=s,Nt}function pt(){if(We===null){var s=Ae.alternate;s=s!==null?s.memoizedState:null}else s=We.next;var l=Nt===null?Ae.memoizedState:Nt.next;if(l!==null)Nt=l,We=s;else{if(s===null)throw Ae.alternate===null?Error(i(467)):Error(i(310));We=s,s={memoizedState:We.memoizedState,baseState:We.baseState,baseQueue:We.baseQueue,queue:We.queue,next:null},Nt===null?Ae.memoizedState=Nt=s:Nt=Nt.next=s}return Nt}function Mr(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function di(s){var l=ci;return ci+=1,na===null&&(na=[]),s=mh(na,s,l),l=Ae,(Nt===null?l.memoizedState:Nt.next)===null&&(l=l.alternate,T.H=l===null||l.memoizedState===null?am:td),s}function Rr(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return di(s);if(s.$$typeof===O)return Dt(s)}throw Error(i(438,String(s)))}function Vc(s){var l=null,r=Ae.updateQueue;if(r!==null&&(l=r.memoCache),l==null){var d=Ae.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(l={data:d.data.map(function(g){return g.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),r===null&&(r=Mr(),Ae.updateQueue=r),r.memoCache=l,r=l.data[l.index],r===void 0)for(r=l.data[l.index]=Array(s),d=0;d<s;d++)r[d]=P;return l.index++,r}function Qs(s,l){return typeof l=="function"?l(s):l}function Dr(s){var l=pt();return Bc(l,We,s)}function Bc(s,l,r){var d=s.queue;if(d===null)throw Error(i(311));d.lastRenderedReducer=r;var g=s.baseQueue,v=d.pending;if(v!==null){if(g!==null){var _=g.next;g.next=v.next,v.next=_}l.baseQueue=g=v,d.pending=null}if(v=s.baseState,g===null)s.memoizedState=v;else{l=g.next;var M=_=null,B=null,oe=l,fe=!1;do{var xe=oe.lane&-536870913;if(xe!==oe.lane?(Pe&xe)===xe:(Ks&xe)===xe){var ce=oe.revertLane;if(ce===0)B!==null&&(B=B.next={lane:0,revertLane:0,gesture:null,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null}),xe===Xl&&(fe=!0);else if((Ks&ce)===ce){oe=oe.next,ce===Xl&&(fe=!0);continue}else xe={lane:0,revertLane:oe.revertLane,gesture:null,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null},B===null?(M=B=xe,_=v):B=B.next=xe,Ae.lanes|=ce,An|=ce;xe=oe.action,ml&&r(v,xe),v=oe.hasEagerState?oe.eagerState:r(v,xe)}else ce={lane:xe,revertLane:oe.revertLane,gesture:oe.gesture,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null},B===null?(M=B=ce,_=v):B=B.next=ce,Ae.lanes|=xe,An|=xe;oe=oe.next}while(oe!==null&&oe!==l);if(B===null?_=v:B.next=M,!Xt(v,s.memoizedState)&&(jt=!0,fe&&(r=Zl,r!==null)))throw r;s.memoizedState=v,s.baseState=_,s.baseQueue=B,d.lastRenderedState=v}return g===null&&(d.lanes=0),[s.memoizedState,d.dispatch]}function Fc(s){var l=pt(),r=l.queue;if(r===null)throw Error(i(311));r.lastRenderedReducer=s;var d=r.dispatch,g=r.pending,v=l.memoizedState;if(g!==null){r.pending=null;var _=g=g.next;do v=s(v,_.action),_=_.next;while(_!==g);Xt(v,l.memoizedState)||(jt=!0),l.memoizedState=v,l.baseQueue===null&&(l.baseState=v),r.lastRenderedState=v}return[v,d]}function Sh(s,l,r){var d=Ae,g=pt(),v=He;if(v){if(r===void 0)throw Error(i(407));r=r()}else r=l();var _=!Xt((We||g).memoizedState,r);if(_&&(g.memoizedState=r,jt=!0),g=g.queue,Kc(Th.bind(null,d,g,s),[s]),g.getSnapshot!==l||_||Nt!==null&&Nt.memoizedState.tag&1){if(d.flags|=2048,la(9,{destroy:void 0},Eh.bind(null,d,g,r,l),null),st===null)throw Error(i(349));v||(Ks&127)!==0||Ch(d,l,r)}return r}function Ch(s,l,r){s.flags|=16384,s={getSnapshot:l,value:r},l=Ae.updateQueue,l===null?(l=Mr(),Ae.updateQueue=l,l.stores=[s]):(r=l.stores,r===null?l.stores=[s]:r.push(s))}function Eh(s,l,r,d){l.value=r,l.getSnapshot=d,kh(l)&&Ah(s)}function Th(s,l,r){return r(function(){kh(l)&&Ah(s)})}function kh(s){var l=s.getSnapshot;s=s.value;try{var r=l();return!Xt(s,r)}catch{return!0}}function Ah(s){var l=al(s,2);l!==null&&Yt(l,s,2)}function Jc(s){var l=$t();if(typeof s=="function"){var r=s;if(s=r(),ml){_s(!0);try{r()}finally{_s(!1)}}}return l.memoizedState=l.baseState=s,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qs,lastRenderedState:s},l}function Mh(s,l,r,d){return s.baseState=r,Bc(s,We,typeof d=="function"?d:Qs)}function Hv(s,l,r,d,g){if(Lr(s))throw Error(i(485));if(s=l.action,s!==null){var v={payload:g,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){v.listeners.push(_)}};T.T!==null?r(!0):v.isTransition=!1,d(v),r=l.pending,r===null?(v.next=l.pending=v,Rh(l,v)):(v.next=r.next,l.pending=r.next=v)}}function Rh(s,l){var r=l.action,d=l.payload,g=s.state;if(l.isTransition){var v=T.T,_={};T.T=_;try{var M=r(g,d),B=T.S;B!==null&&B(_,M),Dh(s,l,M)}catch(oe){Yc(s,l,oe)}finally{v!==null&&_.types!==null&&(v.types=_.types),T.T=v}}else try{v=r(g,d),Dh(s,l,v)}catch(oe){Yc(s,l,oe)}}function Dh(s,l,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(d){Ih(s,l,d)},function(d){return Yc(s,l,d)}):Ih(s,l,r)}function Ih(s,l,r){l.status="fulfilled",l.value=r,zh(l),s.state=r,l=s.pending,l!==null&&(r=l.next,r===l?s.pending=null:(r=r.next,l.next=r,Rh(s,r)))}function Yc(s,l,r){var d=s.pending;if(s.pending=null,d!==null){d=d.next;do l.status="rejected",l.reason=r,zh(l),l=l.next;while(l!==d)}s.action=null}function zh(s){s=s.listeners;for(var l=0;l<s.length;l++)(0,s[l])()}function Lh(s,l){return l}function Uh(s,l){if(He){var r=st.formState;if(r!==null){e:{var d=Ae;if(He){if(at){t:{for(var g=at,v=xs;g.nodeType!==8;){if(!v){g=null;break t}if(g=gs(g.nextSibling),g===null){g=null;break t}}v=g.data,g=v==="F!"||v==="F"?g:null}if(g){at=gs(g.nextSibling),d=g.data==="F!";break e}}Nn(d)}d=!1}d&&(l=r[0])}}return r=$t(),r.memoizedState=r.baseState=l,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Lh,lastRenderedState:l},r.queue=d,r=sm.bind(null,Ae,d),d.dispatch=r,d=Jc(!1),v=ed.bind(null,Ae,!1,d.queue),d=$t(),g={state:l,dispatch:null,action:s,pending:null},d.queue=g,r=Hv.bind(null,Ae,g,v,r),g.dispatch=r,d.memoizedState=s,[l,r,!1]}function Ph(s){var l=pt();return qh(l,We,s)}function qh(s,l,r){if(l=Bc(s,l,Lh)[0],s=Dr(Qs)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var d=di(l)}catch(_){throw _===Wl?wr:_}else d=l;l=pt();var g=l.queue,v=g.dispatch;return r!==l.memoizedState&&(Ae.flags|=2048,la(9,{destroy:void 0},Gv.bind(null,g,r),null)),[d,v,s]}function Gv(s,l){s.action=l}function Oh(s){var l=pt(),r=We;if(r!==null)return qh(l,r,s);pt(),l=l.memoizedState,r=pt();var d=r.queue.dispatch;return r.memoizedState=s,[l,d,!1]}function la(s,l,r,d){return s={tag:s,create:r,deps:d,inst:l,next:null},l=Ae.updateQueue,l===null&&(l=Mr(),Ae.updateQueue=l),r=l.lastEffect,r===null?l.lastEffect=s.next=s:(d=r.next,r.next=s,s.next=d,l.lastEffect=s),s}function $h(){return pt().memoizedState}function Ir(s,l,r,d){var g=$t();Ae.flags|=s,g.memoizedState=la(1|l,{destroy:void 0},r,d===void 0?null:d)}function zr(s,l,r,d){var g=pt();d=d===void 0?null:d;var v=g.memoizedState.inst;We!==null&&d!==null&&qc(d,We.memoizedState.deps)?g.memoizedState=la(l,v,r,d):(Ae.flags|=s,g.memoizedState=la(1|l,v,r,d))}function Hh(s,l){Ir(8390656,8,s,l)}function Kc(s,l){zr(2048,8,s,l)}function Vv(s){Ae.flags|=4;var l=Ae.updateQueue;if(l===null)l=Mr(),Ae.updateQueue=l,l.events=[s];else{var r=l.events;r===null?l.events=[s]:r.push(s)}}function Gh(s){var l=pt().memoizedState;return Vv({ref:l,nextImpl:s}),function(){if((Ye&2)!==0)throw Error(i(440));return l.impl.apply(void 0,arguments)}}function Vh(s,l){return zr(4,2,s,l)}function Bh(s,l){return zr(4,4,s,l)}function Fh(s,l){if(typeof l=="function"){s=s();var r=l(s);return function(){typeof r=="function"?r():l(null)}}if(l!=null)return s=s(),l.current=s,function(){l.current=null}}function Jh(s,l,r){r=r!=null?r.concat([s]):null,zr(4,4,Fh.bind(null,l,s),r)}function Qc(){}function Yh(s,l){var r=pt();l=l===void 0?null:l;var d=r.memoizedState;return l!==null&&qc(l,d[1])?d[0]:(r.memoizedState=[s,l],s)}function Kh(s,l){var r=pt();l=l===void 0?null:l;var d=r.memoizedState;if(l!==null&&qc(l,d[1]))return d[0];if(d=s(),ml){_s(!0);try{s()}finally{_s(!1)}}return r.memoizedState=[d,l],d}function Xc(s,l,r){return r===void 0||(Ks&1073741824)!==0&&(Pe&261930)===0?s.memoizedState=l:(s.memoizedState=r,s=Qm(),Ae.lanes|=s,An|=s,r)}function Qh(s,l,r,d){return Xt(r,l)?r:ta.current!==null?(s=Xc(s,r,d),Xt(s,l)||(jt=!0),s):(Ks&42)===0||(Ks&1073741824)!==0&&(Pe&261930)===0?(jt=!0,s.memoizedState=r):(s=Qm(),Ae.lanes|=s,An|=s,l)}function Xh(s,l,r,d,g){var v=E.p;E.p=v!==0&&8>v?v:8;var _=T.T,M={};T.T=M,ed(s,!1,l,r);try{var B=g(),oe=T.S;if(oe!==null&&oe(M,B),B!==null&&typeof B=="object"&&typeof B.then=="function"){var fe=qv(B,d);ui(s,l,fe,ns(s))}else ui(s,l,d,ns(s))}catch(xe){ui(s,l,{then:function(){},status:"rejected",reason:xe},ns())}finally{E.p=v,_!==null&&M.types!==null&&(_.types=M.types),T.T=_}}function Bv(){}function Zc(s,l,r,d){if(s.tag!==5)throw Error(i(476));var g=Zh(s).queue;Xh(s,g,l,L,r===null?Bv:function(){return Wh(s),r(d)})}function Zh(s){var l=s.memoizedState;if(l!==null)return l;l={memoizedState:L,baseState:L,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qs,lastRenderedState:L},next:null};var r={};return l.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qs,lastRenderedState:r},next:null},s.memoizedState=l,s=s.alternate,s!==null&&(s.memoizedState=l),l}function Wh(s){var l=Zh(s);l.next===null&&(l=s.alternate.memoizedState),ui(s,l.next.queue,{},ns())}function Wc(){return Dt(Ti)}function em(){return pt().memoizedState}function tm(){return pt().memoizedState}function Fv(s){for(var l=s.return;l!==null;){switch(l.tag){case 24:case 3:var r=ns();s=_n(r);var d=Sn(l,s,r);d!==null&&(Yt(d,l,r),ii(d,l,r)),l={cache:Tc()},s.payload=l;return}l=l.return}}function Jv(s,l,r){var d=ns();r={lane:d,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},Lr(s)?nm(l,r):(r=gc(s,l,r,d),r!==null&&(Yt(r,s,d),lm(r,l,d)))}function sm(s,l,r){var d=ns();ui(s,l,r,d)}function ui(s,l,r,d){var g={lane:d,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null};if(Lr(s))nm(l,g);else{var v=s.alternate;if(s.lanes===0&&(v===null||v.lanes===0)&&(v=l.lastRenderedReducer,v!==null))try{var _=l.lastRenderedState,M=v(_,r);if(g.hasEagerState=!0,g.eagerState=M,Xt(M,_))return pr(s,l,g,0),st===null&&xr(),!1}catch{}finally{}if(r=gc(s,l,g,d),r!==null)return Yt(r,s,d),lm(r,l,d),!0}return!1}function ed(s,l,r,d){if(d={lane:2,revertLane:Rd(),gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},Lr(s)){if(l)throw Error(i(479))}else l=gc(s,r,d,2),l!==null&&Yt(l,s,2)}function Lr(s){var l=s.alternate;return s===Ae||l!==null&&l===Ae}function nm(s,l){sa=kr=!0;var r=s.pending;r===null?l.next=l:(l.next=r.next,r.next=l),s.pending=l}function lm(s,l,r){if((r&4194048)!==0){var d=l.lanes;d&=s.pendingLanes,r|=d,l.lanes=r,we(s,r)}}var fi={readContext:Dt,use:Rr,useCallback:ht,useContext:ht,useEffect:ht,useImperativeHandle:ht,useLayoutEffect:ht,useInsertionEffect:ht,useMemo:ht,useReducer:ht,useRef:ht,useState:ht,useDebugValue:ht,useDeferredValue:ht,useTransition:ht,useSyncExternalStore:ht,useId:ht,useHostTransitionStatus:ht,useFormState:ht,useActionState:ht,useOptimistic:ht,useMemoCache:ht,useCacheRefresh:ht};fi.useEffectEvent=ht;var am={readContext:Dt,use:Rr,useCallback:function(s,l){return $t().memoizedState=[s,l===void 0?null:l],s},useContext:Dt,useEffect:Hh,useImperativeHandle:function(s,l,r){r=r!=null?r.concat([s]):null,Ir(4194308,4,Fh.bind(null,l,s),r)},useLayoutEffect:function(s,l){return Ir(4194308,4,s,l)},useInsertionEffect:function(s,l){Ir(4,2,s,l)},useMemo:function(s,l){var r=$t();l=l===void 0?null:l;var d=s();if(ml){_s(!0);try{s()}finally{_s(!1)}}return r.memoizedState=[d,l],d},useReducer:function(s,l,r){var d=$t();if(r!==void 0){var g=r(l);if(ml){_s(!0);try{r(l)}finally{_s(!1)}}}else g=l;return d.memoizedState=d.baseState=g,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:g},d.queue=s,s=s.dispatch=Jv.bind(null,Ae,s),[d.memoizedState,s]},useRef:function(s){var l=$t();return s={current:s},l.memoizedState=s},useState:function(s){s=Jc(s);var l=s.queue,r=sm.bind(null,Ae,l);return l.dispatch=r,[s.memoizedState,r]},useDebugValue:Qc,useDeferredValue:function(s,l){var r=$t();return Xc(r,s,l)},useTransition:function(){var s=Jc(!1);return s=Xh.bind(null,Ae,s.queue,!0,!1),$t().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,l,r){var d=Ae,g=$t();if(He){if(r===void 0)throw Error(i(407));r=r()}else{if(r=l(),st===null)throw Error(i(349));(Pe&127)!==0||Ch(d,l,r)}g.memoizedState=r;var v={value:r,getSnapshot:l};return g.queue=v,Hh(Th.bind(null,d,v,s),[s]),d.flags|=2048,la(9,{destroy:void 0},Eh.bind(null,d,v,r,l),null),r},useId:function(){var s=$t(),l=st.identifierPrefix;if(He){var r=zs,d=Is;r=(d&~(1<<32-Ct(d)-1)).toString(32)+r,l="_"+l+"R_"+r,r=Ar++,0<r&&(l+="H"+r.toString(32)),l+="_"}else r=Ov++,l="_"+l+"r_"+r.toString(32)+"_";return s.memoizedState=l},useHostTransitionStatus:Wc,useFormState:Uh,useActionState:Uh,useOptimistic:function(s){var l=$t();l.memoizedState=l.baseState=s;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=r,l=ed.bind(null,Ae,!0,r),r.dispatch=l,[s,l]},useMemoCache:Vc,useCacheRefresh:function(){return $t().memoizedState=Fv.bind(null,Ae)},useEffectEvent:function(s){var l=$t(),r={impl:s};return l.memoizedState=r,function(){if((Ye&2)!==0)throw Error(i(440));return r.impl.apply(void 0,arguments)}}},td={readContext:Dt,use:Rr,useCallback:Yh,useContext:Dt,useEffect:Kc,useImperativeHandle:Jh,useInsertionEffect:Vh,useLayoutEffect:Bh,useMemo:Kh,useReducer:Dr,useRef:$h,useState:function(){return Dr(Qs)},useDebugValue:Qc,useDeferredValue:function(s,l){var r=pt();return Qh(r,We.memoizedState,s,l)},useTransition:function(){var s=Dr(Qs)[0],l=pt().memoizedState;return[typeof s=="boolean"?s:di(s),l]},useSyncExternalStore:Sh,useId:em,useHostTransitionStatus:Wc,useFormState:Ph,useActionState:Ph,useOptimistic:function(s,l){var r=pt();return Mh(r,We,s,l)},useMemoCache:Vc,useCacheRefresh:tm};td.useEffectEvent=Gh;var im={readContext:Dt,use:Rr,useCallback:Yh,useContext:Dt,useEffect:Kc,useImperativeHandle:Jh,useInsertionEffect:Vh,useLayoutEffect:Bh,useMemo:Kh,useReducer:Fc,useRef:$h,useState:function(){return Fc(Qs)},useDebugValue:Qc,useDeferredValue:function(s,l){var r=pt();return We===null?Xc(r,s,l):Qh(r,We.memoizedState,s,l)},useTransition:function(){var s=Fc(Qs)[0],l=pt().memoizedState;return[typeof s=="boolean"?s:di(s),l]},useSyncExternalStore:Sh,useId:em,useHostTransitionStatus:Wc,useFormState:Oh,useActionState:Oh,useOptimistic:function(s,l){var r=pt();return We!==null?Mh(r,We,s,l):(r.baseState=s,[s,r.queue.dispatch])},useMemoCache:Vc,useCacheRefresh:tm};im.useEffectEvent=Gh;function sd(s,l,r,d){l=s.memoizedState,r=r(d,l),r=r==null?l:y({},l,r),s.memoizedState=r,s.lanes===0&&(s.updateQueue.baseState=r)}var nd={enqueueSetState:function(s,l,r){s=s._reactInternals;var d=ns(),g=_n(d);g.payload=l,r!=null&&(g.callback=r),l=Sn(s,g,d),l!==null&&(Yt(l,s,d),ii(l,s,d))},enqueueReplaceState:function(s,l,r){s=s._reactInternals;var d=ns(),g=_n(d);g.tag=1,g.payload=l,r!=null&&(g.callback=r),l=Sn(s,g,d),l!==null&&(Yt(l,s,d),ii(l,s,d))},enqueueForceUpdate:function(s,l){s=s._reactInternals;var r=ns(),d=_n(r);d.tag=2,l!=null&&(d.callback=l),l=Sn(s,d,r),l!==null&&(Yt(l,s,r),ii(l,s,r))}};function rm(s,l,r,d,g,v,_){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(d,v,_):l.prototype&&l.prototype.isPureReactComponent?!Za(r,d)||!Za(g,v):!0}function om(s,l,r,d){s=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(r,d),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(r,d),l.state!==s&&nd.enqueueReplaceState(l,l.state,null)}function xl(s,l){var r=l;if("ref"in l){r={};for(var d in l)d!=="ref"&&(r[d]=l[d])}if(s=s.defaultProps){r===l&&(r=y({},r));for(var g in s)r[g]===void 0&&(r[g]=s[g])}return r}function cm(s){mr(s)}function dm(s){console.error(s)}function um(s){mr(s)}function Ur(s,l){try{var r=s.onUncaughtError;r(l.value,{componentStack:l.stack})}catch(d){setTimeout(function(){throw d})}}function fm(s,l,r){try{var d=s.onCaughtError;d(r.value,{componentStack:r.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function ld(s,l,r){return r=_n(r),r.tag=3,r.payload={element:null},r.callback=function(){Ur(s,l)},r}function hm(s){return s=_n(s),s.tag=3,s}function mm(s,l,r,d){var g=r.type.getDerivedStateFromError;if(typeof g=="function"){var v=d.value;s.payload=function(){return g(v)},s.callback=function(){fm(l,r,d)}}var _=r.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(s.callback=function(){fm(l,r,d),typeof g!="function"&&(Mn===null?Mn=new Set([this]):Mn.add(this));var M=d.stack;this.componentDidCatch(d.value,{componentStack:M!==null?M:""})})}function Yv(s,l,r,d,g){if(r.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(l=r.alternate,l!==null&&Ql(l,r,g,!0),r=Wt.current,r!==null){switch(r.tag){case 31:case 13:return ps===null?Kr():r.alternate===null&&mt===0&&(mt=3),r.flags&=-257,r.flags|=65536,r.lanes=g,d===_r?r.flags|=16384:(l=r.updateQueue,l===null?r.updateQueue=new Set([d]):l.add(d),kd(s,d,g)),!1;case 22:return r.flags|=65536,d===_r?r.flags|=16384:(l=r.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([d])},r.updateQueue=l):(r=l.retryQueue,r===null?l.retryQueue=new Set([d]):r.add(d)),kd(s,d,g)),!1}throw Error(i(435,r.tag))}return kd(s,d,g),Kr(),!1}if(He)return l=Wt.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=g,d!==wc&&(s=Error(i(422),{cause:d}),ti(fs(s,r)))):(d!==wc&&(l=Error(i(423),{cause:d}),ti(fs(l,r))),s=s.current.alternate,s.flags|=65536,g&=-g,s.lanes|=g,d=fs(d,r),g=ld(s.stateNode,d,g),Ic(s,g),mt!==4&&(mt=2)),!1;var v=Error(i(520),{cause:d});if(v=fs(v,r),yi===null?yi=[v]:yi.push(v),mt!==4&&(mt=2),l===null)return!0;d=fs(d,r),r=l;do{switch(r.tag){case 3:return r.flags|=65536,s=g&-g,r.lanes|=s,s=ld(r.stateNode,d,s),Ic(r,s),!1;case 1:if(l=r.type,v=r.stateNode,(r.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Mn===null||!Mn.has(v))))return r.flags|=65536,g&=-g,r.lanes|=g,g=hm(g),mm(g,s,r,d),Ic(r,g),!1}r=r.return}while(r!==null);return!1}var ad=Error(i(461)),jt=!1;function It(s,l,r,d){l.child=s===null?bh(l,null,r,d):hl(l,s.child,r,d)}function xm(s,l,r,d,g){r=r.render;var v=l.ref;if("ref"in d){var _={};for(var M in d)M!=="ref"&&(_[M]=d[M])}else _=d;return cl(l),d=Oc(s,l,r,_,v,g),M=$c(),s!==null&&!jt?(Hc(s,l,g),Xs(s,l,g)):(He&&M&&Nc(l),l.flags|=1,It(s,l,d,g),l.child)}function pm(s,l,r,d,g){if(s===null){var v=r.type;return typeof v=="function"&&!bc(v)&&v.defaultProps===void 0&&r.compare===null?(l.tag=15,l.type=v,gm(s,l,v,d,g)):(s=br(r.type,null,d,l,l.mode,g),s.ref=l.ref,s.return=l,l.child=s)}if(v=s.child,!hd(s,g)){var _=v.memoizedProps;if(r=r.compare,r=r!==null?r:Za,r(_,d)&&s.ref===l.ref)return Xs(s,l,g)}return l.flags|=1,s=Bs(v,d),s.ref=l.ref,s.return=l,l.child=s}function gm(s,l,r,d,g){if(s!==null){var v=s.memoizedProps;if(Za(v,d)&&s.ref===l.ref)if(jt=!1,l.pendingProps=d=v,hd(s,g))(s.flags&131072)!==0&&(jt=!0);else return l.lanes=s.lanes,Xs(s,l,g)}return id(s,l,r,d,g)}function bm(s,l,r,d){var g=d.children,v=s!==null?s.memoizedState:null;if(s===null&&l.stateNode===null&&(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.mode==="hidden"){if((l.flags&128)!==0){if(v=v!==null?v.baseLanes|r:r,s!==null){for(d=l.child=s.child,g=0;d!==null;)g=g|d.lanes|d.childLanes,d=d.sibling;d=g&~v}else d=0,l.child=null;return vm(s,l,v,r,d)}if((r&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},s!==null&&jr(l,v!==null?v.cachePool:null),v!==null?Nh(l,v):Lc(),jh(l);else return d=l.lanes=536870912,vm(s,l,v!==null?v.baseLanes|r:r,r,d)}else v!==null?(jr(l,v.cachePool),Nh(l,v),En(),l.memoizedState=null):(s!==null&&jr(l,null),Lc(),En());return It(s,l,g,r),l.child}function hi(s,l){return s!==null&&s.tag===22||l.stateNode!==null||(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.sibling}function vm(s,l,r,d,g){var v=Ac();return v=v===null?null:{parent:yt._currentValue,pool:v},l.memoizedState={baseLanes:r,cachePool:v},s!==null&&jr(l,null),Lc(),jh(l),s!==null&&Ql(s,l,d,!0),l.childLanes=g,null}function Pr(s,l){return l=Or({mode:l.mode,children:l.children},s.mode),l.ref=s.ref,s.child=l,l.return=s,l}function ym(s,l,r){return hl(l,s.child,null,r),s=Pr(l,l.pendingProps),s.flags|=2,es(l),l.memoizedState=null,s}function Kv(s,l,r){var d=l.pendingProps,g=(l.flags&128)!==0;if(l.flags&=-129,s===null){if(He){if(d.mode==="hidden")return s=Pr(l,d),l.lanes=536870912,hi(null,s);if(Pc(l),(s=at)?(s=R0(s,xs),s=s!==null&&s.data==="&"?s:null,s!==null&&(l.memoizedState={dehydrated:s,treeContext:vn!==null?{id:Is,overflow:zs}:null,retryLane:536870912,hydrationErrors:null},r=nh(s),r.return=l,l.child=r,Rt=l,at=null)):s=null,s===null)throw Nn(l);return l.lanes=536870912,null}return Pr(l,d)}var v=s.memoizedState;if(v!==null){var _=v.dehydrated;if(Pc(l),g)if(l.flags&256)l.flags&=-257,l=ym(s,l,r);else if(l.memoizedState!==null)l.child=s.child,l.flags|=128,l=null;else throw Error(i(558));else if(jt||Ql(s,l,r,!1),g=(r&s.childLanes)!==0,jt||g){if(d=st,d!==null&&(_=$e(d,r),_!==0&&_!==v.retryLane))throw v.retryLane=_,al(s,_),Yt(d,s,_),ad;Kr(),l=ym(s,l,r)}else s=v.treeContext,at=gs(_.nextSibling),Rt=l,He=!0,yn=null,xs=!1,s!==null&&ih(l,s),l=Pr(l,d),l.flags|=4096;return l}return s=Bs(s.child,{mode:d.mode,children:d.children}),s.ref=l.ref,l.child=s,s.return=l,s}function qr(s,l){var r=l.ref;if(r===null)s!==null&&s.ref!==null&&(l.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(i(284));(s===null||s.ref!==r)&&(l.flags|=4194816)}}function id(s,l,r,d,g){return cl(l),r=Oc(s,l,r,d,void 0,g),d=$c(),s!==null&&!jt?(Hc(s,l,g),Xs(s,l,g)):(He&&d&&Nc(l),l.flags|=1,It(s,l,r,g),l.child)}function Nm(s,l,r,d,g,v){return cl(l),l.updateQueue=null,r=_h(l,d,r,g),wh(s),d=$c(),s!==null&&!jt?(Hc(s,l,v),Xs(s,l,v)):(He&&d&&Nc(l),l.flags|=1,It(s,l,r,v),l.child)}function jm(s,l,r,d,g){if(cl(l),l.stateNode===null){var v=Fl,_=r.contextType;typeof _=="object"&&_!==null&&(v=Dt(_)),v=new r(d,v),l.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=nd,l.stateNode=v,v._reactInternals=l,v=l.stateNode,v.props=d,v.state=l.memoizedState,v.refs={},Rc(l),_=r.contextType,v.context=typeof _=="object"&&_!==null?Dt(_):Fl,v.state=l.memoizedState,_=r.getDerivedStateFromProps,typeof _=="function"&&(sd(l,r,_,d),v.state=l.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(_=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),_!==v.state&&nd.enqueueReplaceState(v,v.state,null),oi(l,d,v,g),ri(),v.state=l.memoizedState),typeof v.componentDidMount=="function"&&(l.flags|=4194308),d=!0}else if(s===null){v=l.stateNode;var M=l.memoizedProps,B=xl(r,M);v.props=B;var oe=v.context,fe=r.contextType;_=Fl,typeof fe=="object"&&fe!==null&&(_=Dt(fe));var xe=r.getDerivedStateFromProps;fe=typeof xe=="function"||typeof v.getSnapshotBeforeUpdate=="function",M=l.pendingProps!==M,fe||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(M||oe!==_)&&om(l,v,d,_),wn=!1;var ce=l.memoizedState;v.state=ce,oi(l,d,v,g),ri(),oe=l.memoizedState,M||ce!==oe||wn?(typeof xe=="function"&&(sd(l,r,xe,d),oe=l.memoizedState),(B=wn||rm(l,r,B,d,ce,oe,_))?(fe||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(l.flags|=4194308)):(typeof v.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=d,l.memoizedState=oe),v.props=d,v.state=oe,v.context=_,d=B):(typeof v.componentDidMount=="function"&&(l.flags|=4194308),d=!1)}else{v=l.stateNode,Dc(s,l),_=l.memoizedProps,fe=xl(r,_),v.props=fe,xe=l.pendingProps,ce=v.context,oe=r.contextType,B=Fl,typeof oe=="object"&&oe!==null&&(B=Dt(oe)),M=r.getDerivedStateFromProps,(oe=typeof M=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(_!==xe||ce!==B)&&om(l,v,d,B),wn=!1,ce=l.memoizedState,v.state=ce,oi(l,d,v,g),ri();var de=l.memoizedState;_!==xe||ce!==de||wn||s!==null&&s.dependencies!==null&&yr(s.dependencies)?(typeof M=="function"&&(sd(l,r,M,d),de=l.memoizedState),(fe=wn||rm(l,r,fe,d,ce,de,B)||s!==null&&s.dependencies!==null&&yr(s.dependencies))?(oe||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(d,de,B),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(d,de,B)),typeof v.componentDidUpdate=="function"&&(l.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof v.componentDidUpdate!="function"||_===s.memoizedProps&&ce===s.memoizedState||(l.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||_===s.memoizedProps&&ce===s.memoizedState||(l.flags|=1024),l.memoizedProps=d,l.memoizedState=de),v.props=d,v.state=de,v.context=B,d=fe):(typeof v.componentDidUpdate!="function"||_===s.memoizedProps&&ce===s.memoizedState||(l.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||_===s.memoizedProps&&ce===s.memoizedState||(l.flags|=1024),d=!1)}return v=d,qr(s,l),d=(l.flags&128)!==0,v||d?(v=l.stateNode,r=d&&typeof r.getDerivedStateFromError!="function"?null:v.render(),l.flags|=1,s!==null&&d?(l.child=hl(l,s.child,null,g),l.child=hl(l,null,r,g)):It(s,l,r,g),l.memoizedState=v.state,s=l.child):s=Xs(s,l,g),s}function wm(s,l,r,d){return rl(),l.flags|=256,It(s,l,r,d),l.child}var rd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function od(s){return{baseLanes:s,cachePool:fh()}}function cd(s,l,r){return s=s!==null?s.childLanes&~r:0,l&&(s|=ss),s}function _m(s,l,r){var d=l.pendingProps,g=!1,v=(l.flags&128)!==0,_;if((_=v)||(_=s!==null&&s.memoizedState===null?!1:(xt.current&2)!==0),_&&(g=!0,l.flags&=-129),_=(l.flags&32)!==0,l.flags&=-33,s===null){if(He){if(g?Cn(l):En(),(s=at)?(s=R0(s,xs),s=s!==null&&s.data!=="&"?s:null,s!==null&&(l.memoizedState={dehydrated:s,treeContext:vn!==null?{id:Is,overflow:zs}:null,retryLane:536870912,hydrationErrors:null},r=nh(s),r.return=l,l.child=r,Rt=l,at=null)):s=null,s===null)throw Nn(l);return Bd(s)?l.lanes=32:l.lanes=536870912,null}var M=d.children;return d=d.fallback,g?(En(),g=l.mode,M=Or({mode:"hidden",children:M},g),d=il(d,g,r,null),M.return=l,d.return=l,M.sibling=d,l.child=M,d=l.child,d.memoizedState=od(r),d.childLanes=cd(s,_,r),l.memoizedState=rd,hi(null,d)):(Cn(l),dd(l,M))}var B=s.memoizedState;if(B!==null&&(M=B.dehydrated,M!==null)){if(v)l.flags&256?(Cn(l),l.flags&=-257,l=ud(s,l,r)):l.memoizedState!==null?(En(),l.child=s.child,l.flags|=128,l=null):(En(),M=d.fallback,g=l.mode,d=Or({mode:"visible",children:d.children},g),M=il(M,g,r,null),M.flags|=2,d.return=l,M.return=l,d.sibling=M,l.child=d,hl(l,s.child,null,r),d=l.child,d.memoizedState=od(r),d.childLanes=cd(s,_,r),l.memoizedState=rd,l=hi(null,d));else if(Cn(l),Bd(M)){if(_=M.nextSibling&&M.nextSibling.dataset,_)var oe=_.dgst;_=oe,d=Error(i(419)),d.stack="",d.digest=_,ti({value:d,source:null,stack:null}),l=ud(s,l,r)}else if(jt||Ql(s,l,r,!1),_=(r&s.childLanes)!==0,jt||_){if(_=st,_!==null&&(d=$e(_,r),d!==0&&d!==B.retryLane))throw B.retryLane=d,al(s,d),Yt(_,s,d),ad;Vd(M)||Kr(),l=ud(s,l,r)}else Vd(M)?(l.flags|=192,l.child=s.child,l=null):(s=B.treeContext,at=gs(M.nextSibling),Rt=l,He=!0,yn=null,xs=!1,s!==null&&ih(l,s),l=dd(l,d.children),l.flags|=4096);return l}return g?(En(),M=d.fallback,g=l.mode,B=s.child,oe=B.sibling,d=Bs(B,{mode:"hidden",children:d.children}),d.subtreeFlags=B.subtreeFlags&65011712,oe!==null?M=Bs(oe,M):(M=il(M,g,r,null),M.flags|=2),M.return=l,d.return=l,d.sibling=M,l.child=d,hi(null,d),d=l.child,M=s.child.memoizedState,M===null?M=od(r):(g=M.cachePool,g!==null?(B=yt._currentValue,g=g.parent!==B?{parent:B,pool:B}:g):g=fh(),M={baseLanes:M.baseLanes|r,cachePool:g}),d.memoizedState=M,d.childLanes=cd(s,_,r),l.memoizedState=rd,hi(s.child,d)):(Cn(l),r=s.child,s=r.sibling,r=Bs(r,{mode:"visible",children:d.children}),r.return=l,r.sibling=null,s!==null&&(_=l.deletions,_===null?(l.deletions=[s],l.flags|=16):_.push(s)),l.child=r,l.memoizedState=null,r)}function dd(s,l){return l=Or({mode:"visible",children:l},s.mode),l.return=s,s.child=l}function Or(s,l){return s=Zt(22,s,null,l),s.lanes=0,s}function ud(s,l,r){return hl(l,s.child,null,r),s=dd(l,l.pendingProps.children),s.flags|=2,l.memoizedState=null,s}function Sm(s,l,r){s.lanes|=l;var d=s.alternate;d!==null&&(d.lanes|=l),Cc(s.return,l,r)}function fd(s,l,r,d,g,v){var _=s.memoizedState;_===null?s.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:d,tail:r,tailMode:g,treeForkCount:v}:(_.isBackwards=l,_.rendering=null,_.renderingStartTime=0,_.last=d,_.tail=r,_.tailMode=g,_.treeForkCount=v)}function Cm(s,l,r){var d=l.pendingProps,g=d.revealOrder,v=d.tail;d=d.children;var _=xt.current,M=(_&2)!==0;if(M?(_=_&1|2,l.flags|=128):_&=1,j(xt,_),It(s,l,d,r),d=He?ei:0,!M&&s!==null&&(s.flags&128)!==0)e:for(s=l.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&Sm(s,r,l);else if(s.tag===19)Sm(s,r,l);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===l)break e;for(;s.sibling===null;){if(s.return===null||s.return===l)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(g){case"forwards":for(r=l.child,g=null;r!==null;)s=r.alternate,s!==null&&Tr(s)===null&&(g=r),r=r.sibling;r=g,r===null?(g=l.child,l.child=null):(g=r.sibling,r.sibling=null),fd(l,!1,g,r,v,d);break;case"backwards":case"unstable_legacy-backwards":for(r=null,g=l.child,l.child=null;g!==null;){if(s=g.alternate,s!==null&&Tr(s)===null){l.child=g;break}s=g.sibling,g.sibling=r,r=g,g=s}fd(l,!0,r,null,v,d);break;case"together":fd(l,!1,null,null,void 0,d);break;default:l.memoizedState=null}return l.child}function Xs(s,l,r){if(s!==null&&(l.dependencies=s.dependencies),An|=l.lanes,(r&l.childLanes)===0)if(s!==null){if(Ql(s,l,r,!1),(r&l.childLanes)===0)return null}else return null;if(s!==null&&l.child!==s.child)throw Error(i(153));if(l.child!==null){for(s=l.child,r=Bs(s,s.pendingProps),l.child=r,r.return=l;s.sibling!==null;)s=s.sibling,r=r.sibling=Bs(s,s.pendingProps),r.return=l;r.sibling=null}return l.child}function hd(s,l){return(s.lanes&l)!==0?!0:(s=s.dependencies,!!(s!==null&&yr(s)))}function Qv(s,l,r){switch(l.tag){case 3:ue(l,l.stateNode.containerInfo),jn(l,yt,s.memoizedState.cache),rl();break;case 27:case 5:be(l);break;case 4:ue(l,l.stateNode.containerInfo);break;case 10:jn(l,l.type,l.memoizedProps.value);break;case 31:if(l.memoizedState!==null)return l.flags|=128,Pc(l),null;break;case 13:var d=l.memoizedState;if(d!==null)return d.dehydrated!==null?(Cn(l),l.flags|=128,null):(r&l.child.childLanes)!==0?_m(s,l,r):(Cn(l),s=Xs(s,l,r),s!==null?s.sibling:null);Cn(l);break;case 19:var g=(s.flags&128)!==0;if(d=(r&l.childLanes)!==0,d||(Ql(s,l,r,!1),d=(r&l.childLanes)!==0),g){if(d)return Cm(s,l,r);l.flags|=128}if(g=l.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),j(xt,xt.current),d)break;return null;case 22:return l.lanes=0,bm(s,l,r,l.pendingProps);case 24:jn(l,yt,s.memoizedState.cache)}return Xs(s,l,r)}function Em(s,l,r){if(s!==null)if(s.memoizedProps!==l.pendingProps)jt=!0;else{if(!hd(s,r)&&(l.flags&128)===0)return jt=!1,Qv(s,l,r);jt=(s.flags&131072)!==0}else jt=!1,He&&(l.flags&1048576)!==0&&ah(l,ei,l.index);switch(l.lanes=0,l.tag){case 16:e:{var d=l.pendingProps;if(s=ul(l.elementType),l.type=s,typeof s=="function")bc(s)?(d=xl(s,d),l.tag=1,l=jm(null,l,s,d,r)):(l.tag=0,l=id(null,l,s,d,r));else{if(s!=null){var g=s.$$typeof;if(g===V){l.tag=11,l=xm(null,l,s,d,r);break e}else if(g===Q){l.tag=14,l=pm(null,l,s,d,r);break e}}throw l=q(s)||s,Error(i(306,l,""))}}return l;case 0:return id(s,l,l.type,l.pendingProps,r);case 1:return d=l.type,g=xl(d,l.pendingProps),jm(s,l,d,g,r);case 3:e:{if(ue(l,l.stateNode.containerInfo),s===null)throw Error(i(387));d=l.pendingProps;var v=l.memoizedState;g=v.element,Dc(s,l),oi(l,d,null,r);var _=l.memoizedState;if(d=_.cache,jn(l,yt,d),d!==v.cache&&Ec(l,[yt],r,!0),ri(),d=_.element,v.isDehydrated)if(v={element:d,isDehydrated:!1,cache:_.cache},l.updateQueue.baseState=v,l.memoizedState=v,l.flags&256){l=wm(s,l,d,r);break e}else if(d!==g){g=fs(Error(i(424)),l),ti(g),l=wm(s,l,d,r);break e}else{switch(s=l.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(at=gs(s.firstChild),Rt=l,He=!0,yn=null,xs=!0,r=bh(l,null,d,r),l.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling}else{if(rl(),d===g){l=Xs(s,l,r);break e}It(s,l,d,r)}l=l.child}return l;case 26:return qr(s,l),s===null?(r=P0(l.type,null,l.pendingProps,null))?l.memoizedState=r:He||(r=l.type,s=l.pendingProps,d=so(z.current).createElement(r),d[Qe]=l,d[De]=s,zt(d,r,s),Et(d),l.stateNode=d):l.memoizedState=P0(l.type,s.memoizedProps,l.pendingProps,s.memoizedState),null;case 27:return be(l),s===null&&He&&(d=l.stateNode=z0(l.type,l.pendingProps,z.current),Rt=l,xs=!0,g=at,zn(l.type)?(Fd=g,at=gs(d.firstChild)):at=g),It(s,l,l.pendingProps.children,r),qr(s,l),s===null&&(l.flags|=4194304),l.child;case 5:return s===null&&He&&((g=d=at)&&(d=Cy(d,l.type,l.pendingProps,xs),d!==null?(l.stateNode=d,Rt=l,at=gs(d.firstChild),xs=!1,g=!0):g=!1),g||Nn(l)),be(l),g=l.type,v=l.pendingProps,_=s!==null?s.memoizedProps:null,d=v.children,$d(g,v)?d=null:_!==null&&$d(g,_)&&(l.flags|=32),l.memoizedState!==null&&(g=Oc(s,l,$v,null,null,r),Ti._currentValue=g),qr(s,l),It(s,l,d,r),l.child;case 6:return s===null&&He&&((s=r=at)&&(r=Ey(r,l.pendingProps,xs),r!==null?(l.stateNode=r,Rt=l,at=null,s=!0):s=!1),s||Nn(l)),null;case 13:return _m(s,l,r);case 4:return ue(l,l.stateNode.containerInfo),d=l.pendingProps,s===null?l.child=hl(l,null,d,r):It(s,l,d,r),l.child;case 11:return xm(s,l,l.type,l.pendingProps,r);case 7:return It(s,l,l.pendingProps,r),l.child;case 8:return It(s,l,l.pendingProps.children,r),l.child;case 12:return It(s,l,l.pendingProps.children,r),l.child;case 10:return d=l.pendingProps,jn(l,l.type,d.value),It(s,l,d.children,r),l.child;case 9:return g=l.type._context,d=l.pendingProps.children,cl(l),g=Dt(g),d=d(g),l.flags|=1,It(s,l,d,r),l.child;case 14:return pm(s,l,l.type,l.pendingProps,r);case 15:return gm(s,l,l.type,l.pendingProps,r);case 19:return Cm(s,l,r);case 31:return Kv(s,l,r);case 22:return bm(s,l,r,l.pendingProps);case 24:return cl(l),d=Dt(yt),s===null?(g=Ac(),g===null&&(g=st,v=Tc(),g.pooledCache=v,v.refCount++,v!==null&&(g.pooledCacheLanes|=r),g=v),l.memoizedState={parent:d,cache:g},Rc(l),jn(l,yt,g)):((s.lanes&r)!==0&&(Dc(s,l),oi(l,null,null,r),ri()),g=s.memoizedState,v=l.memoizedState,g.parent!==d?(g={parent:d,cache:d},l.memoizedState=g,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=g),jn(l,yt,d)):(d=v.cache,jn(l,yt,d),d!==g.cache&&Ec(l,[yt],r,!0))),It(s,l,l.pendingProps.children,r),l.child;case 29:throw l.pendingProps}throw Error(i(156,l.tag))}function Zs(s){s.flags|=4}function md(s,l,r,d,g){if((l=(s.mode&32)!==0)&&(l=!1),l){if(s.flags|=16777216,(g&335544128)===g)if(s.stateNode.complete)s.flags|=8192;else if(e0())s.flags|=8192;else throw fl=_r,Mc}else s.flags&=-16777217}function Tm(s,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!G0(l))if(e0())s.flags|=8192;else throw fl=_r,Mc}function $r(s,l){l!==null&&(s.flags|=4),s.flags&16384&&(l=s.tag!==22?Ha():536870912,s.lanes|=l,oa|=l)}function mi(s,l){if(!He)switch(s.tailMode){case"hidden":l=s.tail;for(var r=null;l!==null;)l.alternate!==null&&(r=l),l=l.sibling;r===null?s.tail=null:r.sibling=null;break;case"collapsed":r=s.tail;for(var d=null;r!==null;)r.alternate!==null&&(d=r),r=r.sibling;d===null?l||s.tail===null?s.tail=null:s.tail.sibling=null:d.sibling=null}}function it(s){var l=s.alternate!==null&&s.alternate.child===s.child,r=0,d=0;if(l)for(var g=s.child;g!==null;)r|=g.lanes|g.childLanes,d|=g.subtreeFlags&65011712,d|=g.flags&65011712,g.return=s,g=g.sibling;else for(g=s.child;g!==null;)r|=g.lanes|g.childLanes,d|=g.subtreeFlags,d|=g.flags,g.return=s,g=g.sibling;return s.subtreeFlags|=d,s.childLanes=r,l}function Xv(s,l,r){var d=l.pendingProps;switch(jc(l),l.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return it(l),null;case 1:return it(l),null;case 3:return r=l.stateNode,d=null,s!==null&&(d=s.memoizedState.cache),l.memoizedState.cache!==d&&(l.flags|=2048),Ys(yt),J(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(s===null||s.child===null)&&(Kl(l)?Zs(l):s===null||s.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,_c())),it(l),null;case 26:var g=l.type,v=l.memoizedState;return s===null?(Zs(l),v!==null?(it(l),Tm(l,v)):(it(l),md(l,g,null,d,r))):v?v!==s.memoizedState?(Zs(l),it(l),Tm(l,v)):(it(l),l.flags&=-16777217):(s=s.memoizedProps,s!==d&&Zs(l),it(l),md(l,g,s,d,r)),null;case 27:if(Ee(l),r=z.current,g=l.type,s!==null&&l.stateNode!=null)s.memoizedProps!==d&&Zs(l);else{if(!d){if(l.stateNode===null)throw Error(i(166));return it(l),null}s=S.current,Kl(l)?rh(l):(s=z0(g,d,r),l.stateNode=s,Zs(l))}return it(l),null;case 5:if(Ee(l),g=l.type,s!==null&&l.stateNode!=null)s.memoizedProps!==d&&Zs(l);else{if(!d){if(l.stateNode===null)throw Error(i(166));return it(l),null}if(v=S.current,Kl(l))rh(l);else{var _=so(z.current);switch(v){case 1:v=_.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:v=_.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":v=_.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":v=_.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":v=_.createElement("div"),v.innerHTML="<script><\/script>",v=v.removeChild(v.firstChild);break;case"select":v=typeof d.is=="string"?_.createElement("select",{is:d.is}):_.createElement("select"),d.multiple?v.multiple=!0:d.size&&(v.size=d.size);break;default:v=typeof d.is=="string"?_.createElement(g,{is:d.is}):_.createElement(g)}}v[Qe]=l,v[De]=d;e:for(_=l.child;_!==null;){if(_.tag===5||_.tag===6)v.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===l)break e;for(;_.sibling===null;){if(_.return===null||_.return===l)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}l.stateNode=v;e:switch(zt(v,g,d),g){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}d&&Zs(l)}}return it(l),md(l,l.type,s===null?null:s.memoizedProps,l.pendingProps,r),null;case 6:if(s&&l.stateNode!=null)s.memoizedProps!==d&&Zs(l);else{if(typeof d!="string"&&l.stateNode===null)throw Error(i(166));if(s=z.current,Kl(l)){if(s=l.stateNode,r=l.memoizedProps,d=null,g=Rt,g!==null)switch(g.tag){case 27:case 5:d=g.memoizedProps}s[Qe]=l,s=!!(s.nodeValue===r||d!==null&&d.suppressHydrationWarning===!0||_0(s.nodeValue,r)),s||Nn(l,!0)}else s=so(s).createTextNode(d),s[Qe]=l,l.stateNode=s}return it(l),null;case 31:if(r=l.memoizedState,s===null||s.memoizedState!==null){if(d=Kl(l),r!==null){if(s===null){if(!d)throw Error(i(318));if(s=l.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(557));s[Qe]=l}else rl(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;it(l),s=!1}else r=_c(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=r),s=!0;if(!s)return l.flags&256?(es(l),l):(es(l),null);if((l.flags&128)!==0)throw Error(i(558))}return it(l),null;case 13:if(d=l.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(g=Kl(l),d!==null&&d.dehydrated!==null){if(s===null){if(!g)throw Error(i(318));if(g=l.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(i(317));g[Qe]=l}else rl(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;it(l),g=!1}else g=_c(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=g),g=!0;if(!g)return l.flags&256?(es(l),l):(es(l),null)}return es(l),(l.flags&128)!==0?(l.lanes=r,l):(r=d!==null,s=s!==null&&s.memoizedState!==null,r&&(d=l.child,g=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(g=d.alternate.memoizedState.cachePool.pool),v=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(v=d.memoizedState.cachePool.pool),v!==g&&(d.flags|=2048)),r!==s&&r&&(l.child.flags|=8192),$r(l,l.updateQueue),it(l),null);case 4:return J(),s===null&&Ld(l.stateNode.containerInfo),it(l),null;case 10:return Ys(l.type),it(l),null;case 19:if(D(xt),d=l.memoizedState,d===null)return it(l),null;if(g=(l.flags&128)!==0,v=d.rendering,v===null)if(g)mi(d,!1);else{if(mt!==0||s!==null&&(s.flags&128)!==0)for(s=l.child;s!==null;){if(v=Tr(s),v!==null){for(l.flags|=128,mi(d,!1),s=v.updateQueue,l.updateQueue=s,$r(l,s),l.subtreeFlags=0,s=r,r=l.child;r!==null;)sh(r,s),r=r.sibling;return j(xt,xt.current&1|2),He&&Fs(l,d.treeForkCount),l.child}s=s.sibling}d.tail!==null&&At()>Fr&&(l.flags|=128,g=!0,mi(d,!1),l.lanes=4194304)}else{if(!g)if(s=Tr(v),s!==null){if(l.flags|=128,g=!0,s=s.updateQueue,l.updateQueue=s,$r(l,s),mi(d,!0),d.tail===null&&d.tailMode==="hidden"&&!v.alternate&&!He)return it(l),null}else 2*At()-d.renderingStartTime>Fr&&r!==536870912&&(l.flags|=128,g=!0,mi(d,!1),l.lanes=4194304);d.isBackwards?(v.sibling=l.child,l.child=v):(s=d.last,s!==null?s.sibling=v:l.child=v,d.last=v)}return d.tail!==null?(s=d.tail,d.rendering=s,d.tail=s.sibling,d.renderingStartTime=At(),s.sibling=null,r=xt.current,j(xt,g?r&1|2:r&1),He&&Fs(l,d.treeForkCount),s):(it(l),null);case 22:case 23:return es(l),Uc(),d=l.memoizedState!==null,s!==null?s.memoizedState!==null!==d&&(l.flags|=8192):d&&(l.flags|=8192),d?(r&536870912)!==0&&(l.flags&128)===0&&(it(l),l.subtreeFlags&6&&(l.flags|=8192)):it(l),r=l.updateQueue,r!==null&&$r(l,r.retryQueue),r=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(r=s.memoizedState.cachePool.pool),d=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==r&&(l.flags|=2048),s!==null&&D(dl),null;case 24:return r=null,s!==null&&(r=s.memoizedState.cache),l.memoizedState.cache!==r&&(l.flags|=2048),Ys(yt),it(l),null;case 25:return null;case 30:return null}throw Error(i(156,l.tag))}function Zv(s,l){switch(jc(l),l.tag){case 1:return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 3:return Ys(yt),J(),s=l.flags,(s&65536)!==0&&(s&128)===0?(l.flags=s&-65537|128,l):null;case 26:case 27:case 5:return Ee(l),null;case 31:if(l.memoizedState!==null){if(es(l),l.alternate===null)throw Error(i(340));rl()}return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 13:if(es(l),s=l.memoizedState,s!==null&&s.dehydrated!==null){if(l.alternate===null)throw Error(i(340));rl()}return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 19:return D(xt),null;case 4:return J(),null;case 10:return Ys(l.type),null;case 22:case 23:return es(l),Uc(),s!==null&&D(dl),s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 24:return Ys(yt),null;case 25:return null;default:return null}}function km(s,l){switch(jc(l),l.tag){case 3:Ys(yt),J();break;case 26:case 27:case 5:Ee(l);break;case 4:J();break;case 31:l.memoizedState!==null&&es(l);break;case 13:es(l);break;case 19:D(xt);break;case 10:Ys(l.type);break;case 22:case 23:es(l),Uc(),s!==null&&D(dl);break;case 24:Ys(yt)}}function xi(s,l){try{var r=l.updateQueue,d=r!==null?r.lastEffect:null;if(d!==null){var g=d.next;r=g;do{if((r.tag&s)===s){d=void 0;var v=r.create,_=r.inst;d=v(),_.destroy=d}r=r.next}while(r!==g)}}catch(M){Ze(l,l.return,M)}}function Tn(s,l,r){try{var d=l.updateQueue,g=d!==null?d.lastEffect:null;if(g!==null){var v=g.next;d=v;do{if((d.tag&s)===s){var _=d.inst,M=_.destroy;if(M!==void 0){_.destroy=void 0,g=l;var B=r,oe=M;try{oe()}catch(fe){Ze(g,B,fe)}}}d=d.next}while(d!==v)}}catch(fe){Ze(l,l.return,fe)}}function Am(s){var l=s.updateQueue;if(l!==null){var r=s.stateNode;try{yh(l,r)}catch(d){Ze(s,s.return,d)}}}function Mm(s,l,r){r.props=xl(s.type,s.memoizedProps),r.state=s.memoizedState;try{r.componentWillUnmount()}catch(d){Ze(s,l,d)}}function pi(s,l){try{var r=s.ref;if(r!==null){switch(s.tag){case 26:case 27:case 5:var d=s.stateNode;break;case 30:d=s.stateNode;break;default:d=s.stateNode}typeof r=="function"?s.refCleanup=r(d):r.current=d}}catch(g){Ze(s,l,g)}}function Ls(s,l){var r=s.ref,d=s.refCleanup;if(r!==null)if(typeof d=="function")try{d()}catch(g){Ze(s,l,g)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(g){Ze(s,l,g)}else r.current=null}function Rm(s){var l=s.type,r=s.memoizedProps,d=s.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":r.autoFocus&&d.focus();break e;case"img":r.src?d.src=r.src:r.srcSet&&(d.srcset=r.srcSet)}}catch(g){Ze(s,s.return,g)}}function xd(s,l,r){try{var d=s.stateNode;yy(d,s.type,r,l),d[De]=l}catch(g){Ze(s,s.return,g)}}function Dm(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&zn(s.type)||s.tag===4}function pd(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||Dm(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&zn(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function gd(s,l,r){var d=s.tag;if(d===5||d===6)s=s.stateNode,l?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(s,l):(l=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,l.appendChild(s),r=r._reactRootContainer,r!=null||l.onclick!==null||(l.onclick=Gs));else if(d!==4&&(d===27&&zn(s.type)&&(r=s.stateNode,l=null),s=s.child,s!==null))for(gd(s,l,r),s=s.sibling;s!==null;)gd(s,l,r),s=s.sibling}function Hr(s,l,r){var d=s.tag;if(d===5||d===6)s=s.stateNode,l?r.insertBefore(s,l):r.appendChild(s);else if(d!==4&&(d===27&&zn(s.type)&&(r=s.stateNode),s=s.child,s!==null))for(Hr(s,l,r),s=s.sibling;s!==null;)Hr(s,l,r),s=s.sibling}function Im(s){var l=s.stateNode,r=s.memoizedProps;try{for(var d=s.type,g=l.attributes;g.length;)l.removeAttributeNode(g[0]);zt(l,d,r),l[Qe]=s,l[De]=r}catch(v){Ze(s,s.return,v)}}var Ws=!1,wt=!1,bd=!1,zm=typeof WeakSet=="function"?WeakSet:Set,Tt=null;function Wv(s,l){if(s=s.containerInfo,qd=co,s=Jf(s),uc(s)){if("selectionStart"in s)var r={start:s.selectionStart,end:s.selectionEnd};else e:{r=(r=s.ownerDocument)&&r.defaultView||window;var d=r.getSelection&&r.getSelection();if(d&&d.rangeCount!==0){r=d.anchorNode;var g=d.anchorOffset,v=d.focusNode;d=d.focusOffset;try{r.nodeType,v.nodeType}catch{r=null;break e}var _=0,M=-1,B=-1,oe=0,fe=0,xe=s,ce=null;t:for(;;){for(var de;xe!==r||g!==0&&xe.nodeType!==3||(M=_+g),xe!==v||d!==0&&xe.nodeType!==3||(B=_+d),xe.nodeType===3&&(_+=xe.nodeValue.length),(de=xe.firstChild)!==null;)ce=xe,xe=de;for(;;){if(xe===s)break t;if(ce===r&&++oe===g&&(M=_),ce===v&&++fe===d&&(B=_),(de=xe.nextSibling)!==null)break;xe=ce,ce=xe.parentNode}xe=de}r=M===-1||B===-1?null:{start:M,end:B}}else r=null}r=r||{start:0,end:0}}else r=null;for(Od={focusedElem:s,selectionRange:r},co=!1,Tt=l;Tt!==null;)if(l=Tt,s=l.child,(l.subtreeFlags&1028)!==0&&s!==null)s.return=l,Tt=s;else for(;Tt!==null;){switch(l=Tt,v=l.alternate,s=l.flags,l.tag){case 0:if((s&4)!==0&&(s=l.updateQueue,s=s!==null?s.events:null,s!==null))for(r=0;r<s.length;r++)g=s[r],g.ref.impl=g.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&v!==null){s=void 0,r=l,g=v.memoizedProps,v=v.memoizedState,d=r.stateNode;try{var Ne=xl(r.type,g);s=d.getSnapshotBeforeUpdate(Ne,v),d.__reactInternalSnapshotBeforeUpdate=s}catch(Ce){Ze(r,r.return,Ce)}}break;case 3:if((s&1024)!==0){if(s=l.stateNode.containerInfo,r=s.nodeType,r===9)Gd(s);else if(r===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":Gd(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=l.sibling,s!==null){s.return=l.return,Tt=s;break}Tt=l.return}}function Lm(s,l,r){var d=r.flags;switch(r.tag){case 0:case 11:case 15:tn(s,r),d&4&&xi(5,r);break;case 1:if(tn(s,r),d&4)if(s=r.stateNode,l===null)try{s.componentDidMount()}catch(_){Ze(r,r.return,_)}else{var g=xl(r.type,l.memoizedProps);l=l.memoizedState;try{s.componentDidUpdate(g,l,s.__reactInternalSnapshotBeforeUpdate)}catch(_){Ze(r,r.return,_)}}d&64&&Am(r),d&512&&pi(r,r.return);break;case 3:if(tn(s,r),d&64&&(s=r.updateQueue,s!==null)){if(l=null,r.child!==null)switch(r.child.tag){case 27:case 5:l=r.child.stateNode;break;case 1:l=r.child.stateNode}try{yh(s,l)}catch(_){Ze(r,r.return,_)}}break;case 27:l===null&&d&4&&Im(r);case 26:case 5:tn(s,r),l===null&&d&4&&Rm(r),d&512&&pi(r,r.return);break;case 12:tn(s,r);break;case 31:tn(s,r),d&4&&qm(s,r);break;case 13:tn(s,r),d&4&&Om(s,r),d&64&&(s=r.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(r=oy.bind(null,r),Ty(s,r))));break;case 22:if(d=r.memoizedState!==null||Ws,!d){l=l!==null&&l.memoizedState!==null||wt,g=Ws;var v=wt;Ws=d,(wt=l)&&!v?sn(s,r,(r.subtreeFlags&8772)!==0):tn(s,r),Ws=g,wt=v}break;case 30:break;default:tn(s,r)}}function Um(s){var l=s.alternate;l!==null&&(s.alternate=null,Um(l)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(l=s.stateNode,l!==null&&Yo(l)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var ot=null,Vt=!1;function en(s,l,r){for(r=r.child;r!==null;)Pm(s,l,r),r=r.sibling}function Pm(s,l,r){if(Mt&&typeof Mt.onCommitFiberUnmount=="function")try{Mt.onCommitFiberUnmount(Zn,r)}catch{}switch(r.tag){case 26:wt||Ls(r,l),en(s,l,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:wt||Ls(r,l);var d=ot,g=Vt;zn(r.type)&&(ot=r.stateNode,Vt=!1),en(s,l,r),Si(r.stateNode),ot=d,Vt=g;break;case 5:wt||Ls(r,l);case 6:if(d=ot,g=Vt,ot=null,en(s,l,r),ot=d,Vt=g,ot!==null)if(Vt)try{(ot.nodeType===9?ot.body:ot.nodeName==="HTML"?ot.ownerDocument.body:ot).removeChild(r.stateNode)}catch(v){Ze(r,l,v)}else try{ot.removeChild(r.stateNode)}catch(v){Ze(r,l,v)}break;case 18:ot!==null&&(Vt?(s=ot,A0(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,r.stateNode),pa(s)):A0(ot,r.stateNode));break;case 4:d=ot,g=Vt,ot=r.stateNode.containerInfo,Vt=!0,en(s,l,r),ot=d,Vt=g;break;case 0:case 11:case 14:case 15:Tn(2,r,l),wt||Tn(4,r,l),en(s,l,r);break;case 1:wt||(Ls(r,l),d=r.stateNode,typeof d.componentWillUnmount=="function"&&Mm(r,l,d)),en(s,l,r);break;case 21:en(s,l,r);break;case 22:wt=(d=wt)||r.memoizedState!==null,en(s,l,r),wt=d;break;default:en(s,l,r)}}function qm(s,l){if(l.memoizedState===null&&(s=l.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{pa(s)}catch(r){Ze(l,l.return,r)}}}function Om(s,l){if(l.memoizedState===null&&(s=l.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{pa(s)}catch(r){Ze(l,l.return,r)}}function ey(s){switch(s.tag){case 31:case 13:case 19:var l=s.stateNode;return l===null&&(l=s.stateNode=new zm),l;case 22:return s=s.stateNode,l=s._retryCache,l===null&&(l=s._retryCache=new zm),l;default:throw Error(i(435,s.tag))}}function Gr(s,l){var r=ey(s);l.forEach(function(d){if(!r.has(d)){r.add(d);var g=cy.bind(null,s,d);d.then(g,g)}})}function Bt(s,l){var r=l.deletions;if(r!==null)for(var d=0;d<r.length;d++){var g=r[d],v=s,_=l,M=_;e:for(;M!==null;){switch(M.tag){case 27:if(zn(M.type)){ot=M.stateNode,Vt=!1;break e}break;case 5:ot=M.stateNode,Vt=!1;break e;case 3:case 4:ot=M.stateNode.containerInfo,Vt=!0;break e}M=M.return}if(ot===null)throw Error(i(160));Pm(v,_,g),ot=null,Vt=!1,v=g.alternate,v!==null&&(v.return=null),g.return=null}if(l.subtreeFlags&13886)for(l=l.child;l!==null;)$m(l,s),l=l.sibling}var Cs=null;function $m(s,l){var r=s.alternate,d=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Bt(l,s),Ft(s),d&4&&(Tn(3,s,s.return),xi(3,s),Tn(5,s,s.return));break;case 1:Bt(l,s),Ft(s),d&512&&(wt||r===null||Ls(r,r.return)),d&64&&Ws&&(s=s.updateQueue,s!==null&&(d=s.callbacks,d!==null&&(r=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=r===null?d:r.concat(d))));break;case 26:var g=Cs;if(Bt(l,s),Ft(s),d&512&&(wt||r===null||Ls(r,r.return)),d&4){var v=r!==null?r.memoizedState:null;if(d=s.memoizedState,r===null)if(d===null)if(s.stateNode===null){e:{d=s.type,r=s.memoizedProps,g=g.ownerDocument||g;t:switch(d){case"title":v=g.getElementsByTagName("title")[0],(!v||v[Ga]||v[Qe]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=g.createElement(d),g.head.insertBefore(v,g.querySelector("head > title"))),zt(v,d,r),v[Qe]=s,Et(v),d=v;break e;case"link":var _=$0("link","href",g).get(d+(r.href||""));if(_){for(var M=0;M<_.length;M++)if(v=_[M],v.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&v.getAttribute("rel")===(r.rel==null?null:r.rel)&&v.getAttribute("title")===(r.title==null?null:r.title)&&v.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){_.splice(M,1);break t}}v=g.createElement(d),zt(v,d,r),g.head.appendChild(v);break;case"meta":if(_=$0("meta","content",g).get(d+(r.content||""))){for(M=0;M<_.length;M++)if(v=_[M],v.getAttribute("content")===(r.content==null?null:""+r.content)&&v.getAttribute("name")===(r.name==null?null:r.name)&&v.getAttribute("property")===(r.property==null?null:r.property)&&v.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&v.getAttribute("charset")===(r.charSet==null?null:r.charSet)){_.splice(M,1);break t}}v=g.createElement(d),zt(v,d,r),g.head.appendChild(v);break;default:throw Error(i(468,d))}v[Qe]=s,Et(v),d=v}s.stateNode=d}else H0(g,s.type,s.stateNode);else s.stateNode=O0(g,d,s.memoizedProps);else v!==d?(v===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):v.count--,d===null?H0(g,s.type,s.stateNode):O0(g,d,s.memoizedProps)):d===null&&s.stateNode!==null&&xd(s,s.memoizedProps,r.memoizedProps)}break;case 27:Bt(l,s),Ft(s),d&512&&(wt||r===null||Ls(r,r.return)),r!==null&&d&4&&xd(s,s.memoizedProps,r.memoizedProps);break;case 5:if(Bt(l,s),Ft(s),d&512&&(wt||r===null||Ls(r,r.return)),s.flags&32){g=s.stateNode;try{ql(g,"")}catch(Ne){Ze(s,s.return,Ne)}}d&4&&s.stateNode!=null&&(g=s.memoizedProps,xd(s,g,r!==null?r.memoizedProps:g)),d&1024&&(bd=!0);break;case 6:if(Bt(l,s),Ft(s),d&4){if(s.stateNode===null)throw Error(i(162));d=s.memoizedProps,r=s.stateNode;try{r.nodeValue=d}catch(Ne){Ze(s,s.return,Ne)}}break;case 3:if(ao=null,g=Cs,Cs=no(l.containerInfo),Bt(l,s),Cs=g,Ft(s),d&4&&r!==null&&r.memoizedState.isDehydrated)try{pa(l.containerInfo)}catch(Ne){Ze(s,s.return,Ne)}bd&&(bd=!1,Hm(s));break;case 4:d=Cs,Cs=no(s.stateNode.containerInfo),Bt(l,s),Ft(s),Cs=d;break;case 12:Bt(l,s),Ft(s);break;case 31:Bt(l,s),Ft(s),d&4&&(d=s.updateQueue,d!==null&&(s.updateQueue=null,Gr(s,d)));break;case 13:Bt(l,s),Ft(s),s.child.flags&8192&&s.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(Br=At()),d&4&&(d=s.updateQueue,d!==null&&(s.updateQueue=null,Gr(s,d)));break;case 22:g=s.memoizedState!==null;var B=r!==null&&r.memoizedState!==null,oe=Ws,fe=wt;if(Ws=oe||g,wt=fe||B,Bt(l,s),wt=fe,Ws=oe,Ft(s),d&8192)e:for(l=s.stateNode,l._visibility=g?l._visibility&-2:l._visibility|1,g&&(r===null||B||Ws||wt||pl(s)),r=null,l=s;;){if(l.tag===5||l.tag===26){if(r===null){B=r=l;try{if(v=B.stateNode,g)_=v.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{M=B.stateNode;var xe=B.memoizedProps.style,ce=xe!=null&&xe.hasOwnProperty("display")?xe.display:null;M.style.display=ce==null||typeof ce=="boolean"?"":(""+ce).trim()}}catch(Ne){Ze(B,B.return,Ne)}}}else if(l.tag===6){if(r===null){B=l;try{B.stateNode.nodeValue=g?"":B.memoizedProps}catch(Ne){Ze(B,B.return,Ne)}}}else if(l.tag===18){if(r===null){B=l;try{var de=B.stateNode;g?M0(de,!0):M0(B.stateNode,!1)}catch(Ne){Ze(B,B.return,Ne)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===s)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break e;for(;l.sibling===null;){if(l.return===null||l.return===s)break e;r===l&&(r=null),l=l.return}r===l&&(r=null),l.sibling.return=l.return,l=l.sibling}d&4&&(d=s.updateQueue,d!==null&&(r=d.retryQueue,r!==null&&(d.retryQueue=null,Gr(s,r))));break;case 19:Bt(l,s),Ft(s),d&4&&(d=s.updateQueue,d!==null&&(s.updateQueue=null,Gr(s,d)));break;case 30:break;case 21:break;default:Bt(l,s),Ft(s)}}function Ft(s){var l=s.flags;if(l&2){try{for(var r,d=s.return;d!==null;){if(Dm(d)){r=d;break}d=d.return}if(r==null)throw Error(i(160));switch(r.tag){case 27:var g=r.stateNode,v=pd(s);Hr(s,v,g);break;case 5:var _=r.stateNode;r.flags&32&&(ql(_,""),r.flags&=-33);var M=pd(s);Hr(s,M,_);break;case 3:case 4:var B=r.stateNode.containerInfo,oe=pd(s);gd(s,oe,B);break;default:throw Error(i(161))}}catch(fe){Ze(s,s.return,fe)}s.flags&=-3}l&4096&&(s.flags&=-4097)}function Hm(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var l=s;Hm(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),s=s.sibling}}function tn(s,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)Lm(s,l.alternate,l),l=l.sibling}function pl(s){for(s=s.child;s!==null;){var l=s;switch(l.tag){case 0:case 11:case 14:case 15:Tn(4,l,l.return),pl(l);break;case 1:Ls(l,l.return);var r=l.stateNode;typeof r.componentWillUnmount=="function"&&Mm(l,l.return,r),pl(l);break;case 27:Si(l.stateNode);case 26:case 5:Ls(l,l.return),pl(l);break;case 22:l.memoizedState===null&&pl(l);break;case 30:pl(l);break;default:pl(l)}s=s.sibling}}function sn(s,l,r){for(r=r&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var d=l.alternate,g=s,v=l,_=v.flags;switch(v.tag){case 0:case 11:case 15:sn(g,v,r),xi(4,v);break;case 1:if(sn(g,v,r),d=v,g=d.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(oe){Ze(d,d.return,oe)}if(d=v,g=d.updateQueue,g!==null){var M=d.stateNode;try{var B=g.shared.hiddenCallbacks;if(B!==null)for(g.shared.hiddenCallbacks=null,g=0;g<B.length;g++)vh(B[g],M)}catch(oe){Ze(d,d.return,oe)}}r&&_&64&&Am(v),pi(v,v.return);break;case 27:Im(v);case 26:case 5:sn(g,v,r),r&&d===null&&_&4&&Rm(v),pi(v,v.return);break;case 12:sn(g,v,r);break;case 31:sn(g,v,r),r&&_&4&&qm(g,v);break;case 13:sn(g,v,r),r&&_&4&&Om(g,v);break;case 22:v.memoizedState===null&&sn(g,v,r),pi(v,v.return);break;case 30:break;default:sn(g,v,r)}l=l.sibling}}function vd(s,l){var r=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(r=s.memoizedState.cachePool.pool),s=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(s=l.memoizedState.cachePool.pool),s!==r&&(s!=null&&s.refCount++,r!=null&&si(r))}function yd(s,l){s=null,l.alternate!==null&&(s=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==s&&(l.refCount++,s!=null&&si(s))}function Es(s,l,r,d){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)Gm(s,l,r,d),l=l.sibling}function Gm(s,l,r,d){var g=l.flags;switch(l.tag){case 0:case 11:case 15:Es(s,l,r,d),g&2048&&xi(9,l);break;case 1:Es(s,l,r,d);break;case 3:Es(s,l,r,d),g&2048&&(s=null,l.alternate!==null&&(s=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==s&&(l.refCount++,s!=null&&si(s)));break;case 12:if(g&2048){Es(s,l,r,d),s=l.stateNode;try{var v=l.memoizedProps,_=v.id,M=v.onPostCommit;typeof M=="function"&&M(_,l.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(B){Ze(l,l.return,B)}}else Es(s,l,r,d);break;case 31:Es(s,l,r,d);break;case 13:Es(s,l,r,d);break;case 23:break;case 22:v=l.stateNode,_=l.alternate,l.memoizedState!==null?v._visibility&2?Es(s,l,r,d):gi(s,l):v._visibility&2?Es(s,l,r,d):(v._visibility|=2,aa(s,l,r,d,(l.subtreeFlags&10256)!==0||!1)),g&2048&&vd(_,l);break;case 24:Es(s,l,r,d),g&2048&&yd(l.alternate,l);break;default:Es(s,l,r,d)}}function aa(s,l,r,d,g){for(g=g&&((l.subtreeFlags&10256)!==0||!1),l=l.child;l!==null;){var v=s,_=l,M=r,B=d,oe=_.flags;switch(_.tag){case 0:case 11:case 15:aa(v,_,M,B,g),xi(8,_);break;case 23:break;case 22:var fe=_.stateNode;_.memoizedState!==null?fe._visibility&2?aa(v,_,M,B,g):gi(v,_):(fe._visibility|=2,aa(v,_,M,B,g)),g&&oe&2048&&vd(_.alternate,_);break;case 24:aa(v,_,M,B,g),g&&oe&2048&&yd(_.alternate,_);break;default:aa(v,_,M,B,g)}l=l.sibling}}function gi(s,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var r=s,d=l,g=d.flags;switch(d.tag){case 22:gi(r,d),g&2048&&vd(d.alternate,d);break;case 24:gi(r,d),g&2048&&yd(d.alternate,d);break;default:gi(r,d)}l=l.sibling}}var bi=8192;function ia(s,l,r){if(s.subtreeFlags&bi)for(s=s.child;s!==null;)Vm(s,l,r),s=s.sibling}function Vm(s,l,r){switch(s.tag){case 26:ia(s,l,r),s.flags&bi&&s.memoizedState!==null&&Oy(r,Cs,s.memoizedState,s.memoizedProps);break;case 5:ia(s,l,r);break;case 3:case 4:var d=Cs;Cs=no(s.stateNode.containerInfo),ia(s,l,r),Cs=d;break;case 22:s.memoizedState===null&&(d=s.alternate,d!==null&&d.memoizedState!==null?(d=bi,bi=16777216,ia(s,l,r),bi=d):ia(s,l,r));break;default:ia(s,l,r)}}function Bm(s){var l=s.alternate;if(l!==null&&(s=l.child,s!==null)){l.child=null;do l=s.sibling,s.sibling=null,s=l;while(s!==null)}}function vi(s){var l=s.deletions;if((s.flags&16)!==0){if(l!==null)for(var r=0;r<l.length;r++){var d=l[r];Tt=d,Jm(d,s)}Bm(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Fm(s),s=s.sibling}function Fm(s){switch(s.tag){case 0:case 11:case 15:vi(s),s.flags&2048&&Tn(9,s,s.return);break;case 3:vi(s);break;case 12:vi(s);break;case 22:var l=s.stateNode;s.memoizedState!==null&&l._visibility&2&&(s.return===null||s.return.tag!==13)?(l._visibility&=-3,Vr(s)):vi(s);break;default:vi(s)}}function Vr(s){var l=s.deletions;if((s.flags&16)!==0){if(l!==null)for(var r=0;r<l.length;r++){var d=l[r];Tt=d,Jm(d,s)}Bm(s)}for(s=s.child;s!==null;){switch(l=s,l.tag){case 0:case 11:case 15:Tn(8,l,l.return),Vr(l);break;case 22:r=l.stateNode,r._visibility&2&&(r._visibility&=-3,Vr(l));break;default:Vr(l)}s=s.sibling}}function Jm(s,l){for(;Tt!==null;){var r=Tt;switch(r.tag){case 0:case 11:case 15:Tn(8,r,l);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var d=r.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:si(r.memoizedState.cache)}if(d=r.child,d!==null)d.return=r,Tt=d;else e:for(r=s;Tt!==null;){d=Tt;var g=d.sibling,v=d.return;if(Um(d),d===r){Tt=null;break e}if(g!==null){g.return=v,Tt=g;break e}Tt=v}}}var ty={getCacheForType:function(s){var l=Dt(yt),r=l.data.get(s);return r===void 0&&(r=s(),l.data.set(s,r)),r},cacheSignal:function(){return Dt(yt).controller.signal}},sy=typeof WeakMap=="function"?WeakMap:Map,Ye=0,st=null,Le=null,Pe=0,Xe=0,ts=null,kn=!1,ra=!1,Nd=!1,nn=0,mt=0,An=0,gl=0,jd=0,ss=0,oa=0,yi=null,Jt=null,wd=!1,Br=0,Ym=0,Fr=1/0,Jr=null,Mn=null,St=0,Rn=null,ca=null,ln=0,_d=0,Sd=null,Km=null,Ni=0,Cd=null;function ns(){return(Ye&2)!==0&&Pe!==0?Pe&-Pe:T.T!==null?Rd():Ds()}function Qm(){if(ss===0)if((Pe&536870912)===0||He){var s=is;is<<=1,(is&3932160)===0&&(is=262144),ss=s}else ss=536870912;return s=Wt.current,s!==null&&(s.flags|=32),ss}function Yt(s,l,r){(s===st&&(Xe===2||Xe===9)||s.cancelPendingCommit!==null)&&(da(s,0),Dn(s,Pe,ss,!1)),gn(s,r),((Ye&2)===0||s!==st)&&(s===st&&((Ye&2)===0&&(gl|=r),mt===4&&Dn(s,Pe,ss,!1)),Us(s))}function Xm(s,l,r){if((Ye&6)!==0)throw Error(i(327));var d=!r&&(l&127)===0&&(l&s.expiredLanes)===0||el(s,l),g=d?ay(s,l):Td(s,l,!0),v=d;do{if(g===0){ra&&!d&&Dn(s,l,0,!1);break}else{if(r=s.current.alternate,v&&!ny(r)){g=Td(s,l,!1),v=!1;continue}if(g===2){if(v=l,s.errorRecoveryDisabledLanes&v)var _=0;else _=s.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){l=_;e:{var M=s;g=yi;var B=M.current.memoizedState.isDehydrated;if(B&&(da(M,_).flags|=256),_=Td(M,_,!1),_!==2){if(Nd&&!B){M.errorRecoveryDisabledLanes|=v,gl|=v,g=4;break e}v=Jt,Jt=g,v!==null&&(Jt===null?Jt=v:Jt.push.apply(Jt,v))}g=_}if(v=!1,g!==2)continue}}if(g===1){da(s,0),Dn(s,l,0,!0);break}e:{switch(d=s,v=g,v){case 0:case 1:throw Error(i(345));case 4:if((l&4194048)!==l)break;case 6:Dn(d,l,ss,!kn);break e;case 2:Jt=null;break;case 3:case 5:break;default:throw Error(i(329))}if((l&62914560)===l&&(g=Br+300-At(),10<g)){if(Dn(d,l,ss,!kn),Wn(d,0,!0)!==0)break e;ln=l,d.timeoutHandle=T0(Zm.bind(null,d,r,Jt,Jr,wd,l,ss,gl,oa,kn,v,"Throttled",-0,0),g);break e}Zm(d,r,Jt,Jr,wd,l,ss,gl,oa,kn,v,null,-0,0)}}break}while(!0);Us(s)}function Zm(s,l,r,d,g,v,_,M,B,oe,fe,xe,ce,de){if(s.timeoutHandle=-1,xe=l.subtreeFlags,xe&8192||(xe&16785408)===16785408){xe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Gs},Vm(l,v,xe);var Ne=(v&62914560)===v?Br-At():(v&4194048)===v?Ym-At():0;if(Ne=$y(xe,Ne),Ne!==null){ln=v,s.cancelPendingCommit=Ne(i0.bind(null,s,l,v,r,d,g,_,M,B,fe,xe,null,ce,de)),Dn(s,v,_,!oe);return}}i0(s,l,v,r,d,g,_,M,B)}function ny(s){for(var l=s;;){var r=l.tag;if((r===0||r===11||r===15)&&l.flags&16384&&(r=l.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var d=0;d<r.length;d++){var g=r[d],v=g.getSnapshot;g=g.value;try{if(!Xt(v(),g))return!1}catch{return!1}}if(r=l.child,l.subtreeFlags&16384&&r!==null)r.return=l,l=r;else{if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Dn(s,l,r,d){l&=~jd,l&=~gl,s.suspendedLanes|=l,s.pingedLanes&=~l,d&&(s.warmLanes|=l),d=s.expirationTimes;for(var g=l;0<g;){var v=31-Ct(g),_=1<<v;d[v]=-1,g&=~_}r!==0&&ve(s,r,l)}function Yr(){return(Ye&6)===0?(ji(0),!1):!0}function Ed(){if(Le!==null){if(Xe===0)var s=Le.return;else s=Le,Js=ol=null,Gc(s),ea=null,li=0,s=Le;for(;s!==null;)km(s.alternate,s),s=s.return;Le=null}}function da(s,l){var r=s.timeoutHandle;r!==-1&&(s.timeoutHandle=-1,wy(r)),r=s.cancelPendingCommit,r!==null&&(s.cancelPendingCommit=null,r()),ln=0,Ed(),st=s,Le=r=Bs(s.current,null),Pe=l,Xe=0,ts=null,kn=!1,ra=el(s,l),Nd=!1,oa=ss=jd=gl=An=mt=0,Jt=yi=null,wd=!1,(l&8)!==0&&(l|=l&32);var d=s.entangledLanes;if(d!==0)for(s=s.entanglements,d&=l;0<d;){var g=31-Ct(d),v=1<<g;l|=s[g],d&=~v}return nn=l,xr(),r}function Wm(s,l){Ae=null,T.H=fi,l===Wl||l===wr?(l=xh(),Xe=3):l===Mc?(l=xh(),Xe=4):Xe=l===ad?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,ts=l,Le===null&&(mt=1,Ur(s,fs(l,s.current)))}function e0(){var s=Wt.current;return s===null?!0:(Pe&4194048)===Pe?ps===null:(Pe&62914560)===Pe||(Pe&536870912)!==0?s===ps:!1}function t0(){var s=T.H;return T.H=fi,s===null?fi:s}function s0(){var s=T.A;return T.A=ty,s}function Kr(){mt=4,kn||(Pe&4194048)!==Pe&&Wt.current!==null||(ra=!0),(An&134217727)===0&&(gl&134217727)===0||st===null||Dn(st,Pe,ss,!1)}function Td(s,l,r){var d=Ye;Ye|=2;var g=t0(),v=s0();(st!==s||Pe!==l)&&(Jr=null,da(s,l)),l=!1;var _=mt;e:do try{if(Xe!==0&&Le!==null){var M=Le,B=ts;switch(Xe){case 8:Ed(),_=6;break e;case 3:case 2:case 9:case 6:Wt.current===null&&(l=!0);var oe=Xe;if(Xe=0,ts=null,ua(s,M,B,oe),r&&ra){_=0;break e}break;default:oe=Xe,Xe=0,ts=null,ua(s,M,B,oe)}}ly(),_=mt;break}catch(fe){Wm(s,fe)}while(!0);return l&&s.shellSuspendCounter++,Js=ol=null,Ye=d,T.H=g,T.A=v,Le===null&&(st=null,Pe=0,xr()),_}function ly(){for(;Le!==null;)n0(Le)}function ay(s,l){var r=Ye;Ye|=2;var d=t0(),g=s0();st!==s||Pe!==l?(Jr=null,Fr=At()+500,da(s,l)):ra=el(s,l);e:do try{if(Xe!==0&&Le!==null){l=Le;var v=ts;t:switch(Xe){case 1:Xe=0,ts=null,ua(s,l,v,1);break;case 2:case 9:if(hh(v)){Xe=0,ts=null,l0(l);break}l=function(){Xe!==2&&Xe!==9||st!==s||(Xe=7),Us(s)},v.then(l,l);break e;case 3:Xe=7;break e;case 4:Xe=5;break e;case 7:hh(v)?(Xe=0,ts=null,l0(l)):(Xe=0,ts=null,ua(s,l,v,7));break;case 5:var _=null;switch(Le.tag){case 26:_=Le.memoizedState;case 5:case 27:var M=Le;if(_?G0(_):M.stateNode.complete){Xe=0,ts=null;var B=M.sibling;if(B!==null)Le=B;else{var oe=M.return;oe!==null?(Le=oe,Qr(oe)):Le=null}break t}}Xe=0,ts=null,ua(s,l,v,5);break;case 6:Xe=0,ts=null,ua(s,l,v,6);break;case 8:Ed(),mt=6;break e;default:throw Error(i(462))}}iy();break}catch(fe){Wm(s,fe)}while(!0);return Js=ol=null,T.H=d,T.A=g,Ye=r,Le!==null?0:(st=null,Pe=0,xr(),mt)}function iy(){for(;Le!==null&&!Xn();)n0(Le)}function n0(s){var l=Em(s.alternate,s,nn);s.memoizedProps=s.pendingProps,l===null?Qr(s):Le=l}function l0(s){var l=s,r=l.alternate;switch(l.tag){case 15:case 0:l=Nm(r,l,l.pendingProps,l.type,void 0,Pe);break;case 11:l=Nm(r,l,l.pendingProps,l.type.render,l.ref,Pe);break;case 5:Gc(l);default:km(r,l),l=Le=sh(l,nn),l=Em(r,l,nn)}s.memoizedProps=s.pendingProps,l===null?Qr(s):Le=l}function ua(s,l,r,d){Js=ol=null,Gc(l),ea=null,li=0;var g=l.return;try{if(Yv(s,g,l,r,Pe)){mt=1,Ur(s,fs(r,s.current)),Le=null;return}}catch(v){if(g!==null)throw Le=g,v;mt=1,Ur(s,fs(r,s.current)),Le=null;return}l.flags&32768?(He||d===1?s=!0:ra||(Pe&536870912)!==0?s=!1:(kn=s=!0,(d===2||d===9||d===3||d===6)&&(d=Wt.current,d!==null&&d.tag===13&&(d.flags|=16384))),a0(l,s)):Qr(l)}function Qr(s){var l=s;do{if((l.flags&32768)!==0){a0(l,kn);return}s=l.return;var r=Xv(l.alternate,l,nn);if(r!==null){Le=r;return}if(l=l.sibling,l!==null){Le=l;return}Le=l=s}while(l!==null);mt===0&&(mt=5)}function a0(s,l){do{var r=Zv(s.alternate,s);if(r!==null){r.flags&=32767,Le=r;return}if(r=s.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!l&&(s=s.sibling,s!==null)){Le=s;return}Le=s=r}while(s!==null);mt=6,Le=null}function i0(s,l,r,d,g,v,_,M,B){s.cancelPendingCommit=null;do Xr();while(St!==0);if((Ye&6)!==0)throw Error(i(327));if(l!==null){if(l===s.current)throw Error(i(177));if(v=l.lanes|l.childLanes,v|=pc,ge(s,r,v,_,M,B),s===st&&(Le=st=null,Pe=0),ca=l,Rn=s,ln=r,_d=v,Sd=g,Km=d,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,dy(Rl,function(){return u0(),null})):(s.callbackNode=null,s.callbackPriority=0),d=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||d){d=T.T,T.T=null,g=E.p,E.p=2,_=Ye,Ye|=4;try{Wv(s,l,r)}finally{Ye=_,E.p=g,T.T=d}}St=1,r0(),o0(),c0()}}function r0(){if(St===1){St=0;var s=Rn,l=ca,r=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||r){r=T.T,T.T=null;var d=E.p;E.p=2;var g=Ye;Ye|=4;try{$m(l,s);var v=Od,_=Jf(s.containerInfo),M=v.focusedElem,B=v.selectionRange;if(_!==M&&M&&M.ownerDocument&&Ff(M.ownerDocument.documentElement,M)){if(B!==null&&uc(M)){var oe=B.start,fe=B.end;if(fe===void 0&&(fe=oe),"selectionStart"in M)M.selectionStart=oe,M.selectionEnd=Math.min(fe,M.value.length);else{var xe=M.ownerDocument||document,ce=xe&&xe.defaultView||window;if(ce.getSelection){var de=ce.getSelection(),Ne=M.textContent.length,Ce=Math.min(B.start,Ne),tt=B.end===void 0?Ce:Math.min(B.end,Ne);!de.extend&&Ce>tt&&(_=tt,tt=Ce,Ce=_);var te=Bf(M,Ce),K=Bf(M,tt);if(te&&K&&(de.rangeCount!==1||de.anchorNode!==te.node||de.anchorOffset!==te.offset||de.focusNode!==K.node||de.focusOffset!==K.offset)){var re=xe.createRange();re.setStart(te.node,te.offset),de.removeAllRanges(),Ce>tt?(de.addRange(re),de.extend(K.node,K.offset)):(re.setEnd(K.node,K.offset),de.addRange(re))}}}}for(xe=[],de=M;de=de.parentNode;)de.nodeType===1&&xe.push({element:de,left:de.scrollLeft,top:de.scrollTop});for(typeof M.focus=="function"&&M.focus(),M=0;M<xe.length;M++){var me=xe[M];me.element.scrollLeft=me.left,me.element.scrollTop=me.top}}co=!!qd,Od=qd=null}finally{Ye=g,E.p=d,T.T=r}}s.current=l,St=2}}function o0(){if(St===2){St=0;var s=Rn,l=ca,r=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||r){r=T.T,T.T=null;var d=E.p;E.p=2;var g=Ye;Ye|=4;try{Lm(s,l.alternate,l)}finally{Ye=g,E.p=d,T.T=r}}St=3}}function c0(){if(St===4||St===3){St=0,Ut();var s=Rn,l=ca,r=ln,d=Km;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?St=5:(St=0,ca=Rn=null,d0(s,s.pendingLanes));var g=s.pendingLanes;if(g===0&&(Mn=null),Kt(r),l=l.stateNode,Mt&&typeof Mt.onCommitFiberRoot=="function")try{Mt.onCommitFiberRoot(Zn,l,void 0,(l.current.flags&128)===128)}catch{}if(d!==null){l=T.T,g=E.p,E.p=2,T.T=null;try{for(var v=s.onRecoverableError,_=0;_<d.length;_++){var M=d[_];v(M.value,{componentStack:M.stack})}}finally{T.T=l,E.p=g}}(ln&3)!==0&&Xr(),Us(s),g=s.pendingLanes,(r&261930)!==0&&(g&42)!==0?s===Cd?Ni++:(Ni=0,Cd=s):Ni=0,ji(0)}}function d0(s,l){(s.pooledCacheLanes&=l)===0&&(l=s.pooledCache,l!=null&&(s.pooledCache=null,si(l)))}function Xr(){return r0(),o0(),c0(),u0()}function u0(){if(St!==5)return!1;var s=Rn,l=_d;_d=0;var r=Kt(ln),d=T.T,g=E.p;try{E.p=32>r?32:r,T.T=null,r=Sd,Sd=null;var v=Rn,_=ln;if(St=0,ca=Rn=null,ln=0,(Ye&6)!==0)throw Error(i(331));var M=Ye;if(Ye|=4,Fm(v.current),Gm(v,v.current,_,r),Ye=M,ji(0,!1),Mt&&typeof Mt.onPostCommitFiberRoot=="function")try{Mt.onPostCommitFiberRoot(Zn,v)}catch{}return!0}finally{E.p=g,T.T=d,d0(s,l)}}function f0(s,l,r){l=fs(r,l),l=ld(s.stateNode,l,2),s=Sn(s,l,2),s!==null&&(gn(s,2),Us(s))}function Ze(s,l,r){if(s.tag===3)f0(s,s,r);else for(;l!==null;){if(l.tag===3){f0(l,s,r);break}else if(l.tag===1){var d=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Mn===null||!Mn.has(d))){s=fs(r,s),r=hm(2),d=Sn(l,r,2),d!==null&&(mm(r,d,l,s),gn(d,2),Us(d));break}}l=l.return}}function kd(s,l,r){var d=s.pingCache;if(d===null){d=s.pingCache=new sy;var g=new Set;d.set(l,g)}else g=d.get(l),g===void 0&&(g=new Set,d.set(l,g));g.has(r)||(Nd=!0,g.add(r),s=ry.bind(null,s,l,r),l.then(s,s))}function ry(s,l,r){var d=s.pingCache;d!==null&&d.delete(l),s.pingedLanes|=s.suspendedLanes&r,s.warmLanes&=~r,st===s&&(Pe&r)===r&&(mt===4||mt===3&&(Pe&62914560)===Pe&&300>At()-Br?(Ye&2)===0&&da(s,0):jd|=r,oa===Pe&&(oa=0)),Us(s)}function h0(s,l){l===0&&(l=Ha()),s=al(s,l),s!==null&&(gn(s,l),Us(s))}function oy(s){var l=s.memoizedState,r=0;l!==null&&(r=l.retryLane),h0(s,r)}function cy(s,l){var r=0;switch(s.tag){case 31:case 13:var d=s.stateNode,g=s.memoizedState;g!==null&&(r=g.retryLane);break;case 19:d=s.stateNode;break;case 22:d=s.stateNode._retryCache;break;default:throw Error(i(314))}d!==null&&d.delete(l),h0(s,r)}function dy(s,l){return Oa(s,l)}var Zr=null,fa=null,Ad=!1,Wr=!1,Md=!1,In=0;function Us(s){s!==fa&&s.next===null&&(fa===null?Zr=fa=s:fa=fa.next=s),Wr=!0,Ad||(Ad=!0,fy())}function ji(s,l){if(!Md&&Wr){Md=!0;do for(var r=!1,d=Zr;d!==null;){if(s!==0){var g=d.pendingLanes;if(g===0)var v=0;else{var _=d.suspendedLanes,M=d.pingedLanes;v=(1<<31-Ct(42|s)+1)-1,v&=g&~(_&~M),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(r=!0,g0(d,v))}else v=Pe,v=Wn(d,d===st?v:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(v&3)===0||el(d,v)||(r=!0,g0(d,v));d=d.next}while(r);Md=!1}}function uy(){m0()}function m0(){Wr=Ad=!1;var s=0;In!==0&&jy()&&(s=In);for(var l=At(),r=null,d=Zr;d!==null;){var g=d.next,v=x0(d,l);v===0?(d.next=null,r===null?Zr=g:r.next=g,g===null&&(fa=r)):(r=d,(s!==0||(v&3)!==0)&&(Wr=!0)),d=g}St!==0&&St!==5||ji(s),In!==0&&(In=0)}function x0(s,l){for(var r=s.suspendedLanes,d=s.pingedLanes,g=s.expirationTimes,v=s.pendingLanes&-62914561;0<v;){var _=31-Ct(v),M=1<<_,B=g[_];B===-1?((M&r)===0||(M&d)!==0)&&(g[_]=nr(M,l)):B<=l&&(s.expiredLanes|=M),v&=~M}if(l=st,r=Pe,r=Wn(s,s===l?r:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),d=s.callbackNode,r===0||s===l&&(Xe===2||Xe===9)||s.cancelPendingCommit!==null)return d!==null&&d!==null&&Ml(d),s.callbackNode=null,s.callbackPriority=0;if((r&3)===0||el(s,r)){if(l=r&-r,l===s.callbackPriority)return l;switch(d!==null&&Ml(d),Kt(r)){case 2:case 8:r=Zi;break;case 32:r=Rl;break;case 268435456:r=Wi;break;default:r=Rl}return d=p0.bind(null,s),r=Oa(r,d),s.callbackPriority=l,s.callbackNode=r,l}return d!==null&&d!==null&&Ml(d),s.callbackPriority=2,s.callbackNode=null,2}function p0(s,l){if(St!==0&&St!==5)return s.callbackNode=null,s.callbackPriority=0,null;var r=s.callbackNode;if(Xr()&&s.callbackNode!==r)return null;var d=Pe;return d=Wn(s,s===st?d:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),d===0?null:(Xm(s,d,l),x0(s,At()),s.callbackNode!=null&&s.callbackNode===r?p0.bind(null,s):null)}function g0(s,l){if(Xr())return null;Xm(s,l,!0)}function fy(){_y(function(){(Ye&6)!==0?Oa($a,uy):m0()})}function Rd(){if(In===0){var s=Xl;s===0&&(s=Os,Os<<=1,(Os&261888)===0&&(Os=256)),In=s}return In}function b0(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:rr(""+s)}function v0(s,l){var r=l.ownerDocument.createElement("input");return r.name=l.name,r.value=l.value,s.id&&r.setAttribute("form",s.id),l.parentNode.insertBefore(r,l),s=new FormData(s),r.parentNode.removeChild(r),s}function hy(s,l,r,d,g){if(l==="submit"&&r&&r.stateNode===g){var v=b0((g[De]||null).action),_=d.submitter;_&&(l=(l=_[De]||null)?b0(l.formAction):_.getAttribute("formAction"),l!==null&&(v=l,_=null));var M=new ur("action","action",null,d,g);s.push({event:M,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(In!==0){var B=_?v0(g,_):new FormData(g);Zc(r,{pending:!0,data:B,method:g.method,action:v},null,B)}}else typeof v=="function"&&(M.preventDefault(),B=_?v0(g,_):new FormData(g),Zc(r,{pending:!0,data:B,method:g.method,action:v},v,B))},currentTarget:g}]})}}for(var Dd=0;Dd<xc.length;Dd++){var Id=xc[Dd],my=Id.toLowerCase(),xy=Id[0].toUpperCase()+Id.slice(1);Ss(my,"on"+xy)}Ss(Qf,"onAnimationEnd"),Ss(Xf,"onAnimationIteration"),Ss(Zf,"onAnimationStart"),Ss("dblclick","onDoubleClick"),Ss("focusin","onFocus"),Ss("focusout","onBlur"),Ss(Mv,"onTransitionRun"),Ss(Rv,"onTransitionStart"),Ss(Dv,"onTransitionCancel"),Ss(Wf,"onTransitionEnd"),Ul("onMouseEnter",["mouseout","mouseover"]),Ul("onMouseLeave",["mouseout","mouseover"]),Ul("onPointerEnter",["pointerout","pointerover"]),Ul("onPointerLeave",["pointerout","pointerover"]),tl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),tl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),tl("onBeforeInput",["compositionend","keypress","textInput","paste"]),tl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),tl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),tl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),py=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(wi));function y0(s,l){l=(l&4)!==0;for(var r=0;r<s.length;r++){var d=s[r],g=d.event;d=d.listeners;e:{var v=void 0;if(l)for(var _=d.length-1;0<=_;_--){var M=d[_],B=M.instance,oe=M.currentTarget;if(M=M.listener,B!==v&&g.isPropagationStopped())break e;v=M,g.currentTarget=oe;try{v(g)}catch(fe){mr(fe)}g.currentTarget=null,v=B}else for(_=0;_<d.length;_++){if(M=d[_],B=M.instance,oe=M.currentTarget,M=M.listener,B!==v&&g.isPropagationStopped())break e;v=M,g.currentTarget=oe;try{v(g)}catch(fe){mr(fe)}g.currentTarget=null,v=B}}}}function Ue(s,l){var r=l[$s];r===void 0&&(r=l[$s]=new Set);var d=s+"__bubble";r.has(d)||(N0(l,s,2,!1),r.add(d))}function zd(s,l,r){var d=0;l&&(d|=4),N0(r,s,d,l)}var eo="_reactListening"+Math.random().toString(36).slice(2);function Ld(s){if(!s[eo]){s[eo]=!0,mf.forEach(function(r){r!=="selectionchange"&&(py.has(r)||zd(r,!1,s),zd(r,!0,s))});var l=s.nodeType===9?s:s.ownerDocument;l===null||l[eo]||(l[eo]=!0,zd("selectionchange",!1,l))}}function N0(s,l,r,d){switch(Q0(l)){case 2:var g=Vy;break;case 8:g=By;break;default:g=Xd}r=g.bind(null,l,r,s),g=void 0,!sc||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(g=!0),d?g!==void 0?s.addEventListener(l,r,{capture:!0,passive:g}):s.addEventListener(l,r,!0):g!==void 0?s.addEventListener(l,r,{passive:g}):s.addEventListener(l,r,!1)}function Ud(s,l,r,d,g){var v=d;if((l&1)===0&&(l&2)===0&&d!==null)e:for(;;){if(d===null)return;var _=d.tag;if(_===3||_===4){var M=d.stateNode.containerInfo;if(M===g)break;if(_===4)for(_=d.return;_!==null;){var B=_.tag;if((B===3||B===4)&&_.stateNode.containerInfo===g)return;_=_.return}for(;M!==null;){if(_=Il(M),_===null)return;if(B=_.tag,B===5||B===6||B===26||B===27){d=v=_;continue e}M=M.parentNode}}d=d.return}Cf(function(){var oe=v,fe=ec(r),xe=[];e:{var ce=eh.get(s);if(ce!==void 0){var de=ur,Ne=s;switch(s){case"keypress":if(cr(r)===0)break e;case"keydown":case"keyup":de=cv;break;case"focusin":Ne="focus",de=ic;break;case"focusout":Ne="blur",de=ic;break;case"beforeblur":case"afterblur":de=ic;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":de=kf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":de=Xb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":de=fv;break;case Qf:case Xf:case Zf:de=ev;break;case Wf:de=mv;break;case"scroll":case"scrollend":de=Kb;break;case"wheel":de=pv;break;case"copy":case"cut":case"paste":de=sv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":de=Mf;break;case"toggle":case"beforetoggle":de=bv}var Ce=(l&4)!==0,tt=!Ce&&(s==="scroll"||s==="scrollend"),te=Ce?ce!==null?ce+"Capture":null:ce;Ce=[];for(var K=oe,re;K!==null;){var me=K;if(re=me.stateNode,me=me.tag,me!==5&&me!==26&&me!==27||re===null||te===null||(me=Ba(K,te),me!=null&&Ce.push(_i(K,me,re))),tt)break;K=K.return}0<Ce.length&&(ce=new de(ce,Ne,null,r,fe),xe.push({event:ce,listeners:Ce}))}}if((l&7)===0){e:{if(ce=s==="mouseover"||s==="pointerover",de=s==="mouseout"||s==="pointerout",ce&&r!==Wo&&(Ne=r.relatedTarget||r.fromElement)&&(Il(Ne)||Ne[os]))break e;if((de||ce)&&(ce=fe.window===fe?fe:(ce=fe.ownerDocument)?ce.defaultView||ce.parentWindow:window,de?(Ne=r.relatedTarget||r.toElement,de=oe,Ne=Ne?Il(Ne):null,Ne!==null&&(tt=c(Ne),Ce=Ne.tag,Ne!==tt||Ce!==5&&Ce!==27&&Ce!==6)&&(Ne=null)):(de=null,Ne=oe),de!==Ne)){if(Ce=kf,me="onMouseLeave",te="onMouseEnter",K="mouse",(s==="pointerout"||s==="pointerover")&&(Ce=Mf,me="onPointerLeave",te="onPointerEnter",K="pointer"),tt=de==null?ce:Va(de),re=Ne==null?ce:Va(Ne),ce=new Ce(me,K+"leave",de,r,fe),ce.target=tt,ce.relatedTarget=re,me=null,Il(fe)===oe&&(Ce=new Ce(te,K+"enter",Ne,r,fe),Ce.target=re,Ce.relatedTarget=tt,me=Ce),tt=me,de&&Ne)t:{for(Ce=gy,te=de,K=Ne,re=0,me=te;me;me=Ce(me))re++;me=0;for(var Se=K;Se;Se=Ce(Se))me++;for(;0<re-me;)te=Ce(te),re--;for(;0<me-re;)K=Ce(K),me--;for(;re--;){if(te===K||K!==null&&te===K.alternate){Ce=te;break t}te=Ce(te),K=Ce(K)}Ce=null}else Ce=null;de!==null&&j0(xe,ce,de,Ce,!1),Ne!==null&&tt!==null&&j0(xe,tt,Ne,Ce,!0)}}e:{if(ce=oe?Va(oe):window,de=ce.nodeName&&ce.nodeName.toLowerCase(),de==="select"||de==="input"&&ce.type==="file")var Ve=qf;else if(Uf(ce))if(Of)Ve=Tv;else{Ve=Cv;var je=Sv}else de=ce.nodeName,!de||de.toLowerCase()!=="input"||ce.type!=="checkbox"&&ce.type!=="radio"?oe&&Zo(oe.elementType)&&(Ve=qf):Ve=Ev;if(Ve&&(Ve=Ve(s,oe))){Pf(xe,Ve,r,fe);break e}je&&je(s,ce,oe),s==="focusout"&&oe&&ce.type==="number"&&oe.memoizedProps.value!=null&&Xo(ce,"number",ce.value)}switch(je=oe?Va(oe):window,s){case"focusin":(Uf(je)||je.contentEditable==="true")&&(Gl=je,fc=oe,Wa=null);break;case"focusout":Wa=fc=Gl=null;break;case"mousedown":hc=!0;break;case"contextmenu":case"mouseup":case"dragend":hc=!1,Yf(xe,r,fe);break;case"selectionchange":if(Av)break;case"keydown":case"keyup":Yf(xe,r,fe)}var Me;if(oc)e:{switch(s){case"compositionstart":var qe="onCompositionStart";break e;case"compositionend":qe="onCompositionEnd";break e;case"compositionupdate":qe="onCompositionUpdate";break e}qe=void 0}else Hl?zf(s,r)&&(qe="onCompositionEnd"):s==="keydown"&&r.keyCode===229&&(qe="onCompositionStart");qe&&(Rf&&r.locale!=="ko"&&(Hl||qe!=="onCompositionStart"?qe==="onCompositionEnd"&&Hl&&(Me=Ef()):(bn=fe,nc="value"in bn?bn.value:bn.textContent,Hl=!0)),je=to(oe,qe),0<je.length&&(qe=new Af(qe,s,null,r,fe),xe.push({event:qe,listeners:je}),Me?qe.data=Me:(Me=Lf(r),Me!==null&&(qe.data=Me)))),(Me=yv?Nv(s,r):jv(s,r))&&(qe=to(oe,"onBeforeInput"),0<qe.length&&(je=new Af("onBeforeInput","beforeinput",null,r,fe),xe.push({event:je,listeners:qe}),je.data=Me)),hy(xe,s,oe,r,fe)}y0(xe,l)})}function _i(s,l,r){return{instance:s,listener:l,currentTarget:r}}function to(s,l){for(var r=l+"Capture",d=[];s!==null;){var g=s,v=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||v===null||(g=Ba(s,r),g!=null&&d.unshift(_i(s,g,v)),g=Ba(s,l),g!=null&&d.push(_i(s,g,v))),s.tag===3)return d;s=s.return}return[]}function gy(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function j0(s,l,r,d,g){for(var v=l._reactName,_=[];r!==null&&r!==d;){var M=r,B=M.alternate,oe=M.stateNode;if(M=M.tag,B!==null&&B===d)break;M!==5&&M!==26&&M!==27||oe===null||(B=oe,g?(oe=Ba(r,v),oe!=null&&_.unshift(_i(r,oe,B))):g||(oe=Ba(r,v),oe!=null&&_.push(_i(r,oe,B)))),r=r.return}_.length!==0&&s.push({event:l,listeners:_})}var by=/\r\n?/g,vy=/\u0000|\uFFFD/g;function w0(s){return(typeof s=="string"?s:""+s).replace(by,`
`).replace(vy,"")}function _0(s,l){return l=w0(l),w0(s)===l}function et(s,l,r,d,g,v){switch(r){case"children":typeof d=="string"?l==="body"||l==="textarea"&&d===""||ql(s,d):(typeof d=="number"||typeof d=="bigint")&&l!=="body"&&ql(s,""+d);break;case"className":ar(s,"class",d);break;case"tabIndex":ar(s,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":ar(s,r,d);break;case"style":_f(s,d,v);break;case"data":if(l!=="object"){ar(s,"data",d);break}case"src":case"href":if(d===""&&(l!=="a"||r!=="href")){s.removeAttribute(r);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){s.removeAttribute(r);break}d=rr(""+d),s.setAttribute(r,d);break;case"action":case"formAction":if(typeof d=="function"){s.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(r==="formAction"?(l!=="input"&&et(s,l,"name",g.name,g,null),et(s,l,"formEncType",g.formEncType,g,null),et(s,l,"formMethod",g.formMethod,g,null),et(s,l,"formTarget",g.formTarget,g,null)):(et(s,l,"encType",g.encType,g,null),et(s,l,"method",g.method,g,null),et(s,l,"target",g.target,g,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){s.removeAttribute(r);break}d=rr(""+d),s.setAttribute(r,d);break;case"onClick":d!=null&&(s.onclick=Gs);break;case"onScroll":d!=null&&Ue("scroll",s);break;case"onScrollEnd":d!=null&&Ue("scrollend",s);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(i(61));if(r=d.__html,r!=null){if(g.children!=null)throw Error(i(60));s.innerHTML=r}}break;case"multiple":s.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":s.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){s.removeAttribute("xlink:href");break}r=rr(""+d),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?s.setAttribute(r,""+d):s.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?s.setAttribute(r,""):s.removeAttribute(r);break;case"capture":case"download":d===!0?s.setAttribute(r,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?s.setAttribute(r,d):s.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?s.setAttribute(r,d):s.removeAttribute(r);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?s.removeAttribute(r):s.setAttribute(r,d);break;case"popover":Ue("beforetoggle",s),Ue("toggle",s),lr(s,"popover",d);break;case"xlinkActuate":Hs(s,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":Hs(s,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":Hs(s,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":Hs(s,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":Hs(s,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":Hs(s,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":Hs(s,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":Hs(s,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":Hs(s,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":lr(s,"is",d);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=Jb.get(r)||r,lr(s,r,d))}}function Pd(s,l,r,d,g,v){switch(r){case"style":_f(s,d,v);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(i(61));if(r=d.__html,r!=null){if(g.children!=null)throw Error(i(60));s.innerHTML=r}}break;case"children":typeof d=="string"?ql(s,d):(typeof d=="number"||typeof d=="bigint")&&ql(s,""+d);break;case"onScroll":d!=null&&Ue("scroll",s);break;case"onScrollEnd":d!=null&&Ue("scrollend",s);break;case"onClick":d!=null&&(s.onclick=Gs);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!xf.hasOwnProperty(r))e:{if(r[0]==="o"&&r[1]==="n"&&(g=r.endsWith("Capture"),l=r.slice(2,g?r.length-7:void 0),v=s[De]||null,v=v!=null?v[r]:null,typeof v=="function"&&s.removeEventListener(l,v,g),typeof d=="function")){typeof v!="function"&&v!==null&&(r in s?s[r]=null:s.hasAttribute(r)&&s.removeAttribute(r)),s.addEventListener(l,d,g);break e}r in s?s[r]=d:d===!0?s.setAttribute(r,""):lr(s,r,d)}}}function zt(s,l,r){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ue("error",s),Ue("load",s);var d=!1,g=!1,v;for(v in r)if(r.hasOwnProperty(v)){var _=r[v];if(_!=null)switch(v){case"src":d=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,l));default:et(s,l,v,_,r,null)}}g&&et(s,l,"srcSet",r.srcSet,r,null),d&&et(s,l,"src",r.src,r,null);return;case"input":Ue("invalid",s);var M=v=_=g=null,B=null,oe=null;for(d in r)if(r.hasOwnProperty(d)){var fe=r[d];if(fe!=null)switch(d){case"name":g=fe;break;case"type":_=fe;break;case"checked":B=fe;break;case"defaultChecked":oe=fe;break;case"value":v=fe;break;case"defaultValue":M=fe;break;case"children":case"dangerouslySetInnerHTML":if(fe!=null)throw Error(i(137,l));break;default:et(s,l,d,fe,r,null)}}yf(s,v,M,B,oe,_,g,!1);return;case"select":Ue("invalid",s),d=_=v=null;for(g in r)if(r.hasOwnProperty(g)&&(M=r[g],M!=null))switch(g){case"value":v=M;break;case"defaultValue":_=M;break;case"multiple":d=M;default:et(s,l,g,M,r,null)}l=v,r=_,s.multiple=!!d,l!=null?Pl(s,!!d,l,!1):r!=null&&Pl(s,!!d,r,!0);return;case"textarea":Ue("invalid",s),v=g=d=null;for(_ in r)if(r.hasOwnProperty(_)&&(M=r[_],M!=null))switch(_){case"value":d=M;break;case"defaultValue":g=M;break;case"children":v=M;break;case"dangerouslySetInnerHTML":if(M!=null)throw Error(i(91));break;default:et(s,l,_,M,r,null)}jf(s,d,g,v);return;case"option":for(B in r)if(r.hasOwnProperty(B)&&(d=r[B],d!=null))switch(B){case"selected":s.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:et(s,l,B,d,r,null)}return;case"dialog":Ue("beforetoggle",s),Ue("toggle",s),Ue("cancel",s),Ue("close",s);break;case"iframe":case"object":Ue("load",s);break;case"video":case"audio":for(d=0;d<wi.length;d++)Ue(wi[d],s);break;case"image":Ue("error",s),Ue("load",s);break;case"details":Ue("toggle",s);break;case"embed":case"source":case"link":Ue("error",s),Ue("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(oe in r)if(r.hasOwnProperty(oe)&&(d=r[oe],d!=null))switch(oe){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,l));default:et(s,l,oe,d,r,null)}return;default:if(Zo(l)){for(fe in r)r.hasOwnProperty(fe)&&(d=r[fe],d!==void 0&&Pd(s,l,fe,d,r,void 0));return}}for(M in r)r.hasOwnProperty(M)&&(d=r[M],d!=null&&et(s,l,M,d,r,null))}function yy(s,l,r,d){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,v=null,_=null,M=null,B=null,oe=null,fe=null;for(de in r){var xe=r[de];if(r.hasOwnProperty(de)&&xe!=null)switch(de){case"checked":break;case"value":break;case"defaultValue":B=xe;default:d.hasOwnProperty(de)||et(s,l,de,null,d,xe)}}for(var ce in d){var de=d[ce];if(xe=r[ce],d.hasOwnProperty(ce)&&(de!=null||xe!=null))switch(ce){case"type":v=de;break;case"name":g=de;break;case"checked":oe=de;break;case"defaultChecked":fe=de;break;case"value":_=de;break;case"defaultValue":M=de;break;case"children":case"dangerouslySetInnerHTML":if(de!=null)throw Error(i(137,l));break;default:de!==xe&&et(s,l,ce,de,d,xe)}}Qo(s,_,M,B,oe,fe,v,g);return;case"select":de=_=M=ce=null;for(v in r)if(B=r[v],r.hasOwnProperty(v)&&B!=null)switch(v){case"value":break;case"multiple":de=B;default:d.hasOwnProperty(v)||et(s,l,v,null,d,B)}for(g in d)if(v=d[g],B=r[g],d.hasOwnProperty(g)&&(v!=null||B!=null))switch(g){case"value":ce=v;break;case"defaultValue":M=v;break;case"multiple":_=v;default:v!==B&&et(s,l,g,v,d,B)}l=M,r=_,d=de,ce!=null?Pl(s,!!r,ce,!1):!!d!=!!r&&(l!=null?Pl(s,!!r,l,!0):Pl(s,!!r,r?[]:"",!1));return;case"textarea":de=ce=null;for(M in r)if(g=r[M],r.hasOwnProperty(M)&&g!=null&&!d.hasOwnProperty(M))switch(M){case"value":break;case"children":break;default:et(s,l,M,null,d,g)}for(_ in d)if(g=d[_],v=r[_],d.hasOwnProperty(_)&&(g!=null||v!=null))switch(_){case"value":ce=g;break;case"defaultValue":de=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(i(91));break;default:g!==v&&et(s,l,_,g,d,v)}Nf(s,ce,de);return;case"option":for(var Ne in r)if(ce=r[Ne],r.hasOwnProperty(Ne)&&ce!=null&&!d.hasOwnProperty(Ne))switch(Ne){case"selected":s.selected=!1;break;default:et(s,l,Ne,null,d,ce)}for(B in d)if(ce=d[B],de=r[B],d.hasOwnProperty(B)&&ce!==de&&(ce!=null||de!=null))switch(B){case"selected":s.selected=ce&&typeof ce!="function"&&typeof ce!="symbol";break;default:et(s,l,B,ce,d,de)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ce in r)ce=r[Ce],r.hasOwnProperty(Ce)&&ce!=null&&!d.hasOwnProperty(Ce)&&et(s,l,Ce,null,d,ce);for(oe in d)if(ce=d[oe],de=r[oe],d.hasOwnProperty(oe)&&ce!==de&&(ce!=null||de!=null))switch(oe){case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(i(137,l));break;default:et(s,l,oe,ce,d,de)}return;default:if(Zo(l)){for(var tt in r)ce=r[tt],r.hasOwnProperty(tt)&&ce!==void 0&&!d.hasOwnProperty(tt)&&Pd(s,l,tt,void 0,d,ce);for(fe in d)ce=d[fe],de=r[fe],!d.hasOwnProperty(fe)||ce===de||ce===void 0&&de===void 0||Pd(s,l,fe,ce,d,de);return}}for(var te in r)ce=r[te],r.hasOwnProperty(te)&&ce!=null&&!d.hasOwnProperty(te)&&et(s,l,te,null,d,ce);for(xe in d)ce=d[xe],de=r[xe],!d.hasOwnProperty(xe)||ce===de||ce==null&&de==null||et(s,l,xe,ce,d,de)}function S0(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Ny(){if(typeof performance.getEntriesByType=="function"){for(var s=0,l=0,r=performance.getEntriesByType("resource"),d=0;d<r.length;d++){var g=r[d],v=g.transferSize,_=g.initiatorType,M=g.duration;if(v&&M&&S0(_)){for(_=0,M=g.responseEnd,d+=1;d<r.length;d++){var B=r[d],oe=B.startTime;if(oe>M)break;var fe=B.transferSize,xe=B.initiatorType;fe&&S0(xe)&&(B=B.responseEnd,_+=fe*(B<M?1:(M-oe)/(B-oe)))}if(--d,l+=8*(v+_)/(g.duration/1e3),s++,10<s)break}}if(0<s)return l/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var qd=null,Od=null;function so(s){return s.nodeType===9?s:s.ownerDocument}function C0(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function E0(s,l){if(s===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&l==="foreignObject"?0:s}function $d(s,l){return s==="textarea"||s==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var Hd=null;function jy(){var s=window.event;return s&&s.type==="popstate"?s===Hd?!1:(Hd=s,!0):(Hd=null,!1)}var T0=typeof setTimeout=="function"?setTimeout:void 0,wy=typeof clearTimeout=="function"?clearTimeout:void 0,k0=typeof Promise=="function"?Promise:void 0,_y=typeof queueMicrotask=="function"?queueMicrotask:typeof k0<"u"?function(s){return k0.resolve(null).then(s).catch(Sy)}:T0;function Sy(s){setTimeout(function(){throw s})}function zn(s){return s==="head"}function A0(s,l){var r=l,d=0;do{var g=r.nextSibling;if(s.removeChild(r),g&&g.nodeType===8)if(r=g.data,r==="/$"||r==="/&"){if(d===0){s.removeChild(g),pa(l);return}d--}else if(r==="$"||r==="$?"||r==="$~"||r==="$!"||r==="&")d++;else if(r==="html")Si(s.ownerDocument.documentElement);else if(r==="head"){r=s.ownerDocument.head,Si(r);for(var v=r.firstChild;v;){var _=v.nextSibling,M=v.nodeName;v[Ga]||M==="SCRIPT"||M==="STYLE"||M==="LINK"&&v.rel.toLowerCase()==="stylesheet"||r.removeChild(v),v=_}}else r==="body"&&Si(s.ownerDocument.body);r=g}while(r);pa(l)}function M0(s,l){var r=s;s=0;do{var d=r.nextSibling;if(r.nodeType===1?l?(r._stashedDisplay=r.style.display,r.style.display="none"):(r.style.display=r._stashedDisplay||"",r.getAttribute("style")===""&&r.removeAttribute("style")):r.nodeType===3&&(l?(r._stashedText=r.nodeValue,r.nodeValue=""):r.nodeValue=r._stashedText||""),d&&d.nodeType===8)if(r=d.data,r==="/$"){if(s===0)break;s--}else r!=="$"&&r!=="$?"&&r!=="$~"&&r!=="$!"||s++;r=d}while(r)}function Gd(s){var l=s.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var r=l;switch(l=l.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":Gd(r),Yo(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}s.removeChild(r)}}function Cy(s,l,r,d){for(;s.nodeType===1;){var g=r;if(s.nodeName.toLowerCase()!==l.toLowerCase()){if(!d&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(d){if(!s[Ga])switch(l){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(v=s.getAttribute("rel"),v==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(v!==g.rel||s.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||s.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||s.getAttribute("title")!==(g.title==null?null:g.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(v=s.getAttribute("src"),(v!==(g.src==null?null:g.src)||s.getAttribute("type")!==(g.type==null?null:g.type)||s.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&v&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(l==="input"&&s.type==="hidden"){var v=g.name==null?null:""+g.name;if(g.type==="hidden"&&s.getAttribute("name")===v)return s}else return s;if(s=gs(s.nextSibling),s===null)break}return null}function Ey(s,l,r){if(l==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!r||(s=gs(s.nextSibling),s===null))return null;return s}function R0(s,l){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!l||(s=gs(s.nextSibling),s===null))return null;return s}function Vd(s){return s.data==="$?"||s.data==="$~"}function Bd(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function Ty(s,l){var r=s.ownerDocument;if(s.data==="$~")s._reactRetry=l;else if(s.data!=="$?"||r.readyState!=="loading")l();else{var d=function(){l(),r.removeEventListener("DOMContentLoaded",d)};r.addEventListener("DOMContentLoaded",d),s._reactRetry=d}}function gs(s){for(;s!=null;s=s.nextSibling){var l=s.nodeType;if(l===1||l===3)break;if(l===8){if(l=s.data,l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"||l==="F!"||l==="F")break;if(l==="/$"||l==="/&")return null}}return s}var Fd=null;function D0(s){s=s.nextSibling;for(var l=0;s;){if(s.nodeType===8){var r=s.data;if(r==="/$"||r==="/&"){if(l===0)return gs(s.nextSibling);l--}else r!=="$"&&r!=="$!"&&r!=="$?"&&r!=="$~"&&r!=="&"||l++}s=s.nextSibling}return null}function I0(s){s=s.previousSibling;for(var l=0;s;){if(s.nodeType===8){var r=s.data;if(r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"){if(l===0)return s;l--}else r!=="/$"&&r!=="/&"||l++}s=s.previousSibling}return null}function z0(s,l,r){switch(l=so(r),s){case"html":if(s=l.documentElement,!s)throw Error(i(452));return s;case"head":if(s=l.head,!s)throw Error(i(453));return s;case"body":if(s=l.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function Si(s){for(var l=s.attributes;l.length;)s.removeAttributeNode(l[0]);Yo(s)}var bs=new Map,L0=new Set;function no(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var an=E.d;E.d={f:ky,r:Ay,D:My,C:Ry,L:Dy,m:Iy,X:Ly,S:zy,M:Uy};function ky(){var s=an.f(),l=Yr();return s||l}function Ay(s){var l=zl(s);l!==null&&l.tag===5&&l.type==="form"?Wh(l):an.r(s)}var ha=typeof document>"u"?null:document;function U0(s,l,r){var d=ha;if(d&&typeof l=="string"&&l){var g=ds(l);g='link[rel="'+s+'"][href="'+g+'"]',typeof r=="string"&&(g+='[crossorigin="'+r+'"]'),L0.has(g)||(L0.add(g),s={rel:s,crossOrigin:r,href:l},d.querySelector(g)===null&&(l=d.createElement("link"),zt(l,"link",s),Et(l),d.head.appendChild(l)))}}function My(s){an.D(s),U0("dns-prefetch",s,null)}function Ry(s,l){an.C(s,l),U0("preconnect",s,l)}function Dy(s,l,r){an.L(s,l,r);var d=ha;if(d&&s&&l){var g='link[rel="preload"][as="'+ds(l)+'"]';l==="image"&&r&&r.imageSrcSet?(g+='[imagesrcset="'+ds(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(g+='[imagesizes="'+ds(r.imageSizes)+'"]')):g+='[href="'+ds(s)+'"]';var v=g;switch(l){case"style":v=ma(s);break;case"script":v=xa(s)}bs.has(v)||(s=y({rel:"preload",href:l==="image"&&r&&r.imageSrcSet?void 0:s,as:l},r),bs.set(v,s),d.querySelector(g)!==null||l==="style"&&d.querySelector(Ci(v))||l==="script"&&d.querySelector(Ei(v))||(l=d.createElement("link"),zt(l,"link",s),Et(l),d.head.appendChild(l)))}}function Iy(s,l){an.m(s,l);var r=ha;if(r&&s){var d=l&&typeof l.as=="string"?l.as:"script",g='link[rel="modulepreload"][as="'+ds(d)+'"][href="'+ds(s)+'"]',v=g;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=xa(s)}if(!bs.has(v)&&(s=y({rel:"modulepreload",href:s},l),bs.set(v,s),r.querySelector(g)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(Ei(v)))return}d=r.createElement("link"),zt(d,"link",s),Et(d),r.head.appendChild(d)}}}function zy(s,l,r){an.S(s,l,r);var d=ha;if(d&&s){var g=Ll(d).hoistableStyles,v=ma(s);l=l||"default";var _=g.get(v);if(!_){var M={loading:0,preload:null};if(_=d.querySelector(Ci(v)))M.loading=5;else{s=y({rel:"stylesheet",href:s,"data-precedence":l},r),(r=bs.get(v))&&Jd(s,r);var B=_=d.createElement("link");Et(B),zt(B,"link",s),B._p=new Promise(function(oe,fe){B.onload=oe,B.onerror=fe}),B.addEventListener("load",function(){M.loading|=1}),B.addEventListener("error",function(){M.loading|=2}),M.loading|=4,lo(_,l,d)}_={type:"stylesheet",instance:_,count:1,state:M},g.set(v,_)}}}function Ly(s,l){an.X(s,l);var r=ha;if(r&&s){var d=Ll(r).hoistableScripts,g=xa(s),v=d.get(g);v||(v=r.querySelector(Ei(g)),v||(s=y({src:s,async:!0},l),(l=bs.get(g))&&Yd(s,l),v=r.createElement("script"),Et(v),zt(v,"link",s),r.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},d.set(g,v))}}function Uy(s,l){an.M(s,l);var r=ha;if(r&&s){var d=Ll(r).hoistableScripts,g=xa(s),v=d.get(g);v||(v=r.querySelector(Ei(g)),v||(s=y({src:s,async:!0,type:"module"},l),(l=bs.get(g))&&Yd(s,l),v=r.createElement("script"),Et(v),zt(v,"link",s),r.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},d.set(g,v))}}function P0(s,l,r,d){var g=(g=z.current)?no(g):null;if(!g)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(l=ma(r.href),r=Ll(g).hoistableStyles,d=r.get(l),d||(d={type:"style",instance:null,count:0,state:null},r.set(l,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){s=ma(r.href);var v=Ll(g).hoistableStyles,_=v.get(s);if(_||(g=g.ownerDocument||g,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(s,_),(v=g.querySelector(Ci(s)))&&!v._p&&(_.instance=v,_.state.loading=5),bs.has(s)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},bs.set(s,r),v||Py(g,s,r,_.state))),l&&d===null)throw Error(i(528,""));return _}if(l&&d!==null)throw Error(i(529,""));return null;case"script":return l=r.async,r=r.src,typeof r=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=xa(r),r=Ll(g).hoistableScripts,d=r.get(l),d||(d={type:"script",instance:null,count:0,state:null},r.set(l,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function ma(s){return'href="'+ds(s)+'"'}function Ci(s){return'link[rel="stylesheet"]['+s+"]"}function q0(s){return y({},s,{"data-precedence":s.precedence,precedence:null})}function Py(s,l,r,d){s.querySelector('link[rel="preload"][as="style"]['+l+"]")?d.loading=1:(l=s.createElement("link"),d.preload=l,l.addEventListener("load",function(){return d.loading|=1}),l.addEventListener("error",function(){return d.loading|=2}),zt(l,"link",r),Et(l),s.head.appendChild(l))}function xa(s){return'[src="'+ds(s)+'"]'}function Ei(s){return"script[async]"+s}function O0(s,l,r){if(l.count++,l.instance===null)switch(l.type){case"style":var d=s.querySelector('style[data-href~="'+ds(r.href)+'"]');if(d)return l.instance=d,Et(d),d;var g=y({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return d=(s.ownerDocument||s).createElement("style"),Et(d),zt(d,"style",g),lo(d,r.precedence,s),l.instance=d;case"stylesheet":g=ma(r.href);var v=s.querySelector(Ci(g));if(v)return l.state.loading|=4,l.instance=v,Et(v),v;d=q0(r),(g=bs.get(g))&&Jd(d,g),v=(s.ownerDocument||s).createElement("link"),Et(v);var _=v;return _._p=new Promise(function(M,B){_.onload=M,_.onerror=B}),zt(v,"link",d),l.state.loading|=4,lo(v,r.precedence,s),l.instance=v;case"script":return v=xa(r.src),(g=s.querySelector(Ei(v)))?(l.instance=g,Et(g),g):(d=r,(g=bs.get(v))&&(d=y({},r),Yd(d,g)),s=s.ownerDocument||s,g=s.createElement("script"),Et(g),zt(g,"link",d),s.head.appendChild(g),l.instance=g);case"void":return null;default:throw Error(i(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(d=l.instance,l.state.loading|=4,lo(d,r.precedence,s));return l.instance}function lo(s,l,r){for(var d=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=d.length?d[d.length-1]:null,v=g,_=0;_<d.length;_++){var M=d[_];if(M.dataset.precedence===l)v=M;else if(v!==g)break}v?v.parentNode.insertBefore(s,v.nextSibling):(l=r.nodeType===9?r.head:r,l.insertBefore(s,l.firstChild))}function Jd(s,l){s.crossOrigin==null&&(s.crossOrigin=l.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=l.referrerPolicy),s.title==null&&(s.title=l.title)}function Yd(s,l){s.crossOrigin==null&&(s.crossOrigin=l.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=l.referrerPolicy),s.integrity==null&&(s.integrity=l.integrity)}var ao=null;function $0(s,l,r){if(ao===null){var d=new Map,g=ao=new Map;g.set(r,d)}else g=ao,d=g.get(r),d||(d=new Map,g.set(r,d));if(d.has(s))return d;for(d.set(s,null),r=r.getElementsByTagName(s),g=0;g<r.length;g++){var v=r[g];if(!(v[Ga]||v[Qe]||s==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var _=v.getAttribute(l)||"";_=s+_;var M=d.get(_);M?M.push(v):d.set(_,[v])}}return d}function H0(s,l,r){s=s.ownerDocument||s,s.head.insertBefore(r,l==="title"?s.querySelector("head > title"):null)}function qy(s,l,r){if(r===1||l.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;switch(l.rel){case"stylesheet":return s=l.disabled,typeof l.precedence=="string"&&s==null;default:return!0}case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function G0(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function Oy(s,l,r,d){if(r.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var g=ma(d.href),v=l.querySelector(Ci(g));if(v){l=v._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(s.count++,s=io.bind(s),l.then(s,s)),r.state.loading|=4,r.instance=v,Et(v);return}v=l.ownerDocument||l,d=q0(d),(g=bs.get(g))&&Jd(d,g),v=v.createElement("link"),Et(v);var _=v;_._p=new Promise(function(M,B){_.onload=M,_.onerror=B}),zt(v,"link",d),r.instance=v}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(r,l),(l=r.state.preload)&&(r.state.loading&3)===0&&(s.count++,r=io.bind(s),l.addEventListener("load",r),l.addEventListener("error",r))}}var Kd=0;function $y(s,l){return s.stylesheets&&s.count===0&&oo(s,s.stylesheets),0<s.count||0<s.imgCount?function(r){var d=setTimeout(function(){if(s.stylesheets&&oo(s,s.stylesheets),s.unsuspend){var v=s.unsuspend;s.unsuspend=null,v()}},6e4+l);0<s.imgBytes&&Kd===0&&(Kd=62500*Ny());var g=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&oo(s,s.stylesheets),s.unsuspend)){var v=s.unsuspend;s.unsuspend=null,v()}},(s.imgBytes>Kd?50:800)+l);return s.unsuspend=r,function(){s.unsuspend=null,clearTimeout(d),clearTimeout(g)}}:null}function io(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)oo(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var ro=null;function oo(s,l){s.stylesheets=null,s.unsuspend!==null&&(s.count++,ro=new Map,l.forEach(Hy,s),ro=null,io.call(s))}function Hy(s,l){if(!(l.state.loading&4)){var r=ro.get(s);if(r)var d=r.get(null);else{r=new Map,ro.set(s,r);for(var g=s.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<g.length;v++){var _=g[v];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(r.set(_.dataset.precedence,_),d=_)}d&&r.set(null,d)}g=l.instance,_=g.getAttribute("data-precedence"),v=r.get(_)||d,v===d&&r.set(null,g),r.set(_,g),this.count++,d=io.bind(this),g.addEventListener("load",d),g.addEventListener("error",d),v?v.parentNode.insertBefore(g,v.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(g,s.firstChild)),l.state.loading|=4}}var Ti={$$typeof:O,Provider:null,Consumer:null,_currentValue:L,_currentValue2:L,_threadCount:0};function Gy(s,l,r,d,g,v,_,M,B){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Dl(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Dl(0),this.hiddenUpdates=Dl(null),this.identifierPrefix=d,this.onUncaughtError=g,this.onCaughtError=v,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=B,this.incompleteTransitions=new Map}function V0(s,l,r,d,g,v,_,M,B,oe,fe,xe){return s=new Gy(s,l,r,_,B,oe,fe,xe,M),l=1,v===!0&&(l|=24),v=Zt(3,null,null,l),s.current=v,v.stateNode=s,l=Tc(),l.refCount++,s.pooledCache=l,l.refCount++,v.memoizedState={element:d,isDehydrated:r,cache:l},Rc(v),s}function B0(s){return s?(s=Fl,s):Fl}function F0(s,l,r,d,g,v){g=B0(g),d.context===null?d.context=g:d.pendingContext=g,d=_n(l),d.payload={element:r},v=v===void 0?null:v,v!==null&&(d.callback=v),r=Sn(s,d,l),r!==null&&(Yt(r,s,l),ii(r,s,l))}function J0(s,l){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var r=s.retryLane;s.retryLane=r!==0&&r<l?r:l}}function Qd(s,l){J0(s,l),(s=s.alternate)&&J0(s,l)}function Y0(s){if(s.tag===13||s.tag===31){var l=al(s,67108864);l!==null&&Yt(l,s,67108864),Qd(s,67108864)}}function K0(s){if(s.tag===13||s.tag===31){var l=ns();l=vt(l);var r=al(s,l);r!==null&&Yt(r,s,l),Qd(s,l)}}var co=!0;function Vy(s,l,r,d){var g=T.T;T.T=null;var v=E.p;try{E.p=2,Xd(s,l,r,d)}finally{E.p=v,T.T=g}}function By(s,l,r,d){var g=T.T;T.T=null;var v=E.p;try{E.p=8,Xd(s,l,r,d)}finally{E.p=v,T.T=g}}function Xd(s,l,r,d){if(co){var g=Zd(d);if(g===null)Ud(s,l,d,uo,r),X0(s,d);else if(Jy(g,s,l,r,d))d.stopPropagation();else if(X0(s,d),l&4&&-1<Fy.indexOf(s)){for(;g!==null;){var v=zl(g);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var _=bt(v.pendingLanes);if(_!==0){var M=v;for(M.pendingLanes|=2,M.entangledLanes|=2;_;){var B=1<<31-Ct(_);M.entanglements[1]|=B,_&=~B}Us(v),(Ye&6)===0&&(Fr=At()+500,ji(0))}}break;case 31:case 13:M=al(v,2),M!==null&&Yt(M,v,2),Yr(),Qd(v,2)}if(v=Zd(d),v===null&&Ud(s,l,d,uo,r),v===g)break;g=v}g!==null&&d.stopPropagation()}else Ud(s,l,d,null,r)}}function Zd(s){return s=ec(s),Wd(s)}var uo=null;function Wd(s){if(uo=null,s=Il(s),s!==null){var l=c(s);if(l===null)s=null;else{var r=l.tag;if(r===13){if(s=u(l),s!==null)return s;s=null}else if(r===31){if(s=x(l),s!==null)return s;s=null}else if(r===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;s=null}else l!==s&&(s=null)}}return uo=s,null}function Q0(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Vo()){case $a:return 2;case Zi:return 8;case Rl:case Bo:return 32;case Wi:return 268435456;default:return 32}default:return 32}}var eu=!1,Ln=null,Un=null,Pn=null,ki=new Map,Ai=new Map,qn=[],Fy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function X0(s,l){switch(s){case"focusin":case"focusout":Ln=null;break;case"dragenter":case"dragleave":Un=null;break;case"mouseover":case"mouseout":Pn=null;break;case"pointerover":case"pointerout":ki.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ai.delete(l.pointerId)}}function Mi(s,l,r,d,g,v){return s===null||s.nativeEvent!==v?(s={blockedOn:l,domEventName:r,eventSystemFlags:d,nativeEvent:v,targetContainers:[g]},l!==null&&(l=zl(l),l!==null&&Y0(l)),s):(s.eventSystemFlags|=d,l=s.targetContainers,g!==null&&l.indexOf(g)===-1&&l.push(g),s)}function Jy(s,l,r,d,g){switch(l){case"focusin":return Ln=Mi(Ln,s,l,r,d,g),!0;case"dragenter":return Un=Mi(Un,s,l,r,d,g),!0;case"mouseover":return Pn=Mi(Pn,s,l,r,d,g),!0;case"pointerover":var v=g.pointerId;return ki.set(v,Mi(ki.get(v)||null,s,l,r,d,g)),!0;case"gotpointercapture":return v=g.pointerId,Ai.set(v,Mi(Ai.get(v)||null,s,l,r,d,g)),!0}return!1}function Z0(s){var l=Il(s.target);if(l!==null){var r=c(l);if(r!==null){if(l=r.tag,l===13){if(l=u(r),l!==null){s.blockedOn=l,Ke(s.priority,function(){K0(r)});return}}else if(l===31){if(l=x(r),l!==null){s.blockedOn=l,Ke(s.priority,function(){K0(r)});return}}else if(l===3&&r.stateNode.current.memoizedState.isDehydrated){s.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}s.blockedOn=null}function fo(s){if(s.blockedOn!==null)return!1;for(var l=s.targetContainers;0<l.length;){var r=Zd(s.nativeEvent);if(r===null){r=s.nativeEvent;var d=new r.constructor(r.type,r);Wo=d,r.target.dispatchEvent(d),Wo=null}else return l=zl(r),l!==null&&Y0(l),s.blockedOn=r,!1;l.shift()}return!0}function W0(s,l,r){fo(s)&&r.delete(l)}function Yy(){eu=!1,Ln!==null&&fo(Ln)&&(Ln=null),Un!==null&&fo(Un)&&(Un=null),Pn!==null&&fo(Pn)&&(Pn=null),ki.forEach(W0),Ai.forEach(W0)}function ho(s,l){s.blockedOn===l&&(s.blockedOn=null,eu||(eu=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Yy)))}var mo=null;function ex(s){mo!==s&&(mo=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){mo===s&&(mo=null);for(var l=0;l<s.length;l+=3){var r=s[l],d=s[l+1],g=s[l+2];if(typeof d!="function"){if(Wd(d||r)===null)continue;break}var v=zl(r);v!==null&&(s.splice(l,3),l-=3,Zc(v,{pending:!0,data:g,method:r.method,action:d},d,g))}}))}function pa(s){function l(B){return ho(B,s)}Ln!==null&&ho(Ln,s),Un!==null&&ho(Un,s),Pn!==null&&ho(Pn,s),ki.forEach(l),Ai.forEach(l);for(var r=0;r<qn.length;r++){var d=qn[r];d.blockedOn===s&&(d.blockedOn=null)}for(;0<qn.length&&(r=qn[0],r.blockedOn===null);)Z0(r),r.blockedOn===null&&qn.shift();if(r=(s.ownerDocument||s).$$reactFormReplay,r!=null)for(d=0;d<r.length;d+=3){var g=r[d],v=r[d+1],_=g[De]||null;if(typeof v=="function")_||ex(r);else if(_){var M=null;if(v&&v.hasAttribute("formAction")){if(g=v,_=v[De]||null)M=_.formAction;else if(Wd(g)!==null)continue}else M=_.action;typeof M=="function"?r[d+1]=M:(r.splice(d,3),d-=3),ex(r)}}}function tx(){function s(v){v.canIntercept&&v.info==="react-transition"&&v.intercept({handler:function(){return new Promise(function(_){return g=_})},focusReset:"manual",scroll:"manual"})}function l(){g!==null&&(g(),g=null),d||setTimeout(r,20)}function r(){if(!d&&!navigation.transition){var v=navigation.currentEntry;v&&v.url!=null&&navigation.navigate(v.url,{state:v.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var d=!1,g=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",l),navigation.addEventListener("navigateerror",l),setTimeout(r,100),function(){d=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",l),navigation.removeEventListener("navigateerror",l),g!==null&&(g(),g=null)}}}function tu(s){this._internalRoot=s}xo.prototype.render=tu.prototype.render=function(s){var l=this._internalRoot;if(l===null)throw Error(i(409));var r=l.current,d=ns();F0(r,d,s,l,null,null)},xo.prototype.unmount=tu.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var l=s.containerInfo;F0(s.current,2,null,s,null,null),Yr(),l[os]=null}};function xo(s){this._internalRoot=s}xo.prototype.unstable_scheduleHydration=function(s){if(s){var l=Ds();s={blockedOn:null,target:s,priority:l};for(var r=0;r<qn.length&&l!==0&&l<qn[r].priority;r++);qn.splice(r,0,s),r===0&&Z0(s)}};var sx=t.version;if(sx!=="19.2.0")throw Error(i(527,sx,"19.2.0"));E.findDOMNode=function(s){var l=s._reactInternals;if(l===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=p(l),s=s!==null?b(s):null,s=s===null?null:s.stateNode,s};var Ky={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:T,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var po=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!po.isDisabled&&po.supportsFiber)try{Zn=po.inject(Ky),Mt=po}catch{}}return Di.createRoot=function(s,l){if(!o(s))throw Error(i(299));var r=!1,d="",g=cm,v=dm,_=um;return l!=null&&(l.unstable_strictMode===!0&&(r=!0),l.identifierPrefix!==void 0&&(d=l.identifierPrefix),l.onUncaughtError!==void 0&&(g=l.onUncaughtError),l.onCaughtError!==void 0&&(v=l.onCaughtError),l.onRecoverableError!==void 0&&(_=l.onRecoverableError)),l=V0(s,1,!1,null,null,r,d,null,g,v,_,tx),s[os]=l.current,Ld(s),new tu(l)},Di.hydrateRoot=function(s,l,r){if(!o(s))throw Error(i(299));var d=!1,g="",v=cm,_=dm,M=um,B=null;return r!=null&&(r.unstable_strictMode===!0&&(d=!0),r.identifierPrefix!==void 0&&(g=r.identifierPrefix),r.onUncaughtError!==void 0&&(v=r.onUncaughtError),r.onCaughtError!==void 0&&(_=r.onCaughtError),r.onRecoverableError!==void 0&&(M=r.onRecoverableError),r.formState!==void 0&&(B=r.formState)),l=V0(s,1,!0,l,r??null,d,g,B,v,_,M,tx),l.context=B0(null),r=l.current,d=ns(),d=vt(d),g=_n(d),g.callback=null,Sn(r,g,d),r=d,l.current.lanes=r,gn(l,r),Us(l),s[os]=l.current,Ld(s),new xo(l)},Di.version="19.2.0",Di}var fx;function l1(){if(fx)return lu.exports;fx=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),lu.exports=n1(),lu.exports}var a1=l1();const i1=_g(a1);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r1=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),o1=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,a,i)=>i?i.toUpperCase():a.toLowerCase()),hx=n=>{const t=o1(n);return t.charAt(0).toUpperCase()+t.slice(1)},Cg=(...n)=>n.filter((t,a,i)=>!!t&&t.trim()!==""&&i.indexOf(t)===a).join(" ").trim(),c1=n=>{for(const t in n)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var d1={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u1=R.forwardRef(({color:n="currentColor",size:t=24,strokeWidth:a=2,absoluteStrokeWidth:i,className:o="",children:c,iconNode:u,...x},h)=>R.createElement("svg",{ref:h,...d1,width:t,height:t,stroke:n,strokeWidth:i?Number(a)*24/Number(t):a,className:Cg("lucide",o),...!c&&!c1(x)&&{"aria-hidden":"true"},...x},[...u.map(([p,b])=>R.createElement(p,b)),...Array.isArray(c)?c:[c]]));/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=(n,t)=>{const a=R.forwardRef(({className:i,...o},c)=>R.createElement(u1,{ref:c,iconNode:t,className:Cg(`lucide-${r1(hx(n))}`,`lucide-${n}`,i),...o}));return a.displayName=hx(n),a};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f1=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],kt=he("activity",f1);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h1=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],m1=he("arrow-down",h1);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x1=[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]],p1=he("arrow-left-right",x1);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g1=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Yi=he("arrow-right",g1);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b1=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],Eg=he("arrow-up-right",b1);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v1=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],Nu=he("award",v1);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y1=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],gt=he("book-open",y1);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N1=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]],As=he("brain-circuit",N1);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j1=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],Ki=he("briefcase",j1);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w1=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],Ou=he("building-2",w1);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _1=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],cn=he("calculator",_1);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S1=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],mx=he("calendar-days",S1);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C1=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Tg=he("calendar",C1);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E1=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],T1=he("chart-column",E1);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k1=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V3",key:"1lcnhd"}],["path",{d:"M19 21V9",key:"unv183"}]],$u=he("chart-no-axes-column",k1);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A1=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],Hu=he("chart-pie",A1);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M1=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],wl=he("check",M1);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R1=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Gu=he("chevron-down",R1);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D1=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],kg=he("chevron-left",D1);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I1=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Ps=he("chevron-right",I1);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z1=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Ia=he("circle-alert",z1);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L1=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]],Vu=he("circle-arrow-up",L1);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U1=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],xx=he("circle-check-big",U1);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P1=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],_t=he("circle-check",P1);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q1=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Lo=he("circle-question-mark",q1);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O1=[["path",{d:"M18 20a6 6 0 0 0-12 0",key:"1qehca"}],["circle",{cx:"12",cy:"10",r:"4",key:"1h16sb"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],$1=he("circle-user-round",O1);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H1=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],G1=he("clipboard-list",H1);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V1=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Ag=he("clock",V1);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B1=[["path",{d:"M6 16.326A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 .5 8.973",key:"1cez44"}],["path",{d:"m13 12-3 5h4l-3 5",key:"1t22er"}]],F1=he("cloud-lightning",B1);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J1=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],Bu=he("cloud",J1);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y1=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],px=he("copy",Y1);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K1=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],Q1=he("crown",K1);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X1=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],Fu=he("database",X1);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z1=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Ju=he("download",Z1);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W1=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],eN=he("external-link",W1);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tN=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 12.5 8 15l2 2.5",key:"1tg20x"}],["path",{d:"m14 12.5 2 2.5-2 2.5",key:"yinavb"}]],sN=he("file-code",tN);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nN=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]],Yu=he("file-down",nN);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lN=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]],ju=he("file-spreadsheet",lN);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aN=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],js=he("file-text",aN);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iN=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],ka=he("funnel",iN);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rN=[["path",{d:"m14 13-8.381 8.38a1 1 0 0 1-3.001-3l8.384-8.381",key:"pgg06f"}],["path",{d:"m16 16 6-6",key:"vzrcl6"}],["path",{d:"m21.5 10.5-8-8",key:"a17d9x"}],["path",{d:"m8 8 6-6",key:"18bi4p"}],["path",{d:"m8.5 7.5 8 8",key:"1oyaui"}]],oN=he("gavel",rN);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cN=[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M13 6h3a2 2 0 0 1 2 2v7",key:"1yeb86"}],["path",{d:"M11 18H8a2 2 0 0 1-2-2V9",key:"19pyzm"}]],dN=he("git-compare",cN);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uN=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],fN=he("globe",uN);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hN=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],So=he("graduation-cap",hN);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mN=[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]],xN=he("hard-drive",mN);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pN=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],gN=he("hash",pN);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bN=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],gx=he("heart",bN);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vN=[["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}]],bx=he("hexagon",vN);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yN=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],NN=he("history",yN);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jN=[["path",{d:"M5 22h14",key:"ehvnwv"}],["path",{d:"M5 2h14",key:"pdyrp9"}],["path",{d:"M17 22v-4.172a2 2 0 0 0-.586-1.414L12 12l-4.414 4.414A2 2 0 0 0 7 17.828V22",key:"1d314k"}],["path",{d:"M7 2v4.172a2 2 0 0 0 .586 1.414L12 12l4.414-4.414A2 2 0 0 0 17 6.172V2",key:"1vvvr6"}]],vx=he("hourglass",jN);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wN=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],dt=he("info",wN);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _N=[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]],SN=he("key-round",_N);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CN=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],yx=he("layers",CN);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EN=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],Nx=he("layout-dashboard",EN);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TN=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}],["path",{d:"M14 4h7",key:"3xa0d5"}],["path",{d:"M14 9h7",key:"1icrd9"}],["path",{d:"M14 15h7",key:"1mj8o2"}],["path",{d:"M14 20h7",key:"11slyb"}]],kN=he("layout-list",TN);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AN=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],MN=he("layout-grid",AN);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RN=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],Mg=he("lightbulb",RN);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DN=[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]],Co=he("link-2",DN);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IN=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],zN=he("link",IN);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LN=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],UN=he("list",LN);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PN=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Uo=he("loader-circle",PN);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qN=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],ON=he("log-in",qN);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $N=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],jo=he("lock",$N);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HN=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],GN=he("log-out",HN);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VN=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],BN=he("mail",VN);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FN=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Eo=he("map-pin",FN);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JN=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],YN=he("map",JN);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KN=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],hn=he("maximize-2",KN);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QN=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],XN=he("menu",QN);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZN=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],WN=he("message-circle",ZN);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ej=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M16.95 16.95A7 7 0 0 1 5 12v-2",key:"cqa7eg"}],["path",{d:"M18.89 13.23A7 7 0 0 0 19 12v-2",key:"16hl24"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}]],Rg=he("mic-off",ej);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tj=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],Dg=he("mic",tj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sj=[["path",{d:"M6 18h8",key:"1borvv"}],["path",{d:"M3 22h18",key:"8prr45"}],["path",{d:"M14 22a7 7 0 1 0 0-14h-1",key:"1jwaiy"}],["path",{d:"M9 14h2",key:"197e7h"}],["path",{d:"M9 12a2 2 0 0 1-2-2V6h6v4a2 2 0 0 1-2 2Z",key:"1bmzmy"}],["path",{d:"M12 6V3a1 1 0 0 0-1-1H9a1 1 0 0 0-1 1v3",key:"1drr47"}]],Ht=he("microscope",sj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nj=[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]],mn=he("minimize-2",nj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lj=[["path",{d:"M18 8V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h8",key:"10dyio"}],["path",{d:"M10 19v-3.96 3.15",key:"1irgej"}],["path",{d:"M7 19h5",key:"qswx4l"}],["rect",{width:"6",height:"10",x:"16",y:"12",rx:"2",key:"1egngj"}]],aj=he("monitor-smartphone",lj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ij=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],rj=he("moon",ij);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oj=[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M15.312 2a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586l-4.688-4.688A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2z",key:"1fd625"}]],To=he("octagon-alert",oj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cj=[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]],dj=he("paperclip",cj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uj=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],fj=he("pen-line",uj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hj=[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]],dn=he("pen-tool",hj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mj=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Ig=he("plus",mj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xj=[["path",{d:"M2 3h20",key:"91anmk"}],["path",{d:"M21 3v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V3",key:"2k9sn8"}],["path",{d:"m7 21 5-5 5 5",key:"bip4we"}]],pj=he("presentation",xj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gj=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],ys=he("printer",gj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bj=[["path",{d:"M15.39 4.39a1 1 0 0 0 1.68-.474 2.5 2.5 0 1 1 3.014 3.015 1 1 0 0 0-.474 1.68l1.683 1.682a2.414 2.414 0 0 1 0 3.414L19.61 15.39a1 1 0 0 1-1.68-.474 2.5 2.5 0 1 0-3.014 3.015 1 1 0 0 1 .474 1.68l-1.683 1.682a2.414 2.414 0 0 1-3.414 0L8.61 19.61a1 1 0 0 0-1.68.474 2.5 2.5 0 1 1-3.014-3.015 1 1 0 0 0 .474-1.68l-1.683-1.682a2.414 2.414 0 0 1 0-3.414L4.39 8.61a1 1 0 0 1 1.68.474 2.5 2.5 0 1 0 3.014-3.015 1 1 0 0 1-.474-1.68l1.683-1.682a2.414 2.414 0 0 1 3.414 0z",key:"w46dr5"}]],Aa=he("puzzle",bj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vj=[["path",{d:"M19.07 4.93A10 10 0 0 0 6.99 3.34",key:"z3du51"}],["path",{d:"M4 6h.01",key:"oypzma"}],["path",{d:"M2.29 9.62A10 10 0 1 0 21.31 8.35",key:"qzzz0"}],["path",{d:"M16.24 7.76A6 6 0 1 0 8.23 16.67",key:"1yjesh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M17.99 11.66A6 6 0 0 1 15.77 16.67",key:"1u2y91"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"m13.41 10.59 5.66-5.66",key:"mhq4k0"}]],yj=he("radar",vj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nj=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],Bi=he("refresh-ccw",Nj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jj=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],wj=he("refresh-cw",jj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _j=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Fn=he("rotate-ccw",_j);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sj=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],Cj=he("rotate-cw",Sj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ej=[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]],Jn=he("ruler",Ej);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tj=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],ws=he("save",Tj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kj=[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]],Ms=he("scale",kj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aj=[["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M18 5v16",key:"1ethyx"}],["path",{d:"m4 6 7.106-3.79a2 2 0 0 1 1.788 0L20 6",key:"zywc2d"}],["path",{d:"m6 11-3.52 2.147a1 1 0 0 0-.48.854V19a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-5a1 1 0 0 0-.48-.853L18 11",key:"1d4ql0"}],["path",{d:"M6 5v16",key:"1sn0nx"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]],ft=he("school",Aj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mj=[["path",{d:"M15 12h-5",key:"r7krc0"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]],Rj=he("scroll-text",Mj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dj=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],zg=he("search",Dj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ij=[["path",{d:"M14 17H5",key:"gfn3mx"}],["path",{d:"M19 7h-9",key:"6i9tg"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]],zj=he("settings-2",Ij);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lj=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Uj=he("settings",Lj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pj=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Lg=he("shield-check",Pj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qj=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Oj=he("shield",qj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $j=[["path",{d:"M18 7V5a1 1 0 0 0-1-1H6.5a.5.5 0 0 0-.4.8l4.5 6a2 2 0 0 1 0 2.4l-4.5 6a.5.5 0 0 0 .4.8H17a1 1 0 0 0 1-1v-2",key:"wuwx1p"}]],Ug=he("sigma",$j);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hj=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Vn=he("sparkles",Hj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gj=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Fi=he("square-check-big",Gj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vj=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Lt=he("square-pen",Vj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bj=[["path",{d:"M14 13V8.5C14 7 15 7 15 5a3 3 0 0 0-6 0c0 2 1 2 1 3.5V13",key:"i9gjdv"}],["path",{d:"M20 15.5a2.5 2.5 0 0 0-2.5-2.5h-11A2.5 2.5 0 0 0 4 15.5V17a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1z",key:"1vzg3v"}],["path",{d:"M5 22h14",key:"ehvnwv"}]],Qi=he("stamp",Bj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fj=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Pg=he("star",Fj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jj=[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]],Ku=he("stethoscope",Jj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],qs=he("target",Yj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kj=[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]],Qj=he("thumbs-up",Kj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xj=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Qu=he("trash-2",Xj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zj=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],Wj=he("trending-down",Zj);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e2=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],El=he("trending-up",e2);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t2=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],un=he("triangle-alert",t2);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s2=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],n2=he("trophy",s2);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l2=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],wu=he("upload",l2);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a2=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],i2=he("user-plus",a2);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r2=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Yn=he("user",r2);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o2=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Bn=he("users",o2);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c2=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],d2=he("video",c2);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u2=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],qg=he("wand-sparkles",u2);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f2=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],ut=he("x",f2);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h2=[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]],m2=he("youtube",h2);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x2=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Ma=he("zap",x2),p2=["  ( )","  ( )","  ( )","  ( )","  ()","  ( )","  ( )","  ( )","  (  )","  ()","  ()","  ()","  ()","  ()","  (//)","  ( )","  ( )","","  "," "," ","",""," "," "],Og=["()  ","()   ","   ","  ","",""],$g=["  ","    ","    ","    "],g2=[" "," "," "," "," "," "],b2={" ":["            .","          .","         .","         .","            .","         .","            .","           .","    (  )   .","       .","          .","        .","         .","         .","          ."]," ":["          .","       .","         .","       .","      .","       .","       .","         .","       .","     .","        .","      .","        .","      .","      ."]," ":["       .","        .","       .","      .","     .","      .","     .","     .","     .","     .","     .","     .","     .","    .","     ."]," ":["         .","         .","       (     ).","   ( )   ( )   .","       .","          .","          .","        .","         .","       .","       .","       .","        .","     .","      ( )."]," ":["          .","          .","     ( )   .","    (  )  .","            .","   (  )  .","       .","         .","       .","           .","        .","        .","      .","      .","      ."]," ":["        .","        .","       .","         .","     .","      .","         .","      (  ).","       .","       .","    (  )    .","       .","        .","    (  ).","     ."]," ":["    (    ).","       .","       .","      .","        .","      .",'  "--"   .',"       .","        .","      .","    (  )   .","      .","       .","  ()     .","      ."]," ":["         .","     (  ...)  .","         .","        .","       .","         .","     (4-5)   .","         .","      .","         .","      .","          .","         .",'  ""   ""  .',"       ."]," ":["       .","   (    )  .","          .","        .","        .","       .","        .","           .","      .",'   ""    .',"       .","        .","      .","      .","         ."]," ":["        .","   ( )  .","        .",'   "/"    .',"       .","        .","     (    ).","       .","      (   ).","        .","    .","       .","        .","       .","         ."]," ":["     ()   .","         .","        .","        (  ).","          .","        .","         .","        .",'  ""   .',"       .","     (    ).","       .","         .","         .","       ."]," ":["         .","        .","       .","       .","        .","    (    ).","      .","         .","       .","       .","      .","       .","      .","     (    ).","         ."]," ":["     .","       .","   ()    .","      ().","        .","   ()   .","     .","     .","      .","       .","        .","      .","       .","    (/)  (/)  .","        ."]," ":["        .","   (  )   .","        .","        .","      .","    (     ).","       .","       ( ).","       .","     ( ).","        .","      .","         .","        .","         ."],:["      .","       .","            .","      .","        .","      .","      (   ).","         .","       .","      .","         .","       .","       .","        .","         ."]," ":["       .","       .","       .","       .","      .","     (   ).","        (  U ).","       .","       .","      .","     .","        .","       .","      .","        ."]," ":["       .","       .","       .","     ( 5  ...).","         .","        .","       .","     .","      .","         .","       .","       .","         .","      .","      ."]," ":["          .",'     "" " " "".',"       .","       .","        .","       .","       .","        .","        .","      .","     .","    .","     .","      .","          ."],:["   (-)    (-).","      .","     .","        .","    (  ).","    (  ).","       .","      .","        .","       .","     .","      .","     .","       .","        ."],:["      .","   (     ).","      .","      .","      .","        .","      .","    .","    .","   (   ).","        .","    .","       ( ).","      .","     ."]," ":["       .","    .","        .","     .","       .","     .","      .","       .","      .","      .","    .","     (  ).","        .","      .","       ."],:["       .","      (   ...).","    .","      .","        .","     .","        .","      .","       .","      .","         .","    .","      .","      ( ).","   ."]," ":["       .","   (  )  .","       .","       .","      .","       .","   .","       .","     .","       .","     .","      .","       .","        .","       ."]," ":["        .","       .","    (   ).","     .","        .","       .","   (  )   .","      .","  (  ).","   (   ).","      .","     .","     .","      .","      ."],:["        .","      .","   (    ).","          .","      .","        .","      .","       .","         .","        .","       .","       .","     (  ).","        .","       ."],:["    (TIC)    .","   (Data Show)    .","    .","      .","        ( ).","       .","        .","         .","     .","      .","      .","     .","       .","      .","       ."],:["    ( )    .","        .","       .","     .","       .","        .","       .","      .","       .","      .","       .","       .","      .","        .","        ."],:["       .","    (     ).","         .","       .","      .","       .","       ( ).","    (    ) .","        .","       .","       .","       .","       .","     .","       ."]," ":["     (    ).","      (  ).",'  ""    .',"    .","       .","    .","    .","       .","        .","     .","     .","      .","       ( ).","         .","       ."]," ":["       .","      .","     .","    .","      .","     ( ).","    .","    .","      .","    .","      ( ).","       .","     .","      .","      ."],:["      .","   ( )  (  ).","     (    ).","     .","       .","      .","     .","      .","     .","    .","      .","          .","      .","      .","  ( )   ."],:["    ( ) .","    (  ).","   (   ).","      .","    .","      .","       .","      .","      .","     .","         .","    .","     .","       .","        ."]},ko=[{id:"plan-1",category:"",criteria:" ",indicators:["      "],score:null,improvementNotes:""},{id:"plan-2",category:"",criteria:" ",indicators:["     "],score:null,improvementNotes:""},{id:"plan-3",category:"",criteria:" ",indicators:["    "],score:null,improvementNotes:""},{id:"plan-4",category:"",criteria:" ",indicators:["       "],score:null,improvementNotes:""},{id:"plan-5",category:"",criteria:" ",indicators:["     "],score:null,improvementNotes:""},{id:"exec-1",category:"",criteria:" ",indicators:["    "],score:null,improvementNotes:""},{id:"exec-2",category:"",criteria:" ",indicators:["     21 (   )"],score:null,improvementNotes:""},{id:"exec-3",category:"",criteria:" ",indicators:["    "],score:null,improvementNotes:""},{id:"eval-1",category:"",criteria:" ",indicators:["       "],score:null,improvementNotes:""},{id:"eval-2",category:"",criteria:" ",indicators:["      "],score:null,improvementNotes:""},{id:"eval-3",category:"",criteria:" ",indicators:["     ( )"],score:null,improvementNotes:""},{id:"eval-4",category:"",criteria:" ",indicators:["        "],score:null,improvementNotes:""},{id:"eval-5",category:"",criteria:" ",indicators:["   (    )"],score:null,improvementNotes:""},{id:"eval-6",category:"",criteria:" ",indicators:["     "],score:null,improvementNotes:""},{id:"learn-meth-1",category:" ",criteria:"",indicators:["   "],score:null,improvementNotes:""},{id:"learn-meth-2",category:" ",criteria:" ",indicators:["      "],score:null,improvementNotes:""},{id:"learn-meth-3",category:" ",criteria:" ",indicators:["     "],score:null,improvementNotes:""},{id:"learn-comm-1",category:"  ",criteria:" ",indicators:["      "],score:null,improvementNotes:""},{id:"learn-comm-2",category:"  ",criteria:"",indicators:["     "],score:null,improvementNotes:""},{id:"learn-comm-3",category:"  ",criteria:"",indicators:["     "],score:null,improvementNotes:""},{id:"learn-resp-1",category:" ",criteria:" ",indicators:["      "],score:null,improvementNotes:""},{id:"learn-resp-2",category:" ",criteria:"",indicators:["      "],score:null,improvementNotes:""},{id:"learn-resp-3",category:" ",criteria:" ",indicators:["     ( )"],score:null,improvementNotes:""},{id:"env-phy-1",category:" ",criteria:" ",indicators:["     "],score:null,improvementNotes:""},{id:"env-phy-2",category:" ",criteria:"",indicators:["     "],score:null,improvementNotes:""},{id:"env-phy-3",category:" ",criteria:"",indicators:["     "],score:null,improvementNotes:""},{id:"env-disc-1",category:" ",criteria:"",indicators:["    (  )"],score:null,improvementNotes:""},{id:"env-disc-2",category:" ",criteria:"",indicators:["      "],score:null,improvementNotes:""},{id:"env-disc-3",category:" ",criteria:" ",indicators:["    ( )"],score:null,improvementNotes:""},{id:"env-part-1",category:"  ",criteria:" ",indicators:["   (  )"],score:null,improvementNotes:""},{id:"env-part-2",category:"  ",criteria:"",indicators:["   (   )"],score:null,improvementNotes:""},{id:"env-part-3",category:"  ",criteria:"",indicators:["   (  ...)"],score:null,improvementNotes:""}],v2={schoolYear:`${new Date().getFullYear()}/${new Date().getFullYear()+1}`,daira:"",municipality:"",familyStatus:"()",maidenName:"",trainingInstitute:"  ",trainingDate:"",graduationDate:"",classroomListening:" ",lighting:"",heating:"",ventilation:"",cleanliness:"",lessonPreparation:" ",preparationValue:"",otherAids:" ",boardWork:" ",documentsAndPosters:"  ",registers:"",registersUsed:"",registersMonitored:" ",scheduledPrograms:"",progression:"",duties:"",lessonExecution:" ",informationValue:"  ",objectivesAchieved:" ",studentParticipation:" ",applications:" ",applicationsSuitability:" ",notebooksCare:"",notebooksMonitored:" ",homeworkCorrection:" ",homeworkValue:"",generalAppreciation:""},y2=[" ",""," "," "," "," ","",""," "," "," "],N2=["()  ","()   ","   ","  ","","",""],j2=[" "," "," "," "," "," "],w2=[" ","  ()","   "," ","   "],jx=["","","","",""],_2=["","","",""," "],S2=[""," ","","",""],C2=[" ","  ","",""," ","   "],E2=["  ","","","   "," "],T2=["  ","  "," ( )","  ","  ","  "," "],k2=["   ","","  ","  "," ","   "],A2=["   ","  "," ","","   "," "],M2=["","","",""],R2=[" ","","","",""],D2=[" ","","  ","",""],I2=["","",""," "],z2=[""," "," ","  "],L2=["",""," ","","  "],U2=["  ","","","  ","   "," "],P2=[" ","","",""," "," "],q2=[" "," "," ","   ","     "],O2=["  ",""," ","","   ","   "],$2=[" ","",""," "],H2=["   ","","  "," ","    ","   "],G2=[" ","","","","  "],V2=[" ","","  "," ","  "],B2=[" ","",""," "," "],wx={id:"",teacherId:"",examDate:new Date().toISOString().split("T")[0],wilaya:"",district:"",school:"",city:"",inspectorName:"",directorName:"",teacherMemberName:"",appointmentDecisionNumber:"",appointmentDecisionDate:"",financialVisaNumber:"",financialVisaDate:"",contestDate:"",recruitmentType:"",university:"",lessons:[{id:"l1",order:1,subject:" ",topic:"",level:" ",timeStart:"08:00",timeEnd:"08:45",phaseLaunch:"",phaseConstruction:"",phaseInvestment:""},{id:"l2",order:2,subject:"",topic:"",level:" ",timeStart:"09:00",timeEnd:"09:45",phaseLaunch:"",phaseConstruction:"",phaseInvestment:""},{id:"l3",order:3,subject:" ",topic:"",level:" ",timeStart:"10:00",timeEnd:"10:45",phaseLaunch:"",phaseConstruction:"",phaseInvestment:""}],oralQuestions:{educationScience:"",psychology:"",legislation:""},pedagogyMark:0,oralMark:0,totalMark:0,finalDecision:"confirmed",culturalValue:"",pedagogicalValue:""},F2=[],on={id:"",teacherId:"",reportModel:"modern",inspectionDate:new Date().toISOString().split("T")[0],inspectorName:"",wilaya:"",district:"",school:"",subject:" ",topic:"",duration:"45 ",level:" ",group:"",studentCount:25,absentCount:0,observations:JSON.parse(JSON.stringify(ko)),legacyData:v2,generalAssessment:"",assessmentKeywords:"",finalMark:0,markInLetters:""},J2={id:"",inspectorName:"",rank:"  ",district:"",wilaya:"",term:"",schoolYear:`${new Date().getFullYear()}/${new Date().getFullYear()+1}`,startDate:"",endDate:"",teachersTotal:0,teachersTrainee:0,teachersTenure:0,visitsInspection:0,visitsTenure:0,visitsTraining:0,visitsTrainingBenefit:0,tasksInvestigations:0,tasksSupervision:0,days:{sun:0,mon:0,tue:0,wed:0,thu:0},ranks:{stagiere:0,primary:0,class1:0,class2:0,distinguished:0,contract:0},levels:{prep:0,year1:0,year2:0,year3:0,year4:0,year5:0},subjects:{arabic:0,math:0,islamic:0,history:0,geo:0,civics:0,science:0,art:0}},Ao=()=>Math.random().toString(36).substr(2,9),lt=n=>{if(!n)return"";const t=String(n).trim();if(t.includes("T"))return t.split("T")[0];if(typeof n=="number"&&n>2e4){const i=new Date(Math.round((n-25569)*86400*1e3));if(!isNaN(i.getTime()))return i.toISOString().split("T")[0]}const a=t.match(/^(\d{1,2})[\/\-\.](\d{1,2})[\/\-\.](\d{2,4})$/);if(a){const i=a[1].padStart(2,"0"),o=a[2].padStart(2,"0");let c=a[3];return c.length===2&&(c="20"+c),`${c}-${o}-${i}`}return/^\d{4}-\d{2}-\d{2}$/.test(t),t},ct=n=>{if(!n)return"";const t=String(n).trim();if(/^\d{4}-\d{2}-\d{2}$/.test(t)){const[a,i,o]=t.split("-");return`${a}/${i}/${o}`}return t.replace(/-/g,"/")},Y2=n=>{if(!n)return"  ";const t=n.trim().toLowerCase();return t.includes("")||t.includes("")?"    ":t.includes("")?"    ":t.includes("")||t.includes("")||t.includes("2")||t.includes(" 2")||/\b2\b/.test(t)?"    ":t.includes("")||t.includes("")||t.includes("1")||t.includes(" 1")||/\b1\b/.test(t)?"    ":"  "},K2=n=>{if(!n||n.trim()==="")return"";const t=n.trim().toLowerCase();return t.includes("")||t.includes("")||t.includes("master")?"":t.includes("")||t.includes("ens")?"()   ":t.includes("")||t.includes("ite")?"()  ":t.includes("")||t.includes("deua")?"   ":t.includes("")||t.includes(" ")||t.includes(" ")?"  ":""},Q2=n=>{if(!n)return"";const t=n.trim();return t.includes("")||t.includes(" ")?" ":t.includes("1")||t.includes("")||t.includes("")?" ":t.includes("2")||t.includes("")?" ":t.includes("3")||t.includes("")?" ":t.includes("4")||t.includes("")?" ":t.includes("5")||t.includes("")?" ":t},X2=()=>{const n=$g,t=Og,a=["","",""],i=Array.from({length:12},(w,A)=>(A+1).toString()),o=[" "," "," "," "," "," "],c=Math.max(n.length,t.length,a.length,i.length,o.length),u=[["_","_","_","_","_"]];for(let w=0;w<c;w++)u.push([n[w]||"",t[w]||"",a[w]||"",i[w]||"",o[w]||""]);const x=XLSX.utils.book_new();x.Workbook={Views:[{RTL:!0}]};const h=XLSX.utils.aoa_to_sheet(u);XLSX.utils.book_append_sheet(x,h,"Lists");const p=[" "," "," ",""," "," ","","   "," ()"," ","","  ","  "," "," "],b=XLSX.utils.aoa_to_sheet([p]);b["!views"]||(b["!views"]=[]),b["!views"].push({rightToLeft:!0}),b["!cols"]=[{wch:30},{wch:15},{wch:15},{wch:25},{wch:15},{wch:15},{wch:30},{wch:15},{wch:10},{wch:15},{wch:15},{wch:10},{wch:15},{wch:25},{wch:20}];const y=200;b["!dataValidation"]=[{sqref:`I2:I${y}`,type:"list",operator:"equal",formula1:`'Lists'!$D$2:$D$${i.length+1}`,showDropDown:!0},{sqref:`K2:K${y}`,type:"list",operator:"equal",formula1:`'Lists'!$C$2:$C$${a.length+1}`,showDropDown:!0},{sqref:`O2:O${y}`,type:"list",operator:"equal",formula1:`'Lists'!$E$2:$E$${o.length+1}`,showDropDown:!0}];const N=[1,4,5,7,9,12];for(let w=1;w<y;++w){N.forEach(H=>{const G=XLSX.utils.encode_cell({c:H,r:w});b[G]||(b[G]={t:"s",v:""})});const A=XLSX.utils.encode_cell({c:8,r:w});b[A]||(b[A]={t:"s",v:""});const I=XLSX.utils.encode_cell({c:11,r:w});b[I]||(b[I]={t:"s",v:""})}return XLSX.utils.book_append_sheet(x,b,"_"),XLSX.write(x,{bookType:"xlsx",type:"array"})},Z2=n=>{const t=XLSX.read(n,{type:"array"});let a="_";t.SheetNames.includes(a)||(t.SheetNames.length>1?a=t.SheetNames[1]:a=t.SheetNames[0]);const i=t.Sheets[a],o=XLSX.utils.sheet_to_json(i,{header:1,raw:!0});if(!o||o.length<2)return{teachers:[],reports:{}};const c=[],u={};for(let x=1;x<o.length;x++){const h=o[x];if(!h||h.length===0||!h[0])continue;const p=Ao(),b=String(h[10]||"").trim();let y="titulaire";b.includes("")?y="contractuel":b.includes("")&&(y="stagiere");const N=String(h[6]||"").trim(),w=Y2(N),A=String(h[3]||"").trim(),I=K2(A),H=String(h[13]||"").trim(),G=String(h[14]||"").trim(),F=Q2(G),O={id:p,fullName:String(h[0]).trim(),birthDate:lt(h[1]),birthPlace:String(h[2]||"").trim(),degree:I,degreeDate:lt(h[4]),recruitmentDate:lt(h[5]),rank:w,currentRankDate:lt(h[7]),echelon:String(h[8]||"").trim(),echelonDate:lt(h[9]),status:y,lastMark:parseFloat(h[11])||10,lastInspectionDate:lt(h[12]),tenureDate:""};O.fullName&&O.fullName.length>2&&(c.push(O),(H||F)&&(u[p]={...on,id:Ao(),teacherId:p,school:H,level:F,group:""}))}return{teachers:c,reports:u}},_u=(n,t,a)=>{const i=["ID","_","_","_","","_","_","","_","","_","__","_","","_"],o=["","","","_","","","","","","_","","","_","_","_"],c=["_","_","_","_","___","__","_","","","_","","","","","_","_","_","","_","","_","_","_","","","_","_","_","_","","_","_","_","_","_","__"],u=[];ko.forEach(y=>{u.push(`_${y.id}_`),u.push(`_${y.id}_`)});const x=[...i,...o,...c,...u];let h="",p="";t!=null&&t.wilaya&&(h=t.wilaya),t!=null&&t.district&&(p=t.district);const b=n.map(y=>{if(!y)return[];let N=on,w=!1;t&&t.teacherId===y.id?(N=t,w=!0):a&&a[y.id]&&(N=a[y.id],w=!0),N.wilaya&&(h=N.wilaya),N.district&&(p=N.district);const A=N.wilaya||h,I=N.district||p,H=N.legacyData||on.legacyData,G=[y.id||"",y.fullName||"",y.birthDate||"",y.birthPlace||"",y.degree||"",y.degreeDate||"",y.recruitmentDate||"",y.rank||"",y.currentRankDate||"",y.echelon||"",y.echelonDate||"",y.lastInspectionDate||"",y.lastMark||"",y.status||"",y.tenureDate||""],F=[A,I,w?N.school:"",w?N.inspectionDate:"",w?N.subject:"",w?N.topic:"",w?N.duration:"",w?N.level:"",w?N.group:"",w?N.studentCount:"",w?N.absentCount:"",w?N.generalAssessment:"",w?N.finalMark:"",w?N.markInLetters:"",w&&N.assessmentKeywords||""],O=[w&&N.reportModel||"modern",w&&N.inspectorName||"",w?H.familyStatus:"",w?H.trainingInstitute:"",w?H.trainingDate:"",w?H.graduationDate:"",w?H.schoolYear:"",w?H.daira:"",w?H.municipality:"",w?H.classroomListening:"",w?H.lighting:"",w?H.heating:"",w?H.ventilation:"",w?H.cleanliness:"",w?H.lessonPreparation:"",w?H.preparationValue:"",w?H.otherAids:"",w?H.boardWork:"",w?H.documentsAndPosters:"",w?H.registers:"",w?H.registersUsed:"",w?H.registersMonitored:"",w?H.scheduledPrograms:"",w?H.progression:"",w?H.duties:"",w?H.lessonExecution:"",w?H.informationValue:"",w?H.objectivesAchieved:"",w?H.studentParticipation:"",w?H.applications:"",w?H.applicationsSuitability:"",w?H.notebooksCare:"",w?H.notebooksMonitored:"",w?H.homeworkCorrection:"",w?H.homeworkValue:"",w?H.generalAppreciation:""],V=[];return ko.forEach(X=>{if(w&&N.observations){const ee=N.observations.find(ne=>ne.id===X.id),Q=(ee==null?void 0:ee.score)!=null?ee.score:"",se=(ee==null?void 0:ee.improvementNotes)||"";V.push(Q),V.push(se)}else V.push(""),V.push("")}),[...G,...F,...O,...V]});return[x,...b]},Hg=n=>{if(!n||n.length<2)return{teachers:[],reportsMap:{}};const t=n[0],a=t[14]&&String(t[14]).includes(""),i=a?1:0,o=t[29+i]&&(String(t[29+i]).includes("_")||String(t[29+i]).includes("Legacy")),c=o&&(String(t[51+i]).includes("")||String(t[51+i]).includes("scheduled")),u=[],x={};for(let h=1;h<n.length;h++){const p=n[h];if(!p||p.length===0)continue;const b=A=>{const I=p[A];return I==null?"":typeof I=="object"?JSON.stringify(I):String(I).trim()};if(!b(1))continue;const y=b(0)||Ao(),N={id:y,fullName:b(1),birthDate:lt(b(2)),birthPlace:b(3),degree:b(4),degreeDate:lt(b(5)),recruitmentDate:lt(b(6)),rank:b(7),currentRankDate:lt(b(8)),echelon:b(9),echelonDate:lt(b(10)),lastInspectionDate:lt(b(11)),lastMark:parseFloat(b(12))||10,status:W2(b(13)),tenureDate:a?lt(b(14)):""};if(u.push(N),b(14+i)||b(18+i)){let A,I=65+i;c?(A={familyStatus:b(31+i),trainingInstitute:b(32+i),trainingDate:lt(b(33+i)),graduationDate:lt(b(34+i)),schoolYear:b(35+i),daira:b(36+i),municipality:b(37+i),classroomListening:b(38+i),lighting:b(39+i),heating:b(40+i),ventilation:b(41+i),cleanliness:b(42+i),lessonPreparation:b(43+i),preparationValue:b(44+i),otherAids:b(45+i),boardWork:b(46+i),documentsAndPosters:b(47+i),registers:b(48+i),registersUsed:b(49+i),registersMonitored:b(50+i),scheduledPrograms:b(51+i),progression:b(52+i),duties:b(53+i),lessonExecution:b(54+i),informationValue:b(55+i),objectivesAchieved:b(56+i),studentParticipation:b(57+i),applications:b(58+i),applicationsSuitability:b(59+i),notebooksCare:b(60+i),notebooksMonitored:b(61+i),homeworkCorrection:b(62+i),homeworkValue:b(63+i),generalAppreciation:b(64+i)},I=65+i):o?(A={...on.legacyData},I=62+i):(A={...on.legacyData},I=29);const H=JSON.parse(JSON.stringify(ko));let G=I;H.forEach(F=>{const O=b(G),V=b(G+1);O==="0"||O==="1"||O==="2"?F.score=parseInt(O):F.score=null,F.improvementNotes=V||"",G+=2}),x[y]={id:Ao(),teacherId:y,reportModel:o&&b(29+i)==="legacy"?"legacy":"modern",inspectorName:o?b(30+i):"",wilaya:b(14+i),district:b(15+i),school:b(16+i),inspectionDate:lt(b(17+i)),subject:b(18+i),topic:b(19+i),duration:b(20+i),level:b(21+i),group:b(22+i),studentCount:parseInt(b(23+i))||0,absentCount:parseInt(b(24+i))||0,generalAssessment:b(25+i),finalMark:parseFloat(b(26+i))||0,markInLetters:b(27+i),assessmentKeywords:b(28+i),observations:H,legacyData:A}}}return{teachers:u,reportsMap:x}},W2=n=>{const t=String(n).trim().toLowerCase();return t.includes("")||t.includes("contract")?"contractuel":t.includes("")||t.includes("stag")?"stagiere":"titulaire"},_x=({teachers:n,reportsMap:t,onSelect:a,selectedId:i,onAddNew:o,onImport:c,onDelete:u,availableSchools:x,availableLevels:h,filterSchool:p,filterLevel:b,onSetFilterSchool:y,onSetFilterLevel:N})=>{const[w,A]=R.useState(""),[I,H]=R.useState("status"),[G,F]=R.useState({}),[O,V]=R.useState(!1),X=R.useRef(null),ee=q=>{F(Y=>({...Y,[q]:!Y[q]}))},Q=(q,Y)=>{if(Y&&Y.inspectionDate&&Y.inspectionDate.trim()!=="")return{status:null,reason:""};if(!q.lastInspectionDate)return{status:"urgent",reason:"    ( )"};const T=new Date(q.lastInspectionDate),U=Math.abs(new Date().getTime()-T.getTime())/(1e3*60*60*24*365.25);if(U>=3)return{status:"urgent",reason:` ${U.toFixed(1)}     ( 3 )`};const C=9.5+parseInt(q.echelon||"0")*.5;return q.lastMark<C?{status:"medium",reason:` (${q.lastMark})      (${C})`}:{status:null,reason:""}},se=q=>{switch(q){case"urgent":return{border:"border-r-4 border-r-rose-600 bg-rose-50/40",badgeColor:"bg-rose-100 text-rose-800 border-rose-200",label:" ",icon:Ia};case"medium":return{border:"border-r-4 border-r-orange-400 bg-orange-50/30",badgeColor:"bg-orange-100 text-orange-800 border-orange-200",label:" ",icon:Ag};default:return{border:"",badgeColor:"",label:"",icon:null}}},ne=q=>{if(q.status!=="titulaire"||!q.echelonDate||!q.echelon)return!1;const Y=new Date().getFullYear(),T=new Date(q.echelonDate);if(isNaN(T.getTime()))return!1;const E=new Date(T);E.setFullYear(T.getFullYear()+2);const L=new Date(Y,11,31);if(E>L)return!1;const $=13+parseInt(q.echelon)*.5;if(q.lastMark>=$)return!1;const C=t[q.id];if(C){const D=C.inspectionDate&&C.inspectionDate.trim()!=="",j=C.finalMark!==void 0&&C.finalMark>0;if(D&&j)return!1}return!0},P=R.useMemo(()=>n.filter(q=>q.fullName.toLowerCase().includes(w.toLowerCase())),[n,w]),ie=R.useMemo(()=>{if(I==="none")return{:P};const q={};if(P.forEach(Y=>{let T="";if(I==="status")T=Y.status==="titulaire"?"":Y.status==="contractuel"?"":"";else if(I==="rank")T=Y.rank||" ";else if(I==="priority"){const{status:E}=Q(Y,t[Y.id]);T=E==="urgent"?"  (> 3 )":E==="medium"?"  ( )":" "}q[T]||(q[T]=[]),q[T].push(Y)}),I==="priority"){const Y=["  (> 3 )","  ( )"," "],T={};return Y.forEach(E=>{q[E]&&(T[E]=q[E])}),T}return q},[P,I,t]),le=()=>{const q=X2(),Y=new Blob([q],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),T=URL.createObjectURL(Y),E=document.createElement("a");E.href=T,E.setAttribute("download","___.xlsx"),document.body.appendChild(E),E.click(),document.body.removeChild(E)},Z=q=>{var E;const Y=(E=q.target.files)==null?void 0:E[0];if(!Y)return;const T=new FileReader;T.onload=L=>{var $;const U=($=L.target)==null?void 0:$.result;try{const C=Z2(U);if(C.teachers.length>0){const D=`  ${C.teachers.length}   .
     .`;window.confirm(D)&&c(C.teachers,C.reports)}else alert("      .     .")}catch(C){console.error(C),alert("    Excel.    .")}X.current&&(X.current.value="")},T.readAsArrayBuffer(Y)};return e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsxs("div",{className:"p-3 border-b bg-white/80 backdrop-blur-sm z-10 space-y-2.5 shadow-sm",children:[e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx("input",{type:"text",placeholder:"  ...",value:w,onChange:q=>A(q.target.value),className:"w-full pl-8 pr-3 py-2 bg-gray-50 border border-gray-200 rounded-xl text-sm focus:ring-2 focus:ring-blue-500 focus:bg-white outline-none transition-all placeholder:text-gray-400"}),e.jsx(zg,{className:"absolute left-2.5 top-1/2 -translate-y-1/2 text-gray-400",size:16})]}),e.jsxs("div",{className:"flex bg-gray-100 rounded-xl p-1 gap-1 border border-gray-200",children:[e.jsx("button",{onClick:le,className:"p-1.5 rounded-lg text-gray-500 hover:text-blue-600 hover:bg-white transition-all",title:"  Excel ",children:e.jsx(Ju,{size:18})}),e.jsx("div",{className:"w-px bg-gray-300 my-1"}),e.jsx("button",{onClick:()=>{var q;return(q=X.current)==null?void 0:q.click()},className:"p-1.5 rounded-lg text-green-600 hover:bg-white hover:shadow-sm transition-all",title:"   (Excel)",children:e.jsx(ju,{size:18})}),e.jsx("input",{type:"file",ref:X,accept:".xlsx,.xls",className:"hidden",onChange:Z})]}),e.jsx("button",{onClick:o,title:"  ",className:"bg-blue-600 text-white p-2 rounded-xl shadow-lg shadow-blue-200 hover:bg-blue-700 hover:scale-105 transition-all",children:e.jsx(Ig,{size:20})})]}),e.jsx("div",{className:"flex items-center justify-between gap-2 overflow-x-auto no-scrollbar pb-1",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>V(!O),className:`p-1.5 px-3 rounded-lg flex items-center gap-1.5 text-xs font-bold transition-all border shrink-0 ${O||p||b?"bg-indigo-50 border-indigo-200 text-indigo-700":"bg-white border-gray-200 text-gray-600 hover:bg-gray-50"}`,children:[e.jsx(ka,{size:14}),e.jsx("span",{children:""}),(p||b)&&e.jsx("div",{className:"w-1.5 h-1.5 bg-indigo-500 rounded-full animate-pulse"})]}),e.jsxs("div",{className:"flex bg-gray-100/80 p-1 rounded-lg border border-gray-200 shrink-0",children:[e.jsx("button",{onClick:()=>H("none"),className:`px-2 py-0.5 text-[10px] font-bold rounded-md transition-all ${I==="none"?"bg-white text-gray-800 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:""}),e.jsx("button",{onClick:()=>H("status"),className:`px-2 py-0.5 text-[10px] font-bold rounded-md transition-all ${I==="status"?"bg-white text-gray-800 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:""}),e.jsx("button",{onClick:()=>H("priority"),className:`px-2 py-0.5 text-[10px] font-bold rounded-md transition-all ${I==="priority"?"bg-white text-gray-800 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:""})]})]})}),O&&e.jsxs("div",{className:"grid grid-cols-2 gap-2 bg-indigo-50/50 p-2 rounded-xl border border-indigo-100 animate-in slide-in-from-top-2",children:[e.jsxs("div",{className:"relative group",children:[e.jsx(ft,{size:14,className:"absolute top-2.5 right-2.5 text-indigo-400 pointer-events-none group-focus-within:text-indigo-600"}),e.jsxs("select",{value:p,onChange:q=>y(q.target.value),className:`w-full p-2 pr-8 text-[11px] rounded-lg border appearance-none focus:outline-none focus:ring-1 focus:ring-indigo-300 transition-colors cursor-pointer ${p?"bg-indigo-100 border-indigo-300 font-bold text-indigo-900":"bg-white border-gray-200 text-gray-600"}`,children:[e.jsx("option",{value:"",children:" "}),x.map(q=>e.jsx("option",{value:q,children:q},q))]})]}),e.jsxs("div",{className:"relative group",children:[e.jsx(gt,{size:14,className:"absolute top-2.5 right-2.5 text-indigo-400 pointer-events-none group-focus-within:text-indigo-600"}),e.jsxs("select",{value:b,onChange:q=>N(q.target.value),className:`w-full p-2 pr-8 text-[11px] rounded-lg border appearance-none focus:outline-none focus:ring-1 focus:ring-indigo-300 transition-colors cursor-pointer ${b?"bg-indigo-100 border-indigo-300 font-bold text-indigo-900":"bg-white border-gray-200 text-gray-600"}`,children:[e.jsx("option",{value:"",children:" "}),h.map(q=>e.jsx("option",{value:q,children:q},q))]})]})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-2 space-y-2 bg-gray-50/30 scroll-smooth",children:[Object.keys(ie).length===0&&e.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-gray-400 text-center",children:[e.jsx(Yn,{size:48,className:"mb-3 opacity-20"}),e.jsx("p",{className:"text-sm font-medium",children:"  "}),e.jsx("p",{className:"text-xs mt-1 opacity-70",children:"     "})]}),Object.entries(ie).map(([q,Y])=>e.jsxs("div",{className:"mb-2",children:[I!=="none"&&e.jsx("div",{onClick:()=>ee(q),className:"flex items-center justify-between px-3 py-1.5 mb-1 cursor-pointer hover:bg-white/80 rounded-lg select-none transition-colors group",children:e.jsxs("div",{className:"flex items-center gap-2",children:[G[q]?e.jsx(Gu,{size:14,className:"text-gray-400"}):e.jsx(Ps,{size:14,className:"text-gray-400"}),e.jsx("span",{className:"text-xs font-bold text-gray-600 group-hover:text-gray-900",children:q}),e.jsx("span",{className:"bg-gray-200 text-gray-600 text-[10px] px-1.5 rounded-full min-w-[20px] text-center",children:Y.length})]})}),e.jsx("div",{className:`${I!=="none"&&G[q]?"hidden":"block"} space-y-2`,children:Y.map(T=>{const E=ne(T),L=i===T.id,{status:U,reason:$}=Q(T,t[T.id]),C=se(U),D=C.icon;return e.jsxs("div",{onClick:()=>a(T),className:`w-full text-right p-3 rounded-xl border transition-all flex items-center justify-between gap-3 group cursor-pointer relative overflow-visible shadow-sm
                                        ${L?"bg-gradient-to-r from-blue-600 to-indigo-700 text-white border-transparent shadow-md transform scale-[1.01] z-10":`bg-white hover:border-gray-300 hover:shadow-md ${C.border}`}`,children:[U&&!L&&e.jsxs("div",{className:"absolute -top-10 left-1/2 transform -translate-x-1/2 bg-slate-800 text-white text-[10px] py-1.5 px-3 rounded shadow-lg opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none z-50 whitespace-nowrap border border-slate-600",children:[$,e.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 border-4 border-transparent border-t-slate-800"})]}),U==="urgent"&&!L&&e.jsxs("div",{className:"absolute top-2 left-2 w-2 h-2",children:[e.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-rose-400 opacity-75"}),e.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-rose-500"})]}),e.jsxs("div",{className:"flex items-center gap-3 overflow-hidden flex-1 relative z-10",children:[e.jsxs("div",{className:`w-10 h-10 rounded-full flex items-center justify-center shrink-0 font-bold text-sm transition-colors relative shadow-sm
                                                ${L?"bg-white/20 text-white border border-white/30":"bg-slate-50 text-slate-600 border border-slate-100"}`,children:[T.fullName.charAt(0),e.jsx("div",{className:`absolute -bottom-0.5 -right-0.5 w-3.5 h-3.5 rounded-full border-2 border-white flex items-center justify-center
                                                ${T.status==="titulaire"?"bg-emerald-500":T.status==="contractuel"?"bg-orange-500":"bg-blue-500"}`})]}),e.jsxs("div",{className:"overflow-hidden flex-1",children:[e.jsx("div",{className:"flex items-center justify-between mb-0.5",children:e.jsx("p",{className:`font-bold text-sm truncate ${L?"text-white":"text-gray-800"}`,children:T.fullName})}),e.jsxs("div",{className:"flex items-center gap-2",children:[!L&&C.label&&e.jsxs("div",{className:`flex items-center gap-1 px-1.5 py-0.5 rounded text-[9px] font-bold border ${C.badgeColor}`,children:[D&&e.jsx(D,{size:9}),e.jsx("span",{children:C.label})]}),e.jsx("p",{className:`text-[10px] truncate ${L?"text-blue-100":"text-gray-400"}`,children:T.rank})]})]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-1 relative z-10",children:[E&&e.jsx("div",{title:" ",children:e.jsx(Vu,{size:16,className:`${L?"text-yellow-300":"text-amber-500"} animate-pulse`})}),e.jsx("button",{onClick:j=>{j.stopPropagation(),u(T.id)},className:`p-1.5 rounded-full transition-all mt-1
                                                ${L?"text-red-200 hover:bg-white/20 hover:text-white":"text-gray-300 hover:bg-red-50 hover:text-red-500 opacity-0 group-hover:opacity-100"}`,title:"",children:e.jsx(Qu,{size:14})})]})]},T.id)})})]},q))]})]})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let ew,tw;function sw(){return{geminiUrl:ew,vertexUrl:tw}}function nw(n,t,a,i){var o,c;if(!(n!=null&&n.baseUrl)){const u=sw();return t?(o=u.vertexUrl)!==null&&o!==void 0?o:a:(c=u.geminiUrl)!==null&&c!==void 0?c:i}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class xn{}function ye(n,t){const a=/\{([^}]+)\}/g;return n.replace(a,(i,o)=>{if(Object.prototype.hasOwnProperty.call(t,o)){const c=t[o];return c!=null?String(c):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function m(n,t,a){for(let c=0;c<t.length-1;c++){const u=t[c];if(u.endsWith("[]")){const x=u.slice(0,-2);if(!(x in n))if(Array.isArray(a))n[x]=Array.from({length:a.length},()=>({}));else throw new Error(`Value must be a list given an array path ${u}`);if(Array.isArray(n[x])){const h=n[x];if(Array.isArray(a))for(let p=0;p<h.length;p++){const b=h[p];m(b,t.slice(c+1),a[p])}else for(const p of h)m(p,t.slice(c+1),a)}return}else if(u.endsWith("[0]")){const x=u.slice(0,-3);x in n||(n[x]=[{}]);const h=n[x];m(h[0],t.slice(c+1),a);return}(!n[u]||typeof n[u]!="object")&&(n[u]={}),n=n[u]}const i=t[t.length-1],o=n[i];if(o!==void 0){if(!a||typeof a=="object"&&Object.keys(a).length===0||a===o)return;if(typeof o=="object"&&typeof a=="object"&&o!==null&&a!==null)Object.assign(o,a);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof a=="object"&&a!==null&&!Array.isArray(a)?Object.assign(n,a):n[i]=a}function f(n,t,a=void 0){try{if(t.length===1&&t[0]==="_self")return n;for(let i=0;i<t.length;i++){if(typeof n!="object"||n===null)return a;const o=t[i];if(o.endsWith("[]")){const c=o.slice(0,-2);if(c in n){const u=n[c];return Array.isArray(u)?u.map(x=>f(x,t.slice(i+1),a)):a}else return a}else n=n[o]}return n}catch(i){if(i instanceof TypeError)return a;throw i}}function lw(n,t){for(const[a,i]of Object.entries(t)){const o=a.split("."),c=i.split("."),u=new Set;let x=-1;for(let h=0;h<o.length;h++)if(o[h]==="*"){x=h;break}if(x!==-1&&c.length>x)for(let h=x;h<c.length;h++){const p=c[h];p!=="*"&&!p.endsWith("[]")&&!p.endsWith("[0]")&&u.add(p)}Su(n,o,c,0,u)}}function Su(n,t,a,i,o){if(i>=t.length||typeof n!="object"||n===null)return;const c=t[i];if(c.endsWith("[]")){const u=c.slice(0,-2),x=n;if(u in x&&Array.isArray(x[u]))for(const h of x[u])Su(h,t,a,i+1,o)}else if(c==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const u=n,x=Object.keys(u).filter(p=>!p.startsWith("_")&&!o.has(p)),h={};for(const p of x)h[p]=u[p];for(const[p,b]of Object.entries(h)){const y=[];for(const N of a.slice(i))N==="*"?y.push(p):y.push(N);m(u,y,b)}for(const p of x)delete u[p]}}else{const u=n;c in u&&Su(u[c],t,a,i+1,o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Xu(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function aw(n){const t={},a=f(n,["operationName"]);a!=null&&m(t,["operationName"],a);const i=f(n,["resourceName"]);return i!=null&&m(t,["_url","resourceName"],i),t}function iw(n){const t={},a=f(n,["name"]);a!=null&&m(t,["name"],a);const i=f(n,["metadata"]);i!=null&&m(t,["metadata"],i);const o=f(n,["done"]);o!=null&&m(t,["done"],o);const c=f(n,["error"]);c!=null&&m(t,["error"],c);const u=f(n,["response","generateVideoResponse"]);return u!=null&&m(t,["response"],ow(u)),t}function rw(n){const t={},a=f(n,["name"]);a!=null&&m(t,["name"],a);const i=f(n,["metadata"]);i!=null&&m(t,["metadata"],i);const o=f(n,["done"]);o!=null&&m(t,["done"],o);const c=f(n,["error"]);c!=null&&m(t,["error"],c);const u=f(n,["response"]);return u!=null&&m(t,["response"],cw(u)),t}function ow(n){const t={},a=f(n,["generatedSamples"]);if(a!=null){let c=a;Array.isArray(c)&&(c=c.map(u=>dw(u))),m(t,["generatedVideos"],c)}const i=f(n,["raiMediaFilteredCount"]);i!=null&&m(t,["raiMediaFilteredCount"],i);const o=f(n,["raiMediaFilteredReasons"]);return o!=null&&m(t,["raiMediaFilteredReasons"],o),t}function cw(n){const t={},a=f(n,["videos"]);if(a!=null){let c=a;Array.isArray(c)&&(c=c.map(u=>uw(u))),m(t,["generatedVideos"],c)}const i=f(n,["raiMediaFilteredCount"]);i!=null&&m(t,["raiMediaFilteredCount"],i);const o=f(n,["raiMediaFilteredReasons"]);return o!=null&&m(t,["raiMediaFilteredReasons"],o),t}function dw(n){const t={},a=f(n,["video"]);return a!=null&&m(t,["video"],gw(a)),t}function uw(n){const t={},a=f(n,["_self"]);return a!=null&&m(t,["video"],bw(a)),t}function fw(n){const t={},a=f(n,["operationName"]);return a!=null&&m(t,["_url","operationName"],a),t}function hw(n){const t={},a=f(n,["operationName"]);return a!=null&&m(t,["_url","operationName"],a),t}function mw(n){const t={},a=f(n,["name"]);a!=null&&m(t,["name"],a);const i=f(n,["metadata"]);i!=null&&m(t,["metadata"],i);const o=f(n,["done"]);o!=null&&m(t,["done"],o);const c=f(n,["error"]);c!=null&&m(t,["error"],c);const u=f(n,["response"]);return u!=null&&m(t,["response"],xw(u)),t}function xw(n){const t={},a=f(n,["sdkHttpResponse"]);a!=null&&m(t,["sdkHttpResponse"],a);const i=f(n,["parent"]);i!=null&&m(t,["parent"],i);const o=f(n,["documentName"]);return o!=null&&m(t,["documentName"],o),t}function Gg(n){const t={},a=f(n,["name"]);a!=null&&m(t,["name"],a);const i=f(n,["metadata"]);i!=null&&m(t,["metadata"],i);const o=f(n,["done"]);o!=null&&m(t,["done"],o);const c=f(n,["error"]);c!=null&&m(t,["error"],c);const u=f(n,["response"]);return u!=null&&m(t,["response"],pw(u)),t}function pw(n){const t={},a=f(n,["sdkHttpResponse"]);a!=null&&m(t,["sdkHttpResponse"],a);const i=f(n,["parent"]);i!=null&&m(t,["parent"],i);const o=f(n,["documentName"]);return o!=null&&m(t,["documentName"],o),t}function gw(n){const t={},a=f(n,["uri"]);a!=null&&m(t,["uri"],a);const i=f(n,["encodedVideo"]);i!=null&&m(t,["videoBytes"],Xu(i));const o=f(n,["encoding"]);return o!=null&&m(t,["mimeType"],o),t}function bw(n){const t={},a=f(n,["gcsUri"]);a!=null&&m(t,["uri"],a);const i=f(n,["bytesBase64Encoded"]);i!=null&&m(t,["videoBytes"],Xu(i));const o=f(n,["mimeType"]);return o!=null&&m(t,["mimeType"],o),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Sx;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Sx||(Sx={}));var Cx;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(Cx||(Cx={}));var Ex;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(Ex||(Ex={}));var Gn;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(Gn||(Gn={}));var Tx;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(Tx||(Tx={}));var kx;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(kx||(kx={}));var Ax;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(Ax||(Ax={}));var Mx;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(Mx||(Mx={}));var Rx;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(Rx||(Rx={}));var Dx;(function(n){n.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",n.LOW="LOW",n.HIGH="HIGH"})(Dx||(Dx={}));var Ix;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(Ix||(Ix={}));var zx;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(zx||(zx={}));var Lx;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(Lx||(Lx={}));var Ux;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE"})(Ux||(Ux={}));var Px;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(Px||(Px={}));var qx;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(qx||(qx={}));var Ox;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Ox||(Ox={}));var $x;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})($x||($x={}));var Hx;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Hx||(Hx={}));var Mo;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(Mo||(Mo={}));var Gx;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Gx||(Gx={}));var Vx;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Vx||(Vx={}));var Bx;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Bx||(Bx={}));var Cu;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Cu||(Cu={}));var Fx;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(Fx||(Fx={}));var Jx;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Jx||(Jx={}));var Yx;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(Yx||(Yx={}));var Kx;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(Kx||(Kx={}));var Qx;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(Qx||(Qx={}));var Xx;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Xx||(Xx={}));var Zx;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(Zx||(Zx={}));var Wx;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(Wx||(Wx={}));var ep;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(ep||(ep={}));var tp;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(tp||(tp={}));var sp;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(sp||(sp={}));var np;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(np||(np={}));var lp;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(lp||(lp={}));var ap;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(ap||(ap={}));var ip;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(ip||(ip={}));var rp;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(rp||(rp={}));var op;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(op||(op={}));var cp;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(cp||(cp={}));var dp;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING"})(dp||(dp={}));var up;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(up||(up={}));var fp;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(fp||(fp={}));var hp;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(hp||(hp={}));var mp;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(mp||(mp={}));var xp;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(xp||(xp={}));var pp;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(pp||(pp={}));var gp;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(gp||(gp={}));var bp;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(bp||(bp={}));var vp;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(vp||(vp={}));var yp;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(yp||(yp={}));var Np;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(Np||(Np={}));var _a;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(_a||(_a={}));class Eu{constructor(t){const a={};for(const i of t.headers.entries())a[i[0]]=i[1];this.headers=a,this.responseInternal=t}json(){return this.responseInternal.json()}}class Ii{get text(){var t,a,i,o,c,u,x,h;if(((o=(i=(a=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||a===void 0?void 0:a.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let p="",b=!1;const y=[];for(const N of(h=(x=(u=(c=this.candidates)===null||c===void 0?void 0:c[0])===null||u===void 0?void 0:u.content)===null||x===void 0?void 0:x.parts)!==null&&h!==void 0?h:[]){for(const[w,A]of Object.entries(N))w!=="text"&&w!=="thought"&&w!=="thoughtSignature"&&(A!==null||A!==void 0)&&y.push(w);if(typeof N.text=="string"){if(typeof N.thought=="boolean"&&N.thought)continue;b=!0,p+=N.text}}return y.length>0&&console.warn(`there are non-text parts ${y} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),b?p:void 0}get data(){var t,a,i,o,c,u,x,h;if(((o=(i=(a=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||a===void 0?void 0:a.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let p="";const b=[];for(const y of(h=(x=(u=(c=this.candidates)===null||c===void 0?void 0:c[0])===null||u===void 0?void 0:u.content)===null||x===void 0?void 0:x.parts)!==null&&h!==void 0?h:[]){for(const[N,w]of Object.entries(y))N!=="inlineData"&&(w!==null||w!==void 0)&&b.push(N);y.inlineData&&typeof y.inlineData.data=="string"&&(p+=atob(y.inlineData.data))}return b.length>0&&console.warn(`there are non-data parts ${b} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),p.length>0?btoa(p):void 0}get functionCalls(){var t,a,i,o,c,u,x,h;if(((o=(i=(a=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||a===void 0?void 0:a.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const p=(h=(x=(u=(c=this.candidates)===null||c===void 0?void 0:c[0])===null||u===void 0?void 0:u.content)===null||x===void 0?void 0:x.parts)===null||h===void 0?void 0:h.filter(b=>b.functionCall).map(b=>b.functionCall).filter(b=>b!==void 0);if((p==null?void 0:p.length)!==0)return p}get executableCode(){var t,a,i,o,c,u,x,h,p;if(((o=(i=(a=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||a===void 0?void 0:a.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const b=(h=(x=(u=(c=this.candidates)===null||c===void 0?void 0:c[0])===null||u===void 0?void 0:u.content)===null||x===void 0?void 0:x.parts)===null||h===void 0?void 0:h.filter(y=>y.executableCode).map(y=>y.executableCode).filter(y=>y!==void 0);if((b==null?void 0:b.length)!==0)return(p=b==null?void 0:b[0])===null||p===void 0?void 0:p.code}get codeExecutionResult(){var t,a,i,o,c,u,x,h,p;if(((o=(i=(a=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||a===void 0?void 0:a.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const b=(h=(x=(u=(c=this.candidates)===null||c===void 0?void 0:c[0])===null||u===void 0?void 0:u.content)===null||x===void 0?void 0:x.parts)===null||h===void 0?void 0:h.filter(y=>y.codeExecutionResult).map(y=>y.codeExecutionResult).filter(y=>y!==void 0);if((b==null?void 0:b.length)!==0)return(p=b==null?void 0:b[0])===null||p===void 0?void 0:p.output}}class jp{}class wp{}class vw{}class yw{}class Nw{}class jw{}class _p{}class Sp{}class Cp{}class ww{}class Ro{_fromAPIResponse({apiResponse:t,_isVertexAI:a}){const i=new Ro;let o;const c=t;return a?o=rw(c):o=iw(c),Object.assign(i,o),i}}class Ep{}class Tp{}class kp{}class _w{}class Sw{}class Cw{}class Zu{_fromAPIResponse({apiResponse:t,_isVertexAI:a}){const i=new Zu,c=mw(t);return Object.assign(i,c),i}}class Ew{}class Tw{}class kw{}class Ap{}class Aw{get text(){var t,a,i;let o="",c=!1;const u=[];for(const x of(i=(a=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||a===void 0?void 0:a.parts)!==null&&i!==void 0?i:[]){for(const[h,p]of Object.entries(x))h!=="text"&&h!=="thought"&&p!==null&&u.push(h);if(typeof x.text=="string"){if(typeof x.thought=="boolean"&&x.thought)continue;c=!0,o+=x.text}}return u.length>0&&console.warn(`there are non-text parts ${u} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),c?o:void 0}get data(){var t,a,i;let o="";const c=[];for(const u of(i=(a=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||a===void 0?void 0:a.parts)!==null&&i!==void 0?i:[]){for(const[x,h]of Object.entries(u))x!=="inlineData"&&h!==null&&c.push(x);u.inlineData&&typeof u.inlineData.data=="string"&&(o+=atob(u.inlineData.data))}return c.length>0&&console.warn(`there are non-data parts ${c} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}}class Mw{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Wu{_fromAPIResponse({apiResponse:t,_isVertexAI:a}){const i=new Wu,c=Gg(t);return Object.assign(i,c),i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Fe(n,t){if(!t||typeof t!="string")throw new Error("model is required and must be a string");if(t.includes("..")||t.includes("?")||t.includes("&"))throw new Error("invalid model parameter");if(n.isVertexAI()){if(t.startsWith("publishers/")||t.startsWith("projects/")||t.startsWith("models/"))return t;if(t.indexOf("/")>=0){const a=t.split("/",2);return`publishers/${a[0]}/models/${a[1]}`}else return`publishers/google/models/${t}`}else return t.startsWith("models/")||t.startsWith("tunedModels/")?t:`models/${t}`}function Vg(n,t){const a=Fe(n,t);return a?a.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${a}`:a.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${a}`:a:""}function Bg(n){return Array.isArray(n)?n.map(t=>Do(t)):[Do(n)]}function Do(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function Fg(n){const t=Do(n);if(t.mimeType&&t.mimeType.startsWith("image/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function Jg(n){const t=Do(n);if(t.mimeType&&t.mimeType.startsWith("audio/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function Mp(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function Yg(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(t=>Mp(t)):[Mp(n)]}function Tu(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function Rp(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function Dp(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function Ot(n){if(n==null)throw new Error("ContentUnion is required");return Tu(n)?n:{role:"user",parts:Yg(n)}}function ef(n,t){if(!t)return[];if(n.isVertexAI()&&Array.isArray(t))return t.flatMap(a=>{const i=Ot(a);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(n.isVertexAI()){const a=Ot(t);return a.parts&&a.parts.length>0&&a.parts[0].text!==void 0?[a.parts[0].text]:[]}return Array.isArray(t)?t.map(a=>Ot(a)):[Ot(t)]}function Ns(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(Rp(n)||Dp(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Ot(n)]}const t=[],a=[],i=Tu(n[0]);for(const o of n){const c=Tu(o);if(c!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(c)t.push(o);else{if(Rp(o)||Dp(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");a.push(o)}}return i||t.push({role:"user",parts:Yg(a)}),t}function Rw(n,t){n.includes("null")&&(t.nullable=!0);const a=n.filter(i=>i!=="null");if(a.length===1)t.type=Object.values(Gn).includes(a[0].toUpperCase())?a[0].toUpperCase():Gn.TYPE_UNSPECIFIED;else{t.anyOf=[];for(const i of a)t.anyOf.push({type:Object.values(Gn).includes(i.toUpperCase())?i.toUpperCase():Gn.TYPE_UNSPECIFIED})}}function Sa(n){const t={},a=["items"],i=["anyOf"],o=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const c=n.anyOf;c!=null&&c.length==2&&(c[0].type==="null"?(t.nullable=!0,n=c[1]):c[1].type==="null"&&(t.nullable=!0,n=c[0])),n.type instanceof Array&&Rw(n.type,t);for(const[u,x]of Object.entries(n))if(x!=null)if(u=="type"){if(x==="null")throw new Error("type: null can not be the only possible type for the field.");if(x instanceof Array)continue;t.type=Object.values(Gn).includes(x.toUpperCase())?x.toUpperCase():Gn.TYPE_UNSPECIFIED}else if(a.includes(u))t[u]=Sa(x);else if(i.includes(u)){const h=[];for(const p of x){if(p.type=="null"){t.nullable=!0;continue}h.push(Sa(p))}t[u]=h}else if(o.includes(u)){const h={};for(const[p,b]of Object.entries(x))h[p]=Sa(b);t[u]=h}else{if(u==="additionalProperties")continue;t[u]=x}return t}function tf(n){return Sa(n)}function sf(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function nf(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function za(n){if(n.functionDeclarations)for(const t of n.functionDeclarations)t.parameters&&(Object.keys(t.parameters).includes("$schema")?t.parametersJsonSchema||(t.parametersJsonSchema=t.parameters,delete t.parameters):t.parameters=Sa(t.parameters)),t.response&&(Object.keys(t.response).includes("$schema")?t.responseJsonSchema||(t.responseJsonSchema=t.response,delete t.response):t.response=Sa(t.response));return n}function La(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const t=[];for(const a of n)t.push(a);return t}function Dw(n,t,a,i=1){const o=!t.startsWith(`${a}/`)&&t.split("/").length===i;return n.isVertexAI()?t.startsWith("projects/")?t:t.startsWith("locations/")?`projects/${n.getProject()}/${t}`:t.startsWith(`${a}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:o?`projects/${n.getProject()}/locations/${n.getLocation()}/${a}/${t}`:t:o?`${a}/${t}`:t}function pn(n,t){if(typeof t!="string")throw new Error("name must be a string");return Dw(n,t,"cachedContents")}function Kg(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function Kn(n){return Xu(n)}function Iw(n){return n!=null&&typeof n=="object"&&"name"in n}function zw(n){return n!=null&&typeof n=="object"&&"video"in n}function Lw(n){return n!=null&&typeof n=="object"&&"uri"in n}function Qg(n){var t;let a;if(Iw(n)&&(a=n.name),!(Lw(n)&&(a=n.uri,a===void 0))&&!(zw(n)&&(a=(t=n.video)===null||t===void 0?void 0:t.uri,a===void 0))){if(typeof n=="string"&&(a=n),a===void 0)throw new Error("Could not extract file name from the provided input.");if(a.startsWith("https://")){const o=a.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${a}`);a=o[0]}else a.startsWith("files/")&&(a=a.split("files/")[1]);return a}}function Xg(n,t){let a;return n.isVertexAI()?a=t?"publishers/google/models":"models":a=t?"models":"tunedModels",a}function Zg(n){for(const t of["models","tunedModels","publisherModels"])if(Uw(n,t))return n[t];return[]}function Uw(n,t){return n!==null&&typeof n=="object"&&t in n}function Pw(n,t={}){const a=n,i={name:a.name,description:a.description,parametersJsonSchema:a.inputSchema};return a.outputSchema&&(i.responseJsonSchema=a.outputSchema),t.behavior&&(i.behavior=t.behavior),{functionDeclarations:[i]}}function qw(n,t={}){const a=[],i=new Set;for(const o of n){const c=o.name;if(i.has(c))throw new Error(`Duplicate function name ${c} found in MCP tools. Please ensure function names are unique.`);i.add(c);const u=Pw(o,t);u.functionDeclarations&&a.push(...u.functionDeclarations)}return{functionDeclarations:a}}function Wg(n,t){let a;if(typeof t=="string")if(n.isVertexAI())if(t.startsWith("gs://"))a={format:"jsonl",gcsUri:[t]};else if(t.startsWith("bq://"))a={format:"bigquery",bigqueryUri:t};else throw new Error(`Unsupported string source for Vertex AI: ${t}`);else if(t.startsWith("files/"))a={fileName:t};else throw new Error(`Unsupported string source for Gemini API: ${t}`);else if(Array.isArray(t)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");a={inlinedRequests:t}}else a=t;const i=[a.gcsUri,a.bigqueryUri].filter(Boolean).length,o=[a.inlinedRequests,a.fileName].filter(Boolean).length;if(n.isVertexAI()){if(o>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||o!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return a}function Ow(n){if(typeof n!="string")return n;const t=n;if(t.startsWith("gs://"))return{format:"jsonl",gcsUri:t};if(t.startsWith("bq://"))return{format:"bigquery",bigqueryUri:t};throw new Error(`Unsupported destination: ${t}`)}function eb(n){if(typeof n!="object"||n===null)return{};const t=n,a=t.inlinedResponses;if(typeof a!="object"||a===null)return n;const o=a.inlinedResponses;if(!Array.isArray(o)||o.length===0)return n;let c=!1;for(const u of o){if(typeof u!="object"||u===null)continue;const h=u.response;if(typeof h!="object"||h===null)continue;if(h.embedding!==void 0){c=!0;break}}return c&&(t.inlinedEmbedContentResponses=t.inlinedResponses,delete t.inlinedResponses),n}function Ua(n,t){const a=t;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(a))return a.split("/").pop();throw new Error(`Invalid batch job name: ${a}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(a))return a.split("/").pop();if(/^\d+$/.test(a))return a;throw new Error(`Invalid batch job name: ${a}.`)}function tb(n){const t=n;return t==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":t==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":t==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":t==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":t==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":t==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":t==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $w(n){const t={},a=f(n,["responsesFile"]);a!=null&&m(t,["fileName"],a);const i=f(n,["inlinedResponses","inlinedResponses"]);if(i!=null){let c=i;Array.isArray(c)&&(c=c.map(u=>N_(u))),m(t,["inlinedResponses"],c)}const o=f(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(u=>u)),m(t,["inlinedEmbedContentResponses"],c)}return t}function Hw(n){const t={},a=f(n,["predictionsFormat"]);a!=null&&m(t,["format"],a);const i=f(n,["gcsDestination","outputUriPrefix"]);i!=null&&m(t,["gcsUri"],i);const o=f(n,["bigqueryDestination","outputUri"]);return o!=null&&m(t,["bigqueryUri"],o),t}function Gw(n){const t={},a=f(n,["format"]);a!=null&&m(t,["predictionsFormat"],a);const i=f(n,["gcsUri"]);i!=null&&m(t,["gcsDestination","outputUriPrefix"],i);const o=f(n,["bigqueryUri"]);if(o!=null&&m(t,["bigqueryDestination","outputUri"],o),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(f(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return t}function wo(n){const t={},a=f(n,["name"]);a!=null&&m(t,["name"],a);const i=f(n,["metadata","displayName"]);i!=null&&m(t,["displayName"],i);const o=f(n,["metadata","state"]);o!=null&&m(t,["state"],tb(o));const c=f(n,["metadata","createTime"]);c!=null&&m(t,["createTime"],c);const u=f(n,["metadata","endTime"]);u!=null&&m(t,["endTime"],u);const x=f(n,["metadata","updateTime"]);x!=null&&m(t,["updateTime"],x);const h=f(n,["metadata","model"]);h!=null&&m(t,["model"],h);const p=f(n,["metadata","output"]);return p!=null&&m(t,["dest"],$w(eb(p))),t}function ku(n){const t={},a=f(n,["name"]);a!=null&&m(t,["name"],a);const i=f(n,["displayName"]);i!=null&&m(t,["displayName"],i);const o=f(n,["state"]);o!=null&&m(t,["state"],tb(o));const c=f(n,["error"]);c!=null&&m(t,["error"],c);const u=f(n,["createTime"]);u!=null&&m(t,["createTime"],u);const x=f(n,["startTime"]);x!=null&&m(t,["startTime"],x);const h=f(n,["endTime"]);h!=null&&m(t,["endTime"],h);const p=f(n,["updateTime"]);p!=null&&m(t,["updateTime"],p);const b=f(n,["model"]);b!=null&&m(t,["model"],b);const y=f(n,["inputConfig"]);y!=null&&m(t,["src"],Vw(y));const N=f(n,["outputConfig"]);N!=null&&m(t,["dest"],Hw(eb(N)));const w=f(n,["completionStats"]);return w!=null&&m(t,["completionStats"],w),t}function Vw(n){const t={},a=f(n,["instancesFormat"]);a!=null&&m(t,["format"],a);const i=f(n,["gcsSource","uris"]);i!=null&&m(t,["gcsUri"],i);const o=f(n,["bigquerySource","inputUri"]);return o!=null&&m(t,["bigqueryUri"],o),t}function Bw(n,t){const a={};if(f(t,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(f(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(t,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=f(t,["fileName"]);i!=null&&m(a,["fileName"],i);const o=f(t,["inlinedRequests"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(u=>y_(n,u))),m(a,["requests","requests"],c)}return a}function Fw(n){const t={},a=f(n,["format"]);a!=null&&m(t,["instancesFormat"],a);const i=f(n,["gcsUri"]);i!=null&&m(t,["gcsSource","uris"],i);const o=f(n,["bigqueryUri"]);if(o!=null&&m(t,["bigquerySource","inputUri"],o),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return t}function Jw(n){const t={},a=f(n,["data"]);if(a!=null&&m(t,["data"],a),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(n,["mimeType"]);return i!=null&&m(t,["mimeType"],i),t}function Yw(n,t){const a={},i=f(t,["name"]);return i!=null&&m(a,["_url","name"],Ua(n,i)),a}function Kw(n,t){const a={},i=f(t,["name"]);return i!=null&&m(a,["_url","name"],Ua(n,i)),a}function Qw(n){const t={},a=f(n,["content"]);a!=null&&m(t,["content"],a);const i=f(n,["citationMetadata"]);i!=null&&m(t,["citationMetadata"],Xw(i));const o=f(n,["tokenCount"]);o!=null&&m(t,["tokenCount"],o);const c=f(n,["finishReason"]);c!=null&&m(t,["finishReason"],c);const u=f(n,["avgLogprobs"]);u!=null&&m(t,["avgLogprobs"],u);const x=f(n,["groundingMetadata"]);x!=null&&m(t,["groundingMetadata"],x);const h=f(n,["index"]);h!=null&&m(t,["index"],h);const p=f(n,["logprobsResult"]);p!=null&&m(t,["logprobsResult"],p);const b=f(n,["safetyRatings"]);if(b!=null){let N=b;Array.isArray(N)&&(N=N.map(w=>w)),m(t,["safetyRatings"],N)}const y=f(n,["urlContextMetadata"]);return y!=null&&m(t,["urlContextMetadata"],y),t}function Xw(n){const t={},a=f(n,["citationSources"]);if(a!=null){let i=a;Array.isArray(i)&&(i=i.map(o=>o)),m(t,["citations"],i)}return t}function sb(n){const t={},a=f(n,["parts"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(c=>T_(c))),m(t,["parts"],o)}const i=f(n,["role"]);return i!=null&&m(t,["role"],i),t}function Zw(n,t){const a={},i=f(n,["displayName"]);if(t!==void 0&&i!=null&&m(t,["batch","displayName"],i),f(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return a}function Ww(n,t){const a={},i=f(n,["displayName"]);t!==void 0&&i!=null&&m(t,["displayName"],i);const o=f(n,["dest"]);return t!==void 0&&o!=null&&m(t,["outputConfig"],Gw(Ow(o))),a}function Ip(n,t){const a={},i=f(t,["model"]);i!=null&&m(a,["_url","model"],Fe(n,i));const o=f(t,["src"]);o!=null&&m(a,["batch","inputConfig"],Bw(n,Wg(n,o)));const c=f(t,["config"]);return c!=null&&Zw(c,a),a}function e_(n,t){const a={},i=f(t,["model"]);i!=null&&m(a,["model"],Fe(n,i));const o=f(t,["src"]);o!=null&&m(a,["inputConfig"],Fw(Wg(n,o)));const c=f(t,["config"]);return c!=null&&Ww(c,a),a}function t_(n,t){const a={},i=f(n,["displayName"]);return t!==void 0&&i!=null&&m(t,["batch","displayName"],i),a}function s_(n,t){const a={},i=f(t,["model"]);i!=null&&m(a,["_url","model"],Fe(n,i));const o=f(t,["src"]);o!=null&&m(a,["batch","inputConfig"],c_(n,o));const c=f(t,["config"]);return c!=null&&t_(c,a),a}function n_(n,t){const a={},i=f(t,["name"]);return i!=null&&m(a,["_url","name"],Ua(n,i)),a}function l_(n,t){const a={},i=f(t,["name"]);return i!=null&&m(a,["_url","name"],Ua(n,i)),a}function a_(n){const t={},a=f(n,["sdkHttpResponse"]);a!=null&&m(t,["sdkHttpResponse"],a);const i=f(n,["name"]);i!=null&&m(t,["name"],i);const o=f(n,["done"]);o!=null&&m(t,["done"],o);const c=f(n,["error"]);return c!=null&&m(t,["error"],c),t}function i_(n){const t={},a=f(n,["sdkHttpResponse"]);a!=null&&m(t,["sdkHttpResponse"],a);const i=f(n,["name"]);i!=null&&m(t,["name"],i);const o=f(n,["done"]);o!=null&&m(t,["done"],o);const c=f(n,["error"]);return c!=null&&m(t,["error"],c),t}function r_(n,t){const a={},i=f(t,["contents"]);if(i!=null){let c=ef(n,i);Array.isArray(c)&&(c=c.map(u=>u)),m(a,["requests[]","request","content"],c)}const o=f(t,["config"]);return o!=null&&(m(a,["_self"],o_(o,a)),lw(a,{"requests[].*":"requests[].request.*"})),a}function o_(n,t){const a={},i=f(n,["taskType"]);t!==void 0&&i!=null&&m(t,["requests[]","taskType"],i);const o=f(n,["title"]);t!==void 0&&o!=null&&m(t,["requests[]","title"],o);const c=f(n,["outputDimensionality"]);if(t!==void 0&&c!=null&&m(t,["requests[]","outputDimensionality"],c),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return a}function c_(n,t){const a={},i=f(t,["fileName"]);i!=null&&m(a,["file_name"],i);const o=f(t,["inlinedRequests"]);return o!=null&&m(a,["requests"],r_(n,o)),a}function d_(n){const t={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const a=f(n,["fileUri"]);a!=null&&m(t,["fileUri"],a);const i=f(n,["mimeType"]);return i!=null&&m(t,["mimeType"],i),t}function u_(n){const t={},a=f(n,["id"]);a!=null&&m(t,["id"],a);const i=f(n,["args"]);i!=null&&m(t,["args"],i);const o=f(n,["name"]);if(o!=null&&m(t,["name"],o),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function f_(n){const t={},a=f(n,["mode"]);a!=null&&m(t,["mode"],a);const i=f(n,["allowedFunctionNames"]);if(i!=null&&m(t,["allowedFunctionNames"],i),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function h_(n,t,a){const i={},o=f(t,["systemInstruction"]);a!==void 0&&o!=null&&m(a,["systemInstruction"],sb(Ot(o)));const c=f(t,["temperature"]);c!=null&&m(i,["temperature"],c);const u=f(t,["topP"]);u!=null&&m(i,["topP"],u);const x=f(t,["topK"]);x!=null&&m(i,["topK"],x);const h=f(t,["candidateCount"]);h!=null&&m(i,["candidateCount"],h);const p=f(t,["maxOutputTokens"]);p!=null&&m(i,["maxOutputTokens"],p);const b=f(t,["stopSequences"]);b!=null&&m(i,["stopSequences"],b);const y=f(t,["responseLogprobs"]);y!=null&&m(i,["responseLogprobs"],y);const N=f(t,["logprobs"]);N!=null&&m(i,["logprobs"],N);const w=f(t,["presencePenalty"]);w!=null&&m(i,["presencePenalty"],w);const A=f(t,["frequencyPenalty"]);A!=null&&m(i,["frequencyPenalty"],A);const I=f(t,["seed"]);I!=null&&m(i,["seed"],I);const H=f(t,["responseMimeType"]);H!=null&&m(i,["responseMimeType"],H);const G=f(t,["responseSchema"]);G!=null&&m(i,["responseSchema"],tf(G));const F=f(t,["responseJsonSchema"]);if(F!=null&&m(i,["responseJsonSchema"],F),f(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const O=f(t,["safetySettings"]);if(a!==void 0&&O!=null){let le=O;Array.isArray(le)&&(le=le.map(Z=>k_(Z))),m(a,["safetySettings"],le)}const V=f(t,["tools"]);if(a!==void 0&&V!=null){let le=La(V);Array.isArray(le)&&(le=le.map(Z=>M_(za(Z)))),m(a,["tools"],le)}const X=f(t,["toolConfig"]);if(a!==void 0&&X!=null&&m(a,["toolConfig"],A_(X)),f(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const ee=f(t,["cachedContent"]);a!==void 0&&ee!=null&&m(a,["cachedContent"],pn(n,ee));const Q=f(t,["responseModalities"]);Q!=null&&m(i,["responseModalities"],Q);const se=f(t,["mediaResolution"]);se!=null&&m(i,["mediaResolution"],se);const ne=f(t,["speechConfig"]);if(ne!=null&&m(i,["speechConfig"],sf(ne)),f(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const P=f(t,["thinkingConfig"]);P!=null&&m(i,["thinkingConfig"],P);const ie=f(t,["imageConfig"]);return ie!=null&&m(i,["imageConfig"],v_(ie)),i}function m_(n){const t={},a=f(n,["sdkHttpResponse"]);a!=null&&m(t,["sdkHttpResponse"],a);const i=f(n,["candidates"]);if(i!=null){let h=i;Array.isArray(h)&&(h=h.map(p=>Qw(p))),m(t,["candidates"],h)}const o=f(n,["modelVersion"]);o!=null&&m(t,["modelVersion"],o);const c=f(n,["promptFeedback"]);c!=null&&m(t,["promptFeedback"],c);const u=f(n,["responseId"]);u!=null&&m(t,["responseId"],u);const x=f(n,["usageMetadata"]);return x!=null&&m(t,["usageMetadata"],x),t}function x_(n,t){const a={},i=f(t,["name"]);return i!=null&&m(a,["_url","name"],Ua(n,i)),a}function p_(n,t){const a={},i=f(t,["name"]);return i!=null&&m(a,["_url","name"],Ua(n,i)),a}function g_(n){const t={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const a=f(n,["enableWidget"]);return a!=null&&m(t,["enableWidget"],a),t}function b_(n){const t={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const a=f(n,["timeRangeFilter"]);return a!=null&&m(t,["timeRangeFilter"],a),t}function v_(n){const t={},a=f(n,["aspectRatio"]);a!=null&&m(t,["aspectRatio"],a);const i=f(n,["imageSize"]);if(i!=null&&m(t,["imageSize"],i),f(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function y_(n,t){const a={},i=f(t,["model"]);i!=null&&m(a,["request","model"],Fe(n,i));const o=f(t,["contents"]);if(o!=null){let x=Ns(o);Array.isArray(x)&&(x=x.map(h=>sb(h))),m(a,["request","contents"],x)}const c=f(t,["metadata"]);c!=null&&m(a,["metadata"],c);const u=f(t,["config"]);return u!=null&&m(a,["request","generationConfig"],h_(n,u,f(a,["request"],{}))),a}function N_(n){const t={},a=f(n,["response"]);a!=null&&m(t,["response"],m_(a));const i=f(n,["error"]);return i!=null&&m(t,["error"],i),t}function j_(n,t){const a={},i=f(n,["pageSize"]);t!==void 0&&i!=null&&m(t,["_query","pageSize"],i);const o=f(n,["pageToken"]);if(t!==void 0&&o!=null&&m(t,["_query","pageToken"],o),f(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return a}function w_(n,t){const a={},i=f(n,["pageSize"]);t!==void 0&&i!=null&&m(t,["_query","pageSize"],i);const o=f(n,["pageToken"]);t!==void 0&&o!=null&&m(t,["_query","pageToken"],o);const c=f(n,["filter"]);return t!==void 0&&c!=null&&m(t,["_query","filter"],c),a}function __(n){const t={},a=f(n,["config"]);return a!=null&&j_(a,t),t}function S_(n){const t={},a=f(n,["config"]);return a!=null&&w_(a,t),t}function C_(n){const t={},a=f(n,["sdkHttpResponse"]);a!=null&&m(t,["sdkHttpResponse"],a);const i=f(n,["nextPageToken"]);i!=null&&m(t,["nextPageToken"],i);const o=f(n,["operations"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(u=>wo(u))),m(t,["batchJobs"],c)}return t}function E_(n){const t={},a=f(n,["sdkHttpResponse"]);a!=null&&m(t,["sdkHttpResponse"],a);const i=f(n,["nextPageToken"]);i!=null&&m(t,["nextPageToken"],i);const o=f(n,["batchPredictionJobs"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(u=>ku(u))),m(t,["batchJobs"],c)}return t}function T_(n){const t={},a=f(n,["mediaResolution"]);a!=null&&m(t,["mediaResolution"],a);const i=f(n,["codeExecutionResult"]);i!=null&&m(t,["codeExecutionResult"],i);const o=f(n,["executableCode"]);o!=null&&m(t,["executableCode"],o);const c=f(n,["fileData"]);c!=null&&m(t,["fileData"],d_(c));const u=f(n,["functionCall"]);u!=null&&m(t,["functionCall"],u_(u));const x=f(n,["functionResponse"]);x!=null&&m(t,["functionResponse"],x);const h=f(n,["inlineData"]);h!=null&&m(t,["inlineData"],Jw(h));const p=f(n,["text"]);p!=null&&m(t,["text"],p);const b=f(n,["thought"]);b!=null&&m(t,["thought"],b);const y=f(n,["thoughtSignature"]);y!=null&&m(t,["thoughtSignature"],y);const N=f(n,["videoMetadata"]);return N!=null&&m(t,["videoMetadata"],N),t}function k_(n){const t={},a=f(n,["category"]);if(a!=null&&m(t,["category"],a),f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=f(n,["threshold"]);return i!=null&&m(t,["threshold"],i),t}function A_(n){const t={},a=f(n,["functionCallingConfig"]);a!=null&&m(t,["functionCallingConfig"],f_(a));const i=f(n,["retrievalConfig"]);return i!=null&&m(t,["retrievalConfig"],i),t}function M_(n){const t={},a=f(n,["functionDeclarations"]);if(a!=null){let b=a;Array.isArray(b)&&(b=b.map(y=>y)),m(t,["functionDeclarations"],b)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(n,["googleSearchRetrieval"]);i!=null&&m(t,["googleSearchRetrieval"],i);const o=f(n,["computerUse"]);o!=null&&m(t,["computerUse"],o);const c=f(n,["fileSearch"]);c!=null&&m(t,["fileSearch"],c);const u=f(n,["codeExecution"]);if(u!=null&&m(t,["codeExecution"],u),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const x=f(n,["googleMaps"]);x!=null&&m(t,["googleMaps"],g_(x));const h=f(n,["googleSearch"]);h!=null&&m(t,["googleSearch"],b_(h));const p=f(n,["urlContext"]);return p!=null&&m(t,["urlContext"],p),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var fn;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(fn||(fn={}));class Tl{constructor(t,a,i,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=a,this.init(t,i,o)}init(t,a,i){var o,c;this.nameInternal=t,this.pageInternal=a[this.nameInternal]||[],this.sdkHttpResponseInternal=a==null?void 0:a.sdkHttpResponse,this.idxInternal=0;let u={config:{}};!i||Object.keys(i).length===0?u={config:{}}:typeof i=="object"?u=Object.assign({},i):u=i,u.config&&(u.config.pageToken=a.nextPageToken),this.paramsInternal=u,this.pageInternalSize=(c=(o=u.config)===null||o===void 0?void 0:o.pageSize)!==null&&c!==void 0?c:this.pageInternal.length}initNextPage(t){this.init(this.nameInternal,t,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(t){return this.pageInternal[t]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const t=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:t,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const t=await this.requestInternal(this.params);return this.initNextPage(t),this.page}hasNextPage(){var t;return((t=this.params.config)===null||t===void 0?void 0:t.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class R_ extends xn{constructor(t){super(),this.apiClient=t,this.create=async a=>(this.apiClient.isVertexAI()&&(a.config=this.formatDestination(a.src,a.config)),this.createInternal(a)),this.createEmbeddings=async a=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(a)},this.list=async(a={})=>new Tl(fn.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(a),a)}createInlinedGenerateContentRequest(t){const a=Ip(this.apiClient,t),i=a._url,o=ye("{model}:batchGenerateContent",i),x=a.batch.inputConfig.requests,h=x.requests,p=[];for(const b of h){const y=Object.assign({},b);if(y.systemInstruction){const N=y.systemInstruction;delete y.systemInstruction;const w=y.request;w.systemInstruction=N,y.request=w}p.push(y)}return x.requests=p,delete a.config,delete a._url,delete a._query,{path:o,body:a}}getGcsUri(t){if(typeof t=="string")return t.startsWith("gs://")?t:void 0;if(!Array.isArray(t)&&t.gcsUri&&t.gcsUri.length>0)return t.gcsUri[0]}getBigqueryUri(t){if(typeof t=="string")return t.startsWith("bq://")?t:void 0;if(!Array.isArray(t))return t.bigqueryUri}formatDestination(t,a){const i=a?Object.assign({},a):{},o=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${o}`),i.dest===void 0){const c=this.getGcsUri(t),u=this.getBigqueryUri(t);if(c)c.endsWith(".jsonl")?i.dest=`${c.slice(0,-6)}/dest`:i.dest=`${c}_dest_${o}`;else if(u)i.dest=`${u}_dest_${o}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(t){var a,i,o,c;let u,x="",h={};if(this.apiClient.isVertexAI()){const p=e_(this.apiClient,t);return x=ye("batchPredictionJobs",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:x,queryParams:h,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(b=>b.json()),u.then(b=>ku(b))}else{const p=Ip(this.apiClient,t);return x=ye("{model}:batchGenerateContent",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:x,queryParams:h,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(c=t.config)===null||c===void 0?void 0:c.abortSignal}).then(b=>b.json()),u.then(b=>wo(b))}}async createEmbeddingsInternal(t){var a,i;let o,c="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const x=s_(this.apiClient,t);return c=ye("{model}:asyncBatchEmbedContent",x._url),u=x._query,delete x._url,delete x._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(x),httpMethod:"POST",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>wo(h))}}async get(t){var a,i,o,c;let u,x="",h={};if(this.apiClient.isVertexAI()){const p=p_(this.apiClient,t);return x=ye("batchPredictionJobs/{name}",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:x,queryParams:h,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(b=>b.json()),u.then(b=>ku(b))}else{const p=x_(this.apiClient,t);return x=ye("batches/{name}",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:x,queryParams:h,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(c=t.config)===null||c===void 0?void 0:c.abortSignal}).then(b=>b.json()),u.then(b=>wo(b))}}async cancel(t){var a,i,o,c;let u="",x={};if(this.apiClient.isVertexAI()){const h=Kw(this.apiClient,t);u=ye("batchPredictionJobs/{name}:cancel",h._url),x=h._query,delete h._url,delete h._query,await this.apiClient.request({path:u,queryParams:x,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal})}else{const h=Yw(this.apiClient,t);u=ye("batches/{name}:cancel",h._url),x=h._query,delete h._url,delete h._query,await this.apiClient.request({path:u,queryParams:x,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(c=t.config)===null||c===void 0?void 0:c.abortSignal})}}async listInternal(t){var a,i,o,c;let u,x="",h={};if(this.apiClient.isVertexAI()){const p=S_(t);return x=ye("batchPredictionJobs",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:x,queryParams:h,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(b=>b.json().then(y=>{const N=y;return N.sdkHttpResponse={headers:b.headers},N})),u.then(b=>{const y=E_(b),N=new Ap;return Object.assign(N,y),N})}else{const p=__(t);return x=ye("batches",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:x,queryParams:h,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(c=t.config)===null||c===void 0?void 0:c.abortSignal}).then(b=>b.json().then(y=>{const N=y;return N.sdkHttpResponse={headers:b.headers},N})),u.then(b=>{const y=C_(b),N=new Ap;return Object.assign(N,y),N})}}async delete(t){var a,i,o,c;let u,x="",h={};if(this.apiClient.isVertexAI()){const p=l_(this.apiClient,t);return x=ye("batchPredictionJobs/{name}",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:x,queryParams:h,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(b=>b.json().then(y=>{const N=y;return N.sdkHttpResponse={headers:b.headers},N})),u.then(b=>i_(b))}else{const p=n_(this.apiClient,t);return x=ye("batches/{name}",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:x,queryParams:h,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(c=t.config)===null||c===void 0?void 0:c.abortSignal}).then(b=>b.json().then(y=>{const N=y;return N.sdkHttpResponse={headers:b.headers},N})),u.then(b=>a_(b))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function D_(n){const t={},a=f(n,["data"]);if(a!=null&&m(t,["data"],a),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(n,["mimeType"]);return i!=null&&m(t,["mimeType"],i),t}function zp(n){const t={},a=f(n,["parts"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(c=>sS(c))),m(t,["parts"],o)}const i=f(n,["role"]);return i!=null&&m(t,["role"],i),t}function I_(n,t){const a={},i=f(n,["ttl"]);t!==void 0&&i!=null&&m(t,["ttl"],i);const o=f(n,["expireTime"]);t!==void 0&&o!=null&&m(t,["expireTime"],o);const c=f(n,["displayName"]);t!==void 0&&c!=null&&m(t,["displayName"],c);const u=f(n,["contents"]);if(t!==void 0&&u!=null){let b=Ns(u);Array.isArray(b)&&(b=b.map(y=>zp(y))),m(t,["contents"],b)}const x=f(n,["systemInstruction"]);t!==void 0&&x!=null&&m(t,["systemInstruction"],zp(Ot(x)));const h=f(n,["tools"]);if(t!==void 0&&h!=null){let b=h;Array.isArray(b)&&(b=b.map(y=>lS(y))),m(t,["tools"],b)}const p=f(n,["toolConfig"]);if(t!==void 0&&p!=null&&m(t,["toolConfig"],nS(p)),f(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return a}function z_(n,t){const a={},i=f(n,["ttl"]);t!==void 0&&i!=null&&m(t,["ttl"],i);const o=f(n,["expireTime"]);t!==void 0&&o!=null&&m(t,["expireTime"],o);const c=f(n,["displayName"]);t!==void 0&&c!=null&&m(t,["displayName"],c);const u=f(n,["contents"]);if(t!==void 0&&u!=null){let y=Ns(u);Array.isArray(y)&&(y=y.map(N=>N)),m(t,["contents"],y)}const x=f(n,["systemInstruction"]);t!==void 0&&x!=null&&m(t,["systemInstruction"],Ot(x));const h=f(n,["tools"]);if(t!==void 0&&h!=null){let y=h;Array.isArray(y)&&(y=y.map(N=>aS(N))),m(t,["tools"],y)}const p=f(n,["toolConfig"]);t!==void 0&&p!=null&&m(t,["toolConfig"],p);const b=f(n,["kmsKeyName"]);return t!==void 0&&b!=null&&m(t,["encryption_spec","kmsKeyName"],b),a}function L_(n,t){const a={},i=f(t,["model"]);i!=null&&m(a,["model"],Vg(n,i));const o=f(t,["config"]);return o!=null&&I_(o,a),a}function U_(n,t){const a={},i=f(t,["model"]);i!=null&&m(a,["model"],Vg(n,i));const o=f(t,["config"]);return o!=null&&z_(o,a),a}function P_(n,t){const a={},i=f(t,["name"]);return i!=null&&m(a,["_url","name"],pn(n,i)),a}function q_(n,t){const a={},i=f(t,["name"]);return i!=null&&m(a,["_url","name"],pn(n,i)),a}function O_(n){const t={},a=f(n,["sdkHttpResponse"]);return a!=null&&m(t,["sdkHttpResponse"],a),t}function $_(n){const t={},a=f(n,["sdkHttpResponse"]);return a!=null&&m(t,["sdkHttpResponse"],a),t}function H_(n){const t={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const a=f(n,["fileUri"]);a!=null&&m(t,["fileUri"],a);const i=f(n,["mimeType"]);return i!=null&&m(t,["mimeType"],i),t}function G_(n){const t={},a=f(n,["id"]);a!=null&&m(t,["id"],a);const i=f(n,["args"]);i!=null&&m(t,["args"],i);const o=f(n,["name"]);if(o!=null&&m(t,["name"],o),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function V_(n){const t={},a=f(n,["mode"]);a!=null&&m(t,["mode"],a);const i=f(n,["allowedFunctionNames"]);if(i!=null&&m(t,["allowedFunctionNames"],i),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function B_(n){const t={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const a=f(n,["description"]);a!=null&&m(t,["description"],a);const i=f(n,["name"]);i!=null&&m(t,["name"],i);const o=f(n,["parameters"]);o!=null&&m(t,["parameters"],o);const c=f(n,["parametersJsonSchema"]);c!=null&&m(t,["parametersJsonSchema"],c);const u=f(n,["response"]);u!=null&&m(t,["response"],u);const x=f(n,["responseJsonSchema"]);return x!=null&&m(t,["responseJsonSchema"],x),t}function F_(n,t){const a={},i=f(t,["name"]);return i!=null&&m(a,["_url","name"],pn(n,i)),a}function J_(n,t){const a={},i=f(t,["name"]);return i!=null&&m(a,["_url","name"],pn(n,i)),a}function Y_(n){const t={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const a=f(n,["enableWidget"]);return a!=null&&m(t,["enableWidget"],a),t}function K_(n){const t={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const a=f(n,["timeRangeFilter"]);return a!=null&&m(t,["timeRangeFilter"],a),t}function Q_(n,t){const a={},i=f(n,["pageSize"]);t!==void 0&&i!=null&&m(t,["_query","pageSize"],i);const o=f(n,["pageToken"]);return t!==void 0&&o!=null&&m(t,["_query","pageToken"],o),a}function X_(n,t){const a={},i=f(n,["pageSize"]);t!==void 0&&i!=null&&m(t,["_query","pageSize"],i);const o=f(n,["pageToken"]);return t!==void 0&&o!=null&&m(t,["_query","pageToken"],o),a}function Z_(n){const t={},a=f(n,["config"]);return a!=null&&Q_(a,t),t}function W_(n){const t={},a=f(n,["config"]);return a!=null&&X_(a,t),t}function eS(n){const t={},a=f(n,["sdkHttpResponse"]);a!=null&&m(t,["sdkHttpResponse"],a);const i=f(n,["nextPageToken"]);i!=null&&m(t,["nextPageToken"],i);const o=f(n,["cachedContents"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(u=>u)),m(t,["cachedContents"],c)}return t}function tS(n){const t={},a=f(n,["sdkHttpResponse"]);a!=null&&m(t,["sdkHttpResponse"],a);const i=f(n,["nextPageToken"]);i!=null&&m(t,["nextPageToken"],i);const o=f(n,["cachedContents"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(u=>u)),m(t,["cachedContents"],c)}return t}function sS(n){const t={},a=f(n,["mediaResolution"]);a!=null&&m(t,["mediaResolution"],a);const i=f(n,["codeExecutionResult"]);i!=null&&m(t,["codeExecutionResult"],i);const o=f(n,["executableCode"]);o!=null&&m(t,["executableCode"],o);const c=f(n,["fileData"]);c!=null&&m(t,["fileData"],H_(c));const u=f(n,["functionCall"]);u!=null&&m(t,["functionCall"],G_(u));const x=f(n,["functionResponse"]);x!=null&&m(t,["functionResponse"],x);const h=f(n,["inlineData"]);h!=null&&m(t,["inlineData"],D_(h));const p=f(n,["text"]);p!=null&&m(t,["text"],p);const b=f(n,["thought"]);b!=null&&m(t,["thought"],b);const y=f(n,["thoughtSignature"]);y!=null&&m(t,["thoughtSignature"],y);const N=f(n,["videoMetadata"]);return N!=null&&m(t,["videoMetadata"],N),t}function nS(n){const t={},a=f(n,["functionCallingConfig"]);a!=null&&m(t,["functionCallingConfig"],V_(a));const i=f(n,["retrievalConfig"]);return i!=null&&m(t,["retrievalConfig"],i),t}function lS(n){const t={},a=f(n,["functionDeclarations"]);if(a!=null){let b=a;Array.isArray(b)&&(b=b.map(y=>y)),m(t,["functionDeclarations"],b)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(n,["googleSearchRetrieval"]);i!=null&&m(t,["googleSearchRetrieval"],i);const o=f(n,["computerUse"]);o!=null&&m(t,["computerUse"],o);const c=f(n,["fileSearch"]);c!=null&&m(t,["fileSearch"],c);const u=f(n,["codeExecution"]);if(u!=null&&m(t,["codeExecution"],u),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const x=f(n,["googleMaps"]);x!=null&&m(t,["googleMaps"],Y_(x));const h=f(n,["googleSearch"]);h!=null&&m(t,["googleSearch"],K_(h));const p=f(n,["urlContext"]);return p!=null&&m(t,["urlContext"],p),t}function aS(n){const t={},a=f(n,["functionDeclarations"]);if(a!=null){let y=a;Array.isArray(y)&&(y=y.map(N=>B_(N))),m(t,["functionDeclarations"],y)}const i=f(n,["retrieval"]);i!=null&&m(t,["retrieval"],i);const o=f(n,["googleSearchRetrieval"]);o!=null&&m(t,["googleSearchRetrieval"],o);const c=f(n,["computerUse"]);if(c!=null&&m(t,["computerUse"],c),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=f(n,["codeExecution"]);u!=null&&m(t,["codeExecution"],u);const x=f(n,["enterpriseWebSearch"]);x!=null&&m(t,["enterpriseWebSearch"],x);const h=f(n,["googleMaps"]);h!=null&&m(t,["googleMaps"],h);const p=f(n,["googleSearch"]);p!=null&&m(t,["googleSearch"],p);const b=f(n,["urlContext"]);return b!=null&&m(t,["urlContext"],b),t}function iS(n,t){const a={},i=f(n,["ttl"]);t!==void 0&&i!=null&&m(t,["ttl"],i);const o=f(n,["expireTime"]);return t!==void 0&&o!=null&&m(t,["expireTime"],o),a}function rS(n,t){const a={},i=f(n,["ttl"]);t!==void 0&&i!=null&&m(t,["ttl"],i);const o=f(n,["expireTime"]);return t!==void 0&&o!=null&&m(t,["expireTime"],o),a}function oS(n,t){const a={},i=f(t,["name"]);i!=null&&m(a,["_url","name"],pn(n,i));const o=f(t,["config"]);return o!=null&&iS(o,a),a}function cS(n,t){const a={},i=f(t,["name"]);i!=null&&m(a,["_url","name"],pn(n,i));const o=f(t,["config"]);return o!=null&&rS(o,a),a}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class dS extends xn{constructor(t){super(),this.apiClient=t,this.list=async(a={})=>new Tl(fn.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(a),a)}async create(t){var a,i,o,c;let u,x="",h={};if(this.apiClient.isVertexAI()){const p=U_(this.apiClient,t);return x=ye("cachedContents",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:x,queryParams:h,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(b=>b.json()),u.then(b=>b)}else{const p=L_(this.apiClient,t);return x=ye("cachedContents",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:x,queryParams:h,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(c=t.config)===null||c===void 0?void 0:c.abortSignal}).then(b=>b.json()),u.then(b=>b)}}async get(t){var a,i,o,c;let u,x="",h={};if(this.apiClient.isVertexAI()){const p=J_(this.apiClient,t);return x=ye("{name}",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:x,queryParams:h,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(b=>b.json()),u.then(b=>b)}else{const p=F_(this.apiClient,t);return x=ye("{name}",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:x,queryParams:h,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(c=t.config)===null||c===void 0?void 0:c.abortSignal}).then(b=>b.json()),u.then(b=>b)}}async delete(t){var a,i,o,c;let u,x="",h={};if(this.apiClient.isVertexAI()){const p=q_(this.apiClient,t);return x=ye("{name}",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:x,queryParams:h,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(b=>b.json().then(y=>{const N=y;return N.sdkHttpResponse={headers:b.headers},N})),u.then(b=>{const y=$_(b),N=new Tp;return Object.assign(N,y),N})}else{const p=P_(this.apiClient,t);return x=ye("{name}",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:x,queryParams:h,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(c=t.config)===null||c===void 0?void 0:c.abortSignal}).then(b=>b.json().then(y=>{const N=y;return N.sdkHttpResponse={headers:b.headers},N})),u.then(b=>{const y=O_(b),N=new Tp;return Object.assign(N,y),N})}}async update(t){var a,i,o,c;let u,x="",h={};if(this.apiClient.isVertexAI()){const p=cS(this.apiClient,t);return x=ye("{name}",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:x,queryParams:h,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(b=>b.json()),u.then(b=>b)}else{const p=oS(this.apiClient,t);return x=ye("{name}",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:x,queryParams:h,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(c=t.config)===null||c===void 0?void 0:c.abortSignal}).then(b=>b.json()),u.then(b=>b)}}async listInternal(t){var a,i,o,c;let u,x="",h={};if(this.apiClient.isVertexAI()){const p=W_(t);return x=ye("cachedContents",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:x,queryParams:h,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(b=>b.json().then(y=>{const N=y;return N.sdkHttpResponse={headers:b.headers},N})),u.then(b=>{const y=tS(b),N=new kp;return Object.assign(N,y),N})}else{const p=Z_(t);return x=ye("cachedContents",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:x,queryParams:h,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(c=t.config)===null||c===void 0?void 0:c.abortSignal}).then(b=>b.json().then(y=>{const N=y;return N.sdkHttpResponse={headers:b.headers},N})),u.then(b=>{const y=eS(b),N=new kp;return Object.assign(N,y),N})}}}function Lp(n){var t=typeof Symbol=="function"&&Symbol.iterator,a=t&&n[t],i=0;if(a)return a.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function rt(n){return this instanceof rt?(this.v=n,this):new rt(n)}function Ca(n,t,a){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=a.apply(n,t||[]),o,c=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),x("next"),x("throw"),x("return",u),o[Symbol.asyncIterator]=function(){return this},o;function u(w){return function(A){return Promise.resolve(A).then(w,y)}}function x(w,A){i[w]&&(o[w]=function(I){return new Promise(function(H,G){c.push([w,I,H,G])>1||h(w,I)})},A&&(o[w]=A(o[w])))}function h(w,A){try{p(i[w](A))}catch(I){N(c[0][3],I)}}function p(w){w.value instanceof rt?Promise.resolve(w.value.v).then(b,y):N(c[0][2],w)}function b(w){h("next",w)}function y(w){h("throw",w)}function N(w,A){w(A),c.shift(),c.length&&h(c[0][0],c[0][1])}}function Hi(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=n[Symbol.asyncIterator],a;return t?t.call(n):(n=typeof Lp=="function"?Lp(n):n[Symbol.iterator](),a={},i("next"),i("throw"),i("return"),a[Symbol.asyncIterator]=function(){return this},a);function i(c){a[c]=n[c]&&function(u){return new Promise(function(x,h){u=n[c](u),o(x,h,u.done,u.value)})}}function o(c,u,x,h){Promise.resolve(h).then(function(p){c({value:p,done:x})},u)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function uS(n){var t;if(n.candidates==null||n.candidates.length===0)return!1;const a=(t=n.candidates[0])===null||t===void 0?void 0:t.content;return a===void 0?!1:nb(a)}function nb(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const t of n.parts)if(t===void 0||Object.keys(t).length===0)return!1;return!0}function fS(n){if(n.length!==0){for(const t of n)if(t.role!=="user"&&t.role!=="model")throw new Error(`Role must be user or model, but got ${t.role}.`)}}function Up(n){if(n===void 0||n.length===0)return[];const t=[],a=n.length;let i=0;for(;i<a;)if(n[i].role==="user")t.push(n[i]),i++;else{const o=[];let c=!0;for(;i<a&&n[i].role==="model";)o.push(n[i]),c&&!nb(n[i])&&(c=!1),i++;c?t.push(...o):t.pop()}return t}class hS{constructor(t,a){this.modelsModule=t,this.apiClient=a}create(t){return new mS(this.apiClient,this.modelsModule,t.model,t.config,structuredClone(t.history))}}class mS{constructor(t,a,i,o={},c=[]){this.apiClient=t,this.modelsModule=a,this.model=i,this.config=o,this.history=c,this.sendPromise=Promise.resolve(),fS(c)}async sendMessage(t){var a;await this.sendPromise;const i=Ot(t.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(a=t.config)!==null&&a!==void 0?a:this.config});return this.sendPromise=(async()=>{var c,u,x;const h=await o,p=(u=(c=h.candidates)===null||c===void 0?void 0:c[0])===null||u===void 0?void 0:u.content,b=h.automaticFunctionCallingHistory,y=this.getHistory(!0).length;let N=[];b!=null&&(N=(x=b.slice(y))!==null&&x!==void 0?x:[]);const w=p?[p]:[];this.recordHistory(i,w,N)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(t){var a;await this.sendPromise;const i=Ot(t.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(a=t.config)!==null&&a!==void 0?a:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});const c=await o;return this.processStreamResponse(c,i)}getHistory(t=!1){const a=t?Up(this.history):this.history;return structuredClone(a)}processStreamResponse(t,a){var i,o;return Ca(this,arguments,function*(){var u,x,h,p;const b=[];try{for(var y=!0,N=Hi(t),w;w=yield rt(N.next()),u=w.done,!u;y=!0){p=w.value,y=!1;const A=p;if(uS(A)){const I=(o=(i=A.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content;I!==void 0&&b.push(I)}yield yield rt(A)}}catch(A){x={error:A}}finally{try{!y&&!u&&(h=N.return)&&(yield rt(h.call(N)))}finally{if(x)throw x.error}}this.recordHistory(a,b)})}recordHistory(t,a,i){let o=[];a.length>0&&a.every(c=>c.role!==void 0)?o=a:o.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...Up(i)):this.history.push(t),this.history.push(...o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Po extends Error{constructor(t){super(t.message),this.name="ApiError",this.status=t.status,Object.setPrototypeOf(this,Po.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function xS(n){const t={},a=f(n,["file"]);return a!=null&&m(t,["file"],a),t}function pS(n){const t={},a=f(n,["sdkHttpResponse"]);return a!=null&&m(t,["sdkHttpResponse"],a),t}function gS(n){const t={},a=f(n,["name"]);return a!=null&&m(t,["_url","file"],Qg(a)),t}function bS(n){const t={},a=f(n,["sdkHttpResponse"]);return a!=null&&m(t,["sdkHttpResponse"],a),t}function vS(n){const t={},a=f(n,["name"]);return a!=null&&m(t,["_url","file"],Qg(a)),t}function yS(n,t){const a={},i=f(n,["pageSize"]);t!==void 0&&i!=null&&m(t,["_query","pageSize"],i);const o=f(n,["pageToken"]);return t!==void 0&&o!=null&&m(t,["_query","pageToken"],o),a}function NS(n){const t={},a=f(n,["config"]);return a!=null&&yS(a,t),t}function jS(n){const t={},a=f(n,["sdkHttpResponse"]);a!=null&&m(t,["sdkHttpResponse"],a);const i=f(n,["nextPageToken"]);i!=null&&m(t,["nextPageToken"],i);const o=f(n,["files"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(u=>u)),m(t,["files"],c)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class wS extends xn{constructor(t){super(),this.apiClient=t,this.list=async(a={})=>new Tl(fn.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(a),a)}async upload(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(t.file,t.config).then(a=>a)}async download(t){await this.apiClient.downloadFile(t)}async listInternal(t){var a,i;let o,c="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const x=NS(t);return c=ye("files",x._url),u=x._query,delete x._url,delete x._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(x),httpMethod:"GET",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(p=>{const b=p;return b.sdkHttpResponse={headers:h.headers},b})),o.then(h=>{const p=jS(h),b=new Ew;return Object.assign(b,p),b})}}async createInternal(t){var a,i;let o,c="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const x=xS(t);return c=ye("upload/v1beta/files",x._url),u=x._query,delete x._url,delete x._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(x),httpMethod:"POST",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>{const p=pS(h),b=new Tw;return Object.assign(b,p),b})}}async get(t){var a,i;let o,c="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const x=vS(t);return c=ye("files/{file}",x._url),u=x._query,delete x._url,delete x._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(x),httpMethod:"GET",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>h)}}async delete(t){var a,i;let o,c="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const x=gS(t);return c=ye("files/{file}",x._url),u=x._query,delete x._url,delete x._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(x),httpMethod:"DELETE",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(p=>{const b=p;return b.sdkHttpResponse={headers:h.headers},b})),o.then(h=>{const p=bS(h),b=new kw;return Object.assign(b,p),b})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _o(n){const t={},a=f(n,["data"]);if(a!=null&&m(t,["data"],a),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(n,["mimeType"]);return i!=null&&m(t,["mimeType"],i),t}function _S(n){const t={},a=f(n,["parts"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(c=>OS(c))),m(t,["parts"],o)}const i=f(n,["role"]);return i!=null&&m(t,["role"],i),t}function SS(n){const t={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const a=f(n,["fileUri"]);a!=null&&m(t,["fileUri"],a);const i=f(n,["mimeType"]);return i!=null&&m(t,["mimeType"],i),t}function CS(n){const t={},a=f(n,["id"]);a!=null&&m(t,["id"],a);const i=f(n,["args"]);i!=null&&m(t,["args"],i);const o=f(n,["name"]);if(o!=null&&m(t,["name"],o),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function ES(n){const t={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const a=f(n,["description"]);a!=null&&m(t,["description"],a);const i=f(n,["name"]);i!=null&&m(t,["name"],i);const o=f(n,["parameters"]);o!=null&&m(t,["parameters"],o);const c=f(n,["parametersJsonSchema"]);c!=null&&m(t,["parametersJsonSchema"],c);const u=f(n,["response"]);u!=null&&m(t,["response"],u);const x=f(n,["responseJsonSchema"]);return x!=null&&m(t,["responseJsonSchema"],x),t}function TS(n){const t={},a=f(n,["modelSelectionConfig"]);a!=null&&m(t,["modelConfig"],a);const i=f(n,["responseJsonSchema"]);i!=null&&m(t,["responseJsonSchema"],i);const o=f(n,["audioTimestamp"]);o!=null&&m(t,["audioTimestamp"],o);const c=f(n,["candidateCount"]);c!=null&&m(t,["candidateCount"],c);const u=f(n,["enableAffectiveDialog"]);u!=null&&m(t,["enableAffectiveDialog"],u);const x=f(n,["frequencyPenalty"]);x!=null&&m(t,["frequencyPenalty"],x);const h=f(n,["logprobs"]);h!=null&&m(t,["logprobs"],h);const p=f(n,["maxOutputTokens"]);p!=null&&m(t,["maxOutputTokens"],p);const b=f(n,["mediaResolution"]);b!=null&&m(t,["mediaResolution"],b);const y=f(n,["presencePenalty"]);y!=null&&m(t,["presencePenalty"],y);const N=f(n,["responseLogprobs"]);N!=null&&m(t,["responseLogprobs"],N);const w=f(n,["responseMimeType"]);w!=null&&m(t,["responseMimeType"],w);const A=f(n,["responseModalities"]);A!=null&&m(t,["responseModalities"],A);const I=f(n,["responseSchema"]);I!=null&&m(t,["responseSchema"],I);const H=f(n,["routingConfig"]);H!=null&&m(t,["routingConfig"],H);const G=f(n,["seed"]);G!=null&&m(t,["seed"],G);const F=f(n,["speechConfig"]);F!=null&&m(t,["speechConfig"],lb(F));const O=f(n,["stopSequences"]);O!=null&&m(t,["stopSequences"],O);const V=f(n,["temperature"]);V!=null&&m(t,["temperature"],V);const X=f(n,["thinkingConfig"]);X!=null&&m(t,["thinkingConfig"],X);const ee=f(n,["topK"]);ee!=null&&m(t,["topK"],ee);const Q=f(n,["topP"]);if(Q!=null&&m(t,["topP"],Q),f(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function kS(n){const t={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const a=f(n,["enableWidget"]);return a!=null&&m(t,["enableWidget"],a),t}function AS(n){const t={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const a=f(n,["timeRangeFilter"]);return a!=null&&m(t,["timeRangeFilter"],a),t}function MS(n,t){const a={},i=f(n,["generationConfig"]);t!==void 0&&i!=null&&m(t,["setup","generationConfig"],i);const o=f(n,["responseModalities"]);t!==void 0&&o!=null&&m(t,["setup","generationConfig","responseModalities"],o);const c=f(n,["temperature"]);t!==void 0&&c!=null&&m(t,["setup","generationConfig","temperature"],c);const u=f(n,["topP"]);t!==void 0&&u!=null&&m(t,["setup","generationConfig","topP"],u);const x=f(n,["topK"]);t!==void 0&&x!=null&&m(t,["setup","generationConfig","topK"],x);const h=f(n,["maxOutputTokens"]);t!==void 0&&h!=null&&m(t,["setup","generationConfig","maxOutputTokens"],h);const p=f(n,["mediaResolution"]);t!==void 0&&p!=null&&m(t,["setup","generationConfig","mediaResolution"],p);const b=f(n,["seed"]);t!==void 0&&b!=null&&m(t,["setup","generationConfig","seed"],b);const y=f(n,["speechConfig"]);t!==void 0&&y!=null&&m(t,["setup","generationConfig","speechConfig"],nf(y));const N=f(n,["thinkingConfig"]);t!==void 0&&N!=null&&m(t,["setup","generationConfig","thinkingConfig"],N);const w=f(n,["enableAffectiveDialog"]);t!==void 0&&w!=null&&m(t,["setup","generationConfig","enableAffectiveDialog"],w);const A=f(n,["systemInstruction"]);t!==void 0&&A!=null&&m(t,["setup","systemInstruction"],_S(Ot(A)));const I=f(n,["tools"]);if(t!==void 0&&I!=null){let ee=La(I);Array.isArray(ee)&&(ee=ee.map(Q=>HS(za(Q)))),m(t,["setup","tools"],ee)}const H=f(n,["sessionResumption"]);t!==void 0&&H!=null&&m(t,["setup","sessionResumption"],$S(H));const G=f(n,["inputAudioTranscription"]);t!==void 0&&G!=null&&m(t,["setup","inputAudioTranscription"],G);const F=f(n,["outputAudioTranscription"]);t!==void 0&&F!=null&&m(t,["setup","outputAudioTranscription"],F);const O=f(n,["realtimeInputConfig"]);t!==void 0&&O!=null&&m(t,["setup","realtimeInputConfig"],O);const V=f(n,["contextWindowCompression"]);t!==void 0&&V!=null&&m(t,["setup","contextWindowCompression"],V);const X=f(n,["proactivity"]);return t!==void 0&&X!=null&&m(t,["setup","proactivity"],X),a}function RS(n,t){const a={},i=f(n,["generationConfig"]);t!==void 0&&i!=null&&m(t,["setup","generationConfig"],TS(i));const o=f(n,["responseModalities"]);t!==void 0&&o!=null&&m(t,["setup","generationConfig","responseModalities"],o);const c=f(n,["temperature"]);t!==void 0&&c!=null&&m(t,["setup","generationConfig","temperature"],c);const u=f(n,["topP"]);t!==void 0&&u!=null&&m(t,["setup","generationConfig","topP"],u);const x=f(n,["topK"]);t!==void 0&&x!=null&&m(t,["setup","generationConfig","topK"],x);const h=f(n,["maxOutputTokens"]);t!==void 0&&h!=null&&m(t,["setup","generationConfig","maxOutputTokens"],h);const p=f(n,["mediaResolution"]);t!==void 0&&p!=null&&m(t,["setup","generationConfig","mediaResolution"],p);const b=f(n,["seed"]);t!==void 0&&b!=null&&m(t,["setup","generationConfig","seed"],b);const y=f(n,["speechConfig"]);t!==void 0&&y!=null&&m(t,["setup","generationConfig","speechConfig"],lb(nf(y)));const N=f(n,["thinkingConfig"]);t!==void 0&&N!=null&&m(t,["setup","generationConfig","thinkingConfig"],N);const w=f(n,["enableAffectiveDialog"]);t!==void 0&&w!=null&&m(t,["setup","generationConfig","enableAffectiveDialog"],w);const A=f(n,["systemInstruction"]);t!==void 0&&A!=null&&m(t,["setup","systemInstruction"],Ot(A));const I=f(n,["tools"]);if(t!==void 0&&I!=null){let ee=La(I);Array.isArray(ee)&&(ee=ee.map(Q=>GS(za(Q)))),m(t,["setup","tools"],ee)}const H=f(n,["sessionResumption"]);t!==void 0&&H!=null&&m(t,["setup","sessionResumption"],H);const G=f(n,["inputAudioTranscription"]);t!==void 0&&G!=null&&m(t,["setup","inputAudioTranscription"],G);const F=f(n,["outputAudioTranscription"]);t!==void 0&&F!=null&&m(t,["setup","outputAudioTranscription"],F);const O=f(n,["realtimeInputConfig"]);t!==void 0&&O!=null&&m(t,["setup","realtimeInputConfig"],O);const V=f(n,["contextWindowCompression"]);t!==void 0&&V!=null&&m(t,["setup","contextWindowCompression"],V);const X=f(n,["proactivity"]);return t!==void 0&&X!=null&&m(t,["setup","proactivity"],X),a}function DS(n,t){const a={},i=f(t,["model"]);i!=null&&m(a,["setup","model"],Fe(n,i));const o=f(t,["config"]);return o!=null&&m(a,["config"],MS(o,a)),a}function IS(n,t){const a={},i=f(t,["model"]);i!=null&&m(a,["setup","model"],Fe(n,i));const o=f(t,["config"]);return o!=null&&m(a,["config"],RS(o,a)),a}function zS(n){const t={},a=f(n,["musicGenerationConfig"]);return a!=null&&m(t,["musicGenerationConfig"],a),t}function LS(n){const t={},a=f(n,["weightedPrompts"]);if(a!=null){let i=a;Array.isArray(i)&&(i=i.map(o=>o)),m(t,["weightedPrompts"],i)}return t}function US(n){const t={},a=f(n,["media"]);if(a!=null){let p=Bg(a);Array.isArray(p)&&(p=p.map(b=>_o(b))),m(t,["mediaChunks"],p)}const i=f(n,["audio"]);i!=null&&m(t,["audio"],_o(Jg(i)));const o=f(n,["audioStreamEnd"]);o!=null&&m(t,["audioStreamEnd"],o);const c=f(n,["video"]);c!=null&&m(t,["video"],_o(Fg(c)));const u=f(n,["text"]);u!=null&&m(t,["text"],u);const x=f(n,["activityStart"]);x!=null&&m(t,["activityStart"],x);const h=f(n,["activityEnd"]);return h!=null&&m(t,["activityEnd"],h),t}function PS(n){const t={},a=f(n,["media"]);if(a!=null){let p=Bg(a);Array.isArray(p)&&(p=p.map(b=>b)),m(t,["mediaChunks"],p)}const i=f(n,["audio"]);i!=null&&m(t,["audio"],Jg(i));const o=f(n,["audioStreamEnd"]);o!=null&&m(t,["audioStreamEnd"],o);const c=f(n,["video"]);c!=null&&m(t,["video"],Fg(c));const u=f(n,["text"]);u!=null&&m(t,["text"],u);const x=f(n,["activityStart"]);x!=null&&m(t,["activityStart"],x);const h=f(n,["activityEnd"]);return h!=null&&m(t,["activityEnd"],h),t}function qS(n){const t={},a=f(n,["setupComplete"]);a!=null&&m(t,["setupComplete"],a);const i=f(n,["serverContent"]);i!=null&&m(t,["serverContent"],i);const o=f(n,["toolCall"]);o!=null&&m(t,["toolCall"],o);const c=f(n,["toolCallCancellation"]);c!=null&&m(t,["toolCallCancellation"],c);const u=f(n,["usageMetadata"]);u!=null&&m(t,["usageMetadata"],VS(u));const x=f(n,["goAway"]);x!=null&&m(t,["goAway"],x);const h=f(n,["sessionResumptionUpdate"]);return h!=null&&m(t,["sessionResumptionUpdate"],h),t}function OS(n){const t={},a=f(n,["mediaResolution"]);a!=null&&m(t,["mediaResolution"],a);const i=f(n,["codeExecutionResult"]);i!=null&&m(t,["codeExecutionResult"],i);const o=f(n,["executableCode"]);o!=null&&m(t,["executableCode"],o);const c=f(n,["fileData"]);c!=null&&m(t,["fileData"],SS(c));const u=f(n,["functionCall"]);u!=null&&m(t,["functionCall"],CS(u));const x=f(n,["functionResponse"]);x!=null&&m(t,["functionResponse"],x);const h=f(n,["inlineData"]);h!=null&&m(t,["inlineData"],_o(h));const p=f(n,["text"]);p!=null&&m(t,["text"],p);const b=f(n,["thought"]);b!=null&&m(t,["thought"],b);const y=f(n,["thoughtSignature"]);y!=null&&m(t,["thoughtSignature"],y);const N=f(n,["videoMetadata"]);return N!=null&&m(t,["videoMetadata"],N),t}function $S(n){const t={},a=f(n,["handle"]);if(a!=null&&m(t,["handle"],a),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function lb(n){const t={},a=f(n,["languageCode"]);a!=null&&m(t,["languageCode"],a);const i=f(n,["voiceConfig"]);if(i!=null&&m(t,["voiceConfig"],i),f(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return t}function HS(n){const t={},a=f(n,["functionDeclarations"]);if(a!=null){let b=a;Array.isArray(b)&&(b=b.map(y=>y)),m(t,["functionDeclarations"],b)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(n,["googleSearchRetrieval"]);i!=null&&m(t,["googleSearchRetrieval"],i);const o=f(n,["computerUse"]);o!=null&&m(t,["computerUse"],o);const c=f(n,["fileSearch"]);c!=null&&m(t,["fileSearch"],c);const u=f(n,["codeExecution"]);if(u!=null&&m(t,["codeExecution"],u),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const x=f(n,["googleMaps"]);x!=null&&m(t,["googleMaps"],kS(x));const h=f(n,["googleSearch"]);h!=null&&m(t,["googleSearch"],AS(h));const p=f(n,["urlContext"]);return p!=null&&m(t,["urlContext"],p),t}function GS(n){const t={},a=f(n,["functionDeclarations"]);if(a!=null){let y=a;Array.isArray(y)&&(y=y.map(N=>ES(N))),m(t,["functionDeclarations"],y)}const i=f(n,["retrieval"]);i!=null&&m(t,["retrieval"],i);const o=f(n,["googleSearchRetrieval"]);o!=null&&m(t,["googleSearchRetrieval"],o);const c=f(n,["computerUse"]);if(c!=null&&m(t,["computerUse"],c),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=f(n,["codeExecution"]);u!=null&&m(t,["codeExecution"],u);const x=f(n,["enterpriseWebSearch"]);x!=null&&m(t,["enterpriseWebSearch"],x);const h=f(n,["googleMaps"]);h!=null&&m(t,["googleMaps"],h);const p=f(n,["googleSearch"]);p!=null&&m(t,["googleSearch"],p);const b=f(n,["urlContext"]);return b!=null&&m(t,["urlContext"],b),t}function VS(n){const t={},a=f(n,["promptTokenCount"]);a!=null&&m(t,["promptTokenCount"],a);const i=f(n,["cachedContentTokenCount"]);i!=null&&m(t,["cachedContentTokenCount"],i);const o=f(n,["candidatesTokenCount"]);o!=null&&m(t,["responseTokenCount"],o);const c=f(n,["toolUsePromptTokenCount"]);c!=null&&m(t,["toolUsePromptTokenCount"],c);const u=f(n,["thoughtsTokenCount"]);u!=null&&m(t,["thoughtsTokenCount"],u);const x=f(n,["totalTokenCount"]);x!=null&&m(t,["totalTokenCount"],x);const h=f(n,["promptTokensDetails"]);if(h!=null){let w=h;Array.isArray(w)&&(w=w.map(A=>A)),m(t,["promptTokensDetails"],w)}const p=f(n,["cacheTokensDetails"]);if(p!=null){let w=p;Array.isArray(w)&&(w=w.map(A=>A)),m(t,["cacheTokensDetails"],w)}const b=f(n,["candidatesTokensDetails"]);if(b!=null){let w=b;Array.isArray(w)&&(w=w.map(A=>A)),m(t,["responseTokensDetails"],w)}const y=f(n,["toolUsePromptTokensDetails"]);if(y!=null){let w=y;Array.isArray(w)&&(w=w.map(A=>A)),m(t,["toolUsePromptTokensDetails"],w)}const N=f(n,["trafficType"]);return N!=null&&m(t,["trafficType"],N),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function BS(n){const t={},a=f(n,["data"]);if(a!=null&&m(t,["data"],a),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(n,["mimeType"]);return i!=null&&m(t,["mimeType"],i),t}function FS(n){const t={},a=f(n,["content"]);a!=null&&m(t,["content"],a);const i=f(n,["citationMetadata"]);i!=null&&m(t,["citationMetadata"],JS(i));const o=f(n,["tokenCount"]);o!=null&&m(t,["tokenCount"],o);const c=f(n,["finishReason"]);c!=null&&m(t,["finishReason"],c);const u=f(n,["avgLogprobs"]);u!=null&&m(t,["avgLogprobs"],u);const x=f(n,["groundingMetadata"]);x!=null&&m(t,["groundingMetadata"],x);const h=f(n,["index"]);h!=null&&m(t,["index"],h);const p=f(n,["logprobsResult"]);p!=null&&m(t,["logprobsResult"],p);const b=f(n,["safetyRatings"]);if(b!=null){let N=b;Array.isArray(N)&&(N=N.map(w=>w)),m(t,["safetyRatings"],N)}const y=f(n,["urlContextMetadata"]);return y!=null&&m(t,["urlContextMetadata"],y),t}function JS(n){const t={},a=f(n,["citationSources"]);if(a!=null){let i=a;Array.isArray(i)&&(i=i.map(o=>o)),m(t,["citations"],i)}return t}function YS(n,t){const a={},i=f(t,["model"]);i!=null&&m(a,["_url","model"],Fe(n,i));const o=f(t,["contents"]);if(o!=null){let c=Ns(o);Array.isArray(c)&&(c=c.map(u=>u)),m(a,["contents"],c)}return a}function KS(n){const t={},a=f(n,["sdkHttpResponse"]);a!=null&&m(t,["sdkHttpResponse"],a);const i=f(n,["tokensInfo"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(c=>c)),m(t,["tokensInfo"],o)}return t}function QS(n){const t={},a=f(n,["values"]);a!=null&&m(t,["values"],a);const i=f(n,["statistics"]);return i!=null&&m(t,["statistics"],XS(i)),t}function XS(n){const t={},a=f(n,["truncated"]);a!=null&&m(t,["truncated"],a);const i=f(n,["token_count"]);return i!=null&&m(t,["tokenCount"],i),t}function qo(n){const t={},a=f(n,["parts"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(c=>i5(c))),m(t,["parts"],o)}const i=f(n,["role"]);return i!=null&&m(t,["role"],i),t}function ZS(n){const t={},a=f(n,["controlType"]);a!=null&&m(t,["controlType"],a);const i=f(n,["enableControlImageComputation"]);return i!=null&&m(t,["computeControl"],i),t}function WS(n){const t={};if(f(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(f(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(f(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return t}function e4(n,t){const a={},i=f(n,["systemInstruction"]);t!==void 0&&i!=null&&m(t,["systemInstruction"],Ot(i));const o=f(n,["tools"]);if(t!==void 0&&o!=null){let u=o;Array.isArray(u)&&(u=u.map(x=>cb(x))),m(t,["tools"],u)}const c=f(n,["generationConfig"]);return t!==void 0&&c!=null&&m(t,["generationConfig"],B4(c)),a}function t4(n,t){const a={},i=f(t,["model"]);i!=null&&m(a,["_url","model"],Fe(n,i));const o=f(t,["contents"]);if(o!=null){let u=Ns(o);Array.isArray(u)&&(u=u.map(x=>qo(x))),m(a,["contents"],u)}const c=f(t,["config"]);return c!=null&&WS(c),a}function s4(n,t){const a={},i=f(t,["model"]);i!=null&&m(a,["_url","model"],Fe(n,i));const o=f(t,["contents"]);if(o!=null){let u=Ns(o);Array.isArray(u)&&(u=u.map(x=>x)),m(a,["contents"],u)}const c=f(t,["config"]);return c!=null&&e4(c,a),a}function n4(n){const t={},a=f(n,["sdkHttpResponse"]);a!=null&&m(t,["sdkHttpResponse"],a);const i=f(n,["totalTokens"]);i!=null&&m(t,["totalTokens"],i);const o=f(n,["cachedContentTokenCount"]);return o!=null&&m(t,["cachedContentTokenCount"],o),t}function l4(n){const t={},a=f(n,["sdkHttpResponse"]);a!=null&&m(t,["sdkHttpResponse"],a);const i=f(n,["totalTokens"]);return i!=null&&m(t,["totalTokens"],i),t}function a4(n,t){const a={},i=f(t,["model"]);return i!=null&&m(a,["_url","name"],Fe(n,i)),a}function i4(n,t){const a={},i=f(t,["model"]);return i!=null&&m(a,["_url","name"],Fe(n,i)),a}function r4(n){const t={},a=f(n,["sdkHttpResponse"]);return a!=null&&m(t,["sdkHttpResponse"],a),t}function o4(n){const t={},a=f(n,["sdkHttpResponse"]);return a!=null&&m(t,["sdkHttpResponse"],a),t}function c4(n,t){const a={},i=f(n,["outputGcsUri"]);t!==void 0&&i!=null&&m(t,["parameters","storageUri"],i);const o=f(n,["negativePrompt"]);t!==void 0&&o!=null&&m(t,["parameters","negativePrompt"],o);const c=f(n,["numberOfImages"]);t!==void 0&&c!=null&&m(t,["parameters","sampleCount"],c);const u=f(n,["aspectRatio"]);t!==void 0&&u!=null&&m(t,["parameters","aspectRatio"],u);const x=f(n,["guidanceScale"]);t!==void 0&&x!=null&&m(t,["parameters","guidanceScale"],x);const h=f(n,["seed"]);t!==void 0&&h!=null&&m(t,["parameters","seed"],h);const p=f(n,["safetyFilterLevel"]);t!==void 0&&p!=null&&m(t,["parameters","safetySetting"],p);const b=f(n,["personGeneration"]);t!==void 0&&b!=null&&m(t,["parameters","personGeneration"],b);const y=f(n,["includeSafetyAttributes"]);t!==void 0&&y!=null&&m(t,["parameters","includeSafetyAttributes"],y);const N=f(n,["includeRaiReason"]);t!==void 0&&N!=null&&m(t,["parameters","includeRaiReason"],N);const w=f(n,["language"]);t!==void 0&&w!=null&&m(t,["parameters","language"],w);const A=f(n,["outputMimeType"]);t!==void 0&&A!=null&&m(t,["parameters","outputOptions","mimeType"],A);const I=f(n,["outputCompressionQuality"]);t!==void 0&&I!=null&&m(t,["parameters","outputOptions","compressionQuality"],I);const H=f(n,["addWatermark"]);t!==void 0&&H!=null&&m(t,["parameters","addWatermark"],H);const G=f(n,["labels"]);t!==void 0&&G!=null&&m(t,["labels"],G);const F=f(n,["editMode"]);t!==void 0&&F!=null&&m(t,["parameters","editMode"],F);const O=f(n,["baseSteps"]);return t!==void 0&&O!=null&&m(t,["parameters","editConfig","baseSteps"],O),a}function d4(n,t){const a={},i=f(t,["model"]);i!=null&&m(a,["_url","model"],Fe(n,i));const o=f(t,["prompt"]);o!=null&&m(a,["instances[0]","prompt"],o);const c=f(t,["referenceImages"]);if(c!=null){let x=c;Array.isArray(x)&&(x=x.map(h=>f5(h))),m(a,["instances[0]","referenceImages"],x)}const u=f(t,["config"]);return u!=null&&c4(u,a),a}function u4(n){const t={},a=f(n,["sdkHttpResponse"]);a!=null&&m(t,["sdkHttpResponse"],a);const i=f(n,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(c=>Oo(c))),m(t,["generatedImages"],o)}return t}function f4(n,t){const a={},i=f(n,["taskType"]);t!==void 0&&i!=null&&m(t,["requests[]","taskType"],i);const o=f(n,["title"]);t!==void 0&&o!=null&&m(t,["requests[]","title"],o);const c=f(n,["outputDimensionality"]);if(t!==void 0&&c!=null&&m(t,["requests[]","outputDimensionality"],c),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return a}function h4(n,t){const a={},i=f(n,["taskType"]);t!==void 0&&i!=null&&m(t,["instances[]","task_type"],i);const o=f(n,["title"]);t!==void 0&&o!=null&&m(t,["instances[]","title"],o);const c=f(n,["outputDimensionality"]);t!==void 0&&c!=null&&m(t,["parameters","outputDimensionality"],c);const u=f(n,["mimeType"]);t!==void 0&&u!=null&&m(t,["instances[]","mimeType"],u);const x=f(n,["autoTruncate"]);return t!==void 0&&x!=null&&m(t,["parameters","autoTruncate"],x),a}function m4(n,t){const a={},i=f(t,["model"]);i!=null&&m(a,["_url","model"],Fe(n,i));const o=f(t,["contents"]);if(o!=null){let x=ef(n,o);Array.isArray(x)&&(x=x.map(h=>h)),m(a,["requests[]","content"],x)}const c=f(t,["config"]);c!=null&&f4(c,a);const u=f(t,["model"]);return u!==void 0&&m(a,["requests[]","model"],Fe(n,u)),a}function x4(n,t){const a={},i=f(t,["model"]);i!=null&&m(a,["_url","model"],Fe(n,i));const o=f(t,["contents"]);if(o!=null){let u=ef(n,o);Array.isArray(u)&&(u=u.map(x=>x)),m(a,["instances[]","content"],u)}const c=f(t,["config"]);return c!=null&&h4(c,a),a}function p4(n){const t={},a=f(n,["sdkHttpResponse"]);a!=null&&m(t,["sdkHttpResponse"],a);const i=f(n,["embeddings"]);if(i!=null){let c=i;Array.isArray(c)&&(c=c.map(u=>u)),m(t,["embeddings"],c)}const o=f(n,["metadata"]);return o!=null&&m(t,["metadata"],o),t}function g4(n){const t={},a=f(n,["sdkHttpResponse"]);a!=null&&m(t,["sdkHttpResponse"],a);const i=f(n,["predictions[]","embeddings"]);if(i!=null){let c=i;Array.isArray(c)&&(c=c.map(u=>QS(u))),m(t,["embeddings"],c)}const o=f(n,["metadata"]);return o!=null&&m(t,["metadata"],o),t}function b4(n){const t={},a=f(n,["endpoint"]);a!=null&&m(t,["name"],a);const i=f(n,["deployedModelId"]);return i!=null&&m(t,["deployedModelId"],i),t}function v4(n){const t={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const a=f(n,["fileUri"]);a!=null&&m(t,["fileUri"],a);const i=f(n,["mimeType"]);return i!=null&&m(t,["mimeType"],i),t}function y4(n){const t={},a=f(n,["id"]);a!=null&&m(t,["id"],a);const i=f(n,["args"]);i!=null&&m(t,["args"],i);const o=f(n,["name"]);if(o!=null&&m(t,["name"],o),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function N4(n){const t={},a=f(n,["mode"]);a!=null&&m(t,["mode"],a);const i=f(n,["allowedFunctionNames"]);if(i!=null&&m(t,["allowedFunctionNames"],i),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function j4(n){const t={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const a=f(n,["description"]);a!=null&&m(t,["description"],a);const i=f(n,["name"]);i!=null&&m(t,["name"],i);const o=f(n,["parameters"]);o!=null&&m(t,["parameters"],o);const c=f(n,["parametersJsonSchema"]);c!=null&&m(t,["parametersJsonSchema"],c);const u=f(n,["response"]);u!=null&&m(t,["response"],u);const x=f(n,["responseJsonSchema"]);return x!=null&&m(t,["responseJsonSchema"],x),t}function w4(n,t,a){const i={},o=f(t,["systemInstruction"]);a!==void 0&&o!=null&&m(a,["systemInstruction"],qo(Ot(o)));const c=f(t,["temperature"]);c!=null&&m(i,["temperature"],c);const u=f(t,["topP"]);u!=null&&m(i,["topP"],u);const x=f(t,["topK"]);x!=null&&m(i,["topK"],x);const h=f(t,["candidateCount"]);h!=null&&m(i,["candidateCount"],h);const p=f(t,["maxOutputTokens"]);p!=null&&m(i,["maxOutputTokens"],p);const b=f(t,["stopSequences"]);b!=null&&m(i,["stopSequences"],b);const y=f(t,["responseLogprobs"]);y!=null&&m(i,["responseLogprobs"],y);const N=f(t,["logprobs"]);N!=null&&m(i,["logprobs"],N);const w=f(t,["presencePenalty"]);w!=null&&m(i,["presencePenalty"],w);const A=f(t,["frequencyPenalty"]);A!=null&&m(i,["frequencyPenalty"],A);const I=f(t,["seed"]);I!=null&&m(i,["seed"],I);const H=f(t,["responseMimeType"]);H!=null&&m(i,["responseMimeType"],H);const G=f(t,["responseSchema"]);G!=null&&m(i,["responseSchema"],tf(G));const F=f(t,["responseJsonSchema"]);if(F!=null&&m(i,["responseJsonSchema"],F),f(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const O=f(t,["safetySettings"]);if(a!==void 0&&O!=null){let le=O;Array.isArray(le)&&(le=le.map(Z=>h5(Z))),m(a,["safetySettings"],le)}const V=f(t,["tools"]);if(a!==void 0&&V!=null){let le=La(V);Array.isArray(le)&&(le=le.map(Z=>y5(za(Z)))),m(a,["tools"],le)}const X=f(t,["toolConfig"]);if(a!==void 0&&X!=null&&m(a,["toolConfig"],v5(X)),f(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const ee=f(t,["cachedContent"]);a!==void 0&&ee!=null&&m(a,["cachedContent"],pn(n,ee));const Q=f(t,["responseModalities"]);Q!=null&&m(i,["responseModalities"],Q);const se=f(t,["mediaResolution"]);se!=null&&m(i,["mediaResolution"],se);const ne=f(t,["speechConfig"]);if(ne!=null&&m(i,["speechConfig"],sf(ne)),f(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const P=f(t,["thinkingConfig"]);P!=null&&m(i,["thinkingConfig"],P);const ie=f(t,["imageConfig"]);return ie!=null&&m(i,["imageConfig"],Q4(ie)),i}function _4(n,t,a){const i={},o=f(t,["systemInstruction"]);a!==void 0&&o!=null&&m(a,["systemInstruction"],Ot(o));const c=f(t,["temperature"]);c!=null&&m(i,["temperature"],c);const u=f(t,["topP"]);u!=null&&m(i,["topP"],u);const x=f(t,["topK"]);x!=null&&m(i,["topK"],x);const h=f(t,["candidateCount"]);h!=null&&m(i,["candidateCount"],h);const p=f(t,["maxOutputTokens"]);p!=null&&m(i,["maxOutputTokens"],p);const b=f(t,["stopSequences"]);b!=null&&m(i,["stopSequences"],b);const y=f(t,["responseLogprobs"]);y!=null&&m(i,["responseLogprobs"],y);const N=f(t,["logprobs"]);N!=null&&m(i,["logprobs"],N);const w=f(t,["presencePenalty"]);w!=null&&m(i,["presencePenalty"],w);const A=f(t,["frequencyPenalty"]);A!=null&&m(i,["frequencyPenalty"],A);const I=f(t,["seed"]);I!=null&&m(i,["seed"],I);const H=f(t,["responseMimeType"]);H!=null&&m(i,["responseMimeType"],H);const G=f(t,["responseSchema"]);G!=null&&m(i,["responseSchema"],tf(G));const F=f(t,["responseJsonSchema"]);F!=null&&m(i,["responseJsonSchema"],F);const O=f(t,["routingConfig"]);O!=null&&m(i,["routingConfig"],O);const V=f(t,["modelSelectionConfig"]);V!=null&&m(i,["modelConfig"],V);const X=f(t,["safetySettings"]);if(a!==void 0&&X!=null){let T=X;Array.isArray(T)&&(T=T.map(E=>E)),m(a,["safetySettings"],T)}const ee=f(t,["tools"]);if(a!==void 0&&ee!=null){let T=La(ee);Array.isArray(T)&&(T=T.map(E=>cb(za(E)))),m(a,["tools"],T)}const Q=f(t,["toolConfig"]);a!==void 0&&Q!=null&&m(a,["toolConfig"],Q);const se=f(t,["labels"]);a!==void 0&&se!=null&&m(a,["labels"],se);const ne=f(t,["cachedContent"]);a!==void 0&&ne!=null&&m(a,["cachedContent"],pn(n,ne));const P=f(t,["responseModalities"]);P!=null&&m(i,["responseModalities"],P);const ie=f(t,["mediaResolution"]);ie!=null&&m(i,["mediaResolution"],ie);const le=f(t,["speechConfig"]);le!=null&&m(i,["speechConfig"],ob(sf(le)));const Z=f(t,["audioTimestamp"]);Z!=null&&m(i,["audioTimestamp"],Z);const q=f(t,["thinkingConfig"]);q!=null&&m(i,["thinkingConfig"],q);const Y=f(t,["imageConfig"]);return Y!=null&&m(i,["imageConfig"],X4(Y)),i}function Pp(n,t){const a={},i=f(t,["model"]);i!=null&&m(a,["_url","model"],Fe(n,i));const o=f(t,["contents"]);if(o!=null){let u=Ns(o);Array.isArray(u)&&(u=u.map(x=>qo(x))),m(a,["contents"],u)}const c=f(t,["config"]);return c!=null&&m(a,["generationConfig"],w4(n,c,a)),a}function qp(n,t){const a={},i=f(t,["model"]);i!=null&&m(a,["_url","model"],Fe(n,i));const o=f(t,["contents"]);if(o!=null){let u=Ns(o);Array.isArray(u)&&(u=u.map(x=>x)),m(a,["contents"],u)}const c=f(t,["config"]);return c!=null&&m(a,["generationConfig"],_4(n,c,a)),a}function Op(n){const t={},a=f(n,["sdkHttpResponse"]);a!=null&&m(t,["sdkHttpResponse"],a);const i=f(n,["candidates"]);if(i!=null){let h=i;Array.isArray(h)&&(h=h.map(p=>FS(p))),m(t,["candidates"],h)}const o=f(n,["modelVersion"]);o!=null&&m(t,["modelVersion"],o);const c=f(n,["promptFeedback"]);c!=null&&m(t,["promptFeedback"],c);const u=f(n,["responseId"]);u!=null&&m(t,["responseId"],u);const x=f(n,["usageMetadata"]);return x!=null&&m(t,["usageMetadata"],x),t}function $p(n){const t={},a=f(n,["sdkHttpResponse"]);a!=null&&m(t,["sdkHttpResponse"],a);const i=f(n,["candidates"]);if(i!=null){let p=i;Array.isArray(p)&&(p=p.map(b=>b)),m(t,["candidates"],p)}const o=f(n,["createTime"]);o!=null&&m(t,["createTime"],o);const c=f(n,["modelVersion"]);c!=null&&m(t,["modelVersion"],c);const u=f(n,["promptFeedback"]);u!=null&&m(t,["promptFeedback"],u);const x=f(n,["responseId"]);x!=null&&m(t,["responseId"],x);const h=f(n,["usageMetadata"]);return h!=null&&m(t,["usageMetadata"],h),t}function S4(n,t){const a={};if(f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=f(n,["numberOfImages"]);t!==void 0&&i!=null&&m(t,["parameters","sampleCount"],i);const o=f(n,["aspectRatio"]);t!==void 0&&o!=null&&m(t,["parameters","aspectRatio"],o);const c=f(n,["guidanceScale"]);if(t!==void 0&&c!=null&&m(t,["parameters","guidanceScale"],c),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=f(n,["safetyFilterLevel"]);t!==void 0&&u!=null&&m(t,["parameters","safetySetting"],u);const x=f(n,["personGeneration"]);t!==void 0&&x!=null&&m(t,["parameters","personGeneration"],x);const h=f(n,["includeSafetyAttributes"]);t!==void 0&&h!=null&&m(t,["parameters","includeSafetyAttributes"],h);const p=f(n,["includeRaiReason"]);t!==void 0&&p!=null&&m(t,["parameters","includeRaiReason"],p);const b=f(n,["language"]);t!==void 0&&b!=null&&m(t,["parameters","language"],b);const y=f(n,["outputMimeType"]);t!==void 0&&y!=null&&m(t,["parameters","outputOptions","mimeType"],y);const N=f(n,["outputCompressionQuality"]);if(t!==void 0&&N!=null&&m(t,["parameters","outputOptions","compressionQuality"],N),f(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const w=f(n,["imageSize"]);if(t!==void 0&&w!=null&&m(t,["parameters","sampleImageSize"],w),f(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return a}function C4(n,t){const a={},i=f(n,["outputGcsUri"]);t!==void 0&&i!=null&&m(t,["parameters","storageUri"],i);const o=f(n,["negativePrompt"]);t!==void 0&&o!=null&&m(t,["parameters","negativePrompt"],o);const c=f(n,["numberOfImages"]);t!==void 0&&c!=null&&m(t,["parameters","sampleCount"],c);const u=f(n,["aspectRatio"]);t!==void 0&&u!=null&&m(t,["parameters","aspectRatio"],u);const x=f(n,["guidanceScale"]);t!==void 0&&x!=null&&m(t,["parameters","guidanceScale"],x);const h=f(n,["seed"]);t!==void 0&&h!=null&&m(t,["parameters","seed"],h);const p=f(n,["safetyFilterLevel"]);t!==void 0&&p!=null&&m(t,["parameters","safetySetting"],p);const b=f(n,["personGeneration"]);t!==void 0&&b!=null&&m(t,["parameters","personGeneration"],b);const y=f(n,["includeSafetyAttributes"]);t!==void 0&&y!=null&&m(t,["parameters","includeSafetyAttributes"],y);const N=f(n,["includeRaiReason"]);t!==void 0&&N!=null&&m(t,["parameters","includeRaiReason"],N);const w=f(n,["language"]);t!==void 0&&w!=null&&m(t,["parameters","language"],w);const A=f(n,["outputMimeType"]);t!==void 0&&A!=null&&m(t,["parameters","outputOptions","mimeType"],A);const I=f(n,["outputCompressionQuality"]);t!==void 0&&I!=null&&m(t,["parameters","outputOptions","compressionQuality"],I);const H=f(n,["addWatermark"]);t!==void 0&&H!=null&&m(t,["parameters","addWatermark"],H);const G=f(n,["labels"]);t!==void 0&&G!=null&&m(t,["labels"],G);const F=f(n,["imageSize"]);t!==void 0&&F!=null&&m(t,["parameters","sampleImageSize"],F);const O=f(n,["enhancePrompt"]);return t!==void 0&&O!=null&&m(t,["parameters","enhancePrompt"],O),a}function E4(n,t){const a={},i=f(t,["model"]);i!=null&&m(a,["_url","model"],Fe(n,i));const o=f(t,["prompt"]);o!=null&&m(a,["instances[0]","prompt"],o);const c=f(t,["config"]);return c!=null&&S4(c,a),a}function T4(n,t){const a={},i=f(t,["model"]);i!=null&&m(a,["_url","model"],Fe(n,i));const o=f(t,["prompt"]);o!=null&&m(a,["instances[0]","prompt"],o);const c=f(t,["config"]);return c!=null&&C4(c,a),a}function k4(n){const t={},a=f(n,["sdkHttpResponse"]);a!=null&&m(t,["sdkHttpResponse"],a);const i=f(n,["predictions"]);if(i!=null){let c=i;Array.isArray(c)&&(c=c.map(u=>$4(u))),m(t,["generatedImages"],c)}const o=f(n,["positivePromptSafetyAttributes"]);return o!=null&&m(t,["positivePromptSafetyAttributes"],ib(o)),t}function A4(n){const t={},a=f(n,["sdkHttpResponse"]);a!=null&&m(t,["sdkHttpResponse"],a);const i=f(n,["predictions"]);if(i!=null){let c=i;Array.isArray(c)&&(c=c.map(u=>Oo(u))),m(t,["generatedImages"],c)}const o=f(n,["positivePromptSafetyAttributes"]);return o!=null&&m(t,["positivePromptSafetyAttributes"],rb(o)),t}function M4(n,t){const a={},i=f(n,["numberOfVideos"]);if(t!==void 0&&i!=null&&m(t,["parameters","sampleCount"],i),f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const o=f(n,["durationSeconds"]);if(t!==void 0&&o!=null&&m(t,["parameters","durationSeconds"],o),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const c=f(n,["aspectRatio"]);t!==void 0&&c!=null&&m(t,["parameters","aspectRatio"],c);const u=f(n,["resolution"]);t!==void 0&&u!=null&&m(t,["parameters","resolution"],u);const x=f(n,["personGeneration"]);if(t!==void 0&&x!=null&&m(t,["parameters","personGeneration"],x),f(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const h=f(n,["negativePrompt"]);t!==void 0&&h!=null&&m(t,["parameters","negativePrompt"],h);const p=f(n,["enhancePrompt"]);if(t!==void 0&&p!=null&&m(t,["parameters","enhancePrompt"],p),f(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const b=f(n,["lastFrame"]);t!==void 0&&b!=null&&m(t,["instances[0]","lastFrame"],$o(b));const y=f(n,["referenceImages"]);if(t!==void 0&&y!=null){let N=y;Array.isArray(N)&&(N=N.map(w=>D5(w))),m(t,["instances[0]","referenceImages"],N)}if(f(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(f(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return a}function R4(n,t){const a={},i=f(n,["numberOfVideos"]);t!==void 0&&i!=null&&m(t,["parameters","sampleCount"],i);const o=f(n,["outputGcsUri"]);t!==void 0&&o!=null&&m(t,["parameters","storageUri"],o);const c=f(n,["fps"]);t!==void 0&&c!=null&&m(t,["parameters","fps"],c);const u=f(n,["durationSeconds"]);t!==void 0&&u!=null&&m(t,["parameters","durationSeconds"],u);const x=f(n,["seed"]);t!==void 0&&x!=null&&m(t,["parameters","seed"],x);const h=f(n,["aspectRatio"]);t!==void 0&&h!=null&&m(t,["parameters","aspectRatio"],h);const p=f(n,["resolution"]);t!==void 0&&p!=null&&m(t,["parameters","resolution"],p);const b=f(n,["personGeneration"]);t!==void 0&&b!=null&&m(t,["parameters","personGeneration"],b);const y=f(n,["pubsubTopic"]);t!==void 0&&y!=null&&m(t,["parameters","pubsubTopic"],y);const N=f(n,["negativePrompt"]);t!==void 0&&N!=null&&m(t,["parameters","negativePrompt"],N);const w=f(n,["enhancePrompt"]);t!==void 0&&w!=null&&m(t,["parameters","enhancePrompt"],w);const A=f(n,["generateAudio"]);t!==void 0&&A!=null&&m(t,["parameters","generateAudio"],A);const I=f(n,["lastFrame"]);t!==void 0&&I!=null&&m(t,["instances[0]","lastFrame"],Rs(I));const H=f(n,["referenceImages"]);if(t!==void 0&&H!=null){let O=H;Array.isArray(O)&&(O=O.map(V=>I5(V))),m(t,["instances[0]","referenceImages"],O)}const G=f(n,["mask"]);t!==void 0&&G!=null&&m(t,["instances[0]","mask"],R5(G));const F=f(n,["compressionQuality"]);return t!==void 0&&F!=null&&m(t,["parameters","compressionQuality"],F),a}function D4(n){const t={},a=f(n,["name"]);a!=null&&m(t,["name"],a);const i=f(n,["metadata"]);i!=null&&m(t,["metadata"],i);const o=f(n,["done"]);o!=null&&m(t,["done"],o);const c=f(n,["error"]);c!=null&&m(t,["error"],c);const u=f(n,["response","generateVideoResponse"]);return u!=null&&m(t,["response"],U4(u)),t}function I4(n){const t={},a=f(n,["name"]);a!=null&&m(t,["name"],a);const i=f(n,["metadata"]);i!=null&&m(t,["metadata"],i);const o=f(n,["done"]);o!=null&&m(t,["done"],o);const c=f(n,["error"]);c!=null&&m(t,["error"],c);const u=f(n,["response"]);return u!=null&&m(t,["response"],P4(u)),t}function z4(n,t){const a={},i=f(t,["model"]);i!=null&&m(a,["_url","model"],Fe(n,i));const o=f(t,["prompt"]);o!=null&&m(a,["instances[0]","prompt"],o);const c=f(t,["image"]);c!=null&&m(a,["instances[0]","image"],$o(c));const u=f(t,["video"]);u!=null&&m(a,["instances[0]","video"],db(u));const x=f(t,["source"]);x!=null&&q4(x,a);const h=f(t,["config"]);return h!=null&&M4(h,a),a}function L4(n,t){const a={},i=f(t,["model"]);i!=null&&m(a,["_url","model"],Fe(n,i));const o=f(t,["prompt"]);o!=null&&m(a,["instances[0]","prompt"],o);const c=f(t,["image"]);c!=null&&m(a,["instances[0]","image"],Rs(c));const u=f(t,["video"]);u!=null&&m(a,["instances[0]","video"],ub(u));const x=f(t,["source"]);x!=null&&O4(x,a);const h=f(t,["config"]);return h!=null&&R4(h,a),a}function U4(n){const t={},a=f(n,["generatedSamples"]);if(a!=null){let c=a;Array.isArray(c)&&(c=c.map(u=>G4(u))),m(t,["generatedVideos"],c)}const i=f(n,["raiMediaFilteredCount"]);i!=null&&m(t,["raiMediaFilteredCount"],i);const o=f(n,["raiMediaFilteredReasons"]);return o!=null&&m(t,["raiMediaFilteredReasons"],o),t}function P4(n){const t={},a=f(n,["videos"]);if(a!=null){let c=a;Array.isArray(c)&&(c=c.map(u=>V4(u))),m(t,["generatedVideos"],c)}const i=f(n,["raiMediaFilteredCount"]);i!=null&&m(t,["raiMediaFilteredCount"],i);const o=f(n,["raiMediaFilteredReasons"]);return o!=null&&m(t,["raiMediaFilteredReasons"],o),t}function q4(n,t){const a={},i=f(n,["prompt"]);t!==void 0&&i!=null&&m(t,["instances[0]","prompt"],i);const o=f(n,["image"]);t!==void 0&&o!=null&&m(t,["instances[0]","image"],$o(o));const c=f(n,["video"]);return t!==void 0&&c!=null&&m(t,["instances[0]","video"],db(c)),a}function O4(n,t){const a={},i=f(n,["prompt"]);t!==void 0&&i!=null&&m(t,["instances[0]","prompt"],i);const o=f(n,["image"]);t!==void 0&&o!=null&&m(t,["instances[0]","image"],Rs(o));const c=f(n,["video"]);return t!==void 0&&c!=null&&m(t,["instances[0]","video"],ub(c)),a}function $4(n){const t={},a=f(n,["_self"]);a!=null&&m(t,["image"],Z4(a));const i=f(n,["raiFilteredReason"]);i!=null&&m(t,["raiFilteredReason"],i);const o=f(n,["_self"]);return o!=null&&m(t,["safetyAttributes"],ib(o)),t}function Oo(n){const t={},a=f(n,["_self"]);a!=null&&m(t,["image"],ab(a));const i=f(n,["raiFilteredReason"]);i!=null&&m(t,["raiFilteredReason"],i);const o=f(n,["_self"]);o!=null&&m(t,["safetyAttributes"],rb(o));const c=f(n,["prompt"]);return c!=null&&m(t,["enhancedPrompt"],c),t}function H4(n){const t={},a=f(n,["_self"]);a!=null&&m(t,["mask"],ab(a));const i=f(n,["labels"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(c=>c)),m(t,["labels"],o)}return t}function G4(n){const t={},a=f(n,["video"]);return a!=null&&m(t,["video"],A5(a)),t}function V4(n){const t={},a=f(n,["_self"]);return a!=null&&m(t,["video"],M5(a)),t}function B4(n){const t={},a=f(n,["modelSelectionConfig"]);a!=null&&m(t,["modelConfig"],a);const i=f(n,["responseJsonSchema"]);i!=null&&m(t,["responseJsonSchema"],i);const o=f(n,["audioTimestamp"]);o!=null&&m(t,["audioTimestamp"],o);const c=f(n,["candidateCount"]);c!=null&&m(t,["candidateCount"],c);const u=f(n,["enableAffectiveDialog"]);u!=null&&m(t,["enableAffectiveDialog"],u);const x=f(n,["frequencyPenalty"]);x!=null&&m(t,["frequencyPenalty"],x);const h=f(n,["logprobs"]);h!=null&&m(t,["logprobs"],h);const p=f(n,["maxOutputTokens"]);p!=null&&m(t,["maxOutputTokens"],p);const b=f(n,["mediaResolution"]);b!=null&&m(t,["mediaResolution"],b);const y=f(n,["presencePenalty"]);y!=null&&m(t,["presencePenalty"],y);const N=f(n,["responseLogprobs"]);N!=null&&m(t,["responseLogprobs"],N);const w=f(n,["responseMimeType"]);w!=null&&m(t,["responseMimeType"],w);const A=f(n,["responseModalities"]);A!=null&&m(t,["responseModalities"],A);const I=f(n,["responseSchema"]);I!=null&&m(t,["responseSchema"],I);const H=f(n,["routingConfig"]);H!=null&&m(t,["routingConfig"],H);const G=f(n,["seed"]);G!=null&&m(t,["seed"],G);const F=f(n,["speechConfig"]);F!=null&&m(t,["speechConfig"],ob(F));const O=f(n,["stopSequences"]);O!=null&&m(t,["stopSequences"],O);const V=f(n,["temperature"]);V!=null&&m(t,["temperature"],V);const X=f(n,["thinkingConfig"]);X!=null&&m(t,["thinkingConfig"],X);const ee=f(n,["topK"]);ee!=null&&m(t,["topK"],ee);const Q=f(n,["topP"]);if(Q!=null&&m(t,["topP"],Q),f(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function F4(n,t){const a={},i=f(t,["model"]);return i!=null&&m(a,["_url","name"],Fe(n,i)),a}function J4(n,t){const a={},i=f(t,["model"]);return i!=null&&m(a,["_url","name"],Fe(n,i)),a}function Y4(n){const t={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const a=f(n,["enableWidget"]);return a!=null&&m(t,["enableWidget"],a),t}function K4(n){const t={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const a=f(n,["timeRangeFilter"]);return a!=null&&m(t,["timeRangeFilter"],a),t}function Q4(n){const t={},a=f(n,["aspectRatio"]);a!=null&&m(t,["aspectRatio"],a);const i=f(n,["imageSize"]);if(i!=null&&m(t,["imageSize"],i),f(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function X4(n){const t={},a=f(n,["aspectRatio"]);a!=null&&m(t,["aspectRatio"],a);const i=f(n,["imageSize"]);i!=null&&m(t,["imageSize"],i);const o=f(n,["outputMimeType"]);o!=null&&m(t,["imageOutputOptions","mimeType"],o);const c=f(n,["outputCompressionQuality"]);return c!=null&&m(t,["imageOutputOptions","compressionQuality"],c),t}function Z4(n){const t={},a=f(n,["bytesBase64Encoded"]);a!=null&&m(t,["imageBytes"],Kn(a));const i=f(n,["mimeType"]);return i!=null&&m(t,["mimeType"],i),t}function ab(n){const t={},a=f(n,["gcsUri"]);a!=null&&m(t,["gcsUri"],a);const i=f(n,["bytesBase64Encoded"]);i!=null&&m(t,["imageBytes"],Kn(i));const o=f(n,["mimeType"]);return o!=null&&m(t,["mimeType"],o),t}function $o(n){const t={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const a=f(n,["imageBytes"]);a!=null&&m(t,["bytesBase64Encoded"],Kn(a));const i=f(n,["mimeType"]);return i!=null&&m(t,["mimeType"],i),t}function Rs(n){const t={},a=f(n,["gcsUri"]);a!=null&&m(t,["gcsUri"],a);const i=f(n,["imageBytes"]);i!=null&&m(t,["bytesBase64Encoded"],Kn(i));const o=f(n,["mimeType"]);return o!=null&&m(t,["mimeType"],o),t}function W4(n,t,a){const i={},o=f(t,["pageSize"]);a!==void 0&&o!=null&&m(a,["_query","pageSize"],o);const c=f(t,["pageToken"]);a!==void 0&&c!=null&&m(a,["_query","pageToken"],c);const u=f(t,["filter"]);a!==void 0&&u!=null&&m(a,["_query","filter"],u);const x=f(t,["queryBase"]);return a!==void 0&&x!=null&&m(a,["_url","models_url"],Xg(n,x)),i}function e5(n,t,a){const i={},o=f(t,["pageSize"]);a!==void 0&&o!=null&&m(a,["_query","pageSize"],o);const c=f(t,["pageToken"]);a!==void 0&&c!=null&&m(a,["_query","pageToken"],c);const u=f(t,["filter"]);a!==void 0&&u!=null&&m(a,["_query","filter"],u);const x=f(t,["queryBase"]);return a!==void 0&&x!=null&&m(a,["_url","models_url"],Xg(n,x)),i}function t5(n,t){const a={},i=f(t,["config"]);return i!=null&&W4(n,i,a),a}function s5(n,t){const a={},i=f(t,["config"]);return i!=null&&e5(n,i,a),a}function n5(n){const t={},a=f(n,["sdkHttpResponse"]);a!=null&&m(t,["sdkHttpResponse"],a);const i=f(n,["nextPageToken"]);i!=null&&m(t,["nextPageToken"],i);const o=f(n,["_self"]);if(o!=null){let c=Zg(o);Array.isArray(c)&&(c=c.map(u=>Au(u))),m(t,["models"],c)}return t}function l5(n){const t={},a=f(n,["sdkHttpResponse"]);a!=null&&m(t,["sdkHttpResponse"],a);const i=f(n,["nextPageToken"]);i!=null&&m(t,["nextPageToken"],i);const o=f(n,["_self"]);if(o!=null){let c=Zg(o);Array.isArray(c)&&(c=c.map(u=>Mu(u))),m(t,["models"],c)}return t}function a5(n){const t={},a=f(n,["maskMode"]);a!=null&&m(t,["maskMode"],a);const i=f(n,["segmentationClasses"]);i!=null&&m(t,["maskClasses"],i);const o=f(n,["maskDilation"]);return o!=null&&m(t,["dilation"],o),t}function Au(n){const t={},a=f(n,["name"]);a!=null&&m(t,["name"],a);const i=f(n,["displayName"]);i!=null&&m(t,["displayName"],i);const o=f(n,["description"]);o!=null&&m(t,["description"],o);const c=f(n,["version"]);c!=null&&m(t,["version"],c);const u=f(n,["_self"]);u!=null&&m(t,["tunedModelInfo"],N5(u));const x=f(n,["inputTokenLimit"]);x!=null&&m(t,["inputTokenLimit"],x);const h=f(n,["outputTokenLimit"]);h!=null&&m(t,["outputTokenLimit"],h);const p=f(n,["supportedGenerationMethods"]);p!=null&&m(t,["supportedActions"],p);const b=f(n,["temperature"]);b!=null&&m(t,["temperature"],b);const y=f(n,["maxTemperature"]);y!=null&&m(t,["maxTemperature"],y);const N=f(n,["topP"]);N!=null&&m(t,["topP"],N);const w=f(n,["topK"]);w!=null&&m(t,["topK"],w);const A=f(n,["thinking"]);return A!=null&&m(t,["thinking"],A),t}function Mu(n){const t={},a=f(n,["name"]);a!=null&&m(t,["name"],a);const i=f(n,["displayName"]);i!=null&&m(t,["displayName"],i);const o=f(n,["description"]);o!=null&&m(t,["description"],o);const c=f(n,["versionId"]);c!=null&&m(t,["version"],c);const u=f(n,["deployedModels"]);if(u!=null){let y=u;Array.isArray(y)&&(y=y.map(N=>b4(N))),m(t,["endpoints"],y)}const x=f(n,["labels"]);x!=null&&m(t,["labels"],x);const h=f(n,["_self"]);h!=null&&m(t,["tunedModelInfo"],j5(h));const p=f(n,["defaultCheckpointId"]);p!=null&&m(t,["defaultCheckpointId"],p);const b=f(n,["checkpoints"]);if(b!=null){let y=b;Array.isArray(y)&&(y=y.map(N=>N)),m(t,["checkpoints"],y)}return t}function i5(n){const t={},a=f(n,["mediaResolution"]);a!=null&&m(t,["mediaResolution"],a);const i=f(n,["codeExecutionResult"]);i!=null&&m(t,["codeExecutionResult"],i);const o=f(n,["executableCode"]);o!=null&&m(t,["executableCode"],o);const c=f(n,["fileData"]);c!=null&&m(t,["fileData"],v4(c));const u=f(n,["functionCall"]);u!=null&&m(t,["functionCall"],y4(u));const x=f(n,["functionResponse"]);x!=null&&m(t,["functionResponse"],x);const h=f(n,["inlineData"]);h!=null&&m(t,["inlineData"],BS(h));const p=f(n,["text"]);p!=null&&m(t,["text"],p);const b=f(n,["thought"]);b!=null&&m(t,["thought"],b);const y=f(n,["thoughtSignature"]);y!=null&&m(t,["thoughtSignature"],y);const N=f(n,["videoMetadata"]);return N!=null&&m(t,["videoMetadata"],N),t}function r5(n){const t={},a=f(n,["productImage"]);return a!=null&&m(t,["image"],Rs(a)),t}function o5(n,t){const a={},i=f(n,["numberOfImages"]);t!==void 0&&i!=null&&m(t,["parameters","sampleCount"],i);const o=f(n,["baseSteps"]);t!==void 0&&o!=null&&m(t,["parameters","baseSteps"],o);const c=f(n,["outputGcsUri"]);t!==void 0&&c!=null&&m(t,["parameters","storageUri"],c);const u=f(n,["seed"]);t!==void 0&&u!=null&&m(t,["parameters","seed"],u);const x=f(n,["safetyFilterLevel"]);t!==void 0&&x!=null&&m(t,["parameters","safetySetting"],x);const h=f(n,["personGeneration"]);t!==void 0&&h!=null&&m(t,["parameters","personGeneration"],h);const p=f(n,["addWatermark"]);t!==void 0&&p!=null&&m(t,["parameters","addWatermark"],p);const b=f(n,["outputMimeType"]);t!==void 0&&b!=null&&m(t,["parameters","outputOptions","mimeType"],b);const y=f(n,["outputCompressionQuality"]);t!==void 0&&y!=null&&m(t,["parameters","outputOptions","compressionQuality"],y);const N=f(n,["enhancePrompt"]);t!==void 0&&N!=null&&m(t,["parameters","enhancePrompt"],N);const w=f(n,["labels"]);return t!==void 0&&w!=null&&m(t,["labels"],w),a}function c5(n,t){const a={},i=f(t,["model"]);i!=null&&m(a,["_url","model"],Fe(n,i));const o=f(t,["source"]);o!=null&&u5(o,a);const c=f(t,["config"]);return c!=null&&o5(c,a),a}function d5(n){const t={},a=f(n,["predictions"]);if(a!=null){let i=a;Array.isArray(i)&&(i=i.map(o=>Oo(o))),m(t,["generatedImages"],i)}return t}function u5(n,t){const a={},i=f(n,["prompt"]);t!==void 0&&i!=null&&m(t,["instances[0]","prompt"],i);const o=f(n,["personImage"]);t!==void 0&&o!=null&&m(t,["instances[0]","personImage","image"],Rs(o));const c=f(n,["productImages"]);if(t!==void 0&&c!=null){let u=c;Array.isArray(u)&&(u=u.map(x=>r5(x))),m(t,["instances[0]","productImages"],u)}return a}function f5(n){const t={},a=f(n,["referenceImage"]);a!=null&&m(t,["referenceImage"],Rs(a));const i=f(n,["referenceId"]);i!=null&&m(t,["referenceId"],i);const o=f(n,["referenceType"]);o!=null&&m(t,["referenceType"],o);const c=f(n,["maskImageConfig"]);c!=null&&m(t,["maskImageConfig"],a5(c));const u=f(n,["controlImageConfig"]);u!=null&&m(t,["controlImageConfig"],ZS(u));const x=f(n,["styleImageConfig"]);x!=null&&m(t,["styleImageConfig"],x);const h=f(n,["subjectImageConfig"]);return h!=null&&m(t,["subjectImageConfig"],h),t}function ib(n){const t={},a=f(n,["safetyAttributes","categories"]);a!=null&&m(t,["categories"],a);const i=f(n,["safetyAttributes","scores"]);i!=null&&m(t,["scores"],i);const o=f(n,["contentType"]);return o!=null&&m(t,["contentType"],o),t}function rb(n){const t={},a=f(n,["safetyAttributes","categories"]);a!=null&&m(t,["categories"],a);const i=f(n,["safetyAttributes","scores"]);i!=null&&m(t,["scores"],i);const o=f(n,["contentType"]);return o!=null&&m(t,["contentType"],o),t}function h5(n){const t={},a=f(n,["category"]);if(a!=null&&m(t,["category"],a),f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=f(n,["threshold"]);return i!=null&&m(t,["threshold"],i),t}function m5(n){const t={},a=f(n,["image"]);return a!=null&&m(t,["image"],Rs(a)),t}function x5(n,t){const a={},i=f(n,["mode"]);t!==void 0&&i!=null&&m(t,["parameters","mode"],i);const o=f(n,["maxPredictions"]);t!==void 0&&o!=null&&m(t,["parameters","maxPredictions"],o);const c=f(n,["confidenceThreshold"]);t!==void 0&&c!=null&&m(t,["parameters","confidenceThreshold"],c);const u=f(n,["maskDilation"]);t!==void 0&&u!=null&&m(t,["parameters","maskDilation"],u);const x=f(n,["binaryColorThreshold"]);t!==void 0&&x!=null&&m(t,["parameters","binaryColorThreshold"],x);const h=f(n,["labels"]);return t!==void 0&&h!=null&&m(t,["labels"],h),a}function p5(n,t){const a={},i=f(t,["model"]);i!=null&&m(a,["_url","model"],Fe(n,i));const o=f(t,["source"]);o!=null&&b5(o,a);const c=f(t,["config"]);return c!=null&&x5(c,a),a}function g5(n){const t={},a=f(n,["predictions"]);if(a!=null){let i=a;Array.isArray(i)&&(i=i.map(o=>H4(o))),m(t,["generatedMasks"],i)}return t}function b5(n,t){const a={},i=f(n,["prompt"]);t!==void 0&&i!=null&&m(t,["instances[0]","prompt"],i);const o=f(n,["image"]);t!==void 0&&o!=null&&m(t,["instances[0]","image"],Rs(o));const c=f(n,["scribbleImage"]);return t!==void 0&&c!=null&&m(t,["instances[0]","scribble"],m5(c)),a}function ob(n){const t={},a=f(n,["languageCode"]);a!=null&&m(t,["languageCode"],a);const i=f(n,["voiceConfig"]);if(i!=null&&m(t,["voiceConfig"],i),f(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return t}function v5(n){const t={},a=f(n,["functionCallingConfig"]);a!=null&&m(t,["functionCallingConfig"],N4(a));const i=f(n,["retrievalConfig"]);return i!=null&&m(t,["retrievalConfig"],i),t}function y5(n){const t={},a=f(n,["functionDeclarations"]);if(a!=null){let b=a;Array.isArray(b)&&(b=b.map(y=>y)),m(t,["functionDeclarations"],b)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(n,["googleSearchRetrieval"]);i!=null&&m(t,["googleSearchRetrieval"],i);const o=f(n,["computerUse"]);o!=null&&m(t,["computerUse"],o);const c=f(n,["fileSearch"]);c!=null&&m(t,["fileSearch"],c);const u=f(n,["codeExecution"]);if(u!=null&&m(t,["codeExecution"],u),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const x=f(n,["googleMaps"]);x!=null&&m(t,["googleMaps"],Y4(x));const h=f(n,["googleSearch"]);h!=null&&m(t,["googleSearch"],K4(h));const p=f(n,["urlContext"]);return p!=null&&m(t,["urlContext"],p),t}function cb(n){const t={},a=f(n,["functionDeclarations"]);if(a!=null){let y=a;Array.isArray(y)&&(y=y.map(N=>j4(N))),m(t,["functionDeclarations"],y)}const i=f(n,["retrieval"]);i!=null&&m(t,["retrieval"],i);const o=f(n,["googleSearchRetrieval"]);o!=null&&m(t,["googleSearchRetrieval"],o);const c=f(n,["computerUse"]);if(c!=null&&m(t,["computerUse"],c),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=f(n,["codeExecution"]);u!=null&&m(t,["codeExecution"],u);const x=f(n,["enterpriseWebSearch"]);x!=null&&m(t,["enterpriseWebSearch"],x);const h=f(n,["googleMaps"]);h!=null&&m(t,["googleMaps"],h);const p=f(n,["googleSearch"]);p!=null&&m(t,["googleSearch"],p);const b=f(n,["urlContext"]);return b!=null&&m(t,["urlContext"],b),t}function N5(n){const t={},a=f(n,["baseModel"]);a!=null&&m(t,["baseModel"],a);const i=f(n,["createTime"]);i!=null&&m(t,["createTime"],i);const o=f(n,["updateTime"]);return o!=null&&m(t,["updateTime"],o),t}function j5(n){const t={},a=f(n,["labels","google-vertex-llm-tuning-base-model-id"]);a!=null&&m(t,["baseModel"],a);const i=f(n,["createTime"]);i!=null&&m(t,["createTime"],i);const o=f(n,["updateTime"]);return o!=null&&m(t,["updateTime"],o),t}function w5(n,t){const a={},i=f(n,["displayName"]);t!==void 0&&i!=null&&m(t,["displayName"],i);const o=f(n,["description"]);t!==void 0&&o!=null&&m(t,["description"],o);const c=f(n,["defaultCheckpointId"]);return t!==void 0&&c!=null&&m(t,["defaultCheckpointId"],c),a}function _5(n,t){const a={},i=f(n,["displayName"]);t!==void 0&&i!=null&&m(t,["displayName"],i);const o=f(n,["description"]);t!==void 0&&o!=null&&m(t,["description"],o);const c=f(n,["defaultCheckpointId"]);return t!==void 0&&c!=null&&m(t,["defaultCheckpointId"],c),a}function S5(n,t){const a={},i=f(t,["model"]);i!=null&&m(a,["_url","name"],Fe(n,i));const o=f(t,["config"]);return o!=null&&w5(o,a),a}function C5(n,t){const a={},i=f(t,["model"]);i!=null&&m(a,["_url","model"],Fe(n,i));const o=f(t,["config"]);return o!=null&&_5(o,a),a}function E5(n,t){const a={},i=f(n,["outputGcsUri"]);t!==void 0&&i!=null&&m(t,["parameters","storageUri"],i);const o=f(n,["safetyFilterLevel"]);t!==void 0&&o!=null&&m(t,["parameters","safetySetting"],o);const c=f(n,["personGeneration"]);t!==void 0&&c!=null&&m(t,["parameters","personGeneration"],c);const u=f(n,["includeRaiReason"]);t!==void 0&&u!=null&&m(t,["parameters","includeRaiReason"],u);const x=f(n,["outputMimeType"]);t!==void 0&&x!=null&&m(t,["parameters","outputOptions","mimeType"],x);const h=f(n,["outputCompressionQuality"]);t!==void 0&&h!=null&&m(t,["parameters","outputOptions","compressionQuality"],h);const p=f(n,["enhanceInputImage"]);t!==void 0&&p!=null&&m(t,["parameters","upscaleConfig","enhanceInputImage"],p);const b=f(n,["imagePreservationFactor"]);t!==void 0&&b!=null&&m(t,["parameters","upscaleConfig","imagePreservationFactor"],b);const y=f(n,["labels"]);t!==void 0&&y!=null&&m(t,["labels"],y);const N=f(n,["numberOfImages"]);t!==void 0&&N!=null&&m(t,["parameters","sampleCount"],N);const w=f(n,["mode"]);return t!==void 0&&w!=null&&m(t,["parameters","mode"],w),a}function T5(n,t){const a={},i=f(t,["model"]);i!=null&&m(a,["_url","model"],Fe(n,i));const o=f(t,["image"]);o!=null&&m(a,["instances[0]","image"],Rs(o));const c=f(t,["upscaleFactor"]);c!=null&&m(a,["parameters","upscaleConfig","upscaleFactor"],c);const u=f(t,["config"]);return u!=null&&E5(u,a),a}function k5(n){const t={},a=f(n,["sdkHttpResponse"]);a!=null&&m(t,["sdkHttpResponse"],a);const i=f(n,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(c=>Oo(c))),m(t,["generatedImages"],o)}return t}function A5(n){const t={},a=f(n,["uri"]);a!=null&&m(t,["uri"],a);const i=f(n,["encodedVideo"]);i!=null&&m(t,["videoBytes"],Kn(i));const o=f(n,["encoding"]);return o!=null&&m(t,["mimeType"],o),t}function M5(n){const t={},a=f(n,["gcsUri"]);a!=null&&m(t,["uri"],a);const i=f(n,["bytesBase64Encoded"]);i!=null&&m(t,["videoBytes"],Kn(i));const o=f(n,["mimeType"]);return o!=null&&m(t,["mimeType"],o),t}function R5(n){const t={},a=f(n,["image"]);a!=null&&m(t,["_self"],Rs(a));const i=f(n,["maskMode"]);return i!=null&&m(t,["maskMode"],i),t}function D5(n){const t={},a=f(n,["image"]);a!=null&&m(t,["image"],$o(a));const i=f(n,["referenceType"]);return i!=null&&m(t,["referenceType"],i),t}function I5(n){const t={},a=f(n,["image"]);a!=null&&m(t,["image"],Rs(a));const i=f(n,["referenceType"]);return i!=null&&m(t,["referenceType"],i),t}function db(n){const t={},a=f(n,["uri"]);a!=null&&m(t,["uri"],a);const i=f(n,["videoBytes"]);i!=null&&m(t,["encodedVideo"],Kn(i));const o=f(n,["mimeType"]);return o!=null&&m(t,["encoding"],o),t}function ub(n){const t={},a=f(n,["uri"]);a!=null&&m(t,["gcsUri"],a);const i=f(n,["videoBytes"]);i!=null&&m(t,["bytesBase64Encoded"],Kn(i));const o=f(n,["mimeType"]);return o!=null&&m(t,["mimeType"],o),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const z5="Content-Type",L5="X-Server-Timeout",U5="User-Agent",Ru="x-goog-api-client",P5="1.30.0",q5=`google-genai-sdk/${P5}`,O5="v1beta1",$5="v1beta",Hp=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class H5{constructor(t){var a,i;this.clientOptions=Object.assign(Object.assign({},t),{project:t.project,location:t.location,apiKey:t.apiKey,vertexai:t.vertexai});const o={};this.clientOptions.vertexai?(o.apiVersion=(a=this.clientOptions.apiVersion)!==null&&a!==void 0?a:O5,o.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(o.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:$5,o.baseUrl="https://generativelanguage.googleapis.com/"),o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,t.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,t.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var t;return(t=this.clientOptions.vertexai)!==null&&t!==void 0?t:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(t){if(!t||t.baseUrl===void 0||t.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[t.baseUrl.endsWith("/")?t.baseUrl.slice(0,-1):t.baseUrl];return t.apiVersion&&t.apiVersion!==""&&i.push(t.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const t=this.getBaseUrl(),a=new URL(t);return a.protocol=a.protocol=="http:"?"ws":"wss",a.toString()}setBaseUrl(t){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=t;else throw new Error("HTTP options are not correctly set.")}constructUrl(t,a,i){const o=[this.getRequestUrlInternal(a)];return i&&o.push(this.getBaseResourcePath()),t!==""&&o.push(t),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(t){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||t.path.startsWith("projects/")||t.httpMethod==="GET"&&t.path.startsWith("publishers/google/models"))}async request(t){let a=this.clientOptions.httpOptions;t.httpOptions&&(a=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const i=this.shouldPrependVertexProjectPath(t),o=this.constructUrl(t.path,a,i);if(t.queryParams)for(const[u,x]of Object.entries(t.queryParams))o.searchParams.append(u,String(x));let c={};if(t.httpMethod==="GET"){if(t.body&&t.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else c.body=t.body;return c=await this.includeExtraHttpOptionsToRequestInit(c,a,o.toString(),t.abortSignal),this.unaryApiCall(o,c,t.httpMethod)}patchHttpOptions(t,a){const i=JSON.parse(JSON.stringify(t));for(const[o,c]of Object.entries(a))typeof c=="object"?i[o]=Object.assign(Object.assign({},i[o]),c):c!==void 0&&(i[o]=c);return i}async requestStream(t){let a=this.clientOptions.httpOptions;t.httpOptions&&(a=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const i=this.shouldPrependVertexProjectPath(t),o=this.constructUrl(t.path,a,i);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let c={};return c.body=t.body,c=await this.includeExtraHttpOptionsToRequestInit(c,a,o.toString(),t.abortSignal),this.streamApiCall(o,c,t.httpMethod)}async includeExtraHttpOptionsToRequestInit(t,a,i,o){if(a&&a.timeout||o){const c=new AbortController,u=c.signal;if(a.timeout&&(a==null?void 0:a.timeout)>0){const x=setTimeout(()=>c.abort(),a.timeout);x&&typeof x.unref=="function"&&x.unref()}o&&o.addEventListener("abort",()=>{c.abort()}),t.signal=u}return a&&a.extraBody!==null&&G5(t,a.extraBody),t.headers=await this.getHeadersInternal(a,i),t}async unaryApiCall(t,a,i){return this.apiCall(t.toString(),Object.assign(Object.assign({},a),{method:i})).then(async o=>(await Gp(o),new Eu(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(t,a,i){return this.apiCall(t.toString(),Object.assign(Object.assign({},a),{method:i})).then(async o=>(await Gp(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(t){var a;return Ca(this,arguments,function*(){const o=(a=t==null?void 0:t.body)===null||a===void 0?void 0:a.getReader(),c=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let u="";for(;;){const{done:x,value:h}=yield rt(o.read());if(x){if(u.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const p=c.decode(h,{stream:!0});try{const y=JSON.parse(p);if("error"in y){const N=JSON.parse(JSON.stringify(y.error)),w=N.status,A=N.code,I=`got status: ${w}. ${JSON.stringify(y)}`;if(A>=400&&A<600)throw new Po({message:I,status:A})}}catch(y){if(y.name==="ApiError")throw y}u+=p;let b=u.match(Hp);for(;b;){const y=b[1];try{const N=new Response(y,{headers:t==null?void 0:t.headers,status:t==null?void 0:t.status,statusText:t==null?void 0:t.statusText});yield yield rt(new Eu(N)),u=u.slice(b[0].length),b=u.match(Hp)}catch(N){throw new Error(`exception parsing stream chunk ${y}. ${N}`)}}}}finally{o.releaseLock()}})}async apiCall(t,a){return fetch(t,a).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const t={},a=q5+" "+this.clientOptions.userAgentExtra;return t[U5]=a,t[Ru]=a,t[z5]="application/json",t}async getHeadersInternal(t,a){const i=new Headers;if(t&&t.headers){for(const[o,c]of Object.entries(t.headers))i.append(o,c);t.timeout&&t.timeout>0&&i.append(L5,String(Math.ceil(t.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,a),i}getFileName(t){var a;let i="";return typeof t=="string"&&(i=t.replace(/[/\\]+$/,""),i=(a=i.split(/[/\\]/).pop())!==null&&a!==void 0?a:""),i}async uploadFile(t,a){var i;const o={};a!=null&&(o.mimeType=a.mimeType,o.name=a.name,o.displayName=a.displayName),o.name&&!o.name.startsWith("files/")&&(o.name=`files/${o.name}`);const c=this.clientOptions.uploader,u=await c.stat(t);o.sizeBytes=String(u.size);const x=(i=a==null?void 0:a.mimeType)!==null&&i!==void 0?i:u.type;if(x===void 0||x==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");o.mimeType=x;const h={file:o},p=this.getFileName(t),b=ye("upload/v1beta/files",h._url),y=await this.fetchUploadUrl(b,o.sizeBytes,o.mimeType,p,h,a==null?void 0:a.httpOptions);return c.upload(t,y,this)}async uploadFileToFileSearchStore(t,a,i){var o;const c=this.clientOptions.uploader,u=await c.stat(a),x=String(u.size),h=(o=i==null?void 0:i.mimeType)!==null&&o!==void 0?o:u.type;if(h===void 0||h==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const p=`upload/v1beta/${t}:uploadToFileSearchStore`,b=this.getFileName(a),y={};i!=null&&i.customMetadata&&(y.customMetadata=i.customMetadata),i!=null&&i.chunkingConfig&&(y.chunkingConfig=i.chunkingConfig);const N=await this.fetchUploadUrl(p,x,h,b,y,i==null?void 0:i.httpOptions);return c.uploadToFileSearchStore(a,N,this)}async downloadFile(t){await this.clientOptions.downloader.download(t,this)}async fetchUploadUrl(t,a,i,o,c,u){var x;let h={};u?h=u:h={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${a}`,"X-Goog-Upload-Header-Content-Type":`${i}`},o?{"X-Goog-Upload-File-Name":o}:{})};const p=await this.request({path:t,body:JSON.stringify(c),httpMethod:"POST",httpOptions:h});if(!p||!(p!=null&&p.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const b=(x=p==null?void 0:p.headers)===null||x===void 0?void 0:x["x-goog-upload-url"];if(b===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return b}}async function Gp(n){var t;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const a=n.status;let i;!((t=n.headers.get("content-type"))===null||t===void 0)&&t.includes("application/json")?i=await n.json():i={error:{message:await n.text(),code:n.status,status:n.statusText}};const o=JSON.stringify(i);throw a>=400&&a<600?new Po({message:o,status:a}):new Error(o)}}function G5(n,t){if(!t||Object.keys(t).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let a={};if(typeof n.body=="string"&&n.body.length>0)try{const c=JSON.parse(n.body);if(typeof c=="object"&&c!==null&&!Array.isArray(c))a=c;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(c,u){const x=Object.assign({},c);for(const h in u)if(Object.prototype.hasOwnProperty.call(u,h)){const p=u[h],b=x[h];p&&typeof p=="object"&&!Array.isArray(p)&&b&&typeof b=="object"&&!Array.isArray(b)?x[h]=i(b,p):(b&&p&&typeof b!=typeof p&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${h}". Original type: ${typeof b}, New type: ${typeof p}. Overwriting.`),x[h]=p)}return x}const o=i(a,t);n.body=JSON.stringify(o)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const V5="mcp_used/unknown";let B5=!1;function fb(n){for(const t of n)if(F5(t)||typeof t=="object"&&"inputSchema"in t)return!0;return B5}function hb(n){var t;const a=(t=n[Ru])!==null&&t!==void 0?t:"";n[Ru]=(a+` ${V5}`).trimStart()}function F5(n){return n!==null&&typeof n=="object"&&n instanceof lf}function J5(n,t=100){return Ca(this,arguments,function*(){let i,o=0;for(;o<t;){const c=yield rt(n.listTools({cursor:i}));for(const u of c.tools)yield yield rt(u),o++;if(!c.nextCursor)break;i=c.nextCursor}})}class lf{constructor(t=[],a){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=t,this.config=a}static create(t,a){return new lf(t,a)}async initialize(){var t,a,i,o;if(this.mcpTools.length>0)return;const c={},u=[];for(const b of this.mcpClients)try{for(var x=!0,h=(a=void 0,Hi(J5(b))),p;p=await h.next(),t=p.done,!t;x=!0){o=p.value,x=!1;const y=o;u.push(y);const N=y.name;if(c[N])throw new Error(`Duplicate function name ${N} found in MCP tools. Please ensure function names are unique.`);c[N]=b}}catch(y){a={error:y}}finally{try{!x&&!t&&(i=h.return)&&await i.call(h)}finally{if(a)throw a.error}}this.mcpTools=u,this.functionNameToMcpClient=c}async tool(){return await this.initialize(),qw(this.mcpTools,this.config)}async callTool(t){await this.initialize();const a=[];for(const i of t)if(i.name in this.functionNameToMcpClient){const o=this.functionNameToMcpClient[i.name];let c;this.config.timeout&&(c={timeout:this.config.timeout});const u=await o.callTool({name:i.name,arguments:i.args},void 0,c);a.push({functionResponse:{name:i.name,response:u.isError?{error:u}:u}})}return a}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function Y5(n,t,a){const i=new Mw;let o;a.data instanceof Blob?o=JSON.parse(await a.data.text()):o=JSON.parse(a.data),Object.assign(i,o),t(i)}class K5{constructor(t,a,i){this.apiClient=t,this.auth=a,this.webSocketFactory=i}async connect(t){var a,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const o=this.apiClient.getWebsocketBaseUrl(),c=this.apiClient.getApiVersion(),u=Z5(this.apiClient.getDefaultHeaders()),x=this.apiClient.getApiKey(),h=`${o}/ws/google.ai.generativelanguage.${c}.GenerativeService.BidiGenerateMusic?key=${x}`;let p=()=>{};const b=new Promise(O=>{p=O}),y=t.callbacks,N=function(){p({})},w=this.apiClient,A={onopen:N,onmessage:O=>{Y5(w,y.onmessage,O)},onerror:(a=y==null?void 0:y.onerror)!==null&&a!==void 0?a:function(O){},onclose:(i=y==null?void 0:y.onclose)!==null&&i!==void 0?i:function(O){}},I=this.webSocketFactory.create(h,X5(u),A);I.connect(),await b;const F={setup:{model:Fe(this.apiClient,t.model)}};return I.send(JSON.stringify(F)),new Q5(I,this.apiClient)}}class Q5{constructor(t,a){this.conn=t,this.apiClient=a}async setWeightedPrompts(t){if(!t.weightedPrompts||Object.keys(t.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const a=LS(t);this.conn.send(JSON.stringify({clientContent:a}))}async setMusicGenerationConfig(t){t.musicGenerationConfig||(t.musicGenerationConfig={});const a=zS(t);this.conn.send(JSON.stringify(a))}sendPlaybackControl(t){const a={playbackControl:t};this.conn.send(JSON.stringify(a))}play(){this.sendPlaybackControl(_a.PLAY)}pause(){this.sendPlaybackControl(_a.PAUSE)}stop(){this.sendPlaybackControl(_a.STOP)}resetContext(){this.sendPlaybackControl(_a.RESET_CONTEXT)}close(){this.conn.close()}}function X5(n){const t={};return n.forEach((a,i)=>{t[i]=a}),t}function Z5(n){const t=new Headers;for(const[a,i]of Object.entries(n))t.append(a,i);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const W5="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function eC(n,t,a){const i=new Aw;let o;a.data instanceof Blob?o=await a.data.text():a.data instanceof ArrayBuffer?o=new TextDecoder().decode(a.data):o=a.data;const c=JSON.parse(o);if(n.isVertexAI()){const u=qS(c);Object.assign(i,u)}else Object.assign(i,c);t(i)}class tC{constructor(t,a,i){this.apiClient=t,this.auth=a,this.webSocketFactory=i,this.music=new K5(this.apiClient,this.auth,this.webSocketFactory)}async connect(t){var a,i,o,c,u,x;if(t.config&&t.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const h=this.apiClient.getWebsocketBaseUrl(),p=this.apiClient.getApiVersion();let b;const y=this.apiClient.getHeaders();t.config&&t.config.tools&&fb(t.config.tools)&&hb(y);const N=aC(y);if(this.apiClient.isVertexAI())b=`${h}/ws/google.cloud.aiplatform.${p}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(N,b);else{const ne=this.apiClient.getApiKey();let P="BidiGenerateContent",ie="key";ne!=null&&ne.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),p!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),P="BidiGenerateContentConstrained",ie="access_token"),b=`${h}/ws/google.ai.generativelanguage.${p}.GenerativeService.${P}?${ie}=${ne}`}let w=()=>{};const A=new Promise(ne=>{w=ne}),I=t.callbacks,H=function(){var ne;(ne=I==null?void 0:I.onopen)===null||ne===void 0||ne.call(I),w({})},G=this.apiClient,F={onopen:H,onmessage:ne=>{eC(G,I.onmessage,ne)},onerror:(a=I==null?void 0:I.onerror)!==null&&a!==void 0?a:function(ne){},onclose:(i=I==null?void 0:I.onclose)!==null&&i!==void 0?i:function(ne){}},O=this.webSocketFactory.create(b,lC(N),F);O.connect(),await A;let V=Fe(this.apiClient,t.model);if(this.apiClient.isVertexAI()&&V.startsWith("publishers/")){const ne=this.apiClient.getProject(),P=this.apiClient.getLocation();V=`projects/${ne}/locations/${P}/`+V}let X={};this.apiClient.isVertexAI()&&((o=t.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(t.config===void 0?t.config={responseModalities:[Mo.AUDIO]}:t.config.responseModalities=[Mo.AUDIO]),!((c=t.config)===null||c===void 0)&&c.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const ee=(x=(u=t.config)===null||u===void 0?void 0:u.tools)!==null&&x!==void 0?x:[],Q=[];for(const ne of ee)if(this.isCallableTool(ne)){const P=ne;Q.push(await P.tool())}else Q.push(ne);Q.length>0&&(t.config.tools=Q);const se={model:V,config:t.config,callbacks:t.callbacks};return this.apiClient.isVertexAI()?X=IS(this.apiClient,se):X=DS(this.apiClient,se),delete X.config,O.send(JSON.stringify(X)),new nC(O,this.apiClient)}isCallableTool(t){return"callTool"in t&&typeof t.callTool=="function"}}const sC={turnComplete:!0};class nC{constructor(t,a){this.conn=t,this.apiClient=a}tLiveClientContent(t,a){if(a.turns!==null&&a.turns!==void 0){let i=[];try{i=Ns(a.turns),t.isVertexAI()||(i=i.map(o=>qo(o)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof a.turns}'`)}return{clientContent:{turns:i,turnComplete:a.turnComplete}}}return{clientContent:{turnComplete:a.turnComplete}}}tLiveClienttToolResponse(t,a){let i=[];if(a.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(a.functionResponses)?i=a.functionResponses:i=[a.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const c of i){if(typeof c!="object"||c===null||!("name"in c)||!("response"in c))throw new Error(`Could not parse function response, type '${typeof c}'.`);if(!t.isVertexAI()&&!("id"in c))throw new Error(W5)}return{toolResponse:{functionResponses:i}}}sendClientContent(t){t=Object.assign(Object.assign({},sC),t);const a=this.tLiveClientContent(this.apiClient,t);this.conn.send(JSON.stringify(a))}sendRealtimeInput(t){let a={};this.apiClient.isVertexAI()?a={realtimeInput:PS(t)}:a={realtimeInput:US(t)},this.conn.send(JSON.stringify(a))}sendToolResponse(t){if(t.functionResponses==null)throw new Error("Tool response parameters are required.");const a=this.tLiveClienttToolResponse(this.apiClient,t);this.conn.send(JSON.stringify(a))}close(){this.conn.close()}}function lC(n){const t={};return n.forEach((a,i)=>{t[i]=a}),t}function aC(n){const t=new Headers;for(const[a,i]of Object.entries(n))t.append(a,i);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Vp=10;function Bp(n){var t,a,i;if(!((t=n==null?void 0:n.automaticFunctionCalling)===null||t===void 0)&&t.disable)return!0;let o=!1;for(const u of(a=n==null?void 0:n.tools)!==null&&a!==void 0?a:[])if(Ea(u)){o=!0;break}if(!o)return!0;const c=(i=n==null?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return c&&(c<0||!Number.isInteger(c))||c==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",c),!0):!1}function Ea(n){return"callTool"in n&&typeof n.callTool=="function"}function iC(n){var t,a,i;return(i=(a=(t=n.config)===null||t===void 0?void 0:t.tools)===null||a===void 0?void 0:a.some(o=>Ea(o)))!==null&&i!==void 0?i:!1}function Fp(n){var t;const a=[];return!((t=n==null?void 0:n.config)===null||t===void 0)&&t.tools&&n.config.tools.forEach((i,o)=>{if(Ea(i))return;const c=i;c.functionDeclarations&&c.functionDeclarations.length>0&&a.push(o)}),a}function Jp(n){var t;return!(!((t=n==null?void 0:n.automaticFunctionCalling)===null||t===void 0)&&t.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class rC extends xn{constructor(t){super(),this.apiClient=t,this.generateContent=async a=>{var i,o,c,u,x;const h=await this.processParamsMaybeAddMcpUsage(a);if(this.maybeMoveToResponseJsonSchem(a),!iC(a)||Bp(a.config))return await this.generateContentInternal(h);const p=Fp(a);if(p.length>0){const I=p.map(H=>`tools[${H}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${I}.`)}let b,y;const N=Ns(h.contents),w=(c=(o=(i=h.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&c!==void 0?c:Vp;let A=0;for(;A<w&&(b=await this.generateContentInternal(h),!(!b.functionCalls||b.functionCalls.length===0));){const I=b.candidates[0].content,H=[];for(const G of(x=(u=a.config)===null||u===void 0?void 0:u.tools)!==null&&x!==void 0?x:[])if(Ea(G)){const O=await G.callTool(b.functionCalls);H.push(...O)}A++,y={role:"user",parts:H},h.contents=Ns(h.contents),h.contents.push(I),h.contents.push(y),Jp(h.config)&&(N.push(I),N.push(y))}return Jp(h.config)&&(b.automaticFunctionCallingHistory=N),b},this.generateContentStream=async a=>{var i,o,c,u,x;if(this.maybeMoveToResponseJsonSchem(a),Bp(a.config)){const y=await this.processParamsMaybeAddMcpUsage(a);return await this.generateContentStreamInternal(y)}const h=Fp(a);if(h.length>0){const y=h.map(N=>`tools[${N}]`).join(", ");throw new Error(`Incompatible tools found at ${y}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const p=(c=(o=(i=a==null?void 0:a.config)===null||i===void 0?void 0:i.toolConfig)===null||o===void 0?void 0:o.functionCallingConfig)===null||c===void 0?void 0:c.streamFunctionCallArguments,b=(x=(u=a==null?void 0:a.config)===null||u===void 0?void 0:u.automaticFunctionCalling)===null||x===void 0?void 0:x.disable;if(p&&!b)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(a)},this.generateImages=async a=>await this.generateImagesInternal(a).then(i=>{var o;let c;const u=[];if(i!=null&&i.generatedImages)for(const h of i.generatedImages)h&&(h!=null&&h.safetyAttributes)&&((o=h==null?void 0:h.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?c=h==null?void 0:h.safetyAttributes:u.push(h);let x;return c?x={generatedImages:u,positivePromptSafetyAttributes:c,sdkHttpResponse:i.sdkHttpResponse}:x={generatedImages:u,sdkHttpResponse:i.sdkHttpResponse},x}),this.list=async a=>{var i;const u={config:Object.assign(Object.assign({},{queryBase:!0}),a==null?void 0:a.config)};if(this.apiClient.isVertexAI()&&!u.config.queryBase){if(!((i=u.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");u.config.filter="labels.tune-type:*"}return new Tl(fn.PAGED_ITEM_MODELS,x=>this.listInternal(x),await this.listInternal(u),u)},this.editImage=async a=>{const i={model:a.model,prompt:a.prompt,referenceImages:[],config:a.config};return a.referenceImages&&a.referenceImages&&(i.referenceImages=a.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async a=>{let i={numberOfImages:1,mode:"upscale"};a.config&&(i=Object.assign(Object.assign({},i),a.config));const o={model:a.model,image:a.image,upscaleFactor:a.upscaleFactor,config:i};return await this.upscaleImageInternal(o)},this.generateVideos=async a=>{var i,o,c,u,x,h;if((a.prompt||a.image||a.video)&&a.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=a.video)===null||i===void 0)&&i.uri&&(!((o=a.video)===null||o===void 0)&&o.videoBytes)?a.video={uri:a.video.uri,mimeType:a.video.mimeType}:!((u=(c=a.source)===null||c===void 0?void 0:c.video)===null||u===void 0)&&u.uri&&(!((h=(x=a.source)===null||x===void 0?void 0:x.video)===null||h===void 0)&&h.videoBytes)&&(a.source.video={uri:a.source.video.uri,mimeType:a.source.video.mimeType})),await this.generateVideosInternal(a)}}maybeMoveToResponseJsonSchem(t){t.config&&t.config.responseSchema&&(t.config.responseJsonSchema||Object.keys(t.config.responseSchema).includes("$schema")&&(t.config.responseJsonSchema=t.config.responseSchema,delete t.config.responseSchema))}async processParamsMaybeAddMcpUsage(t){var a,i,o;const c=(a=t.config)===null||a===void 0?void 0:a.tools;if(!c)return t;const u=await Promise.all(c.map(async h=>Ea(h)?await h.tool():h)),x={model:t.model,contents:t.contents,config:Object.assign(Object.assign({},t.config),{tools:u})};if(x.config.tools=u,t.config&&t.config.tools&&fb(t.config.tools)){const h=(o=(i=t.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&o!==void 0?o:{};let p=Object.assign({},h);Object.keys(p).length===0&&(p=this.apiClient.getDefaultHeaders()),hb(p),x.config.httpOptions=Object.assign(Object.assign({},t.config.httpOptions),{headers:p})}return x}async initAfcToolsMap(t){var a,i,o;const c=new Map;for(const u of(i=(a=t.config)===null||a===void 0?void 0:a.tools)!==null&&i!==void 0?i:[])if(Ea(u)){const x=u,h=await x.tool();for(const p of(o=h.functionDeclarations)!==null&&o!==void 0?o:[]){if(!p.name)throw new Error("Function declaration name is required.");if(c.has(p.name))throw new Error(`Duplicate tool declaration name: ${p.name}`);c.set(p.name,x)}}return c}async processAfcStream(t){var a,i,o;const c=(o=(i=(a=t.config)===null||a===void 0?void 0:a.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&o!==void 0?o:Vp;let u=!1,x=0;const h=await this.initAfcToolsMap(t);return(function(p,b,y){var N,w;return Ca(this,arguments,function*(){for(var A,I,H,G;x<c;){u&&(x++,u=!1);const X=yield rt(p.processParamsMaybeAddMcpUsage(y)),ee=yield rt(p.generateContentStreamInternal(X)),Q=[],se=[];try{for(var F=!0,O=(I=void 0,Hi(ee)),V;V=yield rt(O.next()),A=V.done,!A;F=!0){G=V.value,F=!1;const ne=G;if(yield yield rt(ne),ne.candidates&&(!((N=ne.candidates[0])===null||N===void 0)&&N.content)){se.push(ne.candidates[0].content);for(const P of(w=ne.candidates[0].content.parts)!==null&&w!==void 0?w:[])if(x<c&&P.functionCall){if(!P.functionCall.name)throw new Error("Function call name was not returned by the model.");if(b.has(P.functionCall.name)){const ie=yield rt(b.get(P.functionCall.name).callTool([P.functionCall]));Q.push(...ie)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${b.keys()}, mising tool: ${P.functionCall.name}`)}}}}catch(ne){I={error:ne}}finally{try{!F&&!A&&(H=O.return)&&(yield rt(H.call(O)))}finally{if(I)throw I.error}}if(Q.length>0){u=!0;const ne=new Ii;ne.candidates=[{content:{role:"user",parts:Q}}],yield yield rt(ne);const P=[];P.push(...se),P.push({role:"user",parts:Q});const ie=Ns(y.contents).concat(P);y.contents=ie}else break}})})(this,h,t)}async generateContentInternal(t){var a,i,o,c;let u,x="",h={};if(this.apiClient.isVertexAI()){const p=qp(this.apiClient,t);return x=ye("{model}:generateContent",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:x,queryParams:h,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(b=>b.json().then(y=>{const N=y;return N.sdkHttpResponse={headers:b.headers},N})),u.then(b=>{const y=$p(b),N=new Ii;return Object.assign(N,y),N})}else{const p=Pp(this.apiClient,t);return x=ye("{model}:generateContent",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:x,queryParams:h,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(c=t.config)===null||c===void 0?void 0:c.abortSignal}).then(b=>b.json().then(y=>{const N=y;return N.sdkHttpResponse={headers:b.headers},N})),u.then(b=>{const y=Op(b),N=new Ii;return Object.assign(N,y),N})}}async generateContentStreamInternal(t){var a,i,o,c;let u,x="",h={};if(this.apiClient.isVertexAI()){const p=qp(this.apiClient,t);return x=ye("{model}:streamGenerateContent?alt=sse",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.requestStream({path:x,queryParams:h,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}),u.then(function(y){return Ca(this,arguments,function*(){var N,w,A,I;try{for(var H=!0,G=Hi(y),F;F=yield rt(G.next()),N=F.done,!N;H=!0){I=F.value,H=!1;const O=I,V=$p(yield rt(O.json()));V.sdkHttpResponse={headers:O.headers};const X=new Ii;Object.assign(X,V),yield yield rt(X)}}catch(O){w={error:O}}finally{try{!H&&!N&&(A=G.return)&&(yield rt(A.call(G)))}finally{if(w)throw w.error}}})})}else{const p=Pp(this.apiClient,t);return x=ye("{model}:streamGenerateContent?alt=sse",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.requestStream({path:x,queryParams:h,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(c=t.config)===null||c===void 0?void 0:c.abortSignal}),u.then(function(y){return Ca(this,arguments,function*(){var N,w,A,I;try{for(var H=!0,G=Hi(y),F;F=yield rt(G.next()),N=F.done,!N;H=!0){I=F.value,H=!1;const O=I,V=Op(yield rt(O.json()));V.sdkHttpResponse={headers:O.headers};const X=new Ii;Object.assign(X,V),yield yield rt(X)}}catch(O){w={error:O}}finally{try{!H&&!N&&(A=G.return)&&(yield rt(A.call(G)))}finally{if(w)throw w.error}}})})}}async embedContent(t){var a,i,o,c;let u,x="",h={};if(this.apiClient.isVertexAI()){const p=x4(this.apiClient,t);return x=ye("{model}:predict",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:x,queryParams:h,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(b=>b.json().then(y=>{const N=y;return N.sdkHttpResponse={headers:b.headers},N})),u.then(b=>{const y=g4(b),N=new jp;return Object.assign(N,y),N})}else{const p=m4(this.apiClient,t);return x=ye("{model}:batchEmbedContents",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:x,queryParams:h,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(c=t.config)===null||c===void 0?void 0:c.abortSignal}).then(b=>b.json().then(y=>{const N=y;return N.sdkHttpResponse={headers:b.headers},N})),u.then(b=>{const y=p4(b),N=new jp;return Object.assign(N,y),N})}}async generateImagesInternal(t){var a,i,o,c;let u,x="",h={};if(this.apiClient.isVertexAI()){const p=T4(this.apiClient,t);return x=ye("{model}:predict",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:x,queryParams:h,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(b=>b.json().then(y=>{const N=y;return N.sdkHttpResponse={headers:b.headers},N})),u.then(b=>{const y=A4(b),N=new wp;return Object.assign(N,y),N})}else{const p=E4(this.apiClient,t);return x=ye("{model}:predict",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:x,queryParams:h,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(c=t.config)===null||c===void 0?void 0:c.abortSignal}).then(b=>b.json().then(y=>{const N=y;return N.sdkHttpResponse={headers:b.headers},N})),u.then(b=>{const y=k4(b),N=new wp;return Object.assign(N,y),N})}}async editImageInternal(t){var a,i;let o,c="",u={};if(this.apiClient.isVertexAI()){const x=d4(this.apiClient,t);return c=ye("{model}:predict",x._url),u=x._query,delete x._url,delete x._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(x),httpMethod:"POST",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(p=>{const b=p;return b.sdkHttpResponse={headers:h.headers},b})),o.then(h=>{const p=u4(h),b=new vw;return Object.assign(b,p),b})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(t){var a,i;let o,c="",u={};if(this.apiClient.isVertexAI()){const x=T5(this.apiClient,t);return c=ye("{model}:predict",x._url),u=x._query,delete x._url,delete x._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(x),httpMethod:"POST",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(p=>{const b=p;return b.sdkHttpResponse={headers:h.headers},b})),o.then(h=>{const p=k5(h),b=new yw;return Object.assign(b,p),b})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(t){var a,i;let o,c="",u={};if(this.apiClient.isVertexAI()){const x=c5(this.apiClient,t);return c=ye("{model}:predict",x._url),u=x._query,delete x._url,delete x._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(x),httpMethod:"POST",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>{const p=d5(h),b=new Nw;return Object.assign(b,p),b})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(t){var a,i;let o,c="",u={};if(this.apiClient.isVertexAI()){const x=p5(this.apiClient,t);return c=ye("{model}:predict",x._url),u=x._query,delete x._url,delete x._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(x),httpMethod:"POST",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>{const p=g5(h),b=new jw;return Object.assign(b,p),b})}else throw new Error("This method is only supported by the Vertex AI.")}async get(t){var a,i,o,c;let u,x="",h={};if(this.apiClient.isVertexAI()){const p=J4(this.apiClient,t);return x=ye("{name}",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:x,queryParams:h,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(b=>b.json()),u.then(b=>Mu(b))}else{const p=F4(this.apiClient,t);return x=ye("{name}",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:x,queryParams:h,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(c=t.config)===null||c===void 0?void 0:c.abortSignal}).then(b=>b.json()),u.then(b=>Au(b))}}async listInternal(t){var a,i,o,c;let u,x="",h={};if(this.apiClient.isVertexAI()){const p=s5(this.apiClient,t);return x=ye("{models_url}",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:x,queryParams:h,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(b=>b.json().then(y=>{const N=y;return N.sdkHttpResponse={headers:b.headers},N})),u.then(b=>{const y=l5(b),N=new _p;return Object.assign(N,y),N})}else{const p=t5(this.apiClient,t);return x=ye("{models_url}",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:x,queryParams:h,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(c=t.config)===null||c===void 0?void 0:c.abortSignal}).then(b=>b.json().then(y=>{const N=y;return N.sdkHttpResponse={headers:b.headers},N})),u.then(b=>{const y=n5(b),N=new _p;return Object.assign(N,y),N})}}async update(t){var a,i,o,c;let u,x="",h={};if(this.apiClient.isVertexAI()){const p=C5(this.apiClient,t);return x=ye("{model}",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:x,queryParams:h,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(b=>b.json()),u.then(b=>Mu(b))}else{const p=S5(this.apiClient,t);return x=ye("{name}",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:x,queryParams:h,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(c=t.config)===null||c===void 0?void 0:c.abortSignal}).then(b=>b.json()),u.then(b=>Au(b))}}async delete(t){var a,i,o,c;let u,x="",h={};if(this.apiClient.isVertexAI()){const p=i4(this.apiClient,t);return x=ye("{name}",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:x,queryParams:h,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(b=>b.json().then(y=>{const N=y;return N.sdkHttpResponse={headers:b.headers},N})),u.then(b=>{const y=o4(b),N=new Sp;return Object.assign(N,y),N})}else{const p=a4(this.apiClient,t);return x=ye("{name}",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:x,queryParams:h,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(c=t.config)===null||c===void 0?void 0:c.abortSignal}).then(b=>b.json().then(y=>{const N=y;return N.sdkHttpResponse={headers:b.headers},N})),u.then(b=>{const y=r4(b),N=new Sp;return Object.assign(N,y),N})}}async countTokens(t){var a,i,o,c;let u,x="",h={};if(this.apiClient.isVertexAI()){const p=s4(this.apiClient,t);return x=ye("{model}:countTokens",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:x,queryParams:h,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(b=>b.json().then(y=>{const N=y;return N.sdkHttpResponse={headers:b.headers},N})),u.then(b=>{const y=l4(b),N=new Cp;return Object.assign(N,y),N})}else{const p=t4(this.apiClient,t);return x=ye("{model}:countTokens",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:x,queryParams:h,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(c=t.config)===null||c===void 0?void 0:c.abortSignal}).then(b=>b.json().then(y=>{const N=y;return N.sdkHttpResponse={headers:b.headers},N})),u.then(b=>{const y=n4(b),N=new Cp;return Object.assign(N,y),N})}}async computeTokens(t){var a,i;let o,c="",u={};if(this.apiClient.isVertexAI()){const x=YS(this.apiClient,t);return c=ye("{model}:computeTokens",x._url),u=x._query,delete x._url,delete x._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(x),httpMethod:"POST",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(p=>{const b=p;return b.sdkHttpResponse={headers:h.headers},b})),o.then(h=>{const p=KS(h),b=new ww;return Object.assign(b,p),b})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(t){var a,i,o,c;let u,x="",h={};if(this.apiClient.isVertexAI()){const p=L4(this.apiClient,t);return x=ye("{model}:predictLongRunning",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:x,queryParams:h,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(b=>b.json()),u.then(b=>{const y=I4(b),N=new Ro;return Object.assign(N,y),N})}else{const p=z4(this.apiClient,t);return x=ye("{model}:predictLongRunning",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:x,queryParams:h,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(c=t.config)===null||c===void 0?void 0:c.abortSignal}).then(b=>b.json()),u.then(b=>{const y=D4(b),N=new Ro;return Object.assign(N,y),N})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class oC extends xn{constructor(t){super(),this.apiClient=t}async getVideosOperation(t){const a=t.operation,i=t.config;if(a.name===void 0||a.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=a.name.split("/operations/")[0];let c;i&&"httpOptions"in i&&(c=i.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:a.name,resourceName:o,config:{httpOptions:c}});return a._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:a.name,config:i});return a._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async get(t){const a=t.operation,i=t.config;if(a.name===void 0||a.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=a.name.split("/operations/")[0];let c;i&&"httpOptions"in i&&(c=i.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:a.name,resourceName:o,config:{httpOptions:c}});return a._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:a.name,config:i});return a._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async getVideosOperationInternal(t){var a,i,o,c;let u,x="",h={};if(this.apiClient.isVertexAI()){const p=hw(t);return x=ye("{operationName}",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:x,queryParams:h,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(b=>b.json()),u}else{const p=fw(t);return x=ye("{operationName}",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:x,queryParams:h,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(c=t.config)===null||c===void 0?void 0:c.abortSignal}).then(b=>b.json()),u}}async fetchPredictVideosOperationInternal(t){var a,i;let o,c="",u={};if(this.apiClient.isVertexAI()){const x=aw(t);return c=ye("{resourceName}:fetchPredictOperation",x._url),u=x._query,delete x._url,delete x._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(x),httpMethod:"POST",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cC(n){const t={},a=f(n,["data"]);if(a!=null&&m(t,["data"],a),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(n,["mimeType"]);return i!=null&&m(t,["mimeType"],i),t}function dC(n){const t={},a=f(n,["parts"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(c=>vC(c))),m(t,["parts"],o)}const i=f(n,["role"]);return i!=null&&m(t,["role"],i),t}function uC(n,t,a){const i={},o=f(t,["expireTime"]);a!==void 0&&o!=null&&m(a,["expireTime"],o);const c=f(t,["newSessionExpireTime"]);a!==void 0&&c!=null&&m(a,["newSessionExpireTime"],c);const u=f(t,["uses"]);a!==void 0&&u!=null&&m(a,["uses"],u);const x=f(t,["liveConnectConstraints"]);a!==void 0&&x!=null&&m(a,["bidiGenerateContentSetup"],bC(n,x));const h=f(t,["lockAdditionalFields"]);return a!==void 0&&h!=null&&m(a,["fieldMask"],h),i}function fC(n,t){const a={},i=f(t,["config"]);return i!=null&&m(a,["config"],uC(n,i,a)),a}function hC(n){const t={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const a=f(n,["fileUri"]);a!=null&&m(t,["fileUri"],a);const i=f(n,["mimeType"]);return i!=null&&m(t,["mimeType"],i),t}function mC(n){const t={},a=f(n,["id"]);a!=null&&m(t,["id"],a);const i=f(n,["args"]);i!=null&&m(t,["args"],i);const o=f(n,["name"]);if(o!=null&&m(t,["name"],o),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function xC(n){const t={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const a=f(n,["enableWidget"]);return a!=null&&m(t,["enableWidget"],a),t}function pC(n){const t={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const a=f(n,["timeRangeFilter"]);return a!=null&&m(t,["timeRangeFilter"],a),t}function gC(n,t){const a={},i=f(n,["generationConfig"]);t!==void 0&&i!=null&&m(t,["setup","generationConfig"],i);const o=f(n,["responseModalities"]);t!==void 0&&o!=null&&m(t,["setup","generationConfig","responseModalities"],o);const c=f(n,["temperature"]);t!==void 0&&c!=null&&m(t,["setup","generationConfig","temperature"],c);const u=f(n,["topP"]);t!==void 0&&u!=null&&m(t,["setup","generationConfig","topP"],u);const x=f(n,["topK"]);t!==void 0&&x!=null&&m(t,["setup","generationConfig","topK"],x);const h=f(n,["maxOutputTokens"]);t!==void 0&&h!=null&&m(t,["setup","generationConfig","maxOutputTokens"],h);const p=f(n,["mediaResolution"]);t!==void 0&&p!=null&&m(t,["setup","generationConfig","mediaResolution"],p);const b=f(n,["seed"]);t!==void 0&&b!=null&&m(t,["setup","generationConfig","seed"],b);const y=f(n,["speechConfig"]);t!==void 0&&y!=null&&m(t,["setup","generationConfig","speechConfig"],nf(y));const N=f(n,["thinkingConfig"]);t!==void 0&&N!=null&&m(t,["setup","generationConfig","thinkingConfig"],N);const w=f(n,["enableAffectiveDialog"]);t!==void 0&&w!=null&&m(t,["setup","generationConfig","enableAffectiveDialog"],w);const A=f(n,["systemInstruction"]);t!==void 0&&A!=null&&m(t,["setup","systemInstruction"],dC(Ot(A)));const I=f(n,["tools"]);if(t!==void 0&&I!=null){let ee=La(I);Array.isArray(ee)&&(ee=ee.map(Q=>NC(za(Q)))),m(t,["setup","tools"],ee)}const H=f(n,["sessionResumption"]);t!==void 0&&H!=null&&m(t,["setup","sessionResumption"],yC(H));const G=f(n,["inputAudioTranscription"]);t!==void 0&&G!=null&&m(t,["setup","inputAudioTranscription"],G);const F=f(n,["outputAudioTranscription"]);t!==void 0&&F!=null&&m(t,["setup","outputAudioTranscription"],F);const O=f(n,["realtimeInputConfig"]);t!==void 0&&O!=null&&m(t,["setup","realtimeInputConfig"],O);const V=f(n,["contextWindowCompression"]);t!==void 0&&V!=null&&m(t,["setup","contextWindowCompression"],V);const X=f(n,["proactivity"]);return t!==void 0&&X!=null&&m(t,["setup","proactivity"],X),a}function bC(n,t){const a={},i=f(t,["model"]);i!=null&&m(a,["setup","model"],Fe(n,i));const o=f(t,["config"]);return o!=null&&m(a,["config"],gC(o,a)),a}function vC(n){const t={},a=f(n,["mediaResolution"]);a!=null&&m(t,["mediaResolution"],a);const i=f(n,["codeExecutionResult"]);i!=null&&m(t,["codeExecutionResult"],i);const o=f(n,["executableCode"]);o!=null&&m(t,["executableCode"],o);const c=f(n,["fileData"]);c!=null&&m(t,["fileData"],hC(c));const u=f(n,["functionCall"]);u!=null&&m(t,["functionCall"],mC(u));const x=f(n,["functionResponse"]);x!=null&&m(t,["functionResponse"],x);const h=f(n,["inlineData"]);h!=null&&m(t,["inlineData"],cC(h));const p=f(n,["text"]);p!=null&&m(t,["text"],p);const b=f(n,["thought"]);b!=null&&m(t,["thought"],b);const y=f(n,["thoughtSignature"]);y!=null&&m(t,["thoughtSignature"],y);const N=f(n,["videoMetadata"]);return N!=null&&m(t,["videoMetadata"],N),t}function yC(n){const t={},a=f(n,["handle"]);if(a!=null&&m(t,["handle"],a),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function NC(n){const t={},a=f(n,["functionDeclarations"]);if(a!=null){let b=a;Array.isArray(b)&&(b=b.map(y=>y)),m(t,["functionDeclarations"],b)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(n,["googleSearchRetrieval"]);i!=null&&m(t,["googleSearchRetrieval"],i);const o=f(n,["computerUse"]);o!=null&&m(t,["computerUse"],o);const c=f(n,["fileSearch"]);c!=null&&m(t,["fileSearch"],c);const u=f(n,["codeExecution"]);if(u!=null&&m(t,["codeExecution"],u),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const x=f(n,["googleMaps"]);x!=null&&m(t,["googleMaps"],xC(x));const h=f(n,["googleSearch"]);h!=null&&m(t,["googleSearch"],pC(h));const p=f(n,["urlContext"]);return p!=null&&m(t,["urlContext"],p),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jC(n){const t=[];for(const a in n)if(Object.prototype.hasOwnProperty.call(n,a)){const i=n[a];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const o=Object.keys(i).map(c=>`${a}.${c}`);t.push(...o)}else t.push(a)}return t.join(",")}function wC(n,t){let a=null;const i=n.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const c=i.setup;typeof c=="object"&&c!==null?(n.bidiGenerateContentSetup=c,a=c):delete n.bidiGenerateContentSetup}else i!==void 0&&delete n.bidiGenerateContentSetup;const o=n.fieldMask;if(a){const c=jC(a);if(Array.isArray(t==null?void 0:t.lockAdditionalFields)&&(t==null?void 0:t.lockAdditionalFields.length)===0)c?n.fieldMask=c:delete n.fieldMask;else if(t!=null&&t.lockAdditionalFields&&t.lockAdditionalFields.length>0&&o!==null&&Array.isArray(o)&&o.length>0){const u=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let x=[];o.length>0&&(x=o.map(p=>u.includes(p)?`generationConfig.${p}`:p));const h=[];c&&h.push(c),x.length>0&&h.push(...x),h.length>0?n.fieldMask=h.join(","):delete n.fieldMask}else delete n.fieldMask}else o!==null&&Array.isArray(o)&&o.length>0?n.fieldMask=o.join(","):delete n.fieldMask;return n}class _C extends xn{constructor(t){super(),this.apiClient=t}async create(t){var a,i;let o,c="",u={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const x=fC(this.apiClient,t);c=ye("auth_tokens",x._url),u=x._query,delete x.config,delete x._url,delete x._query;const h=wC(x,t.config);return o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>p)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function SC(n,t){const a={},i=f(n,["displayName"]);return t!==void 0&&i!=null&&m(t,["displayName"],i),a}function CC(n){const t={},a=f(n,["config"]);return a!=null&&SC(a,t),t}function EC(n,t){const a={},i=f(n,["force"]);return t!==void 0&&i!=null&&m(t,["_query","force"],i),a}function TC(n){const t={},a=f(n,["name"]);a!=null&&m(t,["_url","name"],a);const i=f(n,["config"]);return i!=null&&EC(i,t),t}function kC(n){const t={},a=f(n,["name"]);return a!=null&&m(t,["_url","name"],a),t}function AC(n,t){const a={},i=f(n,["customMetadata"]);if(t!==void 0&&i!=null){let c=i;Array.isArray(c)&&(c=c.map(u=>u)),m(t,["customMetadata"],c)}const o=f(n,["chunkingConfig"]);return t!==void 0&&o!=null&&m(t,["chunkingConfig"],o),a}function MC(n){const t={},a=f(n,["name"]);a!=null&&m(t,["name"],a);const i=f(n,["metadata"]);i!=null&&m(t,["metadata"],i);const o=f(n,["done"]);o!=null&&m(t,["done"],o);const c=f(n,["error"]);c!=null&&m(t,["error"],c);const u=f(n,["response"]);return u!=null&&m(t,["response"],DC(u)),t}function RC(n){const t={},a=f(n,["fileSearchStoreName"]);a!=null&&m(t,["_url","file_search_store_name"],a);const i=f(n,["fileName"]);i!=null&&m(t,["fileName"],i);const o=f(n,["config"]);return o!=null&&AC(o,t),t}function DC(n){const t={},a=f(n,["sdkHttpResponse"]);a!=null&&m(t,["sdkHttpResponse"],a);const i=f(n,["parent"]);i!=null&&m(t,["parent"],i);const o=f(n,["documentName"]);return o!=null&&m(t,["documentName"],o),t}function IC(n,t){const a={},i=f(n,["pageSize"]);t!==void 0&&i!=null&&m(t,["_query","pageSize"],i);const o=f(n,["pageToken"]);return t!==void 0&&o!=null&&m(t,["_query","pageToken"],o),a}function zC(n){const t={},a=f(n,["config"]);return a!=null&&IC(a,t),t}function LC(n){const t={},a=f(n,["sdkHttpResponse"]);a!=null&&m(t,["sdkHttpResponse"],a);const i=f(n,["nextPageToken"]);i!=null&&m(t,["nextPageToken"],i);const o=f(n,["fileSearchStores"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(u=>u)),m(t,["fileSearchStores"],c)}return t}function UC(n,t){const a={},i=f(n,["mimeType"]);t!==void 0&&i!=null&&m(t,["mimeType"],i);const o=f(n,["displayName"]);t!==void 0&&o!=null&&m(t,["displayName"],o);const c=f(n,["customMetadata"]);if(t!==void 0&&c!=null){let x=c;Array.isArray(x)&&(x=x.map(h=>h)),m(t,["customMetadata"],x)}const u=f(n,["chunkingConfig"]);return t!==void 0&&u!=null&&m(t,["chunkingConfig"],u),a}function PC(n){const t={},a=f(n,["fileSearchStoreName"]);a!=null&&m(t,["_url","file_search_store_name"],a);const i=f(n,["config"]);return i!=null&&UC(i,t),t}function qC(n){const t={},a=f(n,["sdkHttpResponse"]);return a!=null&&m(t,["sdkHttpResponse"],a),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function OC(n,t){const a={},i=f(n,["force"]);return t!==void 0&&i!=null&&m(t,["_query","force"],i),a}function $C(n){const t={},a=f(n,["name"]);a!=null&&m(t,["_url","name"],a);const i=f(n,["config"]);return i!=null&&OC(i,t),t}function HC(n){const t={},a=f(n,["name"]);return a!=null&&m(t,["_url","name"],a),t}function GC(n,t){const a={},i=f(n,["pageSize"]);t!==void 0&&i!=null&&m(t,["_query","pageSize"],i);const o=f(n,["pageToken"]);return t!==void 0&&o!=null&&m(t,["_query","pageToken"],o),a}function VC(n){const t={},a=f(n,["parent"]);a!=null&&m(t,["_url","parent"],a);const i=f(n,["config"]);return i!=null&&GC(i,t),t}function BC(n){const t={},a=f(n,["sdkHttpResponse"]);a!=null&&m(t,["sdkHttpResponse"],a);const i=f(n,["nextPageToken"]);i!=null&&m(t,["nextPageToken"],i);const o=f(n,["documents"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(u=>u)),m(t,["documents"],c)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class FC extends xn{constructor(t){super(),this.apiClient=t,this.list=async a=>new Tl(fn.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:a.parent,config:i.config}),await this.listInternal(a),a)}async get(t){var a,i;let o,c="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const x=HC(t);return c=ye("{name}",x._url),u=x._query,delete x._url,delete x._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(x),httpMethod:"GET",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>h)}}async delete(t){var a,i;let o="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=$C(t);o=ye("{name}",u._url),c=u._query,delete u._url,delete u._query,await this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(t){var a,i;let o,c="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const x=VC(t);return c=ye("{parent}/documents",x._url),u=x._query,delete x._url,delete x._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(x),httpMethod:"GET",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>{const p=BC(h),b=new _w;return Object.assign(b,p),b})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class JC extends xn{constructor(t,a=new FC(t)){super(),this.apiClient=t,this.documents=a,this.list=async(i={})=>new Tl(fn.PAGED_ITEM_FILE_SEARCH_STORES,o=>this.listInternal(o),await this.listInternal(i),i)}async uploadToFileSearchStore(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(t.fileSearchStoreName,t.file,t.config)}async create(t){var a,i;let o,c="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const x=CC(t);return c=ye("fileSearchStores",x._url),u=x._query,delete x._url,delete x._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(x),httpMethod:"POST",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>h)}}async get(t){var a,i;let o,c="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const x=kC(t);return c=ye("{name}",x._url),u=x._query,delete x._url,delete x._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(x),httpMethod:"GET",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>h)}}async delete(t){var a,i;let o="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=TC(t);o=ye("{name}",u._url),c=u._query,delete u._url,delete u._query,await this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(t){var a,i;let o,c="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const x=zC(t);return c=ye("fileSearchStores",x._url),u=x._query,delete x._url,delete x._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(x),httpMethod:"GET",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>{const p=LC(h),b=new Sw;return Object.assign(b,p),b})}}async uploadToFileSearchStoreInternal(t){var a,i;let o,c="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const x=PC(t);return c=ye("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",x._url),u=x._query,delete x._url,delete x._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(x),httpMethod:"POST",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>{const p=qC(h),b=new Cw;return Object.assign(b,p),b})}}async importFile(t){var a,i;let o,c="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const x=RC(t);return c=ye("{file_search_store_name}:importFile",x._url),u=x._query,delete x._url,delete x._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(x),httpMethod:"POST",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>{const p=MC(h),b=new Zu;return Object.assign(b,p),b})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function YC(n,t){const a={},i=f(n,["name"]);return i!=null&&m(a,["_url","name"],i),a}function KC(n,t){const a={},i=f(n,["name"]);return i!=null&&m(a,["_url","name"],i),a}function QC(n,t,a){const i={};if(f(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const o=f(n,["tunedModelDisplayName"]);if(t!==void 0&&o!=null&&m(t,["displayName"],o),f(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const c=f(n,["epochCount"]);t!==void 0&&c!=null&&m(t,["tuningTask","hyperparameters","epochCount"],c);const u=f(n,["learningRateMultiplier"]);if(u!=null&&m(i,["tuningTask","hyperparameters","learningRateMultiplier"],u),f(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(f(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(f(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const x=f(n,["batchSize"]);t!==void 0&&x!=null&&m(t,["tuningTask","hyperparameters","batchSize"],x);const h=f(n,["learningRate"]);if(t!==void 0&&h!=null&&m(t,["tuningTask","hyperparameters","learningRate"],h),f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(f(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return i}function XC(n,t,a){const i={};let o=f(a,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const w=f(n,["validationDataset"]);t!==void 0&&w!=null&&m(t,["supervisedTuningSpec"],Yp(w))}else if(o==="PREFERENCE_TUNING"){const w=f(n,["validationDataset"]);t!==void 0&&w!=null&&m(t,["preferenceOptimizationSpec"],Yp(w))}const c=f(n,["tunedModelDisplayName"]);t!==void 0&&c!=null&&m(t,["tunedModelDisplayName"],c);const u=f(n,["description"]);t!==void 0&&u!=null&&m(t,["description"],u);let x=f(a,["config","method"]);if(x===void 0&&(x="SUPERVISED_FINE_TUNING"),x==="SUPERVISED_FINE_TUNING"){const w=f(n,["epochCount"]);t!==void 0&&w!=null&&m(t,["supervisedTuningSpec","hyperParameters","epochCount"],w)}else if(x==="PREFERENCE_TUNING"){const w=f(n,["epochCount"]);t!==void 0&&w!=null&&m(t,["preferenceOptimizationSpec","hyperParameters","epochCount"],w)}let h=f(a,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const w=f(n,["learningRateMultiplier"]);t!==void 0&&w!=null&&m(t,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],w)}else if(h==="PREFERENCE_TUNING"){const w=f(n,["learningRateMultiplier"]);t!==void 0&&w!=null&&m(t,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],w)}let p=f(a,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const w=f(n,["exportLastCheckpointOnly"]);t!==void 0&&w!=null&&m(t,["supervisedTuningSpec","exportLastCheckpointOnly"],w)}else if(p==="PREFERENCE_TUNING"){const w=f(n,["exportLastCheckpointOnly"]);t!==void 0&&w!=null&&m(t,["preferenceOptimizationSpec","exportLastCheckpointOnly"],w)}let b=f(a,["config","method"]);if(b===void 0&&(b="SUPERVISED_FINE_TUNING"),b==="SUPERVISED_FINE_TUNING"){const w=f(n,["adapterSize"]);t!==void 0&&w!=null&&m(t,["supervisedTuningSpec","hyperParameters","adapterSize"],w)}else if(b==="PREFERENCE_TUNING"){const w=f(n,["adapterSize"]);t!==void 0&&w!=null&&m(t,["preferenceOptimizationSpec","hyperParameters","adapterSize"],w)}if(f(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(f(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const y=f(n,["labels"]);t!==void 0&&y!=null&&m(t,["labels"],y);const N=f(n,["beta"]);return t!==void 0&&N!=null&&m(t,["preferenceOptimizationSpec","hyperParameters","beta"],N),i}function ZC(n,t){const a={},i=f(n,["baseModel"]);i!=null&&m(a,["baseModel"],i);const o=f(n,["preTunedModel"]);o!=null&&m(a,["preTunedModel"],o);const c=f(n,["trainingDataset"]);c!=null&&cE(c);const u=f(n,["config"]);return u!=null&&QC(u,a),a}function WC(n,t){const a={},i=f(n,["baseModel"]);i!=null&&m(a,["baseModel"],i);const o=f(n,["preTunedModel"]);o!=null&&m(a,["preTunedModel"],o);const c=f(n,["trainingDataset"]);c!=null&&dE(c,a,t);const u=f(n,["config"]);return u!=null&&XC(u,a,t),a}function eE(n,t){const a={},i=f(n,["name"]);return i!=null&&m(a,["_url","name"],i),a}function tE(n,t){const a={},i=f(n,["name"]);return i!=null&&m(a,["_url","name"],i),a}function sE(n,t,a){const i={},o=f(n,["pageSize"]);t!==void 0&&o!=null&&m(t,["_query","pageSize"],o);const c=f(n,["pageToken"]);t!==void 0&&c!=null&&m(t,["_query","pageToken"],c);const u=f(n,["filter"]);return t!==void 0&&u!=null&&m(t,["_query","filter"],u),i}function nE(n,t,a){const i={},o=f(n,["pageSize"]);t!==void 0&&o!=null&&m(t,["_query","pageSize"],o);const c=f(n,["pageToken"]);t!==void 0&&c!=null&&m(t,["_query","pageToken"],c);const u=f(n,["filter"]);return t!==void 0&&u!=null&&m(t,["_query","filter"],u),i}function lE(n,t){const a={},i=f(n,["config"]);return i!=null&&sE(i,a),a}function aE(n,t){const a={},i=f(n,["config"]);return i!=null&&nE(i,a),a}function iE(n,t){const a={},i=f(n,["sdkHttpResponse"]);i!=null&&m(a,["sdkHttpResponse"],i);const o=f(n,["nextPageToken"]);o!=null&&m(a,["nextPageToken"],o);const c=f(n,["tunedModels"]);if(c!=null){let u=c;Array.isArray(u)&&(u=u.map(x=>mb(x))),m(a,["tuningJobs"],u)}return a}function rE(n,t){const a={},i=f(n,["sdkHttpResponse"]);i!=null&&m(a,["sdkHttpResponse"],i);const o=f(n,["nextPageToken"]);o!=null&&m(a,["nextPageToken"],o);const c=f(n,["tuningJobs"]);if(c!=null){let u=c;Array.isArray(u)&&(u=u.map(x=>Du(x))),m(a,["tuningJobs"],u)}return a}function oE(n,t){const a={},i=f(n,["name"]);i!=null&&m(a,["model"],i);const o=f(n,["name"]);return o!=null&&m(a,["endpoint"],o),a}function cE(n,t){const a={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=f(n,["examples"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(c=>c)),m(a,["examples","examples"],o)}return a}function dE(n,t,a){const i={};let o=f(a,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const u=f(n,["gcsUri"]);t!==void 0&&u!=null&&m(t,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(o==="PREFERENCE_TUNING"){const u=f(n,["gcsUri"]);t!==void 0&&u!=null&&m(t,["preferenceOptimizationSpec","trainingDatasetUri"],u)}let c=f(a,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const u=f(n,["vertexDatasetResource"]);t!==void 0&&u!=null&&m(t,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(c==="PREFERENCE_TUNING"){const u=f(n,["vertexDatasetResource"]);t!==void 0&&u!=null&&m(t,["preferenceOptimizationSpec","trainingDatasetUri"],u)}if(f(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function mb(n,t){const a={},i=f(n,["sdkHttpResponse"]);i!=null&&m(a,["sdkHttpResponse"],i);const o=f(n,["name"]);o!=null&&m(a,["name"],o);const c=f(n,["state"]);c!=null&&m(a,["state"],Kg(c));const u=f(n,["createTime"]);u!=null&&m(a,["createTime"],u);const x=f(n,["tuningTask","startTime"]);x!=null&&m(a,["startTime"],x);const h=f(n,["tuningTask","completeTime"]);h!=null&&m(a,["endTime"],h);const p=f(n,["updateTime"]);p!=null&&m(a,["updateTime"],p);const b=f(n,["description"]);b!=null&&m(a,["description"],b);const y=f(n,["baseModel"]);y!=null&&m(a,["baseModel"],y);const N=f(n,["_self"]);return N!=null&&m(a,["tunedModel"],oE(N)),a}function Du(n,t){const a={},i=f(n,["sdkHttpResponse"]);i!=null&&m(a,["sdkHttpResponse"],i);const o=f(n,["name"]);o!=null&&m(a,["name"],o);const c=f(n,["state"]);c!=null&&m(a,["state"],Kg(c));const u=f(n,["createTime"]);u!=null&&m(a,["createTime"],u);const x=f(n,["startTime"]);x!=null&&m(a,["startTime"],x);const h=f(n,["endTime"]);h!=null&&m(a,["endTime"],h);const p=f(n,["updateTime"]);p!=null&&m(a,["updateTime"],p);const b=f(n,["error"]);b!=null&&m(a,["error"],b);const y=f(n,["description"]);y!=null&&m(a,["description"],y);const N=f(n,["baseModel"]);N!=null&&m(a,["baseModel"],N);const w=f(n,["tunedModel"]);w!=null&&m(a,["tunedModel"],w);const A=f(n,["preTunedModel"]);A!=null&&m(a,["preTunedModel"],A);const I=f(n,["supervisedTuningSpec"]);I!=null&&m(a,["supervisedTuningSpec"],I);const H=f(n,["preferenceOptimizationSpec"]);H!=null&&m(a,["preferenceOptimizationSpec"],H);const G=f(n,["tuningDataStats"]);G!=null&&m(a,["tuningDataStats"],G);const F=f(n,["encryptionSpec"]);F!=null&&m(a,["encryptionSpec"],F);const O=f(n,["partnerModelTuningSpec"]);O!=null&&m(a,["partnerModelTuningSpec"],O);const V=f(n,["customBaseModel"]);V!=null&&m(a,["customBaseModel"],V);const X=f(n,["experiment"]);X!=null&&m(a,["experiment"],X);const ee=f(n,["labels"]);ee!=null&&m(a,["labels"],ee);const Q=f(n,["outputUri"]);Q!=null&&m(a,["outputUri"],Q);const se=f(n,["pipelineJob"]);se!=null&&m(a,["pipelineJob"],se);const ne=f(n,["serviceAccount"]);ne!=null&&m(a,["serviceAccount"],ne);const P=f(n,["tunedModelDisplayName"]);P!=null&&m(a,["tunedModelDisplayName"],P);const ie=f(n,["veoTuningSpec"]);return ie!=null&&m(a,["veoTuningSpec"],ie),a}function uE(n,t){const a={},i=f(n,["sdkHttpResponse"]);i!=null&&m(a,["sdkHttpResponse"],i);const o=f(n,["name"]);o!=null&&m(a,["name"],o);const c=f(n,["metadata"]);c!=null&&m(a,["metadata"],c);const u=f(n,["done"]);u!=null&&m(a,["done"],u);const x=f(n,["error"]);return x!=null&&m(a,["error"],x),a}function Yp(n,t){const a={},i=f(n,["gcsUri"]);i!=null&&m(a,["validationDatasetUri"],i);const o=f(n,["vertexDatasetResource"]);return o!=null&&m(a,["validationDatasetUri"],o),a}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class fE extends xn{constructor(t){super(),this.apiClient=t,this.get=async a=>await this.getInternal(a),this.list=async(a={})=>new Tl(fn.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(a),a),this.tune=async a=>{var i;if(this.apiClient.isVertexAI())if(a.baseModel.startsWith("projects/")){const o={tunedModelName:a.baseModel};!((i=a.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(o.checkpointId=a.config.preTunedModelCheckpointId);const c=Object.assign(Object.assign({},a),{preTunedModel:o});return c.baseModel=void 0,await this.tuneInternal(c)}else{const o=Object.assign({},a);return await this.tuneInternal(o)}else{const o=Object.assign({},a),c=await this.tuneMldevInternal(o);let u="";return c.metadata!==void 0&&c.metadata.tunedModel!==void 0?u=c.metadata.tunedModel:c.name!==void 0&&c.name.includes("/operations/")&&(u=c.name.split("/operations/")[0]),{name:u,state:Cu.JOB_STATE_QUEUED}}}}async getInternal(t){var a,i,o,c;let u,x="",h={};if(this.apiClient.isVertexAI()){const p=tE(t);return x=ye("{name}",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:x,queryParams:h,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(b=>b.json().then(y=>{const N=y;return N.sdkHttpResponse={headers:b.headers},N})),u.then(b=>Du(b))}else{const p=eE(t);return x=ye("{name}",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:x,queryParams:h,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(c=t.config)===null||c===void 0?void 0:c.abortSignal}).then(b=>b.json().then(y=>{const N=y;return N.sdkHttpResponse={headers:b.headers},N})),u.then(b=>mb(b))}}async listInternal(t){var a,i,o,c;let u,x="",h={};if(this.apiClient.isVertexAI()){const p=aE(t);return x=ye("tuningJobs",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:x,queryParams:h,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(b=>b.json().then(y=>{const N=y;return N.sdkHttpResponse={headers:b.headers},N})),u.then(b=>{const y=rE(b),N=new Ep;return Object.assign(N,y),N})}else{const p=lE(t);return x=ye("tunedModels",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:x,queryParams:h,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(c=t.config)===null||c===void 0?void 0:c.abortSignal}).then(b=>b.json().then(y=>{const N=y;return N.sdkHttpResponse={headers:b.headers},N})),u.then(b=>{const y=iE(b),N=new Ep;return Object.assign(N,y),N})}}async cancel(t){var a,i,o,c;let u="",x={};if(this.apiClient.isVertexAI()){const h=KC(t);u=ye("{name}:cancel",h._url),x=h._query,delete h._url,delete h._query,await this.apiClient.request({path:u,queryParams:x,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal})}else{const h=YC(t);u=ye("{name}:cancel",h._url),x=h._query,delete h._url,delete h._query,await this.apiClient.request({path:u,queryParams:x,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(c=t.config)===null||c===void 0?void 0:c.abortSignal})}}async tuneInternal(t){var a,i;let o,c="",u={};if(this.apiClient.isVertexAI()){const x=WC(t,t);return c=ye("tuningJobs",x._url),u=x._query,delete x._url,delete x._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(x),httpMethod:"POST",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(p=>{const b=p;return b.sdkHttpResponse={headers:h.headers},b})),o.then(h=>Du(h))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(t){var a,i;let o,c="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const x=ZC(t);return c=ye("tunedModels",x._url),u=x._query,delete x._url,delete x._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(x),httpMethod:"POST",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(p=>{const b=p;return b.sdkHttpResponse={headers:h.headers},b})),o.then(h=>uE(h))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class hE{async download(t,a){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const mE=1024*1024*8,xE=3,pE=1e3,gE=2,Io="x-goog-upload-status";async function bE(n,t,a){var i;const o=await xb(n,t,a),c=await(o==null?void 0:o.json());if(((i=o==null?void 0:o.headers)===null||i===void 0?void 0:i[Io])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return c.file}async function vE(n,t,a){var i;const o=await xb(n,t,a),c=await(o==null?void 0:o.json());if(((i=o==null?void 0:o.headers)===null||i===void 0?void 0:i[Io])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const u=Gg(c),x=new Wu;return Object.assign(x,u),x}async function xb(n,t,a){var i,o;let c=0,u=0,x=new Eu(new Response),h="upload";for(c=n.size;u<c;){const p=Math.min(mE,c-u),b=n.slice(u,u+p);u+p>=c&&(h+=", finalize");let y=0,N=pE;for(;y<xE&&(x=await a.request({path:"",body:b,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:t,headers:{"X-Goog-Upload-Command":h,"X-Goog-Upload-Offset":String(u),"Content-Length":String(p)}}}),!(!((i=x==null?void 0:x.headers)===null||i===void 0)&&i[Io]));)y++,await NE(N),N=N*gE;if(u+=p,((o=x==null?void 0:x.headers)===null||o===void 0?void 0:o[Io])!=="active")break;if(c<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return x}async function yE(n){return{size:n.size,type:n.type}}function NE(n){return new Promise(t=>setTimeout(t,n))}class jE{async upload(t,a,i){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await bE(t,a,i)}async uploadToFileSearchStore(t,a,i){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await vE(t,a,i)}async stat(t){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await yE(t)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class wE{create(t,a,i){return new _E(t,a,i)}}class _E{constructor(t,a,i){this.url=t,this.headers=a,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(t){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(t)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Kp="x-goog-api-key";class SE{constructor(t){this.apiKey=t}async addAuthHeaders(t,a){if(t.get(Kp)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");t.append(Kp,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const CE="gl-node/";class EE{constructor(t){var a;if(t.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(t.project||t.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(a=t.vertexai)!==null&&a!==void 0?a:!1,this.apiKey=t.apiKey;const i=nw(t.httpOptions,t.vertexai,void 0,void 0);i&&(t.httpOptions?t.httpOptions.baseUrl=i:t.httpOptions={baseUrl:i}),this.apiVersion=t.apiVersion;const o=new SE(this.apiKey);this.apiClient=new H5({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:t.httpOptions,userAgentExtra:CE+"web",uploader:new jE,downloader:new hE}),this.models=new rC(this.apiClient),this.live=new tC(this.apiClient,o,new wE),this.batches=new R_(this.apiClient),this.chats=new hS(this.models,this.apiClient),this.caches=new dS(this.apiClient),this.files=new wS(this.apiClient),this.operations=new oC(this.apiClient),this.authTokens=new _C(this.apiClient),this.tunings=new fE(this.apiClient),this.fileSearchStores=new JC(this.apiClient)}}const pb=()=>{const n="PLACEHOLDER_API_KEY";return new EE({apiKey:n})},gb=async(n,t)=>{const a=pb();if(!a)throw new Error("API Key missing");const i=n.observations.filter(x=>x.score===2).map(x=>`${x.criteria} (${x.indicators.join(" ")})`).join(", "),o=n.observations.filter(x=>x.score===0||x.score===1).map(x=>`${x.criteria} (${x.indicators.join(" ")})`).join(", "),c=n.assessmentKeywords?`
       : ${n.assessmentKeywords}`:"",u=`
       .   " "       .
    
    : ${t.fullName}
    : ${n.subject}
    : ${n.topic}
    
       ( ): ${i}
       (    ): ${o}
    ${c}
    
    :
    1.       .
    2.      .
    3.          .
    4.          .
    5.     (      ).
    6.      .
    7.           .
    8. :  100-150 .
  `;try{return(await a.models.generateContent({model:"gemini-2.5-flash",contents:u})).text||"   ."}catch(x){throw console.error("Gemini API Error:",x),new Error("    Gemini")}},TE=async n=>{var i;const t=pb();if(!t)return"";const a=`     ( )     : "${n}".`;try{return((i=(await t.models.generateContent({model:"gemini-2.5-flash",contents:a})).text)==null?void 0:i.trim())||""}catch{return""}},ze=({value:n,onChange:t,placeholder:a,className:i,minHeight:o="min-h-[60px]"})=>{const[c,u]=R.useState(!1),[x,h]=R.useState(!0),p=R.useRef(null);R.useEffect(()=>{if(!("webkitSpeechRecognition"in window)&&!("SpeechRecognition"in window)){h(!1);return}const y=window.SpeechRecognition||window.webkitSpeechRecognition;p.current=new y,p.current.continuous=!0,p.current.interimResults=!0,p.current.lang="ar-DZ",p.current.onresult=N=>{let w="";for(let A=N.resultIndex;A<N.results.length;++A)N.results[A].isFinal&&(w+=N.results[A][0].transcript);if(w){const A=n+(n&&!n.endsWith(" ")?" ":"")+w;t(A)}},p.current.onerror=N=>{console.error("Speech recognition error",N.error),u(!1)},p.current.onend=()=>{u(!1)}},[n,t]);const b=()=>{var y,N;if(!x){alert("     .   Chrome  Edge.");return}c?((y=p.current)==null||y.stop(),u(!1)):((N=p.current)==null||N.start(),u(!0))};return e.jsxs("div",{className:"relative",children:[e.jsx("textarea",{value:n,onChange:y=>t(y.target.value),placeholder:c?" ...  ":a,className:`${i} ${o} ${c?"border-red-400 bg-red-50/30":""} transition-colors pl-10`}),e.jsx("button",{onClick:b,className:`absolute bottom-2 left-2 p-2 rounded-full transition-all duration-300 shadow-sm flex items-center justify-center z-10
                    ${c?"bg-red-500 text-white animate-pulse hover:bg-red-600 scale-110":"bg-gray-100 text-gray-500 hover:bg-blue-100 hover:text-blue-600"}
                    ${x?"":"opacity-50 cursor-not-allowed"}
                `,title:c?" ":" ",type:"button",children:c?e.jsx(Rg,{size:16}):e.jsx(Dg,{size:16})}),c&&e.jsx("span",{className:"absolute bottom-3 left-12 text-xs text-red-500 font-bold animate-pulse whitespace-nowrap pointer-events-none",children:" ..."})]})};var Sl=Sg();const pe=({label:n,value:t,onChange:a,options:i=[],placeholder:o,type:c="text",className:u=""})=>{const[x,h]=R.useState(!1),[p,b]=R.useState(!1),[y,N]=R.useState({}),[w,A]=R.useState(!0),[I,H]=R.useState(!1),G=R.useRef(null),F=R.useRef(null),O=R.useMemo(()=>`dropdown-${n?n.replace(/\s/g,"-"):Math.random().toString(36).slice(2,11)}`,[n]),V=()=>{if(G.current){const P=G.current.getBoundingClientRect(),ie=window.innerHeight-P.bottom,le=P.top,Z=ie<250&&le>200,q={position:"fixed",left:P.left,width:P.width,zIndex:1e5};Z?(q.bottom=window.innerHeight-P.top+5,q.maxHeight=Math.min(300,le-20)):(q.top=P.bottom+5,q.maxHeight=Math.min(300,ie-20)),N(q)}},X=(P=!1)=>{i&&i.length>0&&(V(),H(P),b(!0))};R.useEffect(()=>{if(!p)return;const P=ie=>{const le=document.getElementById(O);le&&ie.target instanceof Node&&le.contains(ie.target)||b(!1)};return window.addEventListener("scroll",P,!0),window.addEventListener("resize",P),()=>{window.removeEventListener("scroll",P,!0),window.removeEventListener("resize",P)}},[p,O]),R.useEffect(()=>{function P(ie){const le=G.current&&G.current.contains(ie.target),Z=document.getElementById(O),q=Z&&Z.contains(ie.target);!le&&!q&&b(!1)}return p&&document.addEventListener("mousedown",P),()=>document.removeEventListener("mousedown",P)},[p,O]),R.useEffect(()=>{if(!("webkitSpeechRecognition"in window)&&!("SpeechRecognition"in window)){A(!1);return}const P=window.SpeechRecognition||window.webkitSpeechRecognition;F.current=new P,F.current.continuous=!1,F.current.interimResults=!1,F.current.lang="ar-DZ",F.current.onresult=ie=>{const le=ie.results[0][0].transcript;le&&a(le.replace(/\.$/,"")),h(!1)},F.current.onerror=()=>h(!1),F.current.onend=()=>h(!1)},[a]);const ee=()=>{var P,ie;w&&(x?(P=F.current)==null||P.stop():((ie=F.current)==null||ie.start(),h(!0)))},Q=P=>{a(P),b(!1)},se=i&&i.length>0,ne=R.useMemo(()=>{if(!se)return[];if(I||!t||i.includes(t))return i;const P=i.filter(ie=>ie.toLowerCase().includes(t.toLowerCase()));return P.length>0?P:i},[i,t,I,se]);return e.jsxs("div",{className:`relative ${u}`,ref:G,children:[n&&e.jsx("label",{className:"block text-[11px] font-bold text-gray-700 mb-1.5",children:n}),e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:c,value:t,onChange:P=>{a(P.target.value),H(!1),se&&(V(),b(!0))},onFocus:()=>{},onClick:()=>{se&&X(!0)},placeholder:x?" ...":o,className:`w-full border rounded-lg py-2 px-3 pl-9 text-sm outline-none transition-all shadow-sm
                        ${x?"bg-red-50 border-red-300 ring-2 ring-red-100":"bg-white border-gray-300 focus:border-blue-500 focus:ring-2 focus:ring-blue-100"}
                        ${se?"cursor-pointer":""}
                    `}),e.jsx("button",{onClick:ee,type:"button",tabIndex:-1,className:`absolute left-2 top-1/2 -translate-y-1/2 p-1.5 rounded-full transition-all z-10
                        ${x?"text-white bg-red-500 animate-pulse":"text-gray-400 hover:text-blue-600 hover:bg-gray-100"}`,title:" ",children:x?e.jsx(Rg,{size:14}):e.jsx(Dg,{size:14})}),se&&c!=="date"&&e.jsx("button",{type:"button",tabIndex:-1,onClick:P=>{P.stopPropagation(),p?b(!1):X(!0)},className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 p-1 rounded hover:bg-gray-100 transition-colors",children:p?e.jsx(ut,{size:16}):e.jsx(Gu,{size:16})})]}),p&&se&&Sl.createPortal(e.jsx("div",{id:O,style:y,className:"bg-white border border-gray-200 rounded-lg shadow-2xl overflow-y-auto animate-in fade-in zoom-in-95 duration-100 custom-scrollbar flex flex-col",children:ne.length===0?e.jsx("div",{className:"px-3 py-4 text-center text-sm text-gray-400",children:"   "}):ne.map((P,ie)=>e.jsxs("div",{onClick:()=>Q(P),className:`px-3 py-2.5 text-sm cursor-pointer hover:bg-blue-50 hover:text-blue-700 flex justify-between items-center transition-colors border-b border-gray-50 last:border-0
                                    ${t===P?"bg-blue-50 text-blue-700 font-bold":"text-gray-700"}
                                `,children:[e.jsx("span",{className:"truncate",children:P}),t===P&&e.jsx(wl,{size:14,className:"shrink-0 ml-2"})]},ie))}),document.body)]})},kE=({report:n,teacher:t,onChange:a,onTeacherChange:i,onPrint:o,isGoldMember:c,onUpgradeClick:u,onUploadSignature:x})=>{const[h,p]=R.useState(!1),[b,y]=R.useState("info"),[N,w]=R.useState("saved"),[A,I]=R.useState("manual"),[H,G]=R.useState(!1),F=R.useRef(null),[O,V]=R.useState(new Set),X=R.useRef(n);R.useEffect(()=>{X.current=n},[n]),R.useEffect(()=>{w("saving");const Z=setTimeout(()=>{localStorage.setItem("mufattish_draft",JSON.stringify(n)),w("saved")},1e3);return()=>clearTimeout(Z)},[n]),R.useEffect(()=>{A==="ai"&&!c&&I("manual")},[c,A]);const ee=(Z,q)=>{a({...n,[Z]:q})},Q=(Z,q)=>{i&&i({...t,[Z]:q})},se=Z=>{if(Z==="ai"&&!c){u();return}I(Z)},ne=async(Z,q)=>{const Y=n.observations.map(T=>T.id===Z?{...T,score:q}:T);if(a({...n,observations:Y}),A==="ai"&&q!==null&&q<2){const T=Y.find(E=>E.id===Z);if(T&&!T.improvementNotes.trim()){V(E=>new Set(E).add(Z));try{const E=await TE(T.criteria);if(E){const L=X.current,U=L.observations.map($=>$.id===Z?{...$,improvementNotes:E}:$);a({...L,observations:U})}}catch(E){console.error("Failed to generate suggestion",E)}finally{V(E=>{const L=new Set(E);return L.delete(Z),L})}}}},P=(Z,q)=>{const Y=n.observations.map(T=>T.id===Z?{...T,improvementNotes:q}:T);a({...n,observations:Y})},ie=async()=>{if(!c){u();return}p(!0);try{const Z=await gb(n,t);ee("generalAssessment",Z);const q=n.observations.reduce((E,L)=>E+(L.score||0),0),Y=n.observations.length*2,T=Math.round(q/Y*20*10)/10;ee("finalMark",T),y("result")}catch{alert("      API")}finally{p(!1)}},le=Array.from(new Set(n.observations.map(Z=>Z.category)));return e.jsxs("div",{className:`h-full flex flex-col bg-gray-50 transition-all duration-300 ${H?"fixed inset-0 z-[100] w-screen h-screen":""}`,children:[e.jsxs("div",{className:"bg-white border-b p-4 flex justify-between items-center sticky top-0 z-20 shadow-sm shrink-0",children:[e.jsxs("div",{className:"flex gap-2 overflow-x-auto no-scrollbar",children:[e.jsx("button",{onClick:()=>y("info"),className:`px-4 py-2 rounded-lg font-bold transition-colors whitespace-nowrap ${b==="info"?"bg-blue-600 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-600"}`,children:"1. "}),e.jsx("button",{onClick:()=>y("rubric"),className:`px-4 py-2 rounded-lg font-bold transition-colors whitespace-nowrap ${b==="rubric"?"bg-blue-600 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-600"}`,children:"2. "}),e.jsx("button",{onClick:()=>y("result"),className:`px-4 py-2 rounded-lg font-bold transition-colors whitespace-nowrap ${b==="result"?"bg-blue-600 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-600"}`,children:"3. "})]}),e.jsxs("div",{className:"flex items-center gap-2 md:gap-4",children:[e.jsx("div",{className:"hidden md:flex items-center gap-2 text-xs font-medium transition-colors duration-500",children:N==="saving"?e.jsxs(e.Fragment,{children:[e.jsx(Bi,{size:14,className:"animate-spin text-blue-500"}),e.jsx("span",{className:"text-blue-500",children:" ..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Bu,{size:14,className:"text-green-600"}),e.jsx("span",{className:"text-green-600",children:" "})]})}),e.jsx("button",{onClick:()=>G(!H),className:`p-2 rounded-lg transition-colors ${H?"bg-indigo-100 text-indigo-600":"text-gray-500 hover:bg-gray-100"}`,title:H?"  ":"  ( )",children:H?e.jsx(mn,{size:20}):e.jsx(hn,{size:20})}),x&&e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"file",ref:F,onChange:x,className:"hidden",accept:"image/*"}),e.jsxs("button",{onClick:()=>{var Z;return(Z=F.current)==null?void 0:Z.click()},className:"flex items-center gap-2 bg-indigo-50 text-indigo-700 px-3 py-2 rounded-lg hover:bg-indigo-100 border border-indigo-200 transition-colors",title:"  /",children:[e.jsx(Qi,{size:18}),e.jsx("span",{className:"hidden md:inline font-bold text-sm",children:"/"})]})]}),e.jsxs("button",{onClick:o,className:"flex items-center gap-2 bg-gray-800 text-white px-4 py-2 rounded-lg hover:bg-gray-900 shadow-sm",children:[e.jsx(ys,{size:18}),e.jsx("span",{className:"hidden md:inline",children:""})]})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 md:p-6 max-w-4xl mx-auto w-full",children:[b==="info"&&e.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100 relative",children:[e.jsx("div",{className:"absolute top-0 right-0 bg-blue-50 p-2 rounded-bl-xl rounded-tr-xl border-l border-b border-blue-100 text-blue-700",children:e.jsx(Eo,{size:20})}),e.jsx("h2",{className:"text-lg font-bold text-gray-800 border-b pb-2 mb-4 pr-10",children:" "}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(pe,{label:"  ",value:n.wilaya,onChange:Z=>ee("wilaya",Z)}),e.jsx(pe,{label:" ",value:n.district,onChange:Z=>ee("district",Z)}),e.jsx(pe,{label:" ",value:n.school,onChange:Z=>ee("school",Z)})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100 relative",children:[e.jsx("div",{className:"absolute top-0 right-0 bg-indigo-50 p-2 rounded-bl-xl rounded-tr-xl border-l border-b border-indigo-100 text-indigo-700",children:e.jsx(Yn,{size:20})}),e.jsx("h2",{className:"text-lg font-bold text-gray-800 border-b pb-2 mb-4 pr-10",children:" "}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx("div",{className:"md:col-span-2",children:e.jsx(pe,{label:" ",value:t.fullName,onChange:Z=>Q("fullName",Z)})}),e.jsx(pe,{type:"date",label:" ",value:t.birthDate,onChange:Z=>Q("birthDate",Z)}),e.jsx(pe,{label:" ",value:t.birthPlace,onChange:Z=>Q("birthPlace",Z)}),e.jsx(pe,{label:" ",value:t.degree,onChange:Z=>Q("degree",Z),options:Og}),e.jsx(pe,{type:"date",label:" ",value:t.degreeDate||"",onChange:Z=>Q("degreeDate",Z)})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100 relative",children:[e.jsx("div",{className:"absolute top-0 right-0 bg-green-50 p-2 rounded-bl-xl rounded-tr-xl border-l border-b border-green-100 text-green-700",children:e.jsx(Ki,{size:20})}),e.jsx("h2",{className:"text-lg font-bold text-gray-800 border-b pb-2 mb-4 pr-10",children:" "}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(pe,{type:"date",label:"  ",value:t.recruitmentDate,onChange:Z=>Q("recruitmentDate",Z)}),e.jsx(pe,{label:" ",value:t.rank,onChange:Z=>Q("rank",Z),options:$g}),e.jsx(pe,{type:"date",label:"   ",value:t.currentRankDate||"",onChange:Z=>Q("currentRankDate",Z)}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(pe,{label:"",value:t.echelon||"",onChange:Z=>Q("echelon",Z),options:Array.from({length:12},(Z,q)=>(q+1).toString())}),e.jsx(pe,{type:"date",label:"",value:t.echelonDate||"",onChange:Z=>Q("echelonDate",Z)})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(pe,{type:"date",label:"  ",value:t.lastInspectionDate,onChange:Z=>Q("lastInspectionDate",Z)}),e.jsx(pe,{type:"number",label:" ",value:t.lastMark.toString(),onChange:Z=>Q("lastMark",parseFloat(Z))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[11px] font-bold text-gray-700 mb-1.5",children:" "}),e.jsxs("div",{className:"flex gap-2 p-1 bg-gray-50 rounded-lg border",children:[e.jsxs("label",{className:"flex-1 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"status",value:"titulaire",checked:t.status==="titulaire",onChange:()=>Q("status","titulaire"),className:"hidden peer"}),e.jsx("div",{className:"text-center py-2 text-sm rounded-md peer-checked:bg-green-500 peer-checked:text-white transition-colors text-gray-600 font-medium",children:""})]}),e.jsxs("label",{className:"flex-1 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"status",value:"contractuel",checked:t.status==="contractuel",onChange:()=>Q("status","contractuel"),className:"hidden peer"}),e.jsx("div",{className:"text-center py-2 text-sm rounded-md peer-checked:bg-orange-500 peer-checked:text-white transition-colors text-gray-600 font-medium",children:""})]}),e.jsxs("label",{className:"flex-1 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"status",value:"stagiere",checked:t.status==="stagiere",onChange:()=>Q("status","stagiere"),className:"hidden peer"}),e.jsx("div",{className:"text-center py-2 text-sm rounded-md peer-checked:bg-blue-500 peer-checked:text-white transition-colors text-gray-600 font-medium",children:""})]})]})]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100 relative",children:[e.jsx("div",{className:"absolute top-0 right-0 bg-yellow-50 p-2 rounded-bl-xl rounded-tr-xl border-l border-b border-yellow-100 text-yellow-700",children:e.jsx(gt,{size:20})}),e.jsx("h2",{className:"text-lg font-bold text-gray-800 border-b pb-2 mb-4 pr-10",children:"  "}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(pe,{type:"date",label:" ",value:n.inspectionDate,onChange:Z=>ee("inspectionDate",Z)}),e.jsx(pe,{label:" / ",value:n.subject,onChange:Z=>ee("subject",Z),options:p2}),e.jsx(pe,{label:"",value:n.topic,onChange:Z=>ee("topic",Z)}),e.jsx(pe,{label:" ()",value:n.duration,onChange:Z=>ee("duration",Z)}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(pe,{label:"",value:n.level,onChange:Z=>ee("level",Z),options:g2}),e.jsx(pe,{label:"",value:n.group,onChange:Z=>ee("group",Z)})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(pe,{type:"number",label:"  ()",value:n.studentCount.toString(),onChange:Z=>ee("studentCount",parseInt(Z))}),e.jsx(pe,{type:"number",label:" ",value:n.absentCount.toString(),onChange:Z=>ee("absentCount",parseInt(Z))})]})]})]})]}),b==="rubric"&&e.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-right-4 duration-500",children:[e.jsxs("div",{className:"bg-white p-3 rounded-lg shadow-sm border mb-4 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"font-bold text-gray-700 flex items-center gap-2",children:[e.jsx(dn,{size:16}),"  :"]}),e.jsxs("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[e.jsx("button",{onClick:()=>se("manual"),className:`px-3 py-1 rounded-md text-sm font-bold transition-all ${A==="manual"?"bg-white shadow text-gray-800":"text-gray-500 hover:text-gray-700"}`,children:""}),e.jsxs("button",{onClick:()=>se("ai"),className:`px-3 py-1 rounded-md text-sm font-bold transition-all flex items-center gap-1 ${A==="ai"?"bg-indigo-100 text-indigo-700 border border-indigo-200 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:[e.jsx(Vn,{size:12}),"  (AI)"]})]})]}),A==="ai"&&e.jsxs("span",{className:"text-xs text-indigo-600 bg-indigo-50 px-2 py-1 rounded border border-indigo-100 flex items-center gap-1",children:[e.jsx(Vn,{size:10}),"       "]})]}),le.map((Z,q)=>e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100",children:[e.jsx("div",{className:"bg-gray-50 px-6 py-3 border-b border-gray-100 flex justify-between items-center rounded-t-xl",children:e.jsxs("h3",{className:"font-bold text-lg text-gray-800",children:[q+1,". ",Z]})}),e.jsx("div",{className:"divide-y divide-gray-50",children:n.observations.filter(Y=>Y.category===Z).map(Y=>{const T=b2[Y.criteria]||[];return e.jsxs("div",{className:"p-4 hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-bold text-gray-800 mb-1",children:Y.criteria}),e.jsx("p",{className:"text-sm text-gray-500",children:Y.indicators.join(" - ")})]}),e.jsxs("div",{className:"flex gap-2 shrink-0",children:[e.jsx("button",{onClick:()=>ne(Y.id,2),className:`px-3 py-1.5 rounded-lg border text-sm font-bold transition-colors ${Y.score===2?"bg-green-600 text-white border-green-600":"bg-white text-gray-600 hover:bg-green-50"}`,children:" (2)"}),e.jsx("button",{onClick:()=>ne(Y.id,1),className:`px-3 py-1.5 rounded-lg border text-sm font-bold transition-colors ${Y.score===1?"bg-yellow-500 text-white border-yellow-500":"bg-white text-gray-600 hover:bg-yellow-50"}`,children:" (1)"}),e.jsx("button",{onClick:()=>ne(Y.id,0),className:`px-3 py-1.5 rounded-lg border text-sm font-bold transition-colors ${Y.score===0?"bg-red-500 text-white border-red-500":"bg-white text-gray-600 hover:bg-red-50"}`,children:"  (0)"})]})]}),e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"relative mb-2",children:[e.jsxs("select",{onChange:E=>{E.target.value&&P(Y.id,E.target.value)},className:"w-full appearance-none bg-white border border-gray-300 text-gray-700 py-2 px-3 pr-8 rounded leading-tight focus:outline-none focus:bg-white focus:border-blue-500 text-sm cursor-pointer",value:"",children:[e.jsxs("option",{value:"",children:["--     (",T.length," ) --"]}),T.map((E,L)=>e.jsx("option",{value:E,children:E.length>80?E.substring(0,80)+"...":E},L))]}),e.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center px-2 text-gray-700",children:e.jsx(Gu,{size:14})})]}),e.jsx(ze,{value:Y.improvementNotes,onChange:E=>P(Y.id,E),placeholder:"  (  )...",className:"w-full border rounded-lg p-2 text-sm focus:ring-2 focus:ring-blue-500 outline-none bg-gray-50/50"}),O.has(Y.id)&&e.jsxs("div",{className:"flex items-center gap-1 text-xs text-indigo-500 animate-pulse mt-1",children:[e.jsx(Vn,{size:12}),"   ..."]})]})]},Y.id)})})]},Z))]}),b==="result"&&e.jsx("div",{className:"space-y-6 animate-in fade-in slide-in-from-left-4 duration-500",children:e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-800 border-b pb-2 mb-4",children:" "}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"    ()"}),e.jsx(ze,{value:n.assessmentKeywords||"",onChange:Z=>ee("assessmentKeywords",Z),placeholder:":      ...",className:"w-full border rounded-lg p-2 focus:ring-2 focus:ring-blue-500 outline-none",minHeight:"min-h-[40px]"})]}),e.jsxs("div",{className:"mb-4 relative",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"  ( )"}),e.jsx(ze,{value:n.generalAssessment,onChange:Z=>ee("generalAssessment",Z),className:"w-full border rounded-lg p-4 focus:ring-2 focus:ring-blue-500 outline-none leading-relaxed text-justify",placeholder:"   ...",minHeight:"min-h-[250px]"}),e.jsxs("button",{onClick:ie,disabled:h,className:"absolute bottom-4 left-14 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors shadow-md flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[h?e.jsx(Uo,{className:"animate-spin",size:18}):e.jsx(qg,{size:18}),n.generalAssessment?"   ":"   "]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 border-t pt-4 items-end",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"  (/20)"}),e.jsx("input",{type:"number",min:"0",max:"20",step:"0.25",value:n.finalMark,onChange:Z=>ee("finalMark",parseFloat(Z.target.value)),className:"w-full border rounded-lg p-2 text-2xl font-bold text-center focus:ring-2 focus:ring-blue-500 outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" "}),e.jsx(pe,{value:n.markInLetters,onChange:Z=>ee("markInLetters",Z),className:"w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"  "}),e.jsx(pe,{type:"date",value:n.inspectionDate,onChange:Z=>ee("inspectionDate",Z)})]})]})]})})]})]})},AE=({report:n,teacher:t,onChange:a,onPrint:i,isGoldMember:o,onUploadSignature:c})=>{const[u,x]=R.useState("info"),h=R.useRef(null),p=(w,A)=>{a({...n,[w]:A})},b=(w,A)=>{a({...n,oralQuestions:{...n.oralQuestions,[w]:A}})},y=(w,A,I)=>{const H=n.lessons.map(G=>G.id===w?{...G,[A]:I}:G);a({...n,lessons:H})},N=async()=>{if(!o)return alert("   ");b("legislation","     "),b("psychology","      "),b("educationScience","      .")};return e.jsxs("div",{className:"h-full flex flex-col bg-gray-50",children:[e.jsxs("div",{className:"bg-[#4d6a4d] text-white border-b p-4 flex justify-between items-center sticky top-0 z-20 shadow-sm",children:[e.jsxs("div",{className:"flex gap-2 text-xs md:text-sm",children:[e.jsxs("button",{onClick:()=>x("info"),className:`px-3 py-2 rounded-lg font-bold transition-colors flex items-center gap-2 ${u==="info"?"bg-white text-[#4d6a4d]":"bg-[#3d5a3d] hover:bg-[#2d4a2d] text-green-100"}`,children:[e.jsx(Yn,{size:16}),"  "]}),e.jsxs("button",{onClick:()=>x("lessons"),className:`px-3 py-2 rounded-lg font-bold transition-colors flex items-center gap-2 ${u==="lessons"?"bg-white text-[#4d6a4d]":"bg-[#3d5a3d] hover:bg-[#2d4a2d] text-green-100"}`,children:[e.jsx(gt,{size:16}),"  (3)"]}),e.jsxs("button",{onClick:()=>x("oral"),className:`px-3 py-2 rounded-lg font-bold transition-colors flex items-center gap-2 ${u==="oral"?"bg-white text-[#4d6a4d]":"bg-[#3d5a3d] hover:bg-[#2d4a2d] text-green-100"}`,children:[e.jsx(WN,{size:16})," "]}),e.jsxs("button",{onClick:()=>x("decision"),className:`px-3 py-2 rounded-lg font-bold transition-colors flex items-center gap-2 ${u==="decision"?"bg-white text-[#4d6a4d]":"bg-[#3d5a3d] hover:bg-[#2d4a2d] text-green-100"}`,children:[e.jsx(oN,{size:16})," "]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[c&&e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"file",ref:h,onChange:c,className:"hidden",accept:"image/*"}),e.jsx("button",{onClick:()=>{var w;return(w=h.current)==null?void 0:w.click()},className:"p-2 rounded-lg text-green-100 hover:bg-[#2d4a2d] hover:text-white transition-colors",title:"  /",children:e.jsx(Qi,{size:20})})]}),e.jsxs("button",{onClick:i,className:"flex items-center gap-2 bg-white text-[#4d6a4d] px-4 py-2 rounded-lg hover:bg-gray-100 font-bold shadow-sm",children:[e.jsx(ys,{size:18}),""]})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 max-w-4xl mx-auto w-full",children:[u==="info"&&e.jsx("div",{className:"space-y-6 animate-in fade-in",children:e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[e.jsx("h2",{className:"text-xl font-bold text-[#4d6a4d] border-b pb-2 mb-4",children:"  "}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[e.jsx(pe,{type:"date",label:" ",value:n.examDate,onChange:w=>p("examDate",w)}),e.jsx(pe,{label:" ( )",value:n.school,onChange:w=>p("school",w)}),e.jsx(pe,{label:" (  )",value:n.city,onChange:w=>p("city",w)})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[e.jsx(pe,{label:"  ",value:n.wilaya,onChange:w=>p("wilaya",w)}),e.jsx(pe,{label:"   ()",value:n.district,onChange:w=>p("district",w)})]}),e.jsx("h3",{className:"font-bold text-gray-600 mt-6 mb-2 border-b border-gray-100 pb-1",children:" "}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(pe,{label:"  ()",value:n.inspectorName,onChange:w=>p("inspectorName",w),className:"bg-green-50"}),e.jsx(pe,{label:" 1 ()",value:n.directorName,onChange:w=>p("directorName",w)}),e.jsx(pe,{label:" 2 ()",value:n.teacherMemberName,onChange:w=>p("teacherMemberName",w)})]}),e.jsx("h3",{className:"font-bold text-gray-600 mt-6 mb-2 border-b border-gray-100 pb-1",children:"   ()"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"flex-1",children:e.jsx(pe,{label:"  ",value:n.appointmentDecisionNumber,onChange:w=>p("appointmentDecisionNumber",w)})}),e.jsx("div",{className:"w-32",children:e.jsx(pe,{type:"date",label:"",value:n.appointmentDecisionDate,onChange:w=>p("appointmentDecisionDate",w)})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"flex-1",children:e.jsx(pe,{label:"  ",value:n.financialVisaNumber,onChange:w=>p("financialVisaNumber",w)})}),e.jsx("div",{className:"w-32",children:e.jsx(pe,{type:"date",label:"",value:n.financialVisaDate,onChange:w=>p("financialVisaDate",w)})})]}),e.jsx(pe,{label:" /  ",value:n.university,onChange:w=>p("university",w),placeholder:"   ..."}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-[11px] font-bold text-gray-700 mb-1.5",children:" "}),e.jsx("input",{list:"recruitmentTypes",value:n.recruitmentType||"",onChange:w=>p("recruitmentType",w.target.value),className:"w-full border rounded-lg py-2 px-3 text-sm outline-none",placeholder:"  ..."}),e.jsxs("datalist",{id:"recruitmentTypes",children:[e.jsx("option",{value:"  "}),e.jsx("option",{value:""}),e.jsx("option",{value:"  "})]})]}),e.jsx("div",{className:"w-32",children:e.jsx(pe,{type:"date",label:" /",value:n.contestDate,onChange:w=>p("contestDate",w)})})]})]})]})}),u==="lessons"&&e.jsx("div",{className:"space-y-6 animate-in fade-in",children:n.lessons.map((w,A)=>e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[e.jsxs("h3",{className:"text-lg font-bold text-[#4d6a4d] border-b pb-2 mb-4 flex justify-between items-center",children:[e.jsx("span",{children:A===0?" ":A===1?" ":" "}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs bg-gray-100 px-2 py-1 rounded text-gray-600",children:":"}),e.jsx("input",{type:"time",value:w.timeStart,onChange:I=>y(w.id,"timeStart",I.target.value),className:"border rounded px-1 text-sm"}),e.jsx("span",{children:"-"}),e.jsx("input",{type:"time",value:w.timeEnd,onChange:I=>y(w.id,"timeEnd",I.target.value),className:"border rounded px-1 text-sm"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsx(pe,{label:" / ",value:w.subject,onChange:I=>y(w.id,"subject",I)}),e.jsx(pe,{label:"",value:w.topic,onChange:I=>y(w.id,"topic",I)}),e.jsx(pe,{label:" / ",value:w.level,onChange:I=>y(w.id,"level",I)})]}),e.jsxs("div",{className:"space-y-4 bg-gray-50 p-4 rounded-lg border border-gray-100",children:[e.jsxs("h4",{className:"font-bold text-sm text-gray-700 flex items-center gap-2",children:[e.jsx(gt,{size:14}),"    ( )"]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"1.   ( )"}),e.jsx(ze,{value:w.phaseLaunch,onChange:I=>y(w.id,"phaseLaunch",I),className:"w-full border rounded p-2 text-sm bg-white",minHeight:"min-h-[40px]",placeholder:":     ..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"2.   "}),e.jsx(ze,{value:w.phaseConstruction,onChange:I=>y(w.id,"phaseConstruction",I),className:"w-full border rounded p-2 text-sm bg-white",minHeight:"min-h-[60px]",placeholder:"  ..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"3.   ()"}),e.jsx(ze,{value:w.phaseInvestment,onChange:I=>y(w.id,"phaseInvestment",I),className:"w-full border rounded p-2 text-sm bg-white",minHeight:"min-h-[40px]",placeholder:"   ..."})]})]})]},w.id))}),u==="oral"&&e.jsx("div",{className:"space-y-6 animate-in fade-in",children:e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"flex justify-between items-center border-b pb-2 mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-[#4d6a4d]",children:" "}),e.jsxs("button",{onClick:N,className:"text-xs bg-indigo-50 text-indigo-600 px-3 py-1 rounded-full flex items-center gap-1 hover:bg-indigo-100",children:[e.jsx(Vn,{size:12}),"  "]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"1.    / "}),e.jsx(ze,{value:n.oralQuestions.educationScience,onChange:w=>b("educationScience",w),className:"w-full border rounded-lg p-3 text-sm bg-blue-50/20",placeholder:":     ",minHeight:"min-h-[80px]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"2.   "}),e.jsx(ze,{value:n.oralQuestions.psychology,onChange:w=>b("psychology",w),className:"w-full border rounded-lg p-3 text-sm bg-green-50/20",placeholder:":    ...",minHeight:"min-h-[80px]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"3.   "}),e.jsx(ze,{value:n.oralQuestions.legislation,onChange:w=>b("legislation",w),className:"w-full border rounded-lg p-3 text-sm bg-orange-50/20",placeholder:":   ...",minHeight:"min-h-[80px]"})]})]})]})}),u==="decision"&&e.jsx("div",{className:"space-y-6 animate-in fade-in",children:e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[e.jsx("h2",{className:"text-xl font-bold text-[#4d6a4d] border-b pb-2 mb-6",children:"  "}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 mb-8 text-center",children:[e.jsxs("div",{className:"bg-green-50 p-4 rounded-xl border border-green-100",children:[e.jsx("label",{className:"block text-sm font-bold text-gray-600 mb-2",children:"  ()"}),e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("input",{type:"number",max:"40",value:n.pedagogyMark,onChange:w=>{const A=w.target.value===""?0:parseFloat(w.target.value);a({...n,pedagogyMark:A,totalMark:A+(n.oralMark||0)})},className:"w-20 text-center text-3xl font-bold border-b-2 border-green-500 bg-transparent focus:outline-none"}),e.jsx("span",{className:"text-gray-400 font-bold text-xl",children:"/ 40"})]})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-xl border border-blue-100",children:[e.jsx("label",{className:"block text-sm font-bold text-gray-600 mb-2",children:"  "}),e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("input",{type:"number",max:"20",value:n.oralMark,onChange:w=>{const A=w.target.value===""?0:parseFloat(w.target.value);a({...n,oralMark:A,totalMark:(n.pedagogyMark||0)+A})},className:"w-20 text-center text-3xl font-bold border-b-2 border-blue-500 bg-transparent focus:outline-none"}),e.jsx("span",{className:"text-gray-400 font-bold text-xl",children:"/ 20"})]})]}),e.jsxs("div",{className:"bg-[#2d4a2d] text-white p-4 rounded-xl shadow-lg transform scale-105 flex flex-col justify-center",children:[e.jsx("label",{className:"block text-xs font-bold text-green-200 mb-2",children:" "}),e.jsxs("div",{className:"text-5xl font-bold",children:[n.totalMark," ",e.jsx("span",{className:"text-lg text-green-300",children:"/ 60"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700",children:"  "}),e.jsxs("select",{value:n.culturalValue,onChange:w=>p("culturalValue",w.target.value),className:"w-full border p-2 rounded",children:[e.jsx("option",{value:"",children:""}),e.jsx("option",{value:" ",children:" "}),e.jsx("option",{value:"",children:""}),e.jsx("option",{value:"",children:""}),e.jsx("option",{value:"",children:""})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700",children:"  "}),e.jsxs("select",{value:n.pedagogicalValue,onChange:w=>p("pedagogicalValue",w.target.value),className:"w-full border p-2 rounded",children:[e.jsx("option",{value:"",children:""}),e.jsx("option",{value:" ",children:" "}),e.jsx("option",{value:"",children:""}),e.jsx("option",{value:"",children:""}),e.jsx("option",{value:"",children:""})]})]})]}),e.jsxs("div",{className:"mt-8 border-t pt-6",children:[e.jsx("label",{className:"block text-lg font-bold text-center mb-4",children:"  "}),e.jsxs("div",{className:"flex justify-center gap-4",children:[e.jsx("button",{onClick:()=>p("finalDecision","confirmed"),className:`px-8 py-4 rounded-xl border-2 font-bold text-lg transition-all ${n.finalDecision==="confirmed"?"bg-green-600 text-white border-green-600 shadow-lg scale-105":"bg-white text-gray-400 border-gray-200"}`,children:" ()"}),e.jsx("button",{onClick:()=>p("finalDecision","deferred"),className:`px-8 py-4 rounded-xl border-2 font-bold text-lg transition-all ${n.finalDecision==="deferred"?"bg-orange-500 text-white border-orange-500 shadow-lg scale-105":"bg-white text-gray-400 border-gray-200"}`,children:""}),e.jsx("button",{onClick:()=>p("finalDecision","failed"),className:`px-8 py-4 rounded-xl border-2 font-bold text-lg transition-all ${n.finalDecision==="failed"?"bg-red-600 text-white border-red-600 shadow-lg scale-105":"bg-white text-gray-400 border-gray-200"}`,children:""})]})]})]})})]})]})},ME=({report:n,teacher:t,onChange:a,onTeacherChange:i,onPrint:o,isGoldMember:c,onUpgradeClick:u,onUploadSignature:x})=>{var G,F,O,V,X,ee,Q,se,ne,P,ie,le,Z,q,Y,T,E,L,U,$,C,D,j,S,k,z,W,ue,J,be,Ee,Re,_e,ke;const[h,p]=R.useState("info"),[b,y]=R.useState(!1),N=R.useRef(null),w=(ae,Je)=>{a({...n,[ae]:Je})},A=(ae,Je)=>{a({...n,legacyData:{...n.legacyData,[ae]:Je}})},I=(ae,Je)=>{i&&i({...t,[ae]:Je})},H=async()=>{if(!c){u();return}y(!0);try{const ae=await gb(n,t);w("generalAssessment",ae)}catch{alert("  ")}finally{y(!1)}};return e.jsxs("div",{className:"h-full flex flex-col bg-gray-50",children:[e.jsxs("div",{className:"bg-gray-800 text-white border-b p-4 flex justify-between items-center sticky top-0 z-20 shadow-sm",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>p("info"),className:`px-4 py-2 rounded-lg font-bold transition-colors flex items-center gap-2 ${h==="info"?"bg-white text-gray-900":"bg-gray-700 hover:bg-gray-600"}`,children:[e.jsx(Yn,{size:18})," "]}),e.jsxs("button",{onClick:()=>p("grid"),className:`px-4 py-2 rounded-lg font-bold transition-colors flex items-center gap-2 ${h==="grid"?"bg-white text-gray-900":"bg-gray-700 hover:bg-gray-600"}`,children:[e.jsx(Fi,{size:18}),"  "]}),e.jsxs("button",{onClick:()=>p("evaluation"),className:`px-4 py-2 rounded-lg font-bold transition-colors flex items-center gap-2 ${h==="evaluation"?"bg-white text-gray-900":"bg-gray-700 hover:bg-gray-600"}`,children:[e.jsx(js,{size:18}),"  "]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs bg-yellow-600 text-white px-2 py-1 rounded",children:" "}),x&&e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"file",ref:N,onChange:x,className:"hidden",accept:"image/*"}),e.jsx("button",{onClick:()=>{var ae;return(ae=N.current)==null?void 0:ae.click()},className:"p-2 rounded-lg text-gray-400 hover:bg-gray-700 hover:text-white transition-colors",title:"  /",children:e.jsx(Qi,{size:20})})]}),e.jsxs("button",{onClick:o,className:"flex items-center gap-2 bg-white text-gray-900 px-4 py-2 rounded-lg hover:bg-gray-100 font-bold shadow-sm",children:[e.jsx(ys,{size:18}),""]})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 max-w-5xl mx-auto w-full",children:[h==="info"&&e.jsx("div",{className:"space-y-6 animate-in fade-in",children:e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800 border-b pb-2 mb-4",children:"  "}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4 bg-gray-50 p-4 rounded-lg",children:[e.jsx(pe,{label:"",value:n.wilaya,onChange:ae=>w("wilaya",ae)}),e.jsx(pe,{label:"",value:((G=n.legacyData)==null?void 0:G.daira)||"",onChange:ae=>A("daira",ae)}),e.jsx(pe,{label:"",value:((F=n.legacyData)==null?void 0:F.municipality)||"",onChange:ae=>A("municipality",ae)}),e.jsx(pe,{label:"",value:n.district,onChange:ae=>w("district",ae)}),e.jsx(pe,{label:"",value:n.school,onChange:ae=>w("school",ae)}),e.jsx(pe,{label:" ",value:((O=n.legacyData)==null?void 0:O.schoolYear)||"",onChange:ae=>A("schoolYear",ae)})]}),e.jsx("hr",{className:"my-4"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(pe,{label:" ",value:t.fullName,onChange:ae=>I("fullName",ae)}),e.jsx(pe,{label:"/",value:((V=n.legacyData)==null?void 0:V.familyStatus)||"",onChange:ae=>A("familyStatus",ae),options:["()","()","()"]}),e.jsx(pe,{type:"date",label:" ",value:t.birthDate,onChange:ae=>I("birthDate",ae)}),e.jsx(pe,{label:" ",value:t.birthPlace,onChange:ae=>I("birthPlace",ae)}),e.jsx(pe,{type:"date",label:"  ",value:t.recruitmentDate,onChange:ae=>I("recruitmentDate",ae)}),e.jsx(pe,{label:" ()",value:t.rank,onChange:ae=>I("rank",ae),options:["  ","    ","    "," "," "]}),e.jsx(pe,{label:"",value:t.echelon||"",onChange:ae=>I("echelon",ae),options:Array.from({length:12},(ae,Je)=>(Je+1).toString())}),e.jsx(pe,{type:"date",label:" ",value:t.echelonDate||"",onChange:ae=>I("echelonDate",ae)}),e.jsx(pe,{label:" ",value:t.degree,onChange:ae=>I("degree",ae),options:N2}),e.jsx(pe,{type:"date",label:"",value:t.degreeDate||((X=n.legacyData)==null?void 0:X.graduationDate)||"",onChange:ae=>{A("graduationDate",ae),I("degreeDate",ae)}}),e.jsx(pe,{label:" ",value:((ee=n.legacyData)==null?void 0:ee.trainingInstitute)||"",onChange:ae=>A("trainingInstitute",ae)}),e.jsx(pe,{type:"date",label:" ",value:((Q=n.legacyData)==null?void 0:Q.trainingDate)||"",onChange:ae=>A("trainingDate",ae)}),e.jsx(pe,{type:"date",label:"  ",value:t.lastInspectionDate,onChange:ae=>I("lastInspectionDate",ae)}),e.jsx(pe,{label:" ",value:t.lastMark.toString(),onChange:ae=>I("lastMark",parseFloat(ae)),type:"number"})]})]})}),h==="grid"&&e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 animate-in fade-in",dir:"rtl",children:[e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-200",children:[e.jsx("h3",{className:"font-bold text-md text-gray-800 border-b pb-2 mb-3 bg-gray-50 p-2 rounded",children:" "}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(pe,{type:"date",label:"",value:n.inspectionDate,onChange:ae=>w("inspectionDate",ae)}),e.jsx(pe,{label:"",value:n.duration,onChange:ae=>w("duration",ae)}),e.jsx(pe,{label:"",value:n.level,onChange:ae=>w("level",ae),options:j2}),e.jsx(pe,{type:"number",label:" ",value:n.studentCount.toString(),onChange:ae=>w("studentCount",parseInt(ae))})]}),e.jsxs("div",{className:"mt-3 space-y-3",children:[e.jsx(pe,{label:"      ",value:((se=n.legacyData)==null?void 0:se.classroomListening)||"",onChange:ae=>A("classroomListening",ae),options:w2}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(pe,{label:"",value:((ne=n.legacyData)==null?void 0:ne.lighting)||"",onChange:ae=>A("lighting",ae),options:jx}),e.jsx(pe,{label:"",value:((P=n.legacyData)==null?void 0:P.cleanliness)||"",onChange:ae=>A("cleanliness",ae),options:S2}),e.jsx(pe,{label:"",value:((ie=n.legacyData)==null?void 0:ie.heating)||"",onChange:ae=>A("heating",ae),options:_2}),e.jsx(pe,{label:"",value:((le=n.legacyData)==null?void 0:le.ventilation)||"",onChange:ae=>A("ventilation",ae),options:jx})]})]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-200",children:[e.jsx("h3",{className:"font-bold text-md text-gray-800 border-b pb-2 mb-3 bg-gray-50 p-2 rounded",children:" "}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(pe,{label:" ",value:n.subject,onChange:ae=>w("subject",ae),options:y2}),e.jsx(pe,{label:"",value:n.topic,onChange:ae=>w("topic",ae)})]})]}),e.jsx("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-200",children:e.jsx(pe,{label:"  ",value:((Z=n.legacyData)==null?void 0:Z.documentsAndPosters)||"",onChange:ae=>A("documentsAndPosters",ae),options:T2})}),e.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-200 space-y-3",children:[e.jsx(pe,{label:"  ()",value:((q=n.legacyData)==null?void 0:q.lessonPreparation)||"",onChange:ae=>A("lessonPreparation",ae),options:C2}),e.jsx(pe,{label:" ",value:((Y=n.legacyData)==null?void 0:Y.preparationValue)||"",onChange:ae=>A("preparationValue",ae),options:E2})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-200 space-y-3",children:[e.jsx(pe,{label:"",value:((T=n.legacyData)==null?void 0:T.registers)||"",onChange:ae=>A("registers",ae),options:M2}),e.jsx(pe,{label:"    ",value:((E=n.legacyData)==null?void 0:E.registersUsed)||"",onChange:ae=>A("registersUsed",ae),options:R2}),e.jsxs("div",{className:"bg-blue-50 p-2 rounded border border-blue-100 mt-2",children:[e.jsx("label",{className:"block text-[11px] font-bold text-blue-800 mb-2",children:"    :"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(pe,{label:" ",value:((L=n.legacyData)==null?void 0:L.scheduledPrograms)||"",onChange:ae=>A("scheduledPrograms",ae),options:I2}),e.jsx(pe,{label:"",value:((U=n.legacyData)==null?void 0:U.progression)||"",onChange:ae=>A("progression",ae),options:z2})]})]}),e.jsx(pe,{label:"",value:(($=n.legacyData)==null?void 0:$.duties)||"",onChange:ae=>A("duties",ae),options:L2})]})]}),e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-200",children:[e.jsx("h3",{className:"font-bold text-md text-gray-800 border-b pb-2 mb-3 bg-gray-50 p-2 rounded",children:" "}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(pe,{label:" ",value:((C=n.legacyData)==null?void 0:C.informationValue)||"",onChange:ae=>A("informationValue",ae),options:U2}),e.jsx(pe,{label:"  ",value:((D=n.legacyData)==null?void 0:D.lessonExecution)||"",onChange:ae=>A("lessonExecution",ae),options:P2}),e.jsx(pe,{label:"   ",value:((j=n.legacyData)==null?void 0:j.objectivesAchieved)||"",onChange:ae=>A("objectivesAchieved",ae),options:q2}),e.jsx(pe,{label:" ",value:((S=n.legacyData)==null?void 0:S.studentParticipation)||"",onChange:ae=>A("studentParticipation",ae),options:O2})]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-200",children:[e.jsx("h3",{className:"font-bold text-md text-gray-800 border-b pb-2 mb-3 bg-gray-50 p-2 rounded",children:""}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(pe,{label:"    ",value:((k=n.legacyData)==null?void 0:k.applications)||"",onChange:ae=>A("applications",ae),options:$2}),e.jsx(pe,{label:"  ",value:((z=n.legacyData)==null?void 0:z.applicationsSuitability)||"",onChange:ae=>A("applicationsSuitability",ae),options:H2})]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-200",children:[e.jsx("h3",{className:"font-bold text-md text-gray-800 border-b pb-2 mb-3 bg-gray-50 p-2 rounded",children:" "}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(pe,{label:"",value:((W=n.legacyData)==null?void 0:W.boardWork)||"",onChange:ae=>A("boardWork",ae),options:k2}),e.jsxs("div",{className:"bg-gray-100 p-2 rounded border text-sm text-gray-600 font-bold flex justify-between items-center",children:[e.jsx("span",{children:":"}),e.jsx("span",{children:""})]}),e.jsx(pe,{label:" ",value:((ue=n.legacyData)==null?void 0:ue.otherAids)||"",onChange:ae=>A("otherAids",ae),options:A2})]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-200",children:[e.jsx("h3",{className:"font-bold text-md text-gray-800 border-b pb-2 mb-3 bg-gray-50 p-2 rounded",children:" "}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(pe,{label:"    ",value:((J=n.legacyData)==null?void 0:J.notebooksMonitored)||"",onChange:ae=>A("notebooksMonitored",ae),options:D2}),e.jsx(pe,{label:"   ",value:((be=n.legacyData)==null?void 0:be.notebooksCare)||"",onChange:ae=>A("notebooksCare",ae),options:G2})]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-200",children:[e.jsx("h3",{className:"font-bold text-md text-gray-800 border-b pb-2 mb-3 bg-gray-50 p-2 rounded",children:" "}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(pe,{label:"   ",value:((Ee=n.legacyData)==null?void 0:Ee.homeworkValue)||"",onChange:ae=>A("homeworkValue",ae),options:V2}),e.jsx(pe,{label:"  ",value:((Re=n.legacyData)==null?void 0:Re.homeworkCorrection)||"",onChange:ae=>A("homeworkCorrection",ae),options:B2}),e.jsx(pe,{label:" ",value:((_e=n.legacyData)==null?void 0:_e.homeworkValue)||"",onChange:ae=>A("homeworkValue",ae),options:["","",""]})]})]})]})]}),h==="evaluation"&&e.jsx("div",{className:"space-y-6 animate-in fade-in",children:e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800 border-b pb-2 mb-4",children:" "}),e.jsxs("div",{className:"mb-6 relative",children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"1.    ( )"}),e.jsx(ze,{value:n.generalAssessment,onChange:ae=>w("generalAssessment",ae),className:"w-full border rounded-lg p-4 leading-relaxed bg-gray-50 text-sm",minHeight:"min-h-[200px]",placeholder:"    ..."}),e.jsxs("button",{onClick:H,disabled:b,className:"absolute bottom-4 left-14 text-xs bg-gray-900 text-white px-3 py-1.5 rounded hover:bg-black transition-colors shadow-md flex items-center gap-2",children:[b?e.jsx(Uo,{className:"animate-spin",size:12}):e.jsx(qg,{size:12}),""]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"2.   (    )"}),e.jsx(ze,{value:((ke=n.legacyData)==null?void 0:ke.generalAppreciation)||"",onChange:ae=>A("generalAppreciation",ae),className:"w-full border rounded-lg p-4 leading-relaxed bg-white text-sm",minHeight:"min-h-[100px]",placeholder:"    ..."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 bg-gray-50 p-6 rounded-lg border border-gray-200",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"  (/20)"}),e.jsx("input",{type:"number",step:"0.25",max:"20",className:"w-full border p-2 rounded text-2xl font-bold text-center",value:n.finalMark,onChange:ae=>w("finalMark",parseFloat(ae.target.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:" "}),e.jsx(pe,{value:n.markInLetters,onChange:ae=>w("markInLetters",ae),className:"w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"  "}),e.jsx(pe,{type:"date",value:n.inspectionDate,onChange:ae=>w("inspectionDate",ae)})]})]})]})})]})]})},RE=({report:n,teacher:t,signature:a})=>{const i=()=>{document.title=`_${t.fullName.replace(/\s/g,"_")}_${n.inspectionDate}`,window.print()},o=Array.from(new Set(n.observations.map(h=>h.category))),c=o.slice(0,4),u=o.slice(4),x=h=>{const p=h.length;return p>90?"text-[9px] leading-tight":p>60?"text-[10px] leading-tight":"text-[10px] leading-normal"};return e.jsxs("div",{className:"font-serif text-black leading-normal",dir:"rtl",children:[e.jsx("div",{className:"fixed top-4 left-4 z-50 flex gap-3 no-print",children:e.jsxs("button",{onClick:i,className:"bg-red-600 text-white px-6 py-3 rounded-full shadow-2xl hover:bg-red-700 transition-transform hover:scale-105 flex items-center gap-2 font-bold font-sans border-2 border-white",children:[e.jsx(Yu,{size:24}),e.jsx("span",{className:"text-lg",children:"  PDF / "})]})}),e.jsxs("div",{className:"a4-page flex flex-col gap-1",children:[e.jsxs("div",{className:"text-center mb-0 shrink-0",children:[e.jsx("h3",{className:"text-sm font-bold",children:"   "}),e.jsx("h3",{className:"text-sm font-bold mb-1",children:"  "}),e.jsxs("div",{className:"flex justify-between items-start px-2 mb-1 text-[10px] font-bold",children:[e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{children:["  : ",n.wilaya]}),e.jsxs("p",{children:[": ",n.district]})]}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{children:"   "}),e.jsxs("p",{children:[": ",n.school]})]})]}),e.jsx("div",{className:"flex justify-center my-1",children:e.jsx("h1",{className:"text-base font-bold border-2 border-black px-8 py-0.5 rounded bg-gray-50 shadow-[2px_2px_0px_0px_#000]",children:"     "})})]}),e.jsxs("div",{className:"mb-1 border border-black shrink-0",children:[e.jsx("div",{className:"border-b border-black bg-gray-200 px-2 py-0.5 font-bold text-[11px] text-center",children:"1 -  "}),e.jsx("div",{className:"p-0.5",children:e.jsx("table",{className:"w-full text-[10px] border-collapse",children:e.jsx("tbody",{children:e.jsxs("tr",{children:[e.jsx("td",{className:"w-1/2 align-top border-l border-black p-0.5",children:e.jsx("table",{className:"w-full",children:e.jsxs("tbody",{children:[e.jsxs("tr",{className:"h-5",children:[e.jsx("td",{className:"font-bold w-20",children:" :"}),e.jsx("td",{children:t.fullName})]}),e.jsxs("tr",{className:"h-5",children:[e.jsx("td",{className:"font-bold",children:" :"}),e.jsx("td",{dir:"ltr",className:"text-right",children:ct(t.birthDate)})]}),e.jsxs("tr",{className:"h-5",children:[e.jsx("td",{className:"font-bold",children:":"}),e.jsx("td",{children:t.degree})]}),e.jsxs("tr",{className:"h-5",children:[e.jsx("td",{className:"font-bold",children:" :"}),e.jsx("td",{dir:"ltr",className:"text-right",children:ct(t.recruitmentDate)})]}),e.jsxs("tr",{className:"h-5",children:[e.jsx("td",{className:"font-bold",children:":"}),e.jsx("td",{children:t.rank})]})]})})}),e.jsx("td",{className:"w-1/2 align-top p-0.5",children:e.jsx("table",{className:"w-full",children:e.jsxs("tbody",{children:[e.jsxs("tr",{className:"h-5",children:[e.jsx("td",{className:"font-bold w-24",children:":"}),e.jsx("td",{children:t.status==="titulaire"?"":""})]}),e.jsxs("tr",{className:"h-5",children:[e.jsx("td",{className:"font-bold",children:":"}),e.jsxs("td",{children:[t.echelon||"-"," (: ",e.jsx("span",{dir:"ltr",children:ct(t.echelonDate)}),")"]})]}),e.jsxs("tr",{className:"h-5",children:[e.jsx("td",{className:"font-bold",children:" :"}),e.jsx("td",{dir:"ltr",className:"text-right",children:ct(t.currentRankDate)})]}),e.jsxs("tr",{className:"h-5",children:[e.jsx("td",{className:"font-bold",children:" :"}),e.jsxs("td",{children:[e.jsx("span",{dir:"ltr",children:ct(t.lastInspectionDate)})," (",t.lastMark,")"]})]})]})})})]})})})}),e.jsx("div",{className:"border-t border-black bg-gray-200 px-2 py-0.5 font-bold text-[11px] text-center",children:"  "}),e.jsxs("table",{className:"w-full text-[10px] border-collapse text-center",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-black h-5",children:[e.jsx("th",{className:"border-l border-black p-0.5",children:""}),e.jsx("th",{className:"border-l border-black p-0.5",children:""}),e.jsx("th",{className:"border-l border-black p-0.5",children:""}),e.jsx("th",{className:"border-l border-black p-0.5",children:""}),e.jsx("th",{className:"p-0.5",children:" (/)"})]})}),e.jsx("tbody",{children:e.jsxs("tr",{className:"h-5",children:[e.jsx("td",{className:"border-l border-black p-0.5",children:n.subject}),e.jsx("td",{className:"border-l border-black p-0.5",children:n.topic}),e.jsxs("td",{className:"border-l border-black p-0.5",children:[n.level," / ",n.group]}),e.jsx("td",{className:"border-l border-black p-0.5",children:n.duration}),e.jsxs("td",{className:"p-0.5",children:[n.studentCount," / ",n.absentCount]})]})})]})]}),e.jsxs("div",{className:"flex-1 border border-black overflow-hidden flex flex-col mb-0 min-h-0",children:[e.jsx("div",{className:"bg-gray-200 font-bold text-[11px] px-2 py-1 border-b border-black shrink-0",children:e.jsx("span",{className:"underline",children:"2 -    ( ):"})}),e.jsxs("table",{className:"w-full border-collapse text-[10px] table-fixed h-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100 h-6 border-b border-black",children:[e.jsx("th",{className:"border-l border-black p-1 w-[12%] text-center",children:""}),e.jsx("th",{className:"border-l border-black p-1 w-[40%] text-center",children:" "}),e.jsx("th",{className:"border-l border-black p-1 w-[6%] text-center",children:""}),e.jsx("th",{className:"p-1 w-[42%] text-center",children:" "})]})}),e.jsx("tbody",{children:c.map((h,p)=>{const b=n.observations.filter(y=>y.category===h);return e.jsxs(Cl.Fragment,{children:[e.jsx("tr",{className:"bg-gray-100 border-b border-black h-5",children:e.jsxs("td",{colSpan:4,className:"px-2 py-0.5 font-bold text-center text-[10px]",children:[p+1,". ",h]})}),b.map(y=>e.jsxs("tr",{className:"border-b border-black last:border-b-0",children:[e.jsx("td",{className:"border-l border-black px-1 py-1 font-bold align-middle text-center break-words leading-tight",children:y.criteria}),e.jsx("td",{className:"border-l border-black px-1 py-1 align-middle whitespace-nowrap overflow-hidden text-ellipsis",children:e.jsx("span",{className:y.indicators.join(" ").length>55?"text-[9px]":"",children:y.indicators.join(" ")})}),e.jsx("td",{className:"border-l border-black p-0.5 text-center align-middle font-bold text-[11px]",children:y.score===2?"2":y.score===1?"1":y.score===0?"0":""}),e.jsx("td",{className:`px-1 py-1 align-middle font-bold text-red-800 whitespace-pre-wrap ${x(y.improvementNotes)}`,children:y.improvementNotes})]},y.id))]},h)})})]})]}),e.jsx("div",{className:"text-center text-[9px] text-gray-500 font-bold shrink-0",children:"1 / 2"})]}),e.jsxs("div",{className:"a4-page flex flex-col gap-1",children:[e.jsxs("div",{className:"border border-black mb-1 shrink-0",children:[e.jsx("div",{className:"bg-gray-200 font-bold text-[11px] px-2 py-0.5 border-b border-black",children:e.jsx("span",{className:"underline",children:"    ( ):"})}),e.jsxs("table",{className:"w-full border-collapse text-[10px] table-fixed",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100 h-5 border-b border-black",children:[e.jsx("th",{className:"border-l border-black p-1 w-[12%] text-center",children:""}),e.jsx("th",{className:"border-l border-black p-1 w-[40%] text-center",children:" "}),e.jsx("th",{className:"border-l border-black p-1 w-[6%] text-center",children:""}),e.jsx("th",{className:"p-1 w-[42%] text-center",children:" "})]})}),e.jsx("tbody",{children:u.map((h,p)=>{const b=n.observations.filter(y=>y.category===h);return e.jsxs(Cl.Fragment,{children:[e.jsx("tr",{className:"bg-gray-100 border-b border-black h-5",children:e.jsxs("td",{colSpan:4,className:"px-2 py-0.5 font-bold text-center text-[10px]",children:[p+5,". ",h]})}),b.map(y=>e.jsxs("tr",{className:"border-b border-black last:border-b-0 h-auto",children:[e.jsx("td",{className:"border-l border-black px-1 py-1 font-bold align-middle text-center break-words leading-tight",children:y.criteria}),e.jsx("td",{className:"border-l border-black px-1 py-1 align-middle whitespace-nowrap overflow-hidden text-ellipsis",children:e.jsx("span",{className:y.indicators.join(" ").length>55?"text-[9px]":"",children:y.indicators.join(" ")})}),e.jsx("td",{className:"border-l border-black p-0.5 text-center align-middle font-bold text-[11px]",children:y.score===2?"2":y.score===1?"1":y.score===0?"0":""}),e.jsx("td",{className:`px-1 py-1 align-middle font-bold text-red-800 whitespace-pre-wrap ${x(y.improvementNotes)}`,children:y.improvementNotes})]},y.id))]},h)})})]}),e.jsx("div",{className:"text-[9px] text-center bg-gray-50 border-t border-black py-0.5 text-gray-600 font-bold",children:" : (2: ) - (1:  ) - (0:  )"})]}),e.jsxs("div",{className:"flex-1 flex flex-col border-2 border-black rounded-sm overflow-hidden mb-1 min-h-0",children:[e.jsx("div",{className:"text-center bg-gray-100 border-b-2 border-black py-0.5 shrink-0",children:e.jsx("h2",{className:"text-[14px] font-bold",children:" "})}),e.jsx("div",{className:"p-3 flex-1 text-justify text-[13px] leading-[1.8] whitespace-pre-line overflow-hidden",children:n.generalAssessment}),e.jsxs("div",{className:"flex border-t-2 border-black h-[40mm] shrink-0",children:[e.jsxs("div",{className:"w-2/3 border-l-2 border-black p-3 flex flex-col justify-center gap-3 bg-gray-50",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-bold text-[12px]",children:" :"}),e.jsx("span",{className:"flex-1 border-b border-dotted border-black font-bold text-sm px-2 text-center",children:n.markInLetters})]}),e.jsxs("div",{className:"flex items-center gap-4 mt-1",children:[e.jsx("span",{className:"font-bold text-[12px]",children:" :"}),e.jsxs("span",{className:"text-2xl font-bold border-2 border-black px-8 py-1 rounded bg-white",children:[n.finalMark," / 20"]})]})]}),e.jsxs("div",{className:"w-1/3 p-2 text-center relative flex flex-col items-center justify-start pt-2",children:[e.jsxs("p",{className:"text-[10px] font-bold mb-1",children:[" : ",n.wilaya," : ",e.jsx("span",{dir:"ltr",children:ct(n.inspectionDate)})]}),e.jsx("p",{className:"font-bold underline text-[12px] mb-1",children:" "}),e.jsx("p",{className:"text-[12px] font-bold mb-2",children:n.inspectorName}),a?e.jsx("div",{className:"absolute top-8 left-1/2 transform -translate-x-1/2 w-56 h-32 flex items-center justify-center pointer-events-none z-10",children:e.jsx("img",{src:a,alt:"Signature",className:"w-full h-full mix-blend-multiply object-contain transform -rotate-2 scale-125"})}):e.jsx("div",{className:"mt-2 text-[8px] text-gray-300 border border-dashed border-gray-300 w-16 h-16 rounded-full flex items-center justify-center rotate-[-15deg]",children:""})]})]})]}),e.jsx("div",{className:"flex justify-end text-[9px] font-bold px-4 text-black shrink-0",children:e.jsx("span",{children:"2 / 2"})})]})]})},DE=({report:n,teacher:t,signature:a})=>{const i=()=>{document.title=`__${t.fullName}`,window.print()},o=h=>n.lessons[h]||{subject:"",topic:"",level:"",timeStart:"",timeEnd:"",phaseLaunch:"",phaseConstruction:"",phaseInvestment:""},u=typeof n.oralQuestions=="string"?{educationScience:n.oralQuestions,psychology:"",legislation:""}:n.oralQuestions||{educationScience:"",psychology:"",legislation:""},x=t.degree&&(t.degree.includes(" ")||t.degree.includes("ENS"));return e.jsxs("div",{className:"font-serif text-black leading-normal",dir:"rtl",children:[e.jsx("div",{className:"fixed top-4 left-4 z-50 flex gap-3 no-print",children:e.jsxs("button",{onClick:i,className:"bg-gray-800 text-white px-6 py-3 rounded-full shadow-xl hover:bg-black transition-transform hover:scale-105 flex items-center gap-2 font-bold font-sans border-2 border-white",children:[e.jsx(Yu,{size:20}),e.jsx("span",{children:"  PDF"})]})}),e.jsxs("div",{className:"a4-page flex flex-col justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"text-center mb-4 space-y-1",children:[e.jsx("h3",{className:"text-sm font-bold",children:"   "}),e.jsx("h3",{className:"text-sm font-bold",children:"  "}),e.jsxs("div",{className:"flex justify-between items-start text-xs font-bold mt-2 px-2",children:[e.jsx("div",{className:"text-right",children:e.jsxs("p",{children:["   ",n.wilaya]})}),e.jsx("div",{className:"text-left",children:e.jsxs("p",{children:["    / ",n.district]})})]}),e.jsx("div",{className:"flex justify-center mt-3 mb-4",children:e.jsx("div",{className:"border-[3px] border-black border-double px-10 py-2 rounded-2xl bg-white text-center shadow-[3px_3px_0px_0px_rgba(0,0,0,1)]",children:e.jsxs("h1",{className:"text-lg font-bold",children:["  ",e.jsx("br",{}),e.jsx("span",{className:"font-normal text-sm",children:"    "})]})})})]}),e.jsxs("div",{className:"space-y-3 text-xs font-bold px-2",children:[e.jsxs("div",{className:"border-b-2 border-black border-dotted pb-3 space-y-1.5",children:[e.jsx("p",{className:"mb-1",children:"     :   "}),e.jsxs("div",{className:"flex flex-wrap gap-x-12 gap-y-1",children:[e.jsxs("span",{children:[" : ",e.jsx("span",{dir:"ltr",children:ct(n.examDate)})]}),e.jsxs("span",{children:[" : ",n.school]}),e.jsxs("span",{children:[" : ",n.city]})]}),e.jsxs("div",{className:"flex flex-wrap gap-x-8 gap-y-1 pt-1",children:[e.jsxs("span",{children:["  : ",n.inspectorName]}),e.jsxs("span",{children:["   :  ",n.district]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("span",{className:"min-w-[150px]",children:[" (): ",n.directorName]}),e.jsx("span",{children:"(  )"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("span",{className:"min-w-[150px]",children:[" (): ",n.teacherMemberName]}),e.jsx("span",{children:"(  )"})]})]}),e.jsxs("div",{className:"space-y-2 pt-1",children:[e.jsx("p",{className:"underline decoration-1 underline-offset-4 mb-2",children:"     :   "}),e.jsxs("div",{className:"flex flex-wrap gap-x-16 gap-y-1 items-center",children:[e.jsxs("span",{className:"min-w-[250px]",children:["() : ",t.fullName]}),e.jsx("span",{children:"  : /"})]}),e.jsxs("div",{className:"flex flex-wrap gap-x-16 gap-y-1 items-center",children:[e.jsxs("span",{className:"min-w-[250px]",children:["()  : ",t.birthPlace]}),e.jsxs("span",{children:[" : ",e.jsx("span",{dir:"ltr",children:ct(t.birthDate)})]})]}),e.jsx("div",{className:"flex gap-4",children:e.jsxs("span",{className:"flex-1",children:["()  : ",e.jsx("span",{dir:"ltr",children:ct(t.recruitmentDate)})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-4 gap-y-1",children:[e.jsxs("span",{children:["    : ",n.appointmentDecisionNumber]}),e.jsxs("span",{children:[" : ",e.jsx("span",{dir:"ltr",children:ct(n.appointmentDecisionDate)})]}),e.jsxs("span",{children:["    : ",n.financialVisaNumber]}),e.jsxs("span",{children:[" : ",e.jsx("span",{dir:"ltr",children:ct(n.financialVisaDate)})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-x-8 gap-y-1 items-center",children:[e.jsxs("span",{children:["()   : ",t.degree]}),e.jsxs("span",{children:[" : ",n.university]}),e.jsxs("span",{children:[" : ",e.jsx("span",{dir:"ltr",children:ct(t.degreeDate)})]})]}),!x&&e.jsxs("p",{children:[" ",n.recruitmentType||"  ","  : ",e.jsx("span",{dir:"ltr",children:ct(n.contestDate)})]})]}),e.jsxs("div",{className:"pt-2",children:[e.jsx("p",{className:"underline mb-1 text-center",children:"    "}),e.jsxs("table",{className:"w-full border-collapse border border-black text-center text-xs",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{className:"border border-black p-1 w-1/3",children:" "}),e.jsx("th",{className:"border border-black p-1 w-1/3",children:" "}),e.jsx("th",{className:"border border-black p-1 w-1/3",children:" "})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsxs("td",{className:"border border-black p-1 align-top h-16",children:[e.jsx("p",{className:"font-bold mb-1",children:o(0).subject}),e.jsx("p",{className:"mb-1",children:o(0).topic}),e.jsx("p",{children:o(0).level}),e.jsxs("p",{className:"text-[10px] mt-1",children:[o(0).timeStart," - ",o(0).timeEnd]})]}),e.jsxs("td",{className:"border border-black p-1 align-top",children:[e.jsx("p",{className:"font-bold mb-1",children:o(1).subject}),e.jsx("p",{className:"mb-1",children:o(1).topic}),e.jsx("p",{children:o(1).level}),e.jsxs("p",{className:"text-[10px] mt-1",children:[o(1).timeStart," - ",o(1).timeEnd]})]}),e.jsxs("td",{className:"border border-black p-1 align-top",children:[e.jsx("p",{className:"font-bold mb-1",children:o(2).subject}),e.jsx("p",{className:"mb-1",children:o(2).topic}),e.jsx("p",{children:o(2).level}),e.jsxs("p",{className:"text-[10px] mt-1",children:[o(2).timeStart," - ",o(2).timeEnd]})]})]}),e.jsx("tr",{children:e.jsxs("td",{colSpan:3,className:"border border-black p-1 font-bold bg-gray-50",children:["      : ",n.pedagogyMark,"  40"]})})]})]})]}),e.jsxs("div",{className:"pt-2 border-t-2 border-black border-dashed mt-2",children:[e.jsx("p",{className:"underline mb-1",children:"  :"}),e.jsxs("div",{className:"grid grid-cols-1 gap-1 pl-4 text-[11px]",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("span",{className:"font-bold w-24 shrink-0",children:"  :"}),e.jsx("span",{className:"font-normal",children:u.educationScience})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("span",{className:"font-bold w-24 shrink-0",children:"  :"}),e.jsx("span",{className:"font-normal",children:u.psychology})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("span",{className:"font-bold w-24 shrink-0",children:" :"}),e.jsx("span",{className:"font-normal",children:u.legislation})]})]}),e.jsxs("p",{className:"text-left font-bold mt-1 pl-2 border-t border-black inline-block pt-1",children:["   : ",n.oralMark,"  20"]})]})]})]}),e.jsxs("div",{className:"mt-auto border-t-[3px] border-double border-black text-xs pt-2 pb-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2 px-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-bold",children:"  :"}),e.jsx("span",{className:"border-2 border-black px-6 py-1 font-bold text-sm bg-gray-100",children:n.finalDecision==="confirmed"?" ()":n.finalDecision==="deferred"?"":""})]}),e.jsxs("div",{className:"border border-black p-1 px-3 text-center rounded",children:[e.jsx("p",{className:"font-bold",children:" "}),e.jsxs("p",{className:"text-lg font-bold",children:[n.totalMark," / 60"]})]})]}),e.jsxs("div",{className:"flex justify-between items-start px-4 mt-2 text-[11px] font-bold",children:[e.jsxs("div",{className:"text-center w-1/3",children:[e.jsx("p",{className:"mb-2 underline",children:" "}),e.jsx("p",{className:"mb-1",children:n.directorName}),e.jsx("p",{children:n.teacherMemberName})]}),e.jsxs("div",{className:"text-center w-1/3",children:[e.jsx("p",{className:"mb-2 underline",children:"  "}),e.jsx("div",{className:"h-12 flex items-center justify-center mb-1",children:a?e.jsx("img",{src:a,alt:"Sig",className:"w-20 h-12 object-contain mix-blend-multiply"}):" "}),e.jsx("p",{children:n.inspectorName})]})]})]})]}),e.jsxs("div",{className:"a4-page flex flex-col",children:[e.jsx("div",{className:"flex justify-center mb-10 shrink-0",children:e.jsx("div",{className:"border-[3px] border-black px-12 py-2 rounded-xl text-center shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] bg-white",children:e.jsx("h2",{className:"font-bold text-xl tracking-widest",children:" "})})}),e.jsx("div",{className:"flex-1 space-y-10 text-[12px] font-bold text-right pr-2 flex flex-col",children:[0,1,2].map(h=>{const p=o(h);return e.jsxs("div",{className:"relative pl-4 border-r-4 border-gray-200 pr-4",children:[e.jsxs("h4",{className:"mb-3 text-sm border-b border-black inline-block pb-1",children:[" ",h===0?"":h===1?"":""," : ",e.jsx("span",{className:"font-normal mx-2",children:p.subject})]}),e.jsxs("ul",{className:"list-none space-y-3 leading-relaxed",children:[e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"font-bold min-w-[120px]",children:"   :"}),e.jsx("span",{className:"font-normal text-justify",children:p.phaseLaunch||"..................................................."})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"font-bold min-w-[120px]",children:"   :"}),e.jsx("span",{className:"font-normal text-justify",children:p.phaseConstruction||"..................................................."})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"font-bold min-w-[120px]",children:"   :"}),e.jsx("span",{className:"font-normal text-justify",children:p.phaseInvestment||"..................................................."})]})]})]},h)})}),e.jsxs("div",{className:"mt-auto pt-10 shrink-0",children:[e.jsxs("p",{className:"text-[12px] font-bold text-justify mb-8 leading-loose px-2 border-t border-black pt-4",children:["          : ",e.jsx("span",{className:"underline decoration-dotted underline-offset-4 mx-1",children:" ()     "})]}),e.jsxs("div",{className:"flex justify-between items-start px-8 pb-8",children:[e.jsx("div",{className:"w-1/2"}),e.jsxs("div",{className:"w-1/2 text-center text-[12px] font-bold relative flex flex-col items-center",children:[e.jsxs("p",{className:"mb-4",children:[" : ",e.jsx("span",{dir:"ltr",children:ct(n.examDate)})]}),e.jsx("p",{className:"mb-1",children:"   :"}),e.jsx("p",{className:"mb-6 text-sm",children:n.inspectorName}),a?e.jsx("div",{className:"absolute top-12 left-1/2 transform -translate-x-1/2 w-56 h-32 flex items-center justify-center pointer-events-none z-10",children:e.jsx("img",{src:a,alt:"Signature",className:"w-full h-full mix-blend-multiply object-contain transform -rotate-2 scale-125"})}):e.jsx("div",{className:"mt-4 text-[8px] text-gray-300 border border-dashed border-gray-300 w-16 h-16 rounded-full flex items-center justify-center rotate-[-15deg]",children:""})]})]})]})]})]})},IE=({report:n,teacher:t,signature:a})=>{var o,c,u,x,h,p,b,y,N,w,A,I,H,G,F,O,V,X,ee,Q,se,ne,P,ie,le,Z,q,Y,T,E,L,U,$,C;const i=()=>{document.title=`__${t.fullName.replace(/\s/g,"_")}_${n.inspectionDate}`,window.print()};return e.jsxs("div",{className:"font-serif text-black leading-normal",dir:"rtl",children:[e.jsx("div",{className:"fixed top-4 left-4 z-50 flex gap-3 no-print",children:e.jsxs("button",{onClick:i,className:"bg-amber-600 text-white px-6 py-3 rounded-full shadow-2xl hover:bg-amber-700 transition-transform hover:scale-105 flex items-center gap-2 font-bold font-sans border-2 border-white",children:[e.jsx(Yu,{size:24}),e.jsx("span",{className:"text-lg",children:"  PDF / "})]})}),e.jsxs("div",{className:"a4-page flex flex-col gap-1",children:[e.jsxs("div",{className:"flex justify-between items-start text-[10px] font-bold mb-1 relative shrink-0",children:[e.jsxs("div",{className:"text-right flex flex-col items-start w-1/3 space-y-0.5",children:[e.jsx("h3",{className:"text-[11px] font-bold text-center w-[200%] -mr-[50%] mb-2",children:"   "}),e.jsx("p",{children:"  "}),e.jsxs("p",{children:["  : ",n.wilaya]}),e.jsx("p",{children:"   "}),e.jsxs("p",{children:[": ",n.district]})]}),e.jsxs("div",{className:"text-right w-1/3 pt-6 space-y-0.5",children:[e.jsxs("p",{children:[": ",n.school]}),e.jsxs("p",{children:[": ",(o=n.legacyData)==null?void 0:o.municipality]}),e.jsxs("p",{children:[": ",(c=n.legacyData)==null?void 0:c.daira]}),e.jsxs("p",{children:[" : ",(u=n.legacyData)==null?void 0:u.schoolYear]})]})]}),e.jsx("div",{className:"flex justify-center mb-1 shrink-0",children:e.jsx("div",{className:"border-[3px] border-black px-6 py-1 shadow-[3px_3px_0px_0px_rgba(0,0,0,1)] bg-white",children:e.jsx("h1",{className:"text-lg font-bold",children:"    "})})}),e.jsxs("div",{className:"border-[3px] border-black p-1.5 mb-1 shrink-0 text-[11px]",children:[e.jsxs("div",{className:"flex items-center mb-0.5",children:[e.jsx("span",{className:"font-bold ml-2 w-16",children:"  :"}),e.jsx("span",{className:"font-normal flex-[2]",children:t.fullName}),e.jsx("span",{className:"font-bold ml-2 w-12 text-center",children:"():"}),e.jsx("span",{className:"font-normal flex-1 text-center",children:"/"}),e.jsx("span",{className:"font-bold ml-2 w-10",children:":"}),e.jsx("span",{className:"font-normal flex-1",children:(x=n.legacyData)==null?void 0:x.familyStatus})]}),e.jsxs("div",{className:"flex items-center mb-0.5",children:[e.jsx("span",{className:"font-bold ml-2 w-24",children:"  :"}),e.jsx("span",{className:"font-normal flex-1 text-right",dir:"ltr",children:ct(t.birthDate)}),e.jsx("span",{className:"font-bold px-2",children:":"}),e.jsx("span",{className:"font-normal flex-[2]",children:t.birthPlace})]}),e.jsxs("div",{className:"flex items-center mb-0.5",children:[e.jsx("span",{className:"font-bold ml-2 w-20",children:"  :"}),e.jsx("span",{className:"font-normal w-24 text-right",dir:"ltr",children:ct(t.recruitmentDate)}),e.jsx("span",{className:"font-bold ml-2 w-10 text-center",children:":"}),e.jsx("span",{className:"font-normal flex-1",children:t.rank})]}),e.jsxs("div",{className:"flex items-center mb-0.5",children:[e.jsx("span",{className:"font-bold ml-2 w-20",children:":"}),e.jsx("span",{className:"font-normal w-24",children:t.echelon}),e.jsx("span",{className:"font-bold ml-2 w-10 text-center",children:":"}),e.jsx("span",{className:"font-normal flex-1 text-right pr-2",dir:"ltr",children:ct(t.echelonDate)})]}),e.jsxs("div",{className:"flex items-center mb-0.5",children:[e.jsx("span",{className:"font-bold ml-2 w-20",children:" :"}),e.jsx("span",{className:"font-normal w-24",children:t.degree}),e.jsx("span",{className:"font-bold ml-2 w-10 text-center",children:":"}),e.jsx("span",{className:"font-normal flex-1 text-right pr-2",dir:"ltr",children:ct(t.degreeDate||((h=n.legacyData)==null?void 0:h.graduationDate))})]}),e.jsxs("div",{className:"flex items-center mb-0.5",children:[e.jsx("span",{className:"font-bold ml-2 w-20",children:":"}),e.jsx("span",{className:"font-normal w-24",children:(p=n.legacyData)==null?void 0:p.trainingInstitute}),e.jsx("span",{className:"font-bold ml-2 w-10 text-center",children:":"}),e.jsx("span",{className:"font-normal flex-1 text-right pr-2",dir:"ltr",children:ct((b=n.legacyData)==null?void 0:b.trainingDate)})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"font-bold ml-2 w-20",children:" :"}),e.jsx("span",{className:"font-normal w-24 text-right",dir:"ltr",children:ct(t.lastInspectionDate)}),e.jsx("span",{className:"font-bold ml-2 w-10 text-center",children:":"}),e.jsx("span",{className:"font-normal flex-1",children:t.lastMark})]})]}),e.jsxs("div",{className:"border-[3px] border-t-0 border-black flex flex-1 h-full min-h-0 text-[10px]",children:[e.jsxs("div",{className:"w-[48%] border-l-[3px] border-black p-1.5 flex flex-col justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold underline text-[11px] mb-1",children:" "}),e.jsxs("div",{className:"flex justify-between font-bold mb-1",children:[e.jsxs("span",{children:["  : ",e.jsx("span",{className:"font-normal",dir:"ltr",children:ct(n.inspectionDate)})]}),e.jsxs("span",{children:[": ",e.jsx("span",{className:"font-normal",children:n.duration})]})]}),e.jsxs("div",{className:"flex justify-between font-bold mb-1",children:[e.jsxs("span",{children:[" : ",e.jsx("span",{className:"font-normal",children:n.level})]}),e.jsxs("span",{children:[" : ",e.jsx("span",{className:"font-normal",children:n.studentCount})]})]}),e.jsxs("div",{className:"font-bold mb-1",children:["       ",e.jsx("span",{className:"font-normal",children:(y=n.legacyData)==null?void 0:y.classroomListening})]}),e.jsxs("div",{className:"flex justify-between font-bold mb-1",children:[e.jsxs("span",{children:["  ",e.jsx("span",{className:"font-normal",children:(N=n.legacyData)==null?void 0:N.lighting})]}),e.jsxs("span",{children:["  ",e.jsx("span",{className:"font-normal",children:(w=n.legacyData)==null?void 0:w.cleanliness})]})]}),e.jsxs("div",{className:"flex justify-between font-bold mb-1",children:[e.jsxs("span",{children:["  ",e.jsx("span",{className:"font-normal",children:(A=n.legacyData)==null?void 0:A.heating})]}),e.jsxs("span",{children:[" ",e.jsx("span",{className:"font-normal",children:(I=n.legacyData)==null?void 0:I.ventilation})]})]})]}),e.jsx("div",{className:"w-full border-b border-black border-dashed my-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold underline text-[11px] mb-1",children:" "}),e.jsxs("div",{className:"font-bold mb-1",children:["  : ",e.jsx("span",{className:"font-normal",children:n.subject})]}),e.jsxs("div",{className:"font-bold mb-1",children:[" : ",e.jsx("span",{className:"font-normal",children:n.topic})]})]}),e.jsxs("div",{className:"flex flex-col gap-0.5",children:[e.jsx("div",{className:"font-bold underline mt-0.5",children:"   :"}),e.jsx("div",{className:"min-h-[1.2em] leading-tight font-normal",children:(H=n.legacyData)==null?void 0:H.documentsAndPosters})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[e.jsx("span",{className:"font-bold underline",children:"  :"}),e.jsx("span",{className:"font-normal",children:(G=n.legacyData)==null?void 0:G.lessonPreparation})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[e.jsx("span",{className:"font-bold underline",children:"  :"}),e.jsx("span",{className:"font-normal",children:(F=n.legacyData)==null?void 0:F.preparationValue})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("span",{className:"font-bold underline",children:" :"}),e.jsx("span",{className:"font-normal",children:(O=n.legacyData)==null?void 0:O.registers})]}),e.jsx("div",{className:"font-bold mt-0.5",children:"      "}),e.jsx("div",{className:"font-normal mr-4",children:(V=n.legacyData)==null?void 0:V.registersUsed}),e.jsx("div",{className:"font-bold mt-0.5",children:"     :"}),e.jsxs("div",{className:"flex justify-between pr-4 mt-0.5 font-bold",children:[e.jsxs("span",{children:["  ",e.jsx("span",{className:"font-normal",children:(X=n.legacyData)==null?void 0:X.scheduledPrograms})]}),e.jsxs("span",{children:["  ",e.jsx("span",{className:"font-normal",children:(ee=n.legacyData)==null?void 0:ee.progression})]})]}),e.jsxs("div",{className:"font-bold mt-1",children:[": ",e.jsx("span",{className:"font-normal",children:(Q=n.legacyData)==null?void 0:Q.duties})]})]})]}),e.jsxs("div",{className:"w-[52%] p-1.5 flex flex-col justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold underline text-[11px] mb-1",children:"  :"}),e.jsxs("div",{className:"font-bold mb-1",children:[" :",e.jsx("div",{className:"font-normal mt-0.5 min-h-[14px]",children:(se=n.legacyData)==null?void 0:se.informationValue})]}),e.jsxs("div",{className:"font-bold mb-1",children:["    ",e.jsx("span",{className:"font-normal",children:(ne=n.legacyData)==null?void 0:ne.lessonExecution})]}),e.jsxs("div",{className:"font-bold mb-1",children:["     ",e.jsx("span",{className:"font-normal",children:(P=n.legacyData)==null?void 0:P.objectivesAchieved})]}),e.jsxs("div",{className:"font-bold mb-1 mt-1",children:[e.jsx("span",{className:"underline",children:" :"}),e.jsx("div",{className:"font-normal mt-0.5",children:(ie=n.legacyData)==null?void 0:ie.studentParticipation})]})]}),e.jsx("div",{className:"w-full border-b border-black border-dashed my-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold underline text-[11px] mb-1",children:""}),e.jsxs("div",{className:"font-bold mb-1",children:["      ",e.jsx("span",{className:"font-normal",children:(le=n.legacyData)==null?void 0:le.applications})]}),e.jsxs("div",{className:"font-bold mb-1",children:["    ",e.jsx("span",{className:"font-normal",children:(Z=n.legacyData)==null?void 0:Z.applicationsSuitability})]})]}),e.jsx("div",{className:"w-full border-b border-black border-dashed my-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold underline text-[11px] mb-1",children:" "}),e.jsxs("div",{className:"font-bold mb-1",children:[": ",e.jsx("span",{className:"font-normal",children:(q=n.legacyData)==null?void 0:q.boardWork})]}),e.jsxs("div",{className:"font-bold mb-1",children:[": ",e.jsx("span",{className:"font-normal",children:""})]}),e.jsxs("div",{className:"font-bold mb-1",children:[" : ",e.jsx("span",{className:"font-normal",children:(Y=n.legacyData)==null?void 0:Y.otherAids})]})]}),e.jsx("div",{className:"w-full border-b border-black border-dashed my-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold underline text-[11px] mb-1",children:"  :"}),e.jsxs("div",{className:"font-bold mb-1",children:["      ",e.jsx("span",{className:"font-normal",children:(T=n.legacyData)==null?void 0:T.notebooksMonitored})]}),e.jsxs("div",{className:"font-bold mb-1",children:["     ",e.jsx("span",{className:"font-normal",children:(E=n.legacyData)==null?void 0:E.notebooksCare})]})]}),e.jsx("div",{className:"w-full border-b border-black border-dashed my-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold underline text-[11px] mb-1",children:"  :"}),e.jsxs("div",{className:"font-bold mb-1",children:["     ",e.jsx("span",{className:"font-normal",children:(L=n.legacyData)==null?void 0:L.homeworkValue})]}),e.jsxs("div",{className:"font-bold mb-1",children:["    ",e.jsx("span",{className:"font-normal",children:(U=n.legacyData)==null?void 0:U.homeworkCorrection})]}),e.jsxs("div",{className:"font-bold mb-1",children:["  : ",e.jsx("span",{className:"font-normal",children:($=n.legacyData)==null?void 0:$.homeworkValue})]})]})]})]}),e.jsx("div",{className:"text-center text-[9px] font-bold mt-0.5",children:"2 / 1"})]}),e.jsxs("div",{className:"a4-page flex flex-col gap-1",children:[e.jsxs("div",{className:"border-[3px] border-black flex-1 flex flex-col min-h-0",children:[e.jsx("div",{className:"text-center font-bold py-0.5 border-b-[3px] border-black bg-gray-100 text-[12px] shrink-0",children:"   (    )"}),e.jsx("div",{className:"p-3 text-[12px] leading-loose whitespace-pre-line text-justify flex-1 overflow-hidden",children:n.generalAssessment})]}),e.jsxs("div",{className:"border-[3px] border-t-0 border-black h-[60mm] flex flex-col shrink-0",children:[e.jsx("div",{className:"text-center font-bold py-0.5 border-b-[3px] border-black bg-gray-100 text-[12px] shrink-0",children:"          ()"}),e.jsx("div",{className:"p-3 text-[12px] leading-loose whitespace-pre-line text-justify flex-1 overflow-hidden",children:(C=n.legacyData)==null?void 0:C.generalAppreciation})]}),e.jsxs("div",{className:"border-[3px] border-t-0 border-black flex h-[35mm] shrink-0",children:[e.jsxs("div",{className:"w-1/2 border-l-[3px] border-black p-2 font-bold text-[12px] flex flex-col justify-center space-y-2 bg-gray-50",children:[e.jsxs("p",{children:[" : ",e.jsx("span",{className:"underline",children:n.markInLetters})]}),e.jsxs("p",{children:[" : ",e.jsx("span",{className:"text-xl border-2 border-black px-4 py-0.5 bg-white",children:n.finalMark})," / 20"]}),e.jsx("p",{className:"text-[9px] mt-1 text-center",children:"   ()  : ...................."}),e.jsx("p",{className:"text-center text-[9px]",children:""})]}),e.jsxs("div",{className:"w-1/2 p-2 font-bold text-[12px] relative flex flex-col items-center",children:[e.jsx("p",{className:"text-[11px] w-full text-right",children:"     "}),e.jsxs("div",{className:"flex justify-between mt-1 px-1 w-full text-[10px]",children:[e.jsxs("p",{children:[": ",n.inspectorName]}),e.jsxs("p",{children:[": ",e.jsx("span",{dir:"ltr",children:ct(n.inspectionDate)})]})]}),a?e.jsx("div",{className:"absolute top-6 left-1/2 transform -translate-x-1/2 w-56 h-32 flex items-center justify-center pointer-events-none z-10",children:e.jsx("img",{src:a,alt:"Signature",className:"w-full h-full mix-blend-multiply object-contain transform -rotate-2 scale-125"})}):e.jsx("div",{className:"mt-8 text-[8px] text-gray-300 border border-dashed border-gray-300 w-16 h-16 rounded-full flex items-center justify-center rotate-[-15deg]",children:""})]})]}),e.jsx("div",{className:"text-center text-[9px] text-gray-500 font-bold mt-0.5",children:"2 / 2"})]})]})},bb=({report:n,signature:t})=>{const a=Object.values(n.days).reduce((h,p)=>h+p,0),i=Object.values(n.ranks).reduce((h,p)=>h+p,0),o=Object.values(n.levels).reduce((h,p)=>h+p,0),c=(n.subjects.arabic||0)+(n.subjects.math||0)+(n.subjects.islamic||0)+(n.subjects.history||0)+(n.subjects.geo||0)+(n.subjects.civics||0)+(n.subjects.science||0)+(n.subjects.art||0),u=(h,p)=>p===0?"":(h/p*100).toFixed(1)+"%",x=new Date().toLocaleDateString("ar-DZ",{year:"numeric",month:"2-digit",day:"2-digit"});return e.jsxs("div",{className:"font-serif text-black leading-normal bg-white",dir:"rtl",children:[e.jsxs("div",{className:"a4-page-portrait flex flex-col justify-between",style:{padding:"15mm 12mm"},children:[e.jsxs("div",{className:"shrink-0 mb-6",children:[e.jsxs("div",{className:"text-center font-bold text-[13px] mb-3 space-y-1",children:[e.jsx("h3",{children:"   "}),e.jsx("h3",{children:"  "})]}),e.jsxs("div",{className:"flex justify-between items-end border-b-2 border-black pb-1 text-[11px] font-bold",children:[e.jsx("div",{className:"text-right",children:e.jsx("p",{children:"  "})}),e.jsx("div",{className:"text-left",children:e.jsxs("p",{children:["  : ",n.wilaya]})})]})]}),e.jsx("div",{className:"text-center mb-8 shrink-0",children:e.jsx("div",{className:"inline-block border-2 border-black px-6 py-2 bg-gray-50 shadow-[3px_3px_0px_0px_rgba(0,0,0,1)]",children:e.jsxs("h1",{className:"text-lg font-bold flex flex-wrap items-center justify-center gap-1",children:[e.jsx("span",{children:"    "}),e.jsx("span",{children:n.term===""?" :":` ${n.term}   :`}),e.jsx("span",{dir:"ltr",className:"inline-block font-mono font-bold px-1",children:n.schoolYear})]})})}),e.jsxs("div",{className:"flex-1 flex flex-col gap-6 justify-start",children:[e.jsx("div",{children:e.jsxs("table",{className:"w-full border-collapse border border-black text-center text-[10px]",children:[e.jsxs("thead",{children:[e.jsxs("tr",{className:"bg-gray-100 h-8",children:[e.jsx("th",{rowSpan:2,className:"border border-black p-1 w-[15%]",children:"  "}),e.jsx("th",{rowSpan:2,className:"border border-black p-1",children:""}),e.jsx("th",{rowSpan:2,className:"border border-black p-1 w-[10%]",children:""}),e.jsx("th",{colSpan:3,className:"border border-black p-1",children:" "}),e.jsx("th",{colSpan:4,className:"border border-black p-1 bg-gray-200",children:" ( )"}),e.jsx("th",{colSpan:2,className:"border border-black p-1",children:"  ()"})]}),e.jsxs("tr",{className:"bg-gray-50 h-8",children:[e.jsx("th",{className:"border border-black p-1",children:""}),e.jsx("th",{className:"border border-black p-1",children:""}),e.jsxs("th",{className:"border border-black p-1 w-[12%] text-[8px] leading-tight",children:["  ",e.jsx("br",{}),"(  )"]}),e.jsx("th",{className:"border border-black p-1",children:""}),e.jsx("th",{className:"border border-black p-1",children:""}),e.jsx("th",{className:"border border-black p-1",children:""}),e.jsx("th",{className:"border border-black p-1 text-[8px]",children:"  "}),e.jsx("th",{className:"border border-black p-1",children:" "}),e.jsx("th",{className:"border border-black p-1",children:""})]})]}),e.jsx("tbody",{children:e.jsxs("tr",{className:"h-10 font-bold text-[11px]",children:[e.jsx("td",{className:"border border-black p-1",children:n.inspectorName}),e.jsx("td",{className:"border border-black p-1",children:n.rank}),e.jsx("td",{className:"border border-black p-1",children:n.district}),e.jsx("td",{className:"border border-black p-1",children:n.teachersTotal}),e.jsx("td",{className:"border border-black p-1",children:n.teachersTrainee}),e.jsx("td",{className:"border border-black p-1",children:n.teachersTenure}),e.jsx("td",{className:"border border-black p-1 bg-gray-100",children:n.visitsInspection}),e.jsx("td",{className:"border border-black p-1 bg-gray-100",children:n.visitsTenure}),e.jsx("td",{className:"border border-black p-1 bg-gray-100",children:n.visitsTraining}),e.jsx("td",{className:"border border-black p-1 bg-gray-100",children:n.visitsTrainingBenefit}),e.jsx("td",{className:"border border-black p-1",children:n.tasksSupervision}),e.jsx("td",{className:"border border-black p-1",children:n.tasksInvestigations})]})})]})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-[11px] mb-1 text-right underline",children:"*      "}),e.jsxs("table",{className:"w-full border-collapse border border-black text-center text-[10px]",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100 h-6",children:[e.jsx("th",{className:"border border-black p-1 w-24",children:""}),e.jsx("th",{className:"border border-black p-1",children:""}),e.jsx("th",{className:"border border-black p-1",children:""}),e.jsx("th",{className:"border border-black p-1",children:""}),e.jsx("th",{className:"border border-black p-1",children:""}),e.jsx("th",{className:"border border-black p-1",children:""}),e.jsx("th",{className:"border border-black p-1 bg-gray-200",children:""})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"h-6",children:[e.jsx("td",{className:"border border-black p-1 font-bold bg-gray-50",children:""}),e.jsx("td",{className:"border border-black p-1",children:n.days.sun}),e.jsx("td",{className:"border border-black p-1",children:n.days.mon}),e.jsx("td",{className:"border border-black p-1",children:n.days.tue}),e.jsx("td",{className:"border border-black p-1",children:n.days.wed}),e.jsx("td",{className:"border border-black p-1",children:n.days.thu}),e.jsx("td",{className:"border border-black p-1 font-bold bg-gray-50",children:a})]}),e.jsxs("tr",{className:"h-6",children:[e.jsx("td",{className:"border border-black p-1 font-bold bg-gray-50",children:" %"}),e.jsx("td",{className:"border border-black p-1",children:u(n.days.sun,a)}),e.jsx("td",{className:"border border-black p-1",children:u(n.days.mon,a)}),e.jsx("td",{className:"border border-black p-1",children:u(n.days.tue,a)}),e.jsx("td",{className:"border border-black p-1",children:u(n.days.wed,a)}),e.jsx("td",{className:"border border-black p-1",children:u(n.days.thu,a)}),e.jsx("td",{className:"border border-black p-1 font-bold bg-gray-50",children:"100%"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-[11px] mb-1 text-right underline",children:"*      "}),e.jsxs("table",{className:"w-full border-collapse border border-black text-center text-[10px]",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100 h-6",children:[e.jsx("th",{className:"border border-black p-1 w-24",children:""}),e.jsx("th",{className:"border border-black p-1",children:""}),e.jsx("th",{className:"border border-black p-1",children:"  "}),e.jsx("th",{className:"border border-black p-1",children:"  "}),e.jsx("th",{className:"border border-black p-1",children:"  "}),e.jsx("th",{className:"border border-black p-1",children:" "}),e.jsx("th",{className:"border border-black p-1",children:" / "}),e.jsx("th",{className:"border border-black p-1 bg-gray-200",children:""})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"h-6",children:[e.jsx("td",{className:"border border-black p-1 font-bold bg-gray-50",children:""}),e.jsx("td",{className:"border border-black p-1",children:n.ranks.stagiere}),e.jsx("td",{className:"border border-black p-1",children:n.ranks.primary}),e.jsx("td",{className:"border border-black p-1",children:n.ranks.class1}),e.jsx("td",{className:"border border-black p-1",children:n.ranks.class2}),e.jsx("td",{className:"border border-black p-1",children:n.ranks.distinguished}),e.jsx("td",{className:"border border-black p-1",children:n.ranks.contract}),e.jsx("td",{className:"border border-black p-1 font-bold bg-gray-50",children:i})]}),e.jsxs("tr",{className:"h-6",children:[e.jsx("td",{className:"border border-black p-1 font-bold bg-gray-50",children:" %"}),e.jsx("td",{className:"border border-black p-1",children:u(n.ranks.stagiere,i)}),e.jsx("td",{className:"border border-black p-1",children:u(n.ranks.primary,i)}),e.jsx("td",{className:"border border-black p-1",children:u(n.ranks.class1,i)}),e.jsx("td",{className:"border border-black p-1",children:u(n.ranks.class2,i)}),e.jsx("td",{className:"border border-black p-1",children:u(n.ranks.distinguished,i)}),e.jsx("td",{className:"border border-black p-1",children:u(n.ranks.contract,i)}),e.jsx("td",{className:"border border-black p-1 font-bold bg-gray-50",children:"100%"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-[11px] mb-1 text-right underline",children:"*     ...    "}),e.jsxs("table",{className:"w-full border-collapse border border-black text-center text-[10px]",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100 h-6",children:[e.jsx("th",{className:"border border-black p-1 w-24",children:""}),e.jsx("th",{className:"border border-black p-1",children:""}),e.jsx("th",{className:"border border-black p-1",children:" 01"}),e.jsx("th",{className:"border border-black p-1",children:" 02"}),e.jsx("th",{className:"border border-black p-1",children:" 03"}),e.jsx("th",{className:"border border-black p-1",children:" 04"}),e.jsx("th",{className:"border border-black p-1",children:" 05"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"h-6",children:[e.jsx("td",{className:"border border-black p-1 font-bold bg-gray-50",children:""}),e.jsx("td",{className:"border border-black p-1",children:n.levels.prep}),e.jsx("td",{className:"border border-black p-1",children:n.levels.year1}),e.jsx("td",{className:"border border-black p-1",children:n.levels.year2}),e.jsx("td",{className:"border border-black p-1",children:n.levels.year3}),e.jsx("td",{className:"border border-black p-1",children:n.levels.year4}),e.jsx("td",{className:"border border-black p-1",children:n.levels.year5})]}),e.jsxs("tr",{className:"h-6",children:[e.jsx("td",{className:"border border-black p-1 font-bold bg-gray-50",children:" "}),e.jsx("td",{className:"border border-black p-1",children:u(n.levels.prep,o)}),e.jsx("td",{className:"border border-black p-1",children:u(n.levels.year1,o)}),e.jsx("td",{className:"border border-black p-1",children:u(n.levels.year2,o)}),e.jsx("td",{className:"border border-black p-1",children:u(n.levels.year3,o)}),e.jsx("td",{className:"border border-black p-1",children:u(n.levels.year4,o)}),e.jsx("td",{className:"border border-black p-1",children:u(n.levels.year5,o)})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-[11px] mb-1 text-right underline",children:"*    "}),e.jsxs("table",{className:"w-full border-collapse border border-black text-center text-[10px]",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100 h-6",children:[e.jsx("th",{className:"border border-black p-1 w-24",children:""}),e.jsx("th",{className:"border border-black p-1",children:" "}),e.jsx("th",{className:"border border-black p-1",children:""}),e.jsx("th",{className:"border border-black p-1",children:". "}),e.jsx("th",{className:"border border-black p-1",children:""}),e.jsx("th",{className:"border border-black p-1",children:""}),e.jsx("th",{className:"border border-black p-1",children:". "}),e.jsx("th",{className:"border border-black p-1",children:". "}),e.jsx("th",{className:"border border-black p-1",children:". "})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"h-6",children:[e.jsx("td",{className:"border border-black p-1 font-bold bg-gray-50",children:""}),e.jsx("td",{className:"border border-black p-1",children:n.subjects.arabic}),e.jsx("td",{className:"border border-black p-1",children:n.subjects.math}),e.jsx("td",{className:"border border-black p-1",children:n.subjects.islamic}),e.jsx("td",{className:"border border-black p-1",children:n.subjects.history}),e.jsx("td",{className:"border border-black p-1",children:n.subjects.geo}),e.jsx("td",{className:"border border-black p-1",children:n.subjects.civics}),e.jsx("td",{className:"border border-black p-1",children:n.subjects.science}),e.jsx("td",{className:"border border-black p-1",children:n.subjects.art})]}),e.jsxs("tr",{className:"h-6",children:[e.jsx("td",{className:"border border-black p-1 font-bold bg-gray-50",children:" "}),e.jsx("td",{className:"border border-black p-1",children:u(n.subjects.arabic,c)}),e.jsx("td",{className:"border border-black p-1",children:u(n.subjects.math,c)}),e.jsx("td",{className:"border border-black p-1",children:u(n.subjects.islamic,c)}),e.jsx("td",{className:"border border-black p-1",children:u(n.subjects.history,c)}),e.jsx("td",{className:"border border-black p-1",children:u(n.subjects.geo,c)}),e.jsx("td",{className:"border border-black p-1",children:u(n.subjects.civics,c)}),e.jsx("td",{className:"border border-black p-1",children:u(n.subjects.science,c)}),e.jsx("td",{className:"border border-black p-1",children:u(n.subjects.art,c)})]})]})]})]})]}),e.jsxs("div",{className:"flex flex-col items-end px-8 text-sm font-bold shrink-0 mt-8 mb-4",children:[e.jsxs("p",{className:"mb-4",children:[" : ",n.wilaya," : ",x]}),e.jsxs("div",{className:"text-center w-64 relative flex flex-col items-center",children:[e.jsx("p",{className:"mb-10 underline",children:"  "}),e.jsx("div",{className:"h-24 w-full relative flex items-center justify-center",children:t&&e.jsx("img",{src:t,alt:"Signature",className:"absolute w-full h-full object-contain mix-blend-multiply transform scale-125 -rotate-2 top-0"})})]})]})]}),e.jsx("style",{children:`
            @media print {
                @page { 
                    size: portrait;
                    margin: 0;
                }
                .a4-page-portrait {
                    width: 210mm;
                    height: 297mm;
                    margin: 0 auto;
                    background: white;
                    page-break-inside: avoid;
                    overflow: hidden;
                }
            }
            @media screen {
                .a4-page-portrait {
                    width: 210mm;
                    height: 297mm;
                    margin: 20px auto;
                    background: white;
                    box-shadow: 0 5px 15px rgba(0,0,0,0.2);
                }
            }
        `})]})},zE=({report:n,onChange:t,onPrint:a,teachers:i,reportsMap:o,tenureReportsMap:c,signature:u,onUploadSignature:x,inspectorName:h,globalWilaya:p,globalDistrict:b})=>{const y=R.useRef(null),[N,w]=R.useState(!1),[A,I]=R.useState(!1);R.useEffect(()=>{const O={};let V=!1;if(h&&n.inspectorName!==h&&(O.inspectorName=h,V=!0),p&&n.wilaya!==p&&(O.wilaya=p,V=!0),b&&n.district!==b&&(O.district=b,V=!0),!n.schoolYear||n.schoolYear.length<5){const X=new Date,ee=X.getMonth()+1,Q=X.getFullYear();ee>=9?O.schoolYear=`${Q}/${Q+1}`:O.schoolYear=`${Q-1}/${Q}`,V=!0}V&&t({...n,...O})},[h,p,b]);const H=O=>{const V=O.trim().toLowerCase();return V.includes("")?"history":V.includes("")?"geo":V.includes("")?"civics":V.includes("")||V.includes("")?"islamic":V.includes("")||V.includes("")?"science":V.includes("")||V.includes("")?"math":V.includes("")||V.includes("")||V.includes("")||V.includes("")?"arabic":V.includes("")||V.includes("")||V.includes("")||V.includes("")||V.includes("")?"art":null},G=()=>{if(!n.startDate||!n.endDate){alert("    ( - ) .");return}I(!0),setTimeout(()=>{const O=new Date(n.startDate),V=new Date(n.endDate);O.setHours(0,0,0,0),V.setHours(23,59,59,999);const X={visitsInspection:0,visitsTenure:0,days:{sun:0,mon:0,tue:0,wed:0,thu:0},ranks:{stagiere:0,primary:0,class1:0,class2:0,distinguished:0,contract:0},levels:{prep:0,year1:0,year2:0,year3:0,year4:0,year5:0},subjects:{arabic:0,math:0,islamic:0,history:0,geo:0,civics:0,science:0,art:0}};Object.values(o).forEach(ne=>{if(!ne.inspectionDate)return;const P=new Date(ne.inspectionDate);if(!isNaN(P.getTime())&&P>=O&&P<=V){X.visitsInspection++;const ie=P.getDay();ie===0?X.days.sun++:ie===1?X.days.mon++:ie===2?X.days.tue++:ie===3?X.days.wed++:ie===4&&X.days.thu++;const le=i.find(Y=>Y.id===ne.teacherId);if(le){const Y=le.status||"",T=(le.rank||"").trim();Y==="stagiere"?X.ranks.stagiere++:Y==="contractuel"?X.ranks.contract++:T.includes("")?X.ranks.distinguished++:T.includes("")||T.includes(" 2")||T.includes("2")?X.ranks.class2++:T.includes("")||T.includes(" 1")||T.includes("1")?X.ranks.class1++:X.ranks.primary++}const Z=ne.level||"";Z.includes("")?X.levels.prep++:Z.includes("")||Z.includes("1")?X.levels.year1++:Z.includes("")||Z.includes("2")?X.levels.year2++:Z.includes("")||Z.includes("3")?X.levels.year3++:Z.includes("")||Z.includes("4")?X.levels.year4++:(Z.includes("")||Z.includes("5"))&&X.levels.year5++;const q=H(ne.subject||"");q?X.subjects[q]++:ne.subject&&X.subjects.arabic++}}),i.forEach(ne=>{let P=null;c&&c[ne.id]&&c[ne.id].examDate?P=new Date(c[ne.id].examDate):ne.tenureDate&&ne.tenureDate.trim()!==""&&(P=new Date(ne.tenureDate)),P&&!isNaN(P.getTime())&&P>=O&&P<=V&&X.visitsTenure++});const ee=i.length,Q=i.filter(ne=>ne.status==="stagiere").length;t({...n,...X,teachersTotal:ee,teachersTrainee:Q,teachersTenure:Q}),I(!1)},500)},F=(O,V)=>{t({...n,[O]:V})};return e.jsxs("div",{className:"h-full flex flex-col bg-slate-50 overflow-hidden",children:[e.jsxs("div",{className:"bg-white border-b border-slate-200 p-2 shadow-sm z-20 flex flex-col gap-2",children:[e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"bg-indigo-100 p-1.5 rounded-lg text-indigo-600",children:e.jsx(Cj,{size:18})}),e.jsx("span",{className:"font-bold text-slate-800 text-sm hidden md:inline",children:" "})]}),e.jsxs("div",{className:"flex-1 w-full md:w-auto bg-slate-50 p-1.5 rounded-xl border border-slate-200 flex flex-col md:flex-row gap-2 items-center justify-center",children:[e.jsxs("div",{className:"flex items-center gap-1 px-1",children:[e.jsx(Tg,{size:14,className:"text-slate-400"}),e.jsx("span",{className:"text-[10px] font-bold text-slate-600 whitespace-nowrap",children:""})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-[10px] font-bold text-slate-500",children:":"}),e.jsx("input",{type:"date",className:"w-full md:w-32 bg-white border border-slate-300 rounded-lg px-2 py-1 text-xs font-bold text-slate-700 focus:ring-1 focus:ring-indigo-500",value:n.startDate,onChange:O=>F("startDate",O.target.value)})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-[10px] font-bold text-slate-500",children:":"}),e.jsx("input",{type:"date",className:"w-full md:w-32 bg-white border border-slate-300 rounded-lg px-2 py-1 text-xs font-bold text-slate-700 focus:ring-1 focus:ring-indigo-500",value:n.endDate,onChange:O=>F("endDate",O.target.value)})]}),e.jsx("div",{className:"h-4 w-px bg-slate-200 mx-2 hidden md:block"}),e.jsxs("select",{value:n.term,onChange:O=>F("term",O.target.value),className:"bg-white border border-slate-300 rounded-lg px-2 py-1 text-xs font-bold text-slate-700 focus:ring-1 focus:ring-indigo-500",children:[e.jsx("option",{value:"",children:" 1"}),e.jsx("option",{value:"",children:" 2"}),e.jsx("option",{value:"",children:" 3"}),e.jsx("option",{value:"",children:""})]}),e.jsxs("button",{onClick:G,disabled:A,className:"bg-indigo-600 text-white px-4 py-1.5 rounded-lg text-xs font-bold shadow-sm hover:bg-indigo-700 flex items-center gap-1.5 transition-colors disabled:opacity-70",children:[A?e.jsx(Uo,{size:14,className:"animate-spin"}):e.jsx(wj,{size:14}),A?" ...":""]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>w(!N),className:`p-2 rounded-lg border text-xs font-bold flex items-center gap-1 transition-colors ${N?"bg-indigo-50 border-indigo-200 text-indigo-700":"bg-white border-slate-200 text-slate-600"}`,children:[e.jsx(zj,{size:16}),e.jsx("span",{children:" "})]}),x&&e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"file",ref:y,onChange:x,className:"hidden",accept:"image/*"}),e.jsx("button",{onClick:()=>{var O;return(O=y.current)==null?void 0:O.click()},className:"p-2 rounded-lg border border-slate-300 text-slate-500 hover:bg-slate-100",title:" ",children:e.jsx(Qi,{size:16})})]}),e.jsxs("button",{onClick:a,className:"bg-slate-800 text-white px-4 py-2 rounded-lg font-bold shadow hover:bg-slate-900 flex items-center gap-2 text-xs",children:[e.jsx(ys,{size:16}),""]})]})]}),N&&e.jsxs("div",{className:"bg-indigo-50/50 p-2 rounded-xl border border-indigo-100 grid grid-cols-2 md:grid-cols-5 gap-3 animate-in slide-in-from-top-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-[9px] font-bold text-slate-500 mb-1",children:" "}),e.jsx("input",{type:"number",value:n.visitsTraining,onChange:O=>F("visitsTraining",parseInt(O.target.value)||0),className:"w-full p-1 border rounded text-xs font-bold text-center"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[9px] font-bold text-slate-500 mb-1",children:" "}),e.jsx("input",{type:"number",value:n.visitsTrainingBenefit,onChange:O=>F("visitsTrainingBenefit",parseInt(O.target.value)||0),className:"w-full p-1 border rounded text-xs font-bold text-center"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[9px] font-bold text-slate-500 mb-1",children:" "}),e.jsx("input",{type:"number",value:n.tasksSupervision,onChange:O=>F("tasksSupervision",parseInt(O.target.value)||0),className:"w-full p-1 border rounded text-xs font-bold text-center"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[9px] font-bold text-slate-500 mb-1",children:""}),e.jsx("input",{type:"number",value:n.tasksInvestigations,onChange:O=>F("tasksInvestigations",parseInt(O.target.value)||0),className:"w-full p-1 border rounded text-xs font-bold text-center"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[9px] font-bold text-slate-500 mb-1",children:"  (   )"}),e.jsx("input",{type:"number",value:n.teachersTenure,onChange:O=>F("teachersTenure",parseInt(O.target.value)||0),className:"w-full p-1 border rounded text-xs font-bold text-center"})]})]})]}),e.jsx("div",{className:"flex-1 bg-slate-100 p-8 overflow-y-auto flex justify-center items-start",children:e.jsx("div",{className:"transform scale-95 shadow-2xl origin-top",children:e.jsx(bb,{report:n,signature:u})})})]})},LE=({isOpen:n,onClose:t,onUpgrade:a})=>n?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full overflow-hidden relative animate-in zoom-in-95 duration-300",children:[e.jsx("button",{onClick:t,className:"absolute top-4 left-4 text-white/80 hover:text-white z-10 p-1 bg-black/20 rounded-full",children:e.jsx(ut,{size:20})}),e.jsxs("div",{className:"bg-gradient-to-br from-amber-300 via-yellow-500 to-amber-600 p-8 text-center relative overflow-hidden",children:[e.jsxs("div",{className:"absolute top-0 left-0 w-full h-full opacity-20",children:[e.jsx(Vn,{className:"absolute top-4 right-10 animate-pulse",size:20}),e.jsx(Vn,{className:"absolute bottom-4 left-10 animate-pulse delay-700",size:30}),e.jsx(Vn,{className:"absolute top-10 left-1/2 animate-pulse delay-300",size:15})]}),e.jsxs("div",{className:"relative z-10 flex flex-col items-center text-white",children:[e.jsx("div",{className:"w-16 h-16 bg-white/20 backdrop-blur-md rounded-full flex items-center justify-center mb-4 shadow-inner border border-white/30",children:e.jsx(Q1,{size:32,className:"text-white drop-shadow-md",fill:"currentColor"})}),e.jsx("h2",{className:"text-3xl font-bold mb-1 drop-shadow-sm",children:" "}),e.jsx("p",{className:"text-yellow-50 font-medium opacity-90",children:"   "})]})]}),e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"space-y-4 mb-8",children:[e.jsxs("div",{className:"flex items-center gap-3 text-gray-700",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-green-100 text-green-600 flex items-center justify-center shrink-0",children:e.jsx(wl,{size:14,strokeWidth:3})}),e.jsx("span",{className:"font-medium",children:"    "})]}),e.jsxs("div",{className:"flex items-center gap-3 text-gray-700",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-green-100 text-green-600 flex items-center justify-center shrink-0",children:e.jsx(wl,{size:14,strokeWidth:3})}),e.jsx("span",{className:"font-medium",children:"    "})]}),e.jsxs("div",{className:"flex items-center gap-3 text-gray-700",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-green-100 text-green-600 flex items-center justify-center shrink-0",children:e.jsx(wl,{size:14,strokeWidth:3})}),e.jsx("span",{className:"font-medium",children:"    "})]}),e.jsxs("div",{className:"flex items-center gap-3 text-gray-700",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-green-100 text-green-600 flex items-center justify-center shrink-0",children:e.jsx(wl,{size:14,strokeWidth:3})}),e.jsx("span",{className:"font-medium",children:"   "})]})]}),e.jsxs("button",{onClick:a,className:"w-full bg-gray-900 text-white font-bold py-4 rounded-xl shadow-lg hover:bg-gray-800 hover:scale-[1.02] transition-all flex items-center justify-center gap-2 group",children:[e.jsx(Pg,{className:"text-yellow-400 group-hover:animate-spin",fill:"currentColor",size:20}),e.jsx("span",{children:"  -  "})]}),e.jsx("p",{className:"text-center text-xs text-gray-400 mt-4",children:"     ."})]})]})}):null,Iu=async(n,t)=>{if(!n)throw new Error("   ");const a=JSON.stringify({action:"SYNC",data:t});try{const i=await fetch(n,{method:"POST",mode:"no-cors",headers:{"Content-Type":"text/plain"},body:a});return{success:!0}}catch(i){throw console.error("  :",i),new Error("   Google Sheet.    .")}},vb=async n=>{if(!n)throw new Error("   ");try{const t=await fetch(`${n}?action=READ`,{method:"GET"});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);return await t.json()}catch(t){throw console.error("   :",t),new Error("  .      'Anyone' ( ).")}},UE="modulepreload",PE=function(n){return"/"+n},Qp={},Ra=function(t,a,i){let o=Promise.resolve();if(a&&a.length>0){let u=function(p){return Promise.all(p.map(b=>Promise.resolve(b).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};document.getElementsByTagName("link");const x=document.querySelector("meta[property=csp-nonce]"),h=(x==null?void 0:x.nonce)||(x==null?void 0:x.getAttribute("nonce"));o=u(a.map(p=>{if(p=PE(p),p in Qp)return;Qp[p]=!0;const b=p.endsWith(".css"),y=b?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${y}`))return;const N=document.createElement("link");if(N.rel=b?"stylesheet":UE,b||(N.as="script"),N.crossOrigin="",N.href=p,h&&N.setAttribute("nonce",h),document.head.appendChild(N),b)return new Promise((w,A)=>{N.addEventListener("load",w),N.addEventListener("error",()=>A(new Error(`Unable to preload CSS for ${p}`)))})}))}function c(u){const x=new Event("vite:preloadError",{cancelable:!0});if(x.payload=u,window.dispatchEvent(x),!x.defaultPrevented)throw u}return o.then(u=>{for(const x of u||[])x.status==="rejected"&&c(x.reason);return t().catch(c)})},qE=n=>{let t;return n?t=n:typeof fetch>"u"?t=(...a)=>Ra(async()=>{const{default:i}=await Promise.resolve().then(()=>Xi);return{default:i}},void 0).then(({default:i})=>i(...a)):t=fetch,(...a)=>t(...a)};class af extends Error{constructor(t,a="FunctionsError",i){super(t),this.name=a,this.context=i}}class OE extends af{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class $E extends af{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class HE extends af{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var GE=function(n,t,a,i){function o(c){return c instanceof a?c:new a(function(u){u(c)})}return new(a||(a=Promise))(function(c,u){function x(b){try{p(i.next(b))}catch(y){u(y)}}function h(b){try{p(i.throw(b))}catch(y){u(y)}}function p(b){b.done?c(b.value):o(b.value).then(x,h)}p((i=i.apply(n,t||[])).next())})};class VE{constructor(t,{headers:a={},customFetch:i}={}){this.url=t,this.headers=a,this.fetch=qE(i)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,a={}){var i;return GE(this,void 0,void 0,function*(){try{const{headers:o,method:c,body:u}=a;let x={},h;u&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)&&(typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(x["Content-Type"]="application/octet-stream",h=u):typeof u=="string"?(x["Content-Type"]="text/plain",h=u):typeof FormData<"u"&&u instanceof FormData?h=u:(x["Content-Type"]="application/json",h=JSON.stringify(u)));const p=yield this.fetch(`${this.url}/${t}`,{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},x),this.headers),o),body:h}).catch(w=>{throw new OE(w)}),b=p.headers.get("x-relay-error");if(b&&b==="true")throw new $E(p);if(!p.ok)throw new HE(p);let y=((i=p.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),N;return y==="application/json"?N=yield p.json():y==="application/octet-stream"?N=yield p.blob():y==="multipart/form-data"?N=yield p.formData():N=yield p.text(),{data:N,error:null}}catch(o){return{data:null,error:o}}})}}var BE=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Da=BE();const FE=Da.fetch,rf=Da.fetch.bind(Da),yb=Da.Headers,JE=Da.Request,YE=Da.Response,Xi=Object.freeze(Object.defineProperty({__proto__:null,Headers:yb,Request:JE,Response:YE,default:rf,fetch:FE},Symbol.toStringTag,{value:"Module"}));class KE extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}class QE{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=rf:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}then(t,a){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const i=this.fetch;let o=i(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async c=>{var u,x,h;let p=null,b=null,y=null,N=c.status,w=c.statusText;if(c.ok){if(this.method!=="HEAD"){const G=await c.text();G===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?b=G:b=JSON.parse(G))}const I=(u=this.headers.Prefer)===null||u===void 0?void 0:u.match(/count=(exact|planned|estimated)/),H=(x=c.headers.get("content-range"))===null||x===void 0?void 0:x.split("/");I&&H&&H.length>1&&(y=parseInt(H[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(b)&&(b.length>1?(p={code:"PGRST116",details:`Results contain ${b.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},b=null,y=null,N=406,w="Not Acceptable"):b.length===1?b=b[0]:b=null)}else{const I=await c.text();try{p=JSON.parse(I),Array.isArray(p)&&c.status===404&&(b=[],p=null,N=200,w="OK")}catch{c.status===404&&I===""?(N=204,w="No Content"):p={message:I}}if(p&&this.isMaybeSingle&&(!((h=p==null?void 0:p.details)===null||h===void 0)&&h.includes("0 rows"))&&(p=null,N=200,w="OK"),p&&this.shouldThrowOnError)throw new KE(p)}return{error:p,data:b,count:y,status:N,statusText:w}});return this.shouldThrowOnError||(o=o.catch(c=>{var u,x,h;return{error:{message:`${(u=c==null?void 0:c.name)!==null&&u!==void 0?u:"FetchError"}: ${c==null?void 0:c.message}`,details:`${(x=c==null?void 0:c.stack)!==null&&x!==void 0?x:""}`,hint:"",code:`${(h=c==null?void 0:c.code)!==null&&h!==void 0?h:""}`},data:null,count:null,status:0,statusText:""}})),o.then(t,a)}}class XE extends QE{select(t){let a=!1;const i=(t??"*").split("").map(o=>/\s/.test(o)&&!a?"":(o==='"'&&(a=!a),o)).join("");return this.url.searchParams.set("select",i),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:a=!0,nullsFirst:i,foreignTable:o,referencedTable:c=o}={}){const u=c?`${c}.order`:"order",x=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${x?`${x},`:""}${t}.${a?"asc":"desc"}${i===void 0?"":i?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:a,referencedTable:i=a}={}){const o=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(o,`${t}`),this}range(t,a,{foreignTable:i,referencedTable:o=i}={}){const c=typeof o>"u"?"offset":`${o}.offset`,u=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(c,`${t}`),this.url.searchParams.set(u,`${a-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:a=!1,settings:i=!1,buffers:o=!1,wal:c=!1,format:u="text"}={}){var x;const h=[t?"analyze":null,a?"verbose":null,i?"settings":null,o?"buffers":null,c?"wal":null].filter(Boolean).join("|"),p=(x=this.headers.Accept)!==null&&x!==void 0?x:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${u}; for="${p}"; options=${h};`,u==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}class ja extends XE{eq(t,a){return this.url.searchParams.append(t,`eq.${a}`),this}neq(t,a){return this.url.searchParams.append(t,`neq.${a}`),this}gt(t,a){return this.url.searchParams.append(t,`gt.${a}`),this}gte(t,a){return this.url.searchParams.append(t,`gte.${a}`),this}lt(t,a){return this.url.searchParams.append(t,`lt.${a}`),this}lte(t,a){return this.url.searchParams.append(t,`lte.${a}`),this}like(t,a){return this.url.searchParams.append(t,`like.${a}`),this}likeAllOf(t,a){return this.url.searchParams.append(t,`like(all).{${a.join(",")}}`),this}likeAnyOf(t,a){return this.url.searchParams.append(t,`like(any).{${a.join(",")}}`),this}ilike(t,a){return this.url.searchParams.append(t,`ilike.${a}`),this}ilikeAllOf(t,a){return this.url.searchParams.append(t,`ilike(all).{${a.join(",")}}`),this}ilikeAnyOf(t,a){return this.url.searchParams.append(t,`ilike(any).{${a.join(",")}}`),this}is(t,a){return this.url.searchParams.append(t,`is.${a}`),this}in(t,a){const i=a.map(o=>typeof o=="string"&&new RegExp("[,()]").test(o)?`"${o}"`:`${o}`).join(",");return this.url.searchParams.append(t,`in.(${i})`),this}contains(t,a){return typeof a=="string"?this.url.searchParams.append(t,`cs.${a}`):Array.isArray(a)?this.url.searchParams.append(t,`cs.{${a.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(a)}`),this}containedBy(t,a){return typeof a=="string"?this.url.searchParams.append(t,`cd.${a}`):Array.isArray(a)?this.url.searchParams.append(t,`cd.{${a.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(a)}`),this}rangeGt(t,a){return this.url.searchParams.append(t,`sr.${a}`),this}rangeGte(t,a){return this.url.searchParams.append(t,`nxl.${a}`),this}rangeLt(t,a){return this.url.searchParams.append(t,`sl.${a}`),this}rangeLte(t,a){return this.url.searchParams.append(t,`nxr.${a}`),this}rangeAdjacent(t,a){return this.url.searchParams.append(t,`adj.${a}`),this}overlaps(t,a){return typeof a=="string"?this.url.searchParams.append(t,`ov.${a}`):this.url.searchParams.append(t,`ov.{${a.join(",")}}`),this}textSearch(t,a,{config:i,type:o}={}){let c="";o==="plain"?c="pl":o==="phrase"?c="ph":o==="websearch"&&(c="w");const u=i===void 0?"":`(${i})`;return this.url.searchParams.append(t,`${c}fts${u}.${a}`),this}match(t){return Object.entries(t).forEach(([a,i])=>{this.url.searchParams.append(a,`eq.${i}`)}),this}not(t,a,i){return this.url.searchParams.append(t,`not.${a}.${i}`),this}or(t,{foreignTable:a,referencedTable:i=a}={}){const o=i?`${i}.or`:"or";return this.url.searchParams.append(o,`(${t})`),this}filter(t,a,i){return this.url.searchParams.append(t,`${a}.${i}`),this}}class ZE{constructor(t,{headers:a={},schema:i,fetch:o}){this.url=t,this.headers=a,this.schema=i,this.fetch=o}select(t,{head:a=!1,count:i}={}){const o=a?"HEAD":"GET";let c=!1;const u=(t??"*").split("").map(x=>/\s/.test(x)&&!c?"":(x==='"'&&(c=!c),x)).join("");return this.url.searchParams.set("select",u),i&&(this.headers.Prefer=`count=${i}`),new ja({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:a,defaultToNull:i=!0}={}){const o="POST",c=[];if(this.headers.Prefer&&c.push(this.headers.Prefer),a&&c.push(`count=${a}`),i||c.push("missing=default"),this.headers.Prefer=c.join(","),Array.isArray(t)){const u=t.reduce((x,h)=>x.concat(Object.keys(h)),[]);if(u.length>0){const x=[...new Set(u)].map(h=>`"${h}"`);this.url.searchParams.set("columns",x.join(","))}}return new ja({method:o,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:a,ignoreDuplicates:i=!1,count:o,defaultToNull:c=!0}={}){const u="POST",x=[`resolution=${i?"ignore":"merge"}-duplicates`];if(a!==void 0&&this.url.searchParams.set("on_conflict",a),this.headers.Prefer&&x.push(this.headers.Prefer),o&&x.push(`count=${o}`),c||x.push("missing=default"),this.headers.Prefer=x.join(","),Array.isArray(t)){const h=t.reduce((p,b)=>p.concat(Object.keys(b)),[]);if(h.length>0){const p=[...new Set(h)].map(b=>`"${b}"`);this.url.searchParams.set("columns",p.join(","))}}return new ja({method:u,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:a}={}){const i="PATCH",o=[];return this.headers.Prefer&&o.push(this.headers.Prefer),a&&o.push(`count=${a}`),this.headers.Prefer=o.join(","),new ja({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const a="DELETE",i=[];return t&&i.push(`count=${t}`),this.headers.Prefer&&i.unshift(this.headers.Prefer),this.headers.Prefer=i.join(","),new ja({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}const WE="1.9.2",eT={"X-Client-Info":`postgrest-js/${WE}`};class of{constructor(t,{headers:a={},schema:i,fetch:o}={}){this.url=t,this.headers=Object.assign(Object.assign({},eT),a),this.schemaName=i,this.fetch=o}from(t){const a=new URL(`${this.url}/${t}`);return new ZE(a,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new of(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,a={},{head:i=!1,count:o}={}){let c;const u=new URL(`${this.url}/rpc/${t}`);let x;i?(c="HEAD",Object.entries(a).forEach(([p,b])=>{u.searchParams.append(p,`${b}`)})):(c="POST",x=a);const h=Object.assign({},this.headers);return o&&(h.Prefer=`count=${o}`),new ja({method:c,url:u,headers:h,schema:this.schemaName,body:x,fetch:this.fetch,allowEmpty:!1})}}const tT="2.9.3",sT={"X-Client-Info":`realtime-js/${tT}`},nT="1.0.0",Nb=1e4,lT=1e3;var Ta;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(Ta||(Ta={}));var ls;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(ls||(ls={}));var ks;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(ks||(ks={}));var zu;(function(n){n.websocket="websocket"})(zu||(zu={}));var jl;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(jl||(jl={}));class jb{constructor(t,a){this.callback=t,this.timerCalc=a,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=a}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}class aT{constructor(){this.HEADER_LENGTH=1}decode(t,a){return t.constructor===ArrayBuffer?a(this._binaryDecode(t)):a(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const a=new DataView(t),i=new TextDecoder;return this._decodeBroadcast(t,a,i)}_decodeBroadcast(t,a,i){const o=a.getUint8(1),c=a.getUint8(2);let u=this.HEADER_LENGTH+2;const x=i.decode(t.slice(u,u+o));u=u+o;const h=i.decode(t.slice(u,u+c));u=u+c;const p=JSON.parse(i.decode(t.slice(u,t.byteLength)));return{ref:null,topic:x,event:h,payload:p}}}class ou{constructor(t,a,i={},o=Nb){this.channel=t,this.event=a,this.payload=i,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,a){var i;return this._hasReceived(t)&&a((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:t,callback:a}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=a=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=a,this._matchReceive(a)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,a){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:a})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:a}){this.recHooks.filter(i=>i.status===t).forEach(i=>i.callback(a))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Xp;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(Xp||(Xp={}));class Gi{constructor(t,a){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=(a==null?void 0:a.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},o=>{const{onJoin:c,onLeave:u,onSync:x}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Gi.syncState(this.state,o,c,u),this.pendingDiffs.forEach(h=>{this.state=Gi.syncDiff(this.state,h,c,u)}),this.pendingDiffs=[],x()}),this.channel._on(i.diff,{},o=>{const{onJoin:c,onLeave:u,onSync:x}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=Gi.syncDiff(this.state,o,c,u),x())}),this.onJoin((o,c,u)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:c,newPresences:u})}),this.onLeave((o,c,u)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:c,leftPresences:u})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,a,i,o){const c=this.cloneDeep(t),u=this.transformState(a),x={},h={};return this.map(c,(p,b)=>{u[p]||(h[p]=b)}),this.map(u,(p,b)=>{const y=c[p];if(y){const N=b.map(H=>H.presence_ref),w=y.map(H=>H.presence_ref),A=b.filter(H=>w.indexOf(H.presence_ref)<0),I=y.filter(H=>N.indexOf(H.presence_ref)<0);A.length>0&&(x[p]=A),I.length>0&&(h[p]=I)}else x[p]=b}),this.syncDiff(c,{joins:x,leaves:h},i,o)}static syncDiff(t,a,i,o){const{joins:c,leaves:u}={joins:this.transformState(a.joins),leaves:this.transformState(a.leaves)};return i||(i=()=>{}),o||(o=()=>{}),this.map(c,(x,h)=>{var p;const b=(p=t[x])!==null&&p!==void 0?p:[];if(t[x]=this.cloneDeep(h),b.length>0){const y=t[x].map(w=>w.presence_ref),N=b.filter(w=>y.indexOf(w.presence_ref)<0);t[x].unshift(...N)}i(x,b,h)}),this.map(u,(x,h)=>{let p=t[x];if(!p)return;const b=h.map(y=>y.presence_ref);p=p.filter(y=>b.indexOf(y.presence_ref)<0),t[x]=p,o(x,p,h),p.length===0&&delete t[x]}),t}static map(t,a){return Object.getOwnPropertyNames(t).map(i=>a(i,t[i]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((a,i)=>{const o=t[i];return"metas"in o?a[i]=o.metas.map(c=>(c.presence_ref=c.phx_ref,delete c.phx_ref,delete c.phx_ref_prev,c)):a[i]=o,a},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var nt;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(nt||(nt={}));const Zp=(n,t,a={})=>{var i;const o=(i=a.skipTypes)!==null&&i!==void 0?i:[];return Object.keys(t).reduce((c,u)=>(c[u]=iT(u,n,t,o),c),{})},iT=(n,t,a,i)=>{const o=t.find(x=>x.name===n),c=o==null?void 0:o.type,u=a[n];return c&&!i.includes(c)?wb(c,u):Lu(u)},wb=(n,t)=>{if(n.charAt(0)==="_"){const a=n.slice(1,n.length);return dT(t,a)}switch(n){case nt.bool:return rT(t);case nt.float4:case nt.float8:case nt.int2:case nt.int4:case nt.int8:case nt.numeric:case nt.oid:return oT(t);case nt.json:case nt.jsonb:return cT(t);case nt.timestamp:return uT(t);case nt.abstime:case nt.date:case nt.daterange:case nt.int4range:case nt.int8range:case nt.money:case nt.reltime:case nt.text:case nt.time:case nt.timestamptz:case nt.timetz:case nt.tsrange:case nt.tstzrange:return Lu(t);default:return Lu(t)}},Lu=n=>n,rT=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},oT=n=>{if(typeof n=="string"){const t=parseFloat(n);if(!Number.isNaN(t))return t}return n},cT=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(t){return console.log(`JSON parse error: ${t}`),n}return n},dT=(n,t)=>{if(typeof n!="string")return n;const a=n.length-1,i=n[a];if(n[0]==="{"&&i==="}"){let c;const u=n.slice(1,a);try{c=JSON.parse("["+u+"]")}catch{c=u?u.split(","):[]}return c.map(x=>wb(t,x))}return n},uT=n=>typeof n=="string"?n.replace(" ","T"):n;var Wp;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(Wp||(Wp={}));var eg;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes"})(eg||(eg={}));var tg;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(tg||(tg={}));class cf{constructor(t,a={config:{}},i){this.topic=t,this.params=a,this.socket=i,this.bindings={},this.state=ls.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""}},a.config),this.timeout=this.socket.timeout,this.joinPush=new ou(this,ks.join,this.params,this.timeout),this.rejoinTimer=new jb(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ls.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ls.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=ls.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ls.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ks.reply,{},(o,c)=>{this._trigger(this._replyEventName(c),o)}),this.presence=new Gi(this),this.broadcastEndpointURL=this._broadcastEndpointURL()}subscribe(t,a=this.timeout){var i,o;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:c,presence:u}}=this.params;this._onError(p=>t&&t("CHANNEL_ERROR",p)),this._onClose(()=>t&&t("CLOSED"));const x={},h={broadcast:c,presence:u,postgres_changes:(o=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(p=>p.filter))!==null&&o!==void 0?o:[]};this.socket.accessToken&&(x.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:h},x)),this.joinedOnce=!0,this._rejoin(a),this.joinPush.receive("ok",({postgres_changes:p})=>{var b;if(this.socket.accessToken&&this.socket.setAuth(this.socket.accessToken),p===void 0){t&&t("SUBSCRIBED");return}else{const y=this.bindings.postgres_changes,N=(b=y==null?void 0:y.length)!==null&&b!==void 0?b:0,w=[];for(let A=0;A<N;A++){const I=y[A],{filter:{event:H,schema:G,table:F,filter:O}}=I,V=p&&p[A];if(V&&V.event===H&&V.schema===G&&V.table===F&&V.filter===O)w.push(Object.assign(Object.assign({},I),{id:V.id}));else{this.unsubscribe(),t&&t("CHANNEL_ERROR",new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=w,t&&t("SUBSCRIBED");return}}).receive("error",p=>{t&&t("CHANNEL_ERROR",new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{t&&t("TIMED_OUT")})}return this}presenceState(){return this.presence.state}async track(t,a={}){return await this.send({type:"presence",event:"track",payload:t},a.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,a,i){return this._on(t,a,i)}async send(t,a={}){var i,o;if(!this._canPush()&&t.type==="broadcast"){const{event:c,payload:u}=t,x={method:"POST",headers:{apikey:(i=this.socket.apiKey)!==null&&i!==void 0?i:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:c,payload:u}]})};try{return(await this._fetchWithTimeout(this.broadcastEndpointURL,x,(o=a.timeout)!==null&&o!==void 0?o:this.timeout)).ok?"ok":"error"}catch(h){return h.name==="AbortError"?"timed out":"error"}}else return new Promise(c=>{var u,x,h;const p=this._push(t.type,t,a.timeout||this.timeout);t.type==="broadcast"&&!(!((h=(x=(u=this.params)===null||u===void 0?void 0:u.config)===null||x===void 0?void 0:x.broadcast)===null||h===void 0)&&h.ack)&&c("ok"),p.receive("ok",()=>c("ok")),p.receive("timeout",()=>c("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=ls.leaving;const a=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ks.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(i=>{const o=new ou(this,ks.leave,{},t);o.receive("ok",()=>{a(),i("ok")}).receive("timeout",()=>{a(),i("timed out")}).receive("error",()=>{i("error")}),o.send(),this._canPush()||o.trigger("ok",{})})}_broadcastEndpointURL(){let t=this.socket.endPoint;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"}async _fetchWithTimeout(t,a,i){const o=new AbortController,c=setTimeout(()=>o.abort(),i),u=await this.socket.fetch(t,Object.assign(Object.assign({},a),{signal:o.signal}));return clearTimeout(c),u}_push(t,a,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new ou(this,t,a,i);return this._canPush()?o.send():(o.startTimeout(),this.pushBuffer.push(o)),o}_onMessage(t,a,i){return a}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,a,i){var o,c;const u=t.toLocaleLowerCase(),{close:x,error:h,leave:p,join:b}=ks;if(i&&[x,h,p,b].indexOf(u)>=0&&i!==this._joinRef())return;let N=this._onMessage(u,a,i);if(a&&!N)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(u)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(w=>{var A,I,H;return((A=w.filter)===null||A===void 0?void 0:A.event)==="*"||((H=(I=w.filter)===null||I===void 0?void 0:I.event)===null||H===void 0?void 0:H.toLocaleLowerCase())===u}).map(w=>w.callback(N,i)):(c=this.bindings[u])===null||c===void 0||c.filter(w=>{var A,I,H,G,F,O;if(["broadcast","presence","postgres_changes"].includes(u))if("id"in w){const V=w.id,X=(A=w.filter)===null||A===void 0?void 0:A.event;return V&&((I=a.ids)===null||I===void 0?void 0:I.includes(V))&&(X==="*"||(X==null?void 0:X.toLocaleLowerCase())===((H=a.data)===null||H===void 0?void 0:H.type.toLocaleLowerCase()))}else{const V=(F=(G=w==null?void 0:w.filter)===null||G===void 0?void 0:G.event)===null||F===void 0?void 0:F.toLocaleLowerCase();return V==="*"||V===((O=a==null?void 0:a.event)===null||O===void 0?void 0:O.toLocaleLowerCase())}else return w.type.toLocaleLowerCase()===u}).map(w=>{if(typeof N=="object"&&"ids"in N){const A=N.data,{schema:I,table:H,commit_timestamp:G,type:F,errors:O}=A;N=Object.assign(Object.assign({},{schema:I,table:H,commit_timestamp:G,eventType:F,new:{},old:{},errors:O}),this._getPayloadRecords(A))}w.callback(N,i)})}_isClosed(){return this.state===ls.closed}_isJoined(){return this.state===ls.joined}_isJoining(){return this.state===ls.joining}_isLeaving(){return this.state===ls.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,a,i){const o=t.toLocaleLowerCase(),c={type:o,filter:a,callback:i};return this.bindings[o]?this.bindings[o].push(c):this.bindings[o]=[c],this}_off(t,a){const i=t.toLocaleLowerCase();return this.bindings[i]=this.bindings[i].filter(o=>{var c;return!(((c=o.type)===null||c===void 0?void 0:c.toLocaleLowerCase())===i&&cf.isEqual(o.filter,a))}),this}static isEqual(t,a){if(Object.keys(t).length!==Object.keys(a).length)return!1;for(const i in t)if(t[i]!==a[i])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(ks.close,{},t)}_onError(t){this._on(ks.error,{},a=>t(a))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ls.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const a={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(a.new=Zp(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(a.old=Zp(t.columns,t.old_record)),a}}const fT=()=>{},hT=typeof WebSocket<"u";class mT{constructor(t,a){var i;this.accessToken=null,this.apiKey=null,this.channels=[],this.endPoint="",this.headers=sT,this.params={},this.timeout=Nb,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=fT,this.conn=null,this.sendBuffer=[],this.serializer=new aT,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this._resolveFetch=c=>{let u;return c?u=c:typeof fetch>"u"?u=(...x)=>Ra(async()=>{const{default:h}=await Promise.resolve().then(()=>Xi);return{default:h}},void 0).then(({default:h})=>h(...x)):u=fetch,(...x)=>u(...x)},this.endPoint=`${t}/${zu.websocket}`,a!=null&&a.transport?this.transport=a.transport:this.transport=null,a!=null&&a.params&&(this.params=a.params),a!=null&&a.headers&&(this.headers=Object.assign(Object.assign({},this.headers),a.headers)),a!=null&&a.timeout&&(this.timeout=a.timeout),a!=null&&a.logger&&(this.logger=a.logger),a!=null&&a.heartbeatIntervalMs&&(this.heartbeatIntervalMs=a.heartbeatIntervalMs);const o=(i=a==null?void 0:a.params)===null||i===void 0?void 0:i.apikey;o&&(this.accessToken=o,this.apiKey=o),this.reconnectAfterMs=a!=null&&a.reconnectAfterMs?a.reconnectAfterMs:c=>[1e3,2e3,5e3,1e4][c-1]||1e4,this.encode=a!=null&&a.encode?a.encode:(c,u)=>u(JSON.stringify(c)),this.decode=a!=null&&a.decode?a.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new jb(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(a==null?void 0:a.fetch)}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this._endPointURL(),void 0,{headers:this.headers});return}if(hT){this.conn=new WebSocket(this._endPointURL()),this.setupConnection();return}this.conn=new xT(this._endPointURL(),void 0,{close:()=>{this.conn=null}}),Ra(async()=>{const{default:t}=await import("./browser-Ckd5F7u0.js").then(a=>a.b);return{default:t}},[]).then(({default:t})=>{this.conn=new t(this._endPointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}disconnect(t,a){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,a??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(t){const a=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),a}async removeAllChannels(){const t=await Promise.all(this.channels.map(a=>a.unsubscribe()));return this.disconnect(),t}log(t,a,i){this.logger(t,a,i)}connectionState(){switch(this.conn&&this.conn.readyState){case Ta.connecting:return jl.Connecting;case Ta.open:return jl.Open;case Ta.closing:return jl.Closing;default:return jl.Closed}}isConnected(){return this.connectionState()===jl.Open}channel(t,a={config:{}}){const i=new cf(`realtime:${t}`,a,this);return this.channels.push(i),i}push(t){const{topic:a,event:i,payload:o,ref:c}=t,u=()=>{this.encode(t,x=>{var h;(h=this.conn)===null||h===void 0||h.send(x)})};this.log("push",`${a} ${i} (${c})`,o),this.isConnected()?u():this.sendBuffer.push(u)}setAuth(t){this.accessToken=t,this.channels.forEach(a=>{t&&a.updateJoinPayload({access_token:t}),a.joinedOnce&&a._isJoined()&&a._push(ks.access_token,{access_token:t})})}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let a=this.channels.find(i=>i.topic===t&&(i._isJoined()||i._isJoining()));a&&(this.log("transport",`leaving duplicate topic "${t}"`),a.unsubscribe())}_remove(t){this.channels=this.channels.filter(a=>a._joinRef()!==t._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:nT}))}_onConnMessage(t){this.decode(t.data,a=>{let{topic:i,event:o,payload:c,ref:u}=a;(u&&u===this.pendingHeartbeatRef||o===(c==null?void 0:c.type))&&(this.pendingHeartbeatRef=null),this.log("receive",`${c.status||""} ${i} ${o} ${u&&"("+u+")"||""}`,c),this.channels.filter(x=>x._isMember(i)).forEach(x=>x._trigger(o,c,u)),this.stateChangeCallbacks.message.forEach(x=>x(a))})}_onConnOpen(){this.log("transport",`connected to ${this._endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this._sendHeartbeat(),this.heartbeatIntervalMs),this.stateChangeCallbacks.open.forEach(t=>t())}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(a=>a(t))}_onConnError(t){this.log("transport",t.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(a=>a(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(ks.error))}_appendParams(t,a){if(Object.keys(a).length===0)return t;const i=t.match(/\?/)?"&":"?",o=new URLSearchParams(a);return`${t}${i}${o}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_sendHeartbeat(){var t;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(t=this.conn)===null||t===void 0||t.close(lT,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}}class xT{constructor(t,a,i){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Ta.connecting,this.send=()=>{},this.url=null,this.url=t,this.close=i.close}}class df extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function qt(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class pT extends df{constructor(t,a){super(t),this.name="StorageApiError",this.status=a}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class sg extends df{constructor(t,a){super(t),this.name="StorageUnknownError",this.originalError=a}}var gT=function(n,t,a,i){function o(c){return c instanceof a?c:new a(function(u){u(c)})}return new(a||(a=Promise))(function(c,u){function x(b){try{p(i.next(b))}catch(y){u(y)}}function h(b){try{p(i.throw(b))}catch(y){u(y)}}function p(b){b.done?c(b.value):o(b.value).then(x,h)}p((i=i.apply(n,t||[])).next())})};const _b=n=>{let t;return n?t=n:typeof fetch>"u"?t=(...a)=>Ra(async()=>{const{default:i}=await Promise.resolve().then(()=>Xi);return{default:i}},void 0).then(({default:i})=>i(...a)):t=fetch,(...a)=>t(...a)},bT=()=>gT(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Ra(()=>Promise.resolve().then(()=>Xi),void 0)).Response:Response});var Pa=function(n,t,a,i){function o(c){return c instanceof a?c:new a(function(u){u(c)})}return new(a||(a=Promise))(function(c,u){function x(b){try{p(i.next(b))}catch(y){u(y)}}function h(b){try{p(i.throw(b))}catch(y){u(y)}}function p(b){b.done?c(b.value):o(b.value).then(x,h)}p((i=i.apply(n,t||[])).next())})};const cu=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),vT=(n,t)=>Pa(void 0,void 0,void 0,function*(){const a=yield bT();n instanceof a?n.json().then(i=>{t(new pT(cu(i),n.status||500))}).catch(i=>{t(new sg(cu(i),i))}):t(new sg(cu(n),n))}),yT=(n,t,a,i)=>{const o={method:n,headers:(t==null?void 0:t.headers)||{}};return n==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),o.body=JSON.stringify(i),Object.assign(Object.assign({},o),a))};function Ho(n,t,a,i,o,c){return Pa(this,void 0,void 0,function*(){return new Promise((u,x)=>{n(a,yT(t,i,o,c)).then(h=>{if(!h.ok)throw h;return i!=null&&i.noResolveJson?h:h.json()}).then(h=>u(h)).catch(h=>vT(h,x))})})}function Uu(n,t,a,i){return Pa(this,void 0,void 0,function*(){return Ho(n,"GET",t,a,i)})}function $n(n,t,a,i,o){return Pa(this,void 0,void 0,function*(){return Ho(n,"POST",t,i,o,a)})}function NT(n,t,a,i,o){return Pa(this,void 0,void 0,function*(){return Ho(n,"PUT",t,i,o,a)})}function Sb(n,t,a,i,o){return Pa(this,void 0,void 0,function*(){return Ho(n,"DELETE",t,i,o,a)})}var vs=function(n,t,a,i){function o(c){return c instanceof a?c:new a(function(u){u(c)})}return new(a||(a=Promise))(function(c,u){function x(b){try{p(i.next(b))}catch(y){u(y)}}function h(b){try{p(i.throw(b))}catch(y){u(y)}}function p(b){b.done?c(b.value):o(b.value).then(x,h)}p((i=i.apply(n,t||[])).next())})};const jT={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},ng={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class wT{constructor(t,a={},i,o){this.url=t,this.headers=a,this.bucketId=i,this.fetch=_b(o)}uploadOrUpdate(t,a,i,o){return vs(this,void 0,void 0,function*(){try{let c;const u=Object.assign(Object.assign({},ng),o),x=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(u.upsert)});typeof Blob<"u"&&i instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",i)):typeof FormData<"u"&&i instanceof FormData?(c=i,c.append("cacheControl",u.cacheControl)):(c=i,x["cache-control"]=`max-age=${u.cacheControl}`,x["content-type"]=u.contentType);const h=this._removeEmptyFolders(a),p=this._getFinalPath(h),b=yield this.fetch(`${this.url}/object/${p}`,Object.assign({method:t,body:c,headers:x},u!=null&&u.duplex?{duplex:u.duplex}:{})),y=yield b.json();return b.ok?{data:{path:h,id:y.Id,fullPath:y.Key},error:null}:{data:null,error:y}}catch(c){if(qt(c))return{data:null,error:c};throw c}})}upload(t,a,i){return vs(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,a,i)})}uploadToSignedUrl(t,a,i,o){return vs(this,void 0,void 0,function*(){const c=this._removeEmptyFolders(t),u=this._getFinalPath(c),x=new URL(this.url+`/object/upload/sign/${u}`);x.searchParams.set("token",a);try{let h;const p=Object.assign({upsert:ng.upsert},o),b=Object.assign(Object.assign({},this.headers),{"x-upsert":String(p.upsert)});typeof Blob<"u"&&i instanceof Blob?(h=new FormData,h.append("cacheControl",p.cacheControl),h.append("",i)):typeof FormData<"u"&&i instanceof FormData?(h=i,h.append("cacheControl",p.cacheControl)):(h=i,b["cache-control"]=`max-age=${p.cacheControl}`,b["content-type"]=p.contentType);const y=yield this.fetch(x.toString(),{method:"PUT",body:h,headers:b}),N=yield y.json();return y.ok?{data:{path:c,fullPath:N.Key},error:null}:{data:null,error:N}}catch(h){if(qt(h))return{data:null,error:h};throw h}})}createSignedUploadUrl(t){return vs(this,void 0,void 0,function*(){try{let a=this._getFinalPath(t);const i=yield $n(this.fetch,`${this.url}/object/upload/sign/${a}`,{},{headers:this.headers}),o=new URL(this.url+i.url),c=o.searchParams.get("token");if(!c)throw new df("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:c},error:null}}catch(a){if(qt(a))return{data:null,error:a};throw a}})}update(t,a,i){return vs(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,a,i)})}move(t,a){return vs(this,void 0,void 0,function*(){try{return{data:yield $n(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:a},{headers:this.headers}),error:null}}catch(i){if(qt(i))return{data:null,error:i};throw i}})}copy(t,a){return vs(this,void 0,void 0,function*(){try{return{data:{path:(yield $n(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:a},{headers:this.headers})).Key},error:null}}catch(i){if(qt(i))return{data:null,error:i};throw i}})}createSignedUrl(t,a,i){return vs(this,void 0,void 0,function*(){try{let o=this._getFinalPath(t),c=yield $n(this.fetch,`${this.url}/object/sign/${o}`,Object.assign({expiresIn:a},i!=null&&i.transform?{transform:i.transform}:{}),{headers:this.headers});const u=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return c={signedUrl:encodeURI(`${this.url}${c.signedURL}${u}`)},{data:c,error:null}}catch(o){if(qt(o))return{data:null,error:o};throw o}})}createSignedUrls(t,a,i){return vs(this,void 0,void 0,function*(){try{const o=yield $n(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:a,paths:t},{headers:this.headers}),c=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return{data:o.map(u=>Object.assign(Object.assign({},u),{signedUrl:u.signedURL?encodeURI(`${this.url}${u.signedURL}${c}`):null})),error:null}}catch(o){if(qt(o))return{data:null,error:o};throw o}})}download(t,a){return vs(this,void 0,void 0,function*(){const o=typeof(a==null?void 0:a.transform)<"u"?"render/image/authenticated":"object",c=this.transformOptsToQueryString((a==null?void 0:a.transform)||{}),u=c?`?${c}`:"";try{const x=this._getFinalPath(t);return{data:yield(yield Uu(this.fetch,`${this.url}/${o}/${x}${u}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(x){if(qt(x))return{data:null,error:x};throw x}})}getPublicUrl(t,a){const i=this._getFinalPath(t),o=[],c=a!=null&&a.download?`download=${a.download===!0?"":a.download}`:"";c!==""&&o.push(c);const x=typeof(a==null?void 0:a.transform)<"u"?"render/image":"object",h=this.transformOptsToQueryString((a==null?void 0:a.transform)||{});h!==""&&o.push(h);let p=o.join("&");return p!==""&&(p=`?${p}`),{data:{publicUrl:encodeURI(`${this.url}/${x}/public/${i}${p}`)}}}remove(t){return vs(this,void 0,void 0,function*(){try{return{data:yield Sb(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(a){if(qt(a))return{data:null,error:a};throw a}})}list(t,a,i){return vs(this,void 0,void 0,function*(){try{const o=Object.assign(Object.assign(Object.assign({},jT),a),{prefix:t||""});return{data:yield $n(this.fetch,`${this.url}/object/list/${this.bucketId}`,o,{headers:this.headers},i),error:null}}catch(o){if(qt(o))return{data:null,error:o};throw o}})}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const a=[];return t.width&&a.push(`width=${t.width}`),t.height&&a.push(`height=${t.height}`),t.resize&&a.push(`resize=${t.resize}`),t.format&&a.push(`format=${t.format}`),t.quality&&a.push(`quality=${t.quality}`),a.join("&")}}const _T="2.5.5",ST={"X-Client-Info":`storage-js/${_T}`};var ga=function(n,t,a,i){function o(c){return c instanceof a?c:new a(function(u){u(c)})}return new(a||(a=Promise))(function(c,u){function x(b){try{p(i.next(b))}catch(y){u(y)}}function h(b){try{p(i.throw(b))}catch(y){u(y)}}function p(b){b.done?c(b.value):o(b.value).then(x,h)}p((i=i.apply(n,t||[])).next())})};class CT{constructor(t,a={},i){this.url=t,this.headers=Object.assign(Object.assign({},ST),a),this.fetch=_b(i)}listBuckets(){return ga(this,void 0,void 0,function*(){try{return{data:yield Uu(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(qt(t))return{data:null,error:t};throw t}})}getBucket(t){return ga(this,void 0,void 0,function*(){try{return{data:yield Uu(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(a){if(qt(a))return{data:null,error:a};throw a}})}createBucket(t,a={public:!1}){return ga(this,void 0,void 0,function*(){try{return{data:yield $n(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:a.public,file_size_limit:a.fileSizeLimit,allowed_mime_types:a.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(qt(i))return{data:null,error:i};throw i}})}updateBucket(t,a){return ga(this,void 0,void 0,function*(){try{return{data:yield NT(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:a.public,file_size_limit:a.fileSizeLimit,allowed_mime_types:a.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(qt(i))return{data:null,error:i};throw i}})}emptyBucket(t){return ga(this,void 0,void 0,function*(){try{return{data:yield $n(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(a){if(qt(a))return{data:null,error:a};throw a}})}deleteBucket(t){return ga(this,void 0,void 0,function*(){try{return{data:yield Sb(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(a){if(qt(a))return{data:null,error:a};throw a}})}}class ET extends CT{constructor(t,a={},i){super(t,a,i)}from(t){return new wT(this.url,this.headers,t,this.fetch)}}const TT="2.39.7";let $i="";typeof Deno<"u"?$i="deno":typeof document<"u"?$i="web":typeof navigator<"u"&&navigator.product==="ReactNative"?$i="react-native":$i="node";const kT={"X-Client-Info":`supabase-js-${$i}/${TT}`},AT={headers:kT},MT={schema:"public"},RT={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},DT={};var IT=function(n,t,a,i){function o(c){return c instanceof a?c:new a(function(u){u(c)})}return new(a||(a=Promise))(function(c,u){function x(b){try{p(i.next(b))}catch(y){u(y)}}function h(b){try{p(i.throw(b))}catch(y){u(y)}}function p(b){b.done?c(b.value):o(b.value).then(x,h)}p((i=i.apply(n,t||[])).next())})};const zT=n=>{let t;return n?t=n:typeof fetch>"u"?t=rf:t=fetch,(...a)=>t(...a)},LT=()=>typeof Headers>"u"?yb:Headers,UT=(n,t,a)=>{const i=zT(a),o=LT();return(c,u)=>IT(void 0,void 0,void 0,function*(){var x;const h=(x=yield t())!==null&&x!==void 0?x:n;let p=new o(u==null?void 0:u.headers);return p.has("apikey")||p.set("apikey",n),p.has("Authorization")||p.set("Authorization",`Bearer ${h}`),i(c,Object.assign(Object.assign({},u),{headers:p}))})};function PT(n){return n.replace(/\/$/,"")}function qT(n,t){const{db:a,auth:i,realtime:o,global:c}=n,{db:u,auth:x,realtime:h,global:p}=t;return{db:Object.assign(Object.assign({},u),a),auth:Object.assign(Object.assign({},x),i),realtime:Object.assign(Object.assign({},h),o),global:Object.assign(Object.assign({},p),c)}}function OT(n){return Math.round(Date.now()/1e3)+n}function $T(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const t=Math.random()*16|0;return(n=="x"?t:t&3|8).toString(16)})}const Ts=()=>typeof document<"u",bl={tested:!1,writable:!1},Vi=()=>{if(!Ts())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(bl.tested)return bl.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),bl.tested=!0,bl.writable=!0}catch{bl.tested=!0,bl.writable=!1}return bl.writable};function du(n){const t={},a=new URL(n);if(a.hash&&a.hash[0]==="#")try{new URLSearchParams(a.hash.substring(1)).forEach((o,c)=>{t[c]=o})}catch{}return a.searchParams.forEach((i,o)=>{t[o]=i}),t}const Cb=n=>{let t;return n?t=n:typeof fetch>"u"?t=(...a)=>Ra(async()=>{const{default:i}=await Promise.resolve().then(()=>Xi);return{default:i}},void 0).then(({default:i})=>i(...a)):t=fetch,(...a)=>t(...a)},HT=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",vl=async(n,t,a)=>{await n.setItem(t,JSON.stringify(a))},go=async(n,t)=>{const a=await n.getItem(t);if(!a)return null;try{return JSON.parse(a)}catch{return a}},uu=async(n,t)=>{await n.removeItem(t)};function GT(n){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let a="",i,o,c,u,x,h,p,b=0;for(n=n.replace("-","+").replace("_","/");b<n.length;)u=t.indexOf(n.charAt(b++)),x=t.indexOf(n.charAt(b++)),h=t.indexOf(n.charAt(b++)),p=t.indexOf(n.charAt(b++)),i=u<<2|x>>4,o=(x&15)<<4|h>>2,c=(h&3)<<6|p,a=a+String.fromCharCode(i),h!=64&&o!=0&&(a=a+String.fromCharCode(o)),p!=64&&c!=0&&(a=a+String.fromCharCode(c));return a}class Go{constructor(){this.promise=new Go.promiseConstructor((t,a)=>{this.resolve=t,this.reject=a})}}Go.promiseConstructor=Promise;function lg(n){const t=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,a=n.split(".");if(a.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!t.test(a[1]))throw new Error("JWT is not valid: payload is not in base64url format");const i=a[1];return JSON.parse(GT(i))}async function VT(n){return await new Promise(t=>{setTimeout(()=>t(null),n)})}function BT(n,t){return new Promise((i,o)=>{(async()=>{for(let c=0;c<1/0;c++)try{const u=await n(c);if(!t(c,null,u)){i(u);return}}catch(u){if(!t(c,u)){o(u);return}}})()})}function FT(n){return("0"+n.toString(16)).substr(-2)}function ba(){const t=new Uint32Array(56);if(typeof crypto>"u"){const a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=a.length;let o="";for(let c=0;c<56;c++)o+=a.charAt(Math.floor(Math.random()*i));return o}return crypto.getRandomValues(t),Array.from(t,FT).join("")}async function JT(n){const a=new TextEncoder().encode(n),i=await crypto.subtle.digest("SHA-256",a),o=new Uint8Array(i);return Array.from(o).map(c=>String.fromCharCode(c)).join("")}function YT(n){return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function va(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const a=await JT(n);return YT(a)}class uf extends Error{constructor(t,a){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=a}}function Oe(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class KT extends uf{constructor(t,a){super(t,a),this.name="AuthApiError",this.status=a}toJSON(){return{name:this.name,message:this.message,status:this.status}}}function QT(n){return Oe(n)&&n.name==="AuthApiError"}class Eb extends uf{constructor(t,a){super(t),this.name="AuthUnknownError",this.originalError=a}}class kl extends uf{constructor(t,a,i){super(t),this.name=a,this.status=i}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class ya extends kl{constructor(){super("Auth session missing!","AuthSessionMissingError",400)}}class fu extends kl{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500)}}class bo extends kl{constructor(t){super(t,"AuthInvalidCredentialsError",400)}}class vo extends kl{constructor(t,a=null){super(t,"AuthImplicitGrantRedirectError",500),this.details=null,this.details=a}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class ag extends kl{constructor(t,a=null){super(t,"AuthPKCEGrantCodeExchangeError",500),this.details=null,this.details=a}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Pu extends kl{constructor(t,a){super(t,"AuthRetryableFetchError",a)}}function hu(n){return Oe(n)&&n.name==="AuthRetryableFetchError"}class XT extends kl{constructor(t,a,i){super(t,"AuthWeakPasswordError",a),this.reasons=i}}var ZT=function(n,t){var a={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(a[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(a[i[o]]=n[i[o]]);return a};const wa=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),WT=[502,503,504];async function ig(n){if(!HT(n))throw new Pu(wa(n),0);if(WT.includes(n.status))throw new Pu(wa(n),n.status);let t;try{t=await n.json()}catch(a){throw new Eb(wa(a),a)}throw typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((a,i)=>a&&typeof i=="string",!0)?new XT(wa(t),n.status,t.weak_password.reasons):new KT(wa(t),n.status||500)}const ek=(n,t,a,i)=>{const o={method:n,headers:(t==null?void 0:t.headers)||{}};return n==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),o.body=JSON.stringify(i),Object.assign(Object.assign({},o),a))};async function Ge(n,t,a,i){var o;const c=Object.assign({},i==null?void 0:i.headers);i!=null&&i.jwt&&(c.Authorization=`Bearer ${i.jwt}`);const u=(o=i==null?void 0:i.query)!==null&&o!==void 0?o:{};i!=null&&i.redirectTo&&(u.redirect_to=i.redirectTo);const x=Object.keys(u).length?"?"+new URLSearchParams(u).toString():"",h=await tk(n,t,a+x,{headers:c,noResolveJson:i==null?void 0:i.noResolveJson},{},i==null?void 0:i.body);return i!=null&&i.xform?i==null?void 0:i.xform(h):{data:Object.assign({},h),error:null}}async function tk(n,t,a,i,o,c){const u=ek(t,i,o,c);let x;try{x=await n(a,u)}catch(h){throw console.error(h),new Pu(wa(h),0)}if(x.ok||await ig(x),i!=null&&i.noResolveJson)return x;try{return await x.json()}catch(h){await ig(h)}}function Nl(n){var t;let a=null;ak(n)&&(a=Object.assign({},n),n.expires_at||(a.expires_at=OT(n.expires_in)));const i=(t=n.user)!==null&&t!==void 0?t:n;return{data:{session:a,user:i},error:null}}function rg(n){const t=Nl(n);return!t.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((a,i)=>a&&typeof i=="string",!0)&&(t.data.weak_password=n.weak_password),t}function Hn(n){var t;return{data:{user:(t=n.user)!==null&&t!==void 0?t:n},error:null}}function sk(n){return{data:n,error:null}}function nk(n){const{action_link:t,email_otp:a,hashed_token:i,redirect_to:o,verification_type:c}=n,u=ZT(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),x={action_link:t,email_otp:a,hashed_token:i,redirect_to:o,verification_type:c},h=Object.assign({},u);return{data:{properties:x,user:h},error:null}}function lk(n){return n}function ak(n){return n.access_token&&n.refresh_token&&n.expires_in}var ik=function(n,t){var a={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(a[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(a[i[o]]=n[i[o]]);return a};class rk{constructor({url:t="",headers:a={},fetch:i}){this.url=t,this.headers=a,this.fetch=Cb(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,a="global"){try{return await Ge(this.fetch,"POST",`${this.url}/logout?scope=${a}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(i){if(Oe(i))return{data:null,error:i};throw i}}async inviteUserByEmail(t,a={}){try{return await Ge(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:a.data},headers:this.headers,redirectTo:a.redirectTo,xform:Hn})}catch(i){if(Oe(i))return{data:{user:null},error:i};throw i}}async generateLink(t){try{const{options:a}=t,i=ik(t,["options"]),o=Object.assign(Object.assign({},i),a);return"newEmail"in i&&(o.new_email=i==null?void 0:i.newEmail,delete o.newEmail),await Ge(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:nk,redirectTo:a==null?void 0:a.redirectTo})}catch(a){if(Oe(a))return{data:{properties:null,user:null},error:a};throw a}}async createUser(t){try{return await Ge(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Hn})}catch(a){if(Oe(a))return{data:{user:null},error:a};throw a}}async listUsers(t){var a,i,o,c,u,x,h;try{const p={nextPage:null,lastPage:0,total:0},b=await Ge(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(a=t==null?void 0:t.page)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:"",per_page:(c=(o=t==null?void 0:t.perPage)===null||o===void 0?void 0:o.toString())!==null&&c!==void 0?c:""},xform:lk});if(b.error)throw b.error;const y=await b.json(),N=(u=b.headers.get("x-total-count"))!==null&&u!==void 0?u:0,w=(h=(x=b.headers.get("link"))===null||x===void 0?void 0:x.split(","))!==null&&h!==void 0?h:[];return w.length>0&&(w.forEach(A=>{const I=parseInt(A.split(";")[0].split("=")[1].substring(0,1)),H=JSON.parse(A.split(";")[1].split("=")[1]);p[`${H}Page`]=I}),p.total=parseInt(N)),{data:Object.assign(Object.assign({},y),p),error:null}}catch(p){if(Oe(p))return{data:{users:[]},error:p};throw p}}async getUserById(t){try{return await Ge(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Hn})}catch(a){if(Oe(a))return{data:{user:null},error:a};throw a}}async updateUserById(t,a){try{return await Ge(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:a,headers:this.headers,xform:Hn})}catch(i){if(Oe(i))return{data:{user:null},error:i};throw i}}async deleteUser(t,a=!1){try{return await Ge(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:a},xform:Hn})}catch(i){if(Oe(i))return{data:{user:null},error:i};throw i}}async _listFactors(t){try{const{data:a,error:i}=await Ge(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:a,error:i}}catch(a){if(Oe(a))return{data:null,error:a};throw a}}async _deleteFactor(t){try{return{data:await Ge(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(a){if(Oe(a))return{data:null,error:a};throw a}}}const Tb="0.0.0",ok="http://localhost:9999",ck="supabase.auth.token",dk={"X-Client-Info":`gotrue-js/${Tb}`},og=10,uk={getItem:n=>Vi()?globalThis.localStorage.getItem(n):null,setItem:(n,t)=>{Vi()&&globalThis.localStorage.setItem(n,t)},removeItem:n=>{Vi()&&globalThis.localStorage.removeItem(n)}};function cg(n={}){return{getItem:t=>n[t]||null,setItem:(t,a)=>{n[t]=a},removeItem:t=>{delete n[t]}}}function fk(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Na={debug:!!(globalThis&&Vi()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class kb extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class hk extends kb{}async function mk(n,t,a){Na.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,t);const i=new globalThis.AbortController;return t>0&&setTimeout(()=>{i.abort(),Na.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},t),await globalThis.navigator.locks.request(n,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async o=>{if(o){Na.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,o.name);try{return await a()}finally{Na.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,o.name)}}else{if(t===0)throw Na.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new hk(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(Na.debug)try{const c=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(c,null,"  "))}catch(c){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",c)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await a()}})}fk();const xk={url:ok,storageKey:ck,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:dk,flowType:"implicit",debug:!1},zi=30*1e3,dg=3;async function ug(n,t,a){return await a()}class Ji{constructor(t){var a,i;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Ji.nextInstanceID,Ji.nextInstanceID+=1,this.instanceID>0&&Ts()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const o=Object.assign(Object.assign({},xk),t);if(this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.persistSession=o.persistSession,this.storageKey=o.storageKey,this.autoRefreshToken=o.autoRefreshToken,this.admin=new rk({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=Cb(o.fetch),this.lock=o.lock||ug,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,o.lock?this.lock=o.lock:Ts()&&(!((a=globalThis==null?void 0:globalThis.navigator)===null||a===void 0)&&a.locks)?this.lock=mk:this.lock=ug,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?o.storage?this.storage=o.storage:Vi()?this.storage=uk:(this.memoryStorage={},this.storage=cg(this.memoryStorage)):(this.memoryStorage={},this.storage=cg(this.memoryStorage)),Ts()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(c){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",c)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async c=>{this._debug("received broadcast notification from other tab or client",c),await this._notifyAllSubscribers(c.data.event,c.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Tb}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){try{const t=Ts()?await this._isPKCEFlow():!1;if(this._debug("#_initialize()","begin","is PKCE flow",t),t||this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:a,error:i}=await this._getSessionFromURL(t);if(i)return this._debug("#_initialize()","error detecting session from URL",i),(i==null?void 0:i.message)==="Identity is already linked"||(i==null?void 0:i.message)==="Identity is already linked to another user"?{error:i}:(await this._removeSession(),{error:i});const{session:o,redirectType:c}=a;return this._debug("#_initialize()","detected session in URL",o,"redirect type",c),await this._saveSession(o),setTimeout(async()=>{c==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return Oe(t)?{error:t}:{error:new Eb("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signUp(t){var a,i,o;try{await this._removeSession();let c;if("email"in t){const{email:b,password:y,options:N}=t;let w=null,A=null;if(this.flowType==="pkce"){const I=ba();await vl(this.storage,`${this.storageKey}-code-verifier`,I),w=await va(I),A=I===w?"plain":"s256"}c=await Ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:N==null?void 0:N.emailRedirectTo,body:{email:b,password:y,data:(a=N==null?void 0:N.data)!==null&&a!==void 0?a:{},gotrue_meta_security:{captcha_token:N==null?void 0:N.captchaToken},code_challenge:w,code_challenge_method:A},xform:Nl})}else if("phone"in t){const{phone:b,password:y,options:N}=t;c=await Ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:b,password:y,data:(i=N==null?void 0:N.data)!==null&&i!==void 0?i:{},channel:(o=N==null?void 0:N.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:N==null?void 0:N.captchaToken}},xform:Nl})}else throw new bo("You must provide either an email or phone number and a password");const{data:u,error:x}=c;if(x||!u)return{data:{user:null,session:null},error:x};const h=u.session,p=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",h)),{data:{user:p,session:h},error:null}}catch(c){if(Oe(c))return{data:{user:null,session:null},error:c};throw c}}async signInWithPassword(t){try{await this._removeSession();let a;if("email"in t){const{email:c,password:u,options:x}=t;a=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:c,password:u,gotrue_meta_security:{captcha_token:x==null?void 0:x.captchaToken}},xform:rg})}else if("phone"in t){const{phone:c,password:u,options:x}=t;a=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:c,password:u,gotrue_meta_security:{captcha_token:x==null?void 0:x.captchaToken}},xform:rg})}else throw new bo("You must provide either an email or phone number and a password");const{data:i,error:o}=a;return o?{data:{user:null,session:null},error:o}:!i||!i.session||!i.user?{data:{user:null,session:null},error:new fu}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:o})}catch(a){if(Oe(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithOAuth(t){var a,i,o,c;return await this._removeSession(),await this._handleProviderSignIn(t.provider,{redirectTo:(a=t.options)===null||a===void 0?void 0:a.redirectTo,scopes:(i=t.options)===null||i===void 0?void 0:i.scopes,queryParams:(o=t.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(c=t.options)===null||c===void 0?void 0:c.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async _exchangeCodeForSession(t){const a=await go(this.storage,`${this.storageKey}-code-verifier`),[i,o]=(a??"").split("/"),{data:c,error:u}=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:i},xform:Nl});return await uu(this.storage,`${this.storageKey}-code-verifier`),u?{data:{user:null,session:null,redirectType:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null,redirectType:null},error:new fu}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:Object.assign(Object.assign({},c),{redirectType:o??null}),error:u})}async signInWithIdToken(t){await this._removeSession();try{const{options:a,provider:i,token:o,access_token:c,nonce:u}=t,x=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:o,access_token:c,nonce:u,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Nl}),{data:h,error:p}=x;return p?{data:{user:null,session:null},error:p}:!h||!h.session||!h.user?{data:{user:null,session:null},error:new fu}:(h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",h.session)),{data:h,error:p})}catch(a){if(Oe(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithOtp(t){var a,i,o,c,u;try{if(await this._removeSession(),"email"in t){const{email:x,options:h}=t;let p=null,b=null;if(this.flowType==="pkce"){const N=ba();await vl(this.storage,`${this.storageKey}-code-verifier`,N),p=await va(N),b=N===p?"plain":"s256"}const{error:y}=await Ge(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:x,data:(a=h==null?void 0:h.data)!==null&&a!==void 0?a:{},create_user:(i=h==null?void 0:h.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:p,code_challenge_method:b},redirectTo:h==null?void 0:h.emailRedirectTo});return{data:{user:null,session:null},error:y}}if("phone"in t){const{phone:x,options:h}=t,{data:p,error:b}=await Ge(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:x,data:(o=h==null?void 0:h.data)!==null&&o!==void 0?o:{},create_user:(c=h==null?void 0:h.shouldCreateUser)!==null&&c!==void 0?c:!0,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},channel:(u=h==null?void 0:h.channel)!==null&&u!==void 0?u:"sms"}});return{data:{user:null,session:null,messageId:p==null?void 0:p.message_id},error:b}}throw new bo("You must provide either an email or phone number.")}catch(x){if(Oe(x))return{data:{user:null,session:null},error:x};throw x}}async verifyOtp(t){var a,i;try{t.type!=="email_change"&&t.type!=="phone_change"&&await this._removeSession();let o,c;"options"in t&&(o=(a=t.options)===null||a===void 0?void 0:a.redirectTo,c=(i=t.options)===null||i===void 0?void 0:i.captchaToken);const{data:u,error:x}=await Ge(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:c}}),redirectTo:o,xform:Nl});if(x)throw x;if(!u)throw new Error("An error occurred on token verification.");const h=u.session,p=u.user;return h!=null&&h.access_token&&(await this._saveSession(h),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",h)),{data:{user:p,session:h},error:null}}catch(o){if(Oe(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithSSO(t){var a,i,o;try{await this._removeSession();let c=null,u=null;if(this.flowType==="pkce"){const x=ba();await vl(this.storage,`${this.storageKey}-code-verifier`,x),c=await va(x),u=x===c?"plain":"s256"}return await Ge(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(i=(a=t.options)===null||a===void 0?void 0:a.redirectTo)!==null&&i!==void 0?i:void 0}),!((o=t==null?void 0:t.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:c,code_challenge_method:u}),headers:this.headers,xform:sk})}catch(c){if(Oe(c))return{data:null,error:c};throw c}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:a},error:i}=t;if(i)throw i;if(!a)throw new ya;const{error:o}=await Ge(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:a.access_token});return{data:{user:null,session:null},error:o}})}catch(t){if(Oe(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{t.type!="email_change"&&t.type!="phone_change"&&await this._removeSession();const a=`${this.url}/resend`;if("email"in t){const{email:i,type:o,options:c}=t,{error:u}=await Ge(this.fetch,"POST",a,{headers:this.headers,body:{email:i,type:o,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:u}}else if("phone"in t){const{phone:i,type:o,options:c}=t,{data:u,error:x}=await Ge(this.fetch,"POST",a,{headers:this.headers,body:{phone:i,type:o,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:x}}throw new bo("You must provide either an email or phone number and a type")}catch(a){if(Oe(a))return{data:{user:null,session:null},error:a};throw a}}async getSession(){return await this.initializePromise,this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(t,a){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await i,await a()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=a();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const a=await this.__loadSession();return await t(a)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const a=await go(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",a),a!==null&&(this._isValidSession(a)?t=a:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const i=t.expires_at?t.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",t.expires_at),!i)return{data:{session:t},error:null};const{session:o,error:c}=await this._callRefreshToken(t.refresh_token);return c?{data:{session:null},error:c}:{data:{session:o},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await Ge(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Hn}):await this._useSession(async a=>{var i,o;const{data:c,error:u}=a;if(u)throw u;return await Ge(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(i=c.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0,xform:Hn})})}catch(a){if(Oe(a))return{data:{user:null},error:a};throw a}}async updateUser(t,a={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,a))}async _updateUser(t,a={}){try{return await this._useSession(async i=>{const{data:o,error:c}=i;if(c)throw c;if(!o.session)throw new ya;const u=o.session;let x=null,h=null;if(this.flowType==="pkce"&&t.email!=null){const y=ba();await vl(this.storage,`${this.storageKey}-code-verifier`,y),x=await va(y),h=y===x?"plain":"s256"}const{data:p,error:b}=await Ge(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:a==null?void 0:a.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:x,code_challenge_method:h}),jwt:u.access_token,xform:Hn});if(b)throw b;return u.user=p.user,await this._saveSession(u),await this._notifyAllSubscribers("USER_UPDATED",u),{data:{user:u.user},error:null}})}catch(i){if(Oe(i))return{data:{user:null},error:i};throw i}}_decodeJWT(t){return lg(t)}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new ya;const a=Date.now()/1e3;let i=a,o=!0,c=null;const u=lg(t.access_token);if(u.exp&&(i=u.exp,o=i<=a),o){const{session:x,error:h}=await this._callRefreshToken(t.refresh_token);if(h)return{data:{user:null,session:null},error:h};if(!x)return{data:{user:null,session:null},error:null};c=x}else{const{data:x,error:h}=await this._getUser(t.access_token);if(h)throw h;c={access_token:t.access_token,refresh_token:t.refresh_token,user:x.user,token_type:"bearer",expires_in:i-a,expires_at:i},await this._saveSession(c),await this._notifyAllSubscribers("SIGNED_IN",c)}return{data:{user:c.user,session:c},error:null}}catch(a){if(Oe(a))return{data:{session:null,user:null},error:a};throw a}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async a=>{var i;if(!t){const{data:u,error:x}=a;if(x)throw x;t=(i=u.session)!==null&&i!==void 0?i:void 0}if(!(t!=null&&t.refresh_token))throw new ya;const{session:o,error:c}=await this._callRefreshToken(t.refresh_token);return c?{data:{user:null,session:null},error:c}:o?{data:{user:o.user,session:o},error:null}:{data:{user:null,session:null},error:null}})}catch(a){if(Oe(a))return{data:{user:null,session:null},error:a};throw a}}async _getSessionFromURL(t){try{if(!Ts())throw new vo("No browser detected.");if(this.flowType==="implicit"&&!this._isImplicitGrantFlow())throw new vo("Not a valid implicit grant flow url.");if(this.flowType=="pkce"&&!t)throw new ag("Not a valid PKCE flow url.");const a=du(window.location.href);if(t){if(!a.code)throw new ag("No code detected.");const{data:F,error:O}=await this._exchangeCodeForSession(a.code);if(O)throw O;const V=new URL(window.location.href);return V.searchParams.delete("code"),window.history.replaceState(window.history.state,"",V.toString()),{data:{session:F.session,redirectType:null},error:null}}if(a.error||a.error_description||a.error_code)throw new vo(a.error_description||"Error in URL with unspecified error_description",{error:a.error||"unspecified_error",code:a.error_code||"unspecified_code"});const{provider_token:i,provider_refresh_token:o,access_token:c,refresh_token:u,expires_in:x,expires_at:h,token_type:p}=a;if(!c||!x||!u||!p)throw new vo("No session defined in URL");const b=Math.round(Date.now()/1e3),y=parseInt(x);let N=b+y;h&&(N=parseInt(h));const w=N-b;w*1e3<=zi&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${w}s, should have been closer to ${y}s`);const A=N-y;b-A>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",A,N,b):b-A<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clok for skew",A,N,b);const{data:I,error:H}=await this._getUser(c);if(H)throw H;const G={provider_token:i,provider_refresh_token:o,access_token:c,expires_in:y,expires_at:N,refresh_token:u,token_type:p,user:I.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:G,redirectType:a.type},error:null}}catch(a){if(Oe(a))return{data:{session:null,redirectType:null},error:a};throw a}}_isImplicitGrantFlow(){const t=du(window.location.href);return!!(Ts()&&(t.access_token||t.error_description))}async _isPKCEFlow(){const t=du(window.location.href),a=await go(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&a)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async a=>{var i;const{data:o,error:c}=a;if(c)return{error:c};const u=(i=o.session)===null||i===void 0?void 0:i.access_token;if(u){const{error:x}=await this.admin.signOut(u,t);if(x&&!(QT(x)&&(x.status===404||x.status===401)))return{error:x}}return t!=="others"&&(await this._removeSession(),await uu(this.storage,`${this.storageKey}-code-verifier`),await this._notifyAllSubscribers("SIGNED_OUT",null)),{error:null}})}onAuthStateChange(t){const a=$T(),i={id:a,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",a),this.stateChangeEmitters.delete(a)}};return this._debug("#onAuthStateChange()","registered callback with id",a),this.stateChangeEmitters.set(a,i),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(a)})))(),{data:{subscription:i}}}async _emitInitialSession(t){return await this._useSession(async a=>{var i,o;try{const{data:{session:c},error:u}=a;if(u)throw u;await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",c)),this._debug("INITIAL_SESSION","callback id",t,"session",c)}catch(c){await((o=this.stateChangeEmitters.get(t))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",c),console.error(c)}})}async resetPasswordForEmail(t,a={}){let i=null,o=null;if(this.flowType==="pkce"){const c=ba();await vl(this.storage,`${this.storageKey}-code-verifier`,`${c}/PASSWORD_RECOVERY`),i=await va(c),o=c===i?"plain":"s256"}try{return await Ge(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:i,code_challenge_method:o,gotrue_meta_security:{captcha_token:a.captchaToken}},headers:this.headers,redirectTo:a.redirectTo})}catch(c){if(Oe(c))return{data:null,error:c};throw c}}async getUserIdentities(){var t;try{const{data:a,error:i}=await this.getUser();if(i)throw i;return{data:{identities:(t=a.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(a){if(Oe(a))return{data:null,error:a};throw a}}async linkIdentity(t){var a;try{const{data:i,error:o}=await this._useSession(async c=>{var u,x,h,p,b;const{data:y,error:N}=c;if(N)throw N;const w=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(u=t.options)===null||u===void 0?void 0:u.redirectTo,scopes:(x=t.options)===null||x===void 0?void 0:x.scopes,queryParams:(h=t.options)===null||h===void 0?void 0:h.queryParams,skipBrowserRedirect:!0});return await Ge(this.fetch,"GET",w,{headers:this.headers,jwt:(b=(p=y.session)===null||p===void 0?void 0:p.access_token)!==null&&b!==void 0?b:void 0})});if(o)throw o;return Ts()&&!(!((a=t.options)===null||a===void 0)&&a.skipBrowserRedirect)&&window.location.assign(i==null?void 0:i.url),{data:{provider:t.provider,url:i==null?void 0:i.url},error:null}}catch(i){if(Oe(i))return{data:{provider:t.provider,url:null},error:i};throw i}}async unlinkIdentity(t){try{return await this._useSession(async a=>{var i,o;const{data:c,error:u}=a;if(u)throw u;return await Ge(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(o=(i=c.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0})})}catch(a){if(Oe(a))return{data:null,error:a};throw a}}async _refreshAccessToken(t){const a=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{const i=Date.now();return await BT(async o=>(await VT(o*200),this._debug(a,"refreshing attempt",o),await Ge(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Nl})),(o,c,u)=>u&&u.error&&hu(u.error)&&Date.now()+(o+1)*200-i<zi)}catch(i){if(this._debug(a,"error",i),Oe(i))return{data:{session:null,user:null},error:i};throw i}finally{this._debug(a,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,a){const i=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:a.redirectTo,scopes:a.scopes,queryParams:a.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",a,"url",i),Ts()&&!a.skipBrowserRedirect&&window.location.assign(i),{data:{provider:t,url:i},error:null}}async _recoverAndRefresh(){var t;const a="#_recoverAndRefresh()";this._debug(a,"begin");try{const i=await go(this.storage,this.storageKey);if(this._debug(a,"session from storage",i),!this._isValidSession(i)){this._debug(a,"session is not valid"),i!==null&&await this._removeSession();return}const o=Math.round(Date.now()/1e3),c=((t=i.expires_at)!==null&&t!==void 0?t:1/0)<o+og;if(this._debug(a,`session has${c?"":" not"} expired with margin of ${og}s`),c){if(this.autoRefreshToken&&i.refresh_token){const{error:u}=await this._callRefreshToken(i.refresh_token);u&&(console.error(u),hu(u)||(this._debug(a,"refresh failed with a non-retryable error, removing the session",u),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(a,"error",i),console.error(i);return}finally{this._debug(a,"end")}}async _callRefreshToken(t){var a,i;if(!t)throw new ya;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new Go;const{data:c,error:u}=await this._refreshAccessToken(t);if(u)throw u;if(!c.session)throw new ya;await this._saveSession(c.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",c.session);const x={session:c.session,error:null};return this.refreshingDeferred.resolve(x),x}catch(c){if(this._debug(o,"error",c),Oe(c)){const u={session:null,error:c};return hu(c)||(await this._removeSession(),await this._notifyAllSubscribers("SIGNED_OUT",null)),(a=this.refreshingDeferred)===null||a===void 0||a.resolve(u),u}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(c),c}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(t,a,i=!0){const o=`#_notifyAllSubscribers(${t})`;this._debug(o,"begin",a,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:t,session:a});const c=[],u=Array.from(this.stateChangeEmitters.values()).map(async x=>{try{await x.callback(t,a)}catch(h){c.push(h)}});if(await Promise.all(u),c.length>0){for(let x=0;x<c.length;x+=1)console.error(c[x]);throw c[0]}}finally{this._debug(o,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),await vl(this.storage,this.storageKey,t)}async _removeSession(){this._debug("#_removeSession()"),await uu(this.storage,this.storageKey)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Ts()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(a){console.error("removing visibilitychange callback failed",a)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),zi);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async a=>{const{data:{session:i}}=a;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((i.expires_at*1e3-t)/zi);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${zi}ms, refresh threshold is ${dg} ticks`),o<=dg&&await this._callRefreshToken(i.refresh_token)})}catch(a){console.error("Auto refresh tick failed with error. This is likely a transient error.",a)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof kb)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ts()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const a=`#_onVisibilityChanged(${t})`;this._debug(a,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(a,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,a,i){const o=[`provider=${encodeURIComponent(a)}`];if(i!=null&&i.redirectTo&&o.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i!=null&&i.scopes&&o.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const c=ba();await vl(this.storage,`${this.storageKey}-code-verifier`,c);const u=await va(c),x=c===u?"plain":"s256";this._debug("PKCE","code verifier",`${c.substring(0,5)}...`,"code challenge",u,"method",x);const h=new URLSearchParams({code_challenge:`${encodeURIComponent(u)}`,code_challenge_method:`${encodeURIComponent(x)}`});o.push(h.toString())}if(i!=null&&i.queryParams){const c=new URLSearchParams(i.queryParams);o.push(c.toString())}return i!=null&&i.skipBrowserRedirect&&o.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${t}?${o.join("&")}`}async _unenroll(t){try{return await this._useSession(async a=>{var i;const{data:o,error:c}=a;return c?{data:null,error:c}:await Ge(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(i=o==null?void 0:o.session)===null||i===void 0?void 0:i.access_token})})}catch(a){if(Oe(a))return{data:null,error:a};throw a}}async _enroll(t){try{return await this._useSession(async a=>{var i,o;const{data:c,error:u}=a;if(u)return{data:null,error:u};const{data:x,error:h}=await Ge(this.fetch,"POST",`${this.url}/factors`,{body:{friendly_name:t.friendlyName,factor_type:t.factorType,issuer:t.issuer},headers:this.headers,jwt:(i=c==null?void 0:c.session)===null||i===void 0?void 0:i.access_token});return h?{data:null,error:h}:(!((o=x==null?void 0:x.totp)===null||o===void 0)&&o.qr_code&&(x.totp.qr_code=`data:image/svg+xml;utf-8,${x.totp.qr_code}`),{data:x,error:null})})}catch(a){if(Oe(a))return{data:null,error:a};throw a}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async a=>{var i;const{data:o,error:c}=a;if(c)return{data:null,error:c};const{data:u,error:x}=await Ge(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(i=o==null?void 0:o.session)===null||i===void 0?void 0:i.access_token});return x?{data:null,error:x}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),{data:u,error:x})})}catch(a){if(Oe(a))return{data:null,error:a};throw a}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async a=>{var i;const{data:o,error:c}=a;return c?{data:null,error:c}:await Ge(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{headers:this.headers,jwt:(i=o==null?void 0:o.session)===null||i===void 0?void 0:i.access_token})})}catch(a){if(Oe(a))return{data:null,error:a};throw a}})}async _challengeAndVerify(t){const{data:a,error:i}=await this._challenge({factorId:t.factorId});return i?{data:null,error:i}:await this._verify({factorId:t.factorId,challengeId:a.id,code:t.code})}async _listFactors(){const{data:{user:t},error:a}=await this.getUser();if(a)return{data:null,error:a};const i=(t==null?void 0:t.factors)||[],o=i.filter(c=>c.factor_type==="totp"&&c.status==="verified");return{data:{all:i,totp:o},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var a,i;const{data:{session:o},error:c}=t;if(c)return{data:null,error:c};if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const u=this._decodeJWT(o.access_token);let x=null;u.aal&&(x=u.aal);let h=x;((i=(a=o.user.factors)===null||a===void 0?void 0:a.filter(y=>y.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(h="aal2");const b=u.amr||[];return{data:{currentLevel:x,nextLevel:h,currentAuthenticationMethods:b},error:null}}))}}Ji.nextInstanceID=0;class pk extends Ji{constructor(t){super(t)}}var gk=function(n,t,a,i){function o(c){return c instanceof a?c:new a(function(u){u(c)})}return new(a||(a=Promise))(function(c,u){function x(b){try{p(i.next(b))}catch(y){u(y)}}function h(b){try{p(i.throw(b))}catch(y){u(y)}}function p(b){b.done?c(b.value):o(b.value).then(x,h)}p((i=i.apply(n,t||[])).next())})};class bk{constructor(t,a,i){var o,c,u,x,h,p,b,y;if(this.supabaseUrl=t,this.supabaseKey=a,!t)throw new Error("supabaseUrl is required.");if(!a)throw new Error("supabaseKey is required.");const N=PT(t);this.realtimeUrl=`${N}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${N}/auth/v1`,this.storageUrl=`${N}/storage/v1`,this.functionsUrl=`${N}/functions/v1`;const w=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,A={db:MT,realtime:DT,auth:Object.assign(Object.assign({},RT),{storageKey:w}),global:AT},I=qT(i??{},A);this.storageKey=(c=(o=I.auth)===null||o===void 0?void 0:o.storageKey)!==null&&c!==void 0?c:"",this.headers=(x=(u=I.global)===null||u===void 0?void 0:u.headers)!==null&&x!==void 0?x:{},this.auth=this._initSupabaseAuthClient((h=I.auth)!==null&&h!==void 0?h:{},this.headers,(p=I.global)===null||p===void 0?void 0:p.fetch),this.fetch=UT(a,this._getAccessToken.bind(this),(b=I.global)===null||b===void 0?void 0:b.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},I.realtime)),this.rest=new of(`${N}/rest/v1`,{headers:this.headers,schema:(y=I.db)===null||y===void 0?void 0:y.schema,fetch:this.fetch}),this._listenForAuthEvents()}get functions(){return new VE(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new ET(this.storageUrl,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,a={},i={}){return this.rest.rpc(t,a,i)}channel(t,a={config:{}}){return this.realtime.channel(t,a)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,a;return gk(this,void 0,void 0,function*(){const{data:i}=yield this.auth.getSession();return(a=(t=i.session)===null||t===void 0?void 0:t.access_token)!==null&&a!==void 0?a:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:a,detectSessionInUrl:i,storage:o,storageKey:c,flowType:u,debug:x},h,p){const b={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new pk({url:this.authUrl,headers:Object.assign(Object.assign({},b),h),storageKey:c,autoRefreshToken:t,persistSession:a,detectSessionInUrl:i,storage:o,flowType:u,debug:x,fetch:p})}_initRealtimeClient(t){return new mT(this.realtimeUrl,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((a,i)=>{this._handleTokenChanged(a,"CLIENT",i==null?void 0:i.access_token)})}_handleTokenChanged(t,a,i){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==i?(this.realtime.setAuth(i??null),this.changedAccessToken=i):t==="SIGNED_OUT"&&(this.realtime.setAuth(this.supabaseKey),a=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const vk=(n,t,a)=>new bk(n,t,a);var Ab={};const mu=Ab.VITE_SUPABASE_URL||"https://ujcnhgjuttusqavhxjnb.supabase.co",yo=Ab.VITE_SUPABASE_ANON_KEY||"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVqY25oZ2p1dHR1c3Fhdmh4am5iIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ5NDY4NDksImV4cCI6MjA4MDUyMjg0OX0.jejG8c2HTTIMd53shlX5mmgNAF9D8H98Z0x5VYeH22c";let xu=null;const yk=()=>{if(!(mu!==""&&!mu.includes("_")&&yo&&yo!==""&&!yo.includes("_")))return console.warn("Supabase is not configured. Auth will be disabled."),null;try{return xu||(xu=vk(mu,yo,{auth:{persistSession:!0,autoRefreshToken:!0}})),xu}catch(t){return console.error("Failed to initialize Supabase client:",t),null}},as=yk(),zo=()=>!!as,No=async()=>{var n;if(!as)return null;try{const{data:{user:t}}=await as.auth.getUser();return(n=t==null?void 0:t.user_metadata)!=null&&n.script_url?t.user_metadata.script_url:null}catch(t){return console.error("Failed to fetch script URL",t),null}},Nk=async n=>{if(as)try{await as.auth.updateUser({data:{script_url:n}})}catch(t){console.error("Failed to save script URL",t)}},jk=({isOpen:n,onClose:t})=>{const[a,i]=R.useState("steps"),[o,c]=R.useState(0),[u,x]=R.useState(!1),h="https://www.youtube.com/embed/kJJvZm5hKX4";if(!n)return null;const p=`
function doGet(e) {
  return handleRequest(e);
}

function doPost(e) {
  return handleRequest(e);
}

function handleRequest(e) {
  const lock = LockService.getScriptLock();
  lock.tryLock(10000);

  try {
    const sheet = SpreadsheetApp.getActiveSpreadsheet().getActiveSheet();
    const action = e.parameter.action || (e.postData ? JSON.parse(e.postData.contents).action : 'READ');
    
    if (action === 'SYNC') {
      const payload = JSON.parse(e.postData.contents);
      const data = payload.data; //    
      
      if (!data || !data.length) return response({status: 'empty'});

      //   
      sheet.clear();
      
      //   
      sheet.getRange(1, 1, data.length, data[0].length).setValues(data);
      
      //   ()
      sheet.getRange(1, 1, 1, data[0].length).setFontWeight("bold").setBackground("#f3f4f6");
      
      return response({status: 'success'});
    } 
    else if (action === 'READ') {
      const data = sheet.getDataRange().getValues();
      return response(data); //   
    }
    
  } catch (error) {
    return response({status: 'error', message: error.toString()});
  } finally {
    lock.releaseLock();
  }
}

function response(data) {
  return ContentService.createTextOutput(JSON.stringify(data))
    .setMimeType(ContentService.MimeType.JSON);
}
`,b=()=>{navigator.clipboard.writeText(p),x(!0),setTimeout(()=>x(!1),2e3)},y=[{title:"1.   Google Sheet",icon:e.jsx(sN,{size:24}),content:e.jsxs("div",{className:"space-y-4 text-right",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"         ."}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200 text-sm space-y-3",children:[e.jsxs("p",{children:["1.      : ",e.jsxs("a",{href:"https://sheets.new",target:"_blank",rel:"noreferrer",className:"text-blue-600 underline font-bold inline-flex items-center gap-1",children:["sheets.new ",e.jsx(eN,{size:12})]})]}),e.jsxs("p",{children:["2.      : ",e.jsx("span",{className:"font-bold text-gray-800",children:'"  2024"'}),"."]}),e.jsxs("p",{children:["3.      ",e.jsx("span",{className:"font-bold",children:" (Extensions)"}),"   ",e.jsx("span",{className:"font-bold",children:"  Google (Apps Script)"}),"."]})]})]})},{title:"2.    ()",icon:e.jsx(px,{size:24}),content:e.jsxs("div",{className:"space-y-4 text-right",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"      .  :"}),e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"bg-gray-900 text-gray-300 p-4 rounded-lg text-left text-xs font-mono h-40 overflow-y-auto custom-scrollbar",dir:"ltr",children:e.jsx("pre",{children:p})}),e.jsxs("button",{onClick:b,className:"absolute top-2 right-2 bg-white text-gray-800 px-3 py-1.5 rounded-md text-xs font-bold shadow-sm hover:bg-gray-100 flex items-center gap-1 transition-all",children:[u?e.jsx(xx,{size:14,className:"text-green-600"}):e.jsx(px,{size:14}),u?" ":" "]})]}),e.jsxs("div",{className:"bg-orange-50 p-3 rounded border border-orange-200 text-xs text-orange-800 font-bold space-y-1",children:[e.jsx("p",{children:"1.      ."}),e.jsx("p",{children:"2.    ."}),e.jsx("p",{children:"3.     (Save)  ."})]})]})},{title:"3.   (Deploy)",icon:e.jsx(fN,{size:24}),content:e.jsxs("div",{className:"space-y-4 text-right",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"     ."}),e.jsxs("div",{className:"bg-indigo-50 p-4 rounded-lg border border-indigo-200 text-sm space-y-2",children:[e.jsxs("p",{children:["1.     ",e.jsx("span",{className:"font-bold text-blue-600",children:" (Deploy)"}),"   ."]}),e.jsxs("p",{children:["2.  ",e.jsx("span",{className:"font-bold",children:"  (New deployment)"}),"."]}),e.jsxs("p",{children:["3.    (Select type)  ",e.jsx("span",{className:"font-bold",children:"  (Web app)"}),"."]}),e.jsxs("div",{className:"bg-white p-2 rounded border border-indigo-100 mt-2",children:[e.jsx("p",{className:"font-bold text-indigo-700 mb-1",children:"  :"}),e.jsx("p",{children:" :    (: v1)"}),e.jsxs("p",{children:["   (Execute as): ",e.jsx("span",{className:"font-bold",children:"Me ()"})]}),e.jsxs("p",{children:["    (Who has access): ",e.jsx("span",{className:"bg-yellow-200 px-1 rounded font-bold text-red-600",children:"  (Anyone)"})]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:'*  " "          .'}),e.jsxs("p",{children:["4.  ",e.jsx("span",{className:"font-bold",children:" (Deploy)"}),"."]})]})]})},{title:"4.   ",icon:e.jsx(ws,{size:24}),content:e.jsxs("div",{className:"space-y-4 text-right",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"       (Authorize access)."}),e.jsxs("div",{className:"bg-green-50 p-3 rounded border border-green-200 text-sm space-y-2",children:[e.jsx("p",{children:"1.    ."}),e.jsxs("p",{className:"text-xs text-gray-500 bg-white p-1 rounded",children:['*    "Google hasnt verified this app".  ',e.jsx("span",{className:"font-bold",children:"Advanced"}),"  ",e.jsx("span",{className:"font-bold underline",children:"Go to ... (unsafe)"}),".     ."]}),e.jsxs("p",{children:["2.       ",e.jsx("span",{className:"font-bold",children:"Web app URL"}),"."]}),e.jsx("p",{children:"3.       ."})]}),e.jsx("div",{className:"text-center mt-4",children:e.jsx("span",{className:"text-xs text-gray-400",children:" !"})})]})}];return e.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/70 backdrop-blur-sm animate-in fade-in duration-200",dir:"rtl",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-lg w-full overflow-hidden flex flex-col max-h-[90vh]",children:[e.jsxs("div",{className:"bg-gray-50 p-4 border-b flex justify-between items-center shrink-0",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"font-bold text-gray-800 text-lg",children:"   "}),e.jsx("p",{className:"text-xs text-gray-500",children:"    "})]}),e.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 bg-white p-1 rounded-full border hover:bg-gray-100 transition-colors",children:e.jsx(ut,{size:20})})]}),e.jsxs("div",{className:"flex p-1 bg-gray-100 mx-4 mt-4 rounded-lg shrink-0",children:[e.jsxs("button",{onClick:()=>i("steps"),className:`flex-1 flex items-center justify-center gap-2 py-2 text-sm font-bold rounded-md transition-all ${a==="steps"?"bg-white text-blue-700 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:[e.jsx(UN,{size:16})," "]}),e.jsxs("button",{onClick:()=>i("video"),className:`flex-1 flex items-center justify-center gap-2 py-2 text-sm font-bold rounded-md transition-all ${a==="video"?"bg-white text-red-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:[e.jsx(d2,{size:16})," "]})]}),e.jsx("div",{className:"p-6 overflow-y-auto flex-1 custom-scrollbar",children:a==="steps"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"text-blue-600 bg-blue-50 p-3 rounded-xl border border-blue-100 shadow-sm",children:y[o].icon}),e.jsxs("div",{children:[e.jsxs("span",{className:"text-[10px] font-bold text-blue-600 uppercase tracking-wider bg-blue-50 px-2 py-0.5 rounded-full border border-blue-100",children:[" ",o+1,"  ",y.length]}),e.jsx("h3",{className:"text-lg font-bold text-gray-900 mt-1",children:y[o].title})]})]}),e.jsx("div",{className:"animate-in slide-in-from-left-4 duration-300",children:y[o].content})]}):e.jsxs("div",{className:"flex flex-col h-full animate-in fade-in slide-in-from-right-4 duration-300",children:[e.jsx("div",{className:"w-full aspect-video bg-black rounded-xl overflow-hidden shadow-lg border border-gray-200 relative group",children:h.includes("placeholder")?e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-white bg-slate-800",children:[e.jsx(m2,{size:48,className:"text-red-500 mb-4 opacity-80"}),e.jsx("p",{className:"font-bold text-lg",children:"   "}),e.jsxs("p",{className:"text-xs text-gray-400 mt-2 text-center max-w-xs leading-relaxed",children:["         .",e.jsx("br",{}),'    ( " ")   .']})]}):e.jsx("iframe",{src:h,title:"  Google Sheets",className:"w-full h-full",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}),e.jsxs("div",{className:"mt-6 text-center space-y-2",children:[e.jsx("h4",{className:"font-bold text-gray-800",children:"     "}),e.jsx("p",{className:"text-xs text-gray-500 max-w-xs mx-auto",children:"             ."})]})]})}),a==="steps"&&e.jsxs("div",{className:"p-4 border-t bg-gray-50 flex justify-between items-center shrink-0",children:[e.jsxs("button",{onClick:()=>c(Math.max(0,o-1)),disabled:o===0,className:"flex items-center gap-1 px-4 py-2 text-sm font-medium text-gray-600 hover:text-gray-900 disabled:opacity-30 disabled:cursor-not-allowed transition-colors",children:[e.jsx(Ps,{size:16}),e.jsx("span",{children:""})]}),e.jsx("div",{className:"flex gap-1.5",children:y.map((N,w)=>e.jsx("div",{className:`h-1.5 rounded-full transition-all duration-300 ${w===o?"bg-blue-600 w-6":"bg-gray-300 w-1.5"}`},w))}),o<y.length-1?e.jsxs("button",{onClick:()=>c(Math.min(y.length-1,o+1)),className:"flex items-center gap-1 px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700 shadow-sm transition-all hover:translate-x-[-2px]",children:[e.jsx("span",{children:""}),e.jsx(kg,{size:16})]}):e.jsxs("button",{onClick:t,className:"flex items-center gap-2 px-5 py-2 bg-gray-900 text-white rounded-lg text-sm font-medium hover:bg-black shadow-lg shadow-gray-200 transition-all hover:scale-105",children:[e.jsx("span",{children:"  "}),e.jsx(xx,{size:16})]})]})]})})},wk=({teachers:n,reportsMap:t,tenureReportsMap:a,onRestore:i,currentReport:o,isConnected:c,onConnectionChange:u,isAutoSync:x,onAutoSyncChange:h})=>{const[p,b]=R.useState(!1),[y,N]=R.useState("idle"),[w,A]=R.useState(""),[I,H]=R.useState(!1),[G,F]=R.useState(""),O=R.useRef(null);R.useEffect(()=>{const P=localStorage.getItem("mufattish_script_url");P&&(F(P),u(!0))},[]);const V=()=>{const P=!x;h(P),localStorage.setItem("mufattish_auto_sync",String(P))},X=async()=>{if(!G.includes("script.google.com")){N("error"),A("  .     script.google.com");return}localStorage.setItem("mufattish_script_url",G),zo()&&Nk(G),u(!0),N("success"),A("   .")},ee=async()=>{if(!G){N("error"),A("    .");return}if(n.length===0){N("error"),A("    .      .");return}b(!0),A("    Google Sheet...");try{const P=_u(n,o,t);await Iu(G,P),N("success"),A("    !")}catch(P){console.error(P),N("error"),A(` : ${P.message}`)}finally{b(!1)}},Q=async()=>{if(G){b(!0),A("    Google Sheet...");try{const P=await vb(G);if(!Array.isArray(P))throw new Error("    ");const{teachers:ie,reportsMap:le}=Hg(P);ie.length===0?(A("     ."),N("success")):(i(ie,le,a),N("success"),A(`  ${ie.length}  !`))}catch(P){console.error(P),N("error"),A(` : ${P.message}`)}finally{b(!1)}}},se=()=>{const P={version:"1.0",date:new Date().toISOString(),teachers:n,reportsMap:t,tenureReportsMap:a,settings:{inspectorName:localStorage.getItem("mufattish_inspector_name"),signature:localStorage.getItem("mufattish_signature"),isGold:localStorage.getItem("mufattish_is_gold")==="true",scriptUrl:localStorage.getItem("mufattish_script_url")}},ie=new Blob([JSON.stringify(P,null,2)],{type:"application/json"}),le=URL.createObjectURL(ie),Z=document.createElement("a");Z.href=le,Z.download=`mufattish_backup_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(Z),Z.click(),document.body.removeChild(Z)},ne=async P=>{var Z;const ie=(Z=P.target.files)==null?void 0:Z[0];if(!ie)return;const le=new FileReader;le.onload=async q=>{var Y;try{const T=JSON.parse((Y=q.target)==null?void 0:Y.result);if(T.teachers&&window.confirm("    / .")){const E=T.teachers.map(U=>({...U,birthDate:lt(U.birthDate),recruitmentDate:lt(U.recruitmentDate),degreeDate:lt(U.degreeDate),currentRankDate:lt(U.currentRankDate),echelonDate:lt(U.echelonDate),lastInspectionDate:lt(U.lastInspectionDate),tenureDate:lt(U.tenureDate)})),L={};T.reportsMap&&Object.entries(T.reportsMap).forEach(([U,$])=>{L[U]={...$,inspectionDate:lt($.inspectionDate),legacyData:$.legacyData?{...$.legacyData,trainingDate:lt($.legacyData.trainingDate),graduationDate:lt($.legacyData.graduationDate)}:void 0}}),i(E,L,T.tenureReportsMap||{}),T.settings&&(T.settings.scriptUrl&&(F(T.settings.scriptUrl),localStorage.setItem("mufattish_script_url",T.settings.scriptUrl),u(!0)),T.settings.inspectorName&&localStorage.setItem("mufattish_inspector_name",T.settings.inspectorName)),N("success"),A("     .")}}catch(T){console.error(T),N("error"),A("  .")}},le.readAsText(ie),O.current&&(O.current.value="")};return e.jsxs("div",{className:"p-8 max-w-5xl mx-auto animate-in fade-in duration-500",children:[e.jsx(jk,{isOpen:I,onClose:()=>H(!1)}),e.jsxs("div",{className:"text-center mb-10",children:[e.jsx("div",{className:"bg-gradient-to-br from-indigo-500 to-purple-600 w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg text-white",children:e.jsx(Fu,{size:40})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2 font-serif",children:"  "}),e.jsx("p",{className:"text-gray-500 max-w-lg mx-auto",children:"   Google Sheet            ."})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden relative group",children:[e.jsxs("div",{className:"bg-green-50 p-4 border-b border-green-100 flex items-center justify-between",children:[e.jsxs("h2",{className:"font-bold text-green-900 flex items-center gap-2",children:[e.jsx(F1,{size:20}),"Google Sheets ( )"]}),e.jsx("div",{className:`w-3 h-3 rounded-full ${c?"bg-green-500 animate-pulse":"bg-gray-300"}`,title:c?"":" "})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-4 min-h-[40px]",children:"  Google Sheet      .       ."}),c?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-green-50 p-3 rounded-lg border border-green-100 flex items-center gap-2 text-green-800 text-sm",children:[e.jsx(_t,{size:16}),e.jsx("span",{children:"   ."})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:ee,disabled:p,className:"flex-1 bg-green-600 text-white py-2.5 rounded-xl font-bold text-sm flex items-center justify-center gap-2 hover:bg-green-700 disabled:opacity-50",children:[e.jsx(wu,{size:16}),"  ()"]}),e.jsxs("button",{onClick:Q,disabled:p,className:"flex-1 bg-blue-600 text-white py-2.5 rounded-xl font-bold text-sm flex items-center justify-center gap-2 hover:bg-blue-700 disabled:opacity-50",children:[e.jsx(Bi,{size:16,className:p?"animate-spin":""}),"  ()"]})]}),e.jsxs("div",{className:`flex items-center justify-between p-3 rounded-xl border cursor-pointer transition-colors ${x?"bg-green-50 border-green-200":"bg-gray-50 border-gray-200"}`,onClick:V,children:[e.jsx("span",{className:"text-sm font-bold text-gray-700",children:"  (Auto Save)"}),e.jsx("div",{className:`w-10 h-5 rounded-full p-0.5 transition-colors flex ${x?"bg-green-500 justify-end":"bg-gray-300 justify-start"}`,children:e.jsx("div",{className:"w-4 h-4 bg-white rounded-full shadow-sm"})})]}),e.jsx("button",{onClick:()=>{F(""),u(!1),localStorage.removeItem("mufattish_script_url")},className:"text-xs text-red-400 hover:text-red-600 underline w-full text-center",children:"  /  "})]}):e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:()=>H(!0),className:"w-full bg-blue-50 text-blue-700 py-3 rounded-xl font-bold text-sm border border-blue-100 hover:bg-blue-100 transition-colors flex items-center justify-center gap-2",children:[e.jsx(Lo,{size:16}),"    "]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{placeholder:"  Web App URL ...",className:"w-full p-3 pl-10 border border-gray-300 rounded-xl text-sm focus:ring-2 focus:ring-green-500 outline-none",value:G,onChange:P=>F(P.target.value)}),e.jsx(zN,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:16})]}),e.jsxs("button",{onClick:X,disabled:p,className:"w-full bg-green-600 text-white py-3 rounded-xl font-bold hover:bg-green-700 transition-colors flex items-center justify-center gap-2 disabled:opacity-70",children:[p?e.jsx(Bi,{className:"animate-spin",size:18}):e.jsx(Bu,{size:18}),"  "]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden relative group",children:[e.jsx("div",{className:"bg-purple-50 p-4 border-b border-purple-100 flex items-center justify-between",children:e.jsxs("h2",{className:"font-bold text-purple-900 flex items-center gap-2",children:[e.jsx(xN,{size:20}),"   (JSON)"]})}),e.jsxs("div",{className:"p-6",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-6 min-h-[40px]",children:"          (   ).        ."}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("button",{onClick:se,className:"w-full bg-purple-600 text-white py-3 rounded-xl font-bold flex items-center justify-center gap-2 hover:bg-purple-700 transition-colors shadow-sm",children:[e.jsx(Ju,{size:20}),"   (Backup)"]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"file",accept:".json",ref:O,onChange:ne,className:"hidden"}),e.jsxs("button",{onClick:()=>{var P;return(P=O.current)==null?void 0:P.click()},className:"w-full bg-white border-2 border-purple-100 text-purple-700 py-3 rounded-xl font-bold flex items-center justify-center gap-2 hover:bg-purple-50 transition-colors",children:[e.jsx(wu,{size:20})," /  "]})]})]})]})]})]}),y!=="idle"&&e.jsxs("div",{className:`mt-8 p-4 rounded-xl flex items-start gap-3 animate-in slide-in-from-bottom-2 
                    ${y==="success"?"bg-green-50 text-green-800 border border-green-200":"bg-red-50 text-red-800 border border-red-200"}`,children:[y==="success"?e.jsx(_t,{size:24,className:"shrink-0 mt-1"}):e.jsx(Ia,{size:24,className:"shrink-0 mt-1"}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"font-bold",children:w})})]})]})},_k=({teachers:n,reportsMap:t,onNavigateToPromotions:a,fullTeacherCount:i,selectedSchool:o})=>{const[c,u]=R.useState("modern"),x=new Date().getFullYear(),h=n.length,p=R.useMemo(()=>h===0?0:(n.reduce((Y,T)=>Y+(T.lastMark||0),0)/h).toFixed(2),[n]),b=R.useMemo(()=>{const q=new Set;return Object.values(t).forEach(Y=>{Y.school&&q.add(Y.school.trim())}),q.size},[t]),y=R.useMemo(()=>{const q={titulaire:0,contractuel:0,stagiere:0};return n.forEach(Y=>{(Y.status==="titulaire"||Y.status==="contractuel"||Y.status==="stagiere")&&q[Y.status]++}),q},[n]),N=R.useMemo(()=>{const q={count:0,preparation:{good:0,medium:0,weak:0},objectives:{full:0,partial:0,none:0},registers:{monitored:0,notMonitored:0},board:{organized:0,random:0},notebooks:{good:0,medium:0,bad:0},weakPreparationCount:0,weakRegistersCount:0,weakNotebooksCount:0,weakObjectivesCount:0,badBoardWorkCount:0,weakProgressionCount:0};Object.values(t).forEach(E=>{var L,U;if(n.some($=>$.id===E.teacherId)&&E.reportModel==="legacy"&&E.legacyData){q.count++;const $=E.legacyData;$.preparationValue===""||$.preparationValue.includes("")?q.preparation.good++:$.preparationValue===""||$.preparationValue===""?q.preparation.medium++:(q.preparation.weak++,q.weakPreparationCount++),$.objectivesAchieved===" "?q.objectives.full++:$.objectivesAchieved.includes("")||$.objectivesAchieved.includes("")?q.objectives.partial++:(q.objectives.none++,q.weakObjectivesCount++),(L=$.registersMonitored)!=null&&L.includes("")?q.registers.monitored++:(q.registers.notMonitored++,q.weakRegistersCount++),(U=$.boardWork)!=null&&U.includes("")?q.board.organized++:(q.board.random++,q.badBoardWorkCount++),$.notebooksCare===""||$.notebooksCare.includes("")?q.notebooks.good++:$.notebooksCare===""||$.notebooksCare===""?q.notebooks.medium++:(q.notebooks.bad++,q.weakNotebooksCount++),$.progression&&($.progression.includes("")||$.progression.includes(""))&&q.weakProgressionCount++}});const Y=[],T=Math.max(1,Math.round(q.count*.2));return q.weakPreparationCount>=T&&Y.push({title:"   ",priority:"",count:q.weakPreparationCount}),q.weakObjectivesCount>=T&&Y.push({title:"   ",priority:"",count:q.weakObjectivesCount}),q.badBoardWorkCount>=T&&Y.push({title:"   ",priority:"",count:q.badBoardWorkCount}),q.weakNotebooksCount>=T&&Y.push({title:"    ",priority:"",count:q.weakNotebooksCount}),q.weakRegistersCount>=T&&Y.push({title:"   ",priority:"",count:q.weakRegistersCount}),q.weakProgressionCount>=T&&Y.push({title:"   ",priority:"",count:q.weakProgressionCount}),{stats:q,suggestions:Y}},[t,n]),w=R.useMemo(()=>{const q={};n.forEach(T=>{const E=t[T.id];if(E&&E.level){const L=E.level.trim(),U=E.studentCount||0;q[L]=(q[L]||0)+U}});const Y=[" "," "," "," "," "," "];return Object.entries(q).map(([T,E])=>({name:T,count:E})).sort((T,E)=>{const L=Y.indexOf(T.name),U=Y.indexOf(E.name);return(L===-1?99:L)-(U===-1?99:U)})},[n,t]),A=R.useMemo(()=>Math.max(...w.map(q=>q.count),1),[w]),I=R.useMemo(()=>{const q={};return n.forEach(Y=>{const T=Y.degree||" ";q[T]=(q[T]||0)+1}),Object.entries(q).map(([Y,T])=>({name:Y,count:T})).sort((Y,T)=>T.count-Y.count).slice(0,6)},[n]),H=R.useMemo(()=>Math.max(...I.map(q=>q.count),1),[I]),G=R.useMemo(()=>{const q=[{label:"  5  ()",min:0,max:5,count:0,color:"bg-blue-400"},{label:"5 - 15  ()",min:5,max:15,count:0,color:"bg-indigo-500"},{label:"15 - 25  ()",min:15,max:25,count:0,color:"bg-purple-500"},{label:"+25  ()",min:25,max:100,count:0,color:"bg-amber-500"}];return n.forEach(Y=>{if(Y.recruitmentDate){const T=new Date(Y.recruitmentDate),E=(new Date().getTime()-T.getTime())/(1e3*60*60*24*365.25),L=q.find(U=>E>=U.min&&E<U.max);L&&L.count++}}),q},[n]),F=R.useMemo(()=>{const q={count:0,tech:0,control:0,pedagogy:0,planning:0,evaluation:0},Y={count:0,tech:0,control:0,pedagogy:0,planning:0,evaluation:0},T=["",""," "],E=["","",""," "],L=[" "," "],U=[""," "," "],$=[""," "," "];n.forEach(D=>{const j=t[D.id];if(!j||!D.recruitmentDate||j.reportModel==="legacy")return;const S=new Date(D.recruitmentDate),W=(new Date().getTime()-S.getTime())/(1e3*60*60*24*365.25)<=10?q:Y,ue=J=>{let be=0,Ee=0;return j.observations.forEach(Re=>{J.some(_e=>Re.category.includes(_e)||Re.criteria.includes(_e))&&Re.score!==null&&(be+=Re.score,Ee+=2)}),Ee>0?be/Ee*100:0};W.count++,W.tech+=ue(T),W.control+=ue(E),W.pedagogy+=ue(L),W.planning+=ue(U),W.evaluation+=ue($)});const C=D=>{D.count!==0&&(D.tech/=D.count,D.control/=D.count,D.pedagogy/=D.count,D.planning/=D.count,D.evaluation/=D.count)};return C(q),C(Y),{juniors:q,seniors:Y}},[n,t]),O=R.useMemo(()=>{const q=[{label:" ",min:0,max:9.99,count:0,color:"bg-red-400"},{label:"",min:10,max:11.99,count:0,color:"bg-orange-400"},{label:"",min:12,max:13.99,count:0,color:"bg-yellow-400"},{label:" ",min:14,max:15.99,count:0,color:"bg-blue-400"},{label:"",min:16,max:20,count:0,color:"bg-emerald-500"}];n.forEach(T=>{const E=T.lastMark||0,L=q.find(U=>E>=U.min&&E<=U.max);L&&L.count++});const Y=Math.max(...q.map(T=>T.count))||1;return{ranges:q,maxCount:Y}},[n]),V=R.useMemo(()=>{const q=["","",""," ","",""," "," ",""],Y={};return q.forEach(T=>Y[T]={sum:0,count:0}),n.forEach(T=>{const E=t[T.id];E&&E.reportModel!=="legacy"&&E.observations.forEach(L=>{let U="";L.category===""?U="":L.category===""?U="":L.category===""?U="":L.category===" "?U=" ":L.category.includes("")?U="":L.category.includes("")?U="":L.category===" "?U=" ":L.category===" "?U=" ":L.category.includes("")&&(U=""),U&&L.score!==null&&(Y[U].sum+=L.score,Y[U].count+=1)})}),q.map(T=>{const E=Y[T],L=E.count>0?E.sum/E.count/2*100:0;return{domain:T,value:L}})},[n,t]),X=R.useMemo(()=>{const q={};return n.forEach(Y=>{const T=t[Y.id];T&&T.reportModel!=="legacy"&&T.observations.forEach(E=>{E.score!==null&&(q[E.criteria]||(q[E.criteria]={sum:0,count:0,category:E.category}),q[E.criteria].sum+=E.score,q[E.criteria].count+=1)})}),Object.entries(q).map(([Y,T])=>({name:Y,category:T.category,avg:T.sum/T.count/2*100})).sort((Y,T)=>Y.avg-T.avg).slice(0,5)},[n,t]),ee=R.useMemo(()=>{const q={};return Object.values(t).forEach(Y=>{if(Y.school&&Y.finalMark){const T=Y.school.trim();q[T]||(q[T]={totalMark:0,count:0}),q[T].totalMark+=Y.finalMark,q[T].count+=1}}),Object.entries(q).map(([Y,T])=>({name:Y,avg:T.totalMark/T.count,count:T.count})).sort((Y,T)=>T.avg-Y.avg)},[t]),Q=R.useMemo(()=>{if(!o)return null;const q=ee.findIndex(Y=>Y.name===o);return q===-1?null:{rank:q+1,total:ee.length,data:ee[q]}},[o,ee]),se=R.useMemo(()=>n.filter(q=>{if(q.status!=="titulaire"||!q.echelonDate||!q.echelon)return!1;const Y=new Date(q.echelonDate);if(isNaN(Y.getTime()))return!1;const T=new Date(Y);T.setFullYear(Y.getFullYear()+2);const E=new Date(x,11,31);if(T>E)return!1;const U=13+parseInt(q.echelon)*.5;if(q.lastMark>=U)return!1;const $=t[q.id];if($){const C=$.inspectionDate&&$.inspectionDate.trim()!=="",D=$.finalMark!==void 0&&$.finalMark>0;if(C&&D)return!1}return!0}).length,[n,x,t]),ne=h||1,P=y.titulaire/ne*100,ie=P+y.contractuel/ne*100,le=`conic-gradient(#10b981 0% ${P}%, #f97316 ${P}% ${ie}%, #3b82f6 ${ie}% 100%)`,Z=q=>{if(q.length===0)return"";const Y=q.length,T=80,E=100,L=100;return q.map((U,$)=>{const C=Math.PI*2*$/Y-Math.PI/2,D=Math.max(U.value,10),j=E+T*(D/100)*Math.cos(C),S=L+T*(D/100)*Math.sin(C);return`${j},${S}`}).join(" ")};return e.jsxs("div",{className:"p-4 md:p-8 h-full overflow-y-auto bg-gray-50/50",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-6 pb-2 border-b border-gray-200 gap-4",children:[e.jsx("div",{className:"flex items-center gap-4 w-full md:w-auto",children:e.jsxs("div",{className:"bg-white p-1 rounded-xl border border-gray-200 shadow-sm flex w-full md:w-auto",children:[e.jsxs("button",{onClick:()=>u("modern"),className:`flex-1 md:flex-none flex items-center justify-center gap-2 px-4 py-2 rounded-lg text-sm font-bold transition-all ${c==="modern"?"bg-indigo-600 text-white shadow-md":"text-gray-500 hover:bg-gray-50"}`,children:[e.jsx(MN,{size:16}),"  ()"]}),e.jsxs("button",{onClick:()=>u("legacy"),className:`flex-1 md:flex-none flex items-center justify-center gap-2 px-4 py-2 rounded-lg text-sm font-bold transition-all ${c==="legacy"?"bg-indigo-600 text-white shadow-md":"text-gray-500 hover:bg-gray-50"}`,children:[e.jsx(kN,{size:16}),"  ()"]})]})}),o&&e.jsxs("div",{className:"bg-indigo-50 text-indigo-700 px-4 py-2 rounded-lg font-bold text-sm flex items-center gap-2 shadow-sm animate-in fade-in",children:[e.jsx(ft,{size:16}),"  : ",o]})]}),o&&Q&&e.jsxs("div",{className:"bg-gradient-to-r from-blue-900 to-indigo-800 rounded-2xl shadow-xl p-6 text-white mb-8 animate-in zoom-in-95 duration-500 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10",children:e.jsx(Ou,{size:150})}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-8 relative z-10",children:[e.jsxs("div",{className:"flex-1 border-l border-white/20 pl-6",children:[e.jsx("h2",{className:"text-2xl font-bold font-serif mb-2",children:o}),e.jsxs("div",{className:"flex items-center gap-2 opacity-80 mb-4",children:[e.jsx(Eo,{size:16}),e.jsx("span",{className:"text-sm",children:"  "})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"bg-white/10 rounded-lg p-3 text-center min-w-[80px]",children:[e.jsx("span",{className:"block text-2xl font-bold text-yellow-400",children:Q.data.avg.toFixed(2)}),e.jsx("span",{className:"text-[10px] uppercase opacity-70",children:" "})]}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-3 text-center min-w-[80px]",children:[e.jsx("span",{className:"block text-2xl font-bold",children:Q.data.count}),e.jsx("span",{className:"text-[10px] uppercase opacity-70",children:" "})]})]})]}),e.jsxs("div",{className:"flex items-center gap-4 border-l border-white/20 pl-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xs uppercase opacity-70 mb-1",children:" "}),e.jsxs("div",{className:"flex items-baseline gap-1 justify-center",children:[e.jsx("span",{className:"text-4xl font-bold",children:Q.rank}),e.jsxs("span",{className:"text-sm opacity-60",children:["/ ",Q.total]})]})]}),e.jsx("div",{className:`w-16 h-16 rounded-full flex items-center justify-center border-4 ${Q.rank===1?"border-yellow-400 text-yellow-400":Q.rank<=3?"border-gray-300 text-gray-300":"border-indigo-400 text-indigo-300"}`,children:e.jsx(n2,{size:32})})]}),e.jsxs("div",{className:"flex-1 flex flex-col justify-center",children:[e.jsxs("p",{className:"text-sm italic opacity-90 mb-2",children:['"',Q.rank===1?" !    .":Q.rank>Q.total/2?"      .":"      .",'"']}),e.jsx("div",{className:"w-full bg-black/20 rounded-full h-2 mt-2",children:e.jsx("div",{className:`h-2 rounded-full ${Q.rank===1?"bg-yellow-400":"bg-blue-400"}`,style:{width:`${Q.data.avg/20*100}%`}})}),e.jsx("span",{className:"text-[10px] mt-1 text-right opacity-60",children:"  "})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-blue-100 flex items-center justify-between hover:shadow-md transition-shadow",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-sm font-bold mb-1",children:o?" ":" "}),e.jsx("p",{className:"text-3xl font-bold text-blue-900",children:h})]}),e.jsx("div",{className:"bg-blue-50 p-3 rounded-full text-blue-600",children:e.jsx(Bn,{size:24})})]}),e.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-green-100 flex items-center justify-between hover:shadow-md transition-shadow",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-sm font-bold mb-1",children:" "}),e.jsxs("p",{className:"text-3xl font-bold text-green-700",children:[p,e.jsx("span",{className:"text-sm text-gray-400 font-normal",children:"/20"})]})]}),e.jsx("div",{className:"bg-green-50 p-3 rounded-full text-green-600",children:e.jsx(Nu,{size:24})})]}),e.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-purple-100 flex items-center justify-between hover:shadow-md transition-shadow",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-sm font-bold mb-1",children:""}),e.jsx("p",{className:"text-3xl font-bold text-purple-900",children:o?"1":b})]}),e.jsx("div",{className:"bg-purple-50 p-3 rounded-full text-purple-600",children:e.jsx(ft,{size:24})})]}),e.jsxs("div",{onClick:a,className:"bg-indigo-600 p-6 rounded-2xl shadow-md border border-indigo-700 flex items-center justify-between cursor-pointer hover:bg-indigo-700 transition-colors group relative overflow-hidden",children:[e.jsxs("div",{className:"relative z-10 text-white",children:[e.jsx("p",{className:"text-indigo-200 text-sm font-bold mb-1",children:" "}),e.jsxs("div",{className:"flex items-end gap-2",children:[e.jsx("p",{className:"text-3xl font-bold",children:se}),e.jsx("span",{className:"text-xs mb-1.5 opacity-80",children:""})]}),e.jsxs("div",{className:"flex items-center gap-1 mt-1 text-[10px] text-indigo-100 font-bold group-hover:translate-x-[-2px] transition-transform",children:[e.jsx("span",{children:" "}),e.jsx(kg,{size:10})]})]}),e.jsx("div",{className:`bg-indigo-500/50 p-3 rounded-full text-white relative z-10 ${se>0?"animate-pulse":""}`,children:e.jsx(Ma,{size:24})}),e.jsx(Ma,{size:80,className:"absolute -bottom-4 -left-4 text-indigo-500 opacity-20"})]})]}),c==="legacy"&&e.jsx("div",{className:"animate-in fade-in slide-in-from-bottom-4 duration-500",children:N.stats.count===0?e.jsxs("div",{className:"text-center py-12 bg-white rounded-2xl border border-dashed border-gray-300 text-gray-400",children:[e.jsx(js,{size:48,className:"mx-auto mb-3 opacity-20"}),e.jsx("p",{children:"      ."})]}):e.jsxs("div",{className:"space-y-8",children:[N.suggestions.length>0&&e.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-2xl p-6 shadow-sm",children:[e.jsxs("h3",{className:"font-bold text-lg text-amber-900 mb-4 flex items-center gap-2",children:[e.jsx(Mg,{size:20,className:"text-amber-600"}),"  (   )"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:N.suggestions.map((q,Y)=>e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-amber-100 flex items-start gap-3 shadow-sm hover:shadow-md transition-all",children:[e.jsx("div",{className:"bg-amber-100 p-2 rounded-lg text-amber-700 font-bold text-lg min-w-[40px] text-center",children:q.count}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-gray-800 text-sm",children:q.title}),e.jsxs("span",{className:`text-[10px] px-2 py-0.5 rounded font-bold mt-1 inline-block ${q.priority===""?"bg-red-100 text-red-600":q.priority===""?"bg-orange-100 text-orange-600":"bg-blue-100 text-blue-600"}`,children:[" ",q.priority]})]})]},Y))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-orange-100",children:[e.jsxs("h3",{className:"font-bold text-lg text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(js,{className:"text-orange-500",size:20}),"  "]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{className:"font-bold text-gray-700",children:" "}),e.jsx("span",{className:"font-bold text-green-600",children:N.stats.preparation.good})]}),e.jsx("div",{className:"w-full bg-gray-100 rounded-full h-2.5",children:e.jsx("div",{className:"bg-green-500 h-2.5 rounded-full",style:{width:`${N.stats.preparation.good/N.stats.count*100}%`}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{className:"font-bold text-gray-700",children:" / "}),e.jsx("span",{className:"font-bold text-yellow-600",children:N.stats.preparation.medium})]}),e.jsx("div",{className:"w-full bg-gray-100 rounded-full h-2.5",children:e.jsx("div",{className:"bg-yellow-500 h-2.5 rounded-full",style:{width:`${N.stats.preparation.medium/N.stats.count*100}%`}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{className:"font-bold text-gray-700",children:" / "}),e.jsx("span",{className:"font-bold text-red-600",children:N.stats.preparation.weak})]}),e.jsx("div",{className:"w-full bg-gray-100 rounded-full h-2.5",children:e.jsx("div",{className:"bg-red-500 h-2.5 rounded-full",style:{width:`${N.stats.preparation.weak/N.stats.count*100}%`}})})]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-blue-100",children:[e.jsxs("h3",{className:"font-bold text-lg text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(qs,{className:"text-blue-500",size:20}),"  "]}),e.jsxs("div",{className:"flex items-center justify-center gap-6 mt-4",children:[e.jsxs("div",{className:"relative w-32 h-32",children:[e.jsxs("svg",{className:"w-full h-full transform -rotate-90",viewBox:"0 0 36 36",children:[e.jsx("path",{className:"text-gray-100",d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"currentColor",strokeWidth:"3"}),e.jsx("path",{className:"text-blue-500",strokeDasharray:`${N.stats.objectives.full/N.stats.count*100}, 100`,d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"currentColor",strokeWidth:"3"})]}),e.jsxs("div",{className:"absolute inset-0 flex items-center justify-center flex-col",children:[e.jsxs("span",{className:"text-2xl font-bold text-blue-900",children:[Math.round(N.stats.objectives.full/N.stats.count*100),"%"]}),e.jsx("span",{className:"text-[10px] text-gray-500",children:" "})]})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),e.jsxs("span",{children:[" (",N.stats.objectives.full,")"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-gray-300 rounded-full"}),e.jsxs("span",{children:["/  (",N.stats.objectives.partial+N.stats.objectives.none,")"]})]})]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-purple-100",children:[e.jsxs("h3",{className:"font-bold text-lg text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(Fi,{className:"text-purple-500",size:20}),"  "]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-purple-50 p-3 rounded-lg text-center",children:[e.jsx("p",{className:"text-xs text-purple-800 font-bold mb-2",children:" "}),e.jsxs("div",{className:"text-2xl font-bold text-purple-900",children:[Math.round(N.stats.registers.monitored/N.stats.count*100),"%"]}),e.jsx("p",{className:"text-[10px] text-gray-500",children:" "})]}),e.jsxs("div",{className:"bg-indigo-50 p-3 rounded-lg text-center",children:[e.jsx("p",{className:"text-xs text-indigo-800 font-bold mb-2",children:" "}),e.jsxs("div",{className:"text-2xl font-bold text-indigo-900",children:[Math.round(N.stats.board.organized/N.stats.count*100),"%"]}),e.jsx("p",{className:"text-[10px] text-gray-500",children:" "})]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-teal-100",children:[e.jsxs("h3",{className:"font-bold text-lg text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(gt,{className:"text-teal-500",size:20}),"  "]}),e.jsxs("div",{className:"flex items-end justify-between h-32 px-4 gap-4",children:[e.jsxs("div",{className:"w-1/3 bg-teal-100 rounded-t-lg relative group h-full flex items-end justify-center",children:[e.jsx("div",{className:"w-full bg-teal-500 rounded-t-lg transition-all",style:{height:`${N.stats.notebooks.good/N.stats.count*100}%`}}),e.jsx("span",{className:"absolute bottom-2 text-white font-bold text-sm drop-shadow-md",children:N.stats.notebooks.good}),e.jsx("span",{className:"absolute -bottom-6 text-xs font-bold text-gray-600",children:""})]}),e.jsxs("div",{className:"w-1/3 bg-teal-100 rounded-t-lg relative group h-full flex items-end justify-center",children:[e.jsx("div",{className:"w-full bg-yellow-400 rounded-t-lg transition-all",style:{height:`${N.stats.notebooks.medium/N.stats.count*100}%`}}),e.jsx("span",{className:"absolute bottom-2 text-white font-bold text-sm drop-shadow-md",children:N.stats.notebooks.medium}),e.jsx("span",{className:"absolute -bottom-6 text-xs font-bold text-gray-600",children:""})]}),e.jsxs("div",{className:"w-1/3 bg-teal-100 rounded-t-lg relative group h-full flex items-end justify-center",children:[e.jsx("div",{className:"w-full bg-red-400 rounded-t-lg transition-all",style:{height:`${N.stats.notebooks.bad/N.stats.count*100}%`}}),e.jsx("span",{className:"absolute bottom-2 text-white font-bold text-sm drop-shadow-md",children:N.stats.notebooks.bad}),e.jsx("span",{className:"absolute -bottom-6 text-xs font-bold text-gray-600",children:""})]})]})]})]})]})}),c==="modern"&&e.jsx("div",{className:"animate-in fade-in slide-in-from-right-4 duration-500",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-red-100 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-2 h-full bg-red-400"}),e.jsxs("h3",{className:"font-bold text-lg text-gray-800 mb-2 flex items-center gap-2",children:[e.jsx(un,{className:"text-red-500",size:20}),"  ( )"]}),e.jsx("p",{className:"text-xs text-gray-400 mb-6",children:"     "}),e.jsx("div",{className:"space-y-4",children:X.length>0?X.map((q,Y)=>e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex justify-between items-center mb-1 text-sm",children:[e.jsx("span",{className:"font-bold text-gray-700 truncate ml-2",title:q.name,children:q.name}),e.jsxs("span",{className:"font-bold text-red-600 text-xs",children:[q.avg.toFixed(0),"% "]})]}),e.jsx("div",{className:"w-full bg-gray-100 rounded-full h-2",children:e.jsx("div",{className:"bg-red-400 h-2 rounded-full transition-all duration-1000",style:{width:`${q.avg}%`}})}),e.jsx("p",{className:"text-[10px] text-gray-400 mt-0.5",children:q.category})]},Y)):e.jsxs("div",{className:"text-center py-10 text-gray-400",children:[e.jsx(_t,{size:40,className:"mx-auto mb-2 opacity-20"}),e.jsx("p",{className:"text-sm",children:"     "})]})})]}),e.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-100",children:[e.jsxs("h3",{className:"font-bold text-lg text-gray-800 mb-2 flex items-center gap-2",children:[e.jsx(yj,{className:"text-indigo-500",size:20}),"  (",o?"":" ",")"]}),e.jsx("p",{className:"text-xs text-gray-400 mb-6",children:"     "}),e.jsx("div",{className:"flex justify-center relative",children:e.jsxs("svg",{viewBox:"0 0 200 200",className:"w-64 h-64 overflow-visible",children:[[20,40,60,80,100].map(q=>e.jsx("circle",{cx:"100",cy:"100",r:q*.8,fill:"none",stroke:"#e5e7eb",strokeDasharray:"4 4"},q)),V.map((q,Y)=>{const T=Math.PI*2*Y/V.length-Math.PI/2,E=100+80*Math.cos(T),L=100+80*Math.sin(T);return e.jsx("line",{x1:"100",y1:"100",x2:E,y2:L,stroke:"#f3f4f6"},Y)}),e.jsx("polygon",{points:Z(V),fill:"rgba(79, 70, 229, 0.2)",stroke:"#4f46e5",strokeWidth:"2"}),V.map((q,Y)=>{const T=Math.PI*2*Y/V.length-Math.PI/2,E=100+95*Math.cos(T),L=100+95*Math.sin(T);return e.jsx("text",{x:E,y:L,textAnchor:"middle",dominantBaseline:"middle",className:"text-[8px] font-bold fill-gray-600",children:q.domain},Y)})]})})]}),e.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-100 flex flex-col",children:[e.jsxs("h3",{className:"font-bold text-lg text-gray-800 mb-6 flex items-center gap-2",children:[e.jsx(gt,{className:"text-blue-500",size:20}),"   "]}),e.jsx("div",{className:"flex-1 flex items-end justify-between gap-4 px-2 pb-2 min-h-[150px]",children:w.length>0?w.map((q,Y)=>{const T=A>0?q.count/A*100:0,E=Math.max(T,10);return e.jsxs("div",{className:"flex-1 flex flex-col justify-end items-center group relative z-10 h-full",children:[e.jsxs("div",{className:"mb-1 opacity-0 group-hover:opacity-100 transition-opacity text-[10px] font-bold bg-gray-800 text-white px-1.5 py-0.5 rounded absolute -top-8 whitespace-nowrap z-20",children:[q.count," "]}),e.jsx("div",{className:"w-full bg-blue-100 rounded-t-md hover:bg-blue-300 transition-all duration-500 relative",style:{height:`${E}%`},children:e.jsx("div",{className:"absolute bottom-1 w-full text-center text-[9px] font-bold text-blue-700",children:q.count})}),e.jsx("p",{className:"text-[9px] text-gray-500 mt-2 text-center h-8 leading-tight flex items-center justify-center",children:q.name.replace("","")})]},Y)}):e.jsx("div",{className:"w-full text-center text-gray-300 text-sm italic",children:"    "})})]}),e.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:[e.jsxs("h3",{className:"font-bold text-lg text-gray-800 mb-6 flex items-center gap-2",children:[e.jsx(So,{className:"text-emerald-500",size:20})," "]}),e.jsx("div",{className:"space-y-4",children:I.length>0?I.map((q,Y)=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-1 text-sm",children:[e.jsx("span",{className:"font-bold text-gray-700 truncate text-xs",title:q.name,children:q.name}),e.jsx("span",{className:"font-bold text-gray-500 text-xs",children:q.count})]}),e.jsx("div",{className:"w-full bg-gray-50 rounded-full h-2",children:e.jsx("div",{className:"bg-emerald-400 h-2 rounded-full transition-all duration-1000",style:{width:`${q.count/H*100}%`}})})]},Y)):e.jsx("div",{className:"text-center text-gray-300 text-sm italic py-8",children:"   "})})]}),e.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-100 md:col-span-2 flex flex-col md:flex-row gap-8",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("h3",{className:"font-bold text-lg text-gray-800 mb-2 flex items-center gap-2",children:[e.jsx(Ki,{className:"text-amber-500",size:20}),"  "]}),e.jsx("p",{className:"text-xs text-gray-400 mb-6",children:"    "}),e.jsx("div",{className:"space-y-3",children:G.slice().reverse().map((q,Y)=>{const T=h>0?q.count/h*100:0,E=Math.max(T,10);return e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-[10px] text-gray-500 w-24 text-right shrink-0",children:q.label}),e.jsx("div",{className:"flex-1 bg-gray-100 rounded-full h-6 overflow-hidden flex justify-end",children:e.jsx("div",{className:`h-full ${q.color} flex items-center justify-center text-white text-[10px] font-bold transition-all duration-1000`,style:{width:`${E}%`},children:q.count>0?q.count:""})})]},Y)})})]}),e.jsx("div",{className:"w-px bg-gray-100 hidden md:block"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h3",{className:"font-bold text-lg text-gray-800 mb-2 flex items-center gap-2",children:[e.jsx(dN,{className:"text-cyan-500",size:20})," :   "]}),e.jsx("p",{className:"text-xs text-gray-400 mb-6",children:"     (5 )"}),e.jsxs("div",{className:"space-y-3",children:[[{label:"",junior:F.juniors.tech,senior:F.seniors.tech,icon:aj},{label:" ",junior:F.juniors.control,senior:F.seniors.control,icon:Lg},{label:"",junior:F.juniors.pedagogy,senior:F.seniors.pedagogy,icon:dn},{label:"",junior:F.juniors.planning,senior:F.seniors.planning,icon:G1},{label:"",junior:F.juniors.evaluation,senior:F.seniors.evaluation,icon:Fi}].map((q,Y)=>e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-between items-center mb-1",children:e.jsxs("span",{className:"text-[10px] font-bold text-gray-700 flex items-center gap-1",children:[e.jsx(q.icon,{size:12})," ",q.label]})}),e.jsxs("div",{className:"flex h-2 rounded-full overflow-hidden bg-gray-100 relative",children:[e.jsx("div",{className:"absolute left-1/2 top-0 bottom-0 w-0.5 bg-white z-10"}),e.jsx("div",{className:"w-1/2 flex justify-end",children:e.jsx("div",{className:"h-full bg-cyan-400",style:{width:`${q.junior}%`}})}),e.jsx("div",{className:"w-1/2 flex justify-start",children:e.jsx("div",{className:"h-full bg-amber-400",style:{width:`${q.senior}%`}})})]})]},Y)),e.jsxs("div",{className:"flex justify-between text-[9px] mt-2 text-gray-400 px-2",children:[e.jsx("span",{children:" (  10)"}),e.jsx("span",{children:" (  10)"})]})]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-100 flex flex-col",children:[e.jsxs("h3",{className:"font-bold text-lg text-gray-800 mb-6 flex items-center gap-2",children:[e.jsx(Nu,{className:"text-blue-500",size:20}),"  "]}),e.jsx("div",{className:"flex-1 flex items-end justify-between gap-2 px-2 pb-2 border-b border-gray-100 relative min-h-[150px]",children:O.ranges.map((q,Y)=>{const T=q.count/O.maxCount*100;return e.jsxs("div",{className:"flex-1 flex flex-col justify-end items-center group relative z-10 h-full",children:[e.jsx("div",{className:"mb-1 opacity-0 group-hover:opacity-100 transition-opacity text-[10px] font-bold bg-gray-800 text-white px-1.5 py-0.5 rounded absolute -top-6",children:q.count}),e.jsx("div",{className:`w-full ${q.color} rounded-t-md transition-all duration-500 hover:opacity-80`,style:{height:`${T>5?T:5}%`}})]},Y)})}),e.jsxs("div",{className:"grid grid-cols-5 text-[9px] text-gray-500 mt-2 text-center font-bold",children:[e.jsx("span",{children:""}),e.jsx("span",{children:""}),e.jsx("span",{children:""}),e.jsx("span",{children:" "}),e.jsx("span",{children:""})]}),e.jsxs("div",{className:"mt-6 pt-4 border-t border-dashed",children:[e.jsx("h4",{className:"text-xs font-bold text-gray-500 mb-3",children:" "}),e.jsxs("div",{className:"flex items-center justify-center gap-6",children:[e.jsx("div",{className:"relative w-16 h-16 rounded-full border-4 border-gray-100",style:{background:h>0?le:"#e5e7eb"}}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-1.5 text-[10px]",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-500"}),e.jsxs("span",{className:"text-gray-600",children:[" (",y.titulaire,")"]})]}),e.jsxs("div",{className:"flex items-center gap-1.5 text-[10px]",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-orange-500"}),e.jsxs("span",{className:"text-gray-600",children:[" (",y.contractuel,")"]})]}),e.jsxs("div",{className:"flex items-center gap-1.5 text-[10px]",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500"}),e.jsxs("span",{className:"text-gray-600",children:[" (",y.stagiere,")"]})]})]})]})]})]})]})})]})},fg=({teachers:n,reportsMap:t})=>{const a=new Date().getFullYear(),i=R.useMemo(()=>n.filter(c=>{if(c.status!=="titulaire"||!c.echelonDate||!c.echelon)return!1;const u=new Date(c.echelonDate);if(isNaN(u.getTime()))return!1;const x=new Date(u);x.setFullYear(u.getFullYear()+2);const h=new Date(a,11,31);if(x>h)return!1;const b=13+parseInt(c.echelon)*.5;if(c.lastMark>=b)return!1;const y=t[c.id];if(y){const N=y.inspectionDate&&y.inspectionDate.trim()!=="",w=y.finalMark!==void 0&&y.finalMark>0;if(N&&w)return!1}return!0}).map(c=>{var p;const x=13+parseInt(c.echelon||"0")*.5,h=((p=t[c.id])==null?void 0:p.school)||" ";return{...c,maxAllowedMark:x,schoolName:h}}),[n,a,t]),o=()=>{window.print()};return e.jsxs("div",{className:"p-8 h-full overflow-y-auto bg-gray-50/50",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8 border-b pb-4 gap-4 print:hidden",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-800 font-serif flex items-center gap-3",children:[e.jsx(Vu,{className:"text-indigo-600",size:32}),"  "]}),e.jsx("p",{className:"text-gray-500 mt-2 font-medium",children:"        ."})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"bg-indigo-50 border border-indigo-100 text-indigo-700 px-4 py-3 rounded-lg font-bold shadow-sm text-sm",children:[" : ",a]}),e.jsxs("button",{onClick:o,className:"bg-white border border-gray-300 text-gray-700 hover:bg-gray-50 px-4 py-3 rounded-lg font-bold flex items-center gap-2 shadow-sm text-sm",children:[e.jsx(ys,{size:18})," "]})]})]}),e.jsx("div",{className:"print:hidden",children:i.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:i.map(c=>e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-indigo-100 overflow-hidden hover:shadow-md transition-all group",children:[e.jsxs("div",{className:"bg-indigo-50/50 p-4 border-b border-indigo-100 flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg text-gray-900",children:c.fullName}),e.jsxs("div",{className:"flex items-center gap-1.5 text-indigo-700 text-sm mt-1 font-medium",children:[e.jsx(ft,{size:14}),e.jsx("span",{children:c.schoolName})]})]}),e.jsxs("div",{className:"bg-white border border-indigo-200 text-indigo-800 text-xs px-3 py-1 rounded-full font-bold shadow-sm",children:[" ",c.echelon]})]}),e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm bg-gray-50 p-2 rounded-lg border border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(Tg,{size:16,className:"text-gray-400"}),e.jsx("span",{children:" "})]}),e.jsx("span",{className:"font-mono font-bold text-gray-800 dir-ltr",children:ct(c.echelonDate)})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-2",children:[e.jsxs("div",{className:"text-center p-2 rounded-lg bg-green-50 border border-green-100",children:[e.jsx("span",{className:"text-xs text-green-700 block mb-1",children:" "}),e.jsx("span",{className:"text-xl font-bold text-green-800",children:c.lastMark})]}),e.jsxs("div",{className:"text-center p-2 rounded-lg bg-red-50 border border-red-100",children:[e.jsx("span",{className:"text-xs text-red-700 block mb-1",children:" "}),e.jsx("span",{className:"text-xl font-bold text-red-800",children:c.maxAllowedMark})]})]}),e.jsxs("div",{className:"mt-2 pt-2 border-t border-dashed flex items-center gap-2 text-xs text-gray-500",children:[e.jsx(El,{size:14,className:"text-green-500"}),e.jsx("span",{children:"  : "}),e.jsxs("span",{className:"font-bold text-gray-800",children:[(c.maxAllowedMark-c.lastMark).toFixed(2)," "]})]})]})]},c.id))}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 bg-white rounded-2xl border border-dashed border-gray-300",children:[e.jsx(_t,{size:64,className:"text-green-500 mb-4 opacity-20"}),e.jsxs("h3",{className:"text-xl font-bold text-gray-400",children:["      ",a]}),e.jsx("p",{className:"text-gray-400 mt-2",children:"             (   )."})]})}),e.jsxs("div",{className:"hidden print:block absolute top-0 left-0 w-full h-auto bg-white z-[9999] p-10 text-black",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-3xl font-bold mb-2",children:"    ( )"}),e.jsxs("p",{className:"font-bold border-2 border-black inline-block px-6 py-2 mt-2 text-xl",children:[" ",a," (  31/12/",a,")"]})]}),e.jsxs("table",{className:"w-full border-collapse border-2 border-black text-right",dir:"rtl",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{className:"border border-black p-3 text-center w-16 font-bold",children:""}),e.jsx("th",{className:"border border-black p-3 font-bold",children:" "}),e.jsx("th",{className:"border border-black p-3 font-bold",children:""}),e.jsx("th",{className:"border border-black p-3 text-center w-24 font-bold",children:""}),e.jsx("th",{className:"border border-black p-3 text-center w-32 font-bold",children:" "}),e.jsx("th",{className:"border border-black p-3 text-center w-24 font-bold",children:""})]})}),e.jsx("tbody",{children:i.map((c,u)=>e.jsxs("tr",{style:{breakInside:"avoid"},children:[e.jsx("td",{className:"border border-black p-3 text-center",children:u+1}),e.jsx("td",{className:"border border-black p-3 font-bold",children:c.fullName}),e.jsx("td",{className:"border border-black p-3",children:c.schoolName}),e.jsx("td",{className:"border border-black p-3 text-center",children:c.echelon}),e.jsx("td",{className:"border border-black p-3 text-center",dir:"ltr",children:ct(c.echelonDate)}),e.jsx("td",{className:"border border-black p-3 text-center",children:c.lastMark})]},c.id))})]})]})]})},Sk=({teacher:n,isOpen:t,onClose:a,onStartInspection:i,onStartLegacyInspection:o,onStartTenure:c,onUpdateTeacher:u})=>{const[x,h]=R.useState(""),[p,b]=R.useState(""),[y,N]=R.useState(!1);if(R.useEffect(()=>{n&&(h(n.tenureDate||""),b(n.privateNotes||""))},[n]),!n)return null;const w=()=>{u&&u({...n,tenureDate:x})},A=()=>{N(!0),u&&u({...n,privateNotes:p}),setTimeout(()=>N(!1),500)},I=V=>V?new Date(V).toLocaleDateString("ar-DZ",{year:"numeric",month:"long",day:"numeric"}):" ",G=(V=>{if(!V)return 0;const X=new Date(V),Q=new Date().getTime()-X.getTime();return Math.floor(Q/(1e3*60*60*24*365.25))})(n.recruitmentDate);let F=null;if(n.echelonDate){const V=new Date(n.echelonDate);V.setFullYear(V.getFullYear()+2),F=V}const O=F?F<=new Date:!1;return e.jsxs("div",{className:`fixed inset-0 z-[100] flex justify-end transition-all duration-500 ${t?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"}`,children:[e.jsx("div",{className:`absolute inset-0 bg-slate-900/60 backdrop-blur-sm transition-opacity duration-500 ${t?"opacity-100":"opacity-0"}`,onClick:a}),e.jsxs("div",{className:`relative w-full max-w-md bg-gray-50 h-full shadow-2xl transform transition-transform duration-500 cubic-bezier(0.32, 0.72, 0, 1) flex flex-col border-l border-white/10 ${t?"translate-x-0":"translate-x-full"}`,dir:"rtl",children:[e.jsxs("div",{className:"bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 text-white p-6 pb-8 relative overflow-hidden shrink-0",children:[e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-blue-500/10 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2 pointer-events-none"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-40 h-40 bg-indigo-500/10 rounded-full blur-2xl translate-y-1/2 -translate-x-1/2 pointer-events-none"}),e.jsx("button",{onClick:a,className:"absolute top-5 left-5 p-2 bg-white/10 hover:bg-white/20 rounded-full transition-all text-white/80 hover:text-white backdrop-blur-md",children:e.jsx(ut,{size:20})}),e.jsxs("div",{className:"relative z-10 flex flex-col items-center text-center mt-2",children:[e.jsxs("div",{className:"relative mb-4",children:[e.jsx("div",{className:"w-24 h-24 bg-white text-blue-900 rounded-full flex items-center justify-center text-4xl font-bold shadow-xl border-4 border-white/20 backdrop-blur-sm",children:n.fullName.charAt(0)}),e.jsx("div",{className:`absolute bottom-0 right-0 w-7 h-7 rounded-full border-4 border-slate-900 flex items-center justify-center text-white text-[10px]
                                ${n.status==="titulaire"?"bg-emerald-500":n.status==="contractuel"?"bg-orange-500":"bg-blue-500"}`,title:n.status==="titulaire"?"":" ",children:e.jsx(Lg,{size:14})})]}),e.jsx("h2",{className:"text-2xl font-bold font-serif tracking-wide",children:n.fullName}),e.jsxs("div",{className:"flex items-center gap-2 mt-2 text-blue-200 text-xs font-medium bg-blue-950/50 px-3 py-1 rounded-full border border-blue-800/50",children:[e.jsx(Ki,{size:12}),e.jsx("span",{children:n.rank})]})]})]}),e.jsxs("div",{className:"px-6 -mt-6 relative z-20 grid grid-cols-3 gap-3",children:[e.jsxs("div",{className:"bg-white p-3 rounded-xl shadow-md border border-gray-100 flex flex-col items-center justify-center text-center",children:[e.jsx("span",{className:"text-[10px] text-gray-400 font-bold uppercase tracking-wider mb-1",children:""}),e.jsx("span",{className:"text-xl font-bold text-slate-800",children:n.echelon||"-"})]}),e.jsxs("div",{className:"bg-white p-3 rounded-xl shadow-md border border-gray-100 flex flex-col items-center justify-center text-center",children:[e.jsx("span",{className:"text-[10px] text-gray-400 font-bold uppercase tracking-wider mb-1",children:""}),e.jsxs("div",{className:"flex items-baseline gap-0.5",children:[e.jsx("span",{className:`text-xl font-bold ${n.lastMark>=16?"text-emerald-600":n.lastMark>=13?"text-blue-600":"text-orange-600"}`,children:n.lastMark}),e.jsx("span",{className:"text-[10px] text-gray-400",children:"/20"})]})]}),e.jsxs("div",{className:"bg-white p-3 rounded-xl shadow-md border border-gray-100 flex flex-col items-center justify-center text-center",children:[e.jsx("span",{className:"text-[10px] text-gray-400 font-bold uppercase tracking-wider mb-1",children:""}),e.jsxs("span",{className:"text-xl font-bold text-indigo-700",children:[G," ",e.jsx("span",{className:"text-[10px] font-normal text-gray-400",children:""})]})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[e.jsxs("div",{className:"bg-amber-50/50 border border-amber-100 rounded-2xl p-4 mb-8 relative group focus-within:ring-2 focus-within:ring-amber-200 transition-all",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-amber-800 font-bold text-sm",children:[e.jsx(jo,{size:14,className:"text-amber-600"})," "]}),p!==n.privateNotes&&e.jsxs("button",{onClick:A,className:"text-[10px] bg-amber-500 text-white px-2 py-1 rounded flex items-center gap-1 hover:bg-amber-600 transition-colors",children:[e.jsx(ws,{size:10})," "]})]}),e.jsx("textarea",{value:p,onChange:V=>b(V.target.value),onBlur:A,className:"w-full bg-transparent text-sm text-gray-700 outline-none resize-none placeholder:text-gray-400/70",placeholder:"          (    )...",rows:3})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx("div",{className:"p-2 bg-indigo-50 text-indigo-600 rounded-lg",children:e.jsx(NN,{size:20})}),e.jsx("h3",{className:"font-bold text-gray-800 text-lg",children:" "})]}),e.jsxs("div",{className:"relative border-r-2 border-indigo-100 mr-3 space-y-8 pb-2",children:[e.jsxs("div",{className:"relative pr-8 group",children:[e.jsx("div",{className:"absolute -right-[9px] top-1 w-4 h-4 bg-white rounded-full border-[3px] border-gray-300 group-hover:border-indigo-500 transition-colors z-10"}),e.jsxs("div",{className:"bg-white p-4 rounded-2xl shadow-sm border border-gray-100 hover:shadow-md transition-all hover:border-indigo-100 group-hover:translate-x-[-4px]",children:[e.jsxs("div",{className:"flex justify-between items-start mb-1",children:[e.jsx("p",{className:"font-bold text-gray-800 text-sm",children:" "}),e.jsx("span",{className:"text-[10px] font-mono bg-gray-100 text-gray-600 px-2 py-0.5 rounded-full",children:I(n.recruitmentDate)})]}),e.jsxs("p",{className:"text-xs text-gray-500 flex items-center gap-1",children:[e.jsx(Yn,{size:12,className:"text-gray-400"}),"  "]})]})]}),n.status==="stagiere"&&e.jsxs("div",{className:"relative pr-8 group",children:[e.jsx("div",{className:"absolute -right-[9px] top-1 w-4 h-4 bg-white rounded-full border-[3px] border-blue-300 group-hover:border-blue-500 transition-colors z-10"}),e.jsxs("div",{className:"bg-blue-50/30 p-4 rounded-2xl shadow-sm border border-blue-100 hover:shadow-md transition-all group-hover:translate-x-[-4px]",children:[e.jsx("div",{className:"flex justify-between items-center mb-1",children:e.jsxs("p",{className:"font-bold text-blue-900 text-sm flex items-center gap-1",children:[e.jsx(So,{size:14}),"   "]})}),e.jsx("div",{className:"flex items-center gap-2 mt-2",children:e.jsx("input",{type:"date",value:x,onChange:V=>h(V.target.value),onBlur:w,className:"bg-white border border-blue-200 rounded px-2 py-1 text-xs outline-none focus:ring-1 focus:ring-blue-400 flex-1"})}),e.jsx("p",{className:"text-[9px] text-blue-600 mt-1",children:"     "})]})]}),n.currentRankDate&&e.jsxs("div",{className:"relative pr-8 group",children:[e.jsx("div",{className:"absolute -right-[9px] top-1 w-4 h-4 bg-white rounded-full border-[3px] border-purple-300 group-hover:border-purple-500 transition-colors z-10"}),e.jsxs("div",{className:"bg-white p-4 rounded-2xl shadow-sm border border-gray-100 hover:shadow-md transition-all hover:border-purple-100 group-hover:translate-x-[-4px]",children:[e.jsxs("div",{className:"flex justify-between items-start mb-1",children:[e.jsx("p",{className:"font-bold text-gray-800 text-sm",children:"   "}),e.jsx("span",{className:"text-[10px] font-mono bg-purple-50 text-purple-700 px-2 py-0.5 rounded-full",children:I(n.currentRankDate)})]}),e.jsxs("p",{className:"text-xs text-gray-500 flex items-center gap-1",children:[e.jsx(Nu,{size:12,className:"text-purple-400"}),n.rank]})]})]}),n.lastInspectionDate&&e.jsxs("div",{className:"relative pr-8 group",children:[e.jsx("div",{className:"absolute -right-[9px] top-1 w-4 h-4 bg-blue-100 rounded-full border-[3px] border-blue-500 z-10 shadow-sm"}),e.jsxs("div",{className:"bg-blue-50/50 p-4 rounded-2xl shadow-sm border border-blue-100 hover:shadow-md transition-all group-hover:translate-x-[-4px]",children:[e.jsxs("div",{className:"flex justify-between items-start mb-1",children:[e.jsx("p",{className:"font-bold text-blue-900 text-sm",children:"  "}),e.jsx("span",{className:"text-[10px] font-mono bg-white text-blue-700 px-2 py-0.5 rounded-full shadow-sm border border-blue-100",children:I(n.lastInspectionDate)})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsxs("div",{className:"flex items-center gap-1 bg-white px-2 py-1 rounded-lg border border-blue-100",children:[e.jsx(Pg,{size:12,className:"text-yellow-500 fill-yellow-500"}),e.jsx("span",{className:"text-xs font-bold text-gray-700",children:n.lastMark})]}),e.jsx("span",{className:"text-[10px] text-blue-400",children:" "})]})]})]}),F&&n.status==="titulaire"&&e.jsxs("div",{className:"relative pr-8 group",children:[e.jsx("div",{className:`absolute -right-[9px] top-1 w-4 h-4 rounded-full border-[3px] z-10 ${O?"bg-orange-100 border-orange-500 animate-pulse":"bg-gray-100 border-gray-300"}`}),e.jsxs("div",{className:`p-4 rounded-2xl border border-dashed transition-all group-hover:translate-x-[-4px] ${O?"bg-orange-50/50 border-orange-300":"bg-transparent border-gray-300"}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-1",children:[e.jsxs("p",{className:`font-bold text-sm ${O?"text-orange-800":"text-gray-500"}`,children:["  ( ",parseInt(n.echelon||"0")+1,")"]}),O&&e.jsx(Ia,{size:14,className:"text-orange-500"})]}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1 flex items-center gap-1",children:[e.jsx(Ag,{size:12}),"  : ",I(n.echelonDate||"")]}),O&&e.jsx("p",{className:"text-[10px] font-bold text-orange-600 mt-2 bg-white/50 inline-block px-2 py-1 rounded",children:"  (  )"})]})]})]})]}),e.jsxs("div",{className:"p-6 bg-white border-t border-gray-100 shrink-0 space-y-3 shadow-[0_-10px_40px_rgba(0,0,0,0.05)] relative z-30",children:[e.jsxs("button",{onClick:()=>i(n),className:"w-full bg-slate-900 text-white font-bold text-base py-3.5 rounded-xl shadow-lg shadow-slate-900/20 hover:bg-slate-800 transition-all flex items-center justify-center gap-3 hover:scale-[1.01] active:scale-[0.99] group",children:[e.jsx("span",{className:"group-hover:translate-x-1 transition-transform",children:"   "}),e.jsx(Yi,{size:18,className:"text-blue-400"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o&&e.jsxs("button",{onClick:()=>o(n),className:"w-full bg-amber-500 text-white font-bold text-xs py-3 rounded-xl shadow-md hover:bg-amber-600 transition-all flex items-center justify-center gap-2 border-b-4 border-amber-700 active:border-b-0 active:translate-y-1 group",children:[e.jsx(Rj,{size:18,className:"text-amber-100 group-hover:rotate-12 transition-transform"}),e.jsx("span",{children:" "})]}),n.status==="stagiere"&&c?e.jsxs("button",{onClick:()=>c(n),className:"w-full bg-emerald-600 text-white font-bold text-xs py-3 rounded-xl shadow-md hover:bg-emerald-700 transition-all flex items-center justify-center gap-2 border-b-4 border-emerald-800 active:border-b-0 active:translate-y-1",children:[e.jsx(So,{size:16}),e.jsx("span",{children:" "})]}):e.jsx("button",{onClick:a,className:"w-full text-slate-400 font-bold text-xs py-3 hover:text-slate-600 transition-colors",children:" "})]})]})]})]})},pu=n=>{if(n==null)return null;const t=String(n).trim();if(t.length>3)return null;if(["","A","a"].includes(t))return"A";if(["","B","b"].includes(t))return"B";if(["","C","c"].includes(t))return"C";if(["","D","d"].includes(t))return"D";if(t.length<=2){if(t.startsWith("")||t.toUpperCase().startsWith("A"))return"A";if(t.startsWith("")||t.toUpperCase().startsWith("B"))return"B";if(t.startsWith("")||t.toUpperCase().startsWith("C"))return"C";if(t.startsWith("")||t.toUpperCase().startsWith("D"))return"D"}return null},hg=n=>n?n.replace(/["']/g,"").replace(/\s+/g," ").trim():"",gu=n=>{const t=n.toLowerCase();return t.includes("")||t.includes("")||t.includes("")||t.includes("")||t.includes("total")||t.includes("moyenne")||t.includes("pourcentage")},Ck=(n,t,a)=>{if(typeof XLSX>"u")return console.error("SheetJS not loaded."),[];const i=[],o=XLSX.read(n,{type:"array"}),c=o.SheetNames[0],u=o.Sheets[c],x=XLSX.utils.sheet_to_json(u,{header:1});if(!x||x.length===0)return[];for(let h=0;h<x.length;h++){const p=x[h];if(!p||p.length<2)continue;let b="";const y=[];let N=-1;for(let w=0;w<Math.min(p.length,6);w++){const A=String(p[w]||"").trim();if(/^[\d\/\-\.]+$/.test(A)||A.length<3||pu(A))continue;if(gu(A)){b="";break}const I=String(p[w+1]||"").trim(),H=!!pu(I),G=/^[\d\/\-\.]+$/.test(I);if(I.length>2&&!H&&!gu(I)&&!G?b=hg(A+" "+I):b=hg(A),b){N=w;break}}if(!(b.includes("")||b.includes("")||b.includes("Nom"))&&!gu(b)&&b){for(let w=0;w<p.length;w++){if(w<=N)continue;const A=pu(p[w]);A&&y.push(A)}t==="2AP"?a.includes("")?y.length>=8&&i.push({id:Math.random().toString(36).substr(2,9),fullName:b,results:{reading_performance:{1:y[0],2:y[1],3:y[2]},written_comprehension:{1:y[3],2:y[4],3:y[5],4:y[6],5:y[7]}}}):a.includes("")&&y.length>=6&&i.push({id:Math.random().toString(36).substr(2,9),fullName:b,results:{control_numbers:{1:y[0],2:y[1]},problem_solving:{1:y[2],2:y[3],3:y[4],4:y[5]}}}):t==="4AP"?a.includes("")?y.length>=19&&i.push({id:Math.random().toString(36).substr(2,9),fullName:b,results:{oral_comms:{1:y[0],2:y[1],3:y[2],4:y[3],5:y[4]},reading_perf:{1:y[5],2:y[6],3:y[7],4:y[8]},written_comp:{1:y[9],2:y[10],3:y[11],4:y[12],5:y[13]},written_prod:{1:y[14],2:y[15],3:y[16],4:y[17],5:y[18]}}}):a.includes("")&&y.length>=7&&i.push({id:Math.random().toString(36).substr(2,9),fullName:b,results:{control_resources:{1:y[0],2:y[1],3:y[2]},methodological_solving:{1:y[3],2:y[4],3:y[5],4:y[6]}}}):t==="5AP"?a.includes("")?y.length>=26&&i.push({id:Math.random().toString(36).substr(2,9),fullName:b,results:{oral_comms:{1:y[0],2:y[1],3:y[2],4:y[3],5:y[4],6:y[5]},reading_perf:{1:y[6],2:y[7],3:y[8],4:y[9]},written_comp:{1:y[10],2:y[11],3:y[12],4:y[13],5:y[14],6:y[15],7:y[16],8:y[17],9:y[18]},written_prod:{1:y[19],2:y[20],3:y[21],4:y[22],5:y[23],6:y[24],7:y[25]}}}):a.includes("")?y.length>=14&&i.push({id:Math.random().toString(36).substr(2,9),fullName:b,results:{control_numbers:{1:y[0],2:y[1],3:y[2],4:y[3]},geometry_space:{1:y[4],2:y[5],3:y[6]},measurements:{1:y[7],2:y[8],3:y[9]},data_org:{1:y[10],2:y[11],3:y[12],4:y[13]}}}):a.includes("")?y.length>=12&&i.push({id:Math.random().toString(36).substr(2,9),fullName:b,results:{behavior:{1:y[0],2:y[1],3:y[2]},recitation:{1:y[3],2:y[4],3:y[5]},understanding:{1:y[6],2:y[7],3:y[8]},sira:{1:y[9],2:y[10],3:y[11]}}}):a.includes("")&&y.length>=7&&i.push({id:Math.random().toString(36).substr(2,9),fullName:b,results:{general_history:{1:y[0],2:y[1],3:y[2]},national_history:{1:y[3],2:y[4],3:y[5],4:y[6]}}}):y.length>=1&&i.push({id:Math.random().toString(36).substr(2,9),fullName:b,results:{generic:{1:y[0]||null}}})}}return i},ff="mufattish_acq_db",_l=()=>{const n=localStorage.getItem(ff);if(!n)return{records:[]};try{return JSON.parse(n)}catch{return{records:[]}}},Ek=n=>{const t=_l(),a=t.records.findIndex(i=>i.id===n.id);a>=0?t.records[a]=n:t.records.push(n),localStorage.setItem(ff,JSON.stringify(t))},mg=n=>{const t=_l();t.records=t.records.filter(a=>a.id!==n),localStorage.setItem(ff,JSON.stringify(t))},Li={label:"  ( )",competencies:[{id:"reading_performance",label:"  ",criteria:[{id:1,label:"   "},{id:2,label:"   ( )"},{id:3,label:"    (  )"}]},{id:"written_comprehension",label:"  ",criteria:[{id:1,label:"    "},{id:2,label:"       "},{id:3,label:"      ( )"},{id:4,label:"     "},{id:5,label:"   ()"}]}]},Mb={distribution:{title:"  ( )",concept:"      ( ).        ()     ()    (/).",method:"      (   )    (+)   (+)."},homogeneity:{title:" ",concept:"          .       .",method:"   (Standard Deviation)  . (  15:   /   25: )."},matrix:{title:"  (/)",concept:"    ' ' ( /)  ' ' ().     (      ).",method:"   4         (/  50%)."}},Tk=({records:n,scope:t,contextName:a})=>{const[i,o]=R.useState(null),[c,u]=R.useState(null),[x,h]=R.useState(null),[p,b]=R.useState(!1),[y,N]=R.useState(null),[w,A]=R.useState({}),[I,H]=R.useState(null);R.useEffect(()=>{const C=`mufattish_analysis_y2_arabic_${a}_${t}`,D=localStorage.getItem(C);if(D)try{A(JSON.parse(D))}catch(j){console.error("Failed to load custom analysis",j)}},[a,t]);const G=(C,D)=>{const j={...w,[C]:D};A(j),localStorage.setItem(`mufattish_analysis_y2_arabic_${a}_${t}`,JSON.stringify(j)),N(null)},F=C=>{const D={...w};delete D[C],A(D),localStorage.setItem(`mufattish_analysis_y2_arabic_${a}_${t}`,JSON.stringify(D))},O=R.useMemo(()=>n.flatMap(C=>C.students.map(D=>({...D,className:C.className,schoolName:C.schoolName}))),[n]),V=O.length,X=(C,D,j)=>{if(!C.results)return null;const S=C.results[D];return S?S[j]||S[String(j)]:null},ee=R.useMemo(()=>O.map(C=>{let D=0,j=0,S=0,k=0,z=0,W=0;Li.competencies.forEach(Ee=>{Ee.criteria.forEach(Re=>{const _e=X(C,Ee.id,Re.id);if(_e){const ke=_e==="A"?3:_e==="B"?2:_e==="C"?1:0;j+=3,D+=ke,Ee.id==="reading_performance"?(S+=ke,k+=3):(z+=ke,W+=3)}})});const ue=j>0?D/j*100:0,J=k>0?S/k*100:0,be=W>0?z/W*100:0;return{...C,percent:ue,oralPct:J,writtenPct:be}}),[O]),Q=R.useMemo(()=>{let C=0,D=0,j=0;return ee.forEach(S=>{S.percent>=66?C++:S.percent>=33?D++:j++}),{controlled:C,partial:D,limited:j}},[ee]),se=R.useMemo(()=>{if(ee.length===0)return 0;const C=ee.reduce((j,S)=>j+S.percent,0)/ee.length,D=ee.reduce((j,S)=>j+Math.pow(S.percent-C,2),0)/ee.length;return Math.sqrt(D)},[ee]),ne=R.useMemo(()=>{const C={A:0,B:0,C:0,D:0,total:0};return O.forEach(D=>{Li.competencies.forEach(j=>{j.criteria.forEach(S=>{const k=X(D,j.id,S.id);k&&(C[k]++,C.total++)})})}),C.total===0&&(C.total=1),C},[O]),P=R.useMemo(()=>{const C={balanced_high:0,rote_reading:0,struggling:0,decoding_issue:0,total:0};return ee.forEach(D=>{const j=D.oralPct>=50,S=D.writtenPct>=50;j&&S?C.balanced_high++:j&&!S?C.rote_reading++:!j&&!S?C.struggling++:C.decoding_issue++,C.total++}),C},[ee]),ie=R.useMemo(()=>Li.competencies.flatMap(C=>C.criteria.map(D=>{const j={A:0,B:0,C:0,D:0,total:0};O.forEach(k=>{const z=X(k,C.id,D.id);z&&(j[z]++,j.total++)});const S=j.total?(j.A+j.B)/j.total*100:0;return{...D,compId:C.id,stats:j,successRate:S}})).sort((C,D)=>C.successRate-D.successRate),[O]),le=C=>{if(C==="distribution"){const D=ne.A,j=ne.B,S=ne.C+ne.D,k=ne.total||1;let z=D+j>S?"    ( ).                 .":"    ().           .";return{reading:` : ${Math.round(D/k*100)}% |  : ${Math.round(j/k*100)}% | : ${Math.round(S/k*100)}%`,diagnosis:z,recommendation:D+j>S?"       .":"   ."}}if(C==="homogeneity"){let D="";return se<15?D="  :    .      .":se<25?D="  ( ):         .":D="  ( ):      .    .",{reading:` : ${se.toFixed(2)}`,diagnosis:D,recommendation:se>25?"   ()  .":"      ."}}if(C==="matrix"){const D=P.total||1,j=Math.round(P.rote_reading/D*100),S=Math.round(P.decoding_issue/D*100);let k=j>20?":       ' '.         .":"      .";return{reading:` : ${j}% |    : ${S}%`,diagnosis:k,recommendation:j>20?"     .":"   ."}}return{reading:"",diagnosis:"",recommendation:""}},Z=C=>w[C]||le(C),q=(C,D,j)=>{const S=C.currentTarget.getBoundingClientRect();u({x:S.left+S.width/2,y:S.top-15,text:j,title:D})},Y=()=>{u(null)},T=({section:C})=>e.jsx("button",{onClick:D=>{D.stopPropagation(),o(C)},className:"absolute top-4 left-4 p-2 bg-slate-100 hover:bg-indigo-100 text-slate-500 hover:text-indigo-600 rounded-full transition-all duration-300 opacity-0 group-hover:opacity-100 transform scale-90 group-hover:scale-100 z-10 shadow-sm",title:"  ",children:e.jsx(hn,{size:18})}),E=C=>C.includes(" ")?"         .    .":C.includes(" ")?"       .     .":C.includes(" ")?" .   .":C.includes(" ")?"      .    .":"      .",L=(C,D)=>{const j=C.oralPct,S=C.writtenPct,k=j-S;let z="",W="",ue="";k>20?(z="  ()",W="          .",ue="   ' '   ."):k<-20?(z="   ",W="         .",ue="     ' '."):j<40&&S<40?(z=" ",W="      .",ue="    ( )."):(z=" ",W="      .",ue="   .");let J;D&&(J={label:D.label,advice:E(D.label)}),H({studentName:C.fullName,profileType:z,diagnosis:W,remedy:ue,scores:{oral:j,written:S},gap:k,clickedCriterion:J})},U=()=>{if(!i)return null;const C=Mb[i],D=Z(i);let j=null;switch(i){case"distribution":const S=ne.A,k=ne.B,z=ne.C+ne.D,W=ne.total;j=e.jsx("div",{className:"h-full flex flex-col items-center justify-center p-4 w-full",children:e.jsxs("div",{className:"grid grid-cols-3 gap-4 w-full max-w-2xl",children:[e.jsxs("div",{className:"bg-emerald-500/20 p-4 rounded-2xl border border-emerald-500/50 text-center",children:[e.jsxs("span",{className:"block text-4xl font-bold text-emerald-400 mb-2",children:[Math.round(S/W*100),"%"]}),e.jsx("span",{className:"text-sm text-emerald-200",children:" "})]}),e.jsxs("div",{className:"bg-blue-500/20 p-4 rounded-2xl border border-blue-500/50 text-center",children:[e.jsxs("span",{className:"block text-4xl font-bold text-blue-400 mb-2",children:[Math.round(k/W*100),"%"]}),e.jsx("span",{className:"text-sm text-blue-200",children:" "})]}),e.jsxs("div",{className:"bg-red-500/20 p-4 rounded-2xl border border-red-500/50 text-center",children:[e.jsxs("span",{className:"block text-4xl font-bold text-red-400 mb-2",children:[Math.round(z/W*100),"%"]}),e.jsx("span",{className:"text-sm text-red-200",children:" (+)"})]})]})});break;case"homogeneity":j=e.jsxs("div",{className:"h-full flex flex-col items-center justify-center p-4 w-full",children:[e.jsx("div",{className:"relative w-80 h-40 bg-gray-700/50 rounded-t-full overflow-hidden mb-8 border-t-4 border-x-4 border-slate-600",children:e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-full origin-bottom transition-transform duration-1000",style:{transform:`rotate(${Math.min(se,40)/40*180-90}deg)`},children:e.jsx("div",{className:"w-2 h-full bg-white mx-auto shadow-[0_0_15px_white]"})})}),e.jsx("span",{className:"text-6xl font-bold text-purple-400 font-mono",children:se.toFixed(2)})]});break;case"matrix":j=e.jsx("div",{className:"h-full flex items-center justify-center w-full",children:e.jsxs("div",{className:"aspect-square w-[400px] relative bg-slate-700/30 rounded-2xl border border-slate-600 p-4 grid grid-cols-2 grid-rows-2 gap-2",children:[e.jsxs("div",{className:"bg-blue-500/20 rounded flex flex-col items-center justify-center border border-blue-500/30",children:[e.jsxs("span",{className:"text-2xl font-bold text-blue-400",children:[Math.round(P.decoding_issue/P.total*100),"%"]}),e.jsx("span",{className:"text-sm text-blue-300",children:"   "})]}),e.jsxs("div",{className:"bg-emerald-500/20 rounded flex flex-col items-center justify-center border border-emerald-500/30",children:[e.jsxs("span",{className:"text-2xl font-bold text-emerald-400",children:[Math.round(P.balanced_high/P.total*100),"%"]}),e.jsx("span",{className:"text-sm text-emerald-300",children:" "})]}),e.jsxs("div",{className:"bg-red-500/20 rounded flex flex-col items-center justify-center border border-red-500/30",children:[e.jsxs("span",{className:"text-2xl font-bold text-red-400",children:[Math.round(P.struggling/P.total*100),"%"]}),e.jsx("span",{className:"text-sm text-red-300",children:" "})]}),e.jsxs("div",{className:"bg-yellow-500/20 rounded flex flex-col items-center justify-center border border-yellow-500/30",children:[e.jsxs("span",{className:"text-2xl font-bold text-yellow-400",children:[Math.round(P.rote_reading/P.total*100),"%"]}),e.jsx("span",{className:"text-sm text-yellow-300",children:" "})]})]})});break}return e.jsxs("div",{className:"fixed inset-0 z-[100] bg-slate-950 text-white flex animate-in zoom-in-95 duration-300 overflow-hidden",children:[e.jsx("button",{onClick:()=>o(null),className:"absolute top-6 left-6 p-2 bg-white/10 hover:bg-white/20 rounded-full z-50 text-white transition-all",children:e.jsx(mn,{size:24})}),e.jsxs("div",{className:"w-[400px] lg:w-[35%] bg-slate-900 border-l border-slate-800 p-8 flex flex-col shadow-2xl relative z-40 overflow-y-auto",children:[e.jsx("div",{className:"mb-8 pb-6 border-b border-slate-800",children:e.jsx("h2",{className:"text-2xl font-bold text-white font-serif",children:C.title})}),e.jsxs("div",{className:"space-y-8 flex-1",children:[e.jsxs("div",{className:"relative pl-4 border-r-2 border-indigo-500/50 pr-4",children:[e.jsxs("h4",{className:"text-indigo-400 font-bold uppercase text-xs mb-2 flex items-center gap-2",children:[e.jsx(kt,{size:14}),"   "]}),e.jsx("p",{className:"text-slate-300 leading-relaxed text-sm text-justify",children:D.reading})]}),e.jsxs("div",{className:"relative pl-4 border-r-2 border-amber-500/50 pr-4 bg-amber-500/5 p-4 rounded-l-xl",children:[e.jsxs("h4",{className:"text-amber-400 font-bold uppercase text-xs mb-2 flex items-center gap-2",children:[e.jsx(Ht,{size:14}),"  "]}),e.jsx("p",{className:"text-slate-200 leading-relaxed text-sm font-medium text-justify",children:D.diagnosis})]}),e.jsxs("div",{className:"relative pl-4 border-r-2 border-emerald-500/50 pr-4",children:[e.jsxs("h4",{className:"text-emerald-400 font-bold uppercase text-xs mb-2 flex items-center gap-2",children:[e.jsx(_t,{size:14}),"  "]}),e.jsx("p",{className:"text-slate-300 leading-relaxed text-sm text-justify",children:D.recommendation})]})]}),e.jsx("div",{className:"mt-8 pt-6 border-t border-slate-800 text-center",children:e.jsx("p",{className:"text-xs text-slate-500",children:"     2025"})})]}),e.jsxs("div",{className:"flex-1 bg-gradient-to-br from-slate-900 to-slate-950 flex flex-col items-center p-8 relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 opacity-10",style:{backgroundImage:"radial-gradient(circle at 2px 2px, white 1px, transparent 0)",backgroundSize:"40px 40px"}}),e.jsx("div",{className:"w-full max-w-3xl z-20 mb-4 mt-2 animate-in slide-in-from-top-4 shrink-0",children:e.jsxs("div",{className:"bg-white/5 backdrop-blur-md rounded-lg p-3 border border-white/10 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 p-1.5 bg-indigo-500/20 rounded-bl-lg border-b border-l border-white/10",children:e.jsx(dt,{size:14,className:"text-indigo-300"})}),e.jsxs("div",{className:"space-y-2 pt-1",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-[11px] font-bold text-indigo-300 uppercase mb-0.5",children:" "}),e.jsx("p",{className:"text-xs text-white/90 leading-relaxed",children:C.concept})]}),e.jsxs("div",{className:"pt-2 border-t border-white/10",children:[e.jsxs("h4",{className:"text-[10px] font-bold text-slate-400 uppercase mb-0.5 flex items-center gap-1",children:[e.jsx(Jn,{size:10}),"  "]}),e.jsx("p",{className:"text-[10px] text-slate-400 leading-relaxed font-mono opacity-80",children:C.method})]})]})]})}),e.jsx("div",{className:"relative z-10 w-full flex-1 flex items-center justify-center min-h-0",children:j})]})]})},$=()=>{if(!y||!p)return null;const C=Z(y);return e.jsx(xg,{section:y,initialData:C,onSave:D=>G(y,D),onReset:()=>F(y),onClose:()=>N(null)})};return V===0?e.jsx("div",{className:"text-center p-10 text-gray-400",children:"  "}):e.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-700 pb-24 relative",children:[c&&e.jsxs("div",{className:"fixed z-[9999] pointer-events-none bg-slate-900 text-white px-3 py-2 rounded-lg shadow-xl text-xs max-w-xs border border-slate-700",style:{left:c.x,top:c.y,transform:"translate(-50%, -100%)"},children:[c.title&&e.jsx("div",{className:"font-bold border-b border-slate-600 pb-1 mb-1 text-yellow-400",children:c.title}),e.jsx("div",{children:c.text}),e.jsx("div",{className:"absolute -bottom-1.5 left-1/2 -translate-x-1/2 w-3 h-3 bg-slate-900 rotate-45 border-r border-b border-slate-700"})]}),U(),$(),e.jsxs("div",{className:"bg-white rounded-3xl shadow-xl border border-slate-100 overflow-hidden",children:[e.jsxs("div",{className:"bg-slate-900 text-white p-8 relative",children:[e.jsx("div",{className:"absolute top-0 right-0 p-10 opacity-10",children:e.jsx(cn,{size:150})}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("div",{className:"flex items-center gap-2 mb-2 text-indigo-300 font-bold uppercase tracking-widest text-xs",children:t==="district"?"  ":t==="school"?" ":" "}),e.jsx("h2",{className:"text-4xl font-bold font-serif mb-2",children:Li.label}),e.jsxs("p",{className:"text-slate-400 text-lg flex items-center gap-2",children:[e.jsx(ft,{size:18})," ",a]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 divide-y md:divide-y-0 md:divide-x md:divide-x-reverse divide-slate-100",children:[e.jsxs("div",{className:"p-6 flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-emerald-100 text-emerald-600 flex items-center justify-center",children:e.jsx(_t,{size:24})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase",children:" "}),e.jsxs("p",{className:"text-2xl font-bold text-emerald-700",children:[Math.round(Q.controlled/V*100),"%"]})]})]}),e.jsxs("div",{className:"p-6 flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-orange-100 text-orange-600 flex items-center justify-center",children:e.jsx(El,{size:24})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase",children:" "}),e.jsxs("p",{className:"text-2xl font-bold text-orange-700",children:[Math.round(Q.partial/V*100),"%"]})]})]}),e.jsxs("div",{className:"p-6 flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-red-100 text-red-600 flex items-center justify-center",children:e.jsx(un,{size:24})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase",children:" "}),e.jsxs("p",{className:"text-2xl font-bold text-red-700",children:[Math.round(Q.limited/V*100),"%"]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-slate-200 cursor-pointer hover:shadow-lg hover:border-blue-300 transition-all group relative",onClick:()=>o("distribution"),onMouseEnter:C=>q(C," ","     ."),onMouseLeave:Y,children:[e.jsx(T,{section:"distribution"}),e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("h3",{className:"font-bold text-lg text-slate-800 flex items-center gap-2",children:[e.jsx(kt,{size:20,className:"text-blue-500"})," "]}),e.jsx(dt,{size:16,className:"text-slate-300 group-hover:text-blue-500 transition-colors"})]}),e.jsx("div",{className:"flex items-end gap-4 h-40",children:["A","B","C","D"].map(C=>{const D=ne[C],j=ne.total>0?D/ne.total*100:0,S=C==="A"?"bg-emerald-500":C==="B"?"bg-blue-500":C==="C"?"bg-orange-500":"bg-red-500";return e.jsxs("div",{className:"flex-1 flex flex-col justify-end items-center h-full",children:[e.jsx("div",{className:`w-full rounded-t-lg ${S}`,style:{height:`${Math.max(j,5)}%`}}),e.jsx("span",{className:"mt-2 font-bold text-slate-600 text-xs",children:C})]},C)})})]}),e.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-slate-200 cursor-pointer hover:shadow-lg hover:border-purple-300 transition-all group relative",onClick:()=>o("homogeneity"),onMouseEnter:C=>q(C," ","     ."),onMouseLeave:Y,children:[e.jsx(T,{section:"homogeneity"}),e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("h3",{className:"font-bold text-lg text-slate-800 flex items-center gap-2",children:[e.jsx(Ms,{size:20,className:"text-purple-500"})," "]}),e.jsx(dt,{size:16,className:"text-slate-300 group-hover:text-purple-500 transition-colors"})]}),e.jsx("div",{className:"flex justify-center items-center py-6",children:e.jsx("div",{className:"relative w-48 h-24 bg-gray-100 rounded-t-full overflow-hidden",children:e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-full origin-bottom transition-transform duration-1000",style:{transform:`rotate(${Math.min(se,40)/40*180-90}deg)`},children:e.jsx("div",{className:"w-1 h-full bg-slate-800 mx-auto"})})})}),e.jsx("div",{className:"text-center text-3xl font-bold text-purple-700",children:se.toFixed(1)})]}),e.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-slate-200 cursor-pointer hover:shadow-lg hover:border-teal-300 transition-all group relative lg:col-span-3 xl:col-span-1",onClick:()=>o("matrix"),children:[e.jsx(T,{section:"matrix"}),e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("h3",{className:"font-bold text-lg text-slate-800 flex items-center gap-2",children:[e.jsx(Aa,{size:20,className:"text-teal-500"}),"  "]}),e.jsx(dt,{size:16,className:"text-slate-300 group-hover:text-teal-500 transition-colors"})]}),e.jsxs("div",{className:"flex gap-6 items-center justify-center relative",children:[x&&e.jsxs("div",{className:"absolute -top-16 left-1/2 -translate-x-1/2 z-20 bg-slate-800/90 text-white p-2 rounded text-xs w-40 text-center animate-in zoom-in-95 duration-200 pointer-events-none",children:[x==="q1"&&"    (  /  )",x==="q2"&&"  ()",x==="q3"&&"  ( )",x==="q4"&&"  ()",e.jsx("div",{className:"absolute bottom-[-6px] left-1/2 -translate-x-1/2 w-2 h-2 bg-slate-800/90 rotate-45"})]}),e.jsxs("div",{className:"aspect-square w-52 relative bg-slate-50 rounded-xl border border-slate-200 p-2 grid grid-cols-2 grid-rows-2 gap-1 shrink-0",children:[e.jsx("div",{className:"bg-blue-100 rounded flex flex-col items-center justify-center hover:bg-blue-200 transition-colors",onMouseEnter:()=>h("q1"),onMouseLeave:()=>h(null),children:e.jsxs("span",{className:"text-xs font-bold text-blue-800",children:[Math.round(P.decoding_issue/P.total*100),"%"]})}),e.jsx("div",{className:"bg-emerald-100 rounded flex flex-col items-center justify-center hover:bg-emerald-200 transition-colors",onMouseEnter:()=>h("q2"),onMouseLeave:()=>h(null),children:e.jsxs("span",{className:"text-xs font-bold text-emerald-800",children:[Math.round(P.balanced_high/P.total*100),"%"]})}),e.jsx("div",{className:"bg-red-100 rounded flex flex-col items-center justify-center hover:bg-red-200 transition-colors",onMouseEnter:()=>h("q3"),onMouseLeave:()=>h(null),children:e.jsxs("span",{className:"text-xs font-bold text-red-800",children:[Math.round(P.struggling/P.total*100),"%"]})}),e.jsx("div",{className:"bg-yellow-100 rounded flex flex-col items-center justify-center hover:bg-yellow-200 transition-colors",onMouseEnter:()=>h("q4"),onMouseLeave:()=>h(null),children:e.jsxs("span",{className:"text-xs font-bold text-yellow-800",children:[Math.round(P.rote_reading/P.total*100),"%"]})})]})]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-slate-200",children:[e.jsxs("h3",{className:"font-bold text-lg text-slate-800 flex items-center gap-2 mb-6",children:[e.jsx(qs,{size:20,className:"text-red-500"}),"  "]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:ie.map((C,D)=>e.jsxs("div",{className:"bg-slate-50 rounded-xl p-4 border border-slate-100 relative overflow-hidden",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("span",{className:"text-[10px] text-slate-400 font-bold bg-white px-2 py-0.5 rounded border border-slate-100",children:C.compId==="reading_performance"?" ":" "}),e.jsxs("span",{className:`text-xs font-bold px-2 py-1 rounded ${C.successRate<50?"bg-red-100 text-red-600":"bg-green-100 text-green-600"}`,children:[Math.round(C.successRate),"% "]})]}),e.jsx("h4",{className:"font-bold text-slate-800 text-sm mb-3",children:C.label}),e.jsxs("div",{className:"flex h-2 rounded-full overflow-hidden",children:[e.jsx("div",{className:"bg-emerald-500",style:{width:`${C.stats.A/C.stats.total*100}%`}}),e.jsx("div",{className:"bg-blue-400",style:{width:`${C.stats.B/C.stats.total*100}%`}}),e.jsx("div",{className:"bg-orange-400",style:{width:`${C.stats.C/C.stats.total*100}%`}}),e.jsx("div",{className:"bg-red-400",style:{width:`${C.stats.D/C.stats.total*100}%`}})]})]},D))})]}),t==="class"&&e.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-red-100 border-t-4 border-t-red-500 mt-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h3",{className:"font-bold text-lg text-slate-800 flex items-center gap-2",children:[e.jsx(dn,{size:20,className:"text-red-500"}),"   ( )"]}),e.jsx("span",{className:"bg-red-50 text-red-600 text-xs px-3 py-1 rounded-full font-bold",children:"  "})]}),e.jsx("div",{className:"masonry-grid grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Li.competencies.map(C=>e.jsx(Cl.Fragment,{children:C.criteria.map(D=>{const j=O.filter(S=>X(S,C.id,D.id)==="D");return j.length===0?null:e.jsxs("div",{className:"bg-red-50/30 rounded-xl p-4 border border-red-100 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start gap-2 mb-3",children:[e.jsx("div",{className:"mt-1 w-2 h-2 rounded-full bg-red-500 shrink-0"}),e.jsx("h5",{className:"font-bold text-slate-700 text-xs leading-snug",children:D.label})]}),e.jsx("div",{className:"flex flex-wrap gap-1.5",children:j.map(S=>{const k=ee.find(z=>z.id===S.id)||S;return e.jsx("button",{onClick:()=>L(k,D),className:"px-2 py-1 rounded text-[10px] font-bold bg-white text-red-700 border border-red-100 shadow-sm hover:bg-red-500 hover:text-white hover:border-red-500 transition-all cursor-pointer",children:S.fullName},S.id)})})]},`${C.id}-${D.id}`)})},C.id))})]}),e.jsx("div",{className:"fixed bottom-6 left-1/2 transform -translate-x-1/2 z-50",children:e.jsxs("button",{onClick:()=>b(!0),className:"flex items-center gap-2 bg-slate-800 hover:bg-slate-700 text-white px-8 py-4 rounded-2xl font-bold text-sm transition-all shadow-xl hover:shadow-2xl border-2 border-slate-700 hover:border-slate-600 hover:scale-105 group",children:[e.jsx(Lt,{size:18,className:"group-hover:rotate-12 transition-transform"}),e.jsx("span",{children:" "})]})}),p&&e.jsx("div",{className:"fixed inset-0 z-[110] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 animate-in fade-in",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full p-6 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6 border-b pb-4",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-xl text-slate-800 flex items-center gap-2",children:[e.jsx(Lt,{size:24,className:"text-indigo-600"}),"  "]}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"         "})]}),e.jsx("button",{onClick:()=>b(!1),className:"text-slate-400 hover:text-red-500",children:e.jsx(ut,{})})]}),y?e.jsx(xg,{section:y,initialData:Z(y),onSave:C=>G(y,C),onReset:()=>F(y),onClose:()=>N(null)}):e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("button",{onClick:()=>N("distribution"),className:"p-4 bg-slate-50 hover:bg-indigo-50 border rounded-xl text-right transition-colors group",children:e.jsx("span",{className:"font-bold text-slate-700 block group-hover:text-indigo-700",children:" "})}),e.jsx("button",{onClick:()=>N("homogeneity"),className:"p-4 bg-slate-50 hover:bg-indigo-50 border rounded-xl text-right transition-colors group",children:e.jsx("span",{className:"font-bold text-slate-700 block group-hover:text-indigo-700",children:" "})}),e.jsx("button",{onClick:()=>N("matrix"),className:"p-4 bg-slate-50 hover:bg-indigo-50 border rounded-xl text-right transition-colors group col-span-2",children:e.jsx("span",{className:"font-bold text-slate-700 block group-hover:text-indigo-700",children:" "})})]})]})}),U(),I&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-in fade-in",onClick:()=>H(null),children:e.jsxs("div",{className:"bg-slate-900 w-full max-w-md rounded-3xl p-6 border border-slate-700 overflow-hidden flex flex-col max-h-[90vh]",onClick:C=>C.stopPropagation(),children:[e.jsxs("div",{className:"bg-gradient-to-r from-slate-900 to-slate-800 p-6 border-b border-slate-700 relative shrink-0",children:[e.jsx("button",{onClick:()=>H(null),className:"absolute left-4 top-4 text-slate-400 hover:text-white",children:e.jsx(ut,{size:20})}),e.jsx("h3",{className:"text-xl font-bold text-white",children:I.studentName})]}),e.jsxs("div",{className:"p-6 space-y-6 overflow-y-auto",children:[e.jsxs("div",{className:"bg-slate-800/50 rounded-xl p-4 border border-slate-700",children:[e.jsx("p",{className:"text-lg font-bold text-white mb-1",children:I.profileType}),e.jsx("p",{className:"text-sm text-slate-300",children:I.diagnosis})]}),e.jsxs("div",{className:"bg-emerald-900/20 rounded-xl p-4 border border-emerald-800/50",children:[e.jsxs("h4",{className:"text-xs font-bold text-emerald-400 mb-2 flex items-center gap-2",children:[e.jsx(As,{size:14}),"  "]}),e.jsx("p",{className:"text-sm text-emerald-100",children:I.remedy})]})]})]})})]})},xg=({section:n,initialData:t,onSave:a,onReset:i,onClose:o})=>{const[c,u]=R.useState(t),x=()=>Mb[n].title;return e.jsxs("div",{className:"space-y-4 animate-in slide-in-from-right-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("button",{onClick:o,className:"text-xs text-slate-500 hover:text-slate-800 flex items-center gap-1",children:[e.jsx(Ps,{size:12,className:"rotate-180"}),"  "]}),e.jsx("span",{className:"text-sm font-bold bg-indigo-100 text-indigo-700 px-3 py-1 rounded-full",children:x()})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-700 mb-1",children:"  "}),e.jsx(ze,{value:c.reading,onChange:h=>u({...c,reading:h}),className:"w-full border rounded-lg p-3 text-sm bg-slate-50 focus:bg-white focus:ring-2 focus:ring-indigo-500 max-h-60 overflow-y-auto",minHeight:"min-h-[120px]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-700 mb-1",children:" "}),e.jsx(ze,{value:c.diagnosis,onChange:h=>u({...c,diagnosis:h}),className:"w-full border rounded-lg p-3 text-sm bg-amber-50 focus:bg-white focus:ring-2 focus:ring-amber-500 max-h-60 overflow-y-auto",minHeight:"min-h-[120px]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-700 mb-1",children:" "}),e.jsx(ze,{value:c.recommendation,onChange:h=>u({...c,recommendation:h}),className:"w-full border rounded-lg p-3 text-sm bg-emerald-50 focus:bg-white focus:ring-2 focus:ring-emerald-500 max-h-60 overflow-y-auto",minHeight:"min-h-[120px]"})]}),e.jsxs("div",{className:"flex justify-between pt-4 border-t",children:[e.jsxs("button",{onClick:i,className:"text-red-500 text-xs font-bold flex items-center gap-1 hover:underline",children:[e.jsx(Fn,{size:12}),"   "]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:o,className:"px-4 py-2 text-slate-500 font-bold hover:bg-slate-100 rounded-lg",children:""}),e.jsxs("button",{onClick:()=>a(c),className:"px-6 py-2 bg-indigo-600 text-white font-bold rounded-lg hover:bg-indigo-700 shadow-md flex items-center gap-2",children:[e.jsx(ws,{size:16}),"  "]})]})]})]})},Ui={label:" ( )",competencies:[{id:"control_numbers",label:"    ",criteria:[{id:1,label:"      (   )"},{id:2,label:"     ( )"}]},{id:"problem_solving",label:"   ",criteria:[{id:1,label:"   (  )"},{id:2,label:"   (  )"},{id:3,label:"    ( )"},{id:4,label:"  ( )"}]}]},Rb={distribution:{title:"  ( )",concept:"        (  ).        ().",method:"      (   )    (+)   (+)."},homogeneity:{title:" ",concept:"           .",method:"   (Standard Deviation)  . (  15:  /   25: )."},matrix:{title:"  ( / )",concept:"    ' ' ( )  ' ' ( ).",method:"   4      '  '  ' '."}},kk=({records:n,scope:t,contextName:a})=>{const[i,o]=R.useState(null),[c,u]=R.useState(null),[x,h]=R.useState(null),[p,b]=R.useState(!1),[y,N]=R.useState(null),[w,A]=R.useState({}),[I,H]=R.useState(null),[G,F]=R.useState(null);R.useEffect(()=>{const j=`mufattish_analysis_y2_math_${a}_${t}`,S=localStorage.getItem(j);if(S)try{A(JSON.parse(S))}catch(k){console.error("Failed to load custom analysis",k)}},[a,t]);const O=(j,S)=>{const k={...w,[j]:S};A(k),localStorage.setItem(`mufattish_analysis_y2_math_${a}_${t}`,JSON.stringify(k)),N(null)},V=j=>{const S={...w};delete S[j],A(S),localStorage.setItem(`mufattish_analysis_y2_math_${a}_${t}`,JSON.stringify(S))},X=R.useMemo(()=>n.flatMap(j=>j.students.map(S=>({...S,className:j.className,schoolName:j.schoolName}))),[n]),ee=X.length,Q=(j,S,k)=>{if(!j.results)return null;const z=j.results[S];return z?z[k]||z[String(k)]:null},se=R.useMemo(()=>X.map(j=>{let S=0,k=0,z=0,W=0,ue=0,J=0;Ui.competencies.forEach(_e=>{_e.criteria.forEach(ke=>{const ae=Q(j,_e.id,ke.id);if(ae){const Je=ae==="A"?3:ae==="B"?2:ae==="C"?1:0;k+=3,S+=Je,_e.id==="control_numbers"?(z+=Je,W+=3):(ue+=Je,J+=3)}})});const be=k>0?S/k*100:0,Ee=W>0?z/W*100:0,Re=J>0?ue/J*100:0;return{...j,percent:be,calcPct:Ee,logicPct:Re}}),[X]),ne=R.useMemo(()=>{let j=0,S=0,k=0;return se.forEach(z=>{z.percent>=66?j++:z.percent>=33?S++:k++}),{controlled:j,partial:S,limited:k}},[se]),P=R.useMemo(()=>{if(se.length===0)return 0;const j=se.reduce((k,z)=>k+z.percent,0)/se.length,S=se.reduce((k,z)=>k+Math.pow(z.percent-j,2),0)/se.length;return Math.sqrt(S)},[se]),ie=R.useMemo(()=>{const j={A:0,B:0,C:0,D:0,total:0};return X.forEach(S=>{Ui.competencies.forEach(k=>{k.criteria.forEach(z=>{const W=Q(S,k.id,z.id);W&&(j[W]++,j.total++)})})}),j.total===0&&(j.total=1),j},[X]),le=R.useMemo(()=>{const j={balanced_high:0,procedural_issue:0,rote_learning:0,struggling:0,total:0};return se.forEach(S=>{const k=S.calcPct>=50,z=S.logicPct>=50;k&&z?j.balanced_high++:!k&&z?j.procedural_issue++:k&&!z?j.rote_learning++:j.struggling++,j.total++}),j},[se]),Z=R.useMemo(()=>Ui.competencies.flatMap(j=>j.criteria.map(S=>{const k={A:0,B:0,C:0,D:0,total:0};X.forEach(W=>{const ue=Q(W,j.id,S.id);ue&&(k[ue]++,k.total++)});const z=k.total?(k.A+k.B)/k.total*100:0;return{...S,compId:j.id,stats:k,successRate:z}})).sort((j,S)=>j.successRate-S.successRate),[X]),q=j=>{if(j==="distribution"){const S=ie.A,k=ie.B,z=ie.C+ie.D,W=ie.total||1;let ue=S+k>z?" :       .     () .":" :        ( )  .";return{reading:` : ${Math.round(S/W*100)}% |  : ${Math.round(k/W*100)}% | : ${Math.round(z/W*100)}%`,diagnosis:ue,recommendation:S+k>z?"    .":"     ."}}if(j==="homogeneity"){let S="";return P<15?S="  .      .":P<25?S=" .       .":S=" .     (    ).",{reading:` : ${P.toFixed(2)}`,diagnosis:S,recommendation:P>25?"   (  /  ).":"   ."}}if(j==="matrix"){const S=le.total||1,k=Math.round(le.rote_learning/S*100),z=Math.round(le.procedural_issue/S*100);let W="       .";return k>20&&(W="  :        ."),z>20&&(W=" :       ( )."),{reading:` : ${k}% |  : ${z}%`,diagnosis:W,recommendation:k>20?"  ' '  .":"    ."}}return{reading:"",diagnosis:"",recommendation:""}},Y=j=>w[j]||q(j),T=(j,S,k)=>{const z=j.currentTarget.getBoundingClientRect();u({x:z.left+z.width/2,y:z.top-15,text:k,title:S})},E=()=>{u(null)},L=({section:j})=>e.jsx("button",{onClick:S=>{S.stopPropagation(),o(j)},className:"absolute top-4 left-4 p-2 bg-slate-100 hover:bg-indigo-100 text-slate-500 hover:text-indigo-600 rounded-full transition-all duration-300 opacity-0 group-hover:opacity-100 transform scale-90 group-hover:scale-100 z-10 shadow-sm",title:"  ",children:e.jsx(hn,{size:18})}),U=j=>j.includes(" ")?"  ' '.     . :    ( ).":j.includes(" ")?" ''.       . :   .":j.includes(" ")?"  ' '.   . :      .":j.includes("")?"  ' '.   . :  .":j.includes("")?"  ''.       . :   .":"      .",$=(j,S)=>{const k=j.calcPct,z=j.logicPct,W=k-z;let ue="",J="",be="";k>=60&&z<40?(ue="  ( )",J="  (/)     .",be="  ' '   ."):k<40&&z>=60?(ue="  ( )",J="        .",be="     ."):k<30&&z<30?(ue="   ",J="      .",be="  (Manipulatives)  ."):(ue=" ",J="      .",be="    .");let Ee;S&&(Ee={label:S.label,advice:U(S.label)}),F({studentName:j.fullName,profileType:ue,diagnosis:J,remedy:be,scores:{calc:k,logic:z},gap:W,clickedCriterion:Ee})},C=()=>{if(!i)return null;const j=Rb[i],S=Y(i);let k=null;switch(i){case"distribution":const z=ie.A,W=ie.B,ue=ie.C+ie.D,J=ie.total;k=e.jsx("div",{className:"h-full flex flex-col items-center justify-center p-4 w-full",children:e.jsxs("div",{className:"grid grid-cols-3 gap-4 w-full max-w-2xl",children:[e.jsxs("div",{className:"bg-emerald-500/20 p-4 rounded-2xl border border-emerald-500/50 text-center",children:[e.jsxs("span",{className:"block text-4xl font-bold text-emerald-400 mb-2",children:[Math.round(z/J*100),"%"]}),e.jsx("span",{className:"text-sm text-emerald-200",children:" "})]}),e.jsxs("div",{className:"bg-blue-500/20 p-4 rounded-2xl border border-blue-500/50 text-center",children:[e.jsxs("span",{className:"block text-4xl font-bold text-blue-400 mb-2",children:[Math.round(W/J*100),"%"]}),e.jsx("span",{className:"text-sm text-blue-200",children:" "})]}),e.jsxs("div",{className:"bg-red-500/20 p-4 rounded-2xl border border-red-500/50 text-center",children:[e.jsxs("span",{className:"block text-4xl font-bold text-red-400 mb-2",children:[Math.round(ue/J*100),"%"]}),e.jsx("span",{className:"text-sm text-red-200",children:" (+)"})]})]})});break;case"homogeneity":k=e.jsxs("div",{className:"h-full flex flex-col items-center justify-center p-4 w-full",children:[e.jsx("div",{className:"relative w-80 h-40 bg-gray-700/50 rounded-t-full overflow-hidden mb-8 border-t-4 border-x-4 border-slate-600",children:e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-full origin-bottom transition-transform duration-1000",style:{transform:`rotate(${Math.min(P,40)/40*180-90}deg)`},children:e.jsx("div",{className:"w-2 h-full bg-white mx-auto shadow-[0_0_15px_white]"})})}),e.jsx("span",{className:"text-6xl font-bold text-purple-400 font-mono",children:P.toFixed(2)})]});break;case"matrix":k=e.jsx("div",{className:"h-full flex items-center justify-center w-full",children:e.jsxs("div",{className:"aspect-square w-[400px] relative bg-slate-700/30 rounded-2xl border border-slate-600 p-4 grid grid-cols-2 grid-rows-2 gap-2",children:[e.jsxs("div",{className:"bg-blue-100 rounded flex flex-col items-center justify-center hover:bg-blue-200 transition-colors",onMouseEnter:()=>h("q1"),onMouseLeave:()=>h(null),children:[e.jsxs("span",{className:"text-2xl font-bold text-blue-400",children:[Math.round(le.procedural_issue/le.total*100),"%"]}),e.jsx("span",{className:"text-sm text-blue-300",children:" "})]}),e.jsxs("div",{className:"bg-emerald-100 rounded flex flex-col items-center justify-center hover:bg-emerald-200 transition-colors",onMouseEnter:()=>h("q2"),onMouseLeave:()=>h(null),children:[e.jsxs("span",{className:"text-2xl font-bold text-emerald-400",children:[Math.round(le.balanced_high/le.total*100),"%"]}),e.jsx("span",{className:"text-sm text-emerald-300",children:" "})]}),e.jsxs("div",{className:"bg-red-100 rounded flex flex-col items-center justify-center hover:bg-red-200 transition-colors",onMouseEnter:()=>h("q3"),onMouseLeave:()=>h(null),children:[e.jsxs("span",{className:"text-2xl font-bold text-red-400",children:[Math.round(le.struggling/le.total*100),"%"]}),e.jsx("span",{className:"text-sm text-red-300",children:" "})]}),e.jsxs("div",{className:"bg-yellow-100 rounded flex flex-col items-center justify-center hover:bg-yellow-200 transition-colors",onMouseEnter:()=>h("q4"),onMouseLeave:()=>h(null),children:[e.jsxs("span",{className:"text-2xl font-bold text-yellow-400",children:[Math.round(le.rote_learning/le.total*100),"%"]}),e.jsx("span",{className:"text-sm text-yellow-300",children:" "})]})]})});break}return e.jsxs("div",{className:"fixed inset-0 z-[100] bg-slate-950 text-white flex animate-in zoom-in-95 duration-300 overflow-hidden",children:[e.jsx("button",{onClick:()=>o(null),className:"absolute top-6 left-6 p-2 bg-white/10 hover:bg-white/20 rounded-full z-50 text-white transition-all",children:e.jsx(mn,{size:24})}),e.jsxs("div",{className:"w-[400px] lg:w-[35%] bg-slate-900 border-l border-slate-800 p-8 flex flex-col shadow-2xl relative z-40 overflow-y-auto",children:[e.jsx("div",{className:"mb-8 pb-6 border-b border-slate-800",children:e.jsx("h2",{className:"text-2xl font-bold text-white font-serif",children:j.title})}),e.jsxs("div",{className:"space-y-8 flex-1",children:[e.jsxs("div",{className:"relative pl-4 border-r-2 border-indigo-500/50 pr-4",children:[e.jsxs("h4",{className:"text-indigo-400 font-bold uppercase text-xs mb-2 flex items-center gap-2",children:[e.jsx(kt,{size:14}),"   "]}),e.jsx("p",{className:"text-slate-300 leading-relaxed text-sm text-justify",children:S.reading})]}),e.jsxs("div",{className:"relative pl-4 border-r-2 border-amber-500/50 pr-4 bg-amber-500/5 p-4 rounded-l-xl",children:[e.jsxs("h4",{className:"text-amber-400 font-bold uppercase text-xs mb-2 flex items-center gap-2",children:[e.jsx(Ht,{size:14}),"  "]}),e.jsx("p",{className:"text-slate-200 leading-relaxed text-sm font-medium text-justify",children:S.diagnosis})]}),e.jsxs("div",{className:"relative pl-4 border-r-2 border-emerald-500/50 pr-4",children:[e.jsxs("h4",{className:"text-emerald-400 font-bold uppercase text-xs mb-2 flex items-center gap-2",children:[e.jsx(_t,{size:14}),"  "]}),e.jsx("p",{className:"text-slate-300 leading-relaxed text-sm text-justify",children:S.recommendation})]})]}),e.jsx("div",{className:"mt-8 pt-6 border-t border-slate-800 text-center",children:e.jsx("p",{className:"text-xs text-slate-500",children:"     2025"})})]}),e.jsxs("div",{className:"flex-1 bg-gradient-to-br from-slate-900 to-slate-950 flex flex-col items-center p-8 relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 opacity-10",style:{backgroundImage:"radial-gradient(circle at 2px 2px, white 1px, transparent 0)",backgroundSize:"40px 40px"}}),e.jsx("div",{className:"w-full max-w-3xl z-20 mb-4 mt-2 animate-in slide-in-from-top-4 shrink-0",children:e.jsxs("div",{className:"bg-white/5 backdrop-blur-md rounded-lg p-3 border border-white/10 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 p-1.5 bg-indigo-500/20 rounded-bl-lg border-b border-l border-white/10",children:e.jsx(dt,{size:14,className:"text-indigo-300"})}),e.jsxs("div",{className:"space-y-2 pt-1",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-[11px] font-bold text-indigo-300 uppercase mb-0.5",children:" "}),e.jsx("p",{className:"text-xs text-white/90 leading-relaxed",children:j.concept})]}),e.jsxs("div",{className:"pt-2 border-t border-white/10",children:[e.jsxs("h4",{className:"text-[10px] font-bold text-slate-400 uppercase mb-0.5 flex items-center gap-1",children:[e.jsx(Jn,{size:10}),"  "]}),e.jsx("p",{className:"text-[10px] text-slate-400 leading-relaxed font-mono opacity-80",children:j.method})]})]})]})}),e.jsx("div",{className:"relative z-10 w-full flex-1 flex items-center justify-center min-h-0",children:k})]})]})},D=()=>{if(!y||!p)return null;const j=Y(y);return e.jsx(pg,{section:y,initialData:j,onSave:S=>O(y,S),onReset:()=>V(y),onClose:()=>N(null)})};return ee===0?e.jsx("div",{className:"text-center p-10 text-gray-400",children:"  "}):e.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-700 pb-24 relative",children:[c&&e.jsxs("div",{className:"fixed z-[9999] pointer-events-none bg-slate-900 text-white px-3 py-2 rounded-lg shadow-xl text-xs max-w-xs border border-slate-700",style:{left:c.x,top:c.y,transform:"translate(-50%, -100%)"},children:[c.title&&e.jsx("div",{className:"font-bold border-b border-slate-600 pb-1 mb-1 text-yellow-400",children:c.title}),e.jsx("div",{children:c.text}),e.jsx("div",{className:"absolute -bottom-1.5 left-1/2 -translate-x-1/2 w-3 h-3 bg-slate-900 rotate-45 border-r border-b border-slate-700"})]}),C(),D(),I&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-in fade-in",onClick:()=>H(null),children:e.jsxs("div",{className:"bg-slate-900 w-full max-w-lg rounded-2xl p-6 border border-slate-700 shadow-2xl",onClick:j=>j.stopPropagation(),children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[e.jsx(dt,{size:20,className:"text-blue-400"})," ",I.title]}),e.jsx("button",{onClick:()=>H(null),className:"text-slate-400 hover:text-white transition-colors",children:e.jsx(ut,{})})]}),e.jsxs("p",{className:"text-slate-300 text-sm mb-6 italic border-r-4 border-slate-600 pr-4 leading-relaxed",children:['"',I.definition,'"']}),e.jsxs("div",{className:"bg-blue-900/20 p-4 rounded-xl border border-blue-900/50 mb-6",children:[e.jsxs("h4",{className:"text-xs font-bold text-blue-400 mb-2 flex items-center gap-1 uppercase tracking-wider",children:[e.jsx(gt,{size:12}),"  :"]}),e.jsx("p",{className:"text-xs text-blue-200 leading-relaxed text-justify",children:I.pedagogicalRef})]}),I.content]})}),G&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-in fade-in",onClick:()=>F(null),children:e.jsxs("div",{className:"bg-slate-900 w-full max-w-md rounded-3xl p-6 border border-slate-700 overflow-hidden flex flex-col max-h-[90vh] shadow-2xl",onClick:j=>j.stopPropagation(),children:[e.jsxs("div",{className:"flex justify-between items-start mb-6 shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-purple-500/20 flex items-center justify-center border border-purple-500/50 shadow-inner",children:e.jsx(cn,{size:24,className:"text-purple-300"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:G.studentName}),e.jsx("span",{className:"text-[10px] bg-purple-900/50 text-purple-300 px-2 py-0.5 rounded border border-purple-800 block w-fit mt-1",children:G.profileType})]})]}),e.jsx("button",{onClick:()=>F(null),className:"text-slate-400 hover:text-white transition-colors",children:e.jsx(ut,{})})]}),e.jsxs("div",{className:"space-y-4 overflow-y-auto pr-1 custom-scrollbar",children:[e.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-xl border border-slate-700",children:[e.jsxs("h4",{className:"text-xs font-bold text-slate-400 mb-2 flex items-center gap-2 uppercase tracking-wider",children:[e.jsx(Ku,{size:14}),"  "]}),e.jsx("p",{className:"text-sm text-slate-300 leading-relaxed text-justify",children:G.diagnosis})]}),e.jsxs("div",{className:"bg-emerald-900/20 p-4 rounded-xl border border-emerald-800/50",children:[e.jsxs("h4",{className:"text-xs font-bold text-emerald-400 mb-2 flex items-center gap-2 uppercase tracking-wider",children:[e.jsx(As,{size:14}),"   "]}),e.jsx("p",{className:"text-sm text-emerald-100 leading-relaxed text-justify",children:G.remedy})]}),G.clickedCriterion&&e.jsxs("div",{className:"bg-orange-900/20 p-4 rounded-xl border border-orange-800/50 animate-in slide-in-from-bottom-2",children:[e.jsxs("h4",{className:"text-xs font-bold text-orange-400 mb-2 flex items-center gap-2 uppercase tracking-wider",children:[e.jsx(Ht,{size:14}),"    :"]}),e.jsx("div",{className:"mb-2 text-xs font-bold text-orange-200 bg-orange-950/50 px-2 py-1 rounded inline-block",children:G.clickedCriterion.label}),e.jsx("p",{className:"text-sm text-orange-100 leading-relaxed text-justify",children:G.clickedCriterion.advice})]})]})]})}),e.jsxs("div",{className:"bg-white rounded-3xl shadow-xl border border-slate-100 overflow-hidden cursor-default",children:[e.jsxs("div",{className:"bg-slate-900 text-white p-8 relative",children:[e.jsx("div",{className:"absolute top-0 right-0 p-10 opacity-10",children:e.jsx(cn,{size:150})}),e.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row justify-between items-end gap-6",children:[e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center gap-2 mb-2 text-indigo-300 font-bold uppercase tracking-widest text-xs",children:t==="district"?"  ":t==="school"?" ":"  "}),e.jsx("h2",{className:"text-4xl font-bold font-serif mb-2",children:Ui.label}),e.jsxs("p",{className:"text-slate-400 text-lg flex items-center gap-2",children:[e.jsx(ft,{size:18})," ",a]})]}),e.jsx("div",{className:"flex gap-4",children:e.jsxs("div",{className:"bg-slate-800 p-4 rounded-2xl text-center min-w-[100px] border border-slate-700 flex flex-col justify-center",children:[e.jsx("span",{className:"block text-3xl font-bold text-white",children:ee}),e.jsx("span",{className:"text-xs text-slate-400 font-bold",children:""})]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 divide-y md:divide-y-0 md:divide-x md:divide-x-reverse divide-slate-100",children:[e.jsxs("div",{className:"p-6 flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-emerald-100 text-emerald-600 flex items-center justify-center",children:e.jsx(_t,{size:24})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase",children:"  / "}),e.jsxs("p",{className:"text-2xl font-bold text-emerald-700",children:[Math.round(ne.controlled/ee*100),"%"]})]})]}),e.jsxs("div",{className:"p-6 flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-orange-100 text-orange-600 flex items-center justify-center",children:e.jsx(El,{size:24})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase",children:" "}),e.jsxs("p",{className:"text-2xl font-bold text-orange-700",children:[Math.round(ne.partial/ee*100),"%"]})]})]}),e.jsxs("div",{className:"p-6 flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-red-100 text-red-600 flex items-center justify-center",children:e.jsx(un,{size:24})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase",children:" "}),e.jsxs("p",{className:"text-2xl font-bold text-red-700",children:[Math.round(ne.limited/ee*100),"%"]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-slate-200 cursor-pointer hover:shadow-lg hover:border-blue-300 transition-all group relative",onClick:()=>o("distribution"),onMouseEnter:j=>T(j," ","     ."),onMouseLeave:E,children:[e.jsx(L,{section:"distribution"}),e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("h3",{className:"font-bold text-lg text-slate-800 flex items-center gap-2",children:[e.jsx(kt,{size:20,className:"text-blue-500"})," "]}),e.jsx(dt,{size:16,className:"text-slate-300 group-hover:text-blue-500 transition-colors"})]}),e.jsx("div",{className:"flex items-end gap-4 h-40",children:["A","B","C","D"].map(j=>{const S=ie[j],k=ie.total>0?S/ie.total*100:0,z=j==="A"?"bg-emerald-500":j==="B"?"bg-blue-500":j==="C"?"bg-orange-500":"bg-red-500";return e.jsxs("div",{className:"flex-1 flex flex-col justify-end items-center h-full",children:[e.jsx("div",{className:`w-full rounded-t-lg ${z}`,style:{height:`${Math.max(k,5)}%`}}),e.jsx("span",{className:"mt-2 font-bold text-slate-600 text-xs",children:j})]},j)})})]}),e.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-slate-200 cursor-pointer hover:shadow-lg hover:border-purple-300 transition-all group relative",onClick:()=>o("homogeneity"),onMouseEnter:j=>T(j," ","     ."),onMouseLeave:E,children:[e.jsx(L,{section:"homogeneity"}),e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("h3",{className:"font-bold text-lg text-slate-800 flex items-center gap-2",children:[e.jsx(Ms,{size:20,className:"text-purple-500"})," "]}),e.jsx(dt,{size:16,className:"text-slate-300 group-hover:text-purple-500 transition-colors"})]}),e.jsx("div",{className:"flex justify-center items-center py-6",children:e.jsx("div",{className:"relative w-48 h-24 bg-gray-100 rounded-t-full overflow-hidden",children:e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-full origin-bottom transition-transform duration-1000",style:{transform:`rotate(${Math.min(P,40)/40*180-90}deg)`},children:e.jsx("div",{className:"w-1 h-full bg-slate-800 mx-auto"})})})}),e.jsx("div",{className:"text-center text-3xl font-bold text-purple-700",children:P.toFixed(1)})]}),e.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-slate-200 cursor-pointer hover:shadow-lg hover:border-teal-300 transition-all group relative lg:col-span-3 xl:col-span-1",onClick:()=>o("matrix"),children:[e.jsx(L,{section:"matrix"}),e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("h3",{className:"font-bold text-lg text-slate-800 flex items-center gap-2",children:[e.jsx(Aa,{size:20,className:"text-teal-500"}),"  "]}),e.jsx(dt,{size:16,className:"text-slate-300 group-hover:text-teal-500 transition-colors"})]}),e.jsxs("div",{className:"flex gap-6 items-center justify-center relative",children:[x&&e.jsxs("div",{className:"absolute -top-16 left-1/2 -translate-x-1/2 z-20 bg-slate-800/90 text-white p-2 rounded text-xs w-48 text-center animate-in zoom-in-95 duration-200 pointer-events-none border border-slate-600",children:[e.jsxs("div",{className:"font-bold border-b border-slate-600 pb-1 mb-1 text-slate-200",children:[x==="q1"&&"  /  ",x==="q2"&&"  ()",x==="q3"&&"   ",x==="q4"&&"  /  "]}),e.jsxs("div",{className:"text-[10px] text-slate-400",children:[x==="q1"&&"     ",x==="q2"&&"    ",x==="q3"&&"   ",x==="q4"&&"     "]}),e.jsx("div",{className:"absolute bottom-[-6px] left-1/2 -translate-x-1/2 w-3 h-3 bg-slate-800/90 rotate-45 border-r border-b border-slate-600"})]}),e.jsxs("div",{className:"aspect-square w-52 relative bg-slate-50 rounded-xl border border-slate-200 p-2 grid grid-cols-2 grid-rows-2 gap-1 shrink-0",children:[e.jsx("div",{className:"bg-blue-100 rounded flex flex-col items-center justify-center hover:bg-blue-200 transition-colors",onMouseEnter:()=>h("q1"),onMouseLeave:()=>h(null),children:e.jsxs("span",{className:"text-xs font-bold text-blue-800",children:[Math.round(le.procedural_issue/le.total*100),"%"]})}),e.jsx("div",{className:"bg-emerald-100 rounded flex flex-col items-center justify-center hover:bg-emerald-200 transition-colors",onMouseEnter:()=>h("q2"),onMouseLeave:()=>h(null),children:e.jsxs("span",{className:"text-xs font-bold text-emerald-800",children:[Math.round(le.balanced_high/le.total*100),"%"]})}),e.jsx("div",{className:"bg-red-100 rounded flex flex-col items-center justify-center hover:bg-red-200 transition-colors",onMouseEnter:()=>h("q3"),onMouseLeave:()=>h(null),children:e.jsxs("span",{className:"text-xs font-bold text-red-800",children:[Math.round(le.struggling/le.total*100),"%"]})}),e.jsx("div",{className:"bg-yellow-100 rounded flex flex-col items-center justify-center hover:bg-yellow-200 transition-colors",onMouseEnter:()=>h("q4"),onMouseLeave:()=>h(null),children:e.jsxs("span",{className:"text-xs font-bold text-yellow-800",children:[Math.round(le.rote_learning/le.total*100),"%"]})}),e.jsx("div",{className:"absolute -left-4 top-1/2 -translate-x-1/2 -rotate-90 text-[10px] text-slate-500 font-bold tracking-widest",children:" "}),e.jsx("div",{className:"absolute bottom-[-20px] left-1/2 -translate-x-1/2 text-[10px] text-slate-500 font-bold tracking-widest",children:""})]})]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-slate-200",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[e.jsxs("h3",{className:"font-bold text-lg text-slate-800 flex items-center gap-2",children:[e.jsx(qs,{size:20,className:"text-red-500"}),"   (  )"]}),e.jsxs("div",{className:"flex gap-3 text-[10px] bg-slate-50 p-2 rounded-lg border border-slate-100",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-emerald-500 rounded-full"}),e.jsx("span",{children:" ()"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full"}),e.jsx("span",{children:" ()"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-orange-400 rounded-full"}),e.jsx("span",{children:" ()"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-red-400 rounded-full"}),e.jsx("span",{children:" ()"})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Z.map((j,S)=>e.jsxs("div",{className:"bg-slate-50 rounded-xl p-4 border border-slate-100 group hover:border-indigo-100 transition-colors",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("span",{className:"text-[10px] text-slate-400 font-bold bg-white px-2 py-0.5 rounded border border-slate-100",children:j.compId==="control_resources"?" ":" "}),e.jsxs("span",{className:`text-xs font-bold px-2 py-1 rounded ${j.successRate<50?"bg-red-100 text-red-600":"bg-green-100 text-green-600"}`,children:[Math.round(j.successRate),"% "]})]}),e.jsx("h4",{className:"font-bold text-slate-800 text-sm mb-3 line-clamp-2 min-h-[40px]",children:j.label}),e.jsxs("div",{className:"flex h-2 rounded-full overflow-hidden relative",children:[e.jsx("div",{className:"bg-emerald-500",style:{width:`${j.stats.A/j.stats.total*100}%`}}),e.jsx("div",{className:"bg-blue-400",style:{width:`${j.stats.B/j.stats.total*100}%`}}),e.jsx("div",{className:"bg-orange-400",style:{width:`${j.stats.C/j.stats.total*100}%`}}),e.jsx("div",{className:"bg-red-400",style:{width:`${j.stats.D/j.stats.total*100}%`}})]}),e.jsxs("div",{className:"flex justify-between text-[10px] text-slate-400 font-mono mt-2 pt-2 border-t border-slate-100",children:[e.jsxs("span",{className:"font-bold text-slate-500",children:[j.stats.A+j.stats.B," "]}),e.jsxs("span",{className:"font-bold text-slate-500",children:[j.stats.C+j.stats.D," "]})]})]},S))})]}),t==="class"&&e.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-red-100 border-t-4 border-t-red-500 mt-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h3",{className:"font-bold text-lg text-slate-800 flex items-center gap-2",children:[e.jsx(dn,{size:20,className:"text-red-500"}),"   ()"]}),e.jsx("span",{className:"bg-red-50 text-red-600 text-xs px-3 py-1 rounded-full font-bold",children:"  "})]}),e.jsx("div",{className:"masonry-grid grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Ui.competencies.map(j=>e.jsx(Cl.Fragment,{children:j.criteria.map(S=>{const k=X.filter(z=>Q(z,j.id,S.id)==="D");return k.length===0?null:e.jsxs("div",{className:"bg-red-50/30 rounded-xl p-4 border border-red-100 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start gap-2 mb-3",children:[e.jsx("div",{className:"mt-1 w-2 h-2 rounded-full bg-red-500 shrink-0"}),e.jsx("h5",{className:"font-bold text-slate-700 text-xs leading-snug",children:S.label})]}),e.jsx("div",{className:"flex flex-wrap gap-1.5",children:k.map(z=>{const W=se.find(ue=>ue.id===z.id)||z;return e.jsx("button",{onClick:()=>$(W,S),className:"px-2 py-1 rounded text-[10px] font-bold bg-white text-red-700 border border-red-100 shadow-sm hover:bg-red-500 hover:text-white hover:border-red-500 transition-all cursor-pointer",children:z.fullName},z.id)})})]},`${j.id}-${S.id}`)})},j.id))})]}),e.jsx("div",{className:"fixed bottom-6 left-1/2 transform -translate-x-1/2 z-50",children:e.jsxs("button",{onClick:()=>b(!0),className:"flex items-center gap-2 bg-slate-800 hover:bg-slate-700 text-white px-8 py-4 rounded-2xl font-bold text-sm transition-all shadow-xl hover:shadow-2xl border-2 border-slate-700 hover:border-slate-600 hover:scale-105 group",children:[e.jsx(Lt,{size:18,className:"group-hover:rotate-12 transition-transform"}),e.jsx("span",{children:" "})]})}),p&&e.jsx("div",{className:"fixed inset-0 z-[110] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 animate-in fade-in",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full p-6 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6 border-b pb-4",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-xl text-slate-800 flex items-center gap-2",children:[e.jsx(Lt,{size:24,className:"text-indigo-600"}),"  "]}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"         "})]}),e.jsx("button",{onClick:()=>b(!1),className:"text-slate-400 hover:text-red-500",children:e.jsx(ut,{})})]}),y?e.jsx(pg,{section:y,initialData:Y(y),onSave:j=>O(y,j),onReset:()=>V(y),onClose:()=>N(null)}):e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("button",{onClick:()=>N("distribution"),className:"p-4 bg-slate-50 hover:bg-indigo-50 border rounded-xl text-right transition-colors group",children:e.jsx("span",{className:"font-bold text-slate-700 block group-hover:text-indigo-700",children:" "})}),e.jsx("button",{onClick:()=>N("homogeneity"),className:"p-4 bg-slate-50 hover:bg-indigo-50 border rounded-xl text-right transition-colors group",children:e.jsx("span",{className:"font-bold text-slate-700 block group-hover:text-indigo-700",children:" "})}),e.jsx("button",{onClick:()=>N("matrix"),className:"p-4 bg-slate-50 hover:bg-indigo-50 border rounded-xl text-right transition-colors group col-span-2",children:e.jsx("span",{className:"font-bold text-slate-700 block group-hover:text-indigo-700",children:" "})})]})]})})]})},pg=({section:n,initialData:t,onSave:a,onReset:i,onClose:o})=>{const[c,u]=R.useState(t),x=()=>Rb[n].title;return e.jsxs("div",{className:"space-y-4 animate-in slide-in-from-right-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("button",{onClick:o,className:"text-xs text-slate-500 hover:text-slate-800 flex items-center gap-1",children:[e.jsx(Ps,{size:12,className:"rotate-180"}),"  "]}),e.jsx("span",{className:"text-sm font-bold bg-indigo-100 text-indigo-700 px-3 py-1 rounded-full",children:x()})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-700 mb-1",children:"  "}),e.jsx(ze,{value:c.reading,onChange:h=>u({...c,reading:h}),className:"w-full border rounded-lg p-3 text-sm bg-slate-50 focus:bg-white focus:ring-2 focus:ring-indigo-500 max-h-60 overflow-y-auto",minHeight:"min-h-[120px]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-700 mb-1",children:" "}),e.jsx(ze,{value:c.diagnosis,onChange:h=>u({...c,diagnosis:h}),className:"w-full border rounded-lg p-3 text-sm bg-amber-50 focus:bg-white focus:ring-2 focus:ring-amber-500 max-h-60 overflow-y-auto",minHeight:"min-h-[120px]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-700 mb-1",children:" "}),e.jsx(ze,{value:c.recommendation,onChange:h=>u({...c,recommendation:h}),className:"w-full border rounded-lg p-3 text-sm bg-emerald-50 focus:bg-white focus:ring-2 focus:ring-emerald-500 max-h-60 overflow-y-auto",minHeight:"min-h-[120px]"})]}),e.jsxs("div",{className:"flex justify-between pt-4 border-t",children:[e.jsxs("button",{onClick:i,className:"text-red-500 text-xs font-bold flex items-center gap-1 hover:underline",children:[e.jsx(Fn,{size:12}),"   "]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:o,className:"px-4 py-2 text-slate-500 font-bold hover:bg-slate-100 rounded-lg",children:""}),e.jsxs("button",{onClick:()=>a(c),className:"px-6 py-2 bg-indigo-600 text-white font-bold rounded-lg hover:bg-indigo-700 shadow-md flex items-center gap-2",children:[e.jsx(ws,{size:16}),"  "]})]})]})]})},Pi={label:"  ( )",competencies:[{id:"oral_comms",label:"   ",criteria:[{id:1,label:"   "},{id:2,label:"    "},{id:3,label:"  "},{id:4,label:"   "},{id:5,label:"    "}]},{id:"reading_perf",label:"  ",criteria:[{id:1,label:"  "},{id:2,label:"    "},{id:3,label:"   "},{id:4,label:"   ( )"}]},{id:"written_comp",label:"  ",criteria:[{id:1,label:"  "},{id:2,label:"  "},{id:3,label:"  "},{id:4,label:"   "},{id:5,label:"  "}]},{id:"written_prod",label:"  ",criteria:[{id:1,label:"   "},{id:2,label:"  "},{id:3,label:"  "},{id:4,label:"       "},{id:5,label:" "}]}]},Db={distribution:{title:"  ( )",concept:"          (   ).",method:"      (   )    (+)   (+)."},homogeneity:{title:" ",concept:"              .",method:"   (Standard Deviation)  . (  15:  /   25: )."},matrix:{title:"  (/)",concept:"    ' ' (/)  ' ' (/).",method:"   4          ."}},Ak=({records:n,scope:t,contextName:a})=>{const[i,o]=R.useState(null),[c,u]=R.useState(null),[x,h]=R.useState(null),[p,b]=R.useState(!1),[y,N]=R.useState(null),[w,A]=R.useState({}),[I,H]=R.useState(null),[G,F]=R.useState(null);R.useEffect(()=>{const j=`mufattish_analysis_y4_arabic_${a}_${t}`,S=localStorage.getItem(j);if(S)try{A(JSON.parse(S))}catch(k){console.error("Failed to load custom analysis",k)}},[a,t]);const O=(j,S)=>{const k={...w,[j]:S};A(k),localStorage.setItem(`mufattish_analysis_y4_arabic_${a}_${t}`,JSON.stringify(k)),N(null)},V=j=>{const S={...w};delete S[j],A(S),localStorage.setItem(`mufattish_analysis_y4_arabic_${a}_${t}`,JSON.stringify(S))},X=R.useMemo(()=>n.flatMap(j=>j.students.map(S=>({...S,className:j.className,schoolName:j.schoolName}))),[n]),ee=X.length,Q=(j,S,k)=>{if(!j.results)return null;const z=j.results[S];return z?z[k]||z[String(k)]:null},se=R.useMemo(()=>X.map(j=>{let S=0,k=0,z=0,W=0,ue=0,J=0;Pi.competencies.forEach(_e=>{_e.criteria.forEach(ke=>{const ae=Q(j,_e.id,ke.id);if(ae){const Je=ae==="A"?3:ae==="B"?2:ae==="C"?1:0;k+=3,S+=Je,_e.id==="oral_comms"||_e.id==="reading_perf"?(z+=Je,W+=3):(ue+=Je,J+=3)}})});const be=k>0?S/k*100:0,Ee=W>0?z/W*100:0,Re=J>0?ue/J*100:0;return{...j,percent:be,oralPct:Ee,writtenPct:Re}}),[X]),ne=R.useMemo(()=>{let j=0,S=0,k=0;return se.forEach(z=>{z.percent>=66?j++:z.percent>=33?S++:k++}),{controlled:j,partial:S,limited:k}},[se]),P=R.useMemo(()=>{if(se.length===0)return 0;const j=se.reduce((k,z)=>k+z.percent,0)/se.length,S=se.reduce((k,z)=>k+Math.pow(z.percent-j,2),0)/se.length;return Math.sqrt(S)},[se]),ie=R.useMemo(()=>{const j={A:0,B:0,C:0,D:0,total:0};return X.forEach(S=>{Pi.competencies.forEach(k=>{k.criteria.forEach(z=>{const W=Q(S,k.id,z.id);W&&(j[W]++,j.total++)})})}),j.total===0&&(j.total=1),j},[X]),le=R.useMemo(()=>{const j={balanced_high:0,oral_dominant:0,written_dominant:0,struggling:0,total:0};return se.forEach(S=>{const k=S.oralPct>=50,z=S.writtenPct>=50;k&&z?j.balanced_high++:k&&!z?j.oral_dominant++:!k&&!z?j.struggling++:j.written_dominant++,j.total++}),j},[se]),Z=R.useMemo(()=>Pi.competencies.flatMap(j=>j.criteria.map(S=>{const k={A:0,B:0,C:0,D:0,total:0};X.forEach(W=>{const ue=Q(W,j.id,S.id);ue&&(k[ue]++,k.total++)});const z=k.total?(k.A+k.B)/k.total*100:0;return{...S,compId:j.id,stats:k,successRate:z}})).sort((j,S)=>j.successRate-S.successRate),[X]),q=j=>{if(j==="distribution"){const S=ie.A,k=ie.B,z=ie.C+ie.D,W=ie.total||1;return{reading:` : ${Math.round(S/W*100)}% |  : ${Math.round(k/W*100)}% | : ${Math.round(z/W*100)}%`,diagnosis:S+k>z?"         .":"       .",recommendation:S+k>z?"     .":"      ."}}if(j==="homogeneity"){let S="";return P<18?S="       .":P<30?S="      .":S="        ().",{reading:` : ${P.toFixed(2)}`,diagnosis:S,recommendation:P>30?"    .":"       ."}}if(j==="matrix"){const S=le.total||1,k=Math.round(le.oral_dominant/S*100);return{reading:`   : ${k}%  .`,diagnosis:k>20?"  :       .":"     .",recommendation:k>20?"    .":"    ."}}return{reading:"",diagnosis:"",recommendation:""}},Y=j=>w[j]||q(j),T=j=>j.includes(" ")?"              .":j.includes(" ")?"   .         .":j.includes("")?"              .":j.includes("")?"             .":j.includes(" ")?"      (/ ).    .":j.includes(" ")?"        (/)   .":j.includes(" ")?"    ( /)  .     .":j.includes(" ")?"    .      .":j.includes(" ")?"    ' ' (Dysgraphia)     .":"          .",E=(j,S,k)=>{const z=j.currentTarget.getBoundingClientRect();u({x:z.left+z.width/2,y:z.top-15,text:k,title:S})},L=()=>{u(null)},U=({section:j})=>e.jsx("button",{onClick:S=>{S.stopPropagation(),o(j)},className:"absolute top-4 left-4 p-2 bg-slate-100 hover:bg-indigo-100 text-slate-500 hover:text-indigo-600 rounded-full transition-all duration-300 opacity-0 group-hover:opacity-100 transform scale-90 group-hover:scale-100 z-10 shadow-sm",title:"  ",children:e.jsx(hn,{size:18})}),$=(j,S)=>{const k=j.oralPct,z=j.writtenPct,W=k-z;let ue="",J="",be="";W>25?(ue="   /  ",J="              .",be="           ."):W<-25?(ue="   /  ",J="     .        .",be="    (Pair Work)   ."):k<40&&z<40?(ue="   ",J="        .",be="    (PPRE)   ."):(ue=" ",J="           .",be="         .");let Ee;S&&(Ee={label:S.label,advice:T(S.label)}),F({studentName:j.fullName,profileType:ue,diagnosis:J,remedy:be,scores:{oral:k,written:z},clickedCriterion:Ee})},C=()=>{if(!i)return null;const j=Db[i],S=Y(i);let k=null;switch(i){case"distribution":const z=ie.A,W=ie.B,ue=ie.C+ie.D,J=ie.total;k=e.jsx("div",{className:"h-full flex flex-col items-center justify-center p-4 w-full",children:e.jsxs("div",{className:"grid grid-cols-3 gap-4 w-full max-w-2xl",children:[e.jsxs("div",{className:"bg-emerald-500/20 p-4 rounded-2xl border border-emerald-500/50 text-center",children:[e.jsxs("span",{className:"block text-4xl font-bold text-emerald-400 mb-2",children:[Math.round(z/J*100),"%"]}),e.jsx("span",{className:"text-sm text-emerald-200",children:" "})]}),e.jsxs("div",{className:"bg-blue-500/20 p-4 rounded-2xl border border-blue-500/50 text-center",children:[e.jsxs("span",{className:"block text-4xl font-bold text-blue-400 mb-2",children:[Math.round(W/J*100),"%"]}),e.jsx("span",{className:"text-sm text-blue-200",children:" "})]}),e.jsxs("div",{className:"bg-red-500/20 p-4 rounded-2xl border border-red-500/50 text-center",children:[e.jsxs("span",{className:"block text-4xl font-bold text-red-400 mb-2",children:[Math.round(ue/J*100),"%"]}),e.jsx("span",{className:"text-sm text-red-200",children:" (+)"})]})]})});break;case"homogeneity":k=e.jsxs("div",{className:"h-full flex flex-col items-center justify-center p-4 w-full",children:[e.jsx("div",{className:"relative w-80 h-40 bg-gray-700/50 rounded-t-full overflow-hidden mb-8 border-t-4 border-x-4 border-slate-600",children:e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-full origin-bottom transition-transform duration-1000",style:{transform:`rotate(${Math.min(P,40)/40*180-90}deg)`},children:e.jsx("div",{className:"w-2 h-full bg-white mx-auto shadow-[0_0_15px_white]"})})}),e.jsx("span",{className:"text-6xl font-bold text-purple-400 font-mono",children:P.toFixed(2)})]});break;case"matrix":k=e.jsx("div",{className:"h-full flex items-center justify-center w-full",children:e.jsxs("div",{className:"aspect-square w-[400px] relative bg-slate-700/30 rounded-2xl border border-slate-600 p-4 grid grid-cols-2 grid-rows-2 gap-2",children:[e.jsxs("div",{className:"bg-blue-500/20 rounded flex flex-col items-center justify-center border border-blue-500/30",children:[e.jsxs("span",{className:"text-2xl font-bold text-blue-400",children:[Math.round(le.oral_dominant/le.total*100),"%"]}),e.jsx("span",{className:"text-sm text-blue-300",children:"  ( > )"})]}),e.jsxs("div",{className:"bg-emerald-500/20 rounded flex flex-col items-center justify-center border border-emerald-500/30",children:[e.jsxs("span",{className:"text-2xl font-bold text-emerald-400",children:[Math.round(le.balanced_high/le.total*100),"%"]}),e.jsx("span",{className:"text-sm text-emerald-300",children:" "})]}),e.jsxs("div",{className:"bg-red-500/20 rounded flex flex-col items-center justify-center border border-red-500/30",children:[e.jsxs("span",{className:"text-2xl font-bold text-red-400",children:[Math.round(le.struggling/le.total*100),"%"]}),e.jsx("span",{className:"text-sm text-red-300",children:" "})]}),e.jsxs("div",{className:"bg-yellow-500/20 rounded flex flex-col items-center justify-center border border-yellow-500/30",children:[e.jsxs("span",{className:"text-2xl font-bold text-yellow-400",children:[Math.round(le.written_dominant/le.total*100),"%"]}),e.jsx("span",{className:"text-sm text-yellow-300",children:"  ( > )"})]})]})});break}return e.jsxs("div",{className:"fixed inset-0 z-[100] bg-slate-950 text-white flex animate-in zoom-in-95 duration-300 overflow-hidden",children:[e.jsx("button",{onClick:()=>o(null),className:"absolute top-6 left-6 p-2 bg-white/10 hover:bg-white/20 rounded-full z-50 text-white transition-all",children:e.jsx(mn,{size:24})}),e.jsxs("div",{className:"w-[400px] lg:w-[35%] bg-slate-900 border-l border-slate-800 p-8 flex flex-col shadow-2xl relative z-40 overflow-y-auto",children:[e.jsx("div",{className:"mb-8 pb-6 border-b border-slate-800",children:e.jsx("h2",{className:"text-2xl font-bold text-white font-serif",children:j.title})}),e.jsxs("div",{className:"space-y-8 flex-1",children:[e.jsxs("div",{className:"relative pl-4 border-r-2 border-indigo-500/50 pr-4",children:[e.jsxs("h4",{className:"text-indigo-400 font-bold uppercase text-xs mb-2 flex items-center gap-2",children:[e.jsx(kt,{size:14}),"   "]}),e.jsx("p",{className:"text-slate-300 leading-relaxed text-sm text-justify",children:S.reading})]}),e.jsxs("div",{className:"relative pl-4 border-r-2 border-amber-500/50 pr-4 bg-amber-500/5 p-4 rounded-l-xl",children:[e.jsxs("h4",{className:"text-amber-400 font-bold uppercase text-xs mb-2 flex items-center gap-2",children:[e.jsx(Ht,{size:14}),"  "]}),e.jsx("p",{className:"text-slate-200 leading-relaxed text-sm font-medium text-justify",children:S.diagnosis})]}),e.jsxs("div",{className:"relative pl-4 border-r-2 border-emerald-500/50 pr-4",children:[e.jsxs("h4",{className:"text-emerald-400 font-bold uppercase text-xs mb-2 flex items-center gap-2",children:[e.jsx(_t,{size:14}),"  "]}),e.jsx("p",{className:"text-slate-300 leading-relaxed text-sm text-justify",children:S.recommendation})]})]}),e.jsx("div",{className:"mt-8 pt-6 border-t border-slate-800 text-center",children:e.jsx("p",{className:"text-xs text-slate-500",children:"     2025"})})]}),e.jsxs("div",{className:"flex-1 bg-gradient-to-br from-slate-900 to-slate-950 flex flex-col items-center p-8 relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 opacity-10",style:{backgroundImage:"radial-gradient(circle at 2px 2px, white 1px, transparent 0)",backgroundSize:"40px 40px"}}),e.jsx("div",{className:"w-full max-w-3xl z-20 mb-4 mt-2 animate-in slide-in-from-top-4 shrink-0",children:e.jsxs("div",{className:"bg-white/5 backdrop-blur-md rounded-lg p-3 border border-white/10 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 p-1.5 bg-indigo-500/20 rounded-bl-lg border-b border-l border-white/10",children:e.jsx(dt,{size:14,className:"text-indigo-300"})}),e.jsxs("div",{className:"space-y-2 pt-1",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-[11px] font-bold text-indigo-300 uppercase mb-0.5",children:" "}),e.jsx("p",{className:"text-xs text-white/90 leading-relaxed",children:j.concept})]}),e.jsxs("div",{className:"pt-2 border-t border-white/10",children:[e.jsxs("h4",{className:"text-[10px] font-bold text-slate-400 uppercase mb-0.5 flex items-center gap-1",children:[e.jsx(Jn,{size:10}),"  "]}),e.jsx("p",{className:"text-[10px] text-slate-400 leading-relaxed font-mono opacity-80",children:j.method})]})]})]})}),e.jsx("div",{className:"relative z-10 w-full flex-1 flex items-center justify-center min-h-0",children:k})]})]})},D=()=>{if(!y||!p)return null;const j=Y(y);return e.jsx(gg,{section:y,initialData:j,onSave:S=>O(y,S),onReset:()=>V(y),onClose:()=>N(null)})};return ee===0?e.jsx("div",{className:"text-center p-10 text-gray-400",children:"  "}):e.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-700 pb-12 relative",children:[c&&e.jsxs("div",{className:"fixed z-[9999] pointer-events-none bg-slate-900 text-white px-3 py-2 rounded-lg shadow-xl text-xs max-w-xs border border-slate-700",style:{left:c.x,top:c.y,transform:"translate(-50%, -100%)"},children:[c.title&&e.jsx("div",{className:"font-bold border-b border-slate-600 pb-1 mb-1 text-yellow-400",children:c.title}),e.jsx("div",{children:c.text}),e.jsx("div",{className:"absolute -bottom-1.5 left-1/2 -translate-x-1/2 w-3 h-3 bg-slate-900 rotate-45 border-r border-b border-slate-700"})]}),C(),D(),I&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-in fade-in",onClick:()=>H(null),children:e.jsxs("div",{className:"bg-slate-900 w-full max-w-lg rounded-2xl p-6 border border-slate-700 shadow-2xl",onClick:j=>j.stopPropagation(),children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[e.jsx(dt,{size:20,className:"text-blue-400"})," ",I.title]}),e.jsx("button",{onClick:()=>H(null),className:"text-slate-400 hover:text-white transition-colors",children:e.jsx(ut,{})})]}),e.jsxs("p",{className:"text-slate-300 text-sm mb-6 italic border-r-4 border-slate-600 pr-4 leading-relaxed",children:['"',I.definition,'"']}),e.jsxs("div",{className:"bg-blue-900/20 p-4 rounded-xl border border-blue-900/50 mb-6",children:[e.jsxs("h4",{className:"text-xs font-bold text-blue-400 mb-2 flex items-center gap-1 uppercase tracking-wider",children:[e.jsx(gt,{size:12}),"  :"]}),e.jsx("p",{className:"text-xs text-blue-200 leading-relaxed text-justify",children:I.pedagogicalRef})]}),I.content]})}),G&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-in fade-in",onClick:()=>F(null),children:e.jsxs("div",{className:"bg-slate-900 w-full max-w-md rounded-3xl p-6 border border-slate-700 overflow-hidden flex flex-col max-h-[90vh] shadow-2xl",onClick:j=>j.stopPropagation(),children:[e.jsxs("div",{className:"flex justify-between items-start mb-6 shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-800 flex items-center justify-center border border-slate-600",children:e.jsx(Yn,{size:20,className:"text-slate-300"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-white",children:G.studentName}),e.jsx("span",{className:"text-[10px] bg-indigo-900/50 text-indigo-300 px-2 py-0.5 rounded border border-indigo-800 block w-fit mt-1",children:G.profileType})]})]}),e.jsx("button",{onClick:()=>F(null),className:"text-slate-400 hover:text-white transition-colors",children:e.jsx(ut,{})})]}),e.jsxs("div",{className:"space-y-4 overflow-y-auto pr-1 custom-scrollbar",children:[e.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-xl border border-slate-700",children:[e.jsxs("h4",{className:"text-xs font-bold text-slate-400 mb-2 flex items-center gap-2 uppercase tracking-wider",children:[e.jsx(Ku,{size:14}),"  "]}),e.jsx("p",{className:"text-sm text-slate-300 leading-relaxed text-justify",children:G.diagnosis})]}),e.jsxs("div",{className:"bg-emerald-900/20 p-4 rounded-xl border border-emerald-800/50",children:[e.jsxs("h4",{className:"text-xs font-bold text-emerald-400 mb-2 flex items-center gap-2 uppercase tracking-wider",children:[e.jsx(As,{size:14}),"   "]}),e.jsx("p",{className:"text-sm text-emerald-100 leading-relaxed text-justify",children:G.remedy})]}),G.clickedCriterion&&e.jsxs("div",{className:"bg-orange-900/20 p-4 rounded-xl border border-orange-800/50 animate-in slide-in-from-bottom-2",children:[e.jsxs("h4",{className:"text-xs font-bold text-orange-400 mb-2 flex items-center gap-2 uppercase tracking-wider",children:[e.jsx(Ht,{size:14}),"    :"]}),e.jsx("div",{className:"mb-2 text-xs font-bold text-orange-200 bg-orange-950/50 px-2 py-1 rounded inline-block",children:G.clickedCriterion.label}),e.jsx("p",{className:"text-sm text-orange-100 leading-relaxed text-justify",children:G.clickedCriterion.advice})]})]})]})}),e.jsxs("div",{className:"bg-white rounded-3xl shadow-xl border border-slate-100 overflow-hidden",children:[e.jsxs("div",{className:"bg-slate-900 text-white p-8 relative",children:[e.jsx("div",{className:"absolute top-0 right-0 p-10 opacity-10",children:e.jsx(js,{size:150})}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("div",{className:"flex items-center gap-2 mb-2 text-indigo-300 font-bold uppercase tracking-widest text-xs",children:t==="district"?"  ":t==="school"?" ":" "}),e.jsx("h2",{className:"text-4xl font-bold font-serif mb-2",children:Pi.label}),e.jsxs("p",{className:"text-slate-400 text-lg flex items-center gap-2",children:[e.jsx(ft,{size:18})," ",a]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 divide-y md:divide-y-0 md:divide-x md:divide-x-reverse divide-slate-100",children:[e.jsxs("div",{className:"p-6 flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-emerald-100 text-emerald-600 flex items-center justify-center",children:e.jsx(_t,{size:24})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase",children:" "}),e.jsxs("p",{className:"text-2xl font-bold text-emerald-700",children:[Math.round(ne.controlled/ee*100),"%"]})]})]}),e.jsxs("div",{className:"p-6 flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-orange-100 text-orange-600 flex items-center justify-center",children:e.jsx(El,{size:24})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase",children:" "}),e.jsxs("p",{className:"text-2xl font-bold text-orange-700",children:[Math.round(ne.partial/ee*100),"%"]})]})]}),e.jsxs("div",{className:"p-6 flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-red-100 text-red-600 flex items-center justify-center",children:e.jsx(un,{size:24})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase",children:" "}),e.jsxs("p",{className:"text-2xl font-bold text-red-700",children:[Math.round(ne.limited/ee*100),"%"]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-slate-200 cursor-pointer hover:shadow-lg hover:border-blue-300 transition-all group",onClick:()=>o("distribution"),onMouseEnter:j=>E(j," ","     ."),onMouseLeave:L,children:[e.jsx(U,{section:"distribution"}),e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("h3",{className:"font-bold text-lg text-slate-800 flex items-center gap-2",children:[e.jsx(kt,{size:20,className:"text-blue-500"})," "]}),e.jsx(dt,{size:16,className:"text-slate-300 group-hover:text-blue-500 transition-colors"})]}),e.jsx("div",{className:"flex items-end gap-4 h-40",children:["A","B","C","D"].map(j=>{const S=ie[j],k=ie.total>0?S/ie.total*100:0,z=j==="A"?"bg-emerald-500":j==="B"?"bg-blue-500":j==="C"?"bg-orange-500":"bg-red-500";return e.jsxs("div",{className:"flex-1 flex flex-col justify-end items-center h-full",children:[e.jsx("div",{className:`w-full rounded-t-lg ${z}`,style:{height:`${Math.max(k,5)}%`}}),e.jsxs("span",{className:"mt-2 font-bold text-slate-600 text-xs",children:[j," (",Math.round(k),"%)"]})]},j)})})]}),e.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-slate-200 cursor-pointer hover:shadow-lg hover:border-purple-300 transition-all",onClick:()=>o("homogeneity"),onMouseEnter:j=>E(j," ","     ."),onMouseLeave:L,children:[e.jsx(U,{section:"homogeneity"}),e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("h3",{className:"font-bold text-lg text-slate-800 flex items-center gap-2",children:[e.jsx(Ms,{size:20,className:"text-purple-500"})," "]}),e.jsx(dt,{size:16,className:"text-slate-300 group-hover:text-purple-500 transition-colors"})]}),e.jsx("div",{className:"flex justify-center items-center py-6",children:e.jsx("div",{className:"relative w-48 h-24 bg-gray-100 rounded-t-full overflow-hidden",children:e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-full origin-bottom transition-transform duration-1000",style:{transform:`rotate(${Math.min(P,40)/40*180-90}deg)`},children:e.jsx("div",{className:"w-1 h-full bg-slate-800 mx-auto"})})})}),e.jsxs("div",{className:"flex justify-between text-[10px] font-bold text-slate-400 px-8 -mt-2 mb-2",children:[e.jsx("span",{children:""}),e.jsx("span",{children:""})]}),e.jsx("div",{className:"text-center text-3xl font-bold text-purple-700",children:P.toFixed(1)})]}),e.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-slate-200 cursor-pointer hover:shadow-lg hover:border-teal-300 transition-all group relative lg:col-span-3 xl:col-span-1",onClick:()=>o("matrix"),children:[e.jsx(U,{section:"matrix"}),e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("h3",{className:"font-bold text-lg text-slate-800 flex items-center gap-2",children:[e.jsx(Aa,{size:20,className:"text-teal-500"}),"  (/)"]}),e.jsx(dt,{size:16,className:"text-slate-300 group-hover:text-teal-500 transition-colors"})]}),e.jsxs("div",{className:"flex gap-6 items-center justify-center relative",children:[x&&e.jsxs("div",{className:"absolute -top-16 left-1/2 -translate-x-1/2 z-20 bg-slate-800/90 text-white p-2 rounded text-xs w-40 text-center animate-in zoom-in-95 duration-200",children:[x==="q1"&&"  ( )",x==="q2"&&"  ()",x==="q3"&&" ",x==="q4"&&"  ()",e.jsx("div",{className:"absolute bottom-[-6px] left-1/2 -translate-x-1/2 w-2 h-2 bg-slate-800/90 rotate-45"})]}),e.jsxs("div",{className:"aspect-square w-52 relative bg-slate-50 rounded-xl border border-slate-200 p-2 grid grid-cols-2 grid-rows-2 gap-1 shrink-0",children:[e.jsx("div",{className:"bg-blue-100 rounded flex flex-col items-center justify-center hover:bg-blue-200 transition-colors",onMouseEnter:()=>h("q1"),onMouseLeave:()=>h(null),children:e.jsxs("span",{className:"text-xs font-bold text-blue-800",children:[Math.round(le.oral_dominant/le.total*100),"%"]})}),e.jsx("div",{className:"bg-emerald-100 rounded flex flex-col items-center justify-center hover:bg-emerald-200 transition-colors",onMouseEnter:()=>h("q2"),onMouseLeave:()=>h(null),children:e.jsxs("span",{className:"text-xs font-bold text-emerald-800",children:[Math.round(le.balanced_high/le.total*100),"%"]})}),e.jsx("div",{className:"bg-red-100 rounded flex flex-col items-center justify-center hover:bg-red-200 transition-colors",onMouseEnter:()=>h("q3"),onMouseLeave:()=>h(null),children:e.jsxs("span",{className:"text-xs font-bold text-red-800",children:[Math.round(le.struggling/le.total*100),"%"]})}),e.jsx("div",{className:"bg-yellow-100 rounded flex flex-col items-center justify-center hover:bg-yellow-200 transition-colors",onMouseEnter:()=>h("q4"),onMouseLeave:()=>h(null),children:e.jsxs("span",{className:"text-xs font-bold text-yellow-800",children:[Math.round(le.written_dominant/le.total*100),"%"]})}),e.jsx("div",{className:"absolute -left-4 top-1/2 -translate-y-1/2 -rotate-90 text-[10px] text-slate-500 font-bold tracking-widest",children:""}),e.jsx("div",{className:"absolute bottom-[-20px] left-1/2 -translate-x-1/2 text-[10px] text-slate-500 font-bold tracking-widest",children:""})]})]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-slate-200",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[e.jsxs("h3",{className:"font-bold text-lg text-slate-800 flex items-center gap-2",children:[e.jsx(qs,{size:20,className:"text-red-500"}),"   (  )"]}),e.jsxs("div",{className:"flex gap-3 text-[10px] bg-slate-50 p-2 rounded-lg border border-slate-100",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-emerald-500 rounded-full"}),e.jsx("span",{children:" ()"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full"}),e.jsx("span",{children:" ()"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-orange-400 rounded-full"}),e.jsx("span",{children:" ()"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-red-400 rounded-full"}),e.jsx("span",{children:" ()"})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Z.map((j,S)=>e.jsxs("div",{className:"bg-slate-50 rounded-xl p-4 border border-slate-100 group hover:border-indigo-100 transition-colors",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("span",{className:"text-[10px] text-slate-400 font-bold bg-white px-2 py-0.5 rounded border border-slate-100",children:j.compId==="oral_comms"?" ":j.compId==="reading_perf"?" ":j.compId==="written_comp"?" ":" "}),e.jsxs("span",{className:`text-xs font-bold px-2 py-1 rounded ${j.successRate<50?"bg-red-100 text-red-600":"bg-green-100 text-green-600"}`,children:[Math.round(j.successRate),"% "]})]}),e.jsx("h4",{className:"font-bold text-slate-800 text-sm mb-3 line-clamp-2 min-h-[40px]",children:j.label}),e.jsxs("div",{className:"flex h-2 rounded-full overflow-hidden relative",children:[e.jsx("div",{className:"bg-emerald-500",style:{width:`${j.stats.A/j.stats.total*100}%`}}),e.jsx("div",{className:"bg-blue-400",style:{width:`${j.stats.B/j.stats.total*100}%`}}),e.jsx("div",{className:"bg-orange-400",style:{width:`${j.stats.C/j.stats.total*100}%`}}),e.jsx("div",{className:"bg-red-400",style:{width:`${j.stats.D/j.stats.total*100}%`}})]}),e.jsxs("div",{className:"flex justify-between text-[10px] text-slate-400 font-mono mt-2 pt-2 border-t border-slate-100",children:[e.jsxs("span",{className:"font-bold text-slate-500",children:[j.stats.A+j.stats.B," "]}),e.jsxs("span",{className:"font-bold text-slate-500",children:[j.stats.C+j.stats.D," "]})]})]},S))})]}),t==="class"&&e.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-red-100 border-t-4 border-t-red-500 mt-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h3",{className:"font-bold text-lg text-slate-800 flex items-center gap-2",children:[e.jsx(dn,{size:20,className:"text-red-500"}),"   ( )"]}),e.jsx("span",{className:"bg-red-50 text-red-600 text-xs px-3 py-1 rounded-full font-bold",children:"  "})]}),e.jsx("div",{className:"masonry-grid grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Pi.competencies.map(j=>e.jsx(Cl.Fragment,{children:j.criteria.map(S=>{const k=X.filter(z=>Q(z,j.id,S.id)==="D");return k.length===0?null:e.jsxs("div",{className:"bg-red-50/30 rounded-xl p-4 border border-red-100 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start gap-2 mb-3",children:[e.jsx("div",{className:"mt-1 w-2 h-2 rounded-full bg-red-500 shrink-0"}),e.jsx("h5",{className:"font-bold text-slate-700 text-xs leading-snug",children:S.label})]}),e.jsx("div",{className:"flex flex-wrap gap-1.5",children:k.map(z=>{const W=se.find(ue=>ue.id===z.id)||z;return e.jsx("button",{onClick:()=>$(W,S),className:"px-2 py-1 rounded text-[10px] font-bold bg-white text-red-700 border border-red-100 shadow-sm hover:bg-red-500 hover:text-white hover:border-red-500 transition-all cursor-pointer",children:z.fullName},z.id)})})]},`${j.id}-${S.id}`)})},j.id))})]}),e.jsx("div",{className:"fixed bottom-6 left-1/2 transform -translate-x-1/2 z-50",children:e.jsxs("button",{onClick:()=>b(!0),className:"flex items-center gap-2 bg-slate-800 hover:bg-slate-700 text-white px-8 py-4 rounded-2xl font-bold text-sm transition-all shadow-xl hover:shadow-2xl border-2 border-slate-700 hover:border-slate-600 hover:scale-105 group",children:[e.jsx(Lt,{size:18,className:"group-hover:rotate-12 transition-transform"}),e.jsx("span",{children:" "})]})}),p&&e.jsx("div",{className:"fixed inset-0 z-[110] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 animate-in fade-in",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full p-6 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6 border-b pb-4",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-xl text-slate-800 flex items-center gap-2",children:[e.jsx(Lt,{size:24,className:"text-indigo-600"}),"  "]}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"         "})]}),e.jsx("button",{onClick:()=>b(!1),className:"text-slate-400 hover:text-red-500",children:e.jsx(ut,{})})]}),y?e.jsx(gg,{section:y,initialData:Y(y),onSave:j=>O(y,j),onReset:()=>V(y),onClose:()=>N(null)}):e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("button",{onClick:()=>N("distribution"),className:"p-4 bg-slate-50 hover:bg-indigo-50 border rounded-xl text-right transition-colors group",children:e.jsx("span",{className:"font-bold text-slate-700 block group-hover:text-indigo-700",children:" "})}),e.jsx("button",{onClick:()=>N("homogeneity"),className:"p-4 bg-slate-50 hover:bg-indigo-50 border rounded-xl text-right transition-colors group",children:e.jsx("span",{className:"font-bold text-slate-700 block group-hover:text-indigo-700",children:" "})}),e.jsx("button",{onClick:()=>N("matrix"),className:"p-4 bg-slate-50 hover:bg-indigo-50 border rounded-xl text-right transition-colors group col-span-2",children:e.jsx("span",{className:"font-bold text-slate-700 block group-hover:text-indigo-700",children:" "})})]})]})})]})},gg=({section:n,initialData:t,onSave:a,onReset:i,onClose:o})=>{const[c,u]=R.useState(t),x=()=>Db[n].title;return e.jsxs("div",{className:"space-y-4 animate-in slide-in-from-right-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("button",{onClick:o,className:"text-xs text-slate-500 hover:text-slate-800 flex items-center gap-1",children:[e.jsx(Ps,{size:12,className:"rotate-180"}),"  "]}),e.jsx("span",{className:"text-sm font-bold bg-indigo-100 text-indigo-700 px-3 py-1 rounded-full",children:x()})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-700 mb-1",children:"  "}),e.jsx(ze,{value:c.reading,onChange:h=>u({...c,reading:h}),className:"w-full border rounded-lg p-3 text-sm bg-slate-50 focus:bg-white focus:ring-2 focus:ring-indigo-500 max-h-60 overflow-y-auto",minHeight:"min-h-[120px]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-700 mb-1",children:" "}),e.jsx(ze,{value:c.diagnosis,onChange:h=>u({...c,diagnosis:h}),className:"w-full border rounded-lg p-3 text-sm bg-amber-50 focus:bg-white focus:ring-2 focus:ring-amber-500 max-h-60 overflow-y-auto",minHeight:"min-h-[120px]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-700 mb-1",children:" "}),e.jsx(ze,{value:c.recommendation,onChange:h=>u({...c,recommendation:h}),className:"w-full border rounded-lg p-3 text-sm bg-emerald-50 focus:bg-white focus:ring-2 focus:ring-emerald-500 max-h-60 overflow-y-auto",minHeight:"min-h-[120px]"})]}),e.jsxs("div",{className:"flex justify-between pt-4 border-t",children:[e.jsxs("button",{onClick:i,className:"text-red-500 text-xs font-bold flex items-center gap-1 hover:underline",children:[e.jsx(Fn,{size:12}),"   "]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:o,className:"px-4 py-2 text-slate-500 font-bold hover:bg-slate-100 rounded-lg",children:""}),e.jsxs("button",{onClick:()=>a(c),className:"px-6 py-2 bg-indigo-600 text-white font-bold rounded-lg hover:bg-indigo-700 shadow-md flex items-center gap-2",children:[e.jsx(ws,{size:16}),"  "]})]})]})]})},qi={label:" ( )",competencies:[{id:"control_resources",label:"    ",criteria:[{id:1,label:" (< 1,000,000)    "},{id:2,label:"  (    )"},{id:3,label:"   ( )"}]},{id:"methodological_solving",label:"   ",criteria:[{id:1,label:"  (  )"},{id:2,label:"   (  )"},{id:3,label:"   (  )"},{id:4,label:"  (  )"}]}]},Ib={distribution:{title:"  ( )",concept:"         (     ).",method:"      (   ).  (+)    (+)  ."},homogeneity:{title:" ",concept:"            .",method:"   (Standard Deviation). (  15:  /   25:   )."},matrix:{title:" ( / )",concept:"    ' ' ( )  '  ' ( ).",method:"   4      '  '  ''."}},Mk=({records:n,scope:t,contextName:a})=>{const[i,o]=R.useState(null),[c,u]=R.useState(null),[x,h]=R.useState(null),[p,b]=R.useState(!1),[y,N]=R.useState(null),[w,A]=R.useState({}),[I,H]=R.useState(null),[G,F]=R.useState(null);R.useEffect(()=>{const j=`mufattish_analysis_y4_math_${a}_${t}`,S=localStorage.getItem(j);if(S)try{A(JSON.parse(S))}catch(k){console.error("Failed to load custom analysis",k)}},[a,t]);const O=(j,S)=>{const k={...w,[j]:S};A(k),localStorage.setItem(`mufattish_analysis_y4_math_${a}_${t}`,JSON.stringify(k)),N(null)},V=j=>{const S={...w};delete S[j],A(S),localStorage.setItem(`mufattish_analysis_y4_math_${a}_${t}`,JSON.stringify(S))},X=R.useMemo(()=>n.flatMap(j=>j.students.map(S=>({...S,className:j.className,schoolName:j.schoolName}))),[n]),ee=X.length,Q=(j,S,k)=>{if(!j.results)return null;const z=j.results[S];return z?z[k]||z[String(k)]:null},se=R.useMemo(()=>X.map(j=>{let S=0,k=0,z=0,W=0,ue=0,J=0;qi.competencies.forEach(_e=>{_e.criteria.forEach(ke=>{const ae=Q(j,_e.id,ke.id);if(ae){const Je=ae==="A"?3:ae==="B"?2:ae==="C"?1:0;k+=3,S+=Je,_e.id==="control_resources"?(z+=Je,W+=3):(ue+=Je,J+=3)}})});const be=k>0?S/k*100:0,Ee=W>0?z/W*100:0,Re=J>0?ue/J*100:0;return{...j,percent:be,resPct:Ee,solvPct:Re}}),[X]),ne=R.useMemo(()=>{let j=0,S=0,k=0;return se.forEach(z=>{z.percent>=66?j++:z.percent>=33?S++:k++}),{controlled:j,partial:S,limited:k}},[se]),P=R.useMemo(()=>{if(se.length===0)return 0;const j=se.reduce((k,z)=>k+z.percent,0)/se.length,S=se.reduce((k,z)=>k+Math.pow(z.percent-j,2),0)/se.length;return Math.sqrt(S)},[se]),ie=R.useMemo(()=>{const j={A:0,B:0,C:0,D:0,total:0};return X.forEach(S=>{qi.competencies.forEach(k=>{k.criteria.forEach(z=>{const W=Q(S,k.id,z.id);W&&(j[W]++,j.total++)})})}),j.total===0&&(j.total=1),j},[X]),le=R.useMemo(()=>{const j={balanced_high:0,method_gap:0,knowledge_gap:0,struggling:0,total:0};return se.forEach(S=>{const k=S.resPct>=50,z=S.solvPct>=50;k&&z?j.balanced_high++:k&&!z?j.method_gap++:!k&&z?j.knowledge_gap++:j.struggling++,j.total++}),j},[se]),Z=R.useMemo(()=>qi.competencies.flatMap(j=>j.criteria.map(S=>{const k={A:0,B:0,C:0,D:0,total:0};X.forEach(W=>{const ue=Q(W,j.id,S.id);ue&&(k[ue]++,k.total++)});const z=k.total?(k.A+k.B)/k.total*100:0;return{...S,compId:j.id,stats:k,successRate:z}})).sort((j,S)=>j.successRate-S.successRate),[X]),q=j=>{if(j==="distribution"){const S=ie.A,k=ie.B,z=ie.C+ie.D,W=ie.total||1;let ue=S+k>z?" :      (  ).    .":" :    (+)        ( ).";return{reading:` : ${Math.round(S/W*100)}% |  : ${Math.round(k/W*100)}% | : ${Math.round(z/W*100)}%`,diagnosis:ue,recommendation:S+k>z?"   .":"     ."}}if(j==="homogeneity"){let S="";return P<18?S="  .      .":P<28?S=" .      .":S=" .        .",{reading:` : ${P.toFixed(2)}`,diagnosis:S,recommendation:P>28?"   (  /  ).":"   ."}}if(j==="matrix"){const S=le.total||1,k=Math.round(le.method_gap/S*100),z=Math.round(le.knowledge_gap/S*100);return{reading:` >  (): ${k}% |  >  (): ${z}%`,diagnosis:k>20?"          .":"    .",recommendation:k>20?"  ' '  .":"   ."}}return{reading:"",diagnosis:"",recommendation:""}},Y=j=>w[j]||q(j),T=(j,S,k)=>{const z=j.currentTarget.getBoundingClientRect();u({x:z.left+z.width/2,y:z.top-15,text:k,title:S})},E=()=>{u(null)},L=({section:j})=>e.jsx("button",{onClick:S=>{S.stopPropagation(),o(j)},className:"absolute top-4 left-4 p-2 bg-slate-100 hover:bg-indigo-100 text-slate-500 hover:text-indigo-600 rounded-full transition-all duration-300 opacity-0 group-hover:opacity-100 transform scale-90 group-hover:scale-100 z-10 shadow-sm",title:"  ",children:e.jsx(hn,{size:18})}),U=j=>j.includes("")||j.includes("")?"       /. :     .":j.includes("")?"      ()    . :   .":j.includes("")?"    ( ). :     ( ).":j.includes(" ")?"       . :     .":j.includes("")?"     (   ...). :   .":"      .",$=(j,S)=>{const k=j.resPct,z=j.solvPct;let W="",ue="",J="";k>=60&&z<40?(W="  ()",ue="        (   ).",J="  ' '    ."):k<40&&z>=60?(W="   ",ue="         ( ).",J="      ."):k<35&&z<35?(W=" ",ue="     ( ).",J="    ."):(W=" ",ue="    .",J="   .");let be;S&&(be={label:S.label,advice:U(S.label)}),F({studentName:j.fullName,profileType:W,diagnosis:ue,remedy:J,scores:{resources:k,solving:z},clickedCriterion:be})},C=()=>{if(!i)return null;const j=Ib[i],S=Y(i);let k=null;switch(i){case"distribution":const z=ie.A,W=ie.B,ue=ie.C+ie.D,J=ie.total;k=e.jsx("div",{className:"h-full flex flex-col items-center justify-center p-4 w-full",children:e.jsxs("div",{className:"grid grid-cols-3 gap-4 w-full max-w-2xl",children:[e.jsxs("div",{className:"bg-emerald-500/20 p-4 rounded-2xl border border-emerald-500/50 text-center",children:[e.jsxs("span",{className:"block text-4xl font-bold text-emerald-400 mb-2",children:[Math.round(z/J*100),"%"]}),e.jsx("span",{className:"text-sm text-emerald-200",children:" "})]}),e.jsxs("div",{className:"bg-blue-500/20 p-4 rounded-2xl border border-blue-500/50 text-center",children:[e.jsxs("span",{className:"block text-4xl font-bold text-blue-400 mb-2",children:[Math.round(W/J*100),"%"]}),e.jsx("span",{className:"text-sm text-blue-200",children:" "})]}),e.jsxs("div",{className:"bg-red-500/20 p-4 rounded-2xl border border-red-500/50 text-center",children:[e.jsxs("span",{className:"block text-4xl font-bold text-red-400 mb-2",children:[Math.round(ue/J*100),"%"]}),e.jsx("span",{className:"text-sm text-red-200",children:" (+)"})]})]})});break;case"homogeneity":k=e.jsxs("div",{className:"h-full flex flex-col items-center justify-center p-4 w-full",children:[e.jsx("div",{className:"relative w-80 h-40 bg-gray-700/50 rounded-t-full overflow-hidden mb-8 border-t-4 border-x-4 border-slate-600",children:e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-full origin-bottom transition-transform duration-1000",style:{transform:`rotate(${Math.min(P,40)/40*180-90}deg)`},children:e.jsx("div",{className:"w-2 h-full bg-white mx-auto shadow-[0_0_15px_white]"})})}),e.jsx("span",{className:"text-6xl font-bold text-purple-400 font-mono",children:P.toFixed(2)})]});break;case"matrix":k=e.jsx("div",{className:"h-full flex items-center justify-center w-full",children:e.jsxs("div",{className:"aspect-square w-[400px] relative bg-slate-700/30 rounded-2xl border border-slate-600 p-4 grid grid-cols-2 grid-rows-2 gap-2",children:[e.jsxs("div",{className:"bg-blue-100 rounded flex flex-col items-center justify-center hover:bg-blue-200 transition-colors",onMouseEnter:()=>h("q1"),onMouseLeave:()=>h(null),children:[e.jsxs("span",{className:"text-2xl font-bold text-blue-800",children:[Math.round(le.knowledge_gap/le.total*100),"%"]}),e.jsxs("span",{className:"text-sm text-blue-800 font-bold mt-1",children:[" ",">"," "]})]}),e.jsxs("div",{className:"bg-emerald-100 rounded flex flex-col items-center justify-center hover:bg-emerald-200 transition-colors",onMouseEnter:()=>h("q2"),onMouseLeave:()=>h(null),children:[e.jsxs("span",{className:"text-2xl font-bold text-emerald-800",children:[Math.round(le.balanced_high/le.total*100),"%"]}),e.jsx("span",{className:"text-sm text-emerald-800 font-bold mt-1",children:" "})]}),e.jsxs("div",{className:"bg-red-100 rounded flex flex-col items-center justify-center hover:bg-red-200 transition-colors",onMouseEnter:()=>h("q3"),onMouseLeave:()=>h(null),children:[e.jsxs("span",{className:"text-2xl font-bold text-red-800",children:[Math.round(le.struggling/le.total*100),"%"]}),e.jsx("span",{className:"text-sm text-red-800 font-bold mt-1",children:" "})]}),e.jsxs("div",{className:"bg-yellow-100 rounded flex flex-col items-center justify-center hover:bg-yellow-200 transition-colors",onMouseEnter:()=>h("q4"),onMouseLeave:()=>h(null),children:[e.jsxs("span",{className:"text-2xl font-bold text-yellow-800",children:[Math.round(le.method_gap/le.total*100),"%"]}),e.jsxs("span",{className:"text-sm text-yellow-800 font-bold mt-1",children:[" ",">"," "]})]})]})});break}return e.jsxs("div",{className:"fixed inset-0 z-[100] bg-slate-950 text-white flex animate-in zoom-in-95 duration-300 overflow-hidden",children:[e.jsx("button",{onClick:()=>o(null),className:"absolute top-6 left-6 p-2 bg-white/10 hover:bg-white/20 rounded-full z-50 text-white transition-all",children:e.jsx(mn,{size:24})}),e.jsxs("div",{className:"w-[400px] lg:w-[35%] bg-slate-900 border-l border-slate-800 p-8 flex flex-col shadow-2xl relative z-40 overflow-y-auto",children:[e.jsx("div",{className:"mb-8 pb-6 border-b border-slate-800",children:e.jsx("h2",{className:"text-2xl font-bold text-white font-serif",children:j.title})}),e.jsxs("div",{className:"space-y-8 flex-1",children:[e.jsxs("div",{className:"relative pl-4 border-r-2 border-indigo-500/50 pr-4",children:[e.jsxs("h4",{className:"text-indigo-400 font-bold uppercase text-xs mb-2 flex items-center gap-2",children:[e.jsx(kt,{size:14}),"   "]}),e.jsx("p",{className:"text-slate-300 leading-relaxed text-sm text-justify",children:S.reading})]}),e.jsxs("div",{className:"relative pl-4 border-r-2 border-amber-500/50 pr-4 bg-amber-500/5 p-4 rounded-l-xl",children:[e.jsxs("h4",{className:"text-amber-400 font-bold uppercase text-xs mb-2 flex items-center gap-2",children:[e.jsx(Ht,{size:14}),"  "]}),e.jsx("p",{className:"text-slate-200 leading-relaxed text-sm font-medium text-justify",children:S.diagnosis})]}),e.jsxs("div",{className:"relative pl-4 border-r-2 border-emerald-500/50 pr-4",children:[e.jsxs("h4",{className:"text-emerald-400 font-bold uppercase text-xs mb-2 flex items-center gap-2",children:[e.jsx(_t,{size:14}),"  "]}),e.jsx("p",{className:"text-slate-300 leading-relaxed text-sm text-justify",children:S.recommendation})]})]}),e.jsx("div",{className:"mt-8 pt-6 border-t border-slate-800 text-center",children:e.jsx("p",{className:"text-xs text-slate-500",children:"     2025"})})]}),e.jsxs("div",{className:"flex-1 bg-gradient-to-br from-slate-900 to-slate-950 flex flex-col items-center p-8 relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 opacity-10",style:{backgroundImage:"radial-gradient(circle at 2px 2px, white 1px, transparent 0)",backgroundSize:"40px 40px"}}),e.jsx("div",{className:"w-full max-w-3xl z-20 mb-4 mt-2 animate-in slide-in-from-top-4 shrink-0",children:e.jsxs("div",{className:"bg-white/5 backdrop-blur-md rounded-lg p-3 border border-white/10 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 p-1.5 bg-indigo-500/20 rounded-bl-lg border-b border-l border-white/10",children:e.jsx(dt,{size:14,className:"text-indigo-300"})}),e.jsxs("div",{className:"space-y-2 pt-1",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-[11px] font-bold text-indigo-300 uppercase mb-0.5",children:" "}),e.jsx("p",{className:"text-xs text-white/90 leading-relaxed",children:j.concept})]}),e.jsxs("div",{className:"pt-2 border-t border-white/10",children:[e.jsxs("h4",{className:"text-[10px] font-bold text-slate-400 uppercase mb-0.5 flex items-center gap-1",children:[e.jsx(Jn,{size:10}),"  "]}),e.jsx("p",{className:"text-[10px] text-slate-400 leading-relaxed font-mono opacity-80",children:j.method})]})]})]})}),e.jsx("div",{className:"relative z-10 w-full flex-1 flex items-center justify-center min-h-0",children:k})]})]})},D=()=>{if(!y||!p)return null;const j=Y(y);return e.jsx(bg,{section:y,initialData:j,onSave:S=>O(y,S),onReset:()=>V(y),onClose:()=>N(null)})};return ee===0?e.jsx("div",{className:"text-center p-10 text-gray-400",children:"  "}):e.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-700 pb-12 relative",children:[c&&e.jsxs("div",{className:"fixed z-[9999] pointer-events-none bg-slate-900 text-white px-3 py-2 rounded-lg shadow-xl text-xs max-w-xs border border-slate-700",style:{left:c.x,top:c.y,transform:"translate(-50%, -100%)"},children:[c.title&&e.jsx("div",{className:"font-bold border-b border-slate-600 pb-1 mb-1 text-yellow-400",children:c.title}),e.jsx("div",{children:c.text}),e.jsx("div",{className:"absolute -bottom-1.5 left-1/2 -translate-x-1/2 w-3 h-3 bg-slate-900 rotate-45 border-r border-b border-slate-700"})]}),C(),D(),I&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-in fade-in",onClick:()=>H(null),children:e.jsxs("div",{className:"bg-slate-900 w-full max-w-lg rounded-2xl p-6 border border-slate-700 shadow-2xl",onClick:j=>j.stopPropagation(),children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[e.jsx(dt,{size:20,className:"text-blue-400"})," ",I.title]}),e.jsx("button",{onClick:()=>H(null),className:"text-slate-400 hover:text-white transition-colors",children:e.jsx(ut,{})})]}),e.jsxs("p",{className:"text-slate-300 text-sm mb-6 italic border-r-4 border-slate-600 pr-4 leading-relaxed",children:['"',I.definition,'"']}),e.jsxs("div",{className:"bg-blue-900/20 p-4 rounded-xl border border-blue-900/50 mb-6",children:[e.jsxs("h4",{className:"text-xs font-bold text-blue-400 mb-2 flex items-center gap-1 uppercase tracking-wider",children:[e.jsx(gt,{size:12}),"  :"]}),e.jsx("p",{className:"text-xs text-blue-200 leading-relaxed text-justify",children:I.pedagogicalRef})]}),I.content]})}),G&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-in fade-in",onClick:()=>F(null),children:e.jsxs("div",{className:"bg-slate-900 w-full max-w-md rounded-3xl p-6 border border-slate-700 overflow-hidden flex flex-col max-h-[90vh] shadow-2xl",onClick:j=>j.stopPropagation(),children:[e.jsxs("div",{className:"flex justify-between items-start mb-6 shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-purple-500/20 flex items-center justify-center border border-purple-500/50 shadow-inner",children:e.jsx(cn,{size:24,className:"text-purple-300"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:G.studentName}),e.jsx("span",{className:"text-[10px] bg-purple-900/50 text-purple-300 px-2 py-0.5 rounded border border-purple-800 block w-fit mt-1",children:G.profileType})]})]}),e.jsx("button",{onClick:()=>F(null),className:"text-slate-400 hover:text-white transition-colors",children:e.jsx(ut,{})})]}),e.jsxs("div",{className:"space-y-4 overflow-y-auto pr-1 custom-scrollbar",children:[e.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-xl border border-slate-700",children:[e.jsxs("h4",{className:"text-xs font-bold text-slate-400 mb-2 flex items-center gap-2 uppercase tracking-wider",children:[e.jsx(Ku,{size:14}),"  "]}),e.jsx("p",{className:"text-sm text-slate-300 leading-relaxed text-justify",children:G.diagnosis})]}),e.jsxs("div",{className:"bg-emerald-900/20 p-4 rounded-xl border border-emerald-800/50",children:[e.jsxs("h4",{className:"text-xs font-bold text-emerald-400 mb-2 flex items-center gap-2 uppercase tracking-wider",children:[e.jsx(As,{size:14}),"   "]}),e.jsx("p",{className:"text-sm text-emerald-100 leading-relaxed text-justify",children:G.remedy})]}),G.clickedCriterion&&e.jsxs("div",{className:"bg-orange-900/20 p-4 rounded-xl border border-orange-800/50 animate-in slide-in-from-bottom-2",children:[e.jsxs("h4",{className:"text-xs font-bold text-orange-400 mb-2 flex items-center gap-2 uppercase tracking-wider",children:[e.jsx(Ht,{size:14}),"    :"]}),e.jsx("div",{className:"mb-2 text-xs font-bold text-orange-200 bg-orange-950/50 px-2 py-1 rounded inline-block",children:G.clickedCriterion.label}),e.jsx("p",{className:"text-sm text-orange-100 leading-relaxed text-justify",children:G.clickedCriterion.advice})]})]})]})}),e.jsxs("div",{className:"bg-white rounded-3xl shadow-xl border border-slate-100 overflow-hidden",children:[e.jsxs("div",{className:"bg-slate-900 text-white p-8 relative",children:[e.jsx("div",{className:"absolute top-0 right-0 p-10 opacity-10",children:e.jsx(cn,{size:150})}),e.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row justify-between items-end gap-6",children:[e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center gap-2 mb-2 text-indigo-300 font-bold uppercase tracking-widest text-xs",children:t==="district"?"  ":t==="school"?" ":" "}),e.jsx("h2",{className:"text-4xl font-bold font-serif mb-2",children:qi.label}),e.jsxs("p",{className:"text-slate-400 text-lg flex items-center gap-2",children:[e.jsx(ft,{size:18})," ",a]})]}),e.jsx("div",{className:"flex gap-4",children:e.jsxs("div",{className:"bg-slate-800 p-4 rounded-2xl text-center min-w-[100px] border border-slate-700 flex flex-col justify-center",children:[e.jsx("span",{className:"block text-3xl font-bold text-white",children:ee}),e.jsx("span",{className:"text-xs text-slate-400 font-bold",children:""})]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 divide-y md:divide-y-0 md:divide-x md:divide-x-reverse divide-slate-100",children:[e.jsxs("div",{className:"p-6 flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-emerald-100 text-emerald-600 flex items-center justify-center",children:e.jsx(_t,{size:24})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase",children:" "}),e.jsxs("p",{className:"text-2xl font-bold text-emerald-700",children:[Math.round(ne.controlled/ee*100),"%"]})]})]}),e.jsxs("div",{className:"p-6 flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-orange-100 text-orange-600 flex items-center justify-center",children:e.jsx(El,{size:24})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase",children:" "}),e.jsxs("p",{className:"text-2xl font-bold text-orange-700",children:[Math.round(ne.partial/ee*100),"%"]})]})]}),e.jsxs("div",{className:"p-6 flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-red-100 text-red-600 flex items-center justify-center",children:e.jsx(un,{size:24})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase",children:" "}),e.jsxs("p",{className:"text-2xl font-bold text-red-700",children:[Math.round(ne.limited/ee*100),"%"]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-slate-200 cursor-pointer hover:shadow-lg hover:border-blue-300 transition-all group",onClick:()=>o("distribution"),onMouseEnter:j=>T(j," ","     ."),onMouseLeave:E,children:[e.jsx(L,{section:"distribution"}),e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("h3",{className:"font-bold text-lg text-slate-800 flex items-center gap-2",children:[e.jsx(kt,{size:20,className:"text-blue-500"})," "]}),e.jsx(dt,{size:16,className:"text-slate-300 group-hover:text-blue-500 transition-colors"})]}),e.jsx("div",{className:"flex items-end gap-4 h-40",children:["A","B","C","D"].map(j=>{const S=ie[j],k=ie.total>0?S/ie.total*100:0,z=j==="A"?"bg-emerald-500":j==="B"?"bg-blue-500":j==="C"?"bg-orange-500":"bg-red-500";return e.jsxs("div",{className:"flex-1 flex flex-col justify-end items-center h-full",children:[e.jsx("div",{className:`w-full rounded-t-lg ${z}`,style:{height:`${Math.max(k,5)}%`}}),e.jsxs("span",{className:"mt-2 font-bold text-slate-600 text-xs",children:[j," (",Math.round(k),"%)"]})]},j)})})]}),e.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-slate-200 cursor-pointer hover:shadow-lg hover:border-purple-300 transition-all",onClick:()=>o("homogeneity"),onMouseEnter:j=>T(j," ","     ."),onMouseLeave:E,children:[e.jsx(L,{section:"homogeneity"}),e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("h3",{className:"font-bold text-lg text-slate-800 flex items-center gap-2",children:[e.jsx(Ms,{size:20,className:"text-purple-500"})," "]}),e.jsx(dt,{size:16,className:"text-slate-300 group-hover:text-purple-500 transition-colors"})]}),e.jsx("div",{className:"flex justify-center items-center py-6",children:e.jsx("div",{className:"relative w-48 h-24 bg-gray-100 rounded-t-full overflow-hidden",children:e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-full origin-bottom transition-transform duration-1000",style:{transform:`rotate(${Math.min(P,40)/40*180-90}deg)`},children:e.jsx("div",{className:"w-1 h-full bg-slate-800 mx-auto"})})})}),e.jsx("div",{className:"text-center text-3xl font-bold text-purple-700",children:P.toFixed(1)})]}),e.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-slate-200 cursor-pointer hover:shadow-lg hover:border-teal-300 transition-all group relative lg:col-span-3 xl:col-span-1",onClick:()=>o("matrix"),children:[e.jsx(L,{section:"matrix"}),e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("h3",{className:"font-bold text-lg text-slate-800 flex items-center gap-2",children:[e.jsx(Aa,{size:20,className:"text-teal-500"}),"  (/)"]}),e.jsx(dt,{size:16,className:"text-slate-300 group-hover:text-teal-500 transition-colors"})]}),e.jsxs("div",{className:"flex gap-6 items-center justify-center relative",children:[x&&e.jsxs("div",{className:"absolute -top-16 left-1/2 -translate-x-1/2 z-20 bg-slate-800/90 text-white p-2 rounded-xl text-xs w-48 text-center animate-in zoom-in-95 duration-200 shadow-xl border border-slate-600",children:[e.jsxs("div",{className:"font-bold border-b border-slate-600 pb-1 mb-1 text-slate-200",children:[x==="q1"&&"  /  ",x==="q2"&&"  ()",x==="q3"&&"   ",x==="q4"&&"  /  "]}),e.jsxs("div",{className:"text-[10px] text-slate-400",children:[x==="q1"&&"     ",x==="q2"&&"    ",x==="q3"&&"   ",x==="q4"&&"     "]}),e.jsx("div",{className:"absolute bottom-[-6px] left-1/2 -translate-x-1/2 w-3 h-3 bg-slate-800/90 rotate-45 border-r border-b border-slate-600"})]}),e.jsxs("div",{className:"aspect-square w-52 relative bg-slate-50 rounded-xl border border-slate-200 p-2 grid grid-cols-2 grid-rows-2 gap-1 shrink-0",children:[e.jsx("div",{className:"bg-blue-100 rounded flex flex-col items-center justify-center hover:bg-blue-200 transition-colors",onMouseEnter:()=>h("q1"),onMouseLeave:()=>h(null),children:e.jsxs("span",{className:"text-xs font-bold text-blue-800",children:[Math.round(le.knowledge_gap/le.total*100),"%"]})}),e.jsx("div",{className:"bg-emerald-100 rounded flex flex-col items-center justify-center hover:bg-emerald-200 transition-colors",onMouseEnter:()=>h("q2"),onMouseLeave:()=>h(null),children:e.jsxs("span",{className:"text-xs font-bold text-emerald-800",children:[Math.round(le.balanced_high/le.total*100),"%"]})}),e.jsx("div",{className:"bg-red-100 rounded flex flex-col items-center justify-center hover:bg-red-200 transition-colors",onMouseEnter:()=>h("q3"),onMouseLeave:()=>h(null),children:e.jsxs("span",{className:"text-xs font-bold text-red-800",children:[Math.round(le.struggling/le.total*100),"%"]})}),e.jsx("div",{className:"bg-yellow-100 rounded flex flex-col items-center justify-center hover:bg-yellow-200 transition-colors",onMouseEnter:()=>h("q4"),onMouseLeave:()=>h(null),children:e.jsxs("span",{className:"text-xs font-bold text-yellow-800",children:[Math.round(le.method_gap/le.total*100),"%"]})}),e.jsx("div",{className:"absolute -left-4 top-1/2 -translate-x-1/2 -rotate-90 text-[10px] text-slate-500 font-bold tracking-widest",children:" "}),e.jsx("div",{className:"absolute bottom-[-20px] left-1/2 -translate-x-1/2 text-[10px] text-slate-500 font-bold tracking-widest",children:""})]})]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-slate-200",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[e.jsxs("h3",{className:"font-bold text-lg text-slate-800 flex items-center gap-2",children:[e.jsx(qs,{size:20,className:"text-red-500"}),"   (  )"]}),e.jsxs("div",{className:"flex gap-3 text-[10px] bg-slate-50 p-2 rounded-lg border border-slate-100",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-emerald-500 rounded-full"}),e.jsx("span",{children:" ()"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full"}),e.jsx("span",{children:" ()"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-orange-400 rounded-full"}),e.jsx("span",{children:" ()"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-red-400 rounded-full"}),e.jsx("span",{children:" ()"})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Z.map((j,S)=>e.jsxs("div",{className:"bg-slate-50 rounded-xl p-4 border border-slate-100 group hover:border-indigo-100 transition-colors",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("span",{className:"text-[10px] text-slate-400 font-bold bg-white px-2 py-0.5 rounded border border-slate-100",children:j.compId==="control_resources"?" ":" "}),e.jsxs("span",{className:`text-xs font-bold px-2 py-1 rounded ${j.successRate<50?"bg-red-100 text-red-600":"bg-green-100 text-green-600"}`,children:[Math.round(j.successRate),"% "]})]}),e.jsx("h4",{className:"font-bold text-slate-800 text-sm mb-3 line-clamp-2 min-h-[40px]",children:j.label}),e.jsxs("div",{className:"flex h-2 rounded-full overflow-hidden relative",children:[e.jsx("div",{className:"bg-emerald-500",style:{width:`${j.stats.A/j.stats.total*100}%`}}),e.jsx("div",{className:"bg-blue-400",style:{width:`${j.stats.B/j.stats.total*100}%`}}),e.jsx("div",{className:"bg-orange-400",style:{width:`${j.stats.C/j.stats.total*100}%`}}),e.jsx("div",{className:"bg-red-400",style:{width:`${j.stats.D/j.stats.total*100}%`}})]}),e.jsxs("div",{className:"flex justify-between text-[10px] text-slate-400 font-mono mt-2 pt-2 border-t border-slate-100",children:[e.jsxs("span",{className:"font-bold text-slate-500",children:[j.stats.A+j.stats.B," "]}),e.jsxs("span",{className:"font-bold text-slate-500",children:[j.stats.C+j.stats.D," "]})]})]},S))})]}),t==="class"&&e.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-red-100 border-t-4 border-t-red-500 mt-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h3",{className:"font-bold text-lg text-slate-800 flex items-center gap-2",children:[e.jsx(dn,{size:20,className:"text-red-500"}),"   ()"]}),e.jsx("span",{className:"bg-red-50 text-red-600 text-xs px-3 py-1 rounded-full font-bold",children:"  "})]}),e.jsx("div",{className:"masonry-grid grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:qi.competencies.map(j=>e.jsx(Cl.Fragment,{children:j.criteria.map(S=>{const k=X.filter(z=>Q(z,j.id,S.id)==="D");return k.length===0?null:e.jsxs("div",{className:"bg-red-50/30 rounded-xl p-4 border border-red-100 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start gap-2 mb-3",children:[e.jsx("div",{className:"mt-1 w-2 h-2 rounded-full bg-red-500 shrink-0"}),e.jsx("h5",{className:"font-bold text-slate-700 text-xs leading-snug",children:S.label})]}),e.jsx("div",{className:"flex flex-wrap gap-1.5",children:k.map(z=>{const W=se.find(ue=>ue.id===z.id)||z;return e.jsx("button",{onClick:()=>$(W,S),className:"px-2 py-1 rounded text-[10px] font-bold bg-white text-red-700 border border-red-100 shadow-sm hover:bg-red-500 hover:text-white hover:border-red-500 transition-all cursor-pointer",children:z.fullName},z.id)})})]},`${j.id}-${S.id}`)})},j.id))})]}),e.jsx("div",{className:"fixed bottom-6 left-1/2 transform -translate-x-1/2 z-50",children:e.jsxs("button",{onClick:()=>b(!0),className:"flex items-center gap-2 bg-slate-800 hover:bg-slate-700 text-white px-8 py-4 rounded-2xl font-bold text-sm transition-all shadow-xl hover:shadow-2xl border-2 border-slate-700 hover:border-slate-600 hover:scale-105 group",children:[e.jsx(Lt,{size:18,className:"group-hover:rotate-12 transition-transform"}),e.jsx("span",{children:" "})]})}),p&&e.jsx("div",{className:"fixed inset-0 z-[110] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 animate-in fade-in",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full p-6 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6 border-b pb-4",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-xl text-slate-800 flex items-center gap-2",children:[e.jsx(Lt,{size:24,className:"text-indigo-600"}),"  "]}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"         "})]}),e.jsx("button",{onClick:()=>b(!1),className:"text-slate-400 hover:text-red-500",children:e.jsx(ut,{})})]}),y?e.jsx(bg,{section:y,initialData:Y(y),onSave:j=>O(y,j),onReset:()=>V(y),onClose:()=>N(null)}):e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("button",{onClick:()=>N("distribution"),className:"p-4 bg-slate-50 hover:bg-indigo-50 border rounded-xl text-right transition-colors group",children:e.jsx("span",{className:"font-bold text-slate-700 block group-hover:text-indigo-700",children:" "})}),e.jsx("button",{onClick:()=>N("homogeneity"),className:"p-4 bg-slate-50 hover:bg-indigo-50 border rounded-xl text-right transition-colors group",children:e.jsx("span",{className:"font-bold text-slate-700 block group-hover:text-indigo-700",children:" "})}),e.jsx("button",{onClick:()=>N("matrix"),className:"p-4 bg-slate-50 hover:bg-indigo-50 border rounded-xl text-right transition-colors group col-span-2",children:e.jsx("span",{className:"font-bold text-slate-700 block group-hover:text-indigo-700",children:" "})})]})]})})]})},bg=({section:n,initialData:t,onSave:a,onReset:i,onClose:o})=>{const[c,u]=R.useState(t),x=()=>Ib[n].title;return e.jsxs("div",{className:"space-y-4 animate-in slide-in-from-right-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("button",{onClick:o,className:"text-xs text-slate-500 hover:text-slate-800 flex items-center gap-1",children:[e.jsx(Ps,{size:12,className:"rotate-180"}),"  "]}),e.jsx("span",{className:"text-sm font-bold bg-indigo-100 text-indigo-700 px-3 py-1 rounded-full",children:x()})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-700 mb-1",children:"  "}),e.jsx(ze,{value:c.reading,onChange:h=>u({...c,reading:h}),className:"w-full border rounded-lg p-3 text-sm bg-slate-50 focus:bg-white focus:ring-2 focus:ring-indigo-500 max-h-60 overflow-y-auto",minHeight:"min-h-[120px]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-700 mb-1",children:" "}),e.jsx(ze,{value:c.diagnosis,onChange:h=>u({...c,diagnosis:h}),className:"w-full border rounded-lg p-3 text-sm bg-amber-50 focus:bg-white focus:ring-2 focus:ring-amber-500 max-h-60 overflow-y-auto",minHeight:"min-h-[120px]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-700 mb-1",children:" "}),e.jsx(ze,{value:c.recommendation,onChange:h=>u({...c,recommendation:h}),className:"w-full border rounded-lg p-3 text-sm bg-emerald-50 focus:bg-white focus:ring-2 focus:ring-emerald-500 max-h-60 overflow-y-auto",minHeight:"min-h-[120px]"})]}),e.jsxs("div",{className:"flex justify-between pt-4 border-t",children:[e.jsxs("button",{onClick:i,className:"text-red-500 text-xs font-bold flex items-center gap-1 hover:underline",children:[e.jsx(Fn,{size:12}),"   "]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:o,className:"px-4 py-2 text-slate-500 font-bold hover:bg-slate-100 rounded-lg",children:""}),e.jsxs("button",{onClick:()=>a(c),className:"px-6 py-2 bg-indigo-600 text-white font-bold rounded-lg hover:bg-indigo-700 shadow-md flex items-center gap-2",children:[e.jsx(ws,{size:16}),"  "]})]})]})]})},bu={competencies:[{id:"oral_comms",label:"   ",criteria:[{id:1,label:"   "},{id:2,label:"    "},{id:3,label:"  "},{id:4,label:"  "},{id:5,label:"   "},{id:6,label:"    "}]},{id:"reading_perf",label:"  ",criteria:[{id:1,label:"    ( )"},{id:2,label:"    ( )"},{id:3,label:"   "},{id:4,label:"   ( )"}]},{id:"written_comp",label:"  ",criteria:[{id:1,label:"     "},{id:2,label:"    "},{id:3,label:"   "},{id:4,label:"     "},{id:5,label:"    "},{id:6,label:"  "},{id:7,label:"      "},{id:8,label:"    (/)"},{id:9,label:"  "}]},{id:"written_prod",label:"  ",criteria:[{id:1,label:"   "},{id:2,label:"    "},{id:3,label:"  "},{id:4,label:"   (  )"},{id:5,label:"   "},{id:6,label:"       "},{id:7,label:"  (  )"}]}]},zb={gap:{title:" ",concept:"    ' '  ()   ''    ().",method:"       (  )       (  )."},textType:{title:"  ( )",concept:"      (/)        (/).",method:"         ( )      ( )."},radar:{title:" ",concept:"             (    ).",method:"      (     )  ."},illiteracy:{title:"  ",concept:"            .",method:"       ()   ( )   (/) ."},funnel:{title:"  ( )",concept:"      :         .",method:"      ( ->  ->  -> )      ."}},Rk=({records:n,scope:t,contextName:a})=>{const[i,o]=R.useState(null),[c,u]=R.useState(null),[x,h]=R.useState(!1),[p,b]=R.useState(null),[y,N]=R.useState({});R.useEffect(()=>{const E=`mufattish_analysis_${a}_${t}`,L=localStorage.getItem(E);if(L)try{N(JSON.parse(L))}catch(U){console.error("Failed to load custom analysis",U)}},[a,t]);const w=(E,L)=>{const U={...y,[E]:L};N(U),localStorage.setItem(`mufattish_analysis_${a}_${t}`,JSON.stringify(U)),b(null)},A=E=>{const L={...y};delete L[E],N(L),localStorage.setItem(`mufattish_analysis_${a}_${t}`,JSON.stringify(L))},I=R.useMemo(()=>n.flatMap(E=>E.students),[n]),H=I.length,G=(E,L,U)=>{if(!E.results)return null;const $=E.results[L];return $?$[U]||$[String(U)]:null},F=R.useMemo(()=>{let E=0,L=0,U=0,$=0;I.forEach(j=>{const S=G(j,"written_comp",8),k=G(j,"written_comp",9),z=G(j,"reading_perf",1);[S,k,z].forEach(be=>{be&&(L+=3,be==="A"?E+=3:be==="B"?E+=2:be==="C"&&(E+=1))});const W=G(j,"written_prod",2),ue=G(j,"written_prod",3),J=G(j,"oral_comms",4);[W,ue,J].forEach(be=>{be&&($+=3,be==="A"?U+=3:be==="B"?U+=2:be==="C"&&(U+=1))})});const C=L>0?E/L*100:0,D=$>0?U/$*100:0;return{rPct:C,cPct:D,gap:C-D}},[I]),O=R.useMemo(()=>{let E=0,L=0,U=0,$=0;return I.forEach(C=>{const D=G(C,"written_comp",4),j=G(C,"written_prod",6);[D,j].forEach(z=>{z&&(L+=3,z==="A"?E+=3:z==="B"?E+=2:z==="C"&&(E+=1))});const S=G(C,"reading_perf",1),k=G(C,"written_prod",7);[S,k].forEach(z=>{z&&($+=3,z==="A"?U+=3:z==="B"?U+=2:z==="C"&&(U+=1))})}),{complexPct:L>0?E/L*100:0,basicPct:$>0?U/$*100:0}},[I]),V=R.useMemo(()=>{const E=I.filter(L=>{const U=G(L,"reading_perf",1),$=G(L,"written_prod",4);return U==="D"&&$==="D"}).length;return H>0?E/H*100:0},[I,H]),X=R.useMemo(()=>[{key:"oral",label:" ",compId:"oral_comms"},{key:"reading",label:" ",compId:"reading_perf"},{key:"comp",label:" ",compId:"written_comp"},{key:"prod",label:" ",compId:"written_prod"}].map(L=>{let U=0,$=0;return I.forEach(C=>{const D=bu.competencies.find(j=>j.id===L.compId);D==null||D.criteria.forEach(j=>{const S=G(C,L.compId,j.id);S&&($+=3,S==="A"?U+=3:S==="B"?U+=2:S==="C"&&(U+=1))})}),{subject:L.label,A:$>0?U/$*100:0,fullMark:100}}),[I]),ee=R.useMemo(()=>{const E=H,L=I.filter(D=>{const j=G(D,"reading_perf",1);return j==="A"||j==="B"}).length,U=I.filter(D=>{const j=G(D,"written_comp",1),S=G(D,"written_comp",2);return j==="A"||j==="B"||S==="A"||S==="B"}).length,$=I.filter(D=>{const j=G(D,"written_prod",2);return j==="A"||j==="B"}).length,C=I.filter(D=>{const j=G(D,"written_prod",6);return j==="A"||j==="B"}).length;return[{label:"",count:E,color:"bg-slate-300",text:"text-slate-700",desc:"  "},{label:" ",count:L,color:"bg-blue-300",text:"text-blue-900",desc:"    ()"},{label:" ",count:U,color:"bg-indigo-400",text:"text-white",desc:"   "},{label:" ",count:$,color:"bg-purple-500",text:"text-white",desc:"   "},{label:" ()",count:C,color:"bg-pink-600",text:"text-white",desc:"    "}]},[I,H]),Q=R.useMemo(()=>I.map(E=>{let L=0,U=0;bu.competencies[3].criteria.forEach(D=>{const j=G(E,"written_prod",D.id);j&&(U++,j==="A"?L+=3:j==="B"?L+=2:j==="C"&&(L+=1))});const $=U>0?L/(U*3)*100:0;let C="  ";for(const D of bu.competencies[3].criteria)if(G(E,"written_prod",D.id)==="D"){C=D.label;break}return{...E,writePct:$,worstCrit:C}}).filter(E=>E.writePct<40).sort((E,L)=>E.writePct-L.writePct).slice(0,6),[I]),se=(E,L,U)=>{const $=E.currentTarget.getBoundingClientRect();u({x:$.left+$.width/2,y:$.top-15,text:U,title:L})},ne=()=>{u(null)},P=E=>{if(E==="gap"){const L=F.gap;return{reading:`   ${L.toFixed(1)}%   (/).        " " ""          .`,diagnosis:L>15?"  .          .       .":"          .",recommendation:"      ' '.          ()   ."}}if(E==="funnel"){const L=ee[0].count,U=ee[4].count,$=L>0?((L-U)/L*100).toFixed(0):0;return{reading:`  ${L}    ${U}    .     ${$}%.`,diagnosis:"      ''  ''.    ()    ().",recommendation:"  ' '  ' '.         ."}}if(E==="textType"){const L=O.complexPct<50;return{reading:`     ( )  ${O.complexPct.toFixed(1)}%     ()  ${O.basicPct.toFixed(1)}%.`,diagnosis:L?"     .                 .":"        ()   ().",recommendation:"   ' '.       (   )   (  )."}}if(E==="radar"){const L=X.reduce((U,$)=>U.A<$.A?U:$);return{reading:"       .",diagnosis:`   "${L.subject}"  ${L.A.toFixed(1)}%.       .    .`,recommendation:`         "${L.subject}".`}}if(E==="illiteracy"){const L=V>15;return V===0?{reading:" 0%      .",diagnosis:" .      ( )  .",recommendation:"         ( )    ."}:{reading:` ${V.toFixed(1)}%       (    ).`,diagnosis:L?"   '  '.              .":"        .",recommendation:L?"    (PPRE) .     (  )   .":"      ."}}return{reading:"",diagnosis:"",recommendation:""}},ie=E=>y[E]||P(E),le=({section:E})=>e.jsx("button",{onClick:L=>{L.stopPropagation(),o(E)},className:"absolute top-4 left-4 p-2 bg-slate-100 hover:bg-indigo-100 text-slate-500 hover:text-indigo-600 rounded-full transition-all duration-300 opacity-0 group-hover:opacity-100 transform scale-90 group-hover:scale-100 z-10 shadow-sm",title:"  ",children:e.jsx(hn,{size:18})}),Z=()=>{if(!i)return null;let E=null,L=null;const U=ie(i),$=zb[i];switch(i){case"gap":L=e.jsx(Ms,{size:24,className:"text-indigo-400"}),E=e.jsx("div",{className:"h-full flex items-center justify-center p-4 w-full",children:e.jsxs("div",{className:"w-full max-w-lg space-y-8",children:[e.jsxs("div",{className:"relative group",children:[e.jsxs("div",{className:"flex justify-between text-lg font-bold mb-2 text-slate-300",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(gt,{size:24}),"  "]}),e.jsxs("span",{className:"text-indigo-400 text-2xl",children:[F.rPct.toFixed(1),"%"]})]}),e.jsx("div",{className:"h-6 bg-slate-700/50 rounded-full overflow-hidden border border-slate-600",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-indigo-500 to-blue-500 rounded-full transition-all duration-1000 shadow-[0_0_20px_rgba(99,102,241,0.5)]",style:{width:`${F.rPct}%`}})}),e.jsx("p",{className:"text-slate-400 mt-1 text-xs",children:"      (  )   ."})]}),e.jsxs("div",{className:"relative group",children:[e.jsxs("div",{className:"flex justify-between text-lg font-bold mb-2 text-slate-300",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(dn,{size:24}),"  "]}),e.jsxs("span",{className:"text-amber-400 text-2xl",children:[F.cPct.toFixed(1),"%"]})]}),e.jsx("div",{className:"h-6 bg-slate-700/50 rounded-full overflow-hidden border border-slate-600",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-amber-500 to-orange-500 rounded-full transition-all duration-1000 shadow-[0_0_20px_rgba(245,158,11,0.5)]",style:{width:`${F.cPct}%`}})}),e.jsx("p",{className:"text-slate-400 mt-1 text-xs",children:"        (  )  ."})]})]})});break;case"funnel":L=e.jsx(ka,{size:24,className:"text-pink-500"}),E=e.jsx("div",{className:"h-full flex items-center justify-center p-4 w-full flex-col",children:e.jsx("div",{className:"w-full max-w-2xl space-y-3",children:ee.map((j,S)=>{const k=H>0?j.count/H*100:0;return e.jsxs("div",{className:"flex items-center gap-4 animate-in slide-in-from-left-4",style:{animationDelay:`${S*100}ms`},children:[e.jsx("div",{className:"w-32 text-right font-bold text-slate-400 text-xs",children:j.label}),e.jsxs("div",{className:"flex-1 bg-slate-800/50 rounded-r-lg h-12 relative overflow-hidden flex items-center shadow-lg border border-slate-700",children:[e.jsx("div",{className:`h-full ${j.color.replace("bg-","bg-gradient-to-r from-").replace("300","500").replace("400","600")} flex items-center justify-end px-4 transition-all duration-1000 absolute left-0 top-0 opacity-80`,style:{width:`${k}%`}}),e.jsx("span",{className:"relative z-10 text-white font-bold text-xl px-4",children:j.count})]})]},S)})})});break;case"textType":L=e.jsx(js,{size:24,className:"text-blue-400"}),E=e.jsx("div",{className:"h-full flex items-center justify-center p-4 w-full",children:e.jsxs("div",{className:"flex items-end gap-16 h-80 w-full max-w-2xl justify-center",children:[e.jsxs("div",{className:"flex flex-col items-center gap-3 group w-1/3",children:[e.jsxs("span",{className:"text-3xl font-bold text-blue-400",children:[O.complexPct.toFixed(0),"%"]}),e.jsx("div",{className:"w-full bg-slate-700 rounded-t-2xl relative overflow-hidden border-x border-t border-slate-600 shadow-2xl h-56",children:e.jsx("div",{className:"absolute bottom-0 w-full bg-gradient-to-t from-blue-600 to-cyan-400 transition-all duration-1000",style:{height:`${O.complexPct}%`}})}),e.jsxs("div",{className:"text-center",children:[e.jsx("span",{className:"text-lg font-bold text-blue-300 block mb-0.5",children:" "}),e.jsx("span",{className:"text-xs text-slate-400",children:" "})]})]}),e.jsxs("div",{className:"flex flex-col items-center gap-3 group w-1/3",children:[e.jsxs("span",{className:"text-3xl font-bold text-slate-300",children:[O.basicPct.toFixed(0),"%"]}),e.jsx("div",{className:"w-full bg-slate-700 rounded-t-2xl relative overflow-hidden border-x border-t border-slate-600 shadow-2xl h-56",children:e.jsx("div",{className:"absolute bottom-0 w-full bg-gradient-to-t from-slate-500 to-slate-400 transition-all duration-1000",style:{height:`${O.basicPct}%`}})}),e.jsxs("div",{className:"text-center",children:[e.jsx("span",{className:"text-lg font-bold text-slate-300 block mb-0.5",children:" "}),e.jsx("span",{className:"text-xs text-slate-500",children:" "})]})]})]})});break;case"radar":L=e.jsx(kt,{size:24,className:"text-purple-400"}),E=e.jsx("div",{className:"h-full flex items-center justify-center w-full",children:e.jsxs("div",{className:"relative w-[380px] h-[380px]",children:[" ",e.jsxs("svg",{viewBox:"0 0 200 200",className:"w-full h-full overflow-visible",children:[[20,40,60,80,100].map(j=>e.jsx("circle",{cx:"100",cy:"100",r:j*.8,fill:"none",stroke:"#334155",strokeDasharray:"4 4"},j)),X.map((j,S)=>{const k=Math.PI*2*S/X.length-Math.PI/2,z=100+80*Math.cos(k),W=100+80*Math.sin(k);return e.jsx("line",{x1:"100",y1:"100",x2:z,y2:W,stroke:"#475569"},S)}),e.jsx("polygon",{points:Y(X),fill:"rgba(139, 92, 246, 0.4)",stroke:"#a78bfa",strokeWidth:"3",className:"drop-shadow-[0_0_15px_rgba(139,92,246,0.6)]"}),X.map((j,S)=>{const k=Math.PI*2*S/X.length-Math.PI/2,z=100+95*Math.cos(k),W=100+95*Math.sin(k);return e.jsxs("g",{className:"group",children:[e.jsx("text",{x:z,y:W,textAnchor:"middle",dominantBaseline:"middle",className:"text-[8px] font-bold fill-slate-300 uppercase tracking-widest",children:j.subject}),e.jsxs("text",{x:z,y:W+8,textAnchor:"middle",dominantBaseline:"middle",className:"text-[10px] font-bold fill-purple-400",children:[j.A.toFixed(0),"%"]})]},S)})]})]})});break;case"illiteracy":L=e.jsx(To,{size:24,className:"text-red-400"});const C=V>15,D=V===0;E=e.jsxs("div",{className:"h-full flex flex-col items-center justify-center p-4 text-center w-full",children:[e.jsxs("div",{className:`relative w-64 h-64 flex items-center justify-center rounded-full border-[10px] ${C?"border-red-500/30":"border-emerald-500/30"} bg-slate-800`,children:[e.jsx("div",{className:`absolute inset-0 rounded-full animate-pulse opacity-10 ${C?"bg-red-500":"bg-emerald-500"}`}),e.jsxs("div",{children:[e.jsxs("span",{className:`text-7xl font-bold block ${C?"text-red-500":"text-emerald-500"}`,children:[V.toFixed(1),"%"]}),e.jsx("span",{className:"text-slate-400 text-lg uppercase tracking-widest mt-2 block",children:" "})]})]}),e.jsx("p",{className:"mt-8 text-lg text-slate-300 max-w-xl leading-relaxed font-light",children:D?" !           .":C?"       (/).":"   ."})]});break}return e.jsxs("div",{className:"fixed inset-0 z-[100] bg-slate-950 text-white flex animate-in zoom-in-95 duration-300 overflow-hidden",children:[e.jsx("button",{onClick:()=>o(null),className:"absolute top-6 left-6 p-2 bg-white/10 hover:bg-white/20 rounded-full z-50 text-white transition-all",children:e.jsx(mn,{size:24})}),e.jsxs("div",{className:"w-[400px] lg:w-[35%] bg-slate-900 border-l border-slate-800 p-8 flex flex-col shadow-2xl relative z-40 overflow-y-auto",children:[e.jsxs("div",{className:"mb-8 pb-6 border-b border-slate-800",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"p-3 bg-slate-800 rounded-xl border border-slate-700 shadow-inner",children:L}),e.jsx("h2",{className:"text-2xl font-bold text-white font-serif",children:$.title})]}),e.jsx("p",{className:"text-slate-400 text-sm",children:"   "})]}),e.jsxs("div",{className:"space-y-8 flex-1",children:[e.jsxs("div",{className:"relative pl-4 border-r-2 border-indigo-500/50 pr-4",children:[e.jsxs("h4",{className:"text-indigo-400 font-bold uppercase text-xs mb-2 flex items-center gap-2",children:[e.jsx(kt,{size:14}),"   "]}),e.jsx("p",{className:"text-slate-300 leading-relaxed text-sm text-justify",children:U.reading})]}),e.jsxs("div",{className:"relative pl-4 border-r-2 border-amber-500/50 pr-4 bg-amber-500/5 p-4 rounded-l-xl",children:[e.jsxs("h4",{className:"text-amber-400 font-bold uppercase text-xs mb-2 flex items-center gap-2",children:[e.jsx(Ht,{size:14}),"  "]}),e.jsx("p",{className:"text-slate-200 leading-relaxed text-sm font-medium text-justify",children:U.diagnosis})]}),e.jsxs("div",{className:"relative pl-4 border-r-2 border-emerald-500/50 pr-4",children:[e.jsxs("h4",{className:"text-emerald-400 font-bold uppercase text-xs mb-2 flex items-center gap-2",children:[e.jsx(_t,{size:14}),"  "]}),e.jsx("p",{className:"text-slate-300 leading-relaxed text-sm text-justify",children:U.recommendation})]})]}),e.jsx("div",{className:"mt-8 pt-6 border-t border-slate-800 text-center",children:e.jsx("p",{className:"text-xs text-slate-500",children:"     2025"})})]}),e.jsxs("div",{className:"flex-1 bg-gradient-to-br from-slate-900 to-slate-950 flex flex-col items-center p-8 relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 opacity-10",style:{backgroundImage:"radial-gradient(circle at 2px 2px, white 1px, transparent 0)",backgroundSize:"40px 40px"}}),e.jsx("div",{className:"w-full max-w-3xl z-20 mb-4 mt-2 animate-in slide-in-from-top-4 shrink-0",children:e.jsxs("div",{className:"bg-white/5 backdrop-blur-md rounded-lg p-3 border border-white/10 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 p-1.5 bg-indigo-500/20 rounded-bl-lg border-b border-l border-white/10",children:e.jsx(dt,{size:14,className:"text-indigo-300"})}),e.jsxs("div",{className:"space-y-2 pt-1",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-[11px] font-bold text-indigo-300 uppercase mb-0.5",children:" "}),e.jsx("p",{className:"text-xs text-white/90 leading-relaxed",children:$.concept})]}),e.jsxs("div",{className:"pt-2 border-t border-white/10",children:[e.jsxs("h4",{className:"text-[10px] font-bold text-slate-400 uppercase mb-0.5 flex items-center gap-1",children:[e.jsx(Jn,{size:10}),"  "]}),e.jsx("p",{className:"text-[10px] text-slate-400 leading-relaxed font-mono opacity-80",children:$.method})]})]})]})}),e.jsx("div",{className:"relative z-10 w-full flex-1 flex items-center justify-center min-h-0",children:E})]})]})},q=()=>{if(!p||!x)return null;const E=ie(p);return e.jsx(vg,{section:p,initialData:E,onSave:L=>w(p,L),onReset:()=>A(p),onClose:()=>b(null)})},Y=E=>{if(E.length===0)return"";const L=100,U=80;return E.map(($,C)=>{const D=Math.PI*2*C/E.length-Math.PI/2,j=$.A/100,S=L+U*j*Math.cos(D),k=L+U*j*Math.sin(D);return`${S},${k}`}).join(" ")};if(H===0)return e.jsx("div",{className:"text-center p-10 text-gray-400",children:"   "});const T={title:"  ",desc:"          ."};return e.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-700 pb-24 relative",children:[c&&e.jsxs("div",{className:"fixed z-[9999] pointer-events-none bg-slate-900 text-white px-3 py-2 rounded-lg shadow-xl text-xs max-w-xs border border-slate-700",style:{left:c.x,top:c.y,transform:"translate(-50%, -100%)"},children:[c.title&&e.jsx("div",{className:"font-bold border-b border-slate-600 pb-1 mb-1 text-yellow-400",children:c.title}),e.jsx("div",{children:c.text}),e.jsx("div",{className:"absolute -bottom-1.5 left-1/2 -translate-x-1/2 w-3 h-3 bg-slate-900 rotate-45 border-r border-b border-slate-700"})]}),Z(),q(),e.jsxs("div",{className:"bg-gradient-to-r from-slate-900 to-slate-800 text-white p-8 rounded-3xl shadow-xl relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-5",children:e.jsx(kt,{size:300})}),e.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row justify-between items-center gap-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 text-emerald-400 font-bold uppercase tracking-wider text-xs",children:[e.jsx(qs,{size:14}),"   ( )"]}),e.jsx("h2",{className:"text-3xl font-bold font-serif mb-2",children:"   "}),e.jsxs("p",{className:"text-slate-300 text-sm flex items-center gap-2",children:[e.jsx(ft,{size:16})," ",a," ",e.jsx("span",{className:"mx-2",children:"|"}),e.jsx(Bn,{size:16})," ",H,"  ( )"]})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 p-4 rounded-2xl max-w-md cursor-pointer hover:bg-white/20 transition-all group",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"font-bold text-white text-sm",children:"  "}),e.jsx(Eg,{size:16,className:"text-white/70 group-hover:text-white transition-colors"})]}),e.jsx("p",{className:"text-lg font-bold text-yellow-300 mb-1",children:T.title}),e.jsx("p",{className:"text-xs text-white/80 line-clamp-2",children:T.desc})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-slate-200 lg:col-span-2 relative group hover:shadow-md transition-shadow cursor-pointer",onClick:()=>o("gap"),children:[e.jsx(le,{section:"gap"}),e.jsxs("div",{className:"flex justify-between items-start mb-8",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-lg text-slate-800 flex items-center gap-2",children:[e.jsx(Ms,{className:"text-indigo-600",size:20}),"  ( vs )"]}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:'     " "  " "'})]}),e.jsxs("div",{className:`px-3 py-1 rounded-full text-xs font-bold ${F.gap>10?"bg-red-100 text-red-600":"bg-emerald-100 text-emerald-600"}`,children:[": ",F.gap.toFixed(1),"%"]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"relative pt-6",onMouseEnter:E=>se(E," ",` : ${F.rPct.toFixed(1)}%`),onMouseLeave:ne,children:[e.jsxs("div",{className:"flex justify-between text-sm font-bold mb-2",children:[e.jsxs("span",{className:"text-slate-600 flex items-center gap-2",children:[e.jsx(gt,{size:16}),"   (//)"]}),e.jsxs("span",{className:"text-indigo-600",children:[F.rPct.toFixed(1),"%"]})]}),e.jsx("div",{className:"h-4 bg-slate-100 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-indigo-500 rounded-full transition-all duration-1000",style:{width:`${F.rPct}%`}})})]}),e.jsxs("div",{className:"relative",onMouseEnter:E=>se(E," ",` : ${F.cPct.toFixed(1)}%`),onMouseLeave:ne,children:[e.jsxs("div",{className:"flex justify-between text-sm font-bold mb-2",children:[e.jsxs("span",{className:"text-slate-600 flex items-center gap-2",children:[e.jsx(dn,{size:16}),"   (/)"]}),e.jsxs("span",{className:"text-amber-500",children:[F.cPct.toFixed(1),"%"]})]}),e.jsx("div",{className:"h-4 bg-slate-100 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-amber-500 rounded-full transition-all duration-1000",style:{width:`${F.cPct}%`}})})]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-slate-200 flex flex-col items-center justify-center text-center relative overflow-hidden group hover:shadow-md transition-shadow cursor-pointer",onClick:()=>o("illiteracy"),onMouseEnter:E=>se(E," ","       ( + )."),onMouseLeave:ne,children:[e.jsx(le,{section:"illiteracy"}),e.jsx("div",{className:`absolute inset-0 opacity-5 ${V>10?"bg-red-500":"bg-emerald-500"}`}),e.jsx("div",{className:`w-20 h-20 rounded-full flex items-center justify-center mb-4 shadow-lg ${V>10?"bg-red-100 text-red-600":"bg-emerald-100 text-emerald-600"}`,children:e.jsx(To,{size:40})}),e.jsxs("h3",{className:"font-bold text-2xl text-slate-800 mb-1",children:[V.toFixed(1),"%"]}),e.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-4",children:"  ( )"}),e.jsx("p",{className:"text-sm text-slate-600 leading-relaxed px-4",children:V>10?"          .":"   .   ."})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-slate-200 relative group cursor-pointer hover:shadow-md transition-shadow",onClick:()=>o("funnel"),children:[e.jsx(le,{section:"funnel"}),e.jsx("div",{className:"flex justify-between items-start mb-6",children:e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-lg text-slate-800 flex items-center gap-2",children:[e.jsx(ka,{size:20,className:"text-pink-500"}),"  ( )"]}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"      "})]})}),e.jsx("div",{className:"space-y-2",children:ee.map((E,L)=>{const U=H>0?E.count/H*100:0;return e.jsxs("div",{className:"flex items-center gap-3",onMouseEnter:$=>se($,E.label,E.desc),onMouseLeave:ne,children:[e.jsx("div",{className:"w-24 text-left font-bold text-slate-500 text-xs",children:E.label}),e.jsx("div",{className:"flex-1 bg-slate-100 rounded-r-lg h-8 relative overflow-hidden",children:e.jsx("div",{className:`h-full ${E.color} flex items-center justify-end px-3 font-bold text-xs transition-all duration-1000`,style:{width:`${U}%`},children:e.jsx("span",{className:E.text,children:E.count})})})]},L)})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-slate-200 lg:col-span-1 group hover:shadow-md transition-shadow relative cursor-pointer",onClick:()=>o("radar"),children:[e.jsx(le,{section:"radar"}),e.jsxs("h3",{className:"font-bold text-lg text-slate-800 mb-6 flex items-center gap-2",children:[e.jsx(kt,{size:20,className:"text-purple-600"}),"  "]}),e.jsx("div",{className:"flex justify-center py-4",children:e.jsx("div",{className:"relative w-64 h-64",children:e.jsxs("svg",{viewBox:"0 0 200 200",className:"w-full h-full overflow-visible",children:[[20,40,60,80,100].map(E=>e.jsx("circle",{cx:"100",cy:"100",r:E*.8,fill:"none",stroke:"#e2e8f0",strokeDasharray:"4 4"},E)),X.map((E,L)=>{const U=Math.PI*2*L/X.length-Math.PI/2,$=100+80*Math.cos(U),C=100+80*Math.sin(U);return e.jsx("line",{x1:"100",y1:"100",x2:$,y2:C,stroke:"#cbd5e1"},L)}),e.jsx("polygon",{points:Y(X),fill:"rgba(124, 58, 237, 0.2)",stroke:"#7c3aed",strokeWidth:"2",className:"cursor-help",onMouseEnter:E=>se(E," ","     ."),onMouseLeave:ne}),X.map((E,L)=>{const U=Math.PI*2*L/X.length-Math.PI/2,$=100+105*Math.cos(U),C=100+105*Math.sin(U);return e.jsxs("g",{className:"cursor-help",onMouseEnter:D=>se(D,E.subject,` : ${E.A.toFixed(1)}%`),onMouseLeave:ne,children:[e.jsx("text",{x:$,y:C,textAnchor:"middle",dominantBaseline:"middle",className:"text-[10px] font-bold fill-slate-600",children:E.subject}),e.jsxs("text",{x:$,y:C+12,textAnchor:"middle",dominantBaseline:"middle",className:"text-[9px] font-bold fill-purple-600",children:[E.A.toFixed(0),"%"]})]},L)})]})})})]}),e.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-slate-200 lg:col-span-2 group hover:shadow-md transition-shadow relative cursor-pointer",onClick:()=>o("textType"),children:[e.jsx(le,{section:"textType"}),e.jsxs("h3",{className:"font-bold text-lg text-slate-800 mb-2 flex items-center gap-2",children:[e.jsx(js,{size:20,className:"text-blue-500"}),"   ( )"]}),e.jsx("p",{className:"text-xs text-slate-400 mb-8",children:"       (/)    "}),e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs("div",{className:"flex items-center gap-4 p-2 rounded hover:bg-slate-50 transition-colors",onMouseEnter:E=>se(E," ","  (/)"),onMouseLeave:ne,children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-blue-50 flex items-center justify-center text-blue-600 font-bold shrink-0",children:e.jsx(As,{size:24})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("span",{className:"font-bold text-slate-700 text-sm",children:"  ( )"}),e.jsxs("span",{className:"font-bold text-blue-600",children:[O.complexPct.toFixed(0),"%"]})]}),e.jsx("div",{className:"h-2 bg-slate-100 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-blue-500",style:{width:`${O.complexPct}%`}})})]})]}),e.jsxs("div",{className:"flex items-center gap-4 p-2 rounded hover:bg-slate-50 transition-colors",onMouseEnter:E=>se(E," ","  (/)"),onMouseLeave:ne,children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-slate-50 flex items-center justify-center text-slate-500 font-bold shrink-0",children:e.jsx(_t,{size:24})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("span",{className:"font-bold text-slate-700 text-sm",children:"  ( )"}),e.jsxs("span",{className:"font-bold text-slate-600",children:[O.basicPct.toFixed(0),"%"]})]}),e.jsx("div",{className:"h-2 bg-slate-100 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-slate-400",style:{width:`${O.basicPct}%`}})})]})]})]})]})]}),Q.length>0&&e.jsxs("div",{className:"bg-red-50 border border-red-100 rounded-3xl p-6 shadow-sm",children:[e.jsxs("h3",{className:"font-bold text-lg text-red-900 mb-4 flex items-center gap-2",children:[e.jsx(un,{size:20,className:"text-red-600"}),"  ( )"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Q.map((E,L)=>e.jsxs("div",{className:"bg-white p-3 rounded-xl border border-red-100 flex items-center gap-3 hover:shadow-md transition-shadow",onMouseEnter:U=>se(U,E.fullName,`   : ${E.worstCrit}`),onMouseLeave:ne,children:[e.jsxs("div",{className:"w-10 h-10 rounded-full bg-red-100 flex items-center justify-center text-red-700 font-bold text-sm shrink-0",children:[E.writePct.toFixed(0),"%"]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-gray-800 text-sm",children:E.fullName}),e.jsxs("p",{className:"text-[10px] text-red-500 flex items-center gap-1",children:[e.jsx(m1,{size:10}),"  : ",E.worstCrit]})]})]},L))})]}),e.jsx("div",{className:"fixed bottom-6 left-1/2 transform -translate-x-1/2 z-50",children:e.jsxs("button",{onClick:()=>h(!0),className:"flex items-center gap-2 bg-slate-800 hover:bg-slate-700 text-white px-8 py-4 rounded-2xl font-bold text-sm transition-all shadow-xl hover:shadow-2xl border-2 border-slate-700 hover:border-slate-600 hover:scale-105 group",children:[e.jsx(Lt,{size:18,className:"group-hover:rotate-12 transition-transform"}),e.jsx("span",{children:" "})]})}),x&&e.jsx("div",{className:"fixed inset-0 z-[110] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 animate-in fade-in",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full p-6 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6 border-b pb-4",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-xl text-slate-800 flex items-center gap-2",children:[e.jsx(Lt,{size:24,className:"text-indigo-600"}),"  "]}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"         "})]}),e.jsx("button",{onClick:()=>h(!1),className:"text-slate-400 hover:text-red-500",children:e.jsx(ut,{})})]}),p?e.jsx(vg,{section:p,initialData:ie(p),onSave:E=>w(p,E),onReset:()=>A(p),onClose:()=>b(null)}):e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("button",{onClick:()=>b("gap"),className:"p-4 bg-slate-50 hover:bg-indigo-50 border rounded-xl text-right transition-colors group",children:[e.jsx("span",{className:"font-bold text-slate-700 block group-hover:text-indigo-700",children:" "}),e.jsx("span",{className:"text-xs text-slate-400",children:"  vs "})]}),e.jsxs("button",{onClick:()=>b("textType"),className:"p-4 bg-slate-50 hover:bg-indigo-50 border rounded-xl text-right transition-colors group",children:[e.jsx("span",{className:"font-bold text-slate-700 block group-hover:text-indigo-700",children:" "}),e.jsx("span",{className:"text-xs text-slate-400",children:"  (/)"})]}),e.jsxs("button",{onClick:()=>b("radar"),className:"p-4 bg-slate-50 hover:bg-indigo-50 border rounded-xl text-right transition-colors group",children:[e.jsx("span",{className:"font-bold text-slate-700 block group-hover:text-indigo-700",children:" "}),e.jsx("span",{className:"text-xs text-slate-400",children:"   "})]}),e.jsxs("button",{onClick:()=>b("illiteracy"),className:"p-4 bg-slate-50 hover:bg-indigo-50 border rounded-xl text-right transition-colors group",children:[e.jsx("span",{className:"font-bold text-slate-700 block group-hover:text-indigo-700",children:" "}),e.jsx("span",{className:"text-xs text-slate-400",children:"  "})]}),e.jsxs("button",{onClick:()=>b("funnel"),className:"p-4 bg-slate-50 hover:bg-indigo-50 border rounded-xl text-right transition-colors group col-span-2 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-bold text-slate-700 block group-hover:text-indigo-700",children:" "}),e.jsx("span",{className:"text-xs text-slate-400",children:"  "})]}),e.jsx(Ps,{className:"text-slate-300"})]})]})]})})]})},vg=({section:n,initialData:t,onSave:a,onReset:i,onClose:o})=>{const[c,u]=R.useState(t),x=()=>zb[n].title;return e.jsxs("div",{className:"space-y-4 animate-in slide-in-from-right-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("button",{onClick:o,className:"text-xs text-slate-500 hover:text-slate-800 flex items-center gap-1",children:[e.jsx(Eg,{size:12,className:"rotate-180"}),"  "]}),e.jsx("span",{className:"text-sm font-bold bg-indigo-100 text-indigo-700 px-3 py-1 rounded-full",children:x()})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-700 mb-1",children:"  "}),e.jsx(ze,{value:c.reading,onChange:h=>u({...c,reading:h}),className:"w-full border rounded-lg p-3 text-sm bg-slate-50 focus:bg-white focus:ring-2 focus:ring-indigo-500 max-h-60 overflow-y-auto",minHeight:"min-h-[120px]",placeholder:"    ..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-700 mb-1",children:" "}),e.jsx(ze,{value:c.diagnosis,onChange:h=>u({...c,diagnosis:h}),className:"w-full border rounded-lg p-3 text-sm bg-amber-50 focus:bg-white focus:ring-2 focus:ring-amber-500 max-h-60 overflow-y-auto",minHeight:"min-h-[120px]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-700 mb-1",children:" "}),e.jsx(ze,{value:c.recommendation,onChange:h=>u({...c,recommendation:h}),className:"w-full border rounded-lg p-3 text-sm bg-emerald-50 focus:bg-white focus:ring-2 focus:ring-emerald-500 max-h-60 overflow-y-auto",minHeight:"min-h-[120px]"})]}),e.jsxs("div",{className:"flex justify-between pt-4 border-t",children:[e.jsxs("button",{onClick:i,className:"text-red-500 text-xs font-bold flex items-center gap-1 hover:underline",children:[e.jsx(Fn,{size:12}),"    ()"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:o,className:"px-4 py-2 text-slate-500 font-bold hover:bg-slate-100 rounded-lg",children:""}),e.jsxs("button",{onClick:()=>a(c),className:"px-6 py-2 bg-indigo-600 text-white font-bold rounded-lg hover:bg-indigo-700 shadow-md flex items-center gap-2",children:[e.jsx(ws,{size:16}),"  "]})]})]})]})},yl={label:" ( )",competencies:[{id:"control_numbers",label:"    ",criteria:[{id:1,label:"      (   )"},{id:2,label:"  (  )   "},{id:3,label:"    "},{id:4,label:"   (  )"}]},{id:"geometry_space",label:"     ",criteria:[{id:1,label:"    (  )"},{id:2,label:"     "},{id:3,label:"     ( /)"}]},{id:"measurements",label:"   ",criteria:[{id:1,label:"   (  )"},{id:2,label:"   "},{id:3,label:"   ( )"}]},{id:"data_org",label:" ",criteria:[{id:1,label:"    ( ) "},{id:2,label:"     ( )"},{id:3,label:"     (   )"},{id:4,label:"      "}]}]},Lb={gap:{title:" ",concept:"    ' ' (  )   '' (  ).",method:"     ( 1, 2, 3)       ( 4)."},abstraction:{title:"  ( )",concept:"      ( )    (  ).",method:"       ()     ()."},matrix:{title:"  ( / )",concept:"       :   ' '  ' '",method:"    ' ' ( )   '  ' ( )."},radar:{title:" ",concept:"           (   ).",method:"      (    )  ."},illiteracy:{title:"  ",concept:"           .",method:"       ()  ''  ' ' ."},funnel:{title:"  ",concept:"     :    ->  ->  ->    ().",method:"         ."}},Dk=({records:n,scope:t,contextName:a})=>{const[i,o]=R.useState(null),[c,u]=R.useState(null),[x,h]=R.useState(null),[p,b]=R.useState(!1),[y,N]=R.useState(null),[w,A]=R.useState({});R.useEffect(()=>{const U=`mufattish_analysis_y5_math_${a}_${t}`,$=localStorage.getItem(U);if($)try{A(JSON.parse($))}catch(C){console.error(C)}},[a,t]);const I=(U,$)=>{const C={...w,[U]:$};A(C),localStorage.setItem(`mufattish_analysis_y5_math_${a}_${t}`,JSON.stringify(C)),N(null)},H=U=>{const $={...w};delete $[U],A($),localStorage.setItem(`mufattish_analysis_y5_math_${a}_${t}`,JSON.stringify($))},G=R.useMemo(()=>n.flatMap(U=>U.students.map($=>({...$,className:U.className,schoolName:U.schoolName}))),[n]),F=G.length,O=(U,$,C)=>{if(!U.results)return null;const D=U.results[$];return D?D[C]||D[String(C)]:null},V=R.useMemo(()=>{let U=0,$=0,C=0,D=0;G.forEach(k=>{["control_numbers","geometry_space","measurements"].forEach(W=>{const ue=yl.competencies.find(J=>J.id===W);ue==null||ue.criteria.forEach(J=>{const be=O(k,W,J.id);be&&($+=3,be==="A"?U+=3:be==="B"?U+=2:be==="C"&&(U+=1))})});const z=yl.competencies.find(W=>W.id==="data_org");z==null||z.criteria.forEach(W=>{const ue=O(k,"data_org",W.id);ue&&(D+=3,ue==="A"?C+=3:ue==="B"?C+=2:ue==="C"&&(C+=1))})});const j=$>0?U/$*100:0,S=D>0?C/D*100:0;return{rPct:j,mPct:S,gap:j-S}},[G]),X=R.useMemo(()=>{const U=G.filter($=>{const C=O($,"control_numbers",2),D=O($,"data_org",4);return C==="D"&&D==="D"}).length;return F>0?U/F*100:0},[G,F]),ee=R.useMemo(()=>[{key:"numbers",label:" ",compId:"control_numbers"},{key:"geom",label:" ",compId:"geometry_space"},{key:"measure",label:" ",compId:"measurements"},{key:"data",label:" ",compId:"data_org"}].map($=>{let C=0,D=0;return G.forEach(j=>{const S=yl.competencies.find(k=>k.id===$.compId);S==null||S.criteria.forEach(k=>{const z=O(j,$.compId,k.id);z&&(D+=3,z==="A"?C+=3:z==="B"?C+=2:z==="C"&&(C+=1))})}),{subject:$.label,A:D>0?C/D*100:0,fullMark:100}}),[G]),Q=R.useMemo(()=>{const U=F,$=G.filter(S=>{const k=O(S,"control_numbers",2);return k==="A"||k==="B"}).length,C=G.filter(S=>{const k=O(S,"geometry_space",2),z=O(S,"measurements",1);return k==="A"||k==="B"||z==="A"||z==="B"}).length,D=G.filter(S=>{const k=O(S,"data_org",2);return k==="A"||k==="B"}).length,j=G.filter(S=>{const k=O(S,"data_org",4);return k==="A"||k==="B"}).length;return[{label:"",count:U,color:"bg-slate-300",text:"text-slate-700",desc:" "},{label:" ()",count:$,color:"bg-blue-300",text:"text-blue-900",desc:"   "},{label:" ()",count:C,color:"bg-indigo-400",text:"text-white",desc:"   "},{label:"",count:D,color:"bg-purple-500",text:"text-white",desc:"  "},{label:" ",count:j,color:"bg-pink-600",text:"text-white",desc:"    "}]},[G,F]),se=R.useMemo(()=>{let U=0,$=0,C=0,D=0;G.forEach(k=>{["geometry_space","measurements"].forEach(W=>{const ue=yl.competencies.find(J=>J.id===W);ue==null||ue.criteria.forEach(J=>{const be=O(k,W,J.id);be&&($+=3,be==="A"?U+=3:be==="B"?U+=2:be==="C"&&(U+=1))})});const z=yl.competencies.find(W=>W.id==="data_org");z==null||z.criteria.forEach(W=>{const ue=O(k,"data_org",W.id);ue&&(D+=3,ue==="A"?C+=3:ue==="B"?C+=2:ue==="C"&&(C+=1))})});const j=$>0?U/$*100:0,S=D>0?C/D*100:0;return{concretePct:j,abstractPct:S}},[G]),ne=R.useMemo(()=>G.map(U=>{let $=0,C=0,D=0,j=0;return yl.competencies.forEach(S=>{S.criteria.forEach(k=>{const z=O(U,S.id,k.id);if(z){const W=z==="A"?3:z==="B"?2:z==="C"?1:0;S.id==="data_org"?(D+=W,j+=3):($+=W,C+=3)}})}),{...U,resPct:C>0?$/C*100:0,methPct:j>0?D/j*100:0}}),[G]),P=R.useMemo(()=>{const U={balanced:0,rote:0,logic_error:0,struggling:0,total:0};return ne.forEach($=>{const C=$.resPct>=50,D=$.methPct>=50;C&&D?U.balanced++:C&&!D?U.rote++:!C&&D?U.logic_error++:U.struggling++,U.total++}),U},[ne]),ie=U=>{if(U==="gap"){const $=V.gap;return{reading:`   ${$.toFixed(1)}%  .     ()     ().`,diagnosis:$>15?"   ( ).    ' '  '  '.":" .       .",recommendation:"  ' ' (Mathmatisation)      ."}}if(U==="funnel"){const $=Q[0].count,C=Q[4].count;return{reading:`    ${$>0?(($-C)/$*100).toFixed(0):0}%.       ''.`,diagnosis:"        (Additif)    (Multiplicatif)   .",recommendation:"   '' (Linearity)            ."}}if(U==="abstraction"){const $=se.concretePct-se.abstractPct;return{reading:` :    ${se.concretePct.toFixed(1)}%  ${se.abstractPct.toFixed(1)}%  .`,diagnosis:$>15?"     ( )        ( ).":"      .",recommendation:"    ''        ."}}if(U==="matrix"){const $=P.total||1,C=Math.round(P.rote/$*100);return{reading:` ' '  ${C}%.        .`,diagnosis:C>20?"    .           .":"      .",recommendation:"  ' ' (Problem Solving)     ."}}if(U==="radar"){const $=ee.reduce((C,D)=>C.A<D.A?C:D);return{reading:`   "${$.subject}"  ${$.A.toFixed(1)}%.`,diagnosis:`     .  ${$.subject}       .`,recommendation:`     ${$.subject}   .`}}if(U==="illiteracy"){const $=X>15;return X===0?{reading:" 0%      .",diagnosis:" .        .",recommendation:"      ( )."}:{reading:` ${X.toFixed(1)}%       ( +  ).`,diagnosis:$?" .             .":"       .",recommendation:$?"  (Manipulatives)         .":"   ."}}return{reading:"",diagnosis:"",recommendation:""}},le=U=>w[U]||ie(U),Z=({section:U})=>e.jsx("button",{onClick:$=>{$.stopPropagation(),o(U)},className:"absolute top-4 left-4 p-2 bg-slate-100 hover:bg-indigo-100 text-slate-500 hover:text-indigo-600 rounded-full transition-all duration-300 opacity-0 group-hover:opacity-100 transform scale-90 group-hover:scale-100 z-10 shadow-sm",children:e.jsx(hn,{size:18})}),q=(U,$,C)=>{const D=U.currentTarget.getBoundingClientRect();u({x:D.left+D.width/2,y:D.top-15,text:C,title:$})},Y=()=>u(null),T=U=>{if(U.length===0)return"";const $=100,C=80;return U.map((D,j)=>{const S=Math.PI*2*j/U.length-Math.PI/2,k=isNaN(D.A)?0:D.A/100,z=$+C*k*Math.cos(S),W=$+C*k*Math.sin(S);return`${z},${W}`}).join(" ")},E=()=>{if(!i)return null;const U=Lb[i],$=le(i);let C=null,D=null;switch(i){case"gap":D=e.jsx(Ms,{size:24,className:"text-indigo-400"}),C=e.jsx("div",{className:"h-full flex items-center justify-center p-4 w-full",children:e.jsxs("div",{className:"w-full max-w-lg space-y-8",children:[e.jsxs("div",{className:"relative group",children:[e.jsxs("div",{className:"flex justify-between text-lg font-bold mb-2 text-slate-300",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(gt,{size:24}),"  "]}),e.jsxs("span",{className:"text-indigo-400 text-2xl",children:[V.rPct.toFixed(1),"%"]})]}),e.jsx("div",{className:"h-6 bg-slate-700/50 rounded-full overflow-hidden border border-slate-600",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-indigo-500 to-blue-500 rounded-full transition-all duration-1000 shadow-[0_0_20px_rgba(99,102,241,0.5)]",style:{width:`${V.rPct}%`}})}),e.jsx("p",{className:"text-slate-400 mt-1 text-xs",children:"      ."})]}),e.jsxs("div",{className:"relative group",children:[e.jsxs("div",{className:"flex justify-between text-lg font-bold mb-2 text-slate-300",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(As,{size:24}),"  "]}),e.jsxs("span",{className:"text-amber-400 text-2xl",children:[V.mPct.toFixed(1),"%"]})]}),e.jsx("div",{className:"h-6 bg-slate-700/50 rounded-full overflow-hidden border border-slate-600",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-amber-500 to-orange-500 rounded-full transition-all duration-1000 shadow-[0_0_20px_rgba(245,158,11,0.5)]",style:{width:`${V.mPct}%`}})}),e.jsx("p",{className:"text-slate-400 mt-1 text-xs",children:"      ."})]})]})});break;case"abstraction":D=e.jsx(As,{size:24,className:"text-blue-400"}),C=e.jsx("div",{className:"h-full flex items-center justify-center p-4 w-full",children:e.jsxs("div",{className:"flex items-end gap-16 h-80 w-full max-w-2xl justify-center",children:[e.jsxs("div",{className:"flex flex-col items-center gap-3 group w-1/3",children:[e.jsxs("span",{className:"text-3xl font-bold text-blue-400",children:[se.abstractPct.toFixed(0),"%"]}),e.jsx("div",{className:"w-full bg-slate-700 rounded-t-2xl relative overflow-hidden border-x border-t border-slate-600 shadow-2xl h-56",children:e.jsx("div",{className:"absolute bottom-0 w-full bg-gradient-to-t from-blue-600 to-cyan-400 transition-all duration-1000",style:{height:`${se.abstractPct}%`}})}),e.jsxs("div",{className:"text-center",children:[e.jsx("span",{className:"text-lg font-bold text-blue-300 block mb-0.5",children:" "}),e.jsx("span",{className:"text-xs text-slate-400",children:" / "})]})]}),e.jsxs("div",{className:"flex flex-col items-center gap-3 group w-1/3",children:[e.jsxs("span",{className:"text-3xl font-bold text-slate-300",children:[se.concretePct.toFixed(0),"%"]}),e.jsx("div",{className:"w-full bg-slate-700 rounded-t-2xl relative overflow-hidden border-x border-t border-slate-600 shadow-2xl h-56",children:e.jsx("div",{className:"absolute bottom-0 w-full bg-gradient-to-t from-slate-500 to-slate-400 transition-all duration-1000",style:{height:`${se.concretePct}%`}})}),e.jsxs("div",{className:"text-center",children:[e.jsx("span",{className:"text-lg font-bold text-slate-300 block mb-0.5",children:" "}),e.jsx("span",{className:"text-xs text-slate-500",children:" / "})]})]})]})});break;case"matrix":D=e.jsx(Aa,{size:24,className:"text-teal-400"}),C=e.jsx("div",{className:"h-full flex items-center justify-center w-full",children:e.jsxs("div",{className:"aspect-square w-[400px] relative bg-slate-700/30 rounded-2xl border border-slate-600 p-4 grid grid-cols-2 grid-rows-2 gap-2",children:[e.jsxs("div",{className:"bg-blue-500/20 rounded flex flex-col items-center justify-center border border-blue-500/30",children:[e.jsxs("span",{className:"text-2xl font-bold text-blue-400",children:[Math.round(P.logic_error/P.total*100),"%"]}),e.jsx("span",{className:"text-sm text-blue-300",children:" "})]}),e.jsxs("div",{className:"bg-emerald-500/20 rounded flex flex-col items-center justify-center border border-emerald-500/30",children:[e.jsxs("span",{className:"text-2xl font-bold text-emerald-400",children:[Math.round(P.balanced/P.total*100),"%"]}),e.jsx("span",{className:"text-sm text-emerald-300",children:" "})]}),e.jsxs("div",{className:"bg-red-500/20 rounded flex flex-col items-center justify-center border border-red-500/30",children:[e.jsxs("span",{className:"text-2xl font-bold text-red-400",children:[Math.round(P.struggling/P.total*100),"%"]}),e.jsx("span",{className:"text-sm text-red-300",children:" "})]}),e.jsxs("div",{className:"bg-yellow-500/20 rounded flex flex-col items-center justify-center border border-yellow-500/30",children:[e.jsxs("span",{className:"text-2xl font-bold text-yellow-400",children:[Math.round(P.rote/P.total*100),"%"]}),e.jsx("span",{className:"text-sm text-yellow-300",children:" "})]})]})});break;case"radar":D=e.jsx(kt,{size:24,className:"text-purple-400"}),C=e.jsx("div",{className:"h-full flex items-center justify-center w-full",children:e.jsx("div",{className:"relative w-[380px] h-[380px]",children:e.jsxs("svg",{viewBox:"0 0 200 200",className:"w-full h-full overflow-visible",children:[[20,40,60,80,100].map(S=>e.jsx("circle",{cx:"100",cy:"100",r:S*.8,fill:"none",stroke:"#334155",strokeDasharray:"4 4"},S)),ee.map((S,k)=>{const z=Math.PI*2*k/ee.length-Math.PI/2,W=100+80*Math.cos(z),ue=100+80*Math.sin(z);return e.jsx("line",{x1:"100",y1:"100",x2:W,y2:ue,stroke:"#475569"},k)}),e.jsx("polygon",{points:T(ee),fill:"rgba(139, 92, 246, 0.4)",stroke:"#a78bfa",strokeWidth:"3",className:"drop-shadow-[0_0_15px_rgba(139,92,246,0.6)]"}),ee.map((S,k)=>{const z=Math.PI*2*k/ee.length-Math.PI/2,W=100+95*Math.cos(z),ue=100+95*Math.sin(z);return e.jsxs("g",{className:"group",children:[e.jsx("text",{x:W,y:ue,textAnchor:"middle",dominantBaseline:"middle",className:"text-[8px] font-bold fill-slate-300 uppercase tracking-widest",children:S.subject}),e.jsxs("text",{x:W,y:ue+8,textAnchor:"middle",dominantBaseline:"middle",className:"text-[10px] font-bold fill-purple-400",children:[S.A.toFixed(0),"%"]})]},k)})]})})});break;case"funnel":D=e.jsx(ka,{size:24,className:"text-pink-500"}),C=e.jsx("div",{className:"h-full flex items-center justify-center p-4 w-full flex-col",children:e.jsx("div",{className:"w-full max-w-2xl space-y-3",children:Q.map((S,k)=>{const z=F>0?S.count/F*100:0;return e.jsxs("div",{className:"flex items-center gap-4 animate-in slide-in-from-left-4",style:{animationDelay:`${k*100}ms`},children:[e.jsx("div",{className:"w-32 text-right font-bold text-slate-400 text-xs",children:S.label}),e.jsxs("div",{className:"flex-1 bg-slate-800/50 rounded-r-lg h-12 relative overflow-hidden flex items-center shadow-lg border border-slate-700",children:[e.jsx("div",{className:`h-full ${S.color.replace("bg-","bg-gradient-to-r from-").replace("300","500").replace("400","600")} flex items-center justify-end px-4 transition-all duration-1000 absolute left-0 top-0 opacity-80`,style:{width:`${z}%`}}),e.jsx("span",{className:"relative z-10 text-white font-bold text-xl px-4",children:S.count})]})]},k)})})});break;case"illiteracy":D=e.jsx(un,{size:24,className:"text-red-400"});const j=X>15;C=e.jsxs("div",{className:"h-full flex flex-col items-center justify-center p-4 text-center w-full",children:[e.jsxs("div",{className:`relative w-64 h-64 flex items-center justify-center rounded-full border-[10px] ${j?"border-red-500/30":"border-emerald-500/30"} bg-slate-800`,children:[e.jsx("div",{className:`absolute inset-0 rounded-full animate-pulse opacity-10 ${j?"bg-red-500":"bg-emerald-500"}`}),e.jsxs("div",{children:[e.jsxs("span",{className:`text-7xl font-bold block ${j?"text-red-500":"text-emerald-500"}`,children:[X.toFixed(1),"%"]}),e.jsx("span",{className:"text-slate-400 text-lg uppercase tracking-widest mt-2 block",children:" "})]})]}),e.jsx("p",{className:"mt-8 text-lg text-slate-300 max-w-xl leading-relaxed font-light",children:j?"  ( +  ).     .":"   ."})]});break}return e.jsxs("div",{className:"fixed inset-0 z-[100] bg-slate-950 text-white flex animate-in zoom-in-95 duration-300 overflow-hidden",children:[e.jsx("button",{onClick:()=>o(null),className:"absolute top-6 left-6 p-2 bg-white/10 hover:bg-white/20 rounded-full z-50 text-white transition-all",children:e.jsx(mn,{size:24})}),e.jsxs("div",{className:"w-[400px] lg:w-[35%] bg-slate-900 border-l border-slate-800 p-8 flex flex-col shadow-2xl relative z-40 overflow-y-auto",children:[e.jsxs("div",{className:"mb-8 pb-6 border-b border-slate-800",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"p-3 bg-slate-800 rounded-xl border border-slate-700 shadow-inner",children:D}),e.jsx("h2",{className:"text-2xl font-bold text-white font-serif",children:U.title})]}),e.jsx("p",{className:"text-slate-400 text-sm",children:"    ()"})]}),e.jsxs("div",{className:"space-y-8 flex-1",children:[e.jsxs("div",{className:"relative pl-4 border-r-2 border-indigo-500/50 pr-4",children:[e.jsxs("h4",{className:"text-indigo-400 font-bold uppercase text-xs mb-2 flex items-center gap-2",children:[e.jsx(kt,{size:14}),"   "]}),e.jsx("p",{className:"text-slate-300 leading-relaxed text-sm text-justify",children:$.reading})]}),e.jsxs("div",{className:"relative pl-4 border-r-2 border-amber-500/50 pr-4 bg-amber-500/5 p-4 rounded-l-xl",children:[e.jsxs("h4",{className:"text-amber-400 font-bold uppercase text-xs mb-2 flex items-center gap-2",children:[e.jsx(Ht,{size:14}),"  "]}),e.jsx("p",{className:"text-slate-200 leading-relaxed text-sm font-medium text-justify",children:$.diagnosis})]}),e.jsxs("div",{className:"relative pl-4 border-r-2 border-emerald-500/50 pr-4",children:[e.jsxs("h4",{className:"text-emerald-400 font-bold uppercase text-xs mb-2 flex items-center gap-2",children:[e.jsx(_t,{size:14}),"  "]}),e.jsx("p",{className:"text-slate-300 leading-relaxed text-sm text-justify",children:$.recommendation})]})]})]}),e.jsxs("div",{className:"flex-1 bg-gradient-to-br from-slate-900 to-slate-950 flex flex-col items-center p-8 relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 opacity-10",style:{backgroundImage:"radial-gradient(circle at 2px 2px, white 1px, transparent 0)",backgroundSize:"40px 40px"}}),e.jsx("div",{className:"w-full max-w-3xl z-20 mb-4 mt-2 animate-in slide-in-from-top-4 shrink-0",children:e.jsxs("div",{className:"bg-white/5 backdrop-blur-md rounded-lg p-3 border border-white/10 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 p-1.5 bg-indigo-500/20 rounded-bl-lg border-b border-l border-white/10",children:e.jsx(dt,{size:14,className:"text-indigo-300"})}),e.jsxs("div",{className:"space-y-2 pt-1",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-[11px] font-bold text-indigo-300 uppercase mb-0.5",children:" "}),e.jsx("p",{className:"text-xs text-white/90 leading-relaxed",children:U.concept})]}),e.jsxs("div",{className:"pt-2 border-t border-white/10",children:[e.jsxs("h4",{className:"text-[10px] font-bold text-slate-400 uppercase mb-0.5 flex items-center gap-1",children:[e.jsx(Jn,{size:10}),"  "]}),e.jsx("p",{className:"text-[10px] text-slate-400 leading-relaxed font-mono opacity-80",children:U.method})]})]})]})}),e.jsx("div",{className:"relative z-10 w-full flex-1 flex items-center justify-center min-h-0",children:C})]})]})},L=()=>!y||!p?null:e.jsx(yg,{section:y,initialData:le(y),onSave:U=>I(y,U),onReset:()=>H(y),onClose:()=>N(null)});return F===0?e.jsx("div",{className:"text-center p-10 text-gray-400",children:"   "}):e.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-700 pb-24 relative",children:[c&&e.jsxs("div",{className:"fixed z-[9999] pointer-events-none bg-slate-900 text-white px-3 py-2 rounded-lg shadow-xl text-xs max-w-xs border border-slate-700",style:{left:c.x,top:c.y,transform:"translate(-50%, -100%)"},children:[c.title&&e.jsx("div",{className:"font-bold border-b border-slate-600 pb-1 mb-1 text-yellow-400",children:c.title}),e.jsx("div",{children:c.text})]}),E(),L(),e.jsxs("div",{className:"bg-gradient-to-r from-slate-900 to-slate-800 text-white p-8 rounded-3xl shadow-xl relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-5",children:e.jsx(Ug,{size:300})}),e.jsx("div",{className:"relative z-10 flex flex-col md:flex-row justify-between items-center gap-6",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 text-indigo-400 font-bold uppercase tracking-wider text-xs",children:[e.jsx(qs,{size:14}),"  ( )"]}),e.jsx("h2",{className:"text-3xl font-bold font-serif mb-2",children:yl.label}),e.jsxs("p",{className:"text-slate-300 text-sm flex items-center gap-2",children:[e.jsx(ft,{size:16})," ",a," ",e.jsx("span",{className:"mx-2",children:"|"}),e.jsx(Ma,{size:16}),"   "]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-slate-200 lg:col-span-2 relative group hover:shadow-md transition-shadow cursor-pointer",onClick:()=>o("gap"),children:[e.jsx(Z,{section:"gap"}),e.jsxs("div",{className:"flex justify-between items-start mb-8",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-lg text-slate-800 flex items-center gap-2",children:[e.jsx(Ms,{className:"text-indigo-600",size:20}),"  ( vs )"]}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"       "})]}),e.jsxs("div",{className:`px-3 py-1 rounded-full text-xs font-bold ${V.gap>10?"bg-red-100 text-red-600":"bg-emerald-100 text-emerald-600"}`,children:[": ",V.gap.toFixed(1),"%"]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"relative pt-6",onMouseEnter:U=>q(U," ",` : ${V.rPct.toFixed(1)}%`),onMouseLeave:Y,children:[e.jsxs("div",{className:"flex justify-between text-sm font-bold mb-2",children:[e.jsxs("span",{className:"text-slate-600 flex items-center gap-2",children:[e.jsx(cn,{size:16}),"   (/)"]}),e.jsxs("span",{className:"text-indigo-600",children:[V.rPct.toFixed(1),"%"]})]}),e.jsx("div",{className:"h-4 bg-slate-100 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-indigo-500 rounded-full transition-all duration-1000 shadow-[0_0_20px_rgba(99,102,241,0.5)]",style:{width:`${V.rPct}%`}})})]}),e.jsxs("div",{className:"relative",onMouseEnter:U=>q(U," ",` : ${V.mPct.toFixed(1)}%`),onMouseLeave:Y,children:[e.jsxs("div",{className:"flex justify-between text-sm font-bold mb-2",children:[e.jsxs("span",{className:"text-slate-600 flex items-center gap-2",children:[e.jsx(As,{size:16}),"   ( )"]}),e.jsxs("span",{className:"text-amber-500",children:[V.mPct.toFixed(1),"%"]})]}),e.jsx("div",{className:"h-4 bg-slate-100 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-amber-500 rounded-full transition-all duration-1000",style:{width:`${V.mPct}%`}})})]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-slate-200 flex flex-col items-center justify-center text-center relative overflow-hidden group hover:shadow-md transition-shadow cursor-pointer",onClick:()=>o("illiteracy"),children:[e.jsx(Z,{section:"illiteracy"}),e.jsx("div",{className:`absolute inset-0 opacity-5 ${X>10?"bg-red-500":"bg-emerald-500"}`}),e.jsx("div",{className:`w-20 h-20 rounded-full flex items-center justify-center mb-4 shadow-lg ${X>10?"bg-red-100 text-red-600":"bg-emerald-100 text-emerald-600"}`,children:e.jsx(un,{size:40})}),e.jsxs("h3",{className:"font-bold text-2xl text-slate-800 mb-1",children:[X.toFixed(1),"%"]}),e.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-4",children:"  ( )"}),e.jsx("p",{className:"text-sm text-slate-600 leading-relaxed px-4",children:X>10?"         .":" .    ."})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-slate-200 relative group cursor-pointer hover:shadow-md transition-shadow",onClick:()=>o("funnel"),children:[e.jsx(Z,{section:"funnel"}),e.jsx("div",{className:"flex justify-between items-start mb-6",children:e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-lg text-slate-800 flex items-center gap-2",children:[e.jsx(ka,{size:20,className:"text-pink-500"}),"   ( )"]}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"      "})]})}),e.jsx("div",{className:"space-y-2",children:Q.map((U,$)=>{const C=F>0?U.count/F*100:0;return e.jsxs("div",{className:"flex items-center gap-3",onMouseEnter:D=>q(D,U.label,U.desc),onMouseLeave:Y,children:[e.jsx("div",{className:"w-24 text-left font-bold text-slate-500 text-xs",children:U.label}),e.jsxs("div",{className:"flex-1 bg-slate-100 rounded-r-lg h-8 relative overflow-hidden flex items-center shadow-lg border border-slate-700",children:[e.jsx("div",{className:`h-full ${U.color.replace("bg-","bg-gradient-to-r from-").replace("300","500").replace("400","600")} flex items-center justify-end px-3 font-bold text-xs transition-all duration-1000 absolute left-0 top-0 opacity-80`,style:{width:`${C}%`}}),e.jsx("span",{className:"relative z-10 text-white font-bold text-xl px-4",children:U.count})]})]},$)})})]}),e.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-slate-200 cursor-pointer hover:shadow-lg hover:border-teal-300 transition-all group relative",onClick:()=>o("matrix"),children:[e.jsx(Z,{section:"matrix"}),e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("h3",{className:"font-bold text-lg text-slate-800 flex items-center gap-2",children:[e.jsx(Aa,{size:20,className:"text-teal-500"}),"   (/)"]}),e.jsx(dt,{size:16,className:"text-slate-300 group-hover:text-teal-500 transition-colors"})]}),e.jsxs("div",{className:"flex gap-6 items-center justify-center relative",children:[x&&e.jsxs("div",{className:"absolute -top-16 left-1/2 -translate-x-1/2 z-20 bg-slate-800/90 text-white p-2 rounded-xl text-xs w-48 text-center animate-in zoom-in-95 duration-200 shadow-xl border border-slate-600",children:[e.jsxs("div",{className:"font-bold border-b border-slate-600 pb-1 mb-1 text-slate-200",children:[x==="q1"&&"  /  ",x==="q2"&&"  ()",x==="q3"&&"   ",x==="q4"&&"  /  "]}),e.jsxs("div",{className:"text-[10px] text-slate-400",children:[x==="q1"&&"     ",x==="q2"&&"    ",x==="q3"&&"   ",x==="q4"&&"     "]}),e.jsx("div",{className:"absolute bottom-[-6px] left-1/2 -translate-x-1/2 w-3 h-3 bg-slate-800/90 rotate-45 border-r border-b border-slate-600"})]}),e.jsxs("div",{className:"aspect-square w-52 relative bg-slate-50 rounded-xl border border-slate-200 p-2 grid grid-cols-2 grid-rows-2 gap-1 shrink-0",children:[e.jsx("div",{className:"bg-blue-100 rounded flex flex-col items-center justify-center hover:bg-blue-200 transition-colors",onMouseEnter:()=>h("q1"),onMouseLeave:()=>h(null),children:e.jsxs("span",{className:"text-xs font-bold text-blue-800",children:[Math.round(P.knowledge_gap/P.total*100),"%"]})}),e.jsx("div",{className:"bg-emerald-100 rounded flex flex-col items-center justify-center hover:bg-emerald-200 transition-colors",onMouseEnter:()=>h("q2"),onMouseLeave:()=>h(null),children:e.jsxs("span",{className:"text-xs font-bold text-emerald-800",children:[Math.round(P.balanced/P.total*100),"%"]})}),e.jsx("div",{className:"bg-red-100 rounded flex flex-col items-center justify-center hover:bg-red-200 transition-colors",onMouseEnter:()=>h("q3"),onMouseLeave:()=>h(null),children:e.jsxs("span",{className:"text-xs font-bold text-red-800",children:[Math.round(P.struggling/P.total*100),"%"]})}),e.jsx("div",{className:"bg-yellow-100 rounded flex flex-col items-center justify-center hover:bg-yellow-200 transition-colors",onMouseEnter:()=>h("q4"),onMouseLeave:()=>h(null),children:e.jsxs("span",{className:"text-xs font-bold text-yellow-800",children:[Math.round(P.rote/P.total*100),"%"]})}),e.jsx("div",{className:"absolute -left-4 top-1/2 -translate-y-1/2 -rotate-90 text-[10px] text-slate-500 font-bold tracking-widest",children:" "}),e.jsx("div",{className:"absolute bottom-[-20px] left-1/2 -translate-x-1/2 text-[10px] text-slate-500 font-bold tracking-widest",children:""})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-slate-200 lg:col-span-2 group hover:shadow-md transition-shadow relative cursor-pointer",onClick:()=>o("abstraction"),children:[e.jsx(Z,{section:"abstraction"}),e.jsxs("h3",{className:"font-bold text-lg text-slate-800 mb-2 flex items-center gap-2",children:[e.jsx(As,{size:20,className:"text-blue-500"}),"  ( )"]}),e.jsx("p",{className:"text-xs text-slate-400 mb-8",children:"      ()   ()"}),e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs("div",{className:"flex items-center gap-4 p-2 rounded hover:bg-slate-50 transition-colors",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-blue-50 flex items-center justify-center text-blue-600 font-bold shrink-0",children:e.jsx(As,{size:24})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("span",{className:"font-bold text-slate-700 text-sm",children:"  (/)"}),e.jsxs("span",{className:"font-bold text-blue-600",children:[se.abstractPct.toFixed(0),"%"]})]}),e.jsx("div",{className:"h-2 bg-slate-100 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-blue-500",style:{width:`${se.abstractPct}%`}})})]})]}),e.jsxs("div",{className:"flex items-center gap-4 p-2 rounded hover:bg-slate-50 transition-colors",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-slate-50 flex items-center justify-center text-slate-500 font-bold shrink-0",children:e.jsx(_t,{size:24})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("span",{className:"font-bold text-slate-700 text-sm",children:"  (/)"}),e.jsxs("span",{className:"font-bold text-slate-600",children:[se.concretePct.toFixed(0),"%"]})]}),e.jsx("div",{className:"h-2 bg-slate-100 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-slate-400",style:{width:`${se.concretePct}%`}})})]})]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-slate-200 lg:col-span-1 group hover:shadow-md transition-shadow relative cursor-pointer",onClick:()=>o("radar"),children:[e.jsx(Z,{section:"radar"}),e.jsxs("h3",{className:"font-bold text-lg text-slate-800 mb-6 flex items-center gap-2",children:[e.jsx(kt,{size:20,className:"text-purple-600"}),"  "]}),e.jsx("div",{className:"flex justify-center py-4",children:e.jsx("div",{className:"relative w-64 h-64",children:e.jsxs("svg",{viewBox:"0 0 200 200",className:"w-full h-full overflow-visible",children:[[20,40,60,80,100].map(U=>e.jsx("circle",{cx:"100",cy:"100",r:U*.8,fill:"none",stroke:"#e2e8f0",strokeDasharray:"4 4"},U)),ee.map((U,$)=>{const C=Math.PI*2*$/ee.length-Math.PI/2,D=100+80*Math.cos(C),j=100+80*Math.sin(C);return e.jsx("line",{x1:"100",y1:"100",x2:D,y2:j,stroke:"#cbd5e1"},$)}),e.jsx("polygon",{points:T(ee),fill:"rgba(124, 58, 237, 0.2)",stroke:"#7c3aed",strokeWidth:"2"}),ee.map((U,$)=>{const C=Math.PI*2*$/ee.length-Math.PI/2,D=100+105*Math.cos(C),j=100+105*Math.sin(C);return e.jsxs("g",{children:[e.jsx("text",{x:D,y:j,textAnchor:"middle",dominantBaseline:"middle",className:"text-[10px] font-bold fill-slate-600",children:U.subject}),e.jsxs("text",{x:D,y:j+12,textAnchor:"middle",dominantBaseline:"middle",className:"text-[9px] font-bold fill-purple-600",children:[U.A.toFixed(0),"%"]})]},$)})]})})})]})]}),e.jsx("div",{className:"fixed bottom-6 left-1/2 transform -translate-x-1/2 z-50",children:e.jsxs("button",{onClick:()=>b(!0),className:"flex items-center gap-2 bg-slate-800 hover:bg-slate-700 text-white px-8 py-4 rounded-2xl font-bold text-sm transition-all shadow-xl hover:shadow-2xl border-2 border-slate-700 hover:border-slate-600 hover:scale-105 group",children:[e.jsx(Lt,{size:18,className:"group-hover:rotate-12 transition-transform"}),e.jsx("span",{children:" "})]})}),p&&e.jsx("div",{className:"fixed inset-0 z-[110] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 animate-in fade-in",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full p-6 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6 border-b pb-4",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-xl text-slate-800 flex items-center gap-2",children:[e.jsx(Lt,{size:24,className:"text-indigo-600"}),"  "]}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"         "})]}),e.jsx("button",{onClick:()=>b(!1),className:"text-slate-400 hover:text-red-500",children:e.jsx(ut,{})})]}),y?e.jsx(yg,{section:y,initialData:le(y),onSave:U=>I(y,U),onReset:()=>H(y),onClose:()=>N(null)}):e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("button",{onClick:()=>N("gap"),className:"p-4 bg-slate-50 hover:bg-indigo-50 border rounded-xl text-right transition-colors group",children:e.jsx("span",{className:"font-bold text-slate-700 block group-hover:text-indigo-700",children:" "})}),e.jsx("button",{onClick:()=>N("matrix"),className:"p-4 bg-slate-50 hover:bg-indigo-50 border rounded-xl text-right transition-colors group",children:e.jsx("span",{className:"font-bold text-slate-700 block group-hover:text-indigo-700",children:" "})}),e.jsx("button",{onClick:()=>N("radar"),className:"p-4 bg-slate-50 hover:bg-indigo-50 border rounded-xl text-right transition-colors group",children:e.jsx("span",{className:"font-bold text-slate-700 block group-hover:text-indigo-700",children:" "})}),e.jsx("button",{onClick:()=>N("illiteracy"),className:"p-4 bg-slate-50 hover:bg-indigo-50 border rounded-xl text-right transition-colors group",children:e.jsx("span",{className:"font-bold text-slate-700 block group-hover:text-indigo-700",children:" "})}),e.jsx("button",{onClick:()=>N("funnel"),className:"p-4 bg-slate-50 hover:bg-indigo-50 border rounded-xl text-right transition-colors group",children:e.jsx("span",{className:"font-bold text-slate-700 block group-hover:text-indigo-700",children:" "})}),e.jsx("button",{onClick:()=>N("abstraction"),className:"p-4 bg-slate-50 hover:bg-indigo-50 border rounded-xl text-right transition-colors group",children:e.jsx("span",{className:"font-bold text-slate-700 block group-hover:text-indigo-700",children:" "})})]})]})})]})},yg=({section:n,initialData:t,onSave:a,onReset:i,onClose:o})=>{const[c,u]=R.useState(t),x=()=>Lb[n].title;return e.jsxs("div",{className:"space-y-4 animate-in slide-in-from-right-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("button",{onClick:o,className:"text-xs text-slate-500 hover:text-slate-800 flex items-center gap-1",children:[e.jsx(Ps,{size:12,className:"rotate-180"}),"  "]}),e.jsx("span",{className:"text-sm font-bold bg-indigo-100 text-indigo-700 px-3 py-1 rounded-full",children:x()})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-700 mb-1",children:"  "}),e.jsx(ze,{value:c.reading,onChange:h=>u({...c,reading:h}),className:"w-full border rounded-lg p-3 text-sm bg-slate-50 focus:bg-white focus:ring-2 focus:ring-indigo-500 max-h-60 overflow-y-auto",minHeight:"min-h-[120px]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-700 mb-1",children:" "}),e.jsx(ze,{value:c.diagnosis,onChange:h=>u({...c,diagnosis:h}),className:"w-full border rounded-lg p-3 text-sm bg-amber-50 focus:bg-white focus:ring-2 focus:ring-amber-500 max-h-60 overflow-y-auto",minHeight:"min-h-[120px]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-700 mb-1",children:" "}),e.jsx(ze,{value:c.recommendation,onChange:h=>u({...c,recommendation:h}),className:"w-full border rounded-lg p-3 text-sm bg-emerald-50 focus:bg-white focus:ring-2 focus:ring-emerald-500 max-h-60 overflow-y-auto",minHeight:"min-h-[120px]"})]}),e.jsxs("div",{className:"flex justify-between pt-4 border-t",children:[e.jsxs("button",{onClick:i,className:"text-red-500 text-xs font-bold flex items-center gap-1 hover:underline",children:[e.jsx(Fn,{size:12}),"    ()"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:o,className:"px-4 py-2 text-slate-500 font-bold hover:bg-slate-100 rounded-lg",children:""}),e.jsxs("button",{onClick:()=>a(c),className:"px-6 py-2 bg-indigo-600 text-white font-bold rounded-lg hover:bg-indigo-700 shadow-md flex items-center gap-2",children:[e.jsx(ws,{size:16}),"  "]})]})]})]})},vu={competencies:[{id:"behavior",label:"    ( )",criteria:[{id:1,label:"     "},{id:2,label:"      "},{id:3,label:"       "}]},{id:"recitation",label:"  ",criteria:[{id:1,label:"  "},{id:2,label:"  "},{id:3,label:"  ()"}]},{id:"understanding",label:"   ",criteria:[{id:1,label:"   "},{id:2,label:"     "},{id:3,label:"     "}]},{id:"sira",label:"   ",criteria:[{id:1,label:"       "},{id:2,label:"     (/)"},{id:3,label:"    "}]}]},Ub={behaviorGap:{title:"  ( / )",concept:"       ' ' ()     ' ' ( ).",method:"     1 ( -  )   3 (  -  )."},memoryVsComp:{title:"  ( vs )",concept:"   :     ' ' ()  ' ' ( )",method:"     ' '    '  '."},siraAction:{title:"   ( )",concept:"        '  '  ' '     .",method:"       (   )."},crossSubject:{title:"  ( )",concept:"    ''   (   )   ' '.       .",method:" :   (50%  )   (50%  )    4 ."}},Ik=({records:n,allRecords:t,scope:a,contextName:i})=>{const[o,c]=R.useState(null),[u,x]=R.useState(null),[h,p]=R.useState(null),[b,y]=R.useState(null),[N,w]=R.useState(!1),[A,I]=R.useState(null),[H,G]=R.useState({});R.useEffect(()=>{const T=`mufattish_analysis_y5_islamic_${i}_${a}`,E=localStorage.getItem(T);if(E)try{G(JSON.parse(E))}catch(L){console.error(L)}},[i,a]);const F=(T,E)=>{const L={...H,[T]:E};G(L),localStorage.setItem(`mufattish_analysis_y5_islamic_${i}_${a}`,JSON.stringify(L)),I(null)},O=T=>{const E={...H};delete E[T],G(E),localStorage.setItem(`mufattish_analysis_y5_islamic_${i}_${a}`,JSON.stringify(E))},V=R.useMemo(()=>n.flatMap(T=>T.students.map(E=>({...E,className:T.className,schoolName:T.schoolName}))),[n]),X=V.length,ee=(T,E,L)=>{if(!T.results)return null;const U=T.results[E];return U?U[L]||U[String(L)]:null},Q=R.useMemo(()=>{let T=0,E=0,L=0,U=0;V.forEach(D=>{vu.competencies[0].criteria.forEach(j=>{const S=ee(D,"behavior",j.id);S&&(E+=3,S==="A"?T+=3:S==="B"?T+=2:S==="C"&&(T+=1))}),vu.competencies[2].criteria.forEach(j=>{const S=ee(D,"understanding",j.id);S&&(U+=3,S==="A"?L+=3:S==="B"?L+=2:S==="C"&&(L+=1))})});const $=E>0?Math.min(100,T/E*100):0,C=U>0?Math.min(100,L/U*100):0;return{bPct:$,uPct:C,gap:$-C}},[V]),se=R.useMemo(()=>{let T=0,E=0;return V.forEach(U=>{vu.competencies[1].criteria.forEach($=>{const C=ee(U,"recitation",$.id);C&&(E+=3,C==="A"?T+=3:C==="B"?T+=2:C==="C"&&(T+=1))})}),{rPct:E>0?Math.min(100,T/E*100):0}},[V]),ne=R.useMemo(()=>{let T=0,E=0;const L={A:0,B:0,C:0,D:0};return V.forEach(U=>{const $=ee(U,"sira",3);$&&(E++,$==="A"?(T+=3,L.A++):$==="B"?(T+=2,L.B++):$==="C"?(T+=1,L.C++):L.D++)}),{pct:E>0?Math.min(100,T/(E*3)*100):0,distribution:L,total:E}},[V]),P=R.useMemo(()=>{if(!t||t.length===0)return null;const T=[];let E=0,L=0;const U=new Map;if(t.forEach(C=>{if(C.level==="5AP"&&C.subject.includes("")){const D=`${C.schoolName}-${C.className}`.trim();C.students.forEach(j=>{const S=`${D}-${j.fullName.trim()}`;U.set(S,j)})}}),n.forEach(C=>{const D=`${C.schoolName}-${C.className}`.trim();C.students.forEach(j=>{const S=`${D}-${j.fullName.trim()}`,k=U.get(S);if(k){let z=0,W=0,ue=0,J=0;[1,2,3,4].forEach(Re=>{var ke;const _e=(ke=k.results.reading_perf)==null?void 0:ke[Re];_e&&(W+=3,_e==="A"?z+=3:_e==="B"?z+=2:_e==="C"&&(z+=1))});const be=W>0?Math.min(100,z/W*100):0;[1,2,3].forEach(Re=>{var ke;const _e=(ke=j.results.recitation)==null?void 0:ke[Re];_e&&(J+=3,_e==="A"?ue+=3:_e==="B"?ue+=2:_e==="C"&&(ue+=1))});const Ee=J>0?Math.min(100,ue/J*100):0;T.push({x:be,y:Ee,name:j.fullName}),E+=Math.abs(be-Ee),L++}})}),L===0)return null;const $=E/L;return{points:T,count:L,avgGap:$}},[n,t]),ie=T=>{if(T==="behaviorGap"){const E=Q.gap;return{reading:`    ( ): ${Q.bPct.toFixed(1)}%  ${Q.uPct.toFixed(1)}%    ().  ${E.toFixed(1)} .`,diagnosis:E>15?"    .       ' '          .":"   .          .",recommendation:"       (Checklists)      ."}}if(T==="memoryVsComp"){const E=se.rPct,L=Q.uPct,U=E-L;return{reading:`   (): ${E.toFixed(1)}% |    (): ${L.toFixed(1)}%.`,diagnosis:U>20?" ' '.     ''      ' '.     .":"  .           .",recommendation:"          ."}}if(T==="siraAction"){const E=ne.distribution;return{reading:`  ${ne.total}   ${E.A+E.B}          .`,diagnosis:ne.pct>65?"   ' '.      (   )     (   ).":"     ' '.          .",recommendation:"     ' '.            : '  '."}}if(T==="crossSubject"){if(!P)return{reading:"   ",diagnosis:"          .",recommendation:""};const E=P.avgGap;return{reading:`  ${P.count}  .        ${E.toFixed(1)} .`,diagnosis:E<12?"  .     ' '     (  )   ( ).":"    (Transversalit).      .           .",recommendation:"     .       ."}}return{reading:"",diagnosis:"",recommendation:""}},le=T=>H[T]||ie(T),Z=({section:T})=>e.jsx("button",{onClick:E=>{E.stopPropagation(),c(T)},className:"absolute top-4 left-4 p-2 bg-slate-100 hover:bg-indigo-100 text-slate-500 hover:text-indigo-600 rounded-full transition-all duration-300 opacity-0 group-hover:opacity-100 transform scale-90 group-hover:scale-100 z-10 shadow-sm",title:"  ",children:e.jsx(hn,{size:18})}),q=()=>{if(!o)return null;const T=Ub[o],E=le(o);let L=null,U=null;switch(o){case"behaviorGap":U=e.jsx(Ms,{size:24,className:"text-emerald-500"}),L=e.jsx("div",{className:"h-full flex items-center justify-center p-4 w-full",children:e.jsxs("div",{className:"w-full max-w-lg space-y-8",children:[e.jsxs("div",{className:"relative group",children:[e.jsxs("div",{className:"flex justify-between text-lg font-bold mb-2 text-slate-300",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(gx,{size:24,className:"text-pink-500"}),"  ( )"]}),e.jsxs("span",{className:"text-emerald-400 text-2xl",children:[Q.bPct.toFixed(1),"%"]})]}),e.jsx("div",{className:"h-6 bg-slate-700/50 rounded-full overflow-hidden border border-slate-600",children:e.jsx("div",{className:"h-full bg-emerald-500 rounded-full transition-all duration-1000",style:{width:`${Q.bPct}%`}})})]}),e.jsxs("div",{className:"relative group",children:[e.jsxs("div",{className:"flex justify-between text-lg font-bold mb-2 text-slate-300",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(gt,{size:24,className:"text-blue-500"}),"  ( )"]}),e.jsxs("span",{className:"text-blue-400 text-2xl",children:[Q.uPct.toFixed(1),"%"]})]}),e.jsx("div",{className:"h-6 bg-slate-700/50 rounded-full overflow-hidden border border-slate-600",children:e.jsx("div",{className:"h-full bg-blue-500 rounded-full transition-all duration-1000",style:{width:`${Q.uPct}%`}})})]})]})});break;case"siraAction":U=e.jsx(gt,{size:24,className:"text-purple-500"});const $=ne.distribution,C=ne.total;L=e.jsx("div",{className:"h-full flex items-center justify-center p-4 w-full",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4 w-full max-w-lg",children:[e.jsxs("div",{className:"bg-emerald-500/20 p-6 rounded-2xl border border-emerald-500/30 text-center flex flex-col items-center justify-center",children:[e.jsxs("span",{className:"text-4xl font-bold text-emerald-400 mb-2",children:[Math.round(($.A+$.B)/C*100),"%"]}),e.jsx("span",{className:"text-sm font-bold text-emerald-200",children:" "}),e.jsx("p",{className:"text-[10px] text-emerald-300/70 mt-1",children:"    "})]}),e.jsxs("div",{className:"bg-red-500/20 p-6 rounded-2xl border border-red-500/30 text-center flex flex-col items-center justify-center",children:[e.jsxs("span",{className:"text-4xl font-bold text-red-400 mb-2",children:[Math.round(($.C+$.D)/C*100),"%"]}),e.jsx("span",{className:"text-sm font-bold text-red-200",children:" "}),e.jsx("p",{className:"text-[10px] text-red-300/70 mt-1",children:"    "})]})]})});break;case"crossSubject":U=e.jsx(Co,{size:24,className:"text-indigo-400"}),L=e.jsx("div",{className:"h-full flex flex-col items-center justify-center w-full p-4 relative",children:P?e.jsxs(e.Fragment,{children:[h&&e.jsx("div",{className:"fixed z-[9999] pointer-events-none transform -translate-x-1/2 mb-2 transition-all duration-200",style:{left:h.x,top:h.y,marginTop:h.y<250?"20px":"-100%",transform:h.y<250?"translate(-50%, 0)":"translate(-50%, -100%)"},children:e.jsxs("div",{className:"bg-slate-900 border border-slate-500 rounded-xl shadow-[0_0_30px_rgba(0,0,0,0.5)] p-4 w-64 text-white relative",children:[e.jsx("div",{className:`absolute left-1/2 -translate-x-1/2 w-3 h-3 bg-slate-900 border-slate-500 ${h.y<250?"-top-1.5 border-t border-l rotate-45":"-bottom-1.5 border-r border-b rotate-45"}`}),e.jsxs("div",{className:"flex items-center gap-2 mb-3 border-b border-slate-700 pb-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-700 flex items-center justify-center font-bold text-xs",children:h.name.charAt(0)}),e.jsx("div",{className:"font-bold text-sm truncate",children:h.name})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-[10px] text-slate-400 mb-1",children:[e.jsx("span",{children:"  ()"}),e.jsxs("span",{className:"text-blue-400",children:[h.arabic.toFixed(0),"%"]})]}),e.jsx("div",{className:"h-1.5 bg-slate-800 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-blue-500",style:{width:`${h.arabic}%`}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-[10px] text-slate-400 mb-1",children:[e.jsx("span",{children:" ()"}),e.jsxs("span",{className:"text-emerald-400",children:[h.islamic.toFixed(0),"%"]})]}),e.jsx("div",{className:"h-1.5 bg-slate-800 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-emerald-500",style:{width:`${h.islamic}%`}})})]})]})]})}),e.jsxs("div",{className:"flex flex-col gap-4 items-center w-full max-w-5xl justify-center",children:[e.jsxs("div",{className:"relative w-[500px] h-[500px] bg-slate-800/50 rounded-2xl border border-slate-700 shadow-2xl shrink-0 overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 z-10",children:[e.jsx("div",{className:"absolute top-0 right-0 w-1/2 h-1/2 border-b border-l border-slate-600/30 cursor-help hover:bg-white/5 transition-colors",onMouseEnter:()=>y({title:"  ( )",desc:" :    ()   ().   .",x:"75%",y:"25%"}),onMouseLeave:()=>y(null)}),e.jsx("div",{className:"absolute bottom-0 left-0 w-1/2 h-1/2 border-t border-r border-slate-600/30 cursor-help hover:bg-white/5 transition-colors",onMouseEnter:()=>y({title:"  ( )",desc:" :        .",x:"25%",y:"75%"}),onMouseLeave:()=>y(null)}),e.jsx("div",{className:"absolute top-0 left-0 w-1/2 h-1/2 cursor-help hover:bg-white/5 transition-colors",onMouseEnter:()=>y({title:"  ( )",desc:"     ( )      .",x:"25%",y:"25%"}),onMouseLeave:()=>y(null)}),e.jsx("div",{className:"absolute bottom-0 right-0 w-1/2 h-1/2 cursor-help hover:bg-white/5 transition-colors",onMouseEnter:()=>y({title:"  /  ",desc:"            .",x:"75%",y:"75%"}),onMouseLeave:()=>y(null)})]}),e.jsx("div",{className:"absolute inset-0 z-10 pointer-events-none bg-[linear-gradient(rgba(255,255,255,0.05)_1px,transparent_1px),linear-gradient(90deg,rgba(255,255,255,0.05)_1px,transparent_1px)] bg-[size:10%_10%]"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-[141%] h-0 border-t-2 border-dashed border-white/20 transform -rotate-45 origin-bottom-left pointer-events-none z-10"}),e.jsx("div",{className:"absolute top-0 bottom-0 left-1/2 w-px bg-slate-500/50 border-r border-dashed border-slate-500/50 pointer-events-none z-10"}),e.jsx("div",{className:"absolute left-0 right-0 top-1/2 h-px bg-slate-500/50 border-b border-dashed border-slate-500/50 pointer-events-none z-10"}),b&&!h&&e.jsx("div",{className:"absolute z-20 transform -translate-x-1/2 -translate-y-1/2 pointer-events-none text-center max-w-[200px]",style:{left:b.x,top:b.y},children:e.jsxs("div",{className:"bg-slate-900/90 backdrop-blur border border-indigo-500/50 rounded-xl p-3 shadow-2xl animate-in zoom-in-95 duration-200",children:[e.jsx("h4",{className:"text-indigo-300 font-bold text-lg mb-1",children:b.title}),e.jsx("p",{className:"text-xs text-slate-300 leading-relaxed",children:b.desc})]})}),e.jsx("div",{className:"absolute inset-6 z-30 pointer-events-none",children:P.points.map((D,j)=>{const S=Math.abs(D.x-D.y),z=S<15?"bg-emerald-400 ring-4 ring-emerald-500/20":"bg-red-400 ring-4 ring-red-500/20";return e.jsx("div",{className:"absolute w-8 h-8 -ml-4 -mb-4 flex items-center justify-center cursor-pointer group z-30 hover:z-50 pointer-events-auto",style:{left:`${D.x}%`,bottom:`${D.y}%`},onMouseEnter:W=>{const ue=W.currentTarget.getBoundingClientRect();p({x:ue.left+ue.width/2,y:ue.top,name:D.name,gap:S,arabic:D.x,islamic:D.y})},onMouseLeave:()=>p(null),children:e.jsx("div",{className:`w-3 h-3 rounded-full shadow-md border border-white/50 transition-transform duration-200 group-hover:scale-150 ${z}`})},j)})}),e.jsx("div",{className:"absolute bottom-1 right-2 text-[10px] text-blue-300 font-bold bg-slate-900/80 px-2 py-1 rounded z-10 pointer-events-none",children:" ( ) "}),e.jsx("div",{className:"absolute top-2 left-1 text-[10px] text-emerald-300 font-bold bg-slate-900/80 px-2 py-1 rounded writing-vertical z-10 pointer-events-none",children:"  ()"})]}),e.jsx("div",{className:"text-center w-full max-w-[500px] mt-8 bg-slate-800/80 p-3 rounded-2xl border border-slate-700 shadow-lg",children:e.jsxs("p",{className:"text-xs font-bold text-slate-300 flex items-center justify-center gap-6",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-3 h-3 rounded-full bg-emerald-400"}),"   ( )"]}),e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-3 h-3 rounded-full bg-red-400"}),"   (  )"]})]})})]})]}):e.jsx("div",{className:"text-slate-500",children:"    "})});break}return e.jsxs("div",{className:"fixed inset-0 z-[100] bg-slate-950 text-white flex flex-col md:flex-row animate-in zoom-in-95 duration-300 overflow-hidden",children:[e.jsx("button",{onClick:()=>c(null),className:"absolute top-4 left-4 p-2 bg-white/10 hover:bg-white/20 rounded-full z-50 text-white transition-all",children:e.jsx(mn,{size:24})}),e.jsxs("div",{className:"w-full md:w-[400px] lg:w-[35%] bg-slate-900 border-l border-slate-800 flex flex-col shadow-2xl relative z-40 order-2 md:order-1 h-full",children:[e.jsxs("div",{className:"p-8 pb-6 border-b border-slate-800 shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"p-3 bg-slate-800 rounded-xl border border-slate-700 shadow-inner",children:U}),e.jsx("h2",{className:"text-2xl font-bold text-white font-serif",children:T.title})]}),e.jsx("p",{className:"text-slate-400 text-sm",children:"   "})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-8 pt-6 custom-scrollbar",children:[e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"relative pl-4 border-r-2 border-slate-500/30 pr-4 bg-slate-800/30 p-4 rounded-l-xl",children:[e.jsxs("h4",{className:"text-slate-300 font-bold uppercase text-xs mb-2 flex items-center gap-2",children:[e.jsx(dt,{size:14}),"  "]}),e.jsx("p",{className:"text-slate-400 leading-relaxed text-xs text-justify font-light",children:T.concept})]}),o==="crossSubject"&&e.jsxs("div",{className:"relative pl-4 border-r-2 border-blue-500/30 pr-4 bg-blue-900/10 p-4 rounded-l-xl",children:[e.jsxs("h4",{className:"text-blue-300 font-bold uppercase text-xs mb-2 flex items-center gap-2",children:[e.jsx(Lo,{size:14}),"   "]}),e.jsxs("ul",{className:"text-slate-400 text-xs space-y-2 list-disc list-inside",children:[e.jsxs("li",{children:[e.jsx("span",{className:"text-emerald-400 font-bold",children:" :"}),"   ( )."]}),e.jsxs("li",{children:[e.jsx("span",{className:"text-red-400 font-bold",children:" :"}),"   (   )."]}),e.jsxs("li",{children:[e.jsx("span",{className:"text-yellow-400 font-bold",children:" :"}),"     ."]}),e.jsxs("li",{children:[e.jsx("span",{className:"text-yellow-400 font-bold",children:" :"}),"      ."]})]})]}),e.jsxs("div",{className:"relative pl-4 border-r-2 border-indigo-500/50 pr-4",children:[e.jsxs("h4",{className:"text-indigo-400 font-bold uppercase text-xs mb-2 flex items-center gap-2",children:[e.jsx(kt,{size:14}),"   "]}),e.jsx("p",{className:"text-slate-300 leading-relaxed text-sm text-justify",children:E.reading})]}),e.jsxs("div",{className:"relative pl-4 border-r-2 border-amber-500/50 pr-4 bg-amber-500/5 p-4 rounded-l-xl",children:[e.jsxs("h4",{className:"text-amber-400 font-bold uppercase text-xs mb-2 flex items-center gap-2",children:[e.jsx(Ht,{size:14}),"  "]}),e.jsx("p",{className:"text-slate-200 leading-relaxed text-sm font-medium text-justify",children:E.diagnosis})]}),e.jsxs("div",{className:"relative pl-4 border-r-2 border-emerald-500/50 pr-4",children:[e.jsxs("h4",{className:"text-emerald-400 font-bold uppercase text-xs mb-2 flex items-center gap-2",children:[e.jsx(_t,{size:14})," "]}),e.jsx("p",{className:"text-slate-300 leading-relaxed text-sm text-justify",children:E.recommendation})]})]}),e.jsx("div",{className:"mt-8 pt-6 border-t border-slate-800 text-center",children:e.jsx("p",{className:"text-xs text-slate-500",children:"     2025"})})]})]}),e.jsxs("div",{className:"flex-1 bg-gradient-to-br from-slate-900 to-slate-950 flex flex-col relative overflow-hidden order-1 md:order-2 h-full",children:[e.jsx("div",{className:"absolute inset-0 opacity-10",style:{backgroundImage:"radial-gradient(circle at 2px 2px, white 1px, transparent 0)",backgroundSize:"40px 40px"}}),e.jsx("div",{className:"w-full z-20 p-4 shrink-0 flex justify-center",children:e.jsxs("div",{className:"bg-white/5 backdrop-blur-md rounded-lg p-3 border border-white/10 relative overflow-hidden max-w-xl w-full flex items-center gap-4",children:[e.jsx("div",{className:"p-2 bg-indigo-500/20 rounded-lg border border-white/10",children:e.jsx(Jn,{size:16,className:"text-indigo-300"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-[10px] font-bold text-indigo-300 uppercase mb-0.5",children:" "}),e.jsx("p",{className:"text-xs text-slate-300 leading-relaxed font-mono opacity-90",children:T.method})]})]})}),e.jsx("div",{className:"relative z-10 w-full flex-1 flex items-center justify-center min-h-0 p-4 overflow-hidden",children:L})]})]})},Y=()=>!A||!N?null:e.jsx(Ng,{section:A,initialData:le(A),onSave:T=>F(A,T),onReset:()=>O(A),onClose:()=>I(null)});return X===0?e.jsx("div",{className:"text-center p-10 text-gray-400",children:"   "}):e.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-700 pb-24 relative",children:[u&&e.jsxs("div",{className:"fixed z-[9999] pointer-events-none bg-slate-900 text-white px-3 py-2 rounded-lg shadow-xl text-xs max-w-xs border border-slate-700",style:{left:u.x,top:u.y,transform:"translate(-50%, -100%)"},children:[u.title&&e.jsx("div",{className:"font-bold border-b border-slate-600 pb-1 mb-1 text-yellow-400",children:u.title}),e.jsx("div",{children:u.text})]}),q(),Y(),e.jsxs("div",{className:"bg-gradient-to-r from-slate-900 to-emerald-900 text-white p-8 rounded-3xl shadow-xl relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-5",children:e.jsx(rj,{size:300})}),e.jsx("div",{className:"relative z-10 flex flex-col md:flex-row justify-between items-center gap-6",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 text-emerald-400 font-bold uppercase tracking-wider text-xs",children:[e.jsx(qs,{size:14}),"  "]}),e.jsx("h2",{className:"text-3xl font-bold font-serif mb-2",children:"  ( )"}),e.jsxs("p",{className:"text-slate-300 text-sm flex items-center gap-2",children:[e.jsx(ft,{size:16})," ",i]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-slate-200 cursor-pointer hover:shadow-lg transition-all group relative",onClick:()=>c("behaviorGap"),children:[e.jsx(Z,{section:"behaviorGap"}),e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("h3",{className:"font-bold text-lg text-slate-800 flex items-center gap-2",children:[e.jsx(gx,{className:"text-pink-600",size:20}),"   ( vs )"]}),e.jsxs("div",{className:`px-3 py-1 rounded-full text-xs font-bold ${Math.abs(Q.gap)>10?"bg-red-100 text-red-600":"bg-emerald-100 text-emerald-600"}`,children:[": ",Q.gap.toFixed(1),"%"]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"relative pt-2",children:[e.jsxs("div",{className:"flex justify-between text-sm font-bold mb-2",children:[e.jsx("span",{className:"text-slate-600",children:"  ( )"}),e.jsxs("span",{className:"text-emerald-600",children:[Q.bPct.toFixed(1),"%"]})]}),e.jsx("div",{className:"h-3 bg-slate-100 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-emerald-500 rounded-full",style:{width:`${Q.bPct}%`}})})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex justify-between text-sm font-bold mb-2",children:[e.jsx("span",{className:"text-slate-600",children:"  ( )"}),e.jsxs("span",{className:"text-blue-500",children:[Q.uPct.toFixed(1),"%"]})]}),e.jsx("div",{className:"h-3 bg-slate-100 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-blue-500 rounded-full",style:{width:`${Q.uPct}%`}})})]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-slate-200 flex flex-col justify-between cursor-pointer hover:shadow-lg transition-all group relative",onClick:()=>c("siraAction"),children:[e.jsx(Z,{section:"siraAction"}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-lg text-slate-800 flex items-center gap-2 mb-2",children:[e.jsx(gt,{className:"text-purple-600",size:20}),"   "]}),e.jsx("p",{className:"text-xs text-slate-400",children:'    " "'})]}),e.jsx("div",{className:"flex items-center justify-center py-6",children:e.jsxs("div",{className:"relative w-40 h-40",children:[e.jsxs("svg",{className:"w-full h-full transform -rotate-90",children:[e.jsx("circle",{cx:"80",cy:"80",r:"70",fill:"none",stroke:"#f1f5f9",strokeWidth:"12"}),e.jsx("circle",{cx:"80",cy:"80",r:"70",fill:"none",stroke:"#9333ea",strokeWidth:"12",strokeDasharray:`${ne.pct*440/100} 440`,strokeLinecap:"round"})]}),e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[e.jsxs("span",{className:"text-3xl font-bold text-purple-700",children:[ne.pct.toFixed(0),"%"]}),e.jsx("span",{className:"text-[10px] text-slate-500 font-bold uppercase",children:""})]})]})})]}),e.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-3xl p-6 lg:col-span-2 relative group hover:shadow-md transition-shadow cursor-pointer",onClick:()=>c("crossSubject"),children:[e.jsx(Z,{section:"crossSubject"}),e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-lg text-slate-800 flex items-center gap-2",children:[e.jsx(Co,{className:"text-indigo-600",size:20}),"   ( )"]}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"         "})]}),P?e.jsxs("span",{className:"bg-indigo-100 text-indigo-700 text-xs px-3 py-1 rounded-full font-bold",children:[" : ",P.count," "]}):e.jsx("span",{className:"bg-slate-200 text-slate-500 text-xs px-3 py-1 rounded-full font-bold",children:"   "})]}),P?e.jsxs("div",{className:"h-48 relative border-l border-b border-slate-300 mx-4 bg-white/50 rounded-tr-xl",children:[e.jsx("div",{className:"absolute top-0 right-0 w-1/2 h-1/2 bg-emerald-500/5 rounded-tr-xl"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-1/2 h-1/2 bg-red-500/5"}),e.jsx("div",{className:"absolute inset-0",children:P.points.map((T,E)=>e.jsx("div",{className:"absolute w-2 h-2 rounded-full",style:{left:`${T.x}%`,bottom:`${T.y}%`,backgroundColor:Math.abs(T.x-T.y)<15?"#10b981":"#f43f5e",opacity:.6}},E))}),e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-full border-t border-dashed border-slate-400/20 transform -rotate-45 origin-bottom-left pointer-events-none"}),e.jsx("div",{className:"absolute -bottom-6 w-full text-center text-[10px] text-slate-500 font-bold",children:" ()"}),e.jsx("div",{className:"absolute -left-8 top-1/2 -rotate-90 text-[10px] text-slate-500 font-bold",children:" ()"})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-slate-400",children:[e.jsx(Ma,{size:32,className:"mb-2 opacity-20"}),e.jsx("p",{className:"text-sm",children:"         ."})]})]})]}),e.jsx("div",{className:"fixed bottom-6 left-1/2 transform -translate-x-1/2 z-50",children:e.jsxs("button",{onClick:()=>w(!0),className:"flex items-center gap-2 bg-slate-800 hover:bg-slate-700 text-white px-8 py-4 rounded-2xl font-bold text-sm transition-all shadow-xl hover:shadow-2xl border-2 border-slate-700 hover:border-slate-600 hover:scale-105 group",children:[e.jsx(Lt,{size:18,className:"group-hover:rotate-12 transition-transform"}),e.jsx("span",{children:" "})]})}),N&&e.jsx("div",{className:"fixed inset-0 z-[110] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 animate-in fade-in",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full p-6 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6 border-b pb-4",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-xl text-slate-800 flex items-center gap-2",children:[e.jsx(Lt,{size:24,className:"text-indigo-600"}),"  "]}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"   "})]}),e.jsx("button",{onClick:()=>w(!1),className:"text-slate-400 hover:text-red-500",children:e.jsx(ut,{})})]}),A?e.jsx(Ng,{section:A,initialData:le(A),onSave:T=>F(A,T),onReset:()=>O(A),onClose:()=>I(null)}):e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("button",{onClick:()=>I("behaviorGap"),className:"p-4 bg-slate-50 hover:bg-indigo-50 border rounded-xl text-right transition-colors group",children:e.jsx("span",{className:"font-bold text-slate-700 block group-hover:text-indigo-700",children:" "})}),e.jsx("button",{onClick:()=>I("siraAction"),className:"p-4 bg-slate-50 hover:bg-indigo-50 border rounded-xl text-right transition-colors group",children:e.jsx("span",{className:"font-bold text-slate-700 block group-hover:text-indigo-700",children:" "})}),e.jsx("button",{onClick:()=>I("crossSubject"),className:"p-4 bg-slate-50 hover:bg-indigo-50 border rounded-xl text-right transition-colors group col-span-2",children:e.jsx("span",{className:"font-bold text-slate-700 block group-hover:text-indigo-700",children:"  ( )"})})]})]})})]})},Ng=({section:n,initialData:t,onSave:a,onReset:i,onClose:o})=>{const[c,u]=R.useState(t),x=()=>Ub[n].title;return e.jsxs("div",{className:"space-y-4 animate-in slide-in-from-right-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("button",{onClick:o,className:"text-xs text-slate-500 hover:text-slate-800 flex items-center gap-1",children:[e.jsx(Ps,{size:12,className:"rotate-180"}),"  "]}),e.jsx("span",{className:"text-sm font-bold bg-indigo-100 text-indigo-700 px-3 py-1 rounded-full",children:x()})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-700 mb-1",children:"  "}),e.jsx(ze,{value:c.reading,onChange:h=>u({...c,reading:h}),className:"w-full border rounded-lg p-3 text-sm bg-slate-50 focus:bg-white focus:ring-2 focus:ring-indigo-500 max-h-60 overflow-y-auto",minHeight:"min-h-[120px]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-700 mb-1",children:" "}),e.jsx(ze,{value:c.diagnosis,onChange:h=>u({...c,diagnosis:h}),className:"w-full border rounded-lg p-3 text-sm bg-amber-50 focus:bg-white focus:ring-2 focus:ring-amber-500 max-h-60 overflow-y-auto",minHeight:"min-h-[120px]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-700 mb-1",children:""}),e.jsx(ze,{value:c.recommendation,onChange:h=>u({...c,recommendation:h}),className:"w-full border rounded-lg p-3 text-sm bg-emerald-50 focus:bg-white focus:ring-2 focus:ring-emerald-500 max-h-60 overflow-y-auto",minHeight:"min-h-[120px]"})]}),e.jsxs("div",{className:"flex justify-between pt-4 border-t",children:[e.jsxs("button",{onClick:i,className:"text-red-500 text-xs font-bold flex items-center gap-1 hover:underline",children:[e.jsx(Fn,{size:12}),"   "]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:o,className:"px-4 py-2 text-slate-500 font-bold hover:bg-slate-100 rounded-lg",children:""}),e.jsxs("button",{onClick:()=>a(c),className:"px-6 py-2 bg-indigo-600 text-white font-bold rounded-lg hover:bg-indigo-700 shadow-md flex items-center gap-2",children:[e.jsx(ws,{size:16}),"  "]})]})]})]})},yu={competencies:[{id:"general_history",label:"    ",criteria:[{id:1,label:"  "},{id:2,label:"      "},{id:3,label:"    "}]},{id:"national_history",label:"  ",criteria:[{id:1,label:"    "},{id:2,label:"     "},{id:3,label:"    "},{id:4,label:"    "}]}]},Pb={identityIndex:{title:"  ",concept:"      ( )     .",method:"      (  )   4 ."},chronoAwareness:{title:"  ( )",concept:"         ( ).",method:"      (    )."},nationalDepth:{title:"  ",concept:"    :          (  )",method:"       (  )."},crossLang:{title:"  ",concept:"    .           ''  '' (   ).",method:"  ' ' ( )   '' ( )  ."}},zk=({records:n,allRecords:t,scope:a,contextName:i})=>{const[o,c]=R.useState(null),[u,x]=R.useState(null),[h,p]=R.useState(null),[b,y]=R.useState(null),[N,w]=R.useState(!1),[A,I]=R.useState(null),[H,G]=R.useState({});R.useEffect(()=>{const T=`mufattish_analysis_y5_history_${i}_${a}`,E=localStorage.getItem(T);if(E)try{G(JSON.parse(E))}catch(L){console.error(L)}},[i,a]);const F=(T,E)=>{const L={...H,[T]:E};G(L),localStorage.setItem(`mufattish_analysis_y5_history_${i}_${a}`,JSON.stringify(L)),I(null)},O=T=>{const E={...H};delete E[T],G(E),localStorage.setItem(`mufattish_analysis_y5_history_${i}_${a}`,JSON.stringify(E))},V=R.useMemo(()=>n.flatMap(T=>T.students.map(E=>({...E,className:T.className,schoolName:T.schoolName}))),[n]),X=V.length,ee=(T,E,L)=>{if(!T.results)return null;const U=T.results[E];return U?U[L]||U[String(L)]:null},Q=R.useMemo(()=>{let T=0,E=0;return V.forEach(L=>{yu.competencies[1].criteria.forEach(U=>{const $=ee(L,"national_history",U.id);$&&(E+=3,$==="A"?T+=3:$==="B"?T+=2:$==="C"&&(T+=1))})}),E>0?T/E*100:0},[V]),se=R.useMemo(()=>{let T=0,E=0;return V.forEach(L=>{yu.competencies[0].criteria.forEach(U=>{const $=ee(L,"general_history",U.id);$&&(E+=3,$==="A"?T+=3:$==="B"?T+=2:$==="C"&&(T+=1))})}),E>0?T/E*100:0},[V]),ne=R.useMemo(()=>{let T=0,E=0;return V.forEach(L=>{const U=ee(L,"national_history",1);U&&(E+=3,U==="A"?T+=3:U==="B"?T+=2:U==="C"&&(T+=1))}),E>0?T/E*100:0},[V]),P=R.useMemo(()=>{if(!t||t.length===0)return null;const T=[];let E=0,L=0;const U=new Map;if(t.forEach(C=>{if(C.level==="5AP"&&C.subject.includes("")){const D=`${C.schoolName}-${C.className}`.trim();C.students.forEach(j=>{const S=`${D}-${j.fullName.trim()}`;U.set(S,j)})}}),n.forEach(C=>{const D=`${C.schoolName}-${C.className}`.trim();C.students.forEach(j=>{const S=`${D}-${j.fullName.trim()}`,k=U.get(S);if(k){let z=0,W=0;[1,2,3,4].forEach(Re=>{var ke;const _e=(ke=k.results.reading_perf)==null?void 0:ke[Re];_e&&(W+=3,_e==="A"?z+=3:_e==="B"?z+=2:_e==="C"&&(z+=1))});const ue=W>0?Math.min(100,z/W*100):0;let J=0,be=0;yu.competencies.forEach(Re=>{Re.criteria.forEach(_e=>{const ke=ee(j,Re.id,_e.id);ke&&(be+=3,ke==="A"?J+=3:ke==="B"?J+=2:ke==="C"&&(J+=1))})});const Ee=be>0?Math.min(100,J/be*100):0;T.push({x:ue,y:Ee,name:j.fullName}),E+=Math.abs(ue-Ee),L++}})}),L===0)return null;const $=E/L;return{points:T,count:L,avgGap:$}},[n,t]),ie=T=>{if(T==="identityIndex")return{reading:`       ${Q.toFixed(1)}%.`,diagnosis:Q>60?"         .":"        .",recommendation:"          ."};if(T==="chronoAwareness")return{reading:`        ${se.toFixed(1)}%.`,diagnosis:"      ( ).        .",recommendation:"     (Frise Chronologique)    ."};if(T==="nationalDepth")return{reading:`       ${ne.toFixed(1)}%.`,diagnosis:ne>50?"     .":"       (   ).",recommendation:"  ' '      ."};if(T==="crossLang"){if(!P)return{reading:"   .",diagnosis:"",recommendation:""};const E=P.avgGap;return{reading:`     ()     ${E.toFixed(1)} .`,diagnosis:E<15?" .       .":" ' '.                .",recommendation:"          ( )."}}return{reading:"",diagnosis:"",recommendation:""}},le=T=>H[T]||ie(T),Z=({section:T})=>e.jsx("button",{onClick:E=>{E.stopPropagation(),c(T)},className:"absolute top-4 left-4 p-2 bg-slate-100 hover:bg-indigo-100 text-slate-500 hover:text-indigo-600 rounded-full transition-all duration-300 opacity-0 group-hover:opacity-100 transform scale-90 group-hover:scale-100 z-10 shadow-sm",title:"  ",children:e.jsx(hn,{size:18})}),q=()=>{if(!o)return null;const T=Pb[o],E=le(o);let L=null,U=null;switch(o){case"identityIndex":U=e.jsx(Eo,{size:24,className:"text-emerald-500"}),L=e.jsx("div",{className:"h-full flex items-center justify-center p-4 w-full",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsxs("span",{className:"text-8xl font-bold text-emerald-400 font-serif",children:[Q.toFixed(0),"%"]}),e.jsx("p",{className:"text-emerald-200 text-xl",children:"   "})]})});break;case"chronoAwareness":U=e.jsx(vx,{size:24,className:"text-blue-500"}),L=e.jsx("div",{className:"h-full flex items-center justify-center p-4 w-full",children:e.jsxs("div",{className:"relative w-64 h-64",children:[e.jsxs("svg",{className:"w-full h-full",viewBox:"0 0 100 100",children:[e.jsx("circle",{cx:"50",cy:"50",r:"45",fill:"none",stroke:"#1e293b",strokeWidth:"10"}),e.jsx("circle",{cx:"50",cy:"50",r:"45",fill:"none",stroke:"#3b82f6",strokeWidth:"10",strokeDasharray:`${se*283/100} 283`,transform:"rotate(-90 50 50)",strokeLinecap:"round"})]}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("span",{className:"text-4xl font-bold text-blue-400",children:[se.toFixed(0),"%"]})})]})});break;case"nationalDepth":U=e.jsx(Ht,{size:24,className:"text-amber-500"}),L=e.jsx("div",{className:"h-full flex items-center justify-center p-4 w-full",children:e.jsx("div",{className:"w-full max-w-lg space-y-6",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-2 text-amber-200",children:[e.jsx("span",{children:"  ()"}),e.jsx("span",{children:"  ()"})]}),e.jsx("div",{className:"h-4 bg-slate-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-amber-500",style:{width:`${ne}%`}})}),e.jsxs("p",{className:"text-center mt-2 text-3xl font-bold text-amber-400",children:[ne.toFixed(0),"%"]})]})})});break;case"crossLang":U=e.jsx(Co,{size:24,className:"text-indigo-400"}),L=e.jsx("div",{className:"h-full flex flex-col items-center justify-center w-full p-4 relative",children:P?e.jsxs(e.Fragment,{children:[h&&e.jsx("div",{className:"fixed z-[9999] pointer-events-none transform -translate-x-1/2 mb-2 transition-all duration-200",style:{left:h.x,top:h.y,marginTop:h.y<250?"20px":"-100%",transform:h.y<250?"translate(-50%, 0)":"translate(-50%, -100%)"},children:e.jsxs("div",{className:"bg-slate-900 border border-slate-500 rounded-xl shadow-[0_0_30px_rgba(0,0,0,0.5)] p-4 w-64 text-white relative",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3 border-b border-slate-700 pb-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-700 flex items-center justify-center font-bold text-xs",children:h.name.charAt(0)}),e.jsx("div",{className:"font-bold text-sm truncate",children:h.name})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-[10px] text-slate-400 mb-1",children:[e.jsx("span",{children:"  ()"}),e.jsxs("span",{className:"text-blue-400",children:[h.arabic.toFixed(0),"%"]})]}),e.jsx("div",{className:"h-1.5 bg-slate-800 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-blue-500",style:{width:`${h.arabic}%`}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-[10px] text-slate-400 mb-1",children:[e.jsx("span",{children:" ()"}),e.jsxs("span",{className:"text-amber-400",children:[h.history.toFixed(0),"%"]})]}),e.jsx("div",{className:"h-1.5 bg-slate-800 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-amber-500",style:{width:`${h.history}%`}})})]})]})]})}),e.jsxs("div",{className:"flex flex-col gap-4 items-center w-full max-w-5xl justify-center",children:[e.jsxs("div",{className:"relative w-[500px] h-[500px] bg-slate-800/50 rounded-2xl border border-slate-700 shadow-2xl shrink-0 overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 z-10",children:[e.jsx("div",{className:"absolute top-0 right-0 w-1/2 h-1/2 border-b border-l border-slate-600/30 cursor-help hover:bg-white/5 transition-colors",onMouseEnter:()=>y({title:" ",desc:"    .",x:"75%",y:"25%"}),onMouseLeave:()=>y(null)}),e.jsx("div",{className:"absolute bottom-0 left-0 w-1/2 h-1/2 border-t border-r border-slate-600/30 cursor-help hover:bg-white/5 transition-colors",onMouseEnter:()=>y({title:"  ( )",desc:"    .",x:"25%",y:"75%"}),onMouseLeave:()=>y(null)}),e.jsx("div",{className:"absolute top-0 left-0 w-1/2 h-1/2 cursor-help hover:bg-white/5 transition-colors",onMouseEnter:()=>y({title:" ",desc:"     .",x:"25%",y:"25%"}),onMouseLeave:()=>y(null)}),e.jsx("div",{className:"absolute bottom-0 right-0 w-1/2 h-1/2 cursor-help hover:bg-white/5 transition-colors",onMouseEnter:()=>y({title:"  ",desc:"       .",x:"75%",y:"75%"}),onMouseLeave:()=>y(null)})]}),e.jsx("div",{className:"absolute inset-0 z-20 pointer-events-none bg-[linear-gradient(rgba(255,255,255,0.05)_1px,transparent_1px),linear-gradient(90deg,rgba(255,255,255,0.05)_1px,transparent_1px)] bg-[size:10%_10%]"}),e.jsx("div",{className:"absolute top-0 bottom-0 left-1/2 w-px bg-slate-500/50 border-r border-dashed border-slate-500/50 pointer-events-none z-20"}),e.jsx("div",{className:"absolute left-0 right-0 top-1/2 h-px bg-slate-500/50 border-b border-dashed border-slate-500/50 pointer-events-none z-20"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-[141%] h-0 border-t-2 border-dashed border-white/20 transform -rotate-45 origin-bottom-left pointer-events-none z-20"}),b&&!h&&e.jsx("div",{className:"absolute z-20 transform -translate-x-1/2 -translate-y-1/2 pointer-events-none text-center",style:{left:b.x,top:b.y},children:e.jsxs("div",{className:"bg-slate-900/90 backdrop-blur border border-indigo-500/50 rounded-xl p-3 shadow-2xl animate-in zoom-in-95 duration-200",children:[e.jsx("h4",{className:"text-indigo-300 font-bold text-lg mb-1",children:b.title}),e.jsx("p",{className:"text-xs text-slate-300 whitespace-nowrap",children:b.desc})]})}),e.jsx("div",{className:"absolute inset-6 z-50 pointer-events-none",children:P.points.map(($,C)=>{const D=Math.abs($.x-$.y),S=D<15?"bg-emerald-400 ring-4 ring-emerald-500/20":"bg-red-400 ring-4 ring-red-500/20";return e.jsx("div",{className:"absolute w-8 h-8 -ml-4 -mb-4 flex items-center justify-center cursor-pointer group hover:z-[60] pointer-events-auto",style:{left:`${$.x}%`,bottom:`${$.y}%`},onMouseEnter:k=>{const z=k.currentTarget.getBoundingClientRect();p({x:z.left+z.width/2,y:z.top,name:$.name,gap:D,arabic:$.x,history:$.y})},onMouseLeave:()=>p(null),children:e.jsx("div",{className:`w-3 h-3 rounded-full shadow-md border border-white/50 transition-transform duration-200 group-hover:scale-150 ${S}`})},C)})}),e.jsx("div",{className:"absolute bottom-1 right-2 text-[10px] text-blue-300 font-bold bg-slate-900/80 px-2 py-1 rounded z-30 pointer-events-none",children:" ( ) "}),e.jsx("div",{className:"absolute top-2 left-1 text-[10px] text-amber-300 font-bold bg-slate-900/80 px-2 py-1 rounded writing-vertical z-30 pointer-events-none",children:" "})]}),e.jsx("div",{className:"text-center w-full max-w-[500px] mt-4 bg-slate-800/80 p-3 rounded-2xl border border-slate-700 shadow-lg",children:e.jsxs("p",{className:"text-xs font-bold text-slate-300 flex items-center justify-center gap-6",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-3 h-3 rounded-full bg-emerald-400"}),"  (  )"]}),e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-3 h-3 rounded-full bg-red-400"}),"  (   )"]})]})})]})]}):e.jsx("div",{className:"text-slate-500",children:"    "})});break}return e.jsxs("div",{className:"fixed inset-0 z-[100] bg-slate-950 text-white flex flex-col md:flex-row animate-in zoom-in-95 duration-300 overflow-hidden",children:[e.jsx("button",{onClick:()=>c(null),className:"absolute top-4 left-4 p-2 bg-white/10 hover:bg-white/20 rounded-full z-50 text-white transition-all",children:e.jsx(mn,{size:24})}),e.jsxs("div",{className:"w-full md:w-[400px] lg:w-[35%] bg-slate-900 border-l border-slate-800 flex flex-col shadow-2xl relative z-40 order-2 md:order-1 h-full",children:[e.jsxs("div",{className:"p-8 pb-6 border-b border-slate-800 shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"p-3 bg-slate-800 rounded-xl border border-slate-700 shadow-inner",children:U}),e.jsx("h2",{className:"text-2xl font-bold text-white font-serif",children:T.title})]}),e.jsx("p",{className:"text-slate-400 text-sm",children:"   "})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-8 pt-6 custom-scrollbar",children:[e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"relative pl-4 border-r-2 border-slate-500/30 pr-4 bg-slate-800/30 p-4 rounded-l-xl",children:[e.jsxs("h4",{className:"text-slate-300 font-bold uppercase text-xs mb-2 flex items-center gap-2",children:[e.jsx(dt,{size:14}),"  "]}),e.jsx("p",{className:"text-slate-400 leading-relaxed text-xs text-justify font-light",children:T.concept})]}),o==="crossLang"&&e.jsxs("div",{className:"relative pl-4 border-r-2 border-blue-500/30 pr-4 bg-blue-900/10 p-4 rounded-l-xl",children:[e.jsxs("h4",{className:"text-blue-300 font-bold uppercase text-xs mb-2 flex items-center gap-2",children:[e.jsx(Lo,{size:14}),"   "]}),e.jsxs("ul",{className:"text-slate-400 text-xs space-y-2 list-disc list-inside",children:[e.jsxs("li",{children:[e.jsx("span",{className:"text-emerald-400 font-bold",children:" :"}),"   ( )."]}),e.jsxs("li",{children:[e.jsx("span",{className:"text-red-400 font-bold",children:" :"}),"   ( )."]}),e.jsxs("li",{children:[e.jsx("span",{className:"text-yellow-400 font-bold",children:" :"}),"   (  )."]}),e.jsxs("li",{children:[e.jsx("span",{className:"text-yellow-400 font-bold",children:" :"}),"   ."]})]})]}),e.jsxs("div",{className:"relative pl-4 border-r-2 border-indigo-500/50 pr-4",children:[e.jsxs("h4",{className:"text-indigo-400 font-bold uppercase text-xs mb-2 flex items-center gap-2",children:[e.jsx(kt,{size:14}),"   "]}),e.jsx("p",{className:"text-slate-300 leading-relaxed text-sm text-justify",children:E.reading})]}),e.jsxs("div",{className:"relative pl-4 border-r-2 border-amber-500/50 pr-4 bg-amber-500/5 p-4 rounded-l-xl",children:[e.jsxs("h4",{className:"text-amber-400 font-bold uppercase text-xs mb-2 flex items-center gap-2",children:[e.jsx(Ht,{size:14}),"  "]}),e.jsx("p",{className:"text-slate-200 leading-relaxed text-sm font-medium text-justify",children:E.diagnosis})]}),e.jsxs("div",{className:"relative pl-4 border-r-2 border-emerald-500/50 pr-4",children:[e.jsxs("h4",{className:"text-emerald-400 font-bold uppercase text-xs mb-2 flex items-center gap-2",children:[e.jsx(_t,{size:14})," "]}),e.jsx("p",{className:"text-slate-300 leading-relaxed text-sm text-justify",children:E.recommendation})]})]}),e.jsx("div",{className:"mt-8 pt-6 border-t border-slate-800 text-center",children:e.jsx("p",{className:"text-xs text-slate-500",children:"     2025"})})]})]}),e.jsxs("div",{className:"flex-1 bg-gradient-to-br from-slate-900 to-slate-950 flex flex-col relative order-1 md:order-2 h-full",children:[e.jsx("div",{className:"absolute inset-0 opacity-10 pointer-events-none",style:{backgroundImage:"radial-gradient(circle at 2px 2px, white 1px, transparent 0)",backgroundSize:"40px 40px"}}),e.jsx("div",{className:"w-full z-20 p-4 shrink-0 flex justify-center pointer-events-none",children:e.jsxs("div",{className:"bg-white/5 backdrop-blur-md rounded-lg p-3 border border-white/10 relative overflow-hidden max-w-xl w-full flex items-center gap-4",children:[e.jsx("div",{className:"p-2 bg-indigo-500/20 rounded-lg border border-white/10",children:e.jsx(Jn,{size:16,className:"text-indigo-300"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-[10px] font-bold text-indigo-300 uppercase mb-0.5",children:" "}),e.jsx("p",{className:"text-xs text-slate-300 leading-relaxed font-mono opacity-90",children:T.method})]})]})}),e.jsx("div",{className:"relative z-10 w-full flex-1 overflow-y-auto p-4 custom-scrollbar",children:e.jsx("div",{className:"min-h-full flex flex-col items-center justify-center",children:L})})]})]})},Y=()=>!A||!N?null:e.jsx(jg,{section:A,initialData:le(A),onSave:T=>F(A,T),onReset:()=>O(A),onClose:()=>I(null)});return X===0?e.jsx("div",{className:"text-center p-10 text-gray-400",children:"   "}):e.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-700 pb-24 relative",children:[u&&e.jsxs("div",{className:"fixed z-[9999] pointer-events-none bg-slate-900 text-white px-3 py-2 rounded-lg shadow-xl text-xs max-w-xs border border-slate-700",style:{left:u.x,top:u.y,transform:"translate(-50%, -100%)"},children:[u.title&&e.jsx("div",{className:"font-bold border-b border-slate-600 pb-1 mb-1 text-yellow-400",children:u.title}),e.jsx("div",{children:u.text})]}),q(),Y(),e.jsxs("div",{className:"bg-gradient-to-r from-slate-900 to-amber-900 text-white p-8 rounded-3xl shadow-xl relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-5",children:e.jsx(ft,{size:300})}),e.jsx("div",{className:"relative z-10 flex flex-col md:flex-row justify-between items-center gap-6",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 text-amber-400 font-bold uppercase tracking-wider text-xs",children:[e.jsx(qs,{size:14}),"  "]}),e.jsx("h2",{className:"text-3xl font-bold font-serif mb-2",children:" ( )"}),e.jsxs("p",{className:"text-slate-300 text-sm flex items-center gap-2",children:[e.jsx(ft,{size:16})," ",i]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-slate-200 cursor-pointer hover:shadow-lg transition-all group relative",onClick:()=>c("identityIndex"),children:[e.jsx(Z,{section:"identityIndex"}),e.jsx("div",{className:"flex justify-between items-start mb-6",children:e.jsxs("h3",{className:"font-bold text-lg text-slate-800 flex items-center gap-2",children:[e.jsx(Eo,{className:"text-emerald-600",size:20}),"   "]})}),e.jsxs("div",{className:"flex items-center justify-center py-6",children:[e.jsx("div",{className:"relative w-48 h-24 bg-gray-100 rounded-t-full overflow-hidden",children:e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-full origin-bottom transition-transform duration-1000",style:{transform:`rotate(${Math.min(Q,100)/100*180-90}deg)`},children:e.jsx("div",{className:"w-2 h-full bg-emerald-600 mx-auto shadow-[0_0_15px_#059669]"})})}),e.jsx("div",{className:"absolute bottom-10 text-center",children:e.jsxs("span",{className:"text-4xl font-bold text-slate-800",children:[Q.toFixed(0),"%"]})})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-slate-200 cursor-pointer hover:shadow-lg transition-all group relative",onClick:()=>c("chronoAwareness"),children:[e.jsx(Z,{section:"chronoAwareness"}),e.jsx("div",{className:"flex justify-between items-start mb-6",children:e.jsxs("h3",{className:"font-bold text-lg text-slate-800 flex items-center gap-2",children:[e.jsx(vx,{className:"text-blue-600",size:20}),"   ()"]})}),e.jsx("div",{className:"flex items-center justify-center py-6",children:e.jsxs("div",{className:"relative w-40 h-40",children:[e.jsxs("svg",{className:"w-full h-full",viewBox:"0 0 100 100",children:[e.jsx("circle",{cx:"50",cy:"50",r:"45",fill:"none",stroke:"#f1f5f9",strokeWidth:"10"}),e.jsx("circle",{cx:"50",cy:"50",r:"45",fill:"none",stroke:"#3b82f6",strokeWidth:"10",strokeDasharray:`${se*283/100} 283`,transform:"rotate(-90 50 50)",strokeLinecap:"round"})]}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("span",{className:"text-3xl font-bold text-blue-600",children:[se.toFixed(0),"%"]})})]})})]}),e.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-3xl p-6 relative group hover:shadow-md transition-shadow cursor-pointer",onClick:()=>c("crossLang"),children:[e.jsx(Z,{section:"crossLang"}),e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-lg text-slate-800 flex items-center gap-2",children:[e.jsx(Co,{className:"text-indigo-600",size:20}),"   "]}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"     "})]}),P?e.jsxs("span",{className:"bg-indigo-100 text-indigo-700 text-xs px-3 py-1 rounded-full font-bold",children:[" : ",P.count," "]}):e.jsx("span",{className:"bg-slate-200 text-slate-500 text-xs px-3 py-1 rounded-full font-bold",children:"   "})]}),P?e.jsxs("div",{className:"h-48 relative border-l border-b border-slate-300 mx-4 bg-white/50 rounded-tr-xl",children:[e.jsx("div",{className:"absolute top-0 right-0 w-1/2 h-1/2 bg-emerald-500/5 rounded-tr-xl"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-1/2 h-1/2 bg-red-500/5"}),e.jsx("div",{className:"absolute inset-0",children:P.points.map((T,E)=>e.jsx("div",{className:"absolute w-2 h-2 rounded-full",style:{left:`${T.x}%`,bottom:`${T.y}%`,backgroundColor:Math.abs(T.x-T.y)<15?"#10b981":"#f43f5e",opacity:.6}},E))}),e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-full border-t border-dashed border-slate-400/20 transform -rotate-45 origin-bottom-left pointer-events-none"}),e.jsx("div",{className:"absolute -bottom-6 w-full text-center text-[10px] text-slate-500 font-bold",children:" ()"}),e.jsx("div",{className:"absolute -left-8 top-1/2 -rotate-90 text-[10px] text-slate-500 font-bold",children:""})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-slate-400",children:[e.jsx(Ma,{size:32,className:"mb-2 opacity-20"}),e.jsx("p",{className:"text-sm",children:"      ."})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-slate-200 cursor-pointer hover:shadow-lg transition-all group relative",onClick:()=>c("nationalDepth"),children:[e.jsx(Z,{section:"nationalDepth"}),e.jsx("div",{className:"flex justify-between items-start mb-6",children:e.jsxs("h3",{className:"font-bold text-lg text-slate-800 flex items-center gap-2",children:[e.jsx(Ht,{className:"text-amber-600",size:20}),"   ( )"]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between text-sm text-slate-600",children:[e.jsx("span",{children:" "}),e.jsx("span",{children:"  ()"})]}),e.jsx("div",{className:"h-4 bg-slate-100 rounded-full overflow-hidden relative",children:e.jsx("div",{className:"h-full bg-amber-500",style:{width:`${ne}%`}})}),e.jsxs("div",{className:"text-center font-bold text-2xl text-amber-500",children:[ne.toFixed(0),"%"]})]})]})]}),e.jsx("div",{className:"fixed bottom-6 left-1/2 transform -translate-x-1/2 z-50",children:e.jsxs("button",{onClick:()=>w(!0),className:"flex items-center gap-2 bg-slate-800 hover:bg-slate-700 text-white px-8 py-4 rounded-2xl font-bold text-sm transition-all shadow-xl hover:shadow-2xl border-2 border-slate-700 hover:border-slate-600 hover:scale-105 group",children:[e.jsx(Lt,{size:18,className:"group-hover:rotate-12 transition-transform"}),e.jsx("span",{children:" "})]})}),N&&e.jsx("div",{className:"fixed inset-0 z-[110] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 animate-in fade-in",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full p-6 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6 border-b pb-4",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-xl text-slate-800 flex items-center gap-2",children:[e.jsx(Lt,{size:24,className:"text-indigo-600"}),"  "]}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"   "})]}),e.jsx("button",{onClick:()=>w(!1),className:"text-slate-400 hover:text-red-500",children:e.jsx(ut,{})})]}),A?e.jsx(jg,{section:A,initialData:le(A),onSave:T=>F(A,T),onReset:()=>O(A),onClose:()=>I(null)}):e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("button",{onClick:()=>I("identityIndex"),className:"p-4 bg-slate-50 hover:bg-indigo-50 border rounded-xl text-right transition-colors group",children:e.jsx("span",{className:"font-bold text-slate-700 block group-hover:text-indigo-700",children:" "})}),e.jsx("button",{onClick:()=>I("chronoAwareness"),className:"p-4 bg-slate-50 hover:bg-indigo-50 border rounded-xl text-right transition-colors group",children:e.jsx("span",{className:"font-bold text-slate-700 block group-hover:text-indigo-700",children:" "})}),e.jsx("button",{onClick:()=>I("nationalDepth"),className:"p-4 bg-slate-50 hover:bg-indigo-50 border rounded-xl text-right transition-colors group",children:e.jsx("span",{className:"font-bold text-slate-700 block group-hover:text-indigo-700",children:" "})}),e.jsx("button",{onClick:()=>I("crossLang"),className:"p-4 bg-slate-50 hover:bg-indigo-50 border rounded-xl text-right transition-colors group",children:e.jsx("span",{className:"font-bold text-slate-700 block group-hover:text-indigo-700",children:" "})})]})]})})]})},jg=({section:n,initialData:t,onSave:a,onReset:i,onClose:o})=>{const[c,u]=R.useState(t),x=()=>Pb[n].title;return e.jsxs("div",{className:"space-y-4 animate-in slide-in-from-right-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("button",{onClick:o,className:"text-xs text-slate-500 hover:text-slate-800 flex items-center gap-1",children:[e.jsx(Ps,{size:12,className:"rotate-180"}),"  "]}),e.jsx("span",{className:"text-sm font-bold bg-indigo-100 text-indigo-700 px-3 py-1 rounded-full",children:x()})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-700 mb-1",children:"  "}),e.jsx(ze,{value:c.reading,onChange:h=>u({...c,reading:h}),className:"w-full border rounded-lg p-3 text-sm bg-slate-50 focus:bg-white focus:ring-2 focus:ring-indigo-500 max-h-60 overflow-y-auto",minHeight:"min-h-[120px]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-700 mb-1",children:" "}),e.jsx(ze,{value:c.diagnosis,onChange:h=>u({...c,diagnosis:h}),className:"w-full border rounded-lg p-3 text-sm bg-amber-50 focus:bg-white focus:ring-2 focus:ring-amber-500 max-h-60 overflow-y-auto",minHeight:"min-h-[120px]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-700 mb-1",children:""}),e.jsx(ze,{value:c.recommendation,onChange:h=>u({...c,recommendation:h}),className:"w-full border rounded-lg p-3 text-sm bg-emerald-50 focus:bg-white focus:ring-2 focus:ring-emerald-500 max-h-60 overflow-y-auto",minHeight:"min-h-[120px]"})]}),e.jsxs("div",{className:"flex justify-between pt-4 border-t",children:[e.jsxs("button",{onClick:i,className:"text-red-500 text-xs font-bold flex items-center gap-1 hover:underline",children:[e.jsx(Fn,{size:12}),"   "]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:o,className:"px-4 py-2 text-slate-500 font-bold hover:bg-slate-100 rounded-lg",children:""}),e.jsxs("button",{onClick:()=>a(c),className:"px-6 py-2 bg-indigo-600 text-white font-bold rounded-lg hover:bg-indigo-700 shadow-md flex items-center gap-2",children:[e.jsx(ws,{size:16}),"  "]})]})]})]})},Lk=({records:n,className:t,schoolName:a})=>{const[i,o]=R.useState(!1),c=R.useMemo(()=>{const x={};return n.forEach(p=>{const b=p.subject;x[b]||(x[b]={totalScore:0,maxScore:0,studentCount:p.students.length,criteria:[]});const y={};p.students.forEach(N=>{let w=0,A=0;Object.keys(N.results).forEach(I=>{Object.keys(N.results[I]).forEach(H=>{const G=N.results[I][parseInt(H)],F=`${I}-${H}`;y[F]||(y[F]={label:` ${H}`,failCount:0,total:0}),y[F].total++,G&&(A+=3,G==="A"?w+=3:G==="B"?w+=2:G==="C"?w+=1:y[F].failCount++)})}),x[b].totalScore+=w,x[b].maxScore+=A}),x[b].criteria=Object.values(y).map(N=>({...N,failRate:N.total>0?N.failCount/N.total*100:0})).sort((N,w)=>w.failRate-N.failRate)}),{subjectScores:Object.entries(x).map(([p,b])=>{const y=b.maxScore>0?b.totalScore/b.maxScore*100:0;return{subject:p,pct:y,criteria:b.criteria}})}},[n]),u=R.useMemo(()=>{const x=c.subjectScores;if(x.length<2)return null;const h=x.find(I=>I.subject.includes("")),p=x.find(I=>I.subject.includes("")),b=[];let y="",N="text-blue-600",w=Ms;if(h&&p){const I=h.pct-p.pct;I>15?(y=" /",N="text-green-600",w=gt,b.push("             .          .")):I<-15?(y=" /",N="text-purple-600",w=cn,b.push("       .                .")):h.pct>75&&p.pct>75?(y="  ",N="text-emerald-600",w=Ma,b.push("     ()   .     .")):h.pct<50&&p.pct<50&&(y="  ",N="text-red-600",w=To,b.push("    .              ."))}const A=[];return x.forEach(I=>{I.criteria.length>0&&I.criteria[0].failRate>60&&A.push({subject:I.subject,rate:I.criteria[0].failRate})}),A.length>0&&b.push(` " " .   (${A[0].subject})  ${Math.round(A[0].rate)}%      .           (      ).`),{profileType:y,color:N,icon:w,insights:b}},[c]);return n.length===0?null:(Math.max(...c.subjectScores.map(x=>x.pct),100),e.jsxs("div",{className:"bg-white rounded-3xl shadow-xl border border-slate-200 overflow-hidden mb-8 animate-in fade-in slide-in-from-top-4 duration-700",children:[e.jsxs("div",{className:"bg-slate-900 text-white p-6 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-full opacity-10",children:e.jsx(As,{size:400,className:"absolute -left-20 -top-20"})}),e.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row justify-between items-center gap-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 text-indigo-300 font-bold uppercase text-xs mb-1",children:[e.jsx(Ht,{size:14}),"   "]}),e.jsx("h2",{className:"text-2xl font-bold font-serif",children:"  "}),e.jsxs("p",{className:"text-slate-400 text-sm",children:[a," - : ",e.jsx("span",{className:"text-white font-bold",children:t})]})]}),u&&e.jsxs("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-xl p-3 flex items-center gap-4 min-w-[250px]",children:[e.jsx("div",{className:`w-12 h-12 rounded-full bg-white flex items-center justify-center ${u.color}`,children:e.jsx(u.icon,{size:24})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] text-slate-300 uppercase font-bold",children:" "}),e.jsx("p",{className:"text-lg font-bold",children:u.profileType})]})]})]})]}),e.jsxs("div",{className:"p-6 md:p-8 grid grid-cols-1 lg:grid-cols-2 gap-10",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-gray-800 mb-6 flex items-center gap-2",children:[e.jsx(El,{size:20,className:"text-blue-600"}),"  (  )"]}),e.jsxs("div",{className:"space-y-5",children:[c.subjectScores.map((x,h)=>e.jsxs("div",{className:"group",children:[e.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[e.jsxs("span",{className:"font-bold text-gray-700 flex items-center gap-2",children:[x.subject.includes("")?e.jsx(gt,{size:14,className:"text-green-500"}):x.subject.includes("")?e.jsx(cn,{size:14,className:"text-purple-500"}):e.jsx("div",{className:"w-3.5 h-3.5 rounded-full bg-slate-400"}),x.subject]}),e.jsxs("span",{className:`font-bold ${x.pct>75?"text-emerald-600":x.pct<50?"text-red-500":"text-slate-600"}`,children:[x.pct.toFixed(1),"%"]})]}),e.jsxs("div",{className:"h-4 bg-slate-100 rounded-full overflow-hidden relative",children:[e.jsx("div",{className:"absolute top-0 bottom-0 left-[25%] w-px bg-white/50"}),e.jsx("div",{className:"absolute top-0 bottom-0 left-[50%] w-px bg-white/50"}),e.jsx("div",{className:"absolute top-0 bottom-0 left-[75%] w-px bg-white/50"}),e.jsx("div",{className:`h-full rounded-full transition-all duration-1000 ${x.pct>75?"bg-gradient-to-r from-emerald-400 to-emerald-600":x.pct<50?"bg-gradient-to-r from-red-400 to-red-600":"bg-gradient-to-r from-blue-400 to-blue-600"}`,style:{width:`${x.pct}%`}})]}),x.pct<50&&e.jsx("p",{className:"text-[10px] text-red-500 mt-1 font-bold animate-pulse",children:"     "})]},h)),c.subjectScores.length===1&&e.jsxs("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-xl text-xs text-yellow-800 flex items-start gap-2",children:[e.jsx(Mg,{size:16,className:"shrink-0 mt-0.5"}),e.jsx("p",{children:"           (  ...)   ."})]})]})]}),e.jsxs("div",{className:"bg-slate-50 rounded-2xl border border-slate-200 p-6 relative",children:[e.jsx("div",{className:"absolute top-4 left-4 text-slate-200",children:e.jsx(Ht,{size:80})}),e.jsxs("h3",{className:"font-bold text-gray-800 mb-4 flex items-center gap-2 relative z-10",children:[e.jsx(Vn,{size:18,className:"text-amber-500"}),"  (Expert Insights)"]}),u?e.jsxs("div",{className:"space-y-4 relative z-10",children:[u.insights.map((x,h)=>e.jsxs("div",{className:"flex gap-3 items-start bg-white p-3 rounded-xl shadow-sm border border-slate-100",children:[e.jsx("div",{className:"mt-1 w-2 h-2 rounded-full bg-indigo-500 shrink-0"}),e.jsx("p",{className:"text-sm text-slate-700 leading-relaxed font-medium text-justify",children:x})]},h)),!i&&e.jsx("div",{className:"p-4 bg-indigo-50 border border-indigo-100 rounded-xl text-center cursor-pointer hover:bg-indigo-100 transition-colors",onClick:()=>o(!0),children:e.jsxs("span",{className:"text-xs font-bold text-indigo-700 flex items-center justify-center gap-2",children:["    ",e.jsx(Yi,{size:14})]})}),i&&e.jsxs("div",{className:"space-y-2 animate-in slide-in-from-top-2",children:[e.jsx("h4",{className:"text-xs font-bold text-slate-400 uppercase mt-4",children:" :"}),e.jsxs("ul",{className:"space-y-2",children:[e.jsx("li",{className:"text-xs text-slate-600 bg-white p-2 rounded border border-slate-100",children:"         ."}),e.jsx("li",{className:"text-xs text-slate-600 bg-white p-2 rounded border border-slate-100",children:"           ."}),e.jsx("li",{className:"text-xs text-slate-600 bg-white p-2 rounded border border-slate-100",children:'    " "       .'})]})]})]}):e.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center text-slate-400 relative z-10",children:[e.jsx("p",{className:"mb-2",children:"    ."}),e.jsx("p",{className:"text-xs",children:"      ."})]})]})]})]}))},Uk=({title:n,formula:t,application:a,description:i})=>e.jsx("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-3 w-64 opacity-0 group-hover:opacity-100 transition-all duration-200 pointer-events-none z-[9999] transform translate-y-2 group-hover:translate-y-0",children:e.jsxs("div",{className:"bg-slate-900 text-white text-xs rounded-xl shadow-2xl border border-slate-600 overflow-hidden",children:[e.jsxs("div",{className:"bg-slate-800 px-3 py-2 border-b border-slate-700 font-bold text-yellow-400 flex items-center gap-2",children:[e.jsx(cn,{size:14})," "]}),e.jsxs("div",{className:"p-3 space-y-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-400 block mb-0.5 text-[10px]",children:":"}),e.jsx("code",{className:"bg-black/30 px-1.5 py-0.5 rounded text-emerald-300 font-mono block text-center",dir:"ltr",children:t})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-400 block mb-0.5 text-[10px]",children:":"}),e.jsx("code",{className:"bg-black/30 px-1.5 py-0.5 rounded text-blue-300 font-mono block text-center",dir:"ltr",children:a})]}),e.jsx("div",{className:"pt-2 border-t border-slate-700 text-slate-300 leading-tight",children:i})]}),e.jsx("div",{className:"absolute -bottom-1.5 left-1/2 -translate-x-1/2 w-3 h-3 bg-slate-900 rotate-45 border-r border-b border-slate-600"})]})}),rn=({icon:n,title:t,value:a,subValue:i,color:o,tooltipData:c})=>{const u={blue:"bg-blue-50 text-blue-700 border-blue-200 hover:border-blue-400",emerald:"bg-emerald-50 text-emerald-700 border-emerald-200 hover:border-emerald-400",orange:"bg-orange-50 text-orange-700 border-orange-200 hover:border-orange-400",red:"bg-red-50 text-red-700 border-red-200 hover:border-red-400",purple:"bg-purple-50 text-purple-700 border-purple-200 hover:border-purple-400",indigo:"bg-indigo-50 text-indigo-700 border-indigo-200 hover:border-indigo-400"},x={blue:"bg-blue-100",emerald:"bg-emerald-100",orange:"bg-orange-100",red:"bg-red-100",purple:"bg-purple-100",indigo:"bg-indigo-100"};return e.jsxs("div",{className:`relative group p-4 rounded-2xl border transition-all duration-300 ${u[o]} hover:shadow-lg cursor-help`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsx("div",{className:`p-2.5 rounded-xl ${x[o]}`,children:e.jsx(n,{size:24})}),e.jsx(Lo,{size:16,className:"opacity-40 group-hover:opacity-100 transition-opacity"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs font-bold opacity-70 uppercase tracking-wider mb-1",children:t}),e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-3xl font-bold font-mono",children:a}),i&&e.jsx("span",{className:"text-sm font-bold opacity-60",children:i})]})]}),e.jsx(Uk,{title:t,formula:c.formula,application:c.application,description:c.description})]})},Pk=({records:n,scope:t,contextName:a,onClose:i})=>{const o=R.useMemo(()=>{let c=0,u=0,x=0,h=0,p=0;n.forEach(V=>{V.students.forEach(X=>{Object.values(X.results).forEach(ee=>{Object.values(ee).forEach(Q=>{Q&&(c++,Q==="A"?u++:Q==="B"?x++:Q==="C"?h++:Q==="D"&&p++)})})})});const b=c||1,y=u,N=u/b*100,w=(u+x)/b*100,A=h+p,I=(h+p)/b*100,H=w-N,G=N,F=x/b*100,O=p/b*100;return{raw:{totalCriteria:c,countA:u,countB:x,countC:h,countD:p},indicators:{soc_GeneralSatisfaction:y,soc_SpecificSatisfaction:N,soc_Efficiency:w,tea_RemediationLoad:A,tea_RemediationRate:I,tea_PedagogicalGap:H,sub_Mastery:G,sub_Partial:F,sub_Failure:O}}},[n]);return e.jsx("div",{className:"fixed inset-0 z-[100] bg-slate-900/90 backdrop-blur-sm flex items-center justify-center p-4 animate-in fade-in duration-300",children:e.jsxs("div",{className:"bg-white w-full max-w-7xl h-[95vh] rounded-3xl shadow-2xl flex flex-col overflow-hidden border border-slate-700",children:[e.jsxs("div",{className:"bg-slate-50 p-6 border-b flex justify-between items-center shrink-0 z-20 relative",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold font-serif text-slate-900",children:"   "}),e.jsxs("p",{className:"text-slate-500 text-sm flex items-center gap-2 mt-1",children:[e.jsx("span",{className:"font-bold text-slate-700 bg-slate-200 px-2 py-0.5 rounded",children:a}),e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-slate-300"}),e.jsxs("span",{children:["  : ",o.raw.totalCriteria]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>window.print(),className:"bg-white border border-slate-300 text-slate-700 px-4 py-2 rounded-xl font-bold text-sm hover:bg-slate-50 flex items-center gap-2 shadow-sm print:hidden",children:[e.jsx(ys,{size:16})," "]}),e.jsx("button",{onClick:i,className:"bg-slate-100 text-slate-500 p-2 rounded-full hover:bg-red-100 hover:text-red-600 transition-colors print:hidden",children:e.jsx(ut,{size:20})})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-8 bg-slate-50/50 print:p-0 print:bg-white custom-scrollbar z-10 relative",children:[e.jsxs("section",{className:"mb-12",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6 pb-2 border-b border-indigo-200",children:[e.jsx("div",{className:"bg-indigo-600 text-white p-2 rounded-lg shadow-lg shadow-indigo-200",children:e.jsx(Bn,{size:24})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-xl text-slate-800",children:"1.    ( )"}),e.jsx("p",{className:"text-xs text-slate-500",children:"           ."})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(rn,{icon:Qj,title:"   ",value:o.raw.countA,subValue:"",color:"blue",tooltipData:{formula:" ()",application:`Count(A) = ${o.raw.countA}`,description:"       .     ."}}),e.jsx(rn,{icon:qs,title:"   ",value:o.indicators.soc_SpecificSatisfaction.toFixed(2),subValue:"%",color:"indigo",tooltipData:{formula:"(  /  )  100",application:`(${o.raw.countA} / ${o.raw.totalCriteria})  100`,description:"  .    100%   ."}}),e.jsx(rn,{icon:_t,title:"  ",value:o.indicators.soc_Efficiency.toFixed(2),subValue:"%",color:"emerald",tooltipData:{formula:"(( + ) /  )  100",application:`((${o.raw.countA} + ${o.raw.countB}) / ${o.raw.totalCriteria})  100`,description:"   ( ).     ."}})]})]}),e.jsxs("section",{className:"mb-12",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6 pb-2 border-b border-orange-200",children:[e.jsx("div",{className:"bg-orange-500 text-white p-2 rounded-lg shadow-lg shadow-orange-200",children:e.jsx(ft,{size:24})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-xl text-slate-800",children:"2.    (  )"}),e.jsx("p",{className:"text-xs text-slate-500",children:"         ."})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(rn,{icon:kt,title:"  ",value:o.indicators.tea_RemediationLoad,subValue:"",color:"orange",tooltipData:{formula:" () +  ()",application:`${o.raw.countC} + ${o.raw.countD} = ${o.indicators.tea_RemediationLoad}`,description:"        (   )."}}),e.jsx(rn,{icon:un,title:"  ()",value:o.indicators.tea_RemediationRate.toFixed(2),subValue:"%",color:"red",tooltipData:{formula:"(( + ) /  )  100",application:`((${o.raw.countC} + ${o.raw.countD}) / ${o.raw.totalCriteria})  100`,description:"   .   50%        ."}}),e.jsx(rn,{icon:El,title:"  ",value:o.indicators.tea_PedagogicalGap.toFixed(2),subValue:"%",color:"purple",tooltipData:{formula:"  -   ",application:`${o.indicators.soc_Efficiency.toFixed(2)} - ${o.indicators.soc_SpecificSatisfaction.toFixed(2)}`,description:"     ().         ."}})]})]}),e.jsxs("section",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6 pb-2 border-b border-teal-200",children:[e.jsx("div",{className:"bg-teal-600 text-white p-2 rounded-lg shadow-lg shadow-teal-200",children:e.jsx(gt,{size:24})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-xl text-slate-800",children:"3.    ( )"}),e.jsx("p",{className:"text-xs text-slate-500",children:"        ."})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(rn,{icon:Ms,title:"   ()",value:o.indicators.sub_Mastery.toFixed(2),subValue:"%",color:"emerald",tooltipData:{formula:"(  /  )  100",application:`(${o.raw.countA} / ${o.raw.totalCriteria})  100`,description:"          ."}}),e.jsx(rn,{icon:Ug,title:"   ()",value:o.indicators.sub_Partial.toFixed(2),subValue:"%",color:"blue",tooltipData:{formula:"(  /  )  100",application:`(${o.raw.countB} / ${o.raw.totalCriteria})  100`,description:"         ."}}),e.jsx(rn,{icon:Wj,title:"   ()",value:o.indicators.sub_Failure.toFixed(2),subValue:"%",color:"red",tooltipData:{formula:"(  /  )  100",application:`(${o.raw.countD} / ${o.raw.totalCriteria})  100`,description:"     .          ."}})]})]})]})]})})},qk=({records:n,filters:t})=>{const{scope:a,selectedSchool:i,selectedLevel:o,selectedClass:c,selectedSubject:u}=t,[x,h]=R.useState(!1),p=R.useMemo(()=>n.filter(w=>o&&w.level!==o||u&&w.subject!==u?!1:a==="district"?!0:!((a==="school"||a==="class")&&w.schoolName!==i||a==="class"&&w.className!==c)),[n,a,i,o,c,u]),b=R.useMemo(()=>a!=="class"||!i||!c||!o?[]:n.filter(w=>w.schoolName===i&&w.className===c&&w.level===o),[n,a,i,c,o]),y=R.useMemo(()=>a==="district"&&!o?n:p,[a,o,n,p]),N=R.useMemo(()=>!(!o||!u||a==="school"&&!i||a==="class"&&(!i||!c)),[a,i,o,c,u]);return e.jsxs("div",{className:"flex flex-col h-full bg-slate-50/50",children:[e.jsxs("div",{className:"bg-white p-4 border-b flex justify-between items-center shadow-sm shrink-0",children:[e.jsxs("div",{className:"text-sm text-slate-500",children:[e.jsx("span",{className:"font-bold text-slate-700",children:" :"})," ",a==="district"?"":a==="school"?i:`${i} / ${c}`]}),e.jsxs("button",{onClick:()=>h(!0),className:"bg-indigo-600 text-white px-5 py-2 rounded-xl shadow-lg shadow-indigo-200 hover:bg-indigo-700 transition-all flex items-center gap-2 font-bold text-sm animate-in slide-in-from-top-2",children:[e.jsx(js,{size:18}),"   ()"]})]}),x&&e.jsx(Pk,{records:y,scope:a,contextName:a==="district"?"":a==="school"?i:`${i} - ${c}`,onClose:()=>h(!1)}),e.jsx("div",{className:"flex-1 p-6 md:p-8 overflow-y-auto",children:N?e.jsxs("div",{className:"max-w-[1600px] mx-auto animate-in zoom-in-95 duration-500",children:[a==="class"&&e.jsx(Lk,{records:b,className:c,schoolName:i}),o==="2AP"&&u.includes("")?e.jsx(Tk,{records:p,scope:a,contextName:a==="district"?"":a==="school"?i:`${i} - ${c}`}):o==="2AP"&&u.includes("")?e.jsx(kk,{records:p,scope:a,contextName:a==="district"?"":a==="school"?i:`${i} - ${c}`}):o==="4AP"&&u.includes("")?e.jsx(Ak,{records:p,scope:a,contextName:a==="district"?"":a==="school"?i:`${i} - ${c}`}):o==="4AP"&&u.includes("")?e.jsx(Mk,{records:p,scope:a,contextName:a==="district"?"":a==="school"?i:`${i} - ${c}`}):o==="5AP"&&u.includes("")?e.jsx(Rk,{records:p,scope:a,contextName:a==="district"?"":a==="school"?i:`${i} - ${c}`}):o==="5AP"&&u.includes("")?e.jsx(Dk,{records:p,scope:a,contextName:a==="district"?"":a==="school"?i:`${i} - ${c}`}):o==="5AP"&&u.includes("")?e.jsx(Ik,{records:p,allRecords:n,scope:a,contextName:a==="district"?"":a==="school"?i:`${i} - ${c}`}):o==="5AP"&&u.includes("")?e.jsx(zk,{records:p,allRecords:n,scope:a,contextName:a==="district"?"":a==="school"?i:`${i} - ${c}`}):e.jsxs("div",{className:"bg-white rounded-3xl shadow-xl border border-slate-200 overflow-hidden min-h-[400px] flex flex-col",children:[e.jsx("div",{className:"bg-slate-900 text-white p-6 flex justify-between items-start",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold font-serif mb-1",children:` : ${u}`}),e.jsx("div",{className:"flex items-center gap-3 text-slate-400 text-sm",children:e.jsx("span",{className:"bg-slate-800 px-2 py-0.5 rounded text-white font-bold",children:o})})]})}),e.jsxs("div",{className:"flex-1 p-8 flex flex-col items-center justify-center text-center bg-slate-50/50",children:[e.jsx("div",{className:"w-24 h-24 bg-white rounded-full shadow-lg flex items-center justify-center mb-6",children:e.jsx($u,{size:48,className:"text-gray-400"})}),e.jsx("h3",{className:"text-xl font-bold text-slate-700 mb-2",children:" "}),e.jsxs("p",{className:"text-slate-500",children:["    ",e.jsxs("b",{children:[u," - ",o]}),"  .",e.jsx("br",{}),"     :",e.jsxs("ul",{className:"mt-2 text-sm text-slate-600 list-disc list-inside",children:[e.jsx("li",{children:"  ( )"}),e.jsx("li",{children:" ( )"}),e.jsx("li",{children:"  ( )"}),e.jsx("li",{children:" ( )"}),e.jsx("li",{children:"  ( )"}),e.jsx("li",{children:" ( )"}),e.jsx("li",{children:"  ( )"}),e.jsx("li",{children:" ( )"})]})]})]})]})]}):e.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-slate-400 pb-20",children:[e.jsx("div",{className:"w-32 h-32 bg-slate-200 rounded-full flex items-center justify-center mb-6 opacity-50 animate-pulse",children:e.jsx(Hu,{size:64,className:"text-slate-400"})}),e.jsx("h3",{className:"text-xl font-bold text-slate-600 mb-2",children:"   "}),e.jsxs("p",{className:"text-slate-400 max-w-sm text-center mb-6",children:["  ",e.jsx("b",{children:" "}),"       ."]}),e.jsxs("button",{onClick:()=>h(!0),className:"bg-white border border-indigo-200 text-indigo-600 px-6 py-3 rounded-xl hover:bg-indigo-50 transition-colors font-bold text-sm shadow-sm flex items-center gap-2",children:[e.jsx(js,{size:18}),"     "]})]})})]})},Ok={"2AP":[" ",""],"4AP":[" ",""],"5AP":[" ",""," ",""," "," ",""," "," "," "," "," "]},$k=["  (   )"," 1"," 2"," 3"," 4"," 5"," 6"," 7"," 8"," 9"," 10"],Hk=({availableSchools:n,onDataUpdated:t,externalFilters:a,onUpdateFilters:i})=>{const[o,c]=R.useState("stats"),[u,x]=R.useState("list"),[h,p]=R.useState(_l().records),[b,y]=R.useState(""),[N,w]=R.useState(""),[A,I]=R.useState(""),[H,G]=R.useState(""),[F,O]=R.useState([]),[V,X]=R.useState(""),ee=R.useRef(null),Q=R.useRef(null),[se,ne]=R.useState(!1),[P,ie]=R.useState(null),[le,Z]=R.useState(""),[q,Y]=R.useState(""),T=R.useMemo(()=>N?Ok[N]||[]:[],[N]),E=R.useMemo(()=>{const J=new Set;return h.forEach(be=>{(a.scope==="district"||be.schoolName===a.selectedSchool)&&J.add(be.level)}),Array.from(J).sort()},[h,a.scope,a.selectedSchool]),L=R.useMemo(()=>{if(a.scope!=="class"||!a.selectedSchool||!a.selectedLevel)return[];const J=new Set;return h.forEach(be=>{be.schoolName===a.selectedSchool&&be.level===a.selectedLevel&&J.add(be.className)}),Array.from(J).sort()},[h,a.scope,a.selectedSchool,a.selectedLevel]),U=R.useMemo(()=>{if(!a.selectedLevel)return[];const J=new Set;return h.forEach(be=>{be.level===a.selectedLevel&&(a.scope==="district"||a.selectedSchool&&be.schoolName===a.selectedSchool)&&J.add(be.subject)}),Array.from(J).sort()},[h,a.scope,a.selectedSchool,a.selectedLevel]),$=R.useMemo(()=>h.filter(J=>!(le&&J.schoolName!==le||q&&J.subject!==q)),[h,le,q]),C=R.useMemo(()=>Array.from(new Set(h.map(J=>J.schoolName))).sort(),[h]),D=R.useMemo(()=>Array.from(new Set(h.map(J=>J.subject))).sort(),[h]),j=J=>{var Re;const be=(Re=J.target.files)==null?void 0:Re[0];if(!be)return;if(!b||!N||!A||!H){alert(":     (   ) ."),ee.current&&(ee.current.value="");return}X(be.name);const Ee=new FileReader;Ee.onload=_e=>{var ae;const ke=(ae=_e.target)==null?void 0:ae.result;try{const Je=Ck(ke,N,A);Je.length===0&&alert("    .         (   )."),O(Je)}catch(Je){console.error(Je),alert("    .    Excel .")}},Ee.readAsArrayBuffer(be)},S=()=>{if(!b||!N||!A||!H||F.length===0){alert("     .");return}const J=h.find(be=>be.schoolName===b&&be.level===N&&be.className===H&&be.subject===A);J?(ie(J.id),ne(!0)):k()},k=(J=null)=>{J&&mg(J);const be={id:Math.random().toString(36).substr(2,9),schoolName:b,className:H,level:N,subject:A,academicYear:`${new Date().getFullYear()}/${new Date().getFullYear()+1}`,uploadDate:new Date().toISOString().split("T")[0],students:F};Ek(be),p(_l().records),x("list"),t&&t(),O([]),X(""),ne(!1),ie(null)},z=J=>{confirm("       ")&&(mg(J),p(_l().records),t&&t())},W=()=>{const J=_l(),be=JSON.stringify(J,null,2),Ee=new Blob([be],{type:"application/json"}),Re=URL.createObjectURL(Ee),_e=document.createElement("a");_e.href=Re,_e.download=`Acq_Backup_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(_e),_e.click(),document.body.removeChild(_e)},ue=J=>{var Re;const be=(Re=J.target.files)==null?void 0:Re[0];if(!be)return;if(!confirm(":          .   ")){Q.current&&(Q.current.value="");return}const Ee=new FileReader;Ee.onload=_e=>{var ke;try{const ae=JSON.parse((ke=_e.target)==null?void 0:ke.result);ae.records&&Array.isArray(ae.records)?(localStorage.setItem("mufattish_acq_db",JSON.stringify(ae)),p(ae.records),t&&t(),alert("     .")):alert("  .       .")}catch(ae){console.error(ae),alert("      .")}Q.current&&(Q.current.value="")},Ee.readAsText(be)};return e.jsxs("div",{className:"h-full flex flex-col bg-slate-50/50 w-full animate-in fade-in relative",children:[se&&e.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/70 backdrop-blur-sm animate-in fade-in",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-6 max-w-md w-full border border-slate-200",children:[e.jsxs("div",{className:"flex items-center gap-3 text-amber-600 mb-4",children:[e.jsx("div",{className:"bg-amber-100 p-3 rounded-full",children:e.jsx(To,{size:24})}),e.jsx("h3",{className:"text-lg font-bold",children:":  "})]}),e.jsxs("p",{className:"text-slate-600 text-sm mb-6 leading-relaxed",children:["   ",e.jsxs("strong",{children:[b," - ",H," (",A,")"]}),".",e.jsx("br",{}),"     .     "]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>{ne(!1),ie(null)},className:"px-4 py-2 rounded-xl text-slate-500 font-bold hover:bg-slate-100 transition-colors",children:""}),e.jsx("button",{onClick:()=>k(P),className:"px-5 py-2 rounded-xl bg-amber-500 text-white font-bold hover:bg-amber-600 shadow-md transition-colors",children:"  "})]})]})}),e.jsx("div",{className:"bg-white border-b px-6 py-3 flex flex-col md:flex-row justify-between items-start md:items-center sticky top-0 z-20 shadow-sm gap-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("h1",{className:"text-xl font-bold text-slate-800 flex items-center gap-2 font-serif",children:[e.jsx($u,{className:"text-teal-600",size:24}),"  "]}),e.jsx("div",{className:"h-6 w-px bg-slate-200 mx-2 hidden md:block"}),e.jsxs("div",{className:"flex bg-slate-100 p-1 rounded-lg",children:[e.jsxs("button",{onClick:()=>c("data"),className:`px-4 py-1.5 rounded-md text-sm font-bold transition-all flex items-center gap-2 ${o==="data"?"bg-white text-slate-800 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:[e.jsx(Fu,{size:16})," "]}),e.jsxs("button",{onClick:()=>c("stats"),className:`px-4 py-1.5 rounded-md text-sm font-bold transition-all flex items-center gap-2 ${o==="stats"?"bg-white text-teal-700 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:[e.jsx(Hu,{size:16})," "]})]})]})}),o==="stats"&&e.jsxs("div",{className:"bg-slate-50 border-b border-slate-200 px-6 py-3 flex flex-col lg:flex-row gap-4 items-start lg:items-center animate-in slide-in-from-top-2 relative z-10",children:[e.jsxs("div",{className:"flex bg-white rounded-lg border border-slate-200 shadow-sm p-1 shrink-0",children:[e.jsxs("button",{onClick:()=>i({scope:"district",selectedSchool:"",selectedClass:"",selectedSubject:""}),className:`px-3 py-1.5 rounded-md text-xs font-bold flex items-center gap-1.5 transition-all ${a.scope==="district"?"bg-indigo-50 text-indigo-700 ring-1 ring-indigo-200":"text-slate-500 hover:bg-slate-50"}`,children:[e.jsx(YN,{size:14}),e.jsx("span",{children:""})]}),e.jsx("div",{className:"w-px bg-slate-200 my-1 mx-1"}),e.jsxs("button",{onClick:()=>i({scope:"school",selectedClass:"",selectedSubject:""}),className:`px-3 py-1.5 rounded-md text-xs font-bold flex items-center gap-1.5 transition-all ${a.scope==="school"?"bg-blue-50 text-blue-700 ring-1 ring-blue-200":"text-slate-500 hover:bg-slate-50"}`,children:[e.jsx(ft,{size:14}),e.jsx("span",{children:""})]}),e.jsx("div",{className:"w-px bg-slate-200 my-1 mx-1"}),e.jsxs("button",{onClick:()=>i({scope:"class",selectedSubject:""}),className:`px-3 py-1.5 rounded-md text-xs font-bold flex items-center gap-1.5 transition-all ${a.scope==="class"?"bg-teal-50 text-teal-700 ring-1 ring-teal-200":"text-slate-500 hover:bg-slate-50"}`,children:[e.jsx(Bn,{size:14}),e.jsx("span",{children:""})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-3 items-center flex-1",children:[e.jsxs("div",{className:`relative min-w-[200px] ${a.scope==="district"?"opacity-50 pointer-events-none grayscale":""}`,children:[e.jsx(ft,{size:14,className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 pointer-events-none"}),e.jsxs("select",{value:a.selectedSchool,onChange:J=>i({selectedSchool:J.target.value,selectedLevel:"",selectedSubject:"",selectedClass:""}),className:"w-full py-2 pr-9 pl-3 bg-white border border-slate-200 rounded-lg text-xs font-bold text-slate-700 focus:ring-2 focus:ring-blue-500 outline-none shadow-sm appearance-none",children:[e.jsx("option",{value:"",children:a.scope==="district"?"  ":"--   --"}),n.map(J=>e.jsx("option",{value:J,children:J},J))]})]}),e.jsxs("div",{className:"relative min-w-[160px]",children:[e.jsx(yx,{size:14,className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 pointer-events-none"}),e.jsxs("select",{value:a.selectedLevel,onChange:J=>i({selectedLevel:J.target.value,selectedSubject:""}),className:"w-full py-2 pr-9 pl-3 bg-white border border-slate-200 rounded-lg text-xs font-bold text-slate-700 focus:ring-2 focus:ring-blue-500 outline-none shadow-sm appearance-none",children:[e.jsx("option",{value:"",children:"--   --"}),E.map(J=>e.jsx("option",{value:J,children:J},J))]})]}),a.scope==="class"&&e.jsxs("div",{className:"relative min-w-[140px] animate-in fade-in slide-in-from-right-2",children:[e.jsx(Bn,{size:14,className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 pointer-events-none"}),e.jsxs("select",{value:a.selectedClass,onChange:J=>i({selectedClass:J.target.value,selectedSubject:""}),className:"w-full py-2 pr-9 pl-3 bg-white border border-slate-200 rounded-lg text-xs font-bold text-slate-700 focus:ring-2 focus:ring-blue-500 outline-none shadow-sm appearance-none",children:[e.jsx("option",{value:"",children:"--  --"}),L.map(J=>e.jsx("option",{value:J,children:J},J))]})]}),e.jsxs("div",{className:`relative min-w-[180px] ${a.selectedLevel?"":"opacity-50 pointer-events-none"}`,children:[e.jsx(gt,{size:14,className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 pointer-events-none"}),e.jsxs("select",{value:a.selectedSubject,onChange:J=>i({selectedSubject:J.target.value}),className:"w-full py-2 pr-9 pl-3 bg-white border border-slate-200 rounded-lg text-xs font-bold text-slate-700 focus:ring-2 focus:ring-blue-500 outline-none shadow-sm appearance-none",children:[e.jsx("option",{value:"",children:"--  /  --"}),U.map(J=>e.jsx("option",{value:J,children:J},J))]})]})]}),e.jsx("div",{className:"hidden lg:block",children:e.jsxs("span",{className:`inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full text-[10px] font-bold border ${a.selectedSubject?"bg-green-50 text-green-700 border-green-200":"bg-slate-100 text-slate-500 border-slate-200"}`,children:[e.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${a.selectedSubject?"bg-green-500 animate-pulse":"bg-slate-400"}`}),a.selectedSubject?" ":" "]})})]}),e.jsxs("div",{className:"flex-1 overflow-hidden",children:[o==="stats"&&e.jsx(qk,{records:h,availableSchools:n,filters:a}),o==="data"&&e.jsx("div",{className:"h-full overflow-y-auto p-6 md:p-8",children:u==="list"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-8 flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-slate-700",children:"  "}),e.jsx("p",{className:"text-slate-400 text-xs mt-1",children:"      "})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:W,className:"bg-white border border-slate-300 text-slate-600 px-4 py-2.5 rounded-xl hover:bg-slate-50 transition-all flex items-center gap-2 font-bold text-xs",title:"    ",children:[e.jsx(Ju,{size:16}),"  "]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"file",ref:Q,accept:".json",onChange:ue,className:"hidden"}),e.jsxs("button",{onClick:()=>{var J;return(J=Q.current)==null?void 0:J.click()},className:"bg-white border border-slate-300 text-slate-600 px-4 py-2.5 rounded-xl hover:bg-slate-50 transition-all flex items-center gap-2 font-bold text-xs",title:" ",children:[e.jsx(Bi,{size:16})," "]})]}),e.jsxs("button",{onClick:()=>x("upload"),className:"bg-teal-600 text-white px-5 py-2.5 rounded-xl shadow-lg shadow-teal-600/20 hover:bg-teal-700 transition-all flex items-center gap-2 font-bold text-sm mr-2",children:[e.jsx(wu,{size:18}),"   "]})]})]}),h.length===0?e.jsxs("div",{className:"text-center py-24 bg-white rounded-3xl border-2 border-dashed border-slate-200 cursor-pointer hover:border-teal-200 transition-all",onClick:()=>x("upload"),children:[e.jsx("div",{className:"w-16 h-16 bg-slate-50 text-slate-300 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(ju,{size:32})}),e.jsx("h3",{className:"text-lg font-bold text-slate-600",children:"   "}),e.jsx("p",{className:"text-slate-400 text-xs mt-1",children:"    (Excel)."})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-4 bg-white p-3 rounded-xl border border-slate-200 shadow-sm flex flex-col md:flex-row gap-4 items-center",children:[e.jsxs("div",{className:"flex items-center gap-2 text-slate-500 font-bold text-xs",children:[e.jsx(ka,{size:16})," :"]}),e.jsxs("div",{className:"relative flex-1 w-full md:w-auto",children:[e.jsxs("select",{value:le,onChange:J=>Z(J.target.value),className:"w-full p-2 pl-8 bg-slate-50 border border-slate-200 rounded-lg text-xs font-bold text-slate-700 focus:ring-2 focus:ring-teal-500 outline-none",children:[e.jsx("option",{value:"",children:" "}),C.map(J=>e.jsx("option",{value:J,children:J},J))]}),e.jsx(ft,{size:14,className:"absolute left-2.5 top-1/2 -translate-y-1/2 text-slate-400 pointer-events-none"})]}),e.jsxs("div",{className:"relative flex-1 w-full md:w-auto",children:[e.jsxs("select",{value:q,onChange:J=>Y(J.target.value),className:"w-full p-2 pl-8 bg-slate-50 border border-slate-200 rounded-lg text-xs font-bold text-slate-700 focus:ring-2 focus:ring-teal-500 outline-none",children:[e.jsx("option",{value:"",children:" "}),D.map(J=>e.jsx("option",{value:J,children:J},J))]}),e.jsx(gt,{size:14,className:"absolute left-2.5 top-1/2 -translate-y-1/2 text-slate-400 pointer-events-none"})]}),(le||q)&&e.jsxs("button",{onClick:()=>{Z(""),Y("")},className:"text-red-500 hover:bg-red-50 p-2 rounded-lg transition-colors text-xs font-bold flex items-center gap-1",children:[e.jsx(ut,{size:14}),"  "]})]}),e.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden",children:$.length>0?e.jsxs("table",{className:"w-full text-right",children:[e.jsx("thead",{className:"bg-slate-50 text-slate-500 text-xs uppercase font-bold border-b border-slate-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4",children:""}),e.jsx("th",{className:"px-6 py-4",children:" / "}),e.jsx("th",{className:"px-6 py-4",children:""}),e.jsx("th",{className:"px-6 py-4 text-center",children:""}),e.jsx("th",{className:"px-6 py-4",children:" "}),e.jsx("th",{className:"px-6 py-4 text-center",children:""})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:$.map(J=>e.jsxs("tr",{className:"hover:bg-slate-50 transition-colors group",children:[e.jsxs("td",{className:"px-6 py-4 font-bold text-slate-700 text-sm flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-100 flex items-center justify-center text-slate-400 shrink-0",children:e.jsx(ft,{size:16})}),J.schoolName]}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-xs font-bold text-slate-800",children:J.className}),e.jsx("span",{className:"text-[10px] text-slate-400",children:J.level})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`inline-block px-2 py-1 rounded text-xs font-bold border ${J.subject.includes("")?"bg-green-50 text-green-700 border-green-100":J.subject.includes("")?"bg-emerald-50 text-emerald-700 border-emerald-100":"bg-indigo-50 text-indigo-700 border-indigo-100"}`,children:J.subject})}),e.jsx("td",{className:"px-6 py-4 text-center font-mono text-sm text-slate-600",children:J.students.length}),e.jsx("td",{className:"px-6 py-4 text-xs text-slate-400 font-mono",children:J.uploadDate}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsx("button",{onClick:()=>z(J.id),className:"p-2 text-slate-300 hover:text-red-600 hover:bg-red-50 rounded-full transition-all",title:" ",children:e.jsx(Qu,{size:16})})})]},J.id))})]}):e.jsxs("div",{className:"py-12 text-center text-slate-400 flex flex-col items-center",children:[e.jsx(zg,{size:32,className:"mb-2 opacity-20"}),e.jsx("p",{className:"text-sm font-bold",children:"    "}),e.jsx("button",{onClick:()=>{Z(""),Y("")},className:"mt-2 text-xs text-teal-600 hover:underline",children:"   "})]})})]})]}):e.jsxs("div",{className:"w-full max-w-5xl mx-auto animate-in slide-in-from-right-4",children:[e.jsxs("button",{onClick:()=>x("list"),className:"flex items-center gap-2 text-slate-500 hover:text-slate-800 font-bold text-xs mb-6 transition-colors",children:[e.jsx(p1,{size:14}),"  "]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-slate-200 overflow-hidden",children:[e.jsxs("div",{className:"bg-slate-900 text-white p-6 border-b border-slate-800",children:[e.jsx("h2",{className:"text-xl font-bold font-serif",children:"   "}),e.jsx("p",{className:"text-slate-400 text-xs mt-1",children:"     "})]}),e.jsxs("div",{className:"p-6 md:p-8 space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"md:col-span-1",children:[e.jsxs("label",{className:"block text-xs font-bold text-slate-600 mb-2 flex items-center gap-1",children:[e.jsx(ft,{size:14,className:"text-teal-600"}),"  ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:b,onChange:J=>y(J.target.value),className:"w-full p-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-teal-500 outline-none font-bold text-slate-700",children:[e.jsx("option",{value:"",children:"--   --"}),n.map(J=>e.jsx("option",{value:J,children:J},J))]})]}),e.jsxs("div",{className:"md:col-span-1",children:[e.jsxs("label",{className:"block text-xs font-bold text-slate-600 mb-2 flex items-center gap-1",children:[e.jsx(yx,{size:14,className:"text-teal-600"}),"  ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:N,onChange:J=>{w(J.target.value),I(""),O([]),X("")},className:"w-full p-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-teal-500 outline-none font-bold text-slate-700",children:[e.jsx("option",{value:"",children:"--   --"}),e.jsx("option",{value:"2AP",children:"  (2AP)"}),e.jsx("option",{value:"4AP",children:"  (4AP)"}),e.jsx("option",{value:"5AP",children:"  (5AP)"})]})]}),e.jsxs("div",{className:"md:col-span-1",children:[e.jsxs("label",{className:"block text-xs font-bold text-slate-600 mb-2 flex items-center gap-1",children:[e.jsx(gt,{size:14,className:"text-teal-600"}),"  ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:A,onChange:J=>{I(J.target.value),O([]),X("")},disabled:!N,className:"w-full p-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-teal-500 outline-none font-bold text-slate-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx("option",{value:"",children:"--   --"}),T.map(J=>e.jsx("option",{value:J,children:J},J))]})]}),e.jsxs("div",{className:"md:col-span-1",children:[e.jsxs("label",{className:"block text-xs font-bold text-slate-600 mb-2 flex items-center gap-1",children:[e.jsx(Bn,{size:14,className:"text-teal-600"}),"  ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:H,onChange:J=>G(J.target.value),className:"w-full p-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-teal-500 outline-none font-bold text-slate-700",children:[e.jsx("option",{value:"",children:"--    --"}),$k.map(J=>e.jsx("option",{value:J,children:J},J))]})]})]}),e.jsxs("div",{onClick:()=>{var J;!b||!N||!A||!H?alert(":     (   ) ."):(J=ee.current)==null||J.click()},className:`border-2 border-dashed rounded-2xl p-8 text-center transition-all cursor-pointer relative
                                                ${!b||!N||!A||!H?"opacity-50 border-slate-200 bg-slate-50 cursor-not-allowed":V?"border-teal-400 bg-teal-50":"border-slate-300 hover:border-teal-400 hover:bg-slate-50"}
                                            `,children:[e.jsx("input",{type:"file",ref:ee,accept:".xls,.xlsx",onChange:j,className:"hidden",disabled:!b||!N||!A||!H}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center mb-3
                                                    ${V?"bg-teal-100 text-teal-600":"bg-slate-200 text-slate-400"}
                                                `,children:e.jsx(ju,{size:24})}),V?e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"font-bold text-teal-800 text-sm",children:V}),e.jsx("p",{className:"text-teal-600 text-xs mt-1",children:"   "})]}):e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"font-bold text-slate-700 text-sm",children:"    Excel"}),e.jsx("p",{className:"text-slate-400 text-xs mt-1",children:!b||!N||!A||!H?"     ":`   : ${N} - ${A}`})]})]})]}),F.length>0&&e.jsxs("div",{className:"animate-in slide-in-from-bottom-4",children:[e.jsx("div",{className:"flex justify-between items-center mb-3 pb-2 border-b border-slate-100",children:e.jsxs("h3",{className:"font-bold text-slate-800 flex items-center gap-2 text-sm",children:[e.jsx(wl,{className:"bg-green-500 text-white rounded-full p-0.5",size:14}),"   ",F.length," "]})}),e.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>{O([]),X("")},className:"px-6 py-2.5 rounded-xl font-bold text-slate-500 hover:bg-slate-100 transition-colors text-sm",children:""}),e.jsxs("button",{onClick:S,className:"bg-slate-900 text-white px-8 py-2.5 rounded-xl shadow-lg hover:bg-slate-800 transition-all font-bold flex items-center gap-2",children:[e.jsx(ws,{size:18})," "]})]})]})]})]})]})})]})]})},wg=[" "," "," "," "," "," "],Gk=({teachers:n,reportsMap:t,inspectorInfo:a,signature:i})=>{var j;const[o,c]=R.useState("attendance"),[u,x]=R.useState(""),[h,p]=R.useState(new Date().toISOString().split("T")[0]),[b,y]=R.useState(""),[N,w]=R.useState(""),[A,I]=R.useState([]),[H,G]=R.useState([]),[F,O]=R.useState(null),[V,X]=R.useState(""),[ee,Q]=R.useState([{id:"1",topic:"  ...",date:new Date().toISOString().split("T")[0],location:"",isExternalLocation:!1,duration:"1/2 ",targetLevels:[" "," "],supervisor:" ",notes:""}]),[se,ne]=R.useState(!1),[P,ie]=R.useState(null),le=R.useMemo(()=>{const S=new Set;return Object.values(t).forEach(k=>{k.school&&S.add(k.school.trim())}),Array.from(S).sort()},[t]),Z=S=>S.length===0?0:n.filter(k=>{const z=t[k.id],W=(z==null?void 0:z.level)||"";return S.some(ue=>W.includes(ue))}).length,q=S=>{I(k=>k.includes(S)?k.filter(z=>z!==S):[...k,S])},Y=R.useMemo(()=>A.length===0?[]:n.filter(S=>{const k=t[S.id],z=(k==null?void 0:k.level)||"";return A.some(W=>z.includes(W))}).map(S=>{var k,z;return{...S,schoolName:((k=t[S.id])==null?void 0:k.school)||" ",levelName:((z=t[S.id])==null?void 0:z.level)||" "}}).sort((S,k)=>S.schoolName.localeCompare(k.schoolName)),[n,t,A]),T=R.useMemo(()=>{const S=[];if(Y.length===0)return[];let z=[...Y];for(;z.length>0;)S.push(z.slice(0,18)),z=z.slice(18);return S},[Y]),E=S=>{G(k=>k.includes(S)?k.filter(z=>z!==S):[...k,S])},L=()=>{const S={id:Math.random().toString(36).substr(2,9),topic:"",date:new Date().toISOString().split("T")[0],location:"",isExternalLocation:!1,duration:"1/2 ",targetLevels:[],supervisor:" ",notes:""};ie(S),ne(!0)},U=S=>{ie({...S}),ne(!0)},$=S=>{confirm("      ")&&Q(k=>k.filter(z=>z.id!==S))},C=()=>{if(P){if(!P.topic){alert("   ");return}Q(S=>S.find(z=>z.id===P.id)?S.map(z=>z.id===P.id?P:z):[...S,P]),ne(!1),ie(null)}},D=()=>{window.print()};return e.jsxs("div",{className:"h-full flex flex-col bg-slate-50 relative",children:[e.jsx("div",{className:"bg-white border-b px-6 py-2 flex items-center justify-between shadow-sm z-20",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>c("attendance"),className:`px-4 py-2 rounded-lg text-xs font-bold flex items-center gap-2 transition-all ${o==="attendance"?"bg-indigo-50 text-indigo-700 ring-1 ring-indigo-200":"text-slate-500 hover:bg-slate-100"}`,children:[e.jsx(Fi,{size:16}),"  ( )"]}),e.jsxs("button",{onClick:()=>c("calendar"),className:`px-4 py-2 rounded-lg text-xs font-bold flex items-center gap-2 transition-all ${o==="calendar"?"bg-indigo-50 text-indigo-700 ring-1 ring-indigo-200":"text-slate-500 hover:bg-slate-100"}`,children:[e.jsx(mx,{size:16})," "]})]})}),F&&o==="attendance"&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/70 backdrop-blur-sm print:hidden",children:e.jsxs("div",{className:"bg-white w-full max-w-3xl rounded-xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[e.jsxs("div",{className:"bg-slate-100 p-4 border-b flex justify-between items-center",children:[e.jsxs("h3",{className:"font-bold text-lg flex items-center gap-2",children:[e.jsx(js,{size:20,className:"text-red-600"})," "]}),e.jsx("button",{onClick:()=>O(null),children:e.jsx(ut,{size:20,className:"text-slate-500 hover:text-red-500"})})]}),e.jsxs("div",{className:"p-8 overflow-y-auto bg-white flex-1",children:[e.jsx("div",{className:"text-center font-bold text-gray-400 mb-4 text-xs uppercase tracking-widest border-b pb-2",children:"  (   )"}),e.jsxs("div",{className:"border p-4 rounded bg-gray-50 text-sm space-y-4",children:[e.jsxs("p",{children:[e.jsx("strong",{children:" ():"})," ",F.fullName]}),e.jsxs("p",{children:[e.jsx("strong",{children:":"}),"   "]}),e.jsxs("p",{className:"leading-loose text-gray-600",children:["      ",N?" ":"","                  ",e.jsx("b",{children:h})," : ",e.jsx("b",{children:b}),'   "',e.jsx("b",{children:u}),'".']})]})]}),e.jsxs("div",{className:"p-4 bg-slate-50 border-t flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>O(null),className:"px-4 py-2 rounded text-slate-600 hover:bg-slate-200 font-bold",children:""}),e.jsxs("button",{onClick:D,className:"bg-red-600 text-white px-6 py-2 rounded shadow flex items-center gap-2 hover:bg-red-700 font-bold",children:[e.jsx(ys,{size:18}),"  "]})]})]})}),se&&P&&o==="calendar"&&e.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/70 backdrop-blur-sm print:hidden animate-in fade-in zoom-in-95",children:e.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-2xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[e.jsxs("div",{className:"bg-indigo-600 text-white p-4 border-b flex justify-between items-center shrink-0",children:[e.jsxs("h3",{className:"font-bold text-lg flex items-center gap-2",children:[e.jsx(mx,{size:20}),ee.find(S=>S.id===P.id)?" ":"  "]}),e.jsx("button",{onClick:()=>ne(!1),className:"text-white/70 hover:text-white p-1 rounded-full hover:bg-white/10 transition-colors",children:e.jsx(ut,{size:20})})]}),e.jsxs("div",{className:"p-6 overflow-y-auto custom-scrollbar flex-1 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:" "}),e.jsx(pe,{value:P.topic,onChange:S=>ie({...P,topic:S}),placeholder:":     ...",className:"w-full"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:""}),e.jsx("input",{type:"date",value:P.date,onChange:S=>ie({...P,date:S.target.value}),className:"w-full border rounded-lg p-2 text-sm focus:ring-2 focus:ring-indigo-500 outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:""}),e.jsxs("select",{value:P.duration,onChange:S=>ie({...P,duration:S.target.value}),className:"w-full border rounded-lg p-2 text-sm focus:ring-2 focus:ring-indigo-500 outline-none bg-white",children:[e.jsx("option",{value:"1/2 ",children:"  (1/2)"}),e.jsx("option",{value:"1 ",children:"  (1)"}),e.jsx("option",{value:"2 ",children:" (2)"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:""}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>ie({...P,isExternalLocation:!1,location:""}),className:`flex-1 py-2 text-xs font-bold rounded border ${P.isExternalLocation?"bg-gray-50 border-gray-200 text-gray-500":"bg-indigo-50 border-indigo-500 text-indigo-700"}`,children:" "}),e.jsx("button",{onClick:()=>ie({...P,isExternalLocation:!0,location:""}),className:`flex-1 py-2 text-xs font-bold rounded border ${P.isExternalLocation?"bg-indigo-50 border-indigo-500 text-indigo-700":"bg-gray-50 border-gray-200 text-gray-500"}`,children:"  (/)"})]}),P.isExternalLocation?e.jsx(pe,{value:P.location,onChange:S=>ie({...P,location:S}),placeholder:"  ...",className:"w-full"}):e.jsxs("select",{value:P.location,onChange:S=>ie({...P,location:S.target.value}),className:"w-full border rounded-lg p-2.5 text-sm focus:ring-2 focus:ring-indigo-500 outline-none bg-white",children:[e.jsx("option",{value:"",children:"--   --"}),le.map(S=>e.jsx("option",{value:S,children:S},S))]})]})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-xl border border-gray-200",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700",children:" "}),e.jsxs("span",{className:"text-xs bg-indigo-100 text-indigo-700 px-2 py-0.5 rounded-full font-bold",children:[" : ",Z(P.targetLevels)]})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:wg.map(S=>{const k=P.targetLevels.includes(S);return e.jsxs("button",{onClick:()=>{const z=k?P.targetLevels.filter(W=>W!==S):[...P.targetLevels,S];ie({...P,targetLevels:z})},className:`px-3 py-1.5 rounded-full text-xs font-bold transition-all border ${k?"bg-indigo-600 text-white border-indigo-600 shadow-md transform scale-105":"bg-white text-gray-600 border-gray-300 hover:border-indigo-400"}`,children:[S," ",k&&e.jsx("span",{className:"mr-1",children:""})]},S)})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"  "}),e.jsx(pe,{value:P.supervisor,onChange:S=>ie({...P,supervisor:S}),className:"w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:""}),e.jsx(pe,{value:P.notes,onChange:S=>ie({...P,notes:S}),placeholder:"...",className:"w-full"})]})]})]}),e.jsxs("div",{className:"p-4 bg-gray-50 border-t flex justify-end gap-3 shrink-0",children:[e.jsx("button",{onClick:()=>ne(!1),className:"px-5 py-2.5 rounded-xl font-bold text-gray-500 hover:bg-gray-200 transition-colors",children:""}),e.jsxs("button",{onClick:C,className:"px-6 py-2.5 rounded-xl font-bold bg-indigo-600 text-white hover:bg-indigo-700 shadow-md flex items-center gap-2 transition-colors",children:[e.jsx(ws,{size:18})," "]})]})]})}),o==="attendance"&&e.jsx("div",{className:"p-6 md:p-8 flex-1 overflow-y-auto print:hidden animate-in fade-in",children:e.jsxs("div",{className:"max-w-6xl mx-auto space-y-8",children:[e.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-200",children:[e.jsxs("h3",{className:"font-bold text-lg text-indigo-800 mb-4 flex items-center gap-2",children:[e.jsx(Fi,{size:20}),"   ( )"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-4",children:[e.jsx(pe,{label:" ",value:u,onChange:x,placeholder:":  ..."}),e.jsx(pe,{label:" ( ...)",value:b,onChange:y,placeholder:":  1  /  ..."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsx(pe,{type:"date",label:"",value:h,onChange:p}),e.jsx(pe,{label:" (/ - )",value:N,onChange:w,placeholder:" ....   ...."})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-3",children:"  ( ):"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:wg.map(S=>e.jsx("button",{onClick:()=>q(S),className:`px-4 py-2 rounded-full text-xs font-bold transition-all border ${A.includes(S)?"bg-indigo-600 text-white border-indigo-600 shadow-md":"bg-slate-50 text-slate-600 border-slate-200 hover:bg-slate-100"}`,children:S},S))})]})]}),Y.length>0?e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b bg-slate-50 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Bn,{size:18,className:"text-slate-500"}),e.jsxs("span",{className:"font-bold text-slate-700",children:["  (",Y.length," )"]})]}),e.jsxs("button",{onClick:D,className:"bg-indigo-600 text-white px-4 py-2 rounded-lg text-sm font-bold shadow hover:bg-indigo-700 flex items-center gap-2",children:[e.jsx(ys,{size:16}),"   "]})]}),e.jsxs("table",{className:"w-full text-right text-sm",children:[e.jsx("thead",{className:"bg-slate-100 text-slate-600 font-bold",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 w-12",children:"#"}),e.jsx("th",{className:"p-3",children:" "}),e.jsx("th",{className:"p-3",children:""}),e.jsx("th",{className:"p-3",children:""}),e.jsx("th",{className:"p-3 text-center w-32",children:" "}),e.jsx("th",{className:"p-3 w-32",children:" "})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:Y.map((S,k)=>{const z=H.includes(S.id);return e.jsxs("tr",{className:`hover:bg-slate-50 transition-colors ${z?"bg-red-50/50":""}`,children:[e.jsx("td",{className:"p-3 text-slate-400 font-mono",children:k+1}),e.jsx("td",{className:"p-3 font-bold text-slate-800",children:S.fullName}),e.jsx("td",{className:"p-3 text-slate-600",children:S.schoolName}),e.jsx("td",{className:"p-3 text-slate-500 text-xs",children:e.jsx("span",{className:"bg-slate-100 px-2 py-1 rounded border",children:S.levelName})}),e.jsx("td",{className:"p-3 text-center",children:e.jsx("button",{onClick:()=>E(S.id),className:`w-full py-1.5 rounded text-xs font-bold transition-all border ${z?"bg-red-100 text-red-700 border-red-200":"bg-white text-slate-400 border-slate-200 hover:border-slate-300"}`,children:z?"":""})}),e.jsx("td",{className:"p-3",children:z&&e.jsxs("button",{onClick:()=>O(S),className:"text-red-600 text-xs font-bold hover:underline flex items-center gap-1",children:[e.jsx(js,{size:14})," "]})})]},S.id)})})]})]}):e.jsxs("div",{className:"text-center py-12 text-slate-400 bg-slate-50 rounded-2xl border-2 border-dashed border-slate-200",children:[e.jsx(ft,{size:48,className:"mx-auto mb-3 opacity-20"}),e.jsx("p",{children:"         ."})]})]})}),o==="calendar"&&e.jsx("div",{className:"p-6 md:p-8 flex-1 overflow-y-auto print:hidden animate-in fade-in",children:e.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-800 font-serif",children:"  "}),e.jsx("p",{className:"text-slate-500 text-xs",children:"     "})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 bg-white px-3 py-1.5 rounded-lg border shadow-sm",children:[e.jsx("span",{className:"text-xs font-bold text-slate-500",children:":"}),e.jsxs("select",{value:V,onChange:S=>X(S.target.value),className:"bg-transparent text-sm font-bold text-indigo-700 outline-none",children:[e.jsx("option",{value:"",children:""}),e.jsx("option",{value:"",children:""}),e.jsx("option",{value:"",children:""})]})]}),e.jsxs("button",{onClick:D,className:"bg-indigo-600 text-white px-4 py-2 rounded-lg text-sm font-bold shadow hover:bg-indigo-700 flex items-center gap-2",children:[e.jsx(ys,{size:16}),"  "]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm text-right",children:[e.jsx("thead",{className:"bg-slate-50 text-slate-600 font-bold border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 w-10",children:"#"}),e.jsx("th",{className:"p-3",children:" "}),e.jsx("th",{className:"p-3 w-28",children:""}),e.jsx("th",{className:"p-3 w-32",children:""}),e.jsx("th",{className:"p-3 w-20",children:""}),e.jsx("th",{className:"p-3",children:" "}),e.jsx("th",{className:"p-3 w-20",children:""}),e.jsx("th",{className:"p-3 w-32",children:""}),e.jsx("th",{className:"p-3 w-32",children:""}),e.jsx("th",{className:"p-3 w-24 text-center",children:""})]})}),e.jsxs("tbody",{className:"divide-y divide-slate-100",children:[ee.map((S,k)=>{const z=Z(S.targetLevels);return e.jsxs("tr",{className:"hover:bg-slate-50 group",children:[e.jsx("td",{className:"p-3 text-slate-400 font-mono",children:k+1}),e.jsx("td",{className:"p-3 font-bold text-slate-800",children:S.topic}),e.jsx("td",{className:"p-3 text-slate-600 dir-ltr",children:new Date(S.date).toLocaleDateString("ar-DZ")}),e.jsx("td",{className:"p-3 text-slate-600",children:S.location||"-"}),e.jsx("td",{className:"p-3 text-slate-600",children:S.duration}),e.jsx("td",{className:"p-3",children:e.jsx("div",{className:"flex flex-wrap gap-1",children:S.targetLevels.map(W=>e.jsx("span",{className:"bg-indigo-50 text-indigo-700 px-2 py-0.5 rounded text-[10px] border border-indigo-100",children:W.replace("","")},W))})}),e.jsx("td",{className:"p-3 text-center",children:e.jsx("span",{className:"font-bold text-slate-700 bg-slate-100 px-2 py-1 rounded text-xs",children:z})}),e.jsx("td",{className:"p-3 text-slate-600 text-xs",children:S.supervisor}),e.jsx("td",{className:"p-3 text-slate-400 text-xs truncate max-w-[150px]",children:S.notes}),e.jsx("td",{className:"p-3 text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{onClick:()=>U(S),className:"text-blue-500 hover:bg-blue-50 p-1 rounded",children:e.jsx(Lt,{size:16})}),e.jsx("button",{onClick:()=>$(S.id),className:"text-red-400 hover:bg-red-50 p-1 rounded",children:e.jsx(Qu,{size:16})})]})})]},S.id)}),ee.length===0&&e.jsx("tr",{children:e.jsxs("td",{colSpan:10,className:"p-8 text-center text-slate-400",children:[e.jsx(Ia,{size:32,className:"mx-auto mb-2 opacity-20"}),'   .   "  ".']})})]})]})}),e.jsxs("button",{onClick:L,className:"w-full py-4 bg-slate-50 hover:bg-slate-100 text-slate-500 font-bold text-sm flex items-center justify-center gap-2 transition-colors border-t",children:[e.jsx(Ig,{size:18}),"   "]})]})]})}),o==="attendance"&&!F&&Sl.createPortal(e.jsx("div",{className:"hidden print:block absolute top-0 left-0 w-full h-auto bg-white z-[9999] text-black",children:T.map((S,k)=>e.jsxs("div",{className:"a4-page relative flex flex-col justify-start",style:{height:"auto",minHeight:"0",padding:"10mm 15mm",pageBreakAfter:k<T.length-1?"always":"auto",marginBottom:"0"},children:[e.jsxs("div",{className:"text-center font-bold text-sm mb-4 space-y-1",children:[e.jsx("p",{children:"   "}),e.jsx("p",{children:"  "}),e.jsxs("div",{className:"flex justify-between items-end mt-4 px-2",children:[e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{children:["   ",a.wilaya]}),e.jsxs("p",{children:["   - : ",a.district]})]}),e.jsx("div",{className:"text-left border border-black p-1 px-3 rounded",children:e.jsxs("p",{children:[" : ",new Date().getFullYear(),"/",new Date().getFullYear()+1]})})]})]}),e.jsx("div",{className:"text-center mb-4",children:e.jsxs("h1",{className:"text-lg font-bold border-2 border-black inline-block px-6 py-1.5 bg-gray-50 shadow-[3px_3px_0px_0px_black]",children:["    ",T.length>1?`( ${k+1})`:""]})}),e.jsxs("div",{className:"flex justify-between items-center mb-4 border-b-2 border-black pb-2 text-xs font-bold bg-gray-50 p-2 rounded border border-gray-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"underline ml-1",children:":"})," ",u||"................................"]}),e.jsxs("p",{children:[e.jsx("span",{className:"underline ml-1",children:":"})," ",h]}),e.jsxs("p",{children:[e.jsx("span",{className:"underline ml-1",children:":"})," ",b||"..........."]})]}),e.jsxs("table",{className:"w-full border-collapse border border-black text-xs text-center",dir:"rtl",children:[e.jsx("thead",{className:"bg-gray-100 h-8",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border border-black p-1 w-10",children:""}),e.jsx("th",{className:"border border-black p-1 w-1/4",children:" "}),e.jsx("th",{className:"border border-black p-1 w-1/4",children:""}),e.jsx("th",{className:"border border-black p-1",children:""}),e.jsx("th",{className:"border border-black p-1 w-24",children:""})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:S.map((z,W)=>e.jsxs("tr",{style:{height:"35px"},children:[e.jsx("td",{className:"border border-black p-1",children:k*18+W+1}),e.jsx("td",{className:"border border-black p-1 font-bold text-right pr-2",children:z.fullName}),e.jsx("td",{className:"border border-black p-1 text-right pr-2",children:z.schoolName}),e.jsx("td",{className:"border border-black p-1",children:z.levelName}),e.jsx("td",{className:"border border-black p-1"})]},z.id))})]})]},k))}),document.body),F&&o==="attendance"&&Sl.createPortal(e.jsx("div",{className:"hidden print:block fixed inset-0 bg-white z-[9999] overflow-visible text-black font-serif top-0 left-0 w-full h-full",children:e.jsxs("div",{className:"p-12 max-w-[210mm] mx-auto h-full",children:[e.jsxs("div",{className:"text-center font-bold text-sm mb-4 space-y-1",children:[e.jsx("p",{children:"   "}),e.jsx("p",{children:"  "})]}),e.jsxs("div",{className:"flex justify-between items-start font-bold text-sm mb-8 px-2",children:[e.jsx("div",{className:"text-right",children:e.jsxs("p",{children:["   ",a.wilaya]})}),e.jsx("div",{className:"text-left",children:e.jsxs("p",{children:["   - : ",a.district]})})]}),e.jsx("div",{className:"flex justify-end mt-4 pl-4 mb-6",children:e.jsxs("div",{className:"text-center w-80",children:[e.jsxs("p",{className:"font-bold text-lg mb-1",children:[" (): ",F.fullName]}),e.jsxs("p",{className:"font-bold text-base mb-1",children:["() : ",(j=t[F.id])==null?void 0:j.school]}),e.jsx("p",{className:"font-bold text-sm",children:"(/ () )"})]})}),e.jsx("h1",{className:"text-center text-2xl font-bold underline mb-6 decoration-2 underline-offset-8",children:":   "}),e.jsxs("div",{className:"text-justify text-lg leading-[2.2] px-4",children:[N&&e.jsxs("p",{className:"mb-1",children:[e.jsx("span",{className:"font-bold",children:":"})," ",N]}),e.jsxs("p",{children:["      ",N?" ":"","                  ",e.jsx("span",{className:"font-bold",children:h})," : ",e.jsx("span",{className:"font-bold",children:b}),'   "',e.jsx("span",{className:"font-bold",children:u}),'".']}),e.jsx("p",{className:"mt-2",children:"    48      ."}),e.jsx("p",{className:"mt-6 text-center font-bold",children:"   ."})]}),e.jsxs("div",{className:"mt-8 flex justify-between px-12 font-bold text-lg relative",children:[e.jsxs("div",{children:[e.jsxs("p",{children:[" : ",a.wilaya]}),e.jsxs("p",{children:[": ",new Date().toLocaleDateString("ar-DZ")]})]}),e.jsxs("div",{className:"text-center w-48 relative",children:[e.jsx("p",{className:"underline mb-12",children:""}),e.jsx("div",{className:"h-24 w-full flex justify-center items-center relative",children:i&&e.jsx("img",{src:i,alt:"Signature",className:"absolute -top-4 w-32 h-24 object-contain mix-blend-multiply transform -rotate-6 scale-110 pointer-events-none"})})]})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t-2 border-dashed border-black",children:[e.jsx("h3",{className:"font-bold underline text-lg mb-2 px-4",children:" ():"}),e.jsxs("div",{className:"p-4 min-h-[220px] relative border-2 border-black rounded-lg",children:[e.jsxs("div",{className:"space-y-10 mt-4",children:[e.jsx("div",{className:"border-b-2 border-black border-dotted h-1 w-full"}),e.jsx("div",{className:"border-b-2 border-black border-dotted h-1 w-full"}),e.jsx("div",{className:"border-b-2 border-black border-dotted h-1 w-full"}),e.jsx("div",{className:"border-b-2 border-black border-dotted h-1 w-full"})]}),e.jsx("div",{className:"absolute bottom-2 left-4 text-sm font-bold",children:" ():"}),e.jsx("div",{className:"absolute bottom-2 right-4 text-sm font-bold",children:" :"})]})]})]})}),document.body),o==="calendar"&&Sl.createPortal(e.jsxs("div",{className:"hidden print:block fixed inset-0 bg-white z-[9999] overflow-visible text-black font-serif top-0 left-0 w-full h-full",children:[e.jsx("style",{children:"@page { size: A4 landscape; margin: 0; }"}),e.jsxs("div",{className:"a4-page-landscape w-[297mm] h-[210mm] p-[10mm] mx-auto relative flex flex-col justify-between",children:[e.jsxs("div",{className:"w-full mb-4 relative",children:[e.jsxs("div",{className:"text-center font-bold text-sm mb-4",children:[e.jsx("p",{children:"   "}),e.jsx("p",{children:"  "})]}),e.jsxs("div",{className:"text-right font-bold text-xs pr-4",children:[e.jsxs("p",{children:["   ",a.wilaya]}),e.jsxs("p",{children:["   - : ",a.district]})]})]}),e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"border-2 border-black rounded-[50%] px-16 py-3 shadow-[3px_3px_0px_0px_rgba(0,0,0,1)] bg-white text-center",children:e.jsxs("h1",{className:"text-xl font-bold font-serif tracking-wide",children:["    ",V]})})}),e.jsx("div",{className:"flex-1",children:e.jsxs("table",{className:"w-full border-collapse border border-black text-center text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"h-10",children:[e.jsx("th",{className:"border border-black p-1 w-8",children:""}),e.jsx("th",{className:"border border-black p-1",children:" "}),e.jsx("th",{className:"border border-black p-1 w-24",children:""}),e.jsx("th",{className:"border border-black p-1 w-32",children:""}),e.jsx("th",{className:"border border-black p-1 w-20",children:" "}),e.jsx("th",{className:"border border-black p-1 w-48",children:" "}),e.jsx("th",{className:"border border-black p-1 w-12",children:""}),e.jsx("th",{className:"border border-black p-1 w-32",children:"  "}),e.jsx("th",{className:"border border-black p-1 w-48",children:""})]})}),e.jsx("tbody",{children:ee.map((S,k)=>{const z=Z(S.targetLevels);return e.jsxs("tr",{className:"h-12",children:[e.jsx("td",{className:"border border-black p-1 font-bold",children:k+1}),e.jsx("td",{className:"border border-black p-1 font-bold",children:S.topic}),e.jsx("td",{className:"border border-black p-1",children:new Date(S.date).toLocaleDateString("ar-DZ")}),e.jsx("td",{className:"border border-black p-1",children:S.location}),e.jsx("td",{className:"border border-black p-1",children:S.duration}),e.jsx("td",{className:"border border-black p-1 text-xs",children:S.targetLevels.map(W=>W.replace("","").replace("","")).join(" + ")}),e.jsx("td",{className:"border border-black p-1",children:z>0?z:""}),e.jsx("td",{className:"border border-black p-1 font-bold text-xs",children:S.supervisor}),e.jsx("td",{className:"border border-black p-1 text-xs text-right",children:S.notes})]},S.id)})})]})}),e.jsx("div",{className:"flex justify-end px-16 mt-4 pb-4",children:e.jsxs("div",{className:"text-center relative",children:[e.jsxs("p",{className:"font-bold text-xs mb-2",children:[" : ",a.wilaya," : ",new Date().toLocaleDateString("ar-DZ")]}),e.jsx("p",{className:"font-bold underline mb-16",children:"  "}),i&&e.jsx("div",{className:"absolute top-12 left-1/2 transform -translate-x-1/2 w-48 h-32 flex items-center justify-center",children:e.jsx("img",{src:i,alt:"Signature",className:"w-full h-full object-contain mix-blend-multiply transform -rotate-6 scale-125"})})]})})]})]}),document.body)]})},Vk=["  ","  ","  "," "," "," "],Bk=({teachers:n,reportsMap:t,tenureReportsMap:a,inspectorName:i,wilaya:o,district:c,onBack:u,signature:x})=>{const[h,p]=R.useState("education_director"),[b,y]=R.useState(""),[N,w]=R.useState("  "),[A,I]=R.useState("visit_report"),[H,G]=R.useState("03"),[F,O]=R.useState("      "),[V,X]=R.useState(new Set),ee=R.useMemo(()=>{const E=new Set;return Object.values(t).forEach(L=>{L.school&&E.add(L.school.trim())}),Array.from(E).sort()},[t]),Q=R.useMemo(()=>n.filter(E=>{var L,U;if(h==="school_director"&&b&&(((L=t[E.id])==null?void 0:L.school)||((U=a[E.id])==null?void 0:U.school))!==b)return!1;if(A==="visit_report"){const $=t[E.id];return $&&$.inspectionDate&&$.inspectionDate.trim()!==""}else if(A==="tenure_report"){const $=a[E.id];return E.tenureDate&&E.tenureDate.trim()!==""||$&&$.examDate}return!1}).map(E=>{var L,U,$,C;return{...E,schoolName:((L=t[E.id])==null?void 0:L.school)||((U=a[E.id])==null?void 0:U.school)||" ",reportDate:A==="visit_report"?($=t[E.id])==null?void 0:$.inspectionDate:((C=a[E.id])==null?void 0:C.examDate)||E.tenureDate}}),[n,t,a,h,b,A]),se=E=>{const L=new Set(V);L.has(E)?L.delete(E):L.add(E),X(L)},ne=()=>{const E=Q.map(L=>L.id);X(new Set(E))},P=()=>{X(new Set)},ie=()=>{window.print()},le=Q.filter(E=>V.has(E.id)),Z=le.length,q=parseInt(H)||0,Y=Z*q,T=e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"text-center mb-8 shrink-0",children:[e.jsx("h3",{className:"font-bold text-sm",children:"   "}),e.jsx("h3",{className:"font-bold text-sm mb-4",children:"  "}),e.jsxs("div",{className:"flex justify-between items-start text-xs font-bold px-2 mt-6",children:[e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{children:["   ",o]}),e.jsx("p",{children:"  "}),e.jsxs("p",{children:[": ",c]})]}),e.jsxs("div",{className:"text-center pt-6 pl-4",children:[e.jsx("p",{children:" "}),e.jsx("p",{children:" :"}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("p",{className:"text-sm mt-1 mb-1 font-bold",children:h==="education_director"?" ":`  ${b}`}),h==="education_director"&&e.jsxs("p",{className:"text-xs font-normal",children:["(",N,")"]})]})]})]})]}),e.jsx("div",{className:"text-center mb-8 shrink-0",children:e.jsx("h1",{className:"text-2xl font-bold underline decoration-2 underline-offset-8",children:" "})}),e.jsxs("div",{className:"border-2 border-black flex-1 flex flex-col min-h-0",children:[e.jsxs("div",{className:"flex border-b-2 border-black bg-gray-100 text-center font-bold text-sm shrink-0",children:[e.jsx("div",{className:"w-16 border-l-2 border-black py-2",children:""}),e.jsx("div",{className:"flex-1 border-l-2 border-black py-2",children:"  "}),e.jsx("div",{className:"w-20 border-l-2 border-black py-2",children:""}),e.jsx("div",{className:"w-36 py-2",children:""})]}),e.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[e.jsx("div",{className:"w-16 border-l-2 border-black text-center py-4 font-bold text-sm",children:"01"}),e.jsxs("div",{className:"flex-1 border-l-2 border-black p-4 text-sm font-bold leading-loose overflow-visible",children:[e.jsx("p",{className:"mb-4 text-base underline underline-offset-4",children:A==="visit_report"?"      :":"      :"}),e.jsx("div",{className:"space-y-3 mr-4",children:le.map(E=>e.jsxs("div",{className:"h-6 flex items-center",children:[e.jsxs("span",{children:["- ",E.fullName]}),h==="education_director"&&e.jsxs("span",{className:"text-[10px] font-normal mx-2 text-gray-600",children:["(",E.schoolName,")"]})]},E.id))})]}),e.jsxs("div",{className:"w-20 border-l-2 border-black pt-4 pb-4 flex flex-col",children:[e.jsx("div",{className:"h-10 mb-4"}),e.jsx("div",{className:"space-y-3 text-center text-sm font-bold",children:le.map(E=>e.jsx("div",{className:"h-6 flex items-center justify-center",children:H.padStart(2,"0")},E.id))})]}),e.jsx("div",{className:"w-36 p-2 text-center text-xs font-bold leading-relaxed flex items-center justify-center",children:F})]}),e.jsxs("div",{className:"flex border-t-2 border-black h-10 font-bold text-sm shrink-0",children:[e.jsx("div",{className:"flex-1 border-l-2 border-black flex items-center justify-center bg-gray-50",children:" "}),e.jsx("div",{className:"w-20 border-l-2 border-black flex items-center justify-center text-lg",children:Y>0?String(Y).padStart(2,"0"):""}),e.jsx("div",{className:"w-36 bg-gray-50"})]})]}),e.jsxs("div",{className:"mt-8 flex justify-between px-8 shrink-0",children:[e.jsx("div",{className:"text-center font-bold text-sm",children:e.jsx("p",{children:""})}),e.jsxs("div",{className:"text-center font-bold text-sm w-1/3 relative",children:[e.jsxs("p",{className:"mb-8",children:[o," : ",new Date().toLocaleDateString("ar-DZ")]}),e.jsx("p",{className:"mb-2",children:" "}),e.jsx("p",{className:"text-xs text-gray-400 mt-8"}),x&&e.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-40 h-28 pointer-events-none mix-blend-multiply mt-4",children:e.jsx("img",{src:x,className:"w-full h-full object-contain opacity-90 -rotate-6",alt:"Signature"})})]})]})]});return e.jsxs("div",{className:"h-full flex flex-col md:flex-row bg-slate-50 overflow-hidden",children:[e.jsxs("div",{className:"w-full md:w-80 bg-white border-l border-slate-200 flex flex-col h-full overflow-y-auto print:hidden shadow-lg z-10",children:[e.jsxs("div",{className:"p-4 bg-slate-800 text-white shrink-0 flex items-center gap-3",children:[e.jsx("button",{onClick:u,className:"p-1 hover:bg-white/20 rounded-full transition-colors",children:e.jsx(Yi,{size:20})}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-bold text-lg",children:" "}),e.jsx("p",{className:"text-slate-400 text-[10px]",children:"  "})]})]}),e.jsxs("div",{className:"p-5 space-y-6 flex-1",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase block",children:"1.  "}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("button",{onClick:()=>{p("education_director"),X(new Set)},className:`p-3 rounded-xl border flex flex-col items-center gap-2 transition-all ${h==="education_director"?"bg-blue-50 border-blue-500 text-blue-700":"bg-white border-slate-200 hover:bg-slate-50"}`,children:[e.jsx(Ou,{size:20}),e.jsx("span",{className:"text-xs font-bold",children:" "})]}),e.jsxs("button",{onClick:()=>{p("school_director"),X(new Set)},className:`p-3 rounded-xl border flex flex-col items-center gap-2 transition-all ${h==="school_director"?"bg-blue-50 border-blue-500 text-blue-700":"bg-white border-slate-200 hover:bg-slate-50"}`,children:[e.jsx(ft,{size:20}),e.jsx("span",{className:"text-xs font-bold",children:" "})]})]}),h==="education_director"?e.jsx("div",{className:"animate-in fade-in slide-in-from-top-2",children:e.jsx("select",{value:N,onChange:E=>w(E.target.value),className:"w-full p-2.5 bg-slate-50 border border-slate-300 rounded-lg text-sm font-bold text-slate-700 outline-none focus:ring-2 focus:ring-blue-500",children:Vk.map(E=>e.jsx("option",{value:E,children:E},E))})}):e.jsx("div",{className:"animate-in fade-in slide-in-from-top-2",children:e.jsxs("select",{value:b,onChange:E=>{y(E.target.value),X(new Set)},className:"w-full p-2.5 bg-slate-50 border border-slate-300 rounded-lg text-sm font-bold text-slate-700 outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"--   --"}),ee.map(E=>e.jsx("option",{value:E,children:E},E))]})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase block",children:"2.  "}),e.jsxs("div",{className:"flex bg-slate-100 p-1 rounded-lg",children:[e.jsx("button",{onClick:()=>{I("visit_report"),X(new Set)},className:`flex-1 py-2 text-xs font-bold rounded-md transition-all ${A==="visit_report"?"bg-white shadow text-slate-900":"text-slate-500"}`,children:" "}),e.jsx("button",{onClick:()=>{I("tenure_report"),X(new Set)},className:`flex-1 py-2 text-xs font-bold rounded-md transition-all ${A==="tenure_report"?"bg-white shadow text-slate-900":"text-slate-500"}`,children:" "})]})]}),e.jsxs("div",{className:"space-y-3 bg-gray-50 p-3 rounded-lg border border-gray-200",children:[e.jsxs("label",{className:"text-xs font-bold text-slate-500 uppercase flex items-center gap-2",children:[e.jsx(Uj,{size:14}),"  "]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] font-bold text-gray-400 mb-1",children:"   "}),e.jsx("input",{type:"number",min:"1",value:H,onChange:E=>G(E.target.value),className:"w-full p-2 border rounded text-sm font-bold text-center"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] font-bold text-gray-400 mb-1",children:" ( )"}),e.jsx("textarea",{value:F,onChange:E=>O(E.target.value),className:"w-full p-2 border rounded text-xs h-16 resize-none"})]})]}),e.jsxs("div",{className:"flex-1 flex flex-col min-h-0",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("label",{className:"text-xs font-bold text-slate-500 uppercase",children:["4.   (",Q.length,")"]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:ne,className:"text-[10px] text-blue-600 hover:underline",children:""}),e.jsx("span",{className:"text-slate-300",children:"|"}),e.jsx("button",{onClick:P,className:"text-[10px] text-slate-400 hover:text-slate-600",children:" "})]})]}),e.jsx("div",{className:"border border-slate-200 rounded-lg flex-1 overflow-y-auto p-2 bg-white min-h-[150px]",children:Q.length>0?Q.map(E=>e.jsxs("div",{onClick:()=>se(E.id),className:`flex items-center gap-3 p-2 rounded-lg cursor-pointer mb-1 transition-colors ${V.has(E.id)?"bg-blue-50 border border-blue-200":"hover:bg-slate-50 border border-transparent"}`,children:[e.jsx("div",{className:`w-4 h-4 rounded border flex items-center justify-center ${V.has(E.id)?"bg-blue-600 border-blue-600":"border-slate-300"}`,children:V.has(E.id)&&e.jsx(wl,{size:12,className:"text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs font-bold text-slate-800 truncate",children:E.fullName}),e.jsxs("p",{className:"text-[10px] text-slate-500 flex justify-between",children:[e.jsx("span",{children:E.schoolName}),e.jsx("span",{children:E.reportDate})]})]})]},E.id)):e.jsx("div",{className:"text-center py-8 text-slate-400 text-xs",children:"    "})})]}),e.jsxs("button",{onClick:ie,disabled:Z===0,className:"w-full bg-slate-900 text-white py-3 rounded-xl font-bold shadow-lg hover:bg-slate-800 transition-all flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(ys,{size:18}),"  (",Z,")"]})]})]}),e.jsx("div",{className:"flex-1 bg-slate-100 p-8 overflow-y-auto flex justify-center items-start print:hidden",children:e.jsx("div",{className:"bg-white shadow-2xl w-[210mm] min-h-[297mm] p-[15mm] relative text-black font-serif flex flex-col",children:T})}),Sl.createPortal(e.jsx("div",{className:"hidden print:flex fixed inset-0 w-full h-full bg-white z-[9999] p-[15mm] flex-col text-black font-serif",children:T}),document.body)]})},Fk=({teachers:n,reportsMap:t,inspectorName:a,wilaya:i,district:o,onBack:c,signature:u})=>{const[x,h]=R.useState(""),[p,b]=R.useState(new Date().toISOString().split("T")[0]),[y,N]=R.useState(""),[w,A]=R.useState(`                . 
              .`),I=R.useMemo(()=>n.filter(O=>O.status==="stagiere").map(O=>{var V;return{...O,schoolName:((V=t[O.id])==null?void 0:V.school)||" "}}),[n,t]),H=R.useMemo(()=>I.find(O=>O.id===x),[I,x]),G=()=>{window.print()},F=e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"text-center mb-6 shrink-0",children:[e.jsx("h3",{className:"font-bold text-sm",children:"   "}),e.jsx("h3",{className:"font-bold text-sm mb-4",children:"  "}),e.jsxs("div",{className:"flex justify-between items-start text-sm font-bold px-2 border-b-2 border-black pb-3",children:[e.jsxs("div",{className:"text-right w-1/2 space-y-1",children:[e.jsxs("p",{children:["   ",i]}),e.jsx("p",{children:"  "}),e.jsxs("p",{children:[": ",o]})]}),e.jsx("div",{className:"text-left w-1/2",children:e.jsxs("p",{children:[i," : ",new Date().toLocaleDateString("ar-DZ")]})})]})]}),e.jsxs("div",{className:"flex-1 px-4 flex flex-col",children:[e.jsx("div",{className:"flex justify-center mb-8 shrink-0",children:e.jsx("div",{className:"border-[3px] border-black px-10 py-2 bg-gray-50 shadow-[4px_4px_0px_0px_rgba(0,0,0,1)]",children:e.jsx("h1",{className:"text-2xl font-bold tracking-wide",children:"   "})})}),e.jsxs("div",{className:"mb-8 text-base leading-relaxed font-bold shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"w-32 whitespace-nowrap",children:" ():"}),e.jsx("span",{className:"border-b border-dotted border-black flex-1 inline-block",children:(H==null?void 0:H.fullName)||"................................"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-32 whitespace-nowrap",children:"() :"}),e.jsx("span",{className:"border-b border-dotted border-black flex-1 inline-block",children:(H==null?void 0:H.schoolName)||"................................"})]}),e.jsx("div",{className:"mt-4 text-center w-full",children:e.jsx("span",{className:"underline decoration-1 underline-offset-4",children:"  () () "})})]}),e.jsxs("div",{className:"mb-6 border border-black p-3 rounded-lg shrink-0",children:[e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx("span",{className:"font-bold underline text-base w-20",children:":"}),e.jsx("span",{className:"text-base font-bold",children:"    ()."})]}),e.jsxs("div",{className:"flex gap-2 items-start",children:[e.jsx("span",{className:"font-bold underline text-base w-20",children:":"}),e.jsx("span",{className:"text-base flex-1 leading-relaxed",children:y||"................................................................"})]})]}),e.jsxs("div",{className:"mb-8 text-justify text-base leading-loose font-medium indent-8 flex-1",children:[e.jsx("p",{className:"whitespace-pre-line",children:w}),e.jsxs("p",{className:"mt-3",children:["    : ",e.jsx("span",{className:"font-bold bg-gray-100 px-2 border border-gray-300 mx-1",children:new Date(p).toLocaleDateString("ar-DZ")}),"       (08:00) ."]})]}),e.jsxs("div",{className:"flex justify-between items-start mt-auto pt-4 shrink-0",children:[e.jsxs("div",{className:"text-center w-1/3",children:[e.jsx("p",{className:"font-bold underline mb-2",children:" () "}),e.jsx("p",{className:"text-xs text-gray-400 mb-8",children:"( )"})]}),e.jsx("div",{className:"text-center w-1/3",children:e.jsx("p",{className:"font-bold underline mb-2",children:" () "})}),e.jsxs("div",{className:"text-center w-1/3 relative",children:[e.jsx("p",{className:"font-bold underline mb-8",children:" "}),e.jsx("div",{className:"h-24 w-full"}),u&&e.jsx("div",{className:"absolute top-10 left-1/2 transform -translate-x-1/2 w-40 h-28 pointer-events-none mix-blend-multiply",children:e.jsx("img",{src:u,className:"w-full h-full object-contain opacity-90 -rotate-6",alt:"Signature"})})]})]})]})]});return e.jsxs("div",{className:"h-full flex flex-col md:flex-row bg-slate-50 overflow-hidden",children:[e.jsxs("div",{className:"w-full md:w-80 bg-white border-l border-slate-200 flex flex-col h-full overflow-y-auto print:hidden shadow-lg z-10",children:[e.jsxs("div",{className:"p-4 bg-slate-800 text-white shrink-0 flex items-center gap-3",children:[e.jsx("button",{onClick:c,className:"p-1 hover:bg-white/20 rounded-full transition-colors",children:e.jsx(Yi,{size:20})}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-bold text-lg",children:" "}),e.jsx("p",{className:"text-slate-400 text-[10px]",children:"  "})]})]}),e.jsxs("div",{className:"p-5 space-y-6 flex-1",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase block",children:"1.  "}),I.length>0?e.jsx("div",{className:"space-y-2",children:I.map(O=>e.jsxs("div",{onClick:()=>h(O.id),className:`p-3 rounded-xl border cursor-pointer transition-all flex items-center gap-3 ${x===O.id?"bg-indigo-50 border-indigo-500 ring-1 ring-indigo-500":"bg-white border-slate-200 hover:bg-slate-50"}`,children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold ${x===O.id?"bg-indigo-200 text-indigo-700":"bg-slate-100 text-slate-500"}`,children:e.jsx(Yn,{size:16})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-bold text-slate-800 truncate",children:O.fullName}),e.jsxs("p",{className:"text-[10px] text-slate-500 truncate flex items-center gap-1",children:[e.jsx(ft,{size:10})," ",O.schoolName]})]})]},O.id))}):e.jsx("div",{className:"text-center py-8 bg-slate-50 border border-dashed border-slate-300 text-slate-400 text-xs",children:"   "})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase block",children:"2.  "}),e.jsx(pe,{type:"date",label:" ",value:p,onChange:b}),e.jsx(pe,{label:" ( )",placeholder:":   ...  ...",value:y,onChange:N})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase block",children:"3.  "}),e.jsx(ze,{value:w,onChange:A,className:"w-full p-3 border rounded-xl text-xs leading-relaxed min-h-[120px] resize-none focus:ring-2 focus:ring-indigo-500 outline-none"})]}),e.jsxs("button",{onClick:G,disabled:!x,className:"w-full bg-indigo-600 text-white py-3 rounded-xl font-bold shadow-lg hover:bg-indigo-700 transition-all flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed mt-auto",children:[e.jsx(ys,{size:18}),"  "]})]})]}),e.jsx("div",{className:"flex-1 bg-slate-100 p-8 overflow-y-auto flex justify-center items-start print:hidden",children:e.jsx("div",{className:"bg-white shadow-2xl w-[210mm] min-h-[297mm] p-[15mm] relative text-black font-serif flex flex-col",children:F})}),Sl.createPortal(e.jsx("div",{className:"hidden print:flex fixed inset-0 w-full h-full bg-white z-[9999] p-[15mm] flex-col text-black font-serif",children:F}),document.body)]})},Jk=({reportsMap:n,inspectorName:t,wilaya:a,district:i,onBack:o,signature:c})=>{const[u,x]=R.useState("school"),[h,p]=R.useState(""),[b,y]=R.useState(""),[N,w]=R.useState(""),[A,I]=R.useState(""),[H,G]=R.useState(""),[F,O]=R.useState("   ..."),V=R.useMemo(()=>{const se=new Set;return Object.values(n).forEach(ne=>{ne.school&&se.add(ne.school.trim())}),Array.from(se).sort()},[n]),X=()=>{window.print()},ee=()=>{if(u==="school")return e.jsxs("div",{className:"text-center min-w-[250px]",children:[e.jsx("p",{className:"mb-1 text-sm",children:" ():"}),e.jsx("div",{className:"border-b border-black pb-1",children:e.jsxs("p",{className:"font-bold",children:["()  ",h||"................"]})})]});{const se=b.split(`
`),ne=se[0],P=se.slice(1);return e.jsxs("div",{className:"text-center min-w-[250px]",children:[e.jsx("p",{className:"mb-1 text-sm",children:" ():"}),e.jsxs("div",{className:"border-b border-black pb-1",children:[e.jsx("p",{className:"font-bold",children:ne||"................................"}),P.map((ie,le)=>e.jsx("p",{className:"text-sm font-normal mt-0.5",children:ie},le))]})]})}},Q=e.jsxs("div",{className:"flex flex-col h-full justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"text-center mb-6 shrink-0",children:[e.jsx("h3",{className:"font-bold text-sm",children:"   "}),e.jsx("h3",{className:"font-bold text-sm mb-6",children:"  "}),e.jsxs("div",{className:"flex justify-between items-start text-sm font-bold px-2 border-b-2 border-black pb-4",children:[e.jsxs("div",{className:"text-right w-1/2 space-y-1",children:[e.jsxs("p",{children:["   ",a]}),e.jsx("p",{children:"  "}),e.jsxs("p",{children:[": ",i]})]}),e.jsx("div",{className:"text-left w-1/2",children:e.jsxs("p",{children:[a," : ",new Date().toLocaleDateString("ar-DZ")]})})]})]}),e.jsx("div",{className:"mb-8 text-lg pl-8 flex justify-end shrink-0",children:ee()}),e.jsxs("div",{className:"mb-6 space-y-2 shrink-0",children:[e.jsxs("div",{className:"flex gap-2 items-start",children:[e.jsx("span",{className:"font-bold underline text-base w-20 shrink-0",children:":"}),e.jsx("span",{className:"text-base font-bold leading-normal",children:N||"................................................................"})]}),A&&e.jsxs("div",{className:"flex gap-2 items-start",children:[e.jsx("span",{className:"font-bold underline text-base w-20 shrink-0",children:":"}),e.jsx("span",{className:"text-base leading-normal",children:A})]}),H&&e.jsxs("div",{className:"flex gap-2 items-start",children:[e.jsx("span",{className:"font-bold underline text-base w-20 shrink-0",children:":"}),e.jsx("span",{className:"text-base leading-normal",children:H})]})]})]}),e.jsx("div",{className:"flex-1 mb-4 text-justify text-lg leading-[2.2] font-medium indent-8 whitespace-pre-line overflow-hidden",children:F}),e.jsx("div",{className:"flex justify-end pt-4 px-8 mt-auto shrink-0",children:e.jsxs("div",{className:"text-center w-64 relative",children:[e.jsx("p",{className:"font-bold underline mb-8",children:" "}),e.jsx("div",{className:"h-16 w-full"}),c&&e.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-40 h-28 pointer-events-none mix-blend-multiply mt-4",children:e.jsx("img",{src:c,className:"w-full h-full object-contain opacity-90 -rotate-6",alt:"Signature"})})]})})]});return e.jsxs("div",{className:"h-full flex flex-col md:flex-row bg-slate-50 overflow-hidden",children:[e.jsxs("div",{className:"w-full md:w-80 bg-white border-l border-slate-200 flex flex-col h-full overflow-y-auto print:hidden shadow-lg z-10",children:[e.jsxs("div",{className:"p-4 bg-slate-800 text-white shrink-0 flex items-center gap-3",children:[e.jsx("button",{onClick:o,className:"p-1 hover:bg-white/20 rounded-full transition-colors",children:e.jsx(Yi,{size:20})}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-bold text-lg",children:" "}),e.jsx("p",{className:"text-slate-400 text-[10px]",children:"   "})]})]}),e.jsxs("div",{className:"p-5 space-y-6 flex-1",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase block",children:"1.  "}),e.jsxs("div",{className:"flex bg-slate-100 p-1 rounded-lg",children:[e.jsxs("button",{onClick:()=>x("school"),className:`flex-1 py-2 text-xs font-bold rounded-md transition-all flex items-center justify-center gap-2 ${u==="school"?"bg-white shadow text-indigo-700":"text-slate-500"}`,children:[e.jsx(ft,{size:14})," "]}),e.jsxs("button",{onClick:()=>x("other"),className:`flex-1 py-2 text-xs font-bold rounded-md transition-all flex items-center justify-center gap-2 ${u==="other"?"bg-white shadow text-indigo-700":"text-slate-500"}`,children:[e.jsx(Ou,{size:14}),"  "]})]}),u==="school"?e.jsx("div",{className:"animate-in fade-in slide-in-from-top-1",children:e.jsxs("select",{value:h,onChange:se=>p(se.target.value),className:"w-full p-3 bg-white border border-slate-300 rounded-xl text-sm font-bold text-slate-700 outline-none focus:ring-2 focus:ring-indigo-500",children:[e.jsx("option",{value:"",children:"--   --"}),V.map(se=>e.jsx("option",{value:se,children:se},se))]})}):e.jsxs("div",{className:"animate-in fade-in slide-in-from-top-1",children:[e.jsx("label",{className:"text-[10px] text-slate-400 mb-1 block",children:" Enter   "}),e.jsx(ze,{value:b,onChange:y,placeholder:`:   
( )`,className:"w-full p-3 border rounded-xl text-sm focus:ring-2 focus:ring-indigo-500 outline-none min-h-[80px]"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase block",children:"2.  "}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("label",{className:"text-[10px] font-bold text-slate-400 flex items-center gap-1",children:[e.jsx(js,{size:10})," "]}),e.jsx(pe,{value:N,onChange:w,placeholder:"  ..."})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("label",{className:"text-[10px] font-bold text-slate-400 flex items-center gap-1",children:[e.jsx(gN,{size:10}),"  ()"]}),e.jsx(pe,{value:A,onChange:I,placeholder:" / ..."})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("label",{className:"text-[10px] font-bold text-slate-400 flex items-center gap-1",children:[e.jsx(dj,{size:10}),"  ()"]}),e.jsx(pe,{value:H,onChange:G,placeholder:" ..."})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase block",children:"3.  "}),e.jsx(ze,{value:F,onChange:O,className:"w-full p-3 border rounded-xl text-xs leading-relaxed min-h-[150px] resize-none focus:ring-2 focus:ring-indigo-500 outline-none",placeholder:"   ..."})]}),e.jsxs("button",{onClick:X,className:"w-full bg-indigo-600 text-white py-3 rounded-xl font-bold shadow-lg hover:bg-indigo-700 transition-all flex items-center justify-center gap-2 mt-auto",children:[e.jsx(ys,{size:18}),"  "]})]})]}),e.jsx("div",{className:"flex-1 bg-slate-100 p-8 overflow-y-auto flex justify-center items-start print:hidden",children:e.jsx("div",{className:"bg-white shadow-2xl w-[210mm] h-[296mm] p-[15mm] relative text-black font-serif flex flex-col justify-between",children:Q})}),Sl.createPortal(e.jsx("div",{className:"hidden print:flex fixed inset-0 w-full h-full bg-white z-[9999] p-[15mm] flex-col justify-between text-black font-serif",children:Q}),document.body)]})},Yk=({teachers:n,reportsMap:t,tenureReportsMap:a,inspectorName:i,wilaya:o,district:c,signature:u})=>{const[x,h]=R.useState("menu");return x==="schedule"?e.jsx(Bk,{teachers:n,reportsMap:t,tenureReportsMap:a,inspectorName:i,wilaya:o,district:c,onBack:()=>h("menu"),signature:u}):x==="tenure_notice"?e.jsx(Fk,{teachers:n,reportsMap:t,inspectorName:i,wilaya:o,district:c,onBack:()=>h("menu"),signature:u}):x==="correspondence"?e.jsx(Jk,{reportsMap:t,inspectorName:i,wilaya:o,district:c,onBack:()=>h("menu"),signature:u}):e.jsxs("div",{className:"h-full bg-slate-50 p-8 flex flex-col",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("div",{className:"w-20 h-20 bg-blue-900 rounded-3xl flex items-center justify-center mx-auto mb-4 text-white shadow-xl rotate-3",children:e.jsx(Ki,{size:40})}),e.jsx("h1",{className:"text-3xl font-bold text-slate-800 font-serif",children:" "}),e.jsx("p",{className:"text-slate-500 mt-2",children:"     "})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 max-w-5xl mx-auto w-full",children:[e.jsxs("button",{onClick:()=>h("schedule"),className:"bg-white p-8 rounded-2xl shadow-sm border border-slate-200 hover:shadow-xl hover:border-blue-300 hover:-translate-y-1 transition-all group text-right",children:[e.jsx("div",{className:"w-14 h-14 bg-blue-50 text-blue-600 rounded-xl flex items-center justify-center mb-6 group-hover:bg-blue-600 group-hover:text-white transition-colors",children:e.jsx(js,{size:28})}),e.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-2",children:" "}),e.jsx("p",{className:"text-sm text-slate-400 leading-relaxed",children:"     ( / )      ."})]}),e.jsxs("button",{onClick:()=>h("tenure_notice"),className:"bg-white p-8 rounded-2xl shadow-sm border border-slate-200 hover:shadow-xl hover:border-indigo-300 hover:-translate-y-1 transition-all group text-right",children:[e.jsx("div",{className:"w-14 h-14 bg-indigo-50 text-indigo-600 rounded-xl flex items-center justify-center mb-6 group-hover:bg-indigo-600 group-hover:text-white transition-colors",children:e.jsx(So,{size:28})}),e.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-2",children:" "}),e.jsx("p",{className:"text-sm text-slate-400 leading-relaxed",children:"    (  )    ."})]}),e.jsxs("button",{onClick:()=>h("correspondence"),className:"bg-white p-8 rounded-2xl shadow-sm border border-slate-200 hover:shadow-xl hover:border-emerald-300 hover:-translate-y-1 transition-all group text-right",children:[e.jsx("div",{className:"w-14 h-14 bg-emerald-50 text-emerald-600 rounded-xl flex items-center justify-center mb-6 group-hover:bg-emerald-600 group-hover:text-white transition-colors",children:e.jsx(dn,{size:28})}),e.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-2",children:" "}),e.jsx("p",{className:"text-sm text-slate-400 leading-relaxed",children:"      ( )   ."})]})]})]})},Kk=()=>{const[n,t]=R.useState(!1),[a,i]=R.useState(""),[o,c]=R.useState(""),[u,x]=R.useState(""),[h,p]=R.useState(""),[b,y]=R.useState(!0),[N,w]=R.useState(""),[A,I]=R.useState(""),H=()=>{w(""),I(""),c(""),p(""),b||x("")},G=async F=>{if(F.preventDefault(),!zo()||!as){w("   Supabase  .");return}if(!b){if(o!==h){w("    .");return}if(u.trim().length<3){w("     .");return}}t(!0),w(""),I("");try{if(b){const{error:O}=await as.auth.signInWithPassword({email:a,password:o});if(O)throw O}else{const{error:O}=await as.auth.signUp({email:a,password:o,options:{data:{full_name:u}}});if(O)throw O;I("   !       ."),y(!0),c(""),p("")}}catch(O){console.error(O),O.message.includes("Invalid login")?w("      ."):O.message.includes("Email not confirmed")?w("       ."):O.message.includes("User already registered")?w("      ."):O.message.includes("Password should be")?w("     6   ."):w(" : "+O.message)}finally{t(!1)}};return zo()?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 p-4",dir:"rtl",children:e.jsxs("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-2xl overflow-hidden animate-in fade-in zoom-in-95 duration-300",children:[e.jsxs("div",{className:"bg-white p-8 pb-0 text-center relative z-10",children:[e.jsx("div",{className:"w-20 h-20 bg-blue-600 rounded-2xl rotate-3 flex items-center justify-center mx-auto mb-6 shadow-lg shadow-blue-500/30",children:e.jsx(jo,{className:"text-white -rotate-3",size:40})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800 font-serif",children:" "}),e.jsx("p",{className:"text-gray-500 mt-2 text-sm font-medium",children:"  "})]}),e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"flex bg-gray-100 p-1 rounded-lg mb-6",children:[e.jsx("button",{onClick:()=>{y(!0),H()},className:`flex-1 py-2 text-sm font-bold rounded-md transition-all ${b?"bg-white text-blue-800 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:""}),e.jsx("button",{onClick:()=>{y(!1),H()},className:`flex-1 py-2 text-sm font-bold rounded-md transition-all ${b?"text-gray-500 hover:text-gray-700":"bg-white text-blue-800 shadow-sm"}`,children:" "})]}),N&&e.jsxs("div",{className:"mb-6 p-4 bg-red-50 text-red-700 rounded-xl text-xs border border-red-100 flex items-start gap-3 animate-in slide-in-from-top-2",children:[e.jsx(Ia,{size:18,className:"shrink-0"}),e.jsx("span",{className:"leading-snug",children:N})]}),A&&e.jsxs("div",{className:"mb-6 p-4 bg-green-50 text-green-700 rounded-xl text-xs border border-green-100 flex items-start gap-3 animate-in slide-in-from-top-2",children:[e.jsx(_t,{size:18,className:"shrink-0"}),e.jsx("span",{className:"leading-snug",children:A})]}),e.jsxs("form",{onSubmit:G,className:"space-y-4",children:[!b&&e.jsxs("div",{className:"animate-in slide-in-from-top-2",children:[e.jsx("label",{className:"block text-xs font-bold text-gray-700 mb-2 mr-1",children:" "}),e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",required:!b,value:u,onChange:F=>x(F.target.value),className:"w-full pl-4 pr-11 py-3 border-2 border-gray-100 rounded-xl focus:border-blue-500 focus:ring-0 outline-none transition-all text-sm bg-gray-50 focus:bg-white font-bold text-gray-700",placeholder:" "}),e.jsx("div",{className:"absolute right-3 top-3 text-gray-400 group-focus-within:text-blue-500 transition-colors",children:e.jsx(Yn,{size:20})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-700 mb-2 mr-1",children:" "}),e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"email",required:!0,value:a,onChange:F=>i(F.target.value),className:"w-full pl-4 pr-11 py-3 border-2 border-gray-100 rounded-xl focus:border-blue-500 focus:ring-0 outline-none transition-all text-sm bg-gray-50 focus:bg-white font-bold text-gray-700",placeholder:"name@education.dz"}),e.jsx("div",{className:"absolute right-3 top-3 text-gray-400 group-focus-within:text-blue-500 transition-colors",children:e.jsx(BN,{size:20})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-700 mb-2 mr-1",children:" "}),e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"password",required:!0,value:o,onChange:F=>c(F.target.value),className:"w-full pl-4 pr-11 py-3 border-2 border-gray-100 rounded-xl focus:border-blue-500 focus:ring-0 outline-none transition-all text-sm bg-gray-50 focus:bg-white font-bold text-gray-700",placeholder:"",minLength:6}),e.jsx("div",{className:"absolute right-3 top-3 text-gray-400 group-focus-within:text-blue-500 transition-colors",children:e.jsx(jo,{size:20})})]})]}),!b&&e.jsxs("div",{className:"animate-in slide-in-from-top-2",children:[e.jsx("label",{className:"block text-xs font-bold text-gray-700 mb-2 mr-1",children:"  "}),e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"password",required:!b,value:h,onChange:F=>p(F.target.value),className:`w-full pl-4 pr-11 py-3 border-2 rounded-xl focus:ring-0 outline-none transition-all text-sm bg-gray-50 focus:bg-white font-bold text-gray-700 ${h&&o!==h?"border-red-200 focus:border-red-500":"border-gray-100 focus:border-blue-500"}`,placeholder:"",minLength:6}),e.jsx("div",{className:"absolute right-3 top-3 text-gray-400 group-focus-within:text-blue-500 transition-colors",children:e.jsx(jo,{size:20})})]}),h&&o!==h&&e.jsx("p",{className:"text-[10px] text-red-500 mt-1 mr-1 font-bold",children:"   "})]}),e.jsx("button",{type:"submit",disabled:n,className:"w-full bg-blue-800 text-white font-bold py-3.5 rounded-xl hover:bg-blue-900 transition-all shadow-lg hover:shadow-xl hover:-translate-y-0.5 flex items-center justify-center gap-2 disabled:opacity-70 disabled:cursor-not-allowed disabled:transform-none mt-4",children:n?e.jsx(Uo,{className:"animate-spin",size:20}):b?e.jsxs(e.Fragment,{children:[e.jsx(ON,{size:20})," "]}):e.jsxs(e.Fragment,{children:[e.jsx(i2,{size:20})," "]})})]}),e.jsxs("div",{className:"mt-8 pt-6 border-t border-gray-100 text-[11px] text-gray-500 flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-blue-700 font-bold mb-1",children:[e.jsx(Oj,{size:14}),e.jsx("span",{children:"  "})]}),e.jsxs("p",{className:"leading-relaxed opacity-80",children:["   ",e.jsx("b",{children:" "})," ( ).   ( )     Google Sheets        ."]})]})]})]})}):e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 p-4",dir:"rtl",children:e.jsxs("div",{className:"max-w-lg w-full bg-white rounded-xl shadow-lg p-8 text-center border border-orange-100",children:[e.jsx("div",{className:"w-20 h-20 bg-orange-50 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(SN,{size:40,className:"text-orange-500"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"   "}),e.jsxs("div",{className:"text-gray-600 mb-8 text-sm leading-relaxed space-y-4 text-right",children:[e.jsxs("p",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-orange-500 font-bold",children:""}),e.jsxs("span",{children:["      ",e.jsx("b",{children:"Supabase"}),"      ."]})]}),e.jsxs("p",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-orange-500 font-bold",children:""}),e.jsxs("span",{children:["    ",e.jsx("b",{children:" "}),"     Supabase."]})]})]}),e.jsxs("div",{className:"bg-gray-900 text-gray-300 p-4 rounded-lg text-left text-xs font-mono mb-6 overflow-x-auto shadow-inner",children:[e.jsx("span",{className:"text-green-400",children:"# In services/supabaseService.ts or .env file:"}),e.jsx("br",{}),'const SUPABASE_URL = "YOUR_PROJECT_URL";',e.jsx("br",{}),'const SUPABASE_ANON_KEY = "YOUR_ANON_KEY";']}),e.jsxs("p",{className:"text-xs text-gray-400 border-t pt-4",children:["    : ",e.jsx("code",{children:"npm install @supabase/supabase-js"})]})]})})};var Ie=(n=>(n.DASHBOARD="DASHBOARD",n.EDITOR="EDITOR",n.LEGACY_EDITOR="LEGACY_EDITOR",n.PRINT="PRINT",n.DATABASE="DATABASE",n.PROMOTIONS="PROMOTIONS",n.TENURE_EDITOR="TENURE_EDITOR",n.QUARTERLY_REPORT="QUARTERLY_REPORT",n.ACQUISITIONS="ACQUISITIONS",n.SEMINARS="SEMINARS",n.ADMIN_ASSISTANT="ADMIN_ASSISTANT",n))(Ie||{});const Oi=()=>Math.random().toString(36).substr(2,9),Qk=()=>{var nr,Ha,Dl,gn;const[n,t]=R.useState(null),[a,i]=R.useState(!0),[o,c]=R.useState(!1),[u,x]=R.useState(()=>localStorage.getItem("mufattish_last_view")||Ie.DASHBOARD),[h,p]=R.useState("stats"),[b,y]=R.useState(F2),[N,w]=R.useState(()=>localStorage.getItem("mufattish_last_teacher_id")||""),[A,I]=R.useState(null),[H,G]=R.useState(""),[F,O]=R.useState(!1),[V,X]=R.useState(void 0),[ee,Q]=R.useState(!0),[se,ne]=R.useState(on),[P,ie]=R.useState({}),[le,Z]=R.useState(wx),[q,Y]=R.useState({}),[T,E]=R.useState(J2),[L,U]=R.useState(!1),[$,C]=R.useState(!1),[D,j]=R.useState({scope:"district",selectedSchool:"",selectedLevel:"",selectedClass:"",selectedSubject:""}),[S,k]=R.useState(0),[z,W]=R.useState(!1),[ue,J]=R.useState("idle"),[be,Ee]=R.useState(""),[Re,_e]=R.useState(()=>localStorage.getItem("mufattish_auto_sync")==="true"),ke=R.useRef(!0),[ae,Je]=R.useState(""),[Qn,qa]=R.useState(""),Al=R.useMemo(()=>{const ge=new Set;return Object.values(P).forEach(ve=>{ve.school&&ge.add(ve.school.trim())}),Array.from(ge).sort()},[P]),Oa=R.useMemo(()=>{const ge=new Set;return _l().records.forEach(we=>ge.add(we.schoolName)),Object.values(P).forEach(we=>{we.school&&we.school.trim()!==""&&ge.add(we.school.trim())}),Array.from(ge).sort()},[S,u,P]),Ml=R.useMemo(()=>{const ge=new Set;return Object.values(P).forEach(ve=>{ve.level&&ge.add(ve.level.trim())}),Array.from(ge).sort()},[P]),Xn=R.useMemo(()=>b.filter(ge=>{const ve=P[ge.id];return!(ae&&(!ve||ve.school.trim()!==ae)||Qn&&(!ve||ve.level.trim()!==Qn))}),[b,P,ae,Qn]),Ut=R.useMemo(()=>{let ge=se.district,ve=se.wilaya;if(!ge||ge.trim()===""){const we=Object.values(P).find($e=>$e.district&&$e.district.trim()!=="");we&&(ge=we.district)}if(!ve||ve===""){const we=Object.values(P).find($e=>$e.wilaya&&$e.wilaya.trim()!==""&&$e.wilaya!=="");we&&(ve=we.wilaya)}return{district:ge||"",wilaya:ve||""}},[se,P]);R.useEffect(()=>{const ge=new Date;let ve=0;const we=b.map($e=>{const vt=P[$e.id];if(vt&&vt.inspectionDate&&vt.finalMark>0){const Kt=new Date(vt.inspectionDate);if(!isNaN(Kt.getTime())&&$e.lastInspectionDate!==vt.inspectionDate){const Ds=Math.abs(ge.getTime()-Kt.getTime());if(Math.ceil(Ds/(1e3*60*60*24))<365)return ve++,{...$e,lastInspectionDate:vt.inspectionDate,lastMark:vt.finalMark}}}return $e});ve>0&&(y(we),console.log(`Updated ${ve} teacher records automatically.`))},[P]),R.useEffect(()=>{if(zo()&&as){as.auth.getSession().then(({data:{session:ve}})=>{t(ve),i(!1),ve!=null&&ve.user&&typeof No=="function"&&No().then(we=>{we&&(localStorage.setItem("mufattish_script_url",we),W(!0))})}).catch(ve=>{console.error("Session check failed:",ve),i(!1)});const{data:{subscription:ge}}=as.auth.onAuthStateChange((ve,we)=>{t(we),i(!1),we!=null&&we.user&&typeof No=="function"&&No().then($e=>{$e&&(localStorage.setItem("mufattish_script_url",$e),W(!0))})});return()=>ge.unsubscribe()}else i(!1)},[]),R.useEffect(()=>{const ge=localStorage.getItem("mufattish_teachers"),ve=localStorage.getItem("mufattish_reports_map"),we=localStorage.getItem("mufattish_tenure_reports_map"),$e=localStorage.getItem("mufattish_quarterly_report"),vt=localStorage.getItem("mufattish_is_gold"),Kt=localStorage.getItem("mufattish_inspector_name"),Ds=localStorage.getItem("mufattish_signature"),Ke=localStorage.getItem("mufattish_show_signature");if(ge)try{y(JSON.parse(ge))}catch{}if(ve)try{ie(JSON.parse(ve))}catch{}if(we)try{Y(JSON.parse(we))}catch{}if($e)try{E(JSON.parse($e))}catch{}vt==="true"&&U(!0),Kt&&G(Kt),Ds&&X(Ds),Ke!==null&&Q(Ke==="true");const Qt=localStorage.getItem("mufattish_script_url");Qt&&(W(!0),(!ge||ge==="[]")&&(console.log("Local data empty, attempting auto-restore from cloud..."),J("syncing"),Ee("   ..."),vb(Qt).then(Qe=>{if(Array.isArray(Qe)){const{teachers:De,reportsMap:os}=Hg(Qe);De.length>0?(y(De),ie(os),J("success"),Ee("  "),setTimeout(()=>J("idle"),3e3)):J("idle")}}).catch(Qe=>{console.error("Auto restore failed:",Qe),J("error"),Ee("  ")})))},[]),R.useEffect(()=>{localStorage.setItem("mufattish_teachers",JSON.stringify(b))},[b]),R.useEffect(()=>{localStorage.setItem("mufattish_reports_map",JSON.stringify(P))},[P]),R.useEffect(()=>{localStorage.setItem("mufattish_tenure_reports_map",JSON.stringify(q))},[q]),R.useEffect(()=>{localStorage.setItem("mufattish_quarterly_report",JSON.stringify(T))},[T]),R.useEffect(()=>{localStorage.setItem("mufattish_is_gold",L.toString())},[L]),R.useEffect(()=>{localStorage.setItem("mufattish_inspector_name",H)},[H]),R.useEffect(()=>{localStorage.setItem("mufattish_show_signature",String(ee))},[ee]),R.useEffect(()=>{u&&localStorage.setItem("mufattish_last_view",u)},[u]),R.useEffect(()=>{localStorage.setItem("mufattish_last_teacher_id",N)},[N]),R.useEffect(()=>{if(ke.current){ke.current=!1;return}if(!Re||!z||b.length===0)return;const ge=localStorage.getItem("mufattish_script_url");if(!ge)return;J("syncing");const ve=setTimeout(async()=>{try{const we=_u(b,se,P);await Iu(ge,we),J("success"),Ee("   Google Sheets"),setTimeout(()=>J("idle"),3e3)}catch(we){console.error("Sync Error:",we),J("error"),Ee(" ")}},4e3);return()=>clearTimeout(ve)},[b,P,q,Re,z]);const At=ge=>{I(ge)},Vo=async()=>{as&&(await as.auth.signOut(),t(null))},$a=(ge,ve)=>{if(I(null),w(ge.id),P[ge.id]){const we=P[ge.id];ne({...we,reportModel:ve,inspectorName:we.inspectorName||H})}else{const we={...on,id:Oi(),teacherId:ge.id,reportModel:ve,wilaya:se.wilaya||Ut.wilaya,school:se.school||"",district:se.district||Ut.district,inspectorName:H};ne(we),ie($e=>({...$e,[ge.id]:we}))}},Zi=ge=>{$a(ge,"modern"),x(Ie.EDITOR)},Rl=ge=>{$a(ge,"legacy"),x(Ie.LEGACY_EDITOR)},Bo=ge=>{if(I(null),w(ge.id),q[ge.id]){const ve=q[ge.id];Z({...ve,inspectorName:ve.inspectorName||H})}else{const ve={...wx,id:Oi(),teacherId:ge.id,wilaya:se.wilaya||Ut.wilaya,district:se.district||Ut.district,school:se.school||"",inspectorName:H};Z(ve),Y(we=>({...we,[ge.id]:ve}))}x(Ie.TENURE_EDITOR)},Wi=()=>{E(ge=>({...ge,inspectorName:H,wilaya:Ut.wilaya,district:Ut.district,teachersTotal:b.length,teachersTrainee:b.filter(ve=>ve.status==="stagiere").length})),x(Ie.QUARTERLY_REPORT)},er=ge=>{ne(ge),ie(ve=>({...ve,[ge.teacherId]:ge}))},Fo=ge=>{Z(ge),Y(ve=>({...ve,[ge.teacherId]:ge}))},Zn=ge=>{E(ge)},Mt=ge=>{y(ve=>ve.map(we=>we.id===ge.id?ge:we)),A&&A.id===ge.id&&I(ge)},_s=async ge=>{if(window.confirm("      ")){y(we=>we.filter($e=>$e.id!==ge));const ve={...P};delete ve[ge],ie(ve),N===ge&&(w(""),u!==Ie.DATABASE&&u!==Ie.PROMOTIONS&&u!==Ie.QUARTERLY_REPORT&&x(Ie.DASHBOARD))}},Ct=()=>{if(N){const ge=b.find(ve=>ve.id===N);ge&&(document.title=`_${ge.fullName.replace(/\s/g,"_")}`)}window.print()},tr=()=>{const ge=prompt("   :");if(ge){const ve={id:Oi(),fullName:ge,birthDate:"",birthPlace:"",degree:"",recruitmentDate:new Date().toISOString().split("T")[0],rank:"  ",lastInspectionDate:"",lastMark:10,status:"titulaire"};y([...b,ve]),At(ve)}},sr=async(ge,ve)=>{const we=[...b],$e={...P},vt=se.wilaya||Ut.wilaya,Kt=se.district||Ut.district;ge.forEach(Ke=>{const Qt=Ke.fullName.trim().toLowerCase(),Qe=we.findIndex(De=>De.fullName.trim().toLowerCase()===Qt);if(Qe>=0){const De=we[Qe];we[Qe]={...De,birthDate:Ke.birthDate||De.birthDate,birthPlace:Ke.birthPlace||De.birthPlace,degree:Ke.degree||De.degree,degreeDate:Ke.degreeDate||De.degreeDate,recruitmentDate:Ke.recruitmentDate||De.recruitmentDate,rank:Ke.rank||De.rank,currentRankDate:Ke.currentRankDate||De.currentRankDate,echelon:Ke.echelon||De.echelon,echelonDate:Ke.echelonDate||De.echelonDate,lastInspectionDate:Ke.lastInspectionDate||De.lastInspectionDate,lastMark:Ke.lastMark||De.lastMark,status:Ke.status||De.status};const os=ve[Ke.id];if(os){const $s=$e[De.id]||{...on,id:Oi(),teacherId:De.id};$e[De.id]={...$s,school:os.school||$s.school,level:os.level||$s.level,wilaya:$s.wilaya||vt,district:$s.district||Kt}}}else{we.push(Ke);const De=ve[Ke.id];De?$e[Ke.id]={...De,wilaya:vt,district:Kt}:$e[Ke.id]={...on,id:Oi(),teacherId:Ke.id,wilaya:vt,district:Kt}}}),y(we),ie($e);const Ds=localStorage.getItem("mufattish_script_url");if(Ds){J("syncing"),Ee("     Google Sheet...");try{const Ke=_u(we,se,$e);await Iu(Ds,Ke),J("success"),Ee("     ."),setTimeout(()=>J("idle"),3e3)}catch(Ke){console.error("Manual Sync Failed:",Ke),J("error"),Ee("       .")}}alert(`  ${ge.length}  .`)},Jo=(ge,ve,we)=>{y(ge),ie(ve),Y(we),alert("    .")},Os=ge=>{var we;const ve=(we=ge.target.files)==null?void 0:we[0];if(ve){const $e=new FileReader;$e.onloadend=()=>{const vt=$e.result;X(vt),Q(!0),localStorage.setItem("mufattish_signature",vt)},$e.readAsDataURL(ve)}},is=({targetView:ge,icon:ve,label:we})=>e.jsxs("button",{onClick:()=>{ge===Ie.QUARTERLY_REPORT?Wi():x(ge),c(!1)},className:`flex-1 min-w-[40px] md:w-full p-2 rounded-lg transition-all flex items-center justify-center md:justify-start gap-3 ${u===ge?"bg-white text-blue-800 shadow-sm":"hover:bg-white/10 text-blue-100"}`,title:we,children:[e.jsx(ve,{size:18}),e.jsx("span",{className:"hidden md:inline text-sm font-medium",children:we})]}),rs=ee?V:void 0;if(a)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-900",children:e.jsxs("div",{className:"text-center animate-pulse",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("div",{className:"text-blue-400 font-bold font-serif text-xl",children:" "}),e.jsx("div",{className:"text-slate-500 text-sm mt-2",children:"  ..."})]})});if(!n)return e.jsx(Kk,{});const bt=b.find(ge=>ge.id===N),Wn=((Ha=(nr=n.user)==null?void 0:nr.user_metadata)==null?void 0:Ha.full_name)||((gn=(Dl=n.user)==null?void 0:Dl.email)==null?void 0:gn.split("@")[0])||"",el=u===Ie.EDITOR||u===Ie.LEGACY_EDITOR||u===Ie.TENURE_EDITOR;return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 text-gray-900 font-sans p-0 md:p-3 lg:p-4 overflow-hidden h-screen flex flex-col",children:[e.jsxs("div",{className:"print:hidden",children:[e.jsx(LE,{isOpen:$,onClose:()=>C(!1),onUpgrade:()=>{U(!0),C(!1),alert("!     .")}}),e.jsx(Sk,{teacher:A,isOpen:!!A,onClose:()=>I(null),onStartInspection:Zi,onStartLegacyInspection:Rl,onStartTenure:Bo,onUpdateTeacher:Mt})]}),e.jsxs("div",{className:"hidden print:block",children:[bt&&u===Ie.EDITOR&&e.jsx(RE,{report:se,teacher:bt,signature:rs}),bt&&u===Ie.LEGACY_EDITOR&&e.jsx(IE,{report:se,teacher:bt,signature:rs}),bt&&u===Ie.TENURE_EDITOR&&e.jsx(DE,{report:le,teacher:bt,signature:rs}),u===Ie.PROMOTIONS&&e.jsx(fg,{teachers:Xn,reportsMap:P}),u===Ie.QUARTERLY_REPORT&&e.jsx(bb,{report:T,signature:rs})]}),e.jsxs("div",{className:"md:hidden bg-blue-900 text-white p-3 flex justify-between items-center shrink-0 z-50 shadow-md print:hidden",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(bx,{className:"text-blue-300",size:24}),e.jsx("h1",{className:"font-bold font-serif text-lg",children:" "})]}),e.jsx("button",{onClick:()=>c(!0),className:"p-2 bg-white/10 rounded-lg",children:e.jsx(XN,{size:24})})]}),e.jsxs("div",{className:"flex-1 flex gap-4 overflow-hidden relative print:hidden",children:[e.jsx("aside",{className:`
            fixed inset-y-0 right-0 z-50 w-72 bg-gradient-to-br from-blue-800 to-indigo-900 text-white shadow-2xl transform transition-transform duration-300
            md:relative md:translate-x-0 md:w-64 md:rounded-3xl md:shadow-2xl md:border md:border-white/20 md:flex md:flex-col md:overflow-hidden md:shrink-0
            ${o?"translate-x-0":"translate-x-full"}
            print:hidden
        `,children:e.jsxs("div",{className:"p-6 h-full flex flex-col relative overflow-hidden",children:[e.jsx("button",{onClick:()=>c(!1),className:"md:hidden absolute top-4 left-4 p-2 text-white/70 hover:text-white",children:e.jsx(ut,{size:24})}),e.jsxs("div",{className:"relative z-10 flex-1 flex flex-col",children:[e.jsx("div",{className:"hidden md:flex justify-between items-center mb-6",children:e.jsxs("div",{className:"flex items-center gap-2 cursor-pointer group",onClick:()=>x(Ie.DASHBOARD),children:[e.jsx(bx,{className:"text-blue-300 group-hover:rotate-180 transition-transform duration-700",size:28,strokeWidth:1.5}),e.jsx("h1",{className:"text-xl font-bold font-serif tracking-wide",children:" "})]})}),e.jsxs("div",{className:"space-y-1 overflow-y-auto flex-1 custom-scrollbar pr-1 -mr-2",children:[e.jsx(is,{targetView:Ie.DASHBOARD,icon:Nx,label:""}),e.jsx(is,{targetView:Ie.ACQUISITIONS,icon:$u,label:" "}),e.jsx(is,{targetView:Ie.PROMOTIONS,icon:Vu,label:" "}),e.jsx(is,{targetView:Ie.QUARTERLY_REPORT,icon:Hu,label:" "}),e.jsx("div",{className:"my-2 border-t border-white/10"}),e.jsx(is,{targetView:Ie.SEMINARS,icon:pj,label:" "}),e.jsx(is,{targetView:Ie.ADMIN_ASSISTANT,icon:Ki,label:" "}),e.jsx(is,{targetView:Ie.DATABASE,icon:Fu,label:" "})]}),z&&e.jsxs("div",{className:`mt-4 px-3 py-2 rounded-xl flex items-center justify-between backdrop-blur-md border transition-all duration-300 ${ue==="error"?"bg-red-500/20 border-red-400/30":"bg-white/10 border-white/10"}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[ue==="syncing"?e.jsx(Bi,{size:14,className:"animate-spin text-blue-200"}):ue==="error"?e.jsx(Ia,{size:14,className:"text-red-300"}):e.jsx(Bu,{size:14,className:"text-green-300"}),e.jsx("span",{className:"text-[10px] font-bold text-blue-50",children:ue==="syncing"?" ...":ue==="error"?" ":" "})]}),e.jsx("div",{className:`w-2 h-2 rounded-full ${ue==="error"?"bg-red-50":"bg-green-400"} animate-pulse`})]}),e.jsxs("div",{className:"bg-blue-900/40 p-3 rounded-xl border border-blue-400/30 backdrop-blur-md mt-2",children:[e.jsx("label",{className:"text-[10px] text-blue-200 font-bold block mb-1 uppercase tracking-wider",children:"  ()"}),e.jsx("div",{className:"flex items-center gap-2",children:F?e.jsx("input",{type:"text",value:H,onChange:ge=>G(ge.target.value),onBlur:()=>O(!1),autoFocus:!0,className:"w-full bg-blue-950/50 border border-blue-400 rounded px-2 py-1 text-xs text-white focus:outline-none focus:ring-1 focus:ring-blue-300",placeholder:"  ..."}):e.jsxs("div",{onClick:()=>O(!0),className:"flex-1 flex items-center justify-between cursor-pointer hover:bg-white/5 rounded px-2 py-1 transition-colors group",children:[e.jsx("span",{className:"text-sm font-bold truncate",children:H||"  "}),e.jsx(fj,{size:12,className:"text-blue-300 group-hover:text-white"})]})}),V&&e.jsxs("div",{className:"mt-3 pt-2 border-t border-blue-800/50 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-1.5 text-blue-200",children:[e.jsx(Qi,{size:12,className:"text-blue-400"}),e.jsx("span",{className:"text-[10px] font-bold",children:"   "})]}),e.jsx("button",{onClick:()=>Q(!ee),className:`w-8 h-4 rounded-full relative transition-colors duration-300 ${ee?"bg-blue-400":"bg-slate-600/50"}`,title:"/  ",children:e.jsx("div",{className:`absolute top-0.5 w-3 h-3 bg-white rounded-full transition-all duration-300 shadow-sm ${ee?"left-[18px]":"left-0.5"}`})})]})]})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-white/10 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[e.jsx("div",{className:"w-9 h-9 rounded-full bg-gradient-to-br from-blue-100 to-indigo-100 border border-blue-200 flex items-center justify-center text-blue-700 shrink-0 shadow-sm",children:e.jsx($1,{size:20})}),e.jsx("div",{className:"text-xs text-blue-200 truncate max-w-[120px]",children:e.jsx("span",{className:"font-bold text-white text-sm truncate block",title:Wn,children:Wn})})]}),e.jsx("button",{onClick:Vo,className:"p-2 text-red-300 hover:text-red-100 hover:bg-red-500/20 rounded-xl transition-all shadow-sm",title:" ",children:e.jsx(GN,{size:18})})]})]})}),o&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 md:hidden backdrop-blur-sm",onClick:()=>c(!1)}),e.jsxs("main",{className:"flex-1 bg-white/95 backdrop-blur-xl md:rounded-3xl shadow-2xl flex relative overflow-hidden border border-white/20 min-w-0 print:hidden",children:[e.jsx("div",{className:`
                transition-all duration-300 flex flex-col bg-white border-l border-gray-200 z-10 print:hidden
                ${el?"w-80 h-full absolute right-0 md:static transform translate-x-full md:translate-x-0 shadow-xl md:shadow-none block":"hidden"} 
            `,children:e.jsx(_x,{teachers:Xn,reportsMap:P,currentReport:se,onSelect:At,selectedId:N,onAddNew:tr,onImport:sr,onDelete:_s,availableSchools:Al,availableLevels:Ml,filterSchool:ae,filterLevel:Qn,onSetFilterSchool:Je,onSetFilterLevel:qa})}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden relative w-full print:hidden",children:[u===Ie.DASHBOARD&&e.jsxs("div",{className:"flex flex-col h-full bg-slate-50/50",children:[e.jsxs("div",{className:"bg-white border-b px-6 py-3 flex justify-between items-center shadow-sm shrink-0 z-20",children:[e.jsxs("h1",{className:"text-xl font-bold text-slate-800 font-serif flex items-center gap-2",children:[e.jsx(Nx,{className:"text-blue-600"})," "]}),e.jsxs("div",{className:"flex bg-slate-100 p-1 rounded-xl",children:[e.jsxs("button",{onClick:()=>p("stats"),className:`px-4 py-2 rounded-lg text-sm font-bold flex items-center gap-2 transition-all ${h==="stats"?"bg-white text-blue-700 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:[e.jsx(T1,{size:18}),""]}),e.jsxs("button",{onClick:()=>p("list"),className:`px-4 py-2 rounded-lg text-sm font-bold flex items-center gap-2 transition-all ${h==="list"?"bg-white text-blue-700 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:[e.jsx(Bn,{size:18})," "]})]})]}),e.jsx("div",{className:"flex-1 overflow-hidden relative",children:h==="stats"?e.jsx("div",{className:"h-full overflow-y-auto animate-in fade-in slide-in-from-bottom-2 duration-300",children:e.jsx(_k,{teachers:Xn,reportsMap:P,onNavigateToPromotions:()=>x(Ie.PROMOTIONS),fullTeacherCount:b.length,selectedSchool:ae})}):e.jsx("div",{className:"h-full p-6 animate-in fade-in slide-in-from-right-2 duration-300",children:e.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 h-full overflow-hidden flex flex-col",children:e.jsx("div",{className:"flex-1 overflow-hidden",children:e.jsx(_x,{teachers:Xn,reportsMap:P,currentReport:se,onSelect:At,selectedId:N,onAddNew:tr,onImport:sr,onDelete:_s,availableSchools:Al,availableLevels:Ml,filterSchool:ae,filterLevel:Qn,onSetFilterSchool:Je,onSetFilterLevel:qa})})})})})]}),u===Ie.DATABASE&&e.jsx(wk,{teachers:b,reportsMap:P,tenureReportsMap:q,onRestore:Jo,currentReport:se,onConnectionChange:W,isConnected:z,onAutoSyncChange:_e,isAutoSync:Re}),u===Ie.ACQUISITIONS&&e.jsx(Hk,{availableSchools:Oa,onDataUpdated:()=>k(ge=>ge+1),externalFilters:D,onUpdateFilters:ge=>j(ve=>({...ve,...ge}))}),u===Ie.PROMOTIONS&&e.jsx(fg,{teachers:Xn,reportsMap:P}),u===Ie.EDITOR&&bt&&e.jsx(kE,{report:se,teacher:bt,onChange:er,onTeacherChange:Mt,onPrint:Ct,isGoldMember:L,onUpgradeClick:()=>C(!0),onUploadSignature:Os}),u===Ie.LEGACY_EDITOR&&bt&&e.jsx(ME,{report:se,teacher:bt,onChange:er,onTeacherChange:Mt,onPrint:Ct,isGoldMember:L,onUpgradeClick:()=>C(!0),onUploadSignature:Os}),u===Ie.TENURE_EDITOR&&bt&&e.jsx(AE,{report:le,teacher:bt,onChange:Fo,onPrint:Ct,isGoldMember:L,onUploadSignature:Os}),u===Ie.QUARTERLY_REPORT&&e.jsx(zE,{report:T,onChange:Zn,onPrint:Ct,teachers:b,reportsMap:P,tenureReportsMap:q,signature:rs,onUploadSignature:Os,inspectorName:H,globalWilaya:Ut.wilaya,globalDistrict:Ut.district}),u===Ie.SEMINARS&&e.jsx(Gk,{teachers:b,reportsMap:P,inspectorInfo:{name:se.inspectorName||H,district:Ut.district,wilaya:Ut.wilaya},signature:rs}),u===Ie.ADMIN_ASSISTANT&&e.jsx(Yk,{teachers:b,reportsMap:P,tenureReportsMap:q,inspectorName:se.inspectorName||H,wilaya:Ut.wilaya,district:Ut.district,signature:rs})]})]})]})]})},qb=document.getElementById("root");if(!qb)throw new Error("Could not find root element to mount to");const Xk=i1.createRoot(qb);Xk.render(e.jsx(Cl.StrictMode,{children:e.jsx(Qk,{})}));export{_g as g};
